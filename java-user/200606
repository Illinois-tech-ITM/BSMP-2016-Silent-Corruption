From java-user-return-21049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 07:07:24 2006
Return-Path: <java-user-return-21049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71931 invoked from network); 1 Jun 2006 07:07:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 07:07:24 -0000
Received: (qmail 65956 invoked by uid 500); 1 Jun 2006 07:07:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65865 invoked by uid 500); 1 Jun 2006 07:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65835 invoked by uid 99); 1 Jun 2006 07:07:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 00:07:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.200.76.18] (HELO mail4.niit.com) (203.200.76.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 00:07:11 -0700
Received: from 172.17.8.245 [172.17.8.245]
	by mail4.niit.com
	with XWall v3.33 ;
	Thu, 1 Jun 2006 12:36:46 +0530
Received: by ho-kkj-msg3.in.niit.com with Internet Mail Service (5.5.2657.72)
	id <L9CJ0QWF>; Thu, 1 Jun 2006 12:36:46 +0530
From: Amaresh Kumar Yadav <Amaresh.Yadav@niit.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Hi Alexey : How to search "TITLE" field only
Date: Thu, 1 Jun 2006 12:36:46 +0530
X-Assembled-By: XWall v3.33
X-Mailer: Internet Mail Service (5.5.2657.72)
Message-ID: <934F531A825AFF4F863658E2402E064707723B5D@ho-kkj-msg3.in.niit.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Alexey,

I want to search string into "TITLE" field only then how should add this
field to doc.

Regards..

Amaresh

-----Original Message-----
From: Alexey Sorokin [mailto:alsor.net@gmail.com]
Sent: Wednesday, May 31, 2006 4:21 PM
To: java-user@lucene.apache.org
Subject: Re: how to craete index with particular ID


Actually you don't need to create text file. Get data from db and
create Document that put in index. At least you must store ID of row
in Document. Or you may store doctitle and docpath too.

For each row you shoul do something like this:

import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

Document doc =3D new Document();
doc.add(new Field("ID", [here you row ID value], Field.Store.YES,
Field.Index.UN_TOKENIZED));
doc.add(new Field("TITLE", [here value of doctitle field],
Field.Store.NO, Field.Index.TOKENIZED));
doc.add(new Field("PATH", [here value of docpath field],
Field.Store.NO, Field.Index.TOKENIZED));
indexWriter.addDocument(doc);

After searcing you have Hits, get doc from Hits and get value of "ID"
field of that doc - now you may get row from table by ID and receive
any data.

2006/5/31, Amaresh Kumar Yadav <Amaresh.Yadav@niit.com>:
> Hi All,
>
> Infact i want to search data which is stored  in a table on oracle...
>
> my table contains two fields "doctitle" and "docpath", first
field(doctitle)
> represents location of some document and second field(docpath)represents
> documents title.
>
> I want to apply lucene search on doctitle.
>
> What i want to do for  search ...
>
> First create a text file which contains data(that is retrived by oracle
> query) which is stored in table.
>
> Now i want to creat index for this file.
>
> now i want to search on title of document which is stored in the text
file.
>
> after searching i want to disply corresponding path from index file.
>
> How should i creat such index file  ???
>
> how should i proceed????
>
>
> With Thanks & Regards
>
> Amaresh
>
> ----------------------------------------------------------------------
> DISCLAIMER
>
> This email and any files transmitted with it are confidential and are
solely for the use of the individual or entity to which it is addressed. Any
use, distribution, copying or disclosure by any other person is strictly
prohibited. If you receive this transmission in error, please notify the
sender by reply email and then destroy the message. Opinions, conclusions
and other information in this message that do not relate to official
business of the company shall be understood to be neither given nor endorsed
by NIIT Ltd. or NIIT Technologies Ltd. Any information contained in this
email, when addressed to Clients is subject to the terms and conditions in
governing client contract.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
ICQ: 166072598

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

----------------------------------------------------------------------
DISCLAIMER

This email and any files transmitted with it are confidential and are solely=
 for the use of the individual or entity to which it is addressed. Any use, =
distribution, copying or disclosure by any other person is strictly prohibit=
ed. If you receive this transmission in error, please notify the sender by r=
eply email and then destroy the message. Opinions, conclusions and other inf=
ormation in this message that do not relate to official business of the comp=
any shall be understood to be neither given nor endorsed by NIIT Ltd. or NII=
T Technologies Ltd. Any information contained in this email, when addressed =
to Clients is subject to the terms and conditions in governing client contra=
ct.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 07:34:14 2006
Return-Path: <java-user-return-21050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84745 invoked from network); 1 Jun 2006 07:34:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 07:34:14 -0000
Received: (qmail 90502 invoked by uid 500); 1 Jun 2006 07:34:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90123 invoked by uid 500); 1 Jun 2006 07:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90112 invoked by uid 99); 1 Jun 2006 07:34:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 00:34:06 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.245] (HELO web26208.mail.ukl.yahoo.com) (217.12.10.245)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jun 2006 00:34:03 -0700
Received: (qmail 26324 invoked by uid 60001); 1 Jun 2006 07:33:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.es;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=3ZwQDbx00nIMtglpKwAxFX+ffxiQb3O+uZi7LcagVsxicW0NcVQfFdgvOkL2AO9k3Qzo4r89JTYjH37Xu01XvLJhajYlftIcDt1M6iYHSmUuewfUsBiCr1yoBTMdDZF+laOf15mvZBpIiOUZKu49ex9weBaqBi2DHtcfE8uMKR0=  ;
Message-ID: <20060601073341.26322.qmail@web26208.mail.ukl.yahoo.com>
Received: from [195.55.30.21] by web26208.mail.ukl.yahoo.com via HTTP; Thu, 01 Jun 2006 09:33:41 CEST
Date: Thu, 1 Jun 2006 09:33:41 +0200 (CEST)
From: =?iso-8859-1?q?Alberto=20Marqu=FFffffe9s?= <alberto_marques@yahoo.es>
Subject: Problems with Lucene
To: lucene <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1925205343-1149147221=:26045"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1925205343-1149147221=:26045
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Problems with Lucene executing from Web with jsf. I do not understand because perhaps Lucene cannot be used in applications Web? 

This is the instruction that gives error: 

    IndexSearcher oIndexSearcher = new IndexSearcher("C:\\opt\\index");
    Query query = QueryParser.parse(sCadenaBusqueda,"contents",new SimpleAnalyzer());



this it is the message of error of jsf:

type Informe de Excepción

mensaje

descripción El servidor encontró un error interno () que hizo que no pudiera rellenar este requerimiento.

excepción

javax.servlet.ServletException: Error calling action method of component with id helloForm:submit
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
    org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter(ExtensionsFilter.java:122)

causa raíz

javax.faces.FacesException: Error calling action method of component with id helloForm:submit
    org.apache.myfaces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:74)
    javax.faces.component.UICommand.broadcast(UICommand.java:106)
    javax.faces.component.UIViewRoot._broadcastForPhase(UIViewRoot.java:90)
    javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:164)
    org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication(LifecycleImpl.java:316)
    org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:86)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
    org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter(ExtensionsFilter.java:122)
		
---------------------------------

LLama Gratis a cualquier PC del Mundo.
Llamadas a fijos y móviles desde 1 céntimo por minuto.
http://es.voice.yahoo.com
--0-1925205343-1149147221=:26045--

From java-user-return-21051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 07:49:36 2006
Return-Path: <java-user-return-21051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88346 invoked from network); 1 Jun 2006 07:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 07:49:36 -0000
Received: (qmail 8984 invoked by uid 500); 1 Jun 2006 07:49:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7972 invoked by uid 500); 1 Jun 2006 07:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7960 invoked by uid 99); 1 Jun 2006 07:49:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 00:49:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 72.14.204.237 as permitted sender)
Received: from [72.14.204.237] (HELO qb-out-0506.google.com) (72.14.204.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 00:49:29 -0700
Received: by qb-out-0506.google.com with SMTP id c8so61171qbc
        for <java-user@lucene.apache.org>; Thu, 01 Jun 2006 00:49:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=NIVnieCkrljuA9f8MOlANM/49SUWUwc0ettv8MD+XOP5SeB+1JjJ24rYUjSSjf04dtu79IHRUxXK6SlWZ7JIGOOJRHqTbe8BUPh1x6JztNkplOSsRm/r2vlY5GTnkzBgG8iuNU8i5vX5trAN8zTJB6QddSL7FQz63Y89PIX4qMU=
Received: by 10.37.21.52 with SMTP id y52mr494197nzi;
        Thu, 01 Jun 2006 00:49:08 -0700 (PDT)
Received: by 10.36.113.1 with HTTP; Thu, 1 Jun 2006 00:49:08 -0700 (PDT)
Message-ID: <6c33f9950606010049i58f1629am297f6d632b416236@mail.gmail.com>
Date: Thu, 1 Jun 2006 15:49:08 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Getting all the matching documents for a search
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I use Hits to search for and get documents matching a particular query, e.g.:
Hits hits = indexSearcher.search(new TermQuery(new Term("startswith","A")));

but it is not returning all the matching documents in the index. From
experimentation it appears to return about less than half the matching
documents unless the number of matching documents is less than 100. Is
there an option that I can specify so that it returns the whole list
of matching documents?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 08:08:46 2006
Return-Path: <java-user-return-21052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91623 invoked from network); 1 Jun 2006 08:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 08:08:45 -0000
Received: (qmail 25321 invoked by uid 500); 1 Jun 2006 08:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25295 invoked by uid 500); 1 Jun 2006 08:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25284 invoked by uid 99); 1 Jun 2006 08:08:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 01:08:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 01:08:36 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CA04A33CB67; Thu,  1 Jun 2006 04:08:15 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9BC6333CB63
	for <java-user@lucene.apache.org>; Thu,  1 Jun 2006 04:08:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <20060601073341.26322.qmail@web26208.mail.ukl.yahoo.com>
References: <20060601073341.26322.qmail@web26208.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <C56B3E63-D63A-4D87-A3FC-9587BF07519F@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Problems with Lucene
Date: Thu, 1 Jun 2006 04:08:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is not a Lucene issue... the stack trace mentions nothing about =20
Lucene.

	Erik


On Jun 1, 2006, at 3:33 AM, Alberto Marqu=FFffffe9s wrote:

> Problems with Lucene executing from Web with jsf. I do not =20
> understand because perhaps Lucene cannot be used in applications Web?
>
> This is the instruction that gives error:
>
>     IndexSearcher oIndexSearcher =3D new IndexSearcher("C:\\opt\=20
> \index");
>     Query query =3D QueryParser.parse(sCadenaBusqueda,"contents",new =20=

> SimpleAnalyzer());
>
>
>
> this it is the message of error of jsf:
>
> type Informe de Excepci=F3n
>
> mensaje
>
> descripci=F3n El servidor encontr=F3 un error interno () que hizo que =20=

> no pudiera rellenar este requerimiento.
>
> excepci=F3n
>
> javax.servlet.ServletException: Error calling action method of =20
> component with id helloForm:submit
>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter=20=

> (ExtensionsFilter.java:122)
>
> causa ra=EDz
>
> javax.faces.FacesException: Error calling action method of =20
> component with id helloForm:submit
>     org.apache.myfaces.application.ActionListenerImpl.processAction=20
> (ActionListenerImpl.java:74)
>     javax.faces.component.UICommand.broadcast(UICommand.java:106)
>     javax.faces.component.UIViewRoot._broadcastForPhase=20
> (UIViewRoot.java:90)
>     javax.faces.component.UIViewRoot.processApplication=20
> (UIViewRoot.java:164)
>     org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication=20
> (LifecycleImpl.java:316)
>     org.apache.myfaces.lifecycle.LifecycleImpl.execute=20
> (LifecycleImpl.java:86)
>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter=20=

> (ExtensionsFilter.java:122)
> 	=09
> ---------------------------------
>
> LLama Gratis a cualquier PC del Mundo.
> Llamadas a fijos y m=F3viles desde 1 c=E9ntimo por minuto.
> http://es.voice.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 08:11:44 2006
Return-Path: <java-user-return-21053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92539 invoked from network); 1 Jun 2006 08:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 08:11:44 -0000
Received: (qmail 32352 invoked by uid 500); 1 Jun 2006 08:11:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32011 invoked by uid 500); 1 Jun 2006 08:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32000 invoked by uid 99); 1 Jun 2006 08:11:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 01:11:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 01:11:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5B99033CB67; Thu,  1 Jun 2006 04:11:14 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 5F6CE33CB63
	for <java-user@lucene.apache.org>; Thu,  1 Jun 2006 04:11:11 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <6c33f9950606010049i58f1629am297f6d632b416236@mail.gmail.com>
References: <6c33f9950606010049i58f1629am297f6d632b416236@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2FC6DD96-B386-4CD5-BD32-6368A047CC6E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Getting all the matching documents for a search
Date: Thu, 1 Jun 2006 04:11:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.9 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 1, 2006, at 3:49 AM, Chun Wei Ho wrote:
> I use Hits to search for and get documents matching a particular  
> query, e.g.:
> Hits hits = indexSearcher.search(new TermQuery(new Term 
> ("startswith","A")));
>
> but it is not returning all the matching documents in the index. From
> experimentation it appears to return about less than half the matching
> documents unless the number of matching documents is less than 100. Is
> there an option that I can specify so that it returns the whole list
> of matching documents?

What do you mean it is not returning all of the documents?  If you  
iterate through the documents provided by Hits it will return _all_  
documents that match that Query.  I recommend you have a look at your  
index with Luke and ensure things are indexed as you expect.  There  
are other IndexSearcher.search() methods you can use that use  
HitCollector or return TopDocs instead of Hits - you could use those  
but the issue is likely nothing those methods would fix.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 08:29:52 2006
Return-Path: <java-user-return-21054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96414 invoked from network); 1 Jun 2006 08:29:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 08:29:51 -0000
Received: (qmail 57356 invoked by uid 500); 1 Jun 2006 08:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56311 invoked by uid 500); 1 Jun 2006 08:29:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56300 invoked by uid 99); 1 Jun 2006 08:29:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 01:29:45 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.245] (HELO web26208.mail.ukl.yahoo.com) (217.12.10.245)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jun 2006 01:29:44 -0700
Received: (qmail 47334 invoked by uid 60001); 1 Jun 2006 08:29:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.es;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RCU0kDLBGnll7WLpeWW13vj15GBIwlU0HXQ1p9jEY6CyWl30JiKuam3yWPCglaJBVDskjCvskLvQyuLuYTHWR6LWZgtS7DJWxxyC2LhQs7hvshKwx/MotX/I7NJZhoZ+dnSfomVVV+fywxYDfoa3W1p+TjMy2i8aT7BAa9bIlXo=  ;
Message-ID: <20060601082923.47332.qmail@web26208.mail.ukl.yahoo.com>
Received: from [195.55.30.21] by web26208.mail.ukl.yahoo.com via HTTP; Thu, 01 Jun 2006 10:29:23 CEST
Date: Thu, 1 Jun 2006 10:29:23 +0200 (CEST)
From: =?iso-8859-1?q?Alberto=20Marqu=FFffffe9s?= <alberto_marques@yahoo.es>
Subject: Re: Problems with Lucene
To: java-user@lucene.apache.org
In-Reply-To: <C56B3E63-D63A-4D87-A3FC-9587BF07519F@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-896639277-1149150563=:46735"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-896639277-1149150563=:46735
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

That is truth but when executing from jsf it gives east error. I want to know if pués is some subject of mutual incompatibility from a class main works these sentences are the adapted ones to execute from an application Web?

Erik Hatcher <erik@ehatchersolutions.com> escribió: This is not a Lucene issue... the stack trace mentions nothing about  
Lucene.

 Erik


On Jun 1, 2006, at 3:33 AM, Alberto Marquÿffffe9s wrote:

> Problems with Lucene executing from Web with jsf. I do not  
> understand because perhaps Lucene cannot be used in applications Web?
>
> This is the instruction that gives error:
>
>     IndexSearcher oIndexSearcher = new IndexSearcher("C:\\opt\ 
> \index");
>     Query query = QueryParser.parse(sCadenaBusqueda,"contents",new  
> SimpleAnalyzer());
>
>
>
> this it is the message of error of jsf:
>
> type Informe de Excepción
>
> mensaje
>
> descripción El servidor encontró un error interno () que hizo que  
> no pudiera rellenar este requerimiento.
>
> excepción
>
> javax.servlet.ServletException: Error calling action method of  
> component with id helloForm:submit
>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter 
> (ExtensionsFilter.java:122)
>
> causa raíz
>
> javax.faces.FacesException: Error calling action method of  
> component with id helloForm:submit
>     org.apache.myfaces.application.ActionListenerImpl.processAction 
> (ActionListenerImpl.java:74)
>     javax.faces.component.UICommand.broadcast(UICommand.java:106)
>     javax.faces.component.UIViewRoot._broadcastForPhase 
> (UIViewRoot.java:90)
>     javax.faces.component.UIViewRoot.processApplication 
> (UIViewRoot.java:164)
>     org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication 
> (LifecycleImpl.java:316)
>     org.apache.myfaces.lifecycle.LifecycleImpl.execute 
> (LifecycleImpl.java:86)
>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter 
> (ExtensionsFilter.java:122)
>   
> ---------------------------------
>
> LLama Gratis a cualquier PC del Mundo.
> Llamadas a fijos y móviles desde 1 céntimo por minuto.
> http://es.voice.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



		
---------------------------------

LLama Gratis a cualquier PC del Mundo.
Llamadas a fijos y móviles desde 1 céntimo por minuto.
http://es.voice.yahoo.com
--0-896639277-1149150563=:46735--

From java-user-return-21055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 09:06:40 2006
Return-Path: <java-user-return-21055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9987 invoked from network); 1 Jun 2006 09:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 09:06:40 -0000
Received: (qmail 94586 invoked by uid 500); 1 Jun 2006 09:06:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94433 invoked by uid 500); 1 Jun 2006 09:06:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94422 invoked by uid 99); 1 Jun 2006 09:06:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:06:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alsor.net@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:06:31 -0700
Received: by nf-out-0910.google.com with SMTP id x4so475009nfb
        for <java-user@lucene.apache.org>; Thu, 01 Jun 2006 02:06:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=o8DBJzNPxonhi4jh7KLp6ErKAMkAM6omQJmwGMw3PPfGJExCrAaLa2toSD4mEzlYBQ8mQA4t2coLylZmD/mweHLnRzyECB9XDEx9DnQcRNEnK04S5mcuMvzvUBtYwtF87OEnQFnhtSK7AQHtp5IcMdqR8yiTvdkQM05c+0gcvGA=
Received: by 10.49.94.5 with SMTP id w5mr135435nfl;
        Thu, 01 Jun 2006 02:05:42 -0700 (PDT)
Received: by 10.48.214.7 with HTTP; Thu, 1 Jun 2006 02:05:42 -0700 (PDT)
Message-ID: <3572a02b0606010205q2686e5e3i759f2ff8ce40eb1c@mail.gmail.com>
Date: Thu, 1 Jun 2006 13:05:42 +0400
From: "Alexey Sorokin" <alsor.net@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to craete index with particular ID
In-Reply-To: <934F531A825AFF4F863658E2402E0647076E5460@ho-kkj-msg3.in.niit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <934F531A825AFF4F863658E2402E0647076E5460@ho-kkj-msg3.in.niit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

First of all you must understand that there is two stage: creating
index and searching by it.
I tell you olny how to create index.

To perform search you must do something like this:

IndexSearcher isearcher = new IndexSearcher(directory);
Query query = QueryParser.parse("text", "fieldname", analyzer);
Hits hits = isearcher.search(query);

"test" - is text of you query
"fieldname" - in you case is "TITLE"

of course if you don't going to search by "PATH" - you may not include
it in index.

I recommend tou consider this link:
http://lucene.apache.org/java/docs/api/overview-summary.html#overview_description

2006/6/1, Amaresh Kumar Yadav <Amaresh.Yadav@niit.com>:
> i want to search for text into "title" field only.
>
> how shuold i specify it?
>
> Regards..
> Amaresh
>
> -----Original Message-----
> From: Alexey Sorokin [mailto:alsor.net@gmail.com]
> Sent: Wednesday, May 31, 2006 4:21 PM
> To: java-user@lucene.apache.org
> Subject: Re: how to craete index with particular ID
>
>
> Actually you don't need to create text file. Get data from db and
> create Document that put in index. At least you must store ID of row
> in Document. Or you may store doctitle and docpath too.
>
> For each row you shoul do something like this:
>
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
>
> Document doc = new Document();
> doc.add(new Field("ID", [here you row ID value], Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.add(new Field("TITLE", [here value of doctitle field],
> Field.Store.NO, Field.Index.TOKENIZED));
> doc.add(new Field("PATH", [here value of docpath field],
> Field.Store.NO, Field.Index.TOKENIZED));
> indexWriter.addDocument(doc);
>
> After searcing you have Hits, get doc from Hits and get value of "ID"
> field of that doc - now you may get row from table by ID and receive
> any data.
>
> 2006/5/31, Amaresh Kumar Yadav <Amaresh.Yadav@niit.com>:
> > Hi All,
> >
> > Infact i want to search data which is stored  in a table on oracle...
> >
> > my table contains two fields "doctitle" and "docpath", first
> field(doctitle)
> > represents location of some document and second field(docpath)represents
> > documents title.
> >
> > I want to apply lucene search on doctitle.
> >
> > What i want to do for  search ...
> >
> > First create a text file which contains data(that is retrived by oracle
> > query) which is stored in table.
> >
> > Now i want to creat index for this file.
> >
> > now i want to search on title of document which is stored in the text
> file.
> >
> > after searching i want to disply corresponding path from index file.
> >
> > How should i creat such index file  ???
> >
> > how should i proceed????
> >
> >
> > With Thanks & Regards
> >
> > Amaresh
> >
> > ----------------------------------------------------------------------
> > DISCLAIMER
> >
> > This email and any files transmitted with it are confidential and are
> solely for the use of the individual or entity to which it is addressed. Any
> use, distribution, copying or disclosure by any other person is strictly
> prohibited. If you receive this transmission in error, please notify the
> sender by reply email and then destroy the message. Opinions, conclusions
> and other information in this message that do not relate to official
> business of the company shall be understood to be neither given nor endorsed
> by NIIT Ltd. or NIIT Technologies Ltd. Any information contained in this
> email, when addressed to Clients is subject to the terms and conditions in
> governing client contract.
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> ICQ: 166072598
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ----------------------------------------------------------------------
> DISCLAIMER
>
> This email and any files transmitted with it are confidential and are solely for the use of the individual or entity to which it is addressed. Any use, distribution, copying or disclosure by any other person is strictly prohibited. If you receive this transmission in error, please notify the sender by reply email and then destroy the message. Opinions, conclusions and other information in this message that do not relate to official business of the company shall be understood to be neither given nor endorsed by NIIT Ltd. or NIIT Technologies Ltd. Any information contained in this email, when addressed to Clients is subject to the terms and conditions in governing client contract.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
ICQ: 166072598

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 09:12:27 2006
Return-Path: <java-user-return-21056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11687 invoked from network); 1 Jun 2006 09:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 09:12:26 -0000
Received: (qmail 2661 invoked by uid 500); 1 Jun 2006 09:12:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2631 invoked by uid 500); 1 Jun 2006 09:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2620 invoked by uid 99); 1 Jun 2006 09:12:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:12:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:12:16 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B6AA633CB69; Thu,  1 Jun 2006 05:11:54 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 4BBE633CB66
	for <java-user@lucene.apache.org>; Thu,  1 Jun 2006 05:11:52 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <20060601082923.47332.qmail@web26208.mail.ukl.yahoo.com>
References: <20060601082923.47332.qmail@web26208.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <47116486-C1B8-486F-80F0-E2B569A11557@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Problems with Lucene
Date: Thu, 1 Jun 2006 05:11:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 1, 2006, at 4:29 AM, Alberto Marqu=FFffffe9s wrote:
> That is truth but when executing from jsf it gives east error. I =20
> want to know if pu=E9s is some subject of mutual incompatibility from =20=

> a class main works these sentences are the adapted ones to execute =20
> from an application Web?

There is no incompatibility with Lucene and the web.  http://=20
www.lucenebook.com - a Tapestry application (JSF alternative) using =20
Lucene.

I recommend you write some simple Java main() code to interact with =20
Lucene and build up to the web from there once you've got a piece =20
working.

	Erik


>
> Erik Hatcher <erik@ehatchersolutions.com> escribi=F3: This is not a =20=

> Lucene issue... the stack trace mentions nothing about
> Lucene.
>
>  Erik
>
>
> On Jun 1, 2006, at 3:33 AM, Alberto Marqu=FFffffe9s wrote:
>
>> Problems with Lucene executing from Web with jsf. I do not
>> understand because perhaps Lucene cannot be used in applications Web?
>>
>> This is the instruction that gives error:
>>
>>     IndexSearcher oIndexSearcher =3D new IndexSearcher("C:\\opt\
>> \index");
>>     Query query =3D QueryParser.parse(sCadenaBusqueda,"contents",new
>> SimpleAnalyzer());
>>
>>
>>
>> this it is the message of error of jsf:
>>
>> type Informe de Excepci=F3n
>>
>> mensaje
>>
>> descripci=F3n El servidor encontr=F3 un error interno () que hizo que
>> no pudiera rellenar este requerimiento.
>>
>> excepci=F3n
>>
>> javax.servlet.ServletException: Error calling action method of
>> component with id helloForm:submit
>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> causa ra=EDz
>>
>> javax.faces.FacesException: Error calling action method of
>> component with id helloForm:submit
>>     org.apache.myfaces.application.ActionListenerImpl.processAction
>> (ActionListenerImpl.java:74)
>>     javax.faces.component.UICommand.broadcast(UICommand.java:106)
>>     javax.faces.component.UIViewRoot._broadcastForPhase
>> (UIViewRoot.java:90)
>>     javax.faces.component.UIViewRoot.processApplication
>> (UIViewRoot.java:164)
>>     org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication
>> (LifecycleImpl.java:316)
>>     org.apache.myfaces.lifecycle.LifecycleImpl.execute
>> (LifecycleImpl.java:86)
>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> ---------------------------------
>>
>> LLama Gratis a cualquier PC del Mundo.
>> Llamadas a fijos y m=F3viles desde 1 c=E9ntimo por minuto.
>> http://es.voice.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> 	=09
> ---------------------------------
>
> LLama Gratis a cualquier PC del Mundo.
> Llamadas a fijos y m=F3viles desde 1 c=E9ntimo por minuto.
> http://es.voice.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 09:21:57 2006
Return-Path: <java-user-return-21057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14102 invoked from network); 1 Jun 2006 09:21:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 09:21:57 -0000
Received: (qmail 12952 invoked by uid 500); 1 Jun 2006 09:21:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12926 invoked by uid 500); 1 Jun 2006 09:21:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12913 invoked by uid 99); 1 Jun 2006 09:21:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:21:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.45] (HELO web26213.mail.ukl.yahoo.com) (217.146.177.45)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jun 2006 02:21:48 -0700
Received: (qmail 1502 invoked by uid 60001); 1 Jun 2006 09:21:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.es;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ecLC6vMHhh5WCq3FUPeuSX73M6CjqG0OQ09fmgStZCp1KI7ABUeBCcAJ7X+SPuHWC+lOvacyEhBHFylfzSUGAS4Pi2qzO7wKQQSjhJGd3W4sK7s7Q1vXKXI7WzwxSiWd6+d544y0mvdHwbRbas/LuMPHpr6pGjlObJ3+DtgdxcI=  ;
Message-ID: <20060601092126.1500.qmail@web26213.mail.ukl.yahoo.com>
Received: from [195.55.30.21] by web26213.mail.ukl.yahoo.com via HTTP; Thu, 01 Jun 2006 11:21:26 CEST
Date: Thu, 1 Jun 2006 11:21:26 +0200 (CEST)
From: =?iso-8859-1?q?Alberto=20Marqu=FFffffe9s?= <alberto_marques@yahoo.es>
Subject: Re: Problems with Lucene
To: java-user@lucene.apache.org
In-Reply-To: <47116486-C1B8-486F-80F0-E2B569A11557@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1714792360-1149153686=:409"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1714792360-1149153686=:409
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I cosay works with a Java class main(). But to the being executed from JSF this not saying to me that there are problems of mutual incompatibility when recommending to me Tapestry.

Erik Hatcher <erik@ehatchersolutions.com> escribió: 
On Jun 1, 2006, at 4:29 AM, Alberto Marquÿffffe9s wrote:
> That is truth but when executing from jsf it gives east error. I  
> want to know if pués is some subject of mutual incompatibility from  
> a class main works these sentences are the adapted ones to execute  
> from an application Web?

There is no incompatibility with Lucene and the web.  http:// 
www.lucenebook.com - a Tapestry application (JSF alternative) using  
Lucene.

I recommend you write some simple Java main() code to interact with  
Lucene and build up to the web from there once you've got a piece  
working.

 Erik


>
> Erik Hatcher  escribió: This is not a  
> Lucene issue... the stack trace mentions nothing about
> Lucene.
>
>  Erik
>
>
> On Jun 1, 2006, at 3:33 AM, Alberto Marquÿffffe9s wrote:
>
>> Problems with Lucene executing from Web with jsf. I do not
>> understand because perhaps Lucene cannot be used in applications Web?
>>
>> This is the instruction that gives error:
>>
>>     IndexSearcher oIndexSearcher = new IndexSearcher("C:\\opt\
>> \index");
>>     Query query = QueryParser.parse(sCadenaBusqueda,"contents",new
>> SimpleAnalyzer());
>>
>>
>>
>> this it is the message of error of jsf:
>>
>> type Informe de Excepción
>>
>> mensaje
>>
>> descripción El servidor encontró un error interno () que hizo que
>> no pudiera rellenar este requerimiento.
>>
>> excepción
>>
>> javax.servlet.ServletException: Error calling action method of
>> component with id helloForm:submit
>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> causa raíz
>>
>> javax.faces.FacesException: Error calling action method of
>> component with id helloForm:submit
>>     org.apache.myfaces.application.ActionListenerImpl.processAction
>> (ActionListenerImpl.java:74)
>>     javax.faces.component.UICommand.broadcast(UICommand.java:106)
>>     javax.faces.component.UIViewRoot._broadcastForPhase
>> (UIViewRoot.java:90)
>>     javax.faces.component.UIViewRoot.processApplication
>> (UIViewRoot.java:164)
>>     org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication
>> (LifecycleImpl.java:316)
>>     org.apache.myfaces.lifecycle.LifecycleImpl.execute
>> (LifecycleImpl.java:86)
>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> ---------------------------------
>>
>> LLama Gratis a cualquier PC del Mundo.
>> Llamadas a fijos y móviles desde 1 céntimo por minuto.
>> http://es.voice.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   
> ---------------------------------
>
> LLama Gratis a cualquier PC del Mundo.
> Llamadas a fijos y móviles desde 1 céntimo por minuto.
> http://es.voice.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



		
---------------------------------

LLama Gratis a cualquier PC del Mundo.
Llamadas a fijos y móviles desde 1 céntimo por minuto.
http://es.voice.yahoo.com
--0-1714792360-1149153686=:409--

From java-user-return-21058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 09:30:08 2006
Return-Path: <java-user-return-21058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17700 invoked from network); 1 Jun 2006 09:30:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 09:30:07 -0000
Received: (qmail 36936 invoked by uid 500); 1 Jun 2006 09:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36853 invoked by uid 500); 1 Jun 2006 09:29:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36829 invoked by uid 99); 1 Jun 2006 09:29:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:29:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.44] (HELO web26212.mail.ukl.yahoo.com) (217.146.177.44)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jun 2006 02:29:50 -0700
Received: (qmail 33259 invoked by uid 60001); 1 Jun 2006 09:29:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.es;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=yqWtZjeN0SmdJ2KFif8/h7O1J24jIqjPRnLJ4K/hdah25Rjl70YqDREERxOGxq4aLecNR+1/tAvMCkVwaMT0T6R0j+f1VOecbZQ3YTqGC4oP8hvpJ/bpXzNaoVRVgm8UUIxw57psPSg6lta55Tn7G1c9J412lwsS3np/RkVIA2c=  ;
Message-ID: <20060601092929.33257.qmail@web26212.mail.ukl.yahoo.com>
Received: from [195.55.30.21] by web26212.mail.ukl.yahoo.com via HTTP; Thu, 01 Jun 2006 11:29:29 CEST
Date: Thu, 1 Jun 2006 11:29:29 +0200 (CEST)
From: =?iso-8859-1?q?Alberto=20Marqu=FFffffe9s?= <alberto_marques@yahoo.es>
Subject: Re: Problems with Lucene
To: java-user@lucene.apache.org
In-Reply-To: <47116486-C1B8-486F-80F0-E2B569A11557@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-778618134-1149154169=:32302"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-778618134-1149154169=:32302
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

The code works with a Java class main(). But to the being executed from JSF this not saying to me that there are problems of mutual incompatibility when recommending to me

Erik Hatcher <erik@ehatchersolutions.com> escribió: 
On Jun 1, 2006, at 4:29 AM, Alberto Marquÿffffe9s wrote:
> That is truth but when executing from jsf it gives east error. I  
> want to know if pués is some subject of mutual incompatibility from  
> a class main works these sentences are the adapted ones to execute  
> from an application Web?

There is no incompatibility with Lucene and the web.  http:// 
www.lucenebook.com - a Tapestry application (JSF alternative) using  
Lucene.

I recommend you write some simple Java main() code to interact with  
Lucene and build up to the web from there once you've got a piece  
working.

 Erik


>
> Erik Hatcher  escribió: This is not a  
> Lucene issue... the stack trace mentions nothing about
> Lucene.
>
>  Erik
>
>
> On Jun 1, 2006, at 3:33 AM, Alberto Marquÿffffe9s wrote:
>
>> Problems with Lucene executing from Web with jsf. I do not
>> understand because perhaps Lucene cannot be used in applications Web?
>>
>> This is the instruction that gives error:
>>
>>     IndexSearcher oIndexSearcher = new IndexSearcher("C:\\opt\
>> \index");
>>     Query query = QueryParser.parse(sCadenaBusqueda,"contents",new
>> SimpleAnalyzer());
>>
>>
>>
>> this it is the message of error of jsf:
>>
>> type Informe de Excepción
>>
>> mensaje
>>
>> descripción El servidor encontró un error interno () que hizo que
>> no pudiera rellenar este requerimiento.
>>
>> excepción
>>
>> javax.servlet.ServletException: Error calling action method of
>> component with id helloForm:submit
>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> causa raíz
>>
>> javax.faces.FacesException: Error calling action method of
>> component with id helloForm:submit
>>     org.apache.myfaces.application.ActionListenerImpl.processAction
>> (ActionListenerImpl.java:74)
>>     javax.faces.component.UICommand.broadcast(UICommand.java:106)
>>     javax.faces.component.UIViewRoot._broadcastForPhase
>> (UIViewRoot.java:90)
>>     javax.faces.component.UIViewRoot.processApplication
>> (UIViewRoot.java:164)
>>     org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication
>> (LifecycleImpl.java:316)
>>     org.apache.myfaces.lifecycle.LifecycleImpl.execute
>> (LifecycleImpl.java:86)
>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> ---------------------------------
>>
>> LLama Gratis a cualquier PC del Mundo.
>> Llamadas a fijos y móviles desde 1 céntimo por minuto.
>> http://es.voice.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   
> ---------------------------------
>
> LLama Gratis a cualquier PC del Mundo.
> Llamadas a fijos y móviles desde 1 céntimo por minuto.
> http://es.voice.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



		
---------------------------------

LLama Gratis a cualquier PC del Mundo.
Llamadas a fijos y móviles desde 1 céntimo por minuto.
http://es.voice.yahoo.com
--0-778618134-1149154169=:32302--

From java-user-return-21059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 09:30:36 2006
Return-Path: <java-user-return-21059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18466 invoked from network); 1 Jun 2006 09:30:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 09:30:35 -0000
Received: (qmail 40077 invoked by uid 500); 1 Jun 2006 09:30:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39999 invoked by uid 500); 1 Jun 2006 09:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39918 invoked by uid 99); 1 Jun 2006 09:30:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:30:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 02:30:16 -0700
Received: from [85.220.140.42] (helo=sl-ox.innosystec.site)
	by mrelayeu.kundenserver.de (node=mrelayeu9) with ESMTP (Nemesis),
	id 0ML2xA-1FljV2320A-0000jt; Thu, 01 Jun 2006 11:29:52 +0200
Received: from awkunemann (aw-kunemann.innosystec.site [192.168.3.126])
	by sl-ox.innosystec.site (Postfix) with ESMTP id BF59C1822104
	for <java-user@lucene.apache.org>; Thu,  1 Jun 2006 11:30:59 +0200 (CEST)
From: "Frank Kunemann" <frank.kunemann@innosystec.de>
To: <java-user@lucene.apache.org>
Subject: Find out which field of document matched the query
Date: Thu, 1 Jun 2006 11:29:51 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcaFW7rZAqvQDHZFTH2/xIrvV3jBIgAAOHQA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <3572a02b0606010205q2686e5e3i759f2ff8ce40eb1c@mail.gmail.com>
Message-Id: <20060601093059.BF59C1822104@sl-ox.innosystec.site>
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:83fe6509a69fdd0b3dc2966fb66dcbe7
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi lucene users,

just wanted to know if there is a simple way to find out which field(s) of a
document matched the query.
In our case we have different content fields and the user can choose whether
he wants to search in all of them or just in one.
To keep the index as small as possible we don't store those fields. So when
highlighting we need to load the original files instead of just using the
document values. To optimize this a bit it would be cool to just load the
files that had hits instead of all of them.


Frank


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 10:58:07 2006
Return-Path: <java-user-return-21060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60087 invoked from network); 1 Jun 2006 10:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 10:58:07 -0000
Received: (qmail 9388 invoked by uid 500); 1 Jun 2006 10:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9353 invoked by uid 500); 1 Jun 2006 10:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9342 invoked by uid 99); 1 Jun 2006 10:57:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 03:57:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.86] (HELO web86914.mail.ukl.yahoo.com) (217.146.177.86)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jun 2006 03:57:57 -0700
Received: (qmail 85558 invoked by uid 60001); 1 Jun 2006 10:57:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=1SD8hXmiD/bF4gk9DWQ6P6BLzat2ECX1WPU1KD6rUq+BeOpzvyKtjNvjhj8+PGn/aLEK0XYwM9EjEN8eTIVL9as/JWM7AAVYVNt8ENcvom1b8/iUq7PxKCHXIpApwQnDO/1bExKMOhF3a8TiIsISX+7vbav0N0SEuMVupxn1vy4=  ;
Message-ID: <20060601105735.85556.qmail@web86914.mail.ukl.yahoo.com>
Date: Thu, 1 Jun 2006 12:57:35 +0200 (CEST)
From: gobe hobona <squeezito@yahoo.co.uk>
Reply-To: gobe hobona <squeezito@yahoo.co.uk>
Subject: Ontologies in Lucene???
To: java-user@lucene.apache.org
In-Reply-To: <1149158587.87907.ezmlm@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are there any plans to incorporate new advances in ontology-based information retrieval into Lucene?

For example, Hobona et al. (2006) present a 3D portal that uses the WordNet linguistic ontology to search Z39.50 servers. Another successfull implementation of ontology-supported search is presented by Bucher et al. (2006).

Perhaps some of the ontology-based reasoning in WordNet, Cyc or OpenCyc could be leveraged in Lucene.

Reference:

Hobona, G., James, P. and Fairbairn, D. (2006) Multi-dimensional Visualisation of Degrees of Relevance of Geographic Data International Journal of Geographic Information Science, 20, 5 469 - 490.

Bucher, B., Clough, P., Joho, H., Purves, R. and Syed, A. K. (2005) Geographic IR Systems: Requirements and Evaluation: Proceedings of the 22nd International Cartographic Conference. A Coruna, Spain, ICA.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 11:44:44 2006
Return-Path: <java-user-return-21061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75088 invoked from network); 1 Jun 2006 11:44:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 11:44:43 -0000
Received: (qmail 72815 invoked by uid 500); 1 Jun 2006 11:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72773 invoked by uid 500); 1 Jun 2006 11:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72762 invoked by uid 99); 1 Jun 2006 11:44:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 04:44:36 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.90.187.18] (HELO smtp-gw4.us.gxs.com) (204.90.187.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 04:44:35 -0700
Received: from unknown (HELO bromail01.internal.gxs.com) ([10.160.0.166])
  by smtp-gw4.us.gxs.com with ESMTP; 01 Jun 2006 07:50:45 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C68570.B1D98555"
Subject: setCommitLockTimeOut() and setWriteLockTimeOut()
Date: Thu, 1 Jun 2006 07:44:09 -0400
Message-ID: <ABF4E02DA33A6F4BAC41122C7086C8990376A7C5@bromail01.internal.gxs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: setCommitLockTimeOut() and setWriteLockTimeOut()
Thread-Index: AcaFcLG4wv5omh3xTgqU73erxx+E+Q==
From: <Charles.Sanders@gxs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C68570.B1D98555
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Could someone give me a short explanation of the IndexWriter methods
setCommitLockTimeOut() and setWriteLockTimeOut() in Lucene 2.0 and how
they affect indexing.
=20
Thanks,
Charles

------_=_NextPart_001_01C68570.B1D98555--

From java-user-return-21062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 13:18:56 2006
Return-Path: <java-user-return-21062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14863 invoked from network); 1 Jun 2006 13:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 13:18:56 -0000
Received: (qmail 31834 invoked by uid 500); 1 Jun 2006 13:18:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31800 invoked by uid 500); 1 Jun 2006 13:18:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31774 invoked by uid 99); 1 Jun 2006 13:18:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 06:18:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 06:18:46 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id CCDD2A6625;
	Thu,  1 Jun 2006 16:18:24 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id BEEEAA6628; Thu,  1 Jun 2006 16:18:24 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on webserver.level7.ro
X-Spam-Level: 
Received: from nemo.level7.local (nemo.intranet [10.0.0.8])
	by mail.datagroup.ro (Postfix) with ESMTP id 83B3AA6625;
	Thu,  1 Jun 2006 16:18:13 +0300 (EEST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Removing brackets before indexing
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Thu, 1 Jun 2006 16:18:12 +0300
Message-ID: <7688DA376E992B408BEFBF22A9F7F6183055D9@nemo.intranet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Removing brackets before indexing
thread-index: AcaE0G5nTJKCk7yhTv2GhPCD/05ZLAArJdyA
From: "Mile Rosu" <mile.rosu@level7.ro>
To: <java-user@lucene.apache.org>,
	"Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 01062006 #185740, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.4 required=5.0 tests=ALL_TRUSTED,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Otis,

Thank you for the hint. I have made a custom analyzer which uses a
custom tokenizer similar to CharTokenizer - it treats brackets as token
characters, but removes them in the next() method. This is because I do
not want to split the word when adding it to the index. It seems to work
ok, still needs more testing. By just using SimpleAnalyzer words were
split.=20

Mile

 =20

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Wednesday, May 31, 2006 7:36 PM
To: java-user@lucene.apache.org
Subject: Re: Removing brackets before indexing

Mile,

Any Analyzer that uses a Tokenizer that throws out non-characters will
do.
For example, take a look at SimpleAnalyzer.  It uses LowerCaseTokenizer.
If you read the javadoc for LowerCaseTokenizer, I think you will see it
suits you.

Otis

----- Original Message ----
From: Mile Rosu <mile.rosu@level7.ro>
To: java-user@lucene.apache.org
Sent: Wednesday, May 31, 2006 11:47:12 AM
Subject: Removing brackets before indexing

Hello!

I am currently trying to index latin language documents, in which
missing letters are appended to words by using square brackets, like
this : "[divinit]atis".=20

Could you tell me please which would be the best practice to remove the
brackets before adding into the Lucene index? (in the example to store
the word "divinitatis").

Thank you a lot,
Mile Rosu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 13:29:27 2006
Return-Path: <java-user-return-21063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18210 invoked from network); 1 Jun 2006 13:29:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 13:29:27 -0000
Received: (qmail 53882 invoked by uid 500); 1 Jun 2006 13:29:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53759 invoked by uid 500); 1 Jun 2006 13:29:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53748 invoked by uid 99); 1 Jun 2006 13:29:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 06:29:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 06:29:19 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E475E33CB77; Thu,  1 Jun 2006 09:28:57 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 8278933CB77
	for <java-user@lucene.apache.org>; Thu,  1 Jun 2006 09:28:52 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <20060601092929.33257.qmail@web26212.mail.ukl.yahoo.com>
References: <20060601092929.33257.qmail@web26212.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <58CF8C35-59C3-424B-BF14-E6CAC237C701@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Problems with Lucene
Date: Thu, 1 Jun 2006 09:28:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rest assured that Lucene has no incompatibilities with JSF or any =20
other Java web technology.  I don't have specific advice for you =20
since I do not use JSF, but all Java web applications require =20
dependent libraries be in WEB-INF/lib.  Again, the error message =20
you've shown has nothing that points to Lucene.

Try a JSP page without JSF, perhaps.  The Lucene demo application =20
uses regular JSP.

	Erik


On Jun 1, 2006, at 5:29 AM, Alberto Marqu=FFffffe9s wrote:
> The code works with a Java class main(). But to the being executed =20
> from JSF this not saying to me that there are problems of mutual =20
> incompatibility when recommending to me
>
> Erik Hatcher <erik@ehatchersolutions.com> escribi=F3:
> On Jun 1, 2006, at 4:29 AM, Alberto Marqu=FFffffe9s wrote:
>> That is truth but when executing from jsf it gives east error. I
>> want to know if pu=E9s is some subject of mutual incompatibility from
>> a class main works these sentences are the adapted ones to execute
>> from an application Web?
>
> There is no incompatibility with Lucene and the web.  http://
> www.lucenebook.com - a Tapestry application (JSF alternative) using
> Lucene.
>
> I recommend you write some simple Java main() code to interact with
> Lucene and build up to the web from there once you've got a piece
> working.
>
>  Erik
>
>
>>
>> Erik Hatcher  escribi=F3: This is not a
>> Lucene issue... the stack trace mentions nothing about
>> Lucene.
>>
>>  Erik
>>
>>
>> On Jun 1, 2006, at 3:33 AM, Alberto Marqu=FFffffe9s wrote:
>>
>>> Problems with Lucene executing from Web with jsf. I do not
>>> understand because perhaps Lucene cannot be used in applications =20
>>> Web?
>>>
>>> This is the instruction that gives error:
>>>
>>>     IndexSearcher oIndexSearcher =3D new IndexSearcher("C:\\opt\
>>> \index");
>>>     Query query =3D QueryParser.parse(sCadenaBusqueda,"contents",new
>>> SimpleAnalyzer());
>>>
>>>
>>>
>>> this it is the message of error of jsf:
>>>
>>> type Informe de Excepci=F3n
>>>
>>> mensaje
>>>
>>> descripci=F3n El servidor encontr=F3 un error interno () que hizo =
que
>>> no pudiera rellenar este requerimiento.
>>>
>>> excepci=F3n
>>>
>>> javax.servlet.ServletException: Error calling action method of
>>> component with id helloForm:submit
>>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>>> (ExtensionsFilter.java:122)
>>>
>>> causa ra=EDz
>>>
>>> javax.faces.FacesException: Error calling action method of
>>> component with id helloForm:submit
>>>     org.apache.myfaces.application.ActionListenerImpl.processAction
>>> (ActionListenerImpl.java:74)
>>>     javax.faces.component.UICommand.broadcast(UICommand.java:106)
>>>     javax.faces.component.UIViewRoot._broadcastForPhase
>>> (UIViewRoot.java:90)
>>>     javax.faces.component.UIViewRoot.processApplication
>>> (UIViewRoot.java:164)
>>>     org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication
>>> (LifecycleImpl.java:316)
>>>     org.apache.myfaces.lifecycle.LifecycleImpl.execute
>>> (LifecycleImpl.java:86)
>>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
>>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>>> (ExtensionsFilter.java:122)
>>>
>>> ---------------------------------
>>>
>>> LLama Gratis a cualquier PC del Mundo.
>>> Llamadas a fijos y m=F3viles desde 1 c=E9ntimo por minuto.
>>> http://es.voice.yahoo.com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------
>>
>> LLama Gratis a cualquier PC del Mundo.
>> Llamadas a fijos y m=F3viles desde 1 c=E9ntimo por minuto.
>> http://es.voice.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> 	=09
> ---------------------------------
>
> LLama Gratis a cualquier PC del Mundo.
> Llamadas a fijos y m=F3viles desde 1 c=E9ntimo por minuto.
> http://es.voice.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 16:42:18 2006
Return-Path: <java-user-return-21064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8747 invoked from network); 1 Jun 2006 16:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 16:42:18 -0000
Received: (qmail 74861 invoked by uid 500); 1 Jun 2006 16:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74820 invoked by uid 500); 1 Jun 2006 16:42:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74809 invoked by uid 99); 1 Jun 2006 16:42:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 09:42:11 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jun 2006 09:42:10 -0700
Received: (qmail 18942 invoked by uid 60001); 1 Jun 2006 16:41:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=NVaaG/4nYR37EVsF3Js522oroc8CFMDNtxPBLuNqmvtCFzMhUUr51xPz0LIyFFgHu1cEdvZhOu1G/d+LAhJpOMD9OHJJffp6/TxYcJAvp4FNWdrCHLWW9sbvGv5B3X3AhH3CVKMcRROXk4NYi4qxJ6AuZqW6Aflo//knR6Viijg=  ;
Message-ID: <20060601164149.18940.qmail@web50309.mail.yahoo.com>
Date: Thu, 1 Jun 2006 09:41:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Job: search @ Technorati
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

We (Technorati) are looking for good search/IR/NLP/Comp. Linguistics/Data Mining-type people.  If you are interested, please email me your CV.

Otis




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 17:05:01 2006
Return-Path: <java-user-return-21065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17552 invoked from network); 1 Jun 2006 17:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 17:04:59 -0000
Received: (qmail 25075 invoked by uid 500); 1 Jun 2006 17:04:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24974 invoked by uid 500); 1 Jun 2006 17:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24886 invoked by uid 99); 1 Jun 2006 17:04:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 10:04:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 10:04:43 -0700
Received: by py-out-1112.google.com with SMTP id c31so355722pyd
        for <java-user@lucene.apache.org>; Thu, 01 Jun 2006 10:04:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IvxEYds3LE9e1EZw2OvZwZnny49fMnXVrPuvpPAhXuZbqwby+Sw2w3JhrTWjONqogZ6rRowYAujXz1qlHShhQMz8yscSxVLNEOmiqcxwgu4vLV5SusRQlYdjW1JUYsftridxXDvWP4vSU/ZhqxFnXikNFz+i5ebP1Goiot7zzpU=
Received: by 10.35.66.13 with SMTP id t13mr1162288pyk;
        Thu, 01 Jun 2006 10:04:23 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Thu, 1 Jun 2006 10:04:23 -0700 (PDT)
Message-ID: <c68e39170606011004g344f8172kf7b320cbc12e4619@mail.gmail.com>
Date: Thu, 1 Jun 2006 13:04:23 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org, ahudson@indeed.com
Subject: Re: Inefficiency in MultiReader / MultiTermDocs.skipTo (non optimized indexes)
In-Reply-To: <9d8b72d90605311311q338c844ar4d89603f57481041@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <9d8b72d90605311311q338c844ar4d89603f57481041@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 5/31/06, Andrew Hudson <andrewhudson@gmail.com> wrote:
> I tracked down the inefficiency to MultiTermDocs.skipTo where even in the
> comment it said the function was unoptimized,

Yikes!  That's pretty important given how BooleanScorer2 is
implemented (use of skipTo almost exclusively).

Could you please file a JIRA issue for this?
Thanks!


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 17:23:58 2006
Return-Path: <java-user-return-21066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22911 invoked from network); 1 Jun 2006 17:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 17:23:58 -0000
Received: (qmail 49008 invoked by uid 500); 1 Jun 2006 17:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48422 invoked by uid 500); 1 Jun 2006 17:23:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48404 invoked by uid 99); 1 Jun 2006 17:23:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 10:23:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [206.190.49.65] (HELO web53115.mail.yahoo.com) (206.190.49.65)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jun 2006 10:23:50 -0700
Received: (qmail 26103 invoked by uid 60001); 1 Jun 2006 17:23:28 -0000
Message-ID: <20060601172328.26101.qmail@web53115.mail.yahoo.com>
Received: from [75.16.73.119] by web53115.mail.yahoo.com via HTTP; Thu, 01 Jun 2006 10:23:28 PDT
Date: Thu, 1 Jun 2006 10:23:28 -0700 (PDT)
From: N Hira <nhira@cognocys.com>
Subject: Re: Problems with Lucene
To: java-user@lucene.apache.org
In-Reply-To: <20060601092929.33257.qmail@web26212.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1850624936-1149182608=:25983"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1850624936-1149182608=:25983
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Alberto,

It might be helpful if you would provide the full stack-trace.  

We use Lucene with our web application like many other projects.  I can assure you that there is no basic incompatibility, but you may indeed be experiencing something specific to your environment.

-h

Alberto Marquï¿½ffffe9s <alberto_marques@yahoo.es> wrote: The code works with a Java class main(). But to the being executed from JSF this not saying to me that there are problems of mutual incompatibility when recommending to me

Erik Hatcher  escribiï¿½: 
On Jun 1, 2006, at 4:29 AM, Alberto Marquï¿½ffffe9s wrote:
> That is truth but when executing from jsf it gives east error. I  
> want to know if puï¿½s is some subject of mutual incompatibility from  
> a class main works these sentences are the adapted ones to execute  
> from an application Web?

There is no incompatibility with Lucene and the web.  http:// 
www.lucenebook.com - a Tapestry application (JSF alternative) using  
Lucene.

I recommend you write some simple Java main() code to interact with  
Lucene and build up to the web from there once you've got a piece  
working.

 Erik


>
> Erik Hatcher  escribiï¿½: This is not a  
> Lucene issue... the stack trace mentions nothing about
> Lucene.
>
>  Erik
>
>
> On Jun 1, 2006, at 3:33 AM, Alberto Marquï¿½ffffe9s wrote:
>
>> Problems with Lucene executing from Web with jsf. I do not
>> understand because perhaps Lucene cannot be used in applications Web?
>>
>> This is the instruction that gives error:
>>
>>     IndexSearcher oIndexSearcher = new IndexSearcher("C:\\opt\
>> \index");
>>     Query query = QueryParser.parse(sCadenaBusqueda,"contents",new
>> SimpleAnalyzer());
>>
>>
>>
>> this it is the message of error of jsf:
>>
>> type Informe de Excepciï¿½n
>>
>> mensaje
>>
>> descripciï¿½n El servidor encontrï¿½ un error interno () que hizo que
>> no pudiera rellenar este requerimiento.
>>
>> excepciï¿½n
>>
>> javax.servlet.ServletException: Error calling action method of
>> component with id helloForm:submit
>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> causa raï¿½z
>>
>> javax.faces.FacesException: Error calling action method of
>> component with id helloForm:submit
>>     org.apache.myfaces.application.ActionListenerImpl.processAction
>> (ActionListenerImpl.java:74)
>>     javax.faces.component.UICommand.broadcast(UICommand.java:106)
>>     javax.faces.component.UIViewRoot._broadcastForPhase
>> (UIViewRoot.java:90)
>>     javax.faces.component.UIViewRoot.processApplication
>> (UIViewRoot.java:164)
>>     org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication
>> (LifecycleImpl.java:316)
>>     org.apache.myfaces.lifecycle.LifecycleImpl.execute
>> (LifecycleImpl.java:86)
>>     javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
>>     org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> ---------------------------------
>>
>> LLama Gratis a cualquier PC del Mundo.
>> Llamadas a fijos y mï¿½viles desde 1 cï¿½ntimo por minuto.
>> http://es.voice.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   
> ---------------------------------
>
> LLama Gratis a cualquier PC del Mundo.
> Llamadas a fijos y mï¿½viles desde 1 cï¿½ntimo por minuto.
> http://es.voice.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



  
---------------------------------

LLama Gratis a cualquier PC del Mundo.
Llamadas a fijos y mï¿½viles desde 1 cï¿½ntimo por minuto.
http://es.voice.yahoo.com

--0-1850624936-1149182608=:25983--

From java-user-return-21067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 21:00:19 2006
Return-Path: <java-user-return-21067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21812 invoked from network); 1 Jun 2006 21:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 21:00:19 -0000
Received: (qmail 7695 invoked by uid 500); 1 Jun 2006 21:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7650 invoked by uid 500); 1 Jun 2006 21:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7639 invoked by uid 99); 1 Jun 2006 21:00:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 14:00:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 14:00:12 -0700
Received: by py-out-1112.google.com with SMTP id c30so425710pyc
        for <java-user@lucene.apache.org>; Thu, 01 Jun 2006 13:59:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IQDo2BFG9cbhxkM/en/NjqyI3Hefc098n432NpW0cQyKlhLPY+QBxIEaNNpBKTXXt0Sb+jO2OyUGLQsSZBR8RDDyuV1b+GPq/AnS3HD1gUMmRbaAeBmJRD3RUMakU0xIbG2IKM532E52VlNdOzaojnrPDtElqmeJ5/y5hhuUiBE=
Received: by 10.35.132.13 with SMTP id j13mr1612911pyn;
        Thu, 01 Jun 2006 13:59:51 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Thu, 1 Jun 2006 13:59:51 -0700 (PDT)
Message-ID: <c68e39170606011359m5a197f32id24699ada38a6073@mail.gmail.com>
Date: Thu, 1 Jun 2006 16:59:51 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene memory usage, caching...
In-Reply-To: <b9fbc60a0605311657w2d201ab3mfcad3fbbb1b1ec9b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b9fbc60a0605311657w2d201ab3mfcad3fbbb1b1ec9b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 5/31/06, Heng Mei <heng.mei@gmail.com> wrote:
> Does Lucene do any caching of Document fields during a search?

No... but it wouldn't be too difficult to make your own cache, or use
Solr which does have a Document cache (among other types of caches).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 01 23:54:41 2006
Return-Path: <java-user-return-21068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84142 invoked from network); 1 Jun 2006 23:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2006 23:54:40 -0000
Received: (qmail 50753 invoked by uid 500); 1 Jun 2006 23:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49647 invoked by uid 500); 1 Jun 2006 23:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49634 invoked by uid 99); 1 Jun 2006 23:54:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:54:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jun 2006 16:54:32 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 77855B735C
	for <java-user@lucene.apache.org>; Fri,  2 Jun 2006 09:53:58 +1000 (EST)
Message-ID: <447F7F59.6000809@nuix.com.au>
Date: Fri, 02 Jun 2006 09:59:21 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Find out which field of document matched the query
References: <20060601093059.BF59C1822104@sl-ox.innosystec.site>
In-Reply-To: <20060601093059.BF59C1822104@sl-ox.innosystec.site>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Frank Kunemann wrote:
> Hi lucene users,
> 
> just wanted to know if there is a simple way to find out which field(s) of a
> document matched the query.
> In our case we have different content fields and the user can choose whether
> he wants to search in all of them or just in one.
> To keep the index as small as possible we don't store those fields. So when
> highlighting we need to load the original files instead of just using the
> document values. To optimize this a bit it would be cool to just load the
> files that had hits instead of all of them.

One method might be using the explain method on the Weight interface to 
get an Explanation object, but I'm not sure how many semantics the 
explanation carries.  It will certainly tell you which branches of your 
query resulted in the the document matching, and if you're using a 
simple BooleanQuery to perform this multiple field matching, then that 
may be enough.

Daniel



-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 09:43:08 2006
Return-Path: <java-user-return-21069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45702 invoked from network); 2 Jun 2006 09:43:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 09:43:08 -0000
Received: (qmail 52597 invoked by uid 500); 2 Jun 2006 09:43:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52570 invoked by uid 500); 2 Jun 2006 09:43:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52559 invoked by uid 99); 2 Jun 2006 09:43:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 02:43:02 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.22] (HELO web36605.mail.mud.yahoo.com) (209.191.85.22)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Jun 2006 02:43:00 -0700
Received: (qmail 72871 invoked by uid 60001); 2 Jun 2006 09:42:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=G9P5rflQwZmpe7fjp58L5Ul0O5nA6iShM2scOGBfObABwVS4Y4yyg7BbCoIwbNuVgdSWRuJUlK041SnJ4anSGe0pRRl8dIzW5jm9me7HvJu7KgQ65Lix2MudM4IxsBVmmsa7/F52sXniQ0aanWuStQz2wWSdFDyXs83dxES76E0=  ;
Message-ID: <20060602094239.72869.qmail@web36605.mail.mud.yahoo.com>
Date: Fri, 2 Jun 2006 02:42:39 -0700 (PDT)
From: Marc Dauncey <marc_dauncey@yahoo.com>
Reply-To: Marc Dauncey <marc_dauncey@yahoo.com>
Subject: A question on caching filters and architecture
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everyone, just wondered if I could get peoples opinions on a design issue.

I am designing a system that uses broker / search server pattern.  Each search server will be responsible for searching a particular application that will consist of multiple indexes.  Initially, these "servers" will reside on the same JVM as the broker, but will at some point be distributed.  

Each search server exposes a parallelmultisearcher, which is held in a collection in the broker.  When a query is sent to the broker, it assess which content type is to be searched, and executes it against the relevant searchable - if multiple content types are to be searched simultaenously, it will construct a multisearcher on the fly across several search servers - so far so good.

However, I want to build filters around specific topics (e.g. category = "chemistry") across all content. Is this best done at the broker level, using a multisearcher that covers all search servers?  

Initially I imagined each search server having its own cache of filters, but this won't work if the query involves multiple content types.  If I cache at the broker level, against a multisearcher, this will be lost every time I need to refresh an individual searcher.  The other option is not to apply filters on searches that involve multiple servers - but not sure if this will be performant.

Also, would like some advice on how much overhead wrapping multisearchers in other multisearchers will add!

Has anyone done anything similar to this?  (and yes, i know Solr does all of this, and its an excellent app, but our requirements differ in some ways)

Hope this all makes sense, going round in circles a bit at the moment :)

Marc





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 10:18:07 2006
Return-Path: <java-user-return-21070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54059 invoked from network); 2 Jun 2006 10:18:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 10:18:07 -0000
Received: (qmail 2363 invoked by uid 500); 2 Jun 2006 10:18:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1987 invoked by uid 500); 2 Jun 2006 10:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1975 invoked by uid 99); 2 Jun 2006 10:17:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 03:17:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of smooth.way@gmail.com designates 66.249.82.193 as permitted sender)
Received: from [66.249.82.193] (HELO wx-out-0102.google.com) (66.249.82.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 03:17:58 -0700
Received: by wx-out-0102.google.com with SMTP id s16so334643wxc
        for <java-user@lucene.apache.org>; Fri, 02 Jun 2006 03:17:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=XXT9S+IeFHwds9Jbi1dhTFSsPFzDdIQzgKt5JDf+75qF3NXlmg8nh+RmDpjl/rIeflwe3AV/O68HNXYLhH72IeuV6+AztPXC+TrXpT2UvcYz5va98WjzGaFEyXyuFQ2tUyMpGGsf1s44krWSW1ZNm16G9xFGKX784Z2IhPRmvwA=
Received: by 10.70.6.19 with SMTP id 19mr2218925wxf;
        Fri, 02 Jun 2006 03:17:37 -0700 (PDT)
Received: by 10.70.133.12 with HTTP; Fri, 2 Jun 2006 03:17:37 -0700 (PDT)
Message-ID: <3c401e00606020317q9e178b6tab7c3791b1599329@mail.gmail.com>
Date: Fri, 2 Jun 2006 03:17:37 -0700
From: "Mary S" <smooth.way@gmail.com>
To: java-user@lucene.apache.org
Subject: Num of a term in a Doc
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I want to get the freq of a term in a Doc.

public int termFreq( int docID, String termName ) {

   IndexReader reader = IndexReader.open(directory);
   Document doc = reader.document(docID);

   int FreqForTerm = doc.... ???
   return FreqForTerm;
}


I didn't find what I want in the archives.

Can someone please assist?


Mary

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 12:05:47 2006
Return-Path: <java-user-return-21071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87902 invoked from network); 2 Jun 2006 12:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 12:05:46 -0000
Received: (qmail 11612 invoked by uid 500); 2 Jun 2006 12:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11486 invoked by uid 500); 2 Jun 2006 12:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11427 invoked by uid 99); 2 Jun 2006 12:05:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 05:05:30 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.47] (HELO web26215.mail.ukl.yahoo.com) (217.146.177.47)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Jun 2006 05:05:29 -0700
Received: (qmail 3794 invoked by uid 60001); 2 Jun 2006 12:05:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.es;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=psDN539qk5zNdHsuj0GqvNCQO2yNZZHg5drkGTg0lE8Nn6dNdiyLH6KkVa86VY6KED9ExBtCzRxlIuzk1MhDFwanco/FIc2QLeYcqHbyWnnt3QXIIKT/sqho9XSKwTITi9frxcE0ELpoc54orvcY/VV816T2xJXmWw9Z5LzVep0=  ;
Message-ID: <20060602120507.3790.qmail@web26215.mail.ukl.yahoo.com>
Received: from [195.55.30.21] by web26215.mail.ukl.yahoo.com via HTTP; Fri, 02 Jun 2006 14:05:07 CEST
Date: Fri, 2 Jun 2006 14:05:07 +0200 (CEST)
From: =?iso-8859-1?q?Alberto=20Marqu=FFffffe9s?= <alberto_marques@yahoo.es>
Subject: Re: Problems with Lucene
To: java-user@lucene.apache.org
In-Reply-To: <20060601172328.26101.qmail@web53115.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-666579096-1149249907=:2739"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-666579096-1149249907=:2739
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Impossible to make it work nor if it wants invoking to the SearchFiles class main of demo. Nobody to worked with JSF + Lucene, as soon as is a class of the IndexReader type to reader = IndexReader.open(index) any class of Lucene. 
   
  >> Problems with Lucene executing from Web with jsf. I do not
>> understand because perhaps Lucene cannot be used in applications Web?
>>
>> This is the instruction that gives error:
>>
>> IndexSearcher oIndexSearcher = new IndexSearcher("C:\\opt\
>> \index");
>> Query query = QueryParser.parse(sCadenaBusqueda,"contents",new
>> SimpleAnalyzer());
>>
>>
>>
>> this it is the message of error of jsf:
>>
>> type Informe de Excepciï¿½n
>>
>> mensaje
>>
>> descripciï¿½n El servidor encontrï¿½ un error interno () que hizo que
>> no pudiera rellenar este requerimiento.
>>
>> excepciï¿½n
>>
>> javax.servlet.ServletException: Error calling action method of
>> component with id helloForm:submit
>> javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>> org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> causa raï¿½z
>>
>> javax.faces.FacesException: Error calling action method of
>> component with id helloForm:submit
>> org.apache.myfaces.application.ActionListenerImpl.processAction
>> (ActionListenerImpl.java:74)
>> javax.faces.component.UICommand.broadcast(UICommand.java:106)
>> javax.faces.component.UIViewRoot._broadcastForPhase

   
  The same exception jumps, nevertheless in an application with struts works. Nobody can give solution me or to explain as to remove the complete plan to me at least since it always leaves the same general exception to me.

N Hira <nhira@cognocys.com> escribió:
  Alberto,

It might be helpful if you would provide the full stack-trace. 

We use Lucene with our web application like many other projects. I can assure you that there is no basic incompatibility, but you may indeed be experiencing something specific to your environment.

-h

Alberto Marquï¿½ffffe9s wrote: The code works with a Java class main(). But to the being executed from JSF this not saying to me that there are problems of mutual incompatibility when recommending to me

Erik Hatcher escribiï¿½: 
On Jun 1, 2006, at 4:29 AM, Alberto Marquï¿½ffffe9s wrote:
> That is truth but when executing from jsf it gives east error. I 
> want to know if puï¿½s is some subject of mutual incompatibility from 
> a class main works these sentences are the adapted ones to execute 
> from an application Web?

There is no incompatibility with Lucene and the web. http:// 
www.lucenebook.com - a Tapestry application (JSF alternative) using 
Lucene.

I recommend you write some simple Java main() code to interact with 
Lucene and build up to the web from there once you've got a piece 
working.

Erik


>
> Erik Hatcher escribiï¿½: This is not a 
> Lucene issue... the stack trace mentions nothing about
> Lucene.
>
> Erik
>
>
> On Jun 1, 2006, at 3:33 AM, Alberto Marquï¿½ffffe9s wrote:
>
>> Problems with Lucene executing from Web with jsf. I do not
>> understand because perhaps Lucene cannot be used in applications Web?
>>
>> This is the instruction that gives error:
>>
>> IndexSearcher oIndexSearcher = new IndexSearcher("C:\\opt\
>> \index");
>> Query query = QueryParser.parse(sCadenaBusqueda,"contents",new
>> SimpleAnalyzer());
>>
>>
>>
>> this it is the message of error of jsf:
>>
>> type Informe de Excepciï¿½n
>>
>> mensaje
>>
>> descripciï¿½n El servidor encontrï¿½ un error interno () que hizo que
>> no pudiera rellenar este requerimiento.
>>
>> excepciï¿½n
>>
>> javax.servlet.ServletException: Error calling action method of
>> component with id helloForm:submit
>> javax.faces.webapp.FacesServlet.service(FacesServlet.java:121)
>> org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> causa raï¿½z
>>
>> javax.faces.FacesException: Error calling action method of
>> component with id helloForm:submit
>> org.apache.myfaces.application.ActionListenerImpl.processAction
>> (ActionListenerImpl.java:74)
>> javax.faces.component.UICommand.broadcast(UICommand.java:106)
>> javax.faces.component.UIViewRoot._broadcastForPhase
>> (UIViewRoot.java:90)
>> javax.faces.component.UIViewRoot.processApplication
>> (UIViewRoot.java:164)
>> org.apache.myfaces.lifecycle.LifecycleImpl.invokeApplication
>> (LifecycleImpl.java:316)
>> org.apache.myfaces.lifecycle.LifecycleImpl.execute
>> (LifecycleImpl.java:86)
>> javax.faces.webapp.FacesServlet.service(FacesServlet.java:106)
>> org.apache.myfaces.component.html.util.ExtensionsFilter.doFilter
>> (ExtensionsFilter.java:122)
>>
>> ---------------------------------
>>
>> LLama Gratis a cualquier PC del Mundo.
>> Llamadas a fijos y mï¿½viles desde 1 cï¿½ntimo por minuto.
>> http://es.voice.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> 
> ---------------------------------
>
> LLama Gratis a cualquier PC del Mundo.
> Llamadas a fijos y mï¿½viles desde 1 cï¿½ntimo por minuto.
> http://es.voice.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------

LLama Gratis a cualquier PC del Mundo.
Llamadas a fijos y mï¿½viles desde 1 cï¿½ntimo por minuto.
http://es.voice.yahoo.com


 __________________________________________________
Correo Yahoo!
Espacio para todos tus mensajes, antivirus y antispam ¡gratis! 
Regístrate ya - http://correo.yahoo.es 
--0-666579096-1149249907=:2739--

From java-user-return-21072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 13:11:50 2006
Return-Path: <java-user-return-21072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11612 invoked from network); 2 Jun 2006 13:11:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 13:11:50 -0000
Received: (qmail 19001 invoked by uid 500); 2 Jun 2006 13:11:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18873 invoked by uid 500); 2 Jun 2006 13:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18811 invoked by uid 99); 2 Jun 2006 13:11:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 06:11:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 06:11:40 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15419B65@mailer.syr.edu>; Fri, 2 Jun 2006 9:11:19 -0400
Message-ID: <44803972.7010106@syr.edu>
Date: Fri, 02 Jun 2006 09:13:22 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Num of a term in a Doc
References: <3c401e00606020317q9e178b6tab7c3791b1599329@mail.gmail.com>
In-Reply-To: <3c401e00606020317q9e178b6tab7c3791b1599329@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can do this a couple of different ways (at least):
1. Use term vectors.  See http://www.cnlp.org/apachecon2005 for an 
intro, search on this list, or look in Erik and Otis book Lucene In 
Action.  This will be the fastest way, but will require more space in 
your index to store the term vectors.

2. Iterate over the TermDocs interface.  See IndexReader.termDocs() 
method for how to get an instance.


Mary S wrote:
> Hi,
>
> I want to get the freq of a term in a Doc.
>
> public int termFreq( int docID, String termName ) {
>
>   IndexReader reader = IndexReader.open(directory);
>   Document doc = reader.document(docID);
>
>   int FreqForTerm = doc.... ???
>   return FreqForTerm;
> }
>
>
> I didn't find what I want in the archives.
>
> Can someone please assist?
>
>
> Mary
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 13:35:00 2006
Return-Path: <java-user-return-21073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26308 invoked from network); 2 Jun 2006 13:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 13:35:00 -0000
Received: (qmail 56762 invoked by uid 500); 2 Jun 2006 13:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56727 invoked by uid 500); 2 Jun 2006 13:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56716 invoked by uid 99); 2 Jun 2006 13:34:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 06:34:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [4.17.250.5] (HELO l98uppx1.hewitt.com) (4.17.250.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 06:34:53 -0700
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98uppx1.hewitt.com (8.13.6/8.12.11) with ESMTP id k52DFEJF026685
	for <java-user@lucene.apache.org>; Fri, 2 Jun 2006 08:34:32 -0500 (CDT)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Fri, 02 Jun 2006 08:34:20 -0500
X-Server-Uuid: 5ABC7DE1-CEA7-4039-B9AC-716082493D4C
Subject: Krishnendra Nandi is out of the office.
From: "Krishnendra Nandi" <krishnendra.nandi@hewitt.com>
To: java-user@lucene.apache.org
Message-ID: <OF9F9B96A3.D15B2429-ON65257181.004A8CAC-65257181.004A8CAD@hewitt.com>
Date: Fri, 2 Jun 2006 19:04:16 +0530
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(652HF396|September 21, 2004) at 06/02/2006 08:34:19 AM
MIME-Version: 1.0
X-WSS-ID: 689EE1D13A49742222-01-01
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Regarding your message: Re: Num of a term in a Doc

I will be out of the office starting  01-Jun-2006 and will not return until
04-Jun-2006.

I will respond to your message when I return.


 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient is strictly prohibited.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 13:47:21 2006
Return-Path: <java-user-return-21074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30266 invoked from network); 2 Jun 2006 13:47:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 13:47:21 -0000
Received: (qmail 81240 invoked by uid 500); 2 Jun 2006 13:47:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81209 invoked by uid 500); 2 Jun 2006 13:47:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81198 invoked by uid 99); 2 Jun 2006 13:47:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 06:47:15 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of danutchi@gmail.com designates 66.249.82.198 as permitted sender)
Received: from [66.249.82.198] (HELO wx-out-0102.google.com) (66.249.82.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 06:47:15 -0700
Received: by wx-out-0102.google.com with SMTP id s16so358342wxc
        for <java-user@lucene.apache.org>; Fri, 02 Jun 2006 06:46:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QrQisRg6sWNXqSOfL1noWPpG3E4vDAiCPxDbTJLHY0z8jIrfQOtIlTD6jXueLAxKnpfwq/+xeDq7YlfGSlQT0JYm1k8XPsnb9uJnPOZR2nWNTfFYBHe92k8hNS7ZFhD5QFuoezgFcUYHGjjX7R2beGFtkJbREiqH7skui1wVMAo=
Received: by 10.70.95.10 with SMTP id s10mr2448251wxb;
        Fri, 02 Jun 2006 06:46:54 -0700 (PDT)
Received: by 10.70.33.17 with HTTP; Fri, 2 Jun 2006 06:46:54 -0700 (PDT)
Message-ID: <d7a865a50606020646x914ac29tcb0f5c4a0743a55b@mail.gmail.com>
Date: Fri, 2 Jun 2006 15:46:54 +0200
From: "Dan Wiggin" <danutchi@gmail.com>
To: java-user@lucene.apache.org
Subject: Integrity of Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5279_24261255.1149256014209"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5279_24261255.1149256014209
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I read about concurrency in Lucene but I'm not sure to understand well.
I can't do operations of delete and add simultaniouslly.If I've a writer
that I'm using to add new docs, I can't delete anything in Lucene index
until I close my opened writer. Or perhaps Did not close my writer?
Everytime that I do any add or delete elements in my Index I don't have to
close my searcher and reopen to update this.

Anyone can tell me how to know at startup of my application if my index is
corrupted and what to do?

thks to all.

------=_Part_5279_24261255.1149256014209--

From java-user-return-21075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 13:54:45 2006
Return-Path: <java-user-return-21075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32031 invoked from network); 2 Jun 2006 13:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 13:54:44 -0000
Received: (qmail 88889 invoked by uid 500); 2 Jun 2006 13:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88860 invoked by uid 500); 2 Jun 2006 13:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88848 invoked by uid 99); 2 Jun 2006 13:54:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 06:54:38 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of adam.saltiel@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 06:54:36 -0700
Received: by nz-out-0102.google.com with SMTP id 13so510314nzp
        for <java-user@lucene.apache.org>; Fri, 02 Jun 2006 06:54:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V963O74pCUvfAHhjgz+iCWFDXS1CiIhE2J5FRDWo0O/s7JwsYk7xklBOrjjNYktQL4cfI3k842lI/1Pwq/j+woXb/F6+eeUx/YfKNjAZIvcqHSw9G+4Kdyo0rLNXrGggFdmqtxNm/q+8q3ReuQrV8el1bBOsaj6zjo+fqO1OB+0=
Received: by 10.36.9.1 with SMTP id 1mr2380826nzi;
        Fri, 02 Jun 2006 06:54:16 -0700 (PDT)
Received: by 10.36.56.6 with HTTP; Fri, 2 Jun 2006 06:54:16 -0700 (PDT)
Message-ID: <e8aa138c0606020654y116cac81if4946231b6a14320@mail.gmail.com>
Date: Fri, 2 Jun 2006 14:54:16 +0100
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org, "gobe hobona" <squeezito@yahoo.co.uk>
Subject: Re: Ontologies in Lucene???
In-Reply-To: <20060601105735.85556.qmail@web86914.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_653_4604341.1149256456087"
References: <1149158587.87907.ezmlm@lucene.apache.org>
	 <20060601105735.85556.qmail@web86914.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_653_4604341.1149256456087
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

gobe,
do you subscribe to the SemWeb and ONTAC mailing lists? Reading these lists,
and from other sources, it is apparent that there is a lot of interest in
building out ontologies and ontological usages from the small and
immiediate. There is much discussion of folksonomies and their impact. What
I see is that there is a slowly evolving set of tools and skills in how to
solve small scale problems that range from using RDF and OWL efficiently to
how to include an RDF graph in code in the most transparent way for the
developer (c.f. Henry Storey circ. 5th April and 30th May respectively for
these.)
There are issues such as mapping between conjoint Ontologies - how to do
automatically and many others.
I actually see Lucene more as a tool that would be utilised in solving these
issues although it can work the other way round where faceted searches are
facilitated by relevant ontologies.
w.r.t. the former I think the approach is to view Lucene as acting on nodes
where there is data uncertainty.
But there is an interesting feed back mechanism that could be established
here where RDF would act on code where there is type uncertainty, this,
anyway would be the ideal virtuous circle.
Let me give an example.
I am working on a large project where there is the need to gather local data
from various sources, identified as within the same business domain and
sphere of operation. At present this data is coded and stored with a
shifting, centrally administered, set of codes that have been allowed to be
interpreted differently locally. The solution is to provide and single XML
and a mapping tool to map local data through local XML versions into the
single version.
Lucene is used to search through xpath nodes, using stemming and so forth,
to try to find a match between local and central term descriptions.
This is something that could have been implemented (costs and skills aside)
by creating a local and central ontology. Both of these could be evolving
ontologies with the user able to map between the two and idtenify where
cetral codes need to be modified or extended. i.e. where there would be loss
of meaning and coresponding data loss **either in storage or retrieval** not
to do so.
RDF/OWL has concepts such as Class/SubClass, isDefinedBy, isSameAs,
Conjoint/Disjoint, Necessary and Sufficient Condition and so on. These can
usually be determined by thought and inspection and this is very much the
anti-dote to the ad-hoc categorization that goes on when people just have to
place their data somewhere, but cannot find a ready category. In short such
interfaces would make point of entry data capture a far more rational
process, part of the historical problem we are trying to overcome.

In short we should be trying to undo the situation that existed where a
series of codes where handed out with some guide lines on their usage but no
means to enforce this. The central base of codes has changed and the local
usage has drifted in different ways from the original guidance.

But there is an interesting thing in this in that the local usage represents
local knowledge, it might be dangerous to lose it by straight jaketing this
information into new, redefined, codes.
So there is particular value in contemplating building an ontology in the
way I have outlined.
Now comes the most interesting bit.
As the tool is interactive the code should be non deterministic. So a way to
use Lucene would be to help to narrow down cadidate terms, not, as before,
expressed in XML, but expressed in OWL as classes and instances.
There are a number of things going on in a tool like this. In terms of XML
element recognition the issue is to ensure the actual XPATHs are mapped
through. So there are two seperate issues, that of whther there is an
appropriate central equivalent, and that of actually mapping how the data is
expressed locally into the central repository once the equivalent has been
identified. Nevertheless the idea would be to have code that reads in RDF
and being given a local equivalent would then be able to map it through. I
think in this regard, code whose type behaviour depends on the parsed RDF
that is generated in the user interface with the help of Lucene, would be
very useful. It wouldn't eliminate all of the other issues (those i haven't
gone into), but it would greatly simplify the code base.
So this is an example of how I envisage Lucene will hit RDF/OWL.
What are others thoughts?
Adam

On 01/06/06, gobe hobona <squeezito@yahoo.co.uk> wrote:
>
> Are there any plans to incorporate new advances in ontology-based
> information retrieval into Lucene?
>
> For example, Hobona et al. (2006) present a 3D portal that uses the
> WordNet linguistic ontology to search Z39.50 servers. Another successfull
> implementation of ontology-supported search is presented by Bucher et al.
> (2006).
>
> Perhaps some of the ontology-based reasoning in WordNet, Cyc or OpenCyc
> could be leveraged in Lucene.
>
> Reference:
>
> Hobona, G., James, P. and Fairbairn, D. (2006) Multi-dimensional
> Visualisation of Degrees of Relevance of Geographic Data International
> Journal of Geographic Information Science, 20, 5 469 - 490.
>
> Bucher, B., Clough, P., Joho, H., Purves, R. and Syed, A. K. (2005)
> Geographic IR Systems: Requirements and Evaluation: Proceedings of the 22nd
> International Cartographic Conference. A Coruna, Spain, ICA.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_653_4604341.1149256456087--

From java-user-return-21076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 14:39:51 2006
Return-Path: <java-user-return-21076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48003 invoked from network); 2 Jun 2006 14:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 14:39:51 -0000
Received: (qmail 75429 invoked by uid 500); 2 Jun 2006 14:39:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75314 invoked by uid 500); 2 Jun 2006 14:39:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75271 invoked by uid 99); 2 Jun 2006 14:39:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 07:39:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.48] (HELO mtaout02-winn.ispmail.ntl.com) (81.103.221.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 07:39:34 -0700
Received: from aamtaout01-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout02-winn.ispmail.ntl.com with ESMTP
          id <20060602143912.IWGP29040.mtaout02-winn.ispmail.ntl.com@aamtaout01-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>; Fri, 2 Jun 2006 15:39:12 +0100
Received: from jhi ([82.15.75.27]) by aamtaout01-winn.ispmail.ntl.com
          with SMTP
          id <20060602143912.MWGH19763.aamtaout01-winn.ispmail.ntl.com@jhi>
          for <java-user@lucene.apache.org>; Fri, 2 Jun 2006 15:39:12 +0100
Message-ID: <02b301c68652$5a262f50$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>
References: <OF9F9B96A3.D15B2429-ON65257181.004A8CAC-65257181.004A8CAD@hewitt.com>
Subject: Re: Krishnendra Nandi is out of the office.
Date: Fri, 2 Jun 2006 15:39:26 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

not again plz
----- Original Message ----- 
From: "Krishnendra Nandi" <krishnendra.nandi@hewitt.com>
To: <java-user@lucene.apache.org>
Sent: Friday, June 02, 2006 2:34 PM
Subject: Krishnendra Nandi is out of the office.


>
>
> Regarding your message: Re: Num of a term in a Doc
>
> I will be out of the office starting  01-Jun-2006 and will not return 
> until
> 04-Jun-2006.
>
> I will respond to your message when I return.
>
>
>
> The information contained in this e-mail and any accompanying documents 
> may contain information that is confidential or otherwise protected from 
> disclosure. If you are not the intended recipient of this message, or if 
> this message has been addressed to you in error, please immediately alert 
> the sender by reply e-mail and then delete this message, including any 
> attachments. Any dissemination, distribution or other use of the contents 
> of this message by anyone other than the intended recipient is strictly 
> prohibited.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 18:58:15 2006
Return-Path: <java-user-return-21077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57245 invoked from network); 2 Jun 2006 18:58:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 18:58:15 -0000
Received: (qmail 10655 invoked by uid 500); 2 Jun 2006 18:58:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10619 invoked by uid 500); 2 Jun 2006 18:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10608 invoked by uid 99); 2 Jun 2006 18:58:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 11:58:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 11:58:06 -0700
Received: (qmail 5506 invoked from network); 2 Jun 2006 18:57:44 -0000
Received: from unknown (HELO p5496f428.dip.t-dialin.net) ([pbs]695637@[84.150.244.40])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 2 Jun 2006 18:57:44 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Integrity of Lucene
Date: Fri, 2 Jun 2006 20:59:47 +0200
User-Agent: KMail/1.8.2
References: <d7a865a50606020646x914ac29tcb0f5c4a0743a55b@mail.gmail.com>
In-Reply-To: <d7a865a50606020646x914ac29tcb0f5c4a0743a55b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606022059.47821@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Freitag 02 Juni 2006 15:46, Dan Wiggin wrote:

> Everytime that I do any add or delete elements in my Index I don't have
> to close my searcher and reopen to update this.

See IndexModifier for how to mix deletions and adds. But you still need to 
re-open your searchers.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 20:15:09 2006
Return-Path: <java-user-return-21078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89035 invoked from network); 2 Jun 2006 20:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 20:15:08 -0000
Received: (qmail 31918 invoked by uid 500); 2 Jun 2006 20:15:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31888 invoked by uid 500); 2 Jun 2006 20:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31877 invoked by uid 99); 2 Jun 2006 20:15:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 13:15:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of scottd@gmail.com designates 66.249.82.193 as permitted sender)
Received: from [66.249.82.193] (HELO wx-out-0102.google.com) (66.249.82.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 13:15:02 -0700
Received: by wx-out-0102.google.com with SMTP id s16so411822wxc
        for <java-user@lucene.apache.org>; Fri, 02 Jun 2006 13:14:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=EdroBDtsJ7vnVfgXDds4zSjCogrEvEW1Qj5tyEC0oQANDp1EouKcsocvFFMPLk4826Cazp1iIifxVwyJ61TFa2/gEhp3+buqaA6EBlB8P3nUkstAL0SFxvKtDw2pqjjqfjB7VVQNaFgtlNnjNYgxQChJZ4DWyk4/s0vHZVWgzkk=
Received: by 10.70.40.12 with SMTP id n12mr2911788wxn;
        Fri, 02 Jun 2006 13:14:41 -0700 (PDT)
Received: by 10.70.94.16 with HTTP; Fri, 2 Jun 2006 13:14:41 -0700 (PDT)
Message-ID: <75f591160606021314s2b33dfbepcb42140af1389567@mail.gmail.com>
Date: Fri, 2 Jun 2006 13:14:41 -0700
From: "Scott Davies" <scottd@gmail.com>
To: java-user@lucene.apache.org
Subject: Per-token weighting / attribute data in index
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi...reasonably experienced web search programmer but total Lucene newbie here.

After poking through Lucene for a while, I still haven't figured out a
decent way to tweak the scoring based on per-token data.  For example,
as far as I can tell so far, the only reasonable way to have words in
the titles or headers of HTML documents be "worth more" for scoring
purposes than ordinary body text is to make "title" and "header"
fields and apply appropriate field boosts across all documents.  That
works OK if you only have a few special fields you want to boost by
some consistent amount each, but falls down if, say, you wanted to
include some sort of "tags" or anchortext in the scoring of documents
where there's a high degree of variability in how much any given tag
or anchor should be "trusted" and thus influence the score.  (I could
conceivably discretize the boosts and, say, put all the anchortext
with boost 2.5 in a special "anchortext-boost2.5" field, but that
would be extremely awkward and presumably cause major performance
issues as the number of fields increases.)

Have I just failed to notice the right way to do this, or is there
really no decent way to do it in Lucene at this time?  If the latter,
are there any plans to add this feature at some point semi-soon?  This
seems to me like a major scoring limitation for applications not just
indexing and searching over plain text documents...

Thanks,

-- Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 20:57:53 2006
Return-Path: <java-user-return-21079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7812 invoked from network); 2 Jun 2006 20:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 20:57:52 -0000
Received: (qmail 95875 invoked by uid 500); 2 Jun 2006 20:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95443 invoked by uid 500); 2 Jun 2006 20:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95432 invoked by uid 99); 2 Jun 2006 20:57:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 13:57:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 13:57:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 18FEE5B770; Fri,  2 Jun 2006 13:57:26 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0B2767F403
	for <java-user@lucene.apache.org>; Fri,  2 Jun 2006 13:57:26 -0700 (PDT)
Date: Fri, 2 Jun 2006 13:57:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Per-token weighting / attribute data in index
In-Reply-To: <75f591160606021314s2b33dfbepcb42140af1389567@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606021354041.12590@hal.rescomp.berkeley.edu>
References: <75f591160606021314s2b33dfbepcb42140af1389567@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


i may be missunderstanding your goal .. it sounds like what you want to do
is say thta for certain documents (which you trust) matching on the title
is "worth more" then matching on the title of other documents (which you
don't trust)

if that' the case, then at index time you can add field boost on the
title just for hte documents you trust, and add no boost for hte documents
you don't trust.

I've i've missunderstood your question, could you provide a use case
describing your goal, and where lucene fails to meet it?



: Date: Fri, 2 Jun 2006 13:14:41 -0700
: From: Scott Davies <scottd@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Per-token weighting / attribute data in index
:
: Hi...reasonably experienced web search programmer but total Lucene newbie here.
:
: After poking through Lucene for a while, I still haven't figured out a
: decent way to tweak the scoring based on per-token data.  For example,
: as far as I can tell so far, the only reasonable way to have words in
: the titles or headers of HTML documents be "worth more" for scoring
: purposes than ordinary body text is to make "title" and "header"
: fields and apply appropriate field boosts across all documents.  That
: works OK if you only have a few special fields you want to boost by
: some consistent amount each, but falls down if, say, you wanted to
: include some sort of "tags" or anchortext in the scoring of documents
: where there's a high degree of variability in how much any given tag
: or anchor should be "trusted" and thus influence the score.  (I could
: conceivably discretize the boosts and, say, put all the anchortext
: with boost 2.5 in a special "anchortext-boost2.5" field, but that
: would be extremely awkward and presumably cause major performance
: issues as the number of fields increases.)
:
: Have I just failed to notice the right way to do this, or is there
: really no decent way to do it in Lucene at this time?  If the latter,
: are there any plans to add this feature at some point semi-soon?  This
: seems to me like a major scoring limitation for applications not just
: indexing and searching over plain text documents...
:
: Thanks,
:
: -- Scott
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 21:55:13 2006
Return-Path: <java-user-return-21080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22308 invoked from network); 2 Jun 2006 21:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 21:55:13 -0000
Received: (qmail 51996 invoked by uid 500); 2 Jun 2006 21:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49517 invoked by uid 500); 2 Jun 2006 21:54:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49066 invoked by uid 99); 2 Jun 2006 21:54:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 14:54:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of scottd@gmail.com designates 66.249.82.205 as permitted sender)
Received: from [66.249.82.205] (HELO wx-out-0102.google.com) (66.249.82.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 14:31:06 -0700
Received: by wx-out-0102.google.com with SMTP id s16so420460wxc
        for <java-user@lucene.apache.org>; Fri, 02 Jun 2006 14:30:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=EX8Pa1gIEIfJThA8wAdgpNxBQS3oVtOu3SLJwbp+k+pcAEMwSQhn1RtL1wsUIvFtzmzxX7n8H0nY8RgO5Wqqv2vvlxYrL4QMsPZ7neJS4vYLPqeJrfXMGII9o3bESrms/wupEMhpxujgX+B5PLxfZqzfkvrUiec2kKXSZSSvyHo=
Received: by 10.70.122.15 with SMTP id u15mr917415wxc;
        Fri, 02 Jun 2006 14:30:45 -0700 (PDT)
Received: by 10.70.94.16 with HTTP; Fri, 2 Jun 2006 14:30:45 -0700 (PDT)
Message-ID: <75f591160606021430w72a3b9a2yc7d1aa8ad3881800@mail.gmail.com>
Date: Fri, 2 Jun 2006 14:30:45 -0700
From: "Scott Davies" <scottd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Per-token weighting / attribute data in index
In-Reply-To: <Pine.LNX.4.58.0606021354041.12590@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <75f591160606021314s2b33dfbepcb42140af1389567@mail.gmail.com>
	 <Pine.LNX.4.58.0606021354041.12590@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A simple example would be indexing and scoring the hyperlink text from
other web pages that point to the page P that I'm indexing/scoring.  I
might have some metric saying how much I "trust" each of the pages or
sites with hyperlinks to P, and want to use that metric to increase or
decrease how much the text in those hyperlinks increases the score of
P for queries containing that anchortext.  Since each incoming
hyperlink is from a different site with a different trustworthiness,
I'd obviously want to be able to vary that boost independently for
every different hyperlink pointing at page P.

On 6/2/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> i may be missunderstanding your goal .. it sounds like what you want to do
> is say thta for certain documents (which you trust) matching on the title
> is "worth more" then matching on the title of other documents (which you
> don't trust)
>
> if that' the case, then at index time you can add field boost on the
> title just for hte documents you trust, and add no boost for hte documents
> you don't trust.
>
> I've i've missunderstood your question, could you provide a use case
> describing your goal, and where lucene fails to meet it?
>
>
>
> : Date: Fri, 2 Jun 2006 13:14:41 -0700
> : From: Scott Davies <scottd@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Per-token weighting / attribute data in index
> :
> : Hi...reasonably experienced web search programmer but total Lucene newbie here.
> :
> : After poking through Lucene for a while, I still haven't figured out a
> : decent way to tweak the scoring based on per-token data.  For example,
> : as far as I can tell so far, the only reasonable way to have words in
> : the titles or headers of HTML documents be "worth more" for scoring
> : purposes than ordinary body text is to make "title" and "header"
> : fields and apply appropriate field boosts across all documents.  That
> : works OK if you only have a few special fields you want to boost by
> : some consistent amount each, but falls down if, say, you wanted to
> : include some sort of "tags" or anchortext in the scoring of documents
> : where there's a high degree of variability in how much any given tag
> : or anchor should be "trusted" and thus influence the score.  (I could
> : conceivably discretize the boosts and, say, put all the anchortext
> : with boost 2.5 in a special "anchortext-boost2.5" field, but that
> : would be extremely awkward and presumably cause major performance
> : issues as the number of fields increases.)
> :
> : Have I just failed to notice the right way to do this, or is there
> : really no decent way to do it in Lucene at this time?  If the latter,
> : are there any plans to add this feature at some point semi-soon?  This
> : seems to me like a major scoring limitation for applications not just
> : indexing and searching over plain text documents...
> :
> : Thanks,
> :
> : -- Scott
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 22:47:38 2006
Return-Path: <java-user-return-21081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44496 invoked from network); 2 Jun 2006 22:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 22:47:38 -0000
Received: (qmail 29001 invoked by uid 500); 2 Jun 2006 22:47:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28976 invoked by uid 500); 2 Jun 2006 22:47:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28965 invoked by uid 99); 2 Jun 2006 22:47:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 15:47:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 15:47:30 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8F8525B770; Fri,  2 Jun 2006 15:47:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8B2897F403
	for <java-user@lucene.apache.org>; Fri,  2 Jun 2006 15:47:10 -0700 (PDT)
Date: Fri, 2 Jun 2006 15:47:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Per-token weighting / attribute data in index
In-Reply-To: <75f591160606021430w72a3b9a2yc7d1aa8ad3881800@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606021538040.20004@hal.rescomp.berkeley.edu>
References: <75f591160606021314s2b33dfbepcb42140af1389567@mail.gmail.com> 
 <Pine.LNX.4.58.0606021354041.12590@hal.rescomp.berkeley.edu>
 <75f591160606021430w72a3b9a2yc7d1aa8ad3881800@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

:
: A simple example would be indexing and scoring the hyperlink text from
: other web pages that point to the page P that I'm indexing/scoring.  I
: might have some metric saying how much I "trust" each of the pages or
: sites with hyperlinks to P, and want to use that metric to increase or

Hmmm... yes, other then having a "trustedAnchorText" field and an
"untrustedAnchorText" field i don't know any way way to achieve your goal
at the moment.

You may want to check out the java-dev list ... there's been some talk
among the people who really unerstand the low levels of lucene's file
formats about adding arbitrary "payload" data with each term/doc pair .. a
proposal that started (as far as i can tell) from a desire to have
individual term/doc boosting...

http://wiki.apache.org/jakarta-lucene/FlexibleIndexing
http://www.nabble.com/Lucene-Planning-t1694958.html#a4646533




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 02 23:14:12 2006
Return-Path: <java-user-return-21082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54293 invoked from network); 2 Jun 2006 23:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2006 23:14:10 -0000
Received: (qmail 66256 invoked by uid 500); 2 Jun 2006 23:13:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66122 invoked by uid 500); 2 Jun 2006 23:13:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66111 invoked by uid 99); 2 Jun 2006 23:13:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:13:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of scottd@gmail.com designates 66.249.82.198 as permitted sender)
Received: from [66.249.82.198] (HELO wx-out-0102.google.com) (66.249.82.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 16:13:55 -0700
Received: by wx-out-0102.google.com with SMTP id s16so430289wxc
        for <java-user@lucene.apache.org>; Fri, 02 Jun 2006 16:13:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kwZeaw0JFN5H3zHHZKY+wfiM/AoH4VLGUMqtIpMrajhK48sz7mt8ldytX2GGOQpLrpGlalvpZche/CgNQmTvsSojD/mEEY2ac4TsrrdYIDuLdboCya3ODXH7rB+ef9aeBMkqXza1RMZEeLveU8ImQHlFbJioyNMe8TntMzAuH8Q=
Received: by 10.70.34.20 with SMTP id h20mr3098347wxh;
        Fri, 02 Jun 2006 16:13:35 -0700 (PDT)
Received: by 10.70.94.16 with HTTP; Fri, 2 Jun 2006 16:13:35 -0700 (PDT)
Message-ID: <75f591160606021613u2cc0cee1q96984308d9cf7c9@mail.gmail.com>
Date: Fri, 2 Jun 2006 16:13:35 -0700
From: "Scott Davies" <scottd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Per-token weighting / attribute data in index
In-Reply-To: <Pine.LNX.4.58.0606021538040.20004@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <75f591160606021314s2b33dfbepcb42140af1389567@mail.gmail.com>
	 <Pine.LNX.4.58.0606021354041.12590@hal.rescomp.berkeley.edu>
	 <75f591160606021430w72a3b9a2yc7d1aa8ad3881800@mail.gmail.com>
	 <Pine.LNX.4.58.0606021538040.20004@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dang, that's what I was afraid of.  Good to hear they're actively
considering extensions that'd fix the issue, though.  In the meantime
I guess I'll try limping along without 'em.  Thanks!

-- Scott

On 6/2/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> :
> : A simple example would be indexing and scoring the hyperlink text from
> : other web pages that point to the page P that I'm indexing/scoring.  I
> : might have some metric saying how much I "trust" each of the pages or
> : sites with hyperlinks to P, and want to use that metric to increase or
>
> Hmmm... yes, other then having a "trustedAnchorText" field and an
> "untrustedAnchorText" field i don't know any way way to achieve your goal
> at the moment.
>
> You may want to check out the java-dev list ... there's been some talk
> among the people who really unerstand the low levels of lucene's file
> formats about adding arbitrary "payload" data with each term/doc pair .. a
> proposal that started (as far as i can tell) from a desire to have
> individual term/doc boosting...
>
> http://wiki.apache.org/jakarta-lucene/FlexibleIndexing
> http://www.nabble.com/Lucene-Planning-t1694958.html#a4646533
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 03 00:52:45 2006
Return-Path: <java-user-return-21083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83052 invoked from network); 3 Jun 2006 00:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 00:52:44 -0000
Received: (qmail 71571 invoked by uid 500); 3 Jun 2006 00:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71390 invoked by uid 500); 3 Jun 2006 00:52:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71319 invoked by uid 99); 3 Jun 2006 00:52:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 17:52:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 17:52:34 -0700
Received: from marvin by rectangular.com with local (Exim 4.44)
	id 1FmKaV-000L8I-Rn
	for java-user@lucene.apache.org; Fri, 02 Jun 2006 18:05:59 -0700
Date: Fri, 2 Jun 2006 18:05:59 -0700
From: Marvin Humphrey <marvin@rectangular.com>
To: java-user@lucene.apache.org
Subject: Re: Per-token weighting / attribute data in index
Message-ID: <20060603010559.GA81098@rectangular.com>
References: <75f591160606021314s2b33dfbepcb42140af1389567@mail.gmail.com> <Pine.LNX.4.58.0606021354041.12590@hal.rescomp.berkeley.edu> <75f591160606021430w72a3b9a2yc7d1aa8ad3881800@mail.gmail.com> <Pine.LNX.4.58.0606021538040.20004@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <Pine.LNX.4.58.0606021538040.20004@hal.rescomp.berkeley.edu>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, Jun 02, 2006 at 03:47:10PM -0700, Chris Hostetter wrote:
> You may want to check out the java-dev list ... there's been some talk
> among the people who really unerstand the low levels of lucene's file
> formats about adding arbitrary "payload" data with each term/doc pair .. a
> proposal that started (as far as i can tell) from a desire to have
> individual term/doc boosting...

It's funny that you don't seem to include yourself in that group yet, Hoss. I
imagine it won't be long.  If you haven't read that Brin/Page paper from 1998
yet, you should check it out.

Enabling individual positions to be boosted is indeed one of the main targets
of the current discussion.  A slightly easier to understand application would
be boosting individual tokens according to relative font size. For instance,
we might assume that text between <h1> tags is more important than text
between <p> tags and boost it.  There's no good way to handle that right now.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 03 02:05:17 2006
Return-Path: <java-user-return-21084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6408 invoked from network); 3 Jun 2006 02:05:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 02:05:17 -0000
Received: (qmail 31397 invoked by uid 500); 3 Jun 2006 02:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30672 invoked by uid 500); 3 Jun 2006 02:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30661 invoked by uid 99); 3 Jun 2006 02:05:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 19:05:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of RASPL@de.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jun 2006 19:05:10 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.6/8.13.6) with ESMTP id k5324mfu040490
	for <java-user@lucene.apache.org>; Sat, 3 Jun 2006 02:04:48 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VER6.8) with ESMTP id k5326eIj074190
	for <java-user@lucene.apache.org>; Sat, 3 Jun 2006 04:06:40 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k5324m0D006860
	for <java-user@lucene.apache.org>; Sat, 3 Jun 2006 04:04:48 +0200
Received: from d12ml067.megacenter.de.ibm.com (d12ml067.megacenter.de.ibm.com [9.149.164.162])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k5324mf4006857
	for <java-user@lucene.apache.org>; Sat, 3 Jun 2006 04:04:48 +0200
Subject: Stefan Raspl/Germany/IBM is out of the office.
From: Stefan Raspl <RASPL@de.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OFD2F5F3FA.A3ACC222-ONC1257182.000B959B-C1257182.000B959C@de.ibm.com>
Date: Sat, 3 Jun 2006 04:06:31 +0200
X-MIMETrack: Serialize by Router on D12ML067/12/M/IBM(Release 6.53HF654 | July 22, 2005) at
 03/06/2006 04:06:40
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I will be out of the office starting  06/03/2006 and will not return until
06/26/2006.

I will respond to your message when I return.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 03 08:06:00 2006
Return-Path: <java-user-return-21085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98040 invoked from network); 3 Jun 2006 08:06:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 08:06:00 -0000
Received: (qmail 93638 invoked by uid 500); 3 Jun 2006 08:05:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93612 invoked by uid 500); 3 Jun 2006 08:05:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93600 invoked by uid 99); 3 Jun 2006 08:05:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jun 2006 01:05:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jun 2006 01:05:53 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k5385Rd05847
	for <java-user@lucene.apache.org>; Sat, 3 Jun 2006 03:05:27 -0500
Message-ID: <448142CC.6040109@getopt.org>
Date: Sat, 03 Jun 2006 10:05:32 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Per-token weighting / attribute data in index
References: <75f591160606021314s2b33dfbepcb42140af1389567@mail.gmail.com> <Pine.LNX.4.58.0606021354041.12590@hal.rescomp.berkeley.edu> <75f591160606021430w72a3b9a2yc7d1aa8ad3881800@mail.gmail.com> <Pine.LNX.4.58.0606021538040.20004@hal.rescomp.berkeley.edu> <20060603010559.GA81098@rectangular.com>
In-Reply-To: <20060603010559.GA81098@rectangular.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Marvin Humphrey wrote:
> Enabling individual positions to be boosted is indeed one of the main targets
> of the current discussion.  A slightly easier to understand application would
> be boosting individual tokens according to relative font size. For instance,
> we might assume that text between <h1> tags is more important than text
> between <p> tags and boost it.  There's no good way to handle that right now.
>   

.. except for adding separate fields with <h1>, <h2> ... content.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 03 17:31:56 2006
Return-Path: <java-user-return-21086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19121 invoked from network); 3 Jun 2006 17:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2006 17:31:56 -0000
Received: (qmail 25788 invoked by uid 500); 3 Jun 2006 17:31:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25756 invoked by uid 500); 3 Jun 2006 17:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25745 invoked by uid 99); 3 Jun 2006 17:31:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jun 2006 10:31:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.71.0.18] (HELO mailproxy01.edpnet.be) (212.71.0.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jun 2006 10:31:48 -0700
Received: from [192.168.1.2] (213.219.151.105.adslpower.by.edpnet.be [213.219.151.105])
	by mailproxy01.edpnet.be (8.13.1/8.13.1) with ESMTP id k53HY6vB026417
	for <java-user@lucene.apache.org>; Sat, 3 Jun 2006 19:34:18 +0200
Message-ID: <4481C759.7040008@attentio.com>
Date: Sat, 03 Jun 2006 19:31:05 +0200
From: Roxana Angheluta <roxana@attentio.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; fr-FR; rv:1.8.0.1) Gecko/20060316 SUSE/1.0-27 SeaMonkey/1.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: how to get the number of terms in an index
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV version 0.88.2, clamav-milter version 0.88.2 on mailproxy01.edpnet.be
X-Virus-Status: Clean
X-Spam-Checker-Version: SpamAssassin 3.0.5 (2005-11-28) on 
	mailproxy01.edpnet.be
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.0 required=5.0 tests=AWL,BAYES_50 autolearn=ham 
	version=3.0.5
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Is it possible to quickly get the total number of terms from all
documents in an Lucene index  for a given field?
For example IndexReader has a method "int numDocs()", I would need  a
similar method "int numTerms(String field)".
It looks a bit silly to use IndexReader.terms() and count the number of
terms by iterating over the result.

Thanks,
Roxana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 04 18:30:53 2006
Return-Path: <java-user-return-21087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98185 invoked from network); 4 Jun 2006 18:30:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jun 2006 18:30:52 -0000
Received: (qmail 15477 invoked by uid 500); 4 Jun 2006 18:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15434 invoked by uid 500); 4 Jun 2006 18:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15422 invoked by uid 99); 4 Jun 2006 18:30:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 11:30:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 66.249.82.204 as permitted sender)
Received: from [66.249.82.204] (HELO wx-out-0102.google.com) (66.249.82.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 11:30:45 -0700
Received: by wx-out-0102.google.com with SMTP id h27so633678wxd
        for <java-user@lucene.apache.org>; Sun, 04 Jun 2006 11:30:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VbOxf4lRnuq3LpWcAitHS0i4oGEVpDAms3ujHLyZIcvU1TUgd2c+wEyO0q/OkVDqKHipH2YNKOl4VM6T8odLHpBWjCFO8qUX70hv9N/RkWe1UvIrt5TZTbKtw8py44krYzVY/QTJkWRHl+t7u06NHhPa0fXQ7d682TzaR/7gdmc=
Received: by 10.70.44.17 with SMTP id r17mr5155460wxr;
        Sun, 04 Jun 2006 11:30:21 -0700 (PDT)
Received: by 10.70.53.16 with HTTP; Sun, 4 Jun 2006 11:30:21 -0700 (PDT)
Message-ID: <b487c1370606041130s657fa270jbf7fa7e54e2797aa@mail.gmail.com>
Date: Sun, 4 Jun 2006 14:30:21 -0400
From: "Beady Geraghty" <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: out-of-memory when searching, paging does not work.
In-Reply-To: <b487c1370605141615v57d0799dm955b19a7198c4468@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25262_16781456.1149445821790"
References: <b487c1370605140907n5679f828v998cd5bdb3e930ec@mail.gmail.com>
	 <7929D2C6-29B3-4ACB-924F-BE2CECF6690E@ehatchersolutions.com>
	 <b487c1370605141234j52334aa6tbe097e8763efa42d@mail.gmail.com>
	 <Pine.LNX.4.58.0605141353150.9446@hal.rescomp.berkeley.edu>
	 <b487c1370605141615v57d0799dm955b19a7198c4468@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25262_16781456.1149445821790
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I finally got back to doing my project.  HitCollector solved my problem.
Thank you for all the help.


On 5/14/06, Beady Geraghty <beadygeraghty@gmail.com> wrote:
>
>  Thank you for the links.  I will go through them, and hopefully solve my
> problem.
>
>
>
> On 5/14/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > please review the advice in these archived messages, I think you'll find
> > them very applicable to your problem...
> >
> >
> > http://www.nabble.com/eliminating-scoring-for-the-sake-of-efficiency-t1603827.html#a4351614
> >
> > http://www.nabble.com/Exact-date-search-doesn%27t-work-with-1.9.1--t1418643.html#a3833741
> >
> >
> >
> > : Date: Sun, 14 May 2006 15:34:08 -0400
> > : From: Beady Geraghty <beadygeraghty@gmail.com >
> > : Reply-To: java-user@lucene.apache.org
> > : To: java-user@lucene.apache.org
> > : Subject: Re: out-of-memory when searching, paging does not work.
> > :
> > : Here is the gist of the code:
> > :
> > :     Query query = new TermQuery( new Term("contents", q.toLowerCase
> > ()));
> > :
> > :
> > :     long start = new Date().getTime();
> > :     Hits hits = is.search(query);
> > :     long end = new Date().getTime();
> > :
> > :     System.err.println("Found " + hits.length() +
> > :       " document(s) (in " + (end - start) +
> > :       " milliseconds) that matched query '" +
> > :         q  + "'");
> > :
> > :
> > :     int ct = hits.length() ;
> > :     int ct2 = 400000;
> > :     int step = 10000;
> > :     int startct;
> > :     while (ct2 < ct ) {
> > :      startct = ct2;
> > :      for (int i = startct; i < startct+step; i++ ) {
> > :       if (ct2 >= ct ) {
> > :        break;
> > :       }
> > :       Document doc = hits.doc(ct2);
> > :       doc.get("filename");
> > :       ct2++;
> > :      }
> > :      System.out.println( "ct2 is " + ct2 );
> > :      ir.close();
> > :      is.close();
> > :      fsDir.close();
> > :      ir = null;
> > :      is = null;
> > :      fsDir = null;
> > :      fsDir = FSDirectory.getDirectory(indexDir, false);
> > :      ir = IndexReader.open (fsDir);
> > :      is = new IndexSearcher(ir);
> > :      hits = is.search(query);
> > :
> > :
> > :     }
> > :
> > : if  ct2 is set to 40,000 as oppose to 400,000 , I see some output
> > before I
> > : get the out-of-memory.  If not, I get out of memory error almost
> > instantly
> > : without any output.
> > :
> > : Is there a method call to clear the cache ?
> > :
> > : Thank you for your response.
> > :
> > :
> > : On 5/14/06, Erik Hatcher <erik@ehatchersolutions.com > wrote:
> > : >
> > : > Could you share at least some pseudo-code of what you're doing in
> > the
> > : > loop of retrieving the "name" of each document?   Are you storing
> > all
> > : > of those names as you iterate?
> > : >
> > : > Have you profiled your application to see exactly where the memory
> > is
> > : > going?  It is surely being eaten by your own code and not Lucene.
> > : >
> > : >        Erik
> > : >
> > : >
> > : > On May 14, 2006, at 12:07 PM, Beady Geraghty wrote:
> > : >
> > : > > I have an out-of-memroy error when returning  many hits.
> > : > >
> > : > > I am still on Lucene 1.4.3
> > : > >
> > : > > I have a simple term query.  It returned 899810 documents.
> > : > > I try to retrieve the name of each document and nothing else
> > : > > and I ran out of memory.
> > : > >
> > : > > Instead of getting the names all at once, I tried to query again
> > after
> > : > > every 10,000 document.
> > : > > I close the index reader, index searcher, and the fsDir and
> > re-query
> > : > > for every 10000 documents.  This still doesn't work.
> > : > >
> > : > >> From another entry in the forum, it appears that the information
> > : > >> about
> > : > > the hits that I have skipped over are still kept even though I
> > don't
> > : > > access them.  Am I understanding it correctly that if I start
> > : > > accessing
> > : > > from the 400000th documents onwards, some information about the
> > : > > 0-399999
> > : > > documents are still cached even though I have skipped over those.
> > : > > Is there a way to get the file name (and perhaps other
> > information)
> > : > > of the
> > : > > remaining
> > : > > documents ?
> > : > >
> > : > > (I tried a different term query that returned a hit size of
> > 400000,
> > : > > and I
> > : > > was able
> > : > > to get the names of them all without re-quering)
> > : > >
> > : > > I think that I see someone mentioned about  clearing the hit cache
> > ,
> > : > > though I don't how this is done.
> > : > >
> > : > > Thank you in advance for any hints on dealing with this.
> > : >
> > : >
> > : >
> > ---------------------------------------------------------------------
> > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > : > For additional commands, e-mail: java-user-help@lucene.apache.org
> > : >
> > : >
> > :
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_25262_16781456.1149445821790--

From java-user-return-21088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 04 21:58:12 2006
Return-Path: <java-user-return-21088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34303 invoked from network); 4 Jun 2006 21:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jun 2006 21:58:12 -0000
Received: (qmail 48340 invoked by uid 500); 4 Jun 2006 21:58:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48294 invoked by uid 500); 4 Jun 2006 21:58:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48275 invoked by uid 99); 4 Jun 2006 21:58:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 14:58:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 14:58:06 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 447EB871000C2B7E for java-user@lucene.apache.org; Sun, 4 Jun 2006 23:57:44 +0200
Subject: query parser field name aliases
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
Content-Type: text/plain
Organization: snigel heavy industries
Date: Sun, 04 Jun 2006 23:57:38 +0200
Message-Id: <1149458259.4892.66.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was thinking it could be nice if the query parser handled aliases by
passing a Map to the parser. The data could be compiled from the index.

"name", "nam", "na" and "n" all trigger on "name", taking there is no
other field starting with an "n". 

Did anyone implement this, or should I hack one up?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 00:43:24 2006
Return-Path: <java-user-return-21089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67691 invoked from network); 5 Jun 2006 00:43:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 00:43:24 -0000
Received: (qmail 71224 invoked by uid 500); 5 Jun 2006 00:43:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71187 invoked by uid 500); 5 Jun 2006 00:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71176 invoked by uid 99); 5 Jun 2006 00:43:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 17:43:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 17:43:16 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5DA4233D34E; Sun,  4 Jun 2006 20:42:53 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9FB6033D34D
	for <java-user@lucene.apache.org>; Sun,  4 Jun 2006 20:42:52 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <1149458259.4892.66.camel@localhost>
References: <1149458259.4892.66.camel@localhost>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: query parser field name aliases
Date: Sun, 4 Jun 2006 20:42:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.9 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 4, 2006, at 5:57 PM, karl wettin wrote:
> I was thinking it could be nice if the query parser handled aliases by
> passing a Map to the parser. The data could be compiled from the  
> index.
>
> "name", "nam", "na" and "n" all trigger on "name", taking there is no
> other field starting with an "n".
>
> Did anyone implement this, or should I hack one up?

Rather than hacking QueryParser, simply do some regex replaces on the  
string before handing it to parser.  n:karl would get replaced with  
name:karl.  ([a-z]*)\: replaced with the field name that matches $1.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 00:50:08 2006
Return-Path: <java-user-return-21090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69788 invoked from network); 5 Jun 2006 00:50:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 00:50:08 -0000
Received: (qmail 78518 invoked by uid 500); 5 Jun 2006 00:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78483 invoked by uid 500); 5 Jun 2006 00:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78471 invoked by uid 99); 5 Jun 2006 00:50:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 17:50:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 17:50:01 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 08E4CB7625
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 10:49:28 +1000 (EST)
Message-ID: <448380E5.3040000@nuix.com.au>
Date: Mon, 05 Jun 2006 10:55:01 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: query parser field name aliases
References: <1149458259.4892.66.camel@localhost> <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
In-Reply-To: <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> 
> On Jun 4, 2006, at 5:57 PM, karl wettin wrote:
>> I was thinking it could be nice if the query parser handled aliases by
>> passing a Map to the parser. The data could be compiled from the index.
>>
>> "name", "nam", "na" and "n" all trigger on "name", taking there is no
>> other field starting with an "n".
>>
>> Did anyone implement this, or should I hack one up?
> 
> Rather than hacking QueryParser, simply do some regex replaces on the 
> string before handing it to parser.  n:karl would get replaced with 
> name:karl.  ([a-z]*)\: replaced with the field name that matches $1.

It seems a little more elegant to extend from QueryParser in this 
situation.  Override getFieldQuery which gets passed the field name 
string, and all you'd have to do is call the method in the superclass 
after modifying the field name.  Done, and no regexes required.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 01:13:36 2006
Return-Path: <java-user-return-21091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74356 invoked from network); 5 Jun 2006 01:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 01:13:36 -0000
Received: (qmail 4503 invoked by uid 500); 5 Jun 2006 01:13:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4470 invoked by uid 500); 5 Jun 2006 01:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4459 invoked by uid 99); 5 Jun 2006 01:13:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 18:13:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 18:13:29 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0390433D351; Sun,  4 Jun 2006 21:13:07 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 3A4CD33D34F
	for <java-user@lucene.apache.org>; Sun,  4 Jun 2006 21:13:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <448380E5.3040000@nuix.com.au>
References: <1149458259.4892.66.camel@localhost> <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com> <448380E5.3040000@nuix.com.au>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D5EE03F8-5A88-4C7E-82E1-C49887B6969A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: query parser field name aliases
Date: Sun, 4 Jun 2006 21:13:03 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.9 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 4, 2006, at 8:55 PM, Daniel Noll wrote:

> Erik Hatcher wrote:
>> On Jun 4, 2006, at 5:57 PM, karl wettin wrote:
>>> I was thinking it could be nice if the query parser handled  
>>> aliases by
>>> passing a Map to the parser. The data could be compiled from the  
>>> index.
>>>
>>> "name", "nam", "na" and "n" all trigger on "name", taking there  
>>> is no
>>> other field starting with an "n".
>>>
>>> Did anyone implement this, or should I hack one up?
>> Rather than hacking QueryParser, simply do some regex replaces on  
>> the string before handing it to parser.  n:karl would get replaced  
>> with name:karl.  ([a-z]*)\: replaced with the field name that  
>> matches $1.
>
> It seems a little more elegant to extend from QueryParser in this  
> situation.  Override getFieldQuery which gets passed the field name  
> string, and all you'd have to do is call the method in the  
> superclass after modifying the field name.  Done, and no regexes  
> required.

Indeed!  I agree - I was temporarily blinded by the desire to hack  
QueryParser itself in perhaps a one-off way that I didn't consider  
the subclassing option.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 01:39:16 2006
Return-Path: <java-user-return-21092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84126 invoked from network); 5 Jun 2006 01:39:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 01:39:16 -0000
Received: (qmail 23271 invoked by uid 500); 5 Jun 2006 01:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23244 invoked by uid 500); 5 Jun 2006 01:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23233 invoked by uid 99); 5 Jun 2006 01:39:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 18:39:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 18:39:08 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 590D25B76E; Sun,  4 Jun 2006 18:38:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3FDCF7F403
	for <java-user@lucene.apache.org>; Sun,  4 Jun 2006 18:38:39 -0700 (PDT)
Date: Sun, 4 Jun 2006 18:38:39 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: query parser field name aliases
In-Reply-To: <D5EE03F8-5A88-4C7E-82E1-C49887B6969A@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0606041833420.7454@hal.rescomp.berkeley.edu>
References: <1149458259.4892.66.camel@localhost>
 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
 <448380E5.3040000@nuix.com.au> <D5EE03F8-5A88-4C7E-82E1-C49887B6969A@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Indeed!  I agree - I was temporarily blinded by the desire to hack
: QueryParser itself in perhaps a one-off way that I didn't consider
: the subclassing option.

if all you care about is aliasing term, and phrase queries yiu might even
be able to use the DisjunctionMaxQueryParser i wrote for Solr verbatim.

It maps from a single alias to a list of fields with unique boosts (and a
tiebreaker value) to build a DisjunctionMaxQuery for each input term --
but if you only alis to one field then the DisMax queries will rewrite to
their sole clause.

if you also want wildcards and range queries to work you'd have to
override those methods appropriately as well

It's near the bottom of this file...

http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/util/SolrPluginUtils.java?view=markup



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 04:44:50 2006
Return-Path: <java-user-return-21093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14538 invoked from network); 5 Jun 2006 04:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 04:44:50 -0000
Received: (qmail 43670 invoked by uid 500); 5 Jun 2006 04:44:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43634 invoked by uid 500); 5 Jun 2006 04:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43623 invoked by uid 99); 5 Jun 2006 04:44:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jun 2006 21:44:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.207] (HELO smtp108.sbc.mail.mud.yahoo.com) (68.142.198.207)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 04 Jun 2006 21:44:41 -0700
Received: (qmail 94179 invoked from network); 5 Jun 2006 04:44:18 -0000
Received: from unknown (HELO ?192.168.1.101?) (kkrugler@pacbell.net@63.200.72.125 with plain)
  by smtp108.sbc.mail.mud.yahoo.com with SMTP; 5 Jun 2006 04:44:18 -0000
Mime-Version: 1.0
Message-Id: <p06230935c0a96559348c@[192.168.1.101]>
In-Reply-To: <d7a865a50605312346m4c75d8c5s553cda4b0d03db6c@mail.gmail.com>
References: <d7a865a50605312346m4c75d8c5s553cda4b0d03db6c@mail.gmail.com>
Date: Sun, 4 Jun 2006 21:41:27 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Multisearcher Lucene IOException
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Dan,

>java.io.IOException: read past EOF
>        at org.apache.lucene.store.InputStream.refill(InputStream.java:154)
>        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
>        at org.apache.lucene.store.InputStream.readBytes(InputStream.java
>:57)
>        at org.apache.lucene.index.SegmentReader.norms(SegmentReader.java
>:356)
>        at org.apache.lucene.index.MultiReader.norms(MultiReader.java:159)
>        at org.apache.lucene.search.TermQuery$TermWeight.scorer(
>TermQuery.java:64)
>        at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(
>BooleanQuery.java:165)
>        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java
>:117)
>        at org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java
>:141)
>        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>        at org.apache.lucene.search.Hits.<init>(Hits.java:51)

[snip]

We've seen similar errors on occasion, though our stack trace is a 
bit different:

java.io.IOException: read past EOF
         at 
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:60)
         at 
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:33)
         at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:46)
         at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:69)
         at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:62)
         at 
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)
         at org.apache.lucene.index.MultiReader.document(MultiReader.java:104)
         at org.apache.lucene.search.IndexSearcher.doc(IndexSearcher.java:83)
         at 
org.apache.nutch.searcher.IndexSearcher.getDetails(IndexSearcher.java:113)
         at org.apache.nutch.searcher.NutchBean.getDetails(NutchBean.java:300)
         at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
         at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
         at java.lang.reflect.Method.invoke(Method.java:585)
         at org.apache.nutch.ipc.RPC$1.call(RPC.java:389)
         at org.apache.nutch.ipc.Server$Handler.run(Server.java:193)

Our config is for a Nutch distributed searcher. These errors seem to 
occur under heavy load for us.

[snip]

>Anyone can tell me what is the problem?
>I opened in readonly mode my index with luke and I don't have any problem to
>check contents.
>
>Could be my index corrupted?
>What is the usually code at startup to do a check of integrity of lucene
>index? With this code I can detect if my index is corrupted and force to
>create a new index.

We haven't yet tracked it down, but at least in our case I don't 
think it's a bad index. After seeing a few postings about this same 
general problem, I'm guessing there's a bug hiding someplace.

Sorry to not have a better answer...

-- Ken
-- 
Ken Krugler
Krugle, Inc.
+1 530-210-6378
"Find Code, Find Answers"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 10:18:00 2006
Return-Path: <java-user-return-21094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86548 invoked from network); 5 Jun 2006 10:18:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 10:17:59 -0000
Received: (qmail 9097 invoked by uid 500); 5 Jun 2006 10:17:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9055 invoked by uid 500); 5 Jun 2006 10:17:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9039 invoked by uid 99); 5 Jun 2006 10:17:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 03:17:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 03:17:49 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id EAE37187B3; Mon,  5 Jun 2006 10:17:26 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 2589D187B1
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 10:17:24 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: Compound / non-compound index files and SIGKILL
Date: Mon, 5 Jun 2006 11:17:11 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0057_01C68891.9596C7C0"
In-Reply-To: <Pine.LNX.4.58.0606041833420.7454@hal.rescomp.berkeley.edu>
Thread-Index: AcaIQNnMM65L/fuoTZCjizCT3xD93AAN3bGw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060605101724.2589D187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0057_01C68891.9596C7C0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

I've been indexing live data into a compound index from an MTA. I'm
resolving a bunch of problems unrelated to Lucene (disparate hangs in my
content handlers). When I get a hang, I typically need to kill my daemon,
alas more often than not using kill -9 (SIGKILL).

However, these SIGKILLs are leaving large temporary(?) files, which I guess
are non-compound index files transiently extracted from the working .cfs
files:

-rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
-rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
-rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm

-rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
-rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
-rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm

They are left intact after restarting my daemon. Presumably they are not
treated as being part of the compound index. I see no corresponding .cfs
file for them. 

As a consequence of these - I suspect - I am getting a very large overall
disk requirement for my index, presumably because of replicated field data.
My guess is that the field data in the orphaned .fdt files needs to be
regenerated.

In another index directory from a previous test run (again with SIGKILLs), I
have 98 GB of index files, with only 12 BG devoted to compound files for the
field index (.cfs). The rest of the disk space is used by orphaned
uncompounded index files; I see 51 GB devoted to uncompounded field data
(.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted to term
frequencies (.frq).

Here's my question:

How can I attempt to merge these orphaned into the compound index, using
IndexWriter.addIndexes(), or would I be foolish attempting this?

------=_NextPart_000_0057_01C68891.9596C7C0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNTEw
MTcwOFowIwYJKoZIhvcNAQkEMRYEFOclOb6Z2S4+qcc/uQpHuY5znjWdMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAJ7bnR//7bln7gtkcfY9fINe+s0JuTnK7gc6
zW02ccx9BRewYTQQb78v8YtEyNfxNuvQ33Hq0xTZQowCzjhVriynKTKwf7aw5GBgf2tTAdRSPRPS
SUjA0buwXfPo2MQOozqKC1zNWehQ8opvxyi3Cycp8VyObTeEfRJkbH7DfAMzVAqYDdlaeKgK6Pk3
Palx+HibjxptupED5s2CPGoSK8qmncr3skJZBnnhvKxrqSU+di3YXx9RG440PUTiVxaBJbWqOqoh
ENJ5q9+iNjQAg94MZOHZcFFD3PPscyNbX3vhelwqNwca/rO8MhlL5LBOJFNvS/GD2UrQ9+xq41vm
BGQAAAAAAAA=

------=_NextPart_000_0057_01C68891.9596C7C0--


From java-user-return-21095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 11:54:24 2006
Return-Path: <java-user-return-21095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18528 invoked from network); 5 Jun 2006 11:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 11:54:24 -0000
Received: (qmail 31858 invoked by uid 500); 5 Jun 2006 11:54:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31824 invoked by uid 500); 5 Jun 2006 11:54:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31812 invoked by uid 99); 5 Jun 2006 11:54:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 04:54:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 04:54:15 -0700
Received: by wr-out-0506.google.com with SMTP id i20so976348wra
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 04:53:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tsIolINFjutMvFKEqz6h1U0EylNQHKVnA6Ep40A31YGtZ0cHf3PFQx+uD0A++fjsxYa9AeifI9W/v0Rk8YW+bv9BvxsPCh6I3PHdHZck1yx7f/QRb2VLsjxAZLYXCZuG5N2dQ3NvlPHjxU3+7H2nokOvBKdZvVe97AhHeOTv+RE=
Received: by 10.64.114.10 with SMTP id m10mr3336683qbc;
        Mon, 05 Jun 2006 04:53:54 -0700 (PDT)
Received: by 10.65.216.14 with HTTP; Mon, 5 Jun 2006 04:53:54 -0700 (PDT)
Message-ID: <4f2c7c9b0606050453q4048232du4ff726fca8aece1b@mail.gmail.com>
Date: Mon, 5 Jun 2006 19:53:54 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Maybe a bug of lucene 1.9
In-Reply-To: <C0FEEF53-423D-4F27-A1C0-F32C5CC9BEE1@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42917_15202951.1149508434916"
References: <4f2c7c9b0605290334g332e507akc112b34c4cda31f6@mail.gmail.com>
	 <C0FEEF53-423D-4F27-A1C0-F32C5CC9BEE1@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_42917_15202951.1149508434916
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBhbSB2ZXJ5IGdyYXRlZnVsIGZvciBhbGwgeW91ciByZXBseSBhbmQgdmVyeSBzb3JyeSBmb3Ig
bXkgbGF0ZSByZXNwb25zZS4KWW91IGNhbiBzZWUgdGhhdCBJIHBvc3RlZCBteSBtZXNzYWdlIHR3
aWNlLCBiZWNhdXNlIEkgZGlkbid0IHNlZSBpdCBhZnRlciBJCnBvc3RlZCBmaXJzdCBhbmQgdGhv
dWdodCBpdCB3b3VsZG4ndCBhcHBlYXIgaW4gdGhlIGxpc3QuIFNvIHRoZXNlIGRheXMgSQpkaWRu
J3QgY2hlY2sgbXkgZ21haWwgYm94LiAgSSBoYXZlIGZpZ3VyZWQgb3V0IHRoYXQgcHJvYmxlbS4g
VGhlIGluZGV4IHdhcyBhCm1peHR1cmUgb2YgdHdvIGtpbmRzIG9mIGluZGV4IHR5cGVzICB0aGF0
IHdlcmUgY29tcHJpc2VkIG9mICAuY2ZzIGFuZAooLnRpcywudGlpLmFuZCBzbyBvbikuCgogID5J
J2xsIHNlY29uZCBPdGlzJyByZXF1ZXN0IGFib3V0IHRoZSBzcGVjaWFsIHNlZ21lbnRhdGlvbiBh
cGkuICBJZiBpdAo+aXMgb3BlbiBzb3VyY2UsIEknZCBsb3ZlIHRvIHRpbmtlciB3aXRoIGl0LiAg
1tDOxMrHsrvMq8TRoaMgIDopCgpUaGUgYXBpIGlzIG9wZW4gc291cmNlLCBJIGNhbiBkaXN0cmli
dXRlIGl0IHRvIHlvdS4gSSBhbSBnbGFkIFlvdSB1bmRlcnN0YW5kCkNoaW5lc2UuIEhvdyBJIHNo
b3VsZCBkZWxpdmVyIGl0IHRvIHlvdT8gIEJlY2F1c2UgdGhlIGFwaSBpbmNsdWRlcyBhIENoaW5l
c2UKbGV4aXMgd2hpY2ggaXMgbmVhcmx5IDEwTSBpbiBzaXplLiBNYXliZSBJIGNhbiBtYWlsIGl0
IHRvIHlvdS4KCgoKMjAwNi81LzMwLCBFcmlrIEhhdGNoZXIgPGVyaWtAZWhhdGNoZXJzb2x1dGlv
bnMuY29tPjoKPgo+Cj4gT24gTWF5IDI5LCAyMDA2LCBhdCA2OjM0IEFNLCBodSBhbmR5IHdyb3Rl
Ogo+ID4gSSBpbmRleGVkIGEgY29sbGVjdGlvbiBvZiBDaGluZXNlIGRvY3VtZW50cy4gSSB1c2Ug
YSBzcGVjaWFsCj4gPiBzZWdtZW50YXRpb24KPiA+IGFwaSB0byBkbyB0aGUgYW5hbHlzaXMsIGJl
Y2F1c2UgdGhlIHNlZ21lbnRhdGlvbiBvZiBDaGluZXNlIGlzCj4gPiBkaWZmZXJlbnQKPiA+IGZy
b20gRW5nbGlzaC4KPgo+IEknbGwgc2Vjb25kIE90aXMnIHJlcXVlc3QgYWJvdXQgdGhlIHNwZWNp
YWwgc2VnbWVudGF0aW9uIGFwaS4gIElmIGl0Cj4gaXMgb3BlbiBzb3VyY2UsIEknZCBsb3ZlIHRv
IHRpbmtlciB3aXRoIGl0LiAg1tDOxMrHsrvMq8TRoaMgIDopCj4KPiA+IEEgc3RyYW5nZSB0aGlu
ZyBoYXBwZW5lZC4gICBXaXRoIGx1Y2VuZSAxLjQgb3IgbHVjZW5lIDIuMCwgaXQgd2lsbAo+ID4g
YmUgYWxsCj4gPiByaWdodCB0byByZXRyaWV2ZSB0aGUgY29ycmVzcG9uZGluZyBkb2N1bWVudHMg
Z2l2ZW4gdGhlIHRlcm1zIHRoYXQKPiA+IGV4aXN0IGluCj4gPiB0aGUgaW5kZXggICoudGlzIGZp
bGUoSSB3cm90ZSBhIHByb2dyYW0gdG8gcGljayB0aGUgdGVybXMgZnJvbQo+ID4gdGhlIC50aXMg
ZmlsZQo+ID4gYW5kIHNlYXJjaCB0aGVtKS4gIEJ1dCB3aXRoIDEuOSwgZm9yIHNvbWUgdGVybXMg
dGhhdCBleGlzdGVkIGluIHRoZQo+ID4gaW5kZXgsIEkKPiA+IGNvdWxkbid0IHJldHJpZXZlIHRo
ZSBjb3JyZXNwb25kaW5nIGRvY3VtZW50Lgo+ID4KPiA+IENhbiBhbnlib2R5IGdpdmUgbWUgc29t
ZSBhZHZpY2UgYWJvdXQgdGhpcz8gVGhhbmsgeW91IGluIGFkdmFuY2UuCj4KPiBJZiB5b3UgY2Fu
IHNoYXJlIGFuIGV4YW1wbGUgdGhhdCBkZW1vbnN0cmF0ZXMgYW4gaXNzdWUsIHdlJ2QgbG92ZSB0
bwo+IGhhdmUgaXQgYW5kIGluY29ycG9yYXRlIGl0IGludG8gb3VyIHRlc3Qgc3VpdGUgYW5kIGZp
eCB0aGUKPiBpbXBsZW1lbnRhdGlvbiBpZiBhIGJ1ZyBleGlzdHMuICAgQSB3b3JraW5nIGV4YW1w
bGUgb2YgYSBidWcgY2FuIGdldAo+IGZpeGVkIG11Y2ggZWFzaWVyIHRoYW4gbG9va2luZyBmb3Ig
bmVlZGxlcyBpbiBhIGhheXN0YWNrLgo+Cj4gICAgICAgIEVyaWsKPgo+Cj4gLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
Cj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5h
cGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhl
bHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+Cg==
------=_Part_42917_15202951.1149508434916--

From java-user-return-21096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 13:55:10 2006
Return-Path: <java-user-return-21096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52715 invoked from network); 5 Jun 2006 13:55:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 13:55:09 -0000
Received: (qmail 60945 invoked by uid 500); 5 Jun 2006 13:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60655 invoked by uid 500); 5 Jun 2006 13:55:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60644 invoked by uid 99); 5 Jun 2006 13:55:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 06:55:02 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 06:55:00 -0700
Received: by py-out-1112.google.com with SMTP id c30so1299670pyc
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 06:54:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tSF55Uf9Pn1UWuZt9pb1F0lidNYN2ZymumRJ2iUu1l300JiGQoSCUKi9WDKvnl3eX1Fg2ipBvLR1BRcMGD8XdLdXmjDGuq8igQmRMZRnrH4yvMC7O8SBzId/BvS1JItnN8P6/WSKUwn5J4xHZqJob6JsUEX5QqB12eL1m9EAlhU=
Received: by 10.35.36.13 with SMTP id o13mr6475475pyj;
        Mon, 05 Jun 2006 06:54:40 -0700 (PDT)
Received: by 10.35.60.14 with HTTP; Mon, 5 Jun 2006 06:54:40 -0700 (PDT)
Message-ID: <e994873a0606050654u5a65c8cdq84aea688e741ca2@mail.gmail.com>
Date: Mon, 5 Jun 2006 09:54:40 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org, "eks dev" <eksdev@yahoo.co.uk>
Subject: Re: MMapDirectory vs RAMDirectory
In-Reply-To: <20060528082805.97131.qmail@web25915.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1491_21564254.1149515680063"
References: <429c032d0605280109i7f0c8392x6d0017a5f6b70aac@mail.gmail.com>
	 <20060528082805.97131.qmail@web25915.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1491_21564254.1149515680063
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm reposting this from java-dev to java-user for greater exposure.

My search process is using MMapDirectory on a read-only index via:

-Dorg.apache.lucene.FSDirectory.class=org.apache.lucene.store.MMapDirectory

Another indexing process is building the next version of the index in a
different directory. When it's time to switch to the new index, the search
process closes the old IndexSearcher, MultiReader (2) and FSDirectories (2)
and opens the new index. Subsequently, attempts to delete the old index
files fail because there are still references to them from the old
MMapDirectory (in contrast, the deletes succeed when using FSDirectory).

There is no 'unmap' method, so my understanding is that the file mapping is
valid until the underlying buffer is garbage-collected. However, forcing the
gc doesn't help.

I found this bug listed at Sun:
http://bugs.sun.com/bugdatabase/view_bug.do;:YfiG?bug_id=4724038
Synopsis: (fs) Add unmap method to MappedByteBuffer)

The file deletes don't fail on Linux, but I'm wondering if there is still a
memory leak?

Has anyone discovered a way of releasing the old memory mapped files so that
they can be deleted sucessfully on Windows? My current workaround is to
periodically reattempt to delete the old index files.

Peter

------=_Part_1491_21564254.1149515680063--

From java-user-return-21097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 15:08:15 2006
Return-Path: <java-user-return-21097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80286 invoked from network); 5 Jun 2006 15:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 15:08:15 -0000
Received: (qmail 38942 invoked by uid 500); 5 Jun 2006 15:08:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38893 invoked by uid 500); 5 Jun 2006 15:08:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38881 invoked by uid 99); 5 Jun 2006 15:08:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:08:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:08:04 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 44840D270000EA82 for java-user@lucene.apache.org; Mon, 5 Jun 2006 17:07:39 +0200
Subject: Re: query parser field name aliases
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <448380E5.3040000@nuix.com.au>
References: <1149458259.4892.66.camel@localhost>
	 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
	 <448380E5.3040000@nuix.com.au>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 05 Jun 2006 17:07:34 +0200
Message-Id: <1149520055.4892.120.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-06-05 at 10:55 +1000, Daniel Noll wrote:
> Erik Hatcher wrote:
> > 
> > On Jun 4, 2006, at 5:57 PM, karl wettin wrote:
> >> I was thinking it could be nice if the query parser handled aliases by
> > 
> > Rather than hacking QueryParser, simply do some regex replaces on the 
> > string before handing it to parser.  n:karl would get replaced with 
> > name:karl.  ([a-z]*)\: replaced with the field name that matches $1.
> 
> It seems a little more elegant to extend from QueryParser in this 
> situation.  Override getFieldQuery which gets passed the field name 
> string, and all you'd have to do is call the method in the superclass 
> after modifying the field name.

There is a problem with this. Java does not allow multiple inheritance
and there are other subclasses of QueryParser. Perhaps I can fix it with
a decorator instead.

Thanks for the ideas!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 15:14:40 2006
Return-Path: <java-user-return-21098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82565 invoked from network); 5 Jun 2006 15:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 15:14:39 -0000
Received: (qmail 56766 invoked by uid 500); 5 Jun 2006 15:14:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56725 invoked by uid 500); 5 Jun 2006 15:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56707 invoked by uid 99); 5 Jun 2006 15:14:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:14:32 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vsood2@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO nz-out-0102.google.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:14:30 -0700
Received: by nz-out-0102.google.com with SMTP id 13so971755nzp
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 08:14:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PoJZ4951DgJGFkRmEAQSCI1+Vn1xzTRxvpwtqitVG/06RbLwSFMhWZuNDwu/OV++vp2wneuj1/7WRCT7SC2/n9yLh0qAhvF85SluZNYuUUG1YzrGd6HXaFz0u62OcWPyf/7jpea5o80bwAhsuLStqAotB7Pn1iAM7tcwyFJmqfg=
Received: by 10.37.21.52 with SMTP id y52mr6469735nzi;
        Mon, 05 Jun 2006 08:14:03 -0700 (PDT)
Received: by 10.36.221.72 with HTTP; Mon, 5 Jun 2006 08:14:03 -0700 (PDT)
Message-ID: <800d6e9c0606050814m549c2638k18676a4243bed7e4@mail.gmail.com>
Date: Mon, 5 Jun 2006 11:14:03 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: duplicate results MultiFieldQueryParser
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2157_26334294.1149520443083"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2157_26334294.1149520443083
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
  I am searching two fields at a time and using MultiFieldQueryParser to
parse my query (method described in In Action book). I noticed that I am
getting duplicate results. The document exists only once in the index
structure but in results its showing the same doucment multiple times with
same same score and also different score.

Basic way I am doing is

String fields[] = null;

fields[0] = new String("field1");
fields[1] = new String("field2");

Query query = MultiFieldQueryParser.parse(Query, fields , new
StandardAnalyzer());

Hits hits = is.search(query);

using the above code.. I m getting few documents multiple times. Is there
any obvious reason for this?

Thanks for ur replies

------=_Part_2157_26334294.1149520443083--

From java-user-return-21099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 15:18:16 2006
Return-Path: <java-user-return-21099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83622 invoked from network); 5 Jun 2006 15:18:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 15:18:16 -0000
Received: (qmail 67540 invoked by uid 500); 5 Jun 2006 15:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67471 invoked by uid 500); 5 Jun 2006 15:17:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67418 invoked by uid 99); 5 Jun 2006 15:17:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:17:33 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.90.187.18] (HELO smtp-gw4.us.gxs.com) (204.90.187.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:17:31 -0700
Received: from unknown (HELO bromail01.internal.gxs.com) ([10.160.0.166])
  by smtp-gw4.us.gxs.com with ESMTP; 05 Jun 2006 11:24:25 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Mon, 5 Jun 2006 11:17:10 -0400
Message-ID: <ABF4E02DA33A6F4BAC41122C7086C8990376A7CC@bromail01.internal.gxs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Compound / non-compound index files and SIGKILL
Thread-Index: AcaIQNnMM65L/fuoTZCjizCT3xD93AAN3bGwAA5zkuA=
From: <Charles.Sanders@gxs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rob,
Not sure I have the answer to your question, but thought I would add my
observations.  According to the book "Lucene In Action", the default
index type is compound, although I did not find this mentioned in the
API docs.  However, my observations have been that this is not true.  At
least on my system it appears to build a multifile index at times.
Which has lead to other problems similar to what you are reporting.

I found the solution to my problem was to declare my index as compound.
	IndexWriter writer =3D new IndexWriter(indexDir, new
StandardAnalyzer(), false);
      writer.setUseCompoundFile(true);=20

Now my index is built as compound and I no longer have "orphaned" index
files.

Hope this helps someone.
Charles




-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]=20
Sent: Monday, June 05, 2006 6:17 AM
To: java-user@lucene.apache.org
Subject: Compound / non-compound index files and SIGKILL

I've been indexing live data into a compound index from an MTA. I'm
resolving a bunch of problems unrelated to Lucene (disparate hangs in my
content handlers). When I get a hang, I typically need to kill my
daemon, alas more often than not using kill -9 (SIGKILL).

However, these SIGKILLs are leaving large temporary(?) files, which I
guess are non-compound index files transiently extracted from the
working .cfs
files:

-rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
-rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
-rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm

-rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
-rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
-rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm

They are left intact after restarting my daemon. Presumably they are not
treated as being part of the compound index. I see no corresponding .cfs
file for them.=20

As a consequence of these - I suspect - I am getting a very large
overall disk requirement for my index, presumably because of replicated
field data.
My guess is that the field data in the orphaned .fdt files needs to be
regenerated.

In another index directory from a previous test run (again with
SIGKILLs), I have 98 GB of index files, with only 12 BG devoted to
compound files for the field index (.cfs). The rest of the disk space is
used by orphaned uncompounded index files; I see 51 GB devoted to
uncompounded field data (.fdt), 13 BG devoted to term positions (.prx)
and 13 BG devoted to term frequencies (.frq).

Here's my question:

How can I attempt to merge these orphaned into the compound index, using
IndexWriter.addIndexes(), or would I be foolish attempting this?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 15:23:19 2006
Return-Path: <java-user-return-21100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85528 invoked from network); 5 Jun 2006 15:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 15:23:19 -0000
Received: (qmail 82686 invoked by uid 500); 5 Jun 2006 15:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82662 invoked by uid 500); 5 Jun 2006 15:23:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82648 invoked by uid 99); 5 Jun 2006 15:23:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:23:12 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:23:11 -0700
Received: by py-out-1112.google.com with SMTP id c30so1324666pyc
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 08:22:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dEH7ZKVLBa9usDOV5DFIyjBf4vgodsDUNqw0G6FF5LSKEik32HnGGb89MrVsIfdPmgSyQPEpy1mPueOjgcM444d7R5ieTpPHueSKhC8omSkfQoFARMd1ofAGwiS6W9k4Ys59biGKvdtzubY8RtU7vGyx/4i6j+PPwcKHDvwxn3M=
Received: by 10.35.43.10 with SMTP id v10mr6601628pyj;
        Mon, 05 Jun 2006 08:22:50 -0700 (PDT)
Received: by 10.35.17.5 with HTTP; Mon, 5 Jun 2006 08:22:50 -0700 (PDT)
Message-ID: <359a92830606050822t12c3ef4fj46e2c549774a34af@mail.gmail.com>
Date: Mon, 5 Jun 2006 11:22:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: duplicate results MultiFieldQueryParser
In-Reply-To: <800d6e9c0606050814m549c2638k18676a4243bed7e4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43919_21396094.1149520970645"
References: <800d6e9c0606050814m549c2638k18676a4243bed7e4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_43919_21396094.1149520970645
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A few thoughts...

1> are you sure you only indexed the document once? If you indexed the same
data multiple times, you'll have duplicate documents, each of which will
have a different Lucene ID (i.e. doc()).

2> have you examined your index with, say, Luke? I've found that a wonderful
tool for seeing if the data I *thought* was in my index was actually there.

3> when you say "the same document", how do you know that? The internal
Lucene ID or some field you've put in the index? This really as another form
of "are you sure you indexed the data once?" because the internal Lucene id
is what you get back from hits.doc(). If you're getting multiple entries
like that, then I'm lost.

Best
Erick

------=_Part_43919_21396094.1149520970645--

From java-user-return-21101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 15:45:38 2006
Return-Path: <java-user-return-21101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96146 invoked from network); 5 Jun 2006 15:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 15:45:38 -0000
Received: (qmail 33725 invoked by uid 500); 5 Jun 2006 15:45:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33699 invoked by uid 500); 5 Jun 2006 15:45:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33688 invoked by uid 99); 5 Jun 2006 15:45:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:45:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 08:45:29 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 04924187B3; Mon,  5 Jun 2006 15:45:07 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 8EAED187B1
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 15:45:05 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Mon, 5 Jun 2006 16:45:04 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <ABF4E02DA33A6F4BAC41122C7086C8990376A7CC@bromail01.internal.gxs.com>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0088_01C688BF.64B82A80"
Thread-Index: AcaIQNnMM65L/fuoTZCjizCT3xD93AAN3bGwAA5zkuAAAPrFsA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060605154505.8EAED187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0088_01C688BF.64B82A80
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Thanks for the suggestion, Charles. I've also been consistently explicitly
setting writer.setUseCompoundFile(true) too. When I started the project with
Lucene 1.4.3 and ran out of file handles without it I found that it was
needed. I'm fairly certain from timestamps on the orphaned files that the
orphaning is coincidental with my SIGKILLs.

-----Original Message-----
From: Charles.Sanders@gxs.com [mailto:Charles.Sanders@gxs.com] 
Sent: 05 June 2006 16:17
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL

Rob,
Not sure I have the answer to your question, but thought I would add my
observations.  According to the book "Lucene In Action", the default index
type is compound, although I did not find this mentioned in the API docs.
However, my observations have been that this is not true.  At least on my
system it appears to build a multifile index at times.
Which has lead to other problems similar to what you are reporting.

I found the solution to my problem was to declare my index as compound.
	IndexWriter writer = new IndexWriter(indexDir, new
StandardAnalyzer(), false);
      writer.setUseCompoundFile(true); 

Now my index is built as compound and I no longer have "orphaned" index
files.

Hope this helps someone.
Charles




-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]
Sent: Monday, June 05, 2006 6:17 AM
To: java-user@lucene.apache.org
Subject: Compound / non-compound index files and SIGKILL

I've been indexing live data into a compound index from an MTA. I'm
resolving a bunch of problems unrelated to Lucene (disparate hangs in my
content handlers). When I get a hang, I typically need to kill my daemon,
alas more often than not using kill -9 (SIGKILL).

However, these SIGKILLs are leaving large temporary(?) files, which I guess
are non-compound index files transiently extracted from the working .cfs
files:

-rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
-rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
-rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm

-rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
-rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
-rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm

They are left intact after restarting my daemon. Presumably they are not
treated as being part of the compound index. I see no corresponding .cfs
file for them. 

As a consequence of these - I suspect - I am getting a very large overall
disk requirement for my index, presumably because of replicated field data.
My guess is that the field data in the orphaned .fdt files needs to be
regenerated.

In another index directory from a previous test run (again with SIGKILLs), I
have 98 GB of index files, with only 12 BG devoted to compound files for the
field index (.cfs). The rest of the disk space is used by orphaned
uncompounded index files; I see 51 GB devoted to uncompounded field data
(.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted to term
frequencies (.frq).

Here's my question:

How can I attempt to merge these orphaned into the compound index, using
IndexWriter.addIndexes(), or would I be foolish attempting this?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0088_01C688BF.64B82A80
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNTE1
NDUwM1owIwYJKoZIhvcNAQkEMRYEFEc4R+tDw+/tnHX4eaWbEfTxt1bbMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBACC6Z1/gZmwi/99GKoG3Yot4w12cTh+8y3HK
oa2PFHNwbP+hygfYbKBptahPxpFQbJ+TmTaOOeGHE9LHQliscai3EIZD8NsBk28+yoErJQbrMI4n
zah1+qywuqPjvYySCZfmw//K2LFW7oSMlFRQPnjG5JGiThdFutl4+j60RQvXMPlUYtd2b0wG8Kfu
uxuxRsPLnXEijGpZVX8IJpthFSJMA/JxwggaAS0rOyF19xpwWqkdc20dlDFcSUh8JOCVzo4oplvc
mVd1j7zfLk54o3wCNON7aDG0p2E1gCiAphwNhEP0QnEKkwnCndRzG3OpmojnzvaXoeSR/uTRTcuN
qRcAAAAAAAA=

------=_NextPart_000_0088_01C688BF.64B82A80--


From java-user-return-21102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 16:58:39 2006
Return-Path: <java-user-return-21102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19123 invoked from network); 5 Jun 2006 16:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 16:58:39 -0000
Received: (qmail 85337 invoked by uid 500); 5 Jun 2006 16:58:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85310 invoked by uid 500); 5 Jun 2006 16:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85288 invoked by uid 99); 5 Jun 2006 16:58:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:58:32 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 05 Jun 2006 09:58:31 -0700
Received: (qmail 15195 invoked by uid 60001); 5 Jun 2006 16:58:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=p+crAiAs3DvvWBmSZSpr0z0L9FVNjLZfku1y72sPRr/yxXZZ/NDNQDdNBtqEAbEWE0lf7/zdW5zxqgAKpM7Gox9PBtPevyophepcykxX+u/qBBEHJ9d9JR5bAc1fSvQ7qlyX+r4vwDSBlqsME+433YwhPTlUNrtQRzwR7GGeYH8=  ;
Message-ID: <20060605165810.15193.qmail@web50311.mail.yahoo.com>
Date: Mon, 5 Jun 2006 09:58:10 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Compound / non-compound index files and SIGKILL
To: java-user@lucene.apache.org
In-Reply-To: <20060605101724.2589D187B1@mail.seseit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rob,
My guess is that those are orphans that you cannot save and add to your index.  Who knows what state things are in if you killed the JVM.  I think you could try editing your segments file and manually adding all segments to it (e.g. _15djq from your example), and then try optimizing the index, but if I had to bet, I'd bet this would just blow up in your face during optimization.  The solution is to figure out why things hang and fix the culprit.

Another possibility might be to add ShutdownHooks to your application and try to stop indexing gracefully.  However, with SIGKILL I'm afraid shutdown hooks don't get to run (double-check that, I'm not certain).

Otis

----- Original Message ----
From: Rob Staveley (Tom) <rstaveley@seseit.com>
To: java-user@lucene.apache.org
Sent: Monday, June 5, 2006 6:17:11 AM
Subject: Compound / non-compound index files and SIGKILL

I've been indexing live data into a compound index from an MTA. I'm
resolving a bunch of problems unrelated to Lucene (disparate hangs in my
content handlers). When I get a hang, I typically need to kill my daemon,
alas more often than not using kill -9 (SIGKILL).

However, these SIGKILLs are leaving large temporary(?) files, which I guess
are non-compound index files transiently extracted from the working .cfs
files:

-rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
-rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
-rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm

-rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
-rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
-rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm

They are left intact after restarting my daemon. Presumably they are not
treated as being part of the compound index. I see no corresponding .cfs
file for them. 

As a consequence of these - I suspect - I am getting a very large overall
disk requirement for my index, presumably because of replicated field data.
My guess is that the field data in the orphaned .fdt files needs to be
regenerated.

In another index directory from a previous test run (again with SIGKILLs), I
have 98 GB of index files, with only 12 BG devoted to compound files for the
field index (.cfs). The rest of the disk space is used by orphaned
uncompounded index files; I see 51 GB devoted to uncompounded field data
(.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted to term
frequencies (.frq).

Here's my question:

How can I attempt to merge these orphaned into the compound index, using
IndexWriter.addIndexes(), or would I be foolish attempting this?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 16:59:16 2006
Return-Path: <java-user-return-21103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19494 invoked from network); 5 Jun 2006 16:59:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 16:59:15 -0000
Received: (qmail 87287 invoked by uid 500); 5 Jun 2006 16:59:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87204 invoked by uid 500); 5 Jun 2006 16:59:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86773 invoked by uid 99); 5 Jun 2006 16:59:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:59:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 09:59:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7D0A733D3B2; Mon,  5 Jun 2006 12:58:43 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id E8E6F33D3B6
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 12:58:39 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <1149520055.4892.120.camel@localhost>
References: <1149458259.4892.66.camel@localhost> <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com> <448380E5.3040000@nuix.com.au> <1149520055.4892.120.camel@localhost>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <10BAFAB9-5164-4420-B057-92C5FDB96BE3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: query parser field name aliases
Date: Mon, 5 Jun 2006 12:58:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 5, 2006, at 11:07 AM, karl wettin wrote:
> On Mon, 2006-06-05 at 10:55 +1000, Daniel Noll wrote:
>> Erik Hatcher wrote:
>>>
>>> On Jun 4, 2006, at 5:57 PM, karl wettin wrote:
>>>> I was thinking it could be nice if the query parser handled  
>>>> aliases by
>>>
>>> Rather than hacking QueryParser, simply do some regex replaces on  
>>> the
>>> string before handing it to parser.  n:karl would get replaced with
>>> name:karl.  ([a-z]*)\: replaced with the field name that matches $1.
>>
>> It seems a little more elegant to extend from QueryParser in this
>> situation.  Override getFieldQuery which gets passed the field name
>> string, and all you'd have to do is call the method in the superclass
>> after modifying the field name.
>
> There is a problem with this. Java does not allow multiple inheritance
> and there are other subclasses of QueryParser. Perhaps I can fix it  
> with
> a decorator instead.

Huh?   Could you elaborate on what won't work about subclassing?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:17:42 2006
Return-Path: <java-user-return-21104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28803 invoked from network); 5 Jun 2006 17:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:17:42 -0000
Received: (qmail 17714 invoked by uid 500); 5 Jun 2006 17:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17487 invoked by uid 500); 5 Jun 2006 17:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17465 invoked by uid 99); 5 Jun 2006 17:17:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:17:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mails.adam@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:17:32 -0700
Received: by nf-out-0910.google.com with SMTP id x4so1700982nfb
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 10:17:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type;
        b=rM98YY4GzXJfXRgB/y6ZFRX62xyrFUTqB6DawHOzPiwAb+RNY1Uf+QXj0/bslguRwOU7ctPvccSp+8wAdb0mv1VacEUmW+9W8tuj7NqWp1XiltkjnJk7D3ym6DxU31MkbOxjuxnNJ3bLEDdZPFe2Y1E9gJnpaFzfpUgFi8Wt5Vk=
Received: by 10.48.222.9 with SMTP id u9mr4541071nfg;
        Mon, 05 Jun 2006 10:17:11 -0700 (PDT)
Received: from ?192.168.1.27? ( [202.147.188.55])
        by mx.gmail.com with ESMTP id i1sm5508381nfe.2006.06.05.10.17.09;
        Mon, 05 Jun 2006 10:17:11 -0700 (PDT)
Message-ID: <44846708.9000205@gmail.com>
Date: Mon, 05 Jun 2006 22:16:56 +0500
From: Adam Saeed <mails.adam@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: lucene-web demo is not working?
Content-Type: multipart/alternative;
 boundary="------------030605010209050800000607"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030605010209050800000607
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I have not able to fix the below errors, for lucene-web demo.
installed tomcat-5.5, lucene-2.0.0 and jdk 1.4.
after enter search button error shows:
http status 500

org.apache.jasper.JasperException: Unable to compile class for JSP

An error occurred at line: 60 in the jsp file: /results.jsp
Generated servlet error:
The method parse(String) in the type QueryParser is not applicable for the arguments (String, String, Analyzer)

I am not a java guy, i modified the QueryParser object at result.jsp, but not get the result.

Thanks
Adam 




--------------030605010209050800000607--

From java-user-return-21105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:18:54 2006
Return-Path: <java-user-return-21105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29982 invoked from network); 5 Jun 2006 17:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:18:54 -0000
Received: (qmail 19916 invoked by uid 500); 5 Jun 2006 17:18:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19886 invoked by uid 500); 5 Jun 2006 17:18:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19875 invoked by uid 99); 5 Jun 2006 17:18:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:18:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mails.adam@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:18:47 -0700
Received: by nf-out-0910.google.com with SMTP id x4so1701203nfb
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 10:18:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=sKNJBVRnU9aMH/3IDcHEsQDxcnR+2K4/Vith04YZyF0iHymSoGXUhUn3dAcr9mjA3u/NfCMJHTrOoJlZ/sLRBHy+uxYgM32qXTJvn6wwunAIrYaXodbXqJzQ4ENcP9OiYqbyb2DzwnDG9pToMi/Zc2IdupECpyOumUJ12byOQKQ=
Received: by 10.49.43.17 with SMTP id v17mr3395362nfj;
        Mon, 05 Jun 2006 10:18:25 -0700 (PDT)
Received: from ?192.168.1.27? ( [202.147.188.55])
        by mx.gmail.com with ESMTP id a23sm3377312nfc.2006.06.05.10.18.24;
        Mon, 05 Jun 2006 10:18:25 -0700 (PDT)
Message-ID: <44846754.8020007@gmail.com>
Date: Mon, 05 Jun 2006 22:18:12 +0500
From: Adam Saeed <mails.adam@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: lucene with mysql integration
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can some body help me to integrate without coding all the stuff ; lucene 
with mysql.
is there any startup document for a Newbie Java person for lucene with 
mysql?

Thanks
Adam

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:21:05 2006
Return-Path: <java-user-return-21106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31465 invoked from network); 5 Jun 2006 17:21:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:21:05 -0000
Received: (qmail 23303 invoked by uid 500); 5 Jun 2006 17:21:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23276 invoked by uid 500); 5 Jun 2006 17:20:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23265 invoked by uid 99); 5 Jun 2006 17:20:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:20:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:20:58 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 44840D270001661E for java-user@lucene.apache.org; Mon, 5 Jun 2006 19:20:36 +0200
Subject: Re: query parser field name aliases
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <10BAFAB9-5164-4420-B057-92C5FDB96BE3@ehatchersolutions.com>
References: <1149458259.4892.66.camel@localhost>
	 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
	 <448380E5.3040000@nuix.com.au> <1149520055.4892.120.camel@localhost>
	 <10BAFAB9-5164-4420-B057-92C5FDB96BE3@ehatchersolutions.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 05 Jun 2006 19:20:31 +0200
Message-Id: <1149528031.4892.135.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-06-05 at 12:58 -0400, Erik Hatcher wrote:
> 
> Huh?   Could you elaborate on what won't work about subclassing? 

I would for instance have to add the same chunk of code to my
QueryParser- and my MultiFieldQueryParser-subclass.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:30:14 2006
Return-Path: <java-user-return-21107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35977 invoked from network); 5 Jun 2006 17:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:30:13 -0000
Received: (qmail 39849 invoked by uid 500); 5 Jun 2006 17:30:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39825 invoked by uid 500); 5 Jun 2006 17:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39813 invoked by uid 99); 5 Jun 2006 17:30:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:30:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:30:06 -0700
Received: (qmail 10541 invoked from network); 5 Jun 2006 17:29:42 -0000
Received: from unknown (HELO p5496db5d.dip.t-dialin.net) ([pbs]695637@[84.150.219.93])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 5 Jun 2006 17:29:42 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: lucene-web demo is not working?
Date: Mon, 5 Jun 2006 19:29:49 +0200
User-Agent: KMail/1.8.2
References: <44846708.9000205@gmail.com>
In-Reply-To: <44846708.9000205@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606051929.49198@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Montag 05 Juni 2006 19:16, Adam Saeed wrote:

> Generated servlet error:
> The method parse(String) in the type QueryParser is not applicable for
> the arguments (String, String, Analyzer)

There's a bug in that file. You can download the fixed version here:

http://svn.apache.org/viewvc/lucene/java/trunk/src/jsp/results.jsp?revision=410678

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:32:19 2006
Return-Path: <java-user-return-21108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36954 invoked from network); 5 Jun 2006 17:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:32:19 -0000
Received: (qmail 47386 invoked by uid 500); 5 Jun 2006 17:32:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47359 invoked by uid 500); 5 Jun 2006 17:32:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47348 invoked by uid 99); 5 Jun 2006 17:32:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:32:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:32:10 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 7FE85187B3; Mon,  5 Jun 2006 17:31:48 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 07251187B1
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 17:31:46 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Mon, 5 Jun 2006 18:31:48 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <20060605165810.15193.qmail@web50311.mail.yahoo.com>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00A5_01C688CE.4E22C5A0"
Thread-Index: AcaIwUobVn9shK+gRUazbb9fbgjHrQAAWyxQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060605173146.07251187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00A5_01C688CE.4E22C5A0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Thanks for the advice, Otis. It makes sense that they are not to be trusted
after the brutality of SIGKILL (the untrappable signal). Alas, SIGTERM
wasn't breaking out of my hang. I'll see what's snagging it in my
ShutdownHooks, because I need to be able to handle hangs one way or another,
because there are so many content handlers in the project now and
regenerating indexes isn't much fun.

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: 05 June 2006 17:58
To: java-user@lucene.apache.org
Subject: Re: Compound / non-compound index files and SIGKILL

Rob,
My guess is that those are orphans that you cannot save and add to your
index.  Who knows what state things are in if you killed the JVM.  I think
you could try editing your segments file and manually adding all segments to
it (e.g. _15djq from your example), and then try optimizing the index, but
if I had to bet, I'd bet this would just blow up in your face during
optimization.  The solution is to figure out why things hang and fix the
culprit.

Another possibility might be to add ShutdownHooks to your application and
try to stop indexing gracefully.  However, with SIGKILL I'm afraid shutdown
hooks don't get to run (double-check that, I'm not certain).

Otis

----- Original Message ----
From: Rob Staveley (Tom) <rstaveley@seseit.com>
To: java-user@lucene.apache.org
Sent: Monday, June 5, 2006 6:17:11 AM
Subject: Compound / non-compound index files and SIGKILL

I've been indexing live data into a compound index from an MTA. I'm
resolving a bunch of problems unrelated to Lucene (disparate hangs in my
content handlers). When I get a hang, I typically need to kill my daemon,
alas more often than not using kill -9 (SIGKILL).

However, these SIGKILLs are leaving large temporary(?) files, which I guess
are non-compound index files transiently extracted from the working .cfs
files:

-rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
-rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
-rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm

-rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
-rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
-rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm

They are left intact after restarting my daemon. Presumably they are not
treated as being part of the compound index. I see no corresponding .cfs
file for them. 

As a consequence of these - I suspect - I am getting a very large overall
disk requirement for my index, presumably because of replicated field data.
My guess is that the field data in the orphaned .fdt files needs to be
regenerated.

In another index directory from a previous test run (again with SIGKILLs), I
have 98 GB of index files, with only 12 BG devoted to compound files for the
field index (.cfs). The rest of the disk space is used by orphaned
uncompounded index files; I see 51 GB devoted to uncompounded field data
(.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted to term
frequencies (.frq).

Here's my question:

How can I attempt to merge these orphaned into the compound index, using
IndexWriter.addIndexes(), or would I be foolish attempting this?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_00A5_01C688CE.4E22C5A0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNTE3
MzE0OFowIwYJKoZIhvcNAQkEMRYEFNaN0myApGzgKb0HABi68uPp0+AzMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAIsAbq4fgzmfJlNNhXRteFfzX1VeHSNY4kx9
g7OU3bg2dN2bmRvjHswBksdky1bIiY++VIPwdsnQbTxTwooHAcsDFAlQwnR6b+V67pd7K8d2Bege
FEcvZAYjD1HTDNlLPMaUc5h9NCM9wIt+8YOJz2YMyNMi8/jVcLlV4B5tVEb92szVFV75PFcRIvlr
KsAiNDOqEONW94MeIZWAT7vMa0lbg8u1DMEBvZzWSJYlTxiDszU6eyvZ3jE5vkovVSjFzyWRfLVJ
TjamQEfEvlM1eO0GICaUx5Shp7PYGWYodbmjcEmMQtV1fsopvC1cuniQfxf6VxNUhj6ws+UtYAJl
W5sAAAAAAAA=

------=_NextPart_000_00A5_01C688CE.4E22C5A0--


From java-user-return-21109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:33:18 2006
Return-Path: <java-user-return-21109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37134 invoked from network); 5 Jun 2006 17:33:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:33:18 -0000
Received: (qmail 49256 invoked by uid 500); 5 Jun 2006 17:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48995 invoked by uid 500); 5 Jun 2006 17:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48978 invoked by uid 99); 5 Jun 2006 17:33:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:33:12 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO mail.spline-software.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:33:09 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id B6BAC1ADB69; Mon,  5 Jun 2006 20:32:46 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 7855312A476
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 20:32:45 +0300 (EEST)
Message-ID: <44846ABD.6040904@i-hypergrid.com>
Date: Mon, 05 Jun 2006 20:32:45 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Compound / non-compound index files and SIGKILL
References: <20060605101724.2589D187B1@mail.seseit.com>
In-Reply-To: <20060605101724.2589D187B1@mail.seseit.com>
Content-Type: multipart/alternative;
 boundary="------------070404050501050307060508"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.6 required=5.0 tests=ALL_TRUSTED,BAYES_00,
	HTML_10_20,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------070404050501050307060508
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi.
My five cents :)

It might be helpful to know how lucene is working with compound files. 
When segment is flushed to disk it is written uncompound and after that 
is merged into single .cfs file. If you don't change default setting for 
using compound files (which is on) this is only place (I guess) for 
these files to appear.

If you're working with large indexes, than merging segments can take a 
while (Maybe here is your problem? :) ) (merging happens on 
addDocument() call).  If you will kill indexing process during such 
merge you'll get many orphaned files...

You can just run optimize on this index. You'll get three files: 
segments, deletable, <segment>.cfs; you can look name of segment in 
'segments' file. Everything else is 'garbage' - you can delete it.


Rob Staveley (Tom) wrote:
> I've been indexing live data into a compound index from an MTA. I'm
> resolving a bunch of problems unrelated to Lucene (disparate hangs in my
> content handlers). When I get a hang, I typically need to kill my daemon,
> alas more often than not using kill -9 (SIGKILL).
>
> However, these SIGKILLs are leaving large temporary(?) files, which I guess
> are non-compound index files transiently extracted from the working .cfs
> files:
>
> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
>
> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
>
> They are left intact after restarting my daemon. Presumably they are not
> treated as being part of the compound index. I see no corresponding .cfs
> file for them. 
>
> As a consequence of these - I suspect - I am getting a very large overall
> disk requirement for my index, presumably because of replicated field data.
> My guess is that the field data in the orphaned .fdt files needs to be
> regenerated.
>
> In another index directory from a previous test run (again with SIGKILLs), I
> have 98 GB of index files, with only 12 BG devoted to compound files for the
> field index (.cfs). The rest of the disk space is used by orphaned
> uncompounded index files; I see 51 GB devoted to uncompounded field data
> (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted to term
> frequencies (.frq).
>
> Here's my question:
>
> How can I attempt to merge these orphaned into the compound index, using
> IndexWriter.addIndexes(), or would I be foolish attempting this?
>   

-- 
regards,
Volodymyr Bychkoviak


--------------070404050501050307060508--

From java-user-return-21110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:36:32 2006
Return-Path: <java-user-return-21110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37754 invoked from network); 5 Jun 2006 17:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:36:32 -0000
Received: (qmail 52674 invoked by uid 500); 5 Jun 2006 17:36:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52649 invoked by uid 500); 5 Jun 2006 17:36:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52637 invoked by uid 99); 5 Jun 2006 17:36:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:36:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO nz-out-0102.google.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:36:24 -0700
Received: by nz-out-0102.google.com with SMTP id 13so1005247nzp
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 10:36:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=EBHkwo6VXCip3U+vX0g+aAU8N+1JNbOjsQEzro1y88ASgel1UFSMjcfsbhYRKGK7sn0GZcr5lCCr+qFC7/EUmvaDrO0eunAjGJxjbCci7VTKrFqDIH/3Qps/ZaxyDE0q5dt77Mly87uR0X2xbC5EMPHPKVPXir/X9A9LCCOua70=
Received: by 10.36.104.15 with SMTP id b15mr5071646nzc;
        Mon, 05 Jun 2006 10:36:04 -0700 (PDT)
Received: by 10.37.22.24 with HTTP; Mon, 5 Jun 2006 10:36:04 -0700 (PDT)
Message-ID: <6e3ae6310606051036i40a1fbb5k530d68b55afd4404@mail.gmail.com>
Date: Mon, 5 Jun 2006 10:36:04 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene with mysql integration
In-Reply-To: <44846754.8020007@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44846754.8020007@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Basically you select all your data and use Lucene's simple API to
create a Document object. But this is just creating index part. To
parse the user-input query and maintain content~lucene index
synchronization needs some effort.

You can try DBSight. It can setup a database search maybe 15 minutes.
if you know how to use it. Check out the step by step demo example
first.

Chris
------------------------------------
Lucene Search on Any Databases/Applications
http://www.dbsight.net

On 6/5/06, Adam Saeed <mails.adam@gmail.com> wrote:
> Can some body help me to integrate without coding all the stuff ; lucene
> with mysql.
> is there any startup document for a Newbie Java person for lucene with
> mysql?
>
> Thanks
> Adam
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:41:52 2006
Return-Path: <java-user-return-21111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41624 invoked from network); 5 Jun 2006 17:41:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:41:52 -0000
Received: (qmail 65660 invoked by uid 500); 5 Jun 2006 17:41:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65612 invoked by uid 500); 5 Jun 2006 17:41:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65579 invoked by uid 99); 5 Jun 2006 17:41:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:41:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:41:44 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A720A5B771; Mon,  5 Jun 2006 10:41:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9C55A7F403
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 10:41:16 -0700 (PDT)
Date: Mon, 5 Jun 2006 10:41:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: query parser field name aliases
In-Reply-To: <1149520055.4892.120.camel@localhost>
Message-ID: <Pine.LNX.4.58.0606051036560.15791@hal.rescomp.berkeley.edu>
References: <1149458259.4892.66.camel@localhost> 
 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com> 
 <448380E5.3040000@nuix.com.au> <1149520055.4892.120.camel@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: There is a problem with this. Java does not allow multiple inheritance
: and there are other subclasses of QueryParser. Perhaps I can fix it with
: a decorator instead.

you might be able to go with a Delegator/Wrapper .. subclass QueryParser
to inherit the grammer, override all of the normal methods you override in
a subclass to include your field aliasing, but instead of defering to
super defer to another instance of QueryParser specified at runtime.

I haven't thought through all the implications of wether it will work that
easily though .. there's a lot more intra-class "this.foo()" calls in
Queryparser then in something like Similarity that may make the Delegator
approach problamatic.

Honestly: QueryParser is such a mess, you may just want to roll your own
from scratch.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 17:45:59 2006
Return-Path: <java-user-return-21112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44103 invoked from network); 5 Jun 2006 17:45:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 17:45:59 -0000
Received: (qmail 77203 invoked by uid 500); 5 Jun 2006 17:45:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77019 invoked by uid 500); 5 Jun 2006 17:45:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77008 invoked by uid 99); 5 Jun 2006 17:45:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:45:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 10:45:52 -0700
Received: by py-out-1112.google.com with SMTP id c30so1363340pyc
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 10:45:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ELgwEKWssXJWrkQCBTffn/40bD5z+JiItA8ralEoMAU6ACxv7ykVipHJ4nPMxkVXRAInImUaw6J+T3tKhGeP6C6NGpHFyHlU1+AwWD4QVUi3SKQ2Dq9Cy6II+WzyWRBaPHZbcXMVi5VJffhDyUvqy92tUXq9shXqvaVIg5a/7sI=
Received: by 10.35.100.6 with SMTP id c6mr6844528pym;
        Mon, 05 Jun 2006 10:45:31 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Mon, 5 Jun 2006 10:45:31 -0700 (PDT)
Message-ID: <c68e39170606051045p49a94150ga7418937e5cabd57@mail.gmail.com>
Date: Mon, 5 Jun 2006 13:45:31 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query parser field name aliases
In-Reply-To: <1149528031.4892.135.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1149458259.4892.66.camel@localhost>
	 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
	 <448380E5.3040000@nuix.com.au> <1149520055.4892.120.camel@localhost>
	 <10BAFAB9-5164-4420-B057-92C5FDB96BE3@ehatchersolutions.com>
	 <1149528031.4892.135.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Karl, taking this in context with your other threads, it seems like
you are tring to insert extra functionality at many different points
in lucene.  Would some type of AOP work for you?

-Yonik

On 6/5/06, karl wettin <kalle@snigel.net> wrote:
> On Mon, 2006-06-05 at 12:58 -0400, Erik Hatcher wrote:
> I would for instance have to add the same chunk of code to my
> QueryParser- and my MultiFieldQueryParser-subclass.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 18:07:48 2006
Return-Path: <java-user-return-21113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56644 invoked from network); 5 Jun 2006 18:07:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 18:07:47 -0000
Received: (qmail 18419 invoked by uid 500); 5 Jun 2006 18:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18155 invoked by uid 500); 5 Jun 2006 18:07:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18144 invoked by uid 99); 5 Jun 2006 18:07:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:07:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mails.adam@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:07:39 -0700
Received: by nf-out-0910.google.com with SMTP id x4so1710761nfb
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 11:07:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Me0RGMOKR07DyYDOgB9yI47eBTrtV4URdcoNzhpY+bMxtdURh9fNPzOlpSnDfLLb58Ykbx3bnsqwR51iUrIIgcp83Mzheump9/MbGE3UXQrws6bijTtfn8xHnGFpeadPGLOJTyUXPOx1Up/dpULTAPT7WpqQ3EemO+ufr473Oww=
Received: by 10.48.14.19 with SMTP id 19mr3424450nfn;
        Mon, 05 Jun 2006 11:07:17 -0700 (PDT)
Received: from ?192.168.1.27? ( [202.143.127.193])
        by mx.gmail.com with ESMTP id z73sm5594760nfb.2006.06.05.11.07.16;
        Mon, 05 Jun 2006 11:07:17 -0700 (PDT)
Message-ID: <448472CA.2020402@gmail.com>
Date: Mon, 05 Jun 2006 23:07:06 +0500
From: Adam Saeed <mails.adam@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lucene-web demo is not working?
References: <44846708.9000205@gmail.com> <200606051929.49198@danielnaber.de>
In-Reply-To: <200606051929.49198@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, its running fine now.
Thanks again
Adam

Daniel Naber wrote:
> On Montag 05 Juni 2006 19:16, Adam Saeed wrote:
>
>   
>> Generated servlet error:
>> The method parse(String) in the type QueryParser is not applicable for
>> the arguments (String, String, Analyzer)
>>     
>
> There's a bug in that file. You can download the fixed version here:
>
> http://svn.apache.org/viewvc/lucene/java/trunk/src/jsp/results.jsp?revision=410678
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 18:25:38 2006
Return-Path: <java-user-return-21114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62248 invoked from network); 5 Jun 2006 18:25:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 18:25:37 -0000
Received: (qmail 47269 invoked by uid 500); 5 Jun 2006 18:25:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46743 invoked by uid 500); 5 Jun 2006 18:25:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46732 invoked by uid 99); 5 Jun 2006 18:25:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:25:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:25:30 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 44840D2700019A0B for java-user@lucene.apache.org; Mon, 5 Jun 2006 20:25:08 +0200
Subject: Re: query parser field name aliases
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0606051036560.15791@hal.rescomp.berkeley.edu>
References: <1149458259.4892.66.camel@localhost>
	 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
	 <448380E5.3040000@nuix.com.au> <1149520055.4892.120.camel@localhost>
	 <Pine.LNX.4.58.0606051036560.15791@hal.rescomp.berkeley.edu>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 05 Jun 2006 20:24:53 +0200
Message-Id: <1149531893.4892.168.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-06-05 at 10:41 -0700, Chris Hostetter wrote:
> 
> you might be able to go with a Delegator/Wrapper .. subclass
> QueryParser to inherit the grammer, override all of the normal methods
> you override in a subclass to include your field aliasing, but instead
> of defering to super defer to another instance of QueryParser
> specified at runtime.

A.k.a. decorator ;)

> 
> I haven't thought through all the implications of wether it will work
> that easily though .. there's a lot more intra-class "this.foo()"
> calls in Queryparser then in something like Similarity that may make
> the Delegator approach problamatic.

Indeed this is something I've noticed.

> Honestly: QueryParser is such a mess, you may just want to roll your
> own from scratch. 

I've considered an ANTlr parser as it could generate code for many ports
too, but as always there is too little time.

Probably I'll just end up hacking.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 18:40:47 2006
Return-Path: <java-user-return-21115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68135 invoked from network); 5 Jun 2006 18:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 18:40:47 -0000
Received: (qmail 79715 invoked by uid 500); 5 Jun 2006 18:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79691 invoked by uid 500); 5 Jun 2006 18:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79680 invoked by uid 99); 5 Jun 2006 18:40:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:40:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:40:38 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn1.fre.skanova.net (7.2.072.1)
        id 44840AFD0001B2AF for java-user@lucene.apache.org; Mon, 5 Jun 2006 20:40:15 +0200
Subject: Re: query parser field name aliases
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170606051045p49a94150ga7418937e5cabd57@mail.gmail.com>
References: <1149458259.4892.66.camel@localhost>
	 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
	 <448380E5.3040000@nuix.com.au> <1149520055.4892.120.camel@localhost>
	 <10BAFAB9-5164-4420-B057-92C5FDB96BE3@ehatchersolutions.com>
	 <1149528031.4892.135.camel@localhost>
	 <c68e39170606051045p49a94150ga7418937e5cabd57@mail.gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 05 Jun 2006 20:40:10 +0200
Message-Id: <1149532810.4892.177.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-06-05 at 13:45 -0400, Yonik Seeley wrote:
> Karl, taking this in context with your other threads, it seems like
> you are tring to insert extra functionality at many different points
> in lucene.  Would some type of AOP work for you?

I'm not sure I know what you mean. Try to decouple the project?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 18:46:13 2006
Return-Path: <java-user-return-21116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70026 invoked from network); 5 Jun 2006 18:46:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 18:46:12 -0000
Received: (qmail 87314 invoked by uid 500); 5 Jun 2006 18:46:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86867 invoked by uid 500); 5 Jun 2006 18:46:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86856 invoked by uid 99); 5 Jun 2006 18:46:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:46:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 11:46:06 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 78A0E5B773; Mon,  5 Jun 2006 11:45:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 699207F403
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 11:45:43 -0700 (PDT)
Date: Mon, 5 Jun 2006 11:45:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: query parser field name aliases
In-Reply-To: <1149531893.4892.168.camel@localhost>
Message-ID: <Pine.LNX.4.58.0606051141240.21328@hal.rescomp.berkeley.edu>
References: <1149458259.4892.66.camel@localhost> 
 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com> 
 <448380E5.3040000@nuix.com.au> <1149520055.4892.120.camel@localhost> 
 <Pine.LNX.4.58.0606051036560.15791@hal.rescomp.berkeley.edu>
 <1149531893.4892.168.camel@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > you might be able to go with a Delegator/Wrapper .. subclass
: > QueryParser to inherit the grammer, override all of the normal methods
: > you override in a subclass to include your field aliasing, but instead
: > of defering to super defer to another instance of QueryParser
: > specified at runtime.
:
: A.k.a. decorator ;)

Oh .. sorry yeah, i'm not very good with remembering names of Patterns, i
thought "Wrapper" was an official pattern name, and when you siad
"Decorator" i was thinking of something else ... i'm not sure what exactly
i thought you were talking about, but that wasn't it.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 19:07:08 2006
Return-Path: <java-user-return-21117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81080 invoked from network); 5 Jun 2006 19:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 19:07:08 -0000
Received: (qmail 21290 invoked by uid 500); 5 Jun 2006 19:07:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20847 invoked by uid 500); 5 Jun 2006 19:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20835 invoked by uid 99); 5 Jun 2006 19:07:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 12:07:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 12:06:59 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id ECA11187B3; Mon,  5 Jun 2006 19:06:37 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 59E0F187B1
	for <java-user@lucene.apache.org>; Mon,  5 Jun 2006 19:06:36 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Mon, 5 Jun 2006 20:06:35 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <44846ABD.6040904@i-hypergrid.com>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00B8_01C688DB.8BA353B0"
Thread-Index: AcaIxiAYx1RrAfBTTIaASlKVtKUMMAAB14JA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060605190636.59E0F187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00B8_01C688DB.8BA353B0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

This is a real eye-opener, Volodymyr. Many thanks. I guess that means that
my orphan-producing hangs must be addDocument() calls, and not in the
content handlers, as I'd previously assumed. I'll put some debug before and
after my addDocument() calls to confirm (and point my writer's infoStream to
System.out).

-----Original Message-----
From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com] 
Sent: 05 June 2006 18:33
To: java-user@lucene.apache.org
Subject: Re: Compound / non-compound index files and SIGKILL

Hi.
My five cents :)

It might be helpful to know how lucene is working with compound files. 
When segment is flushed to disk it is written uncompound and after that is
merged into single .cfs file. If you don't change default setting for using
compound files (which is on) this is only place (I guess) for these files to
appear.

If you're working with large indexes, than merging segments can take a while
(Maybe here is your problem? :) ) (merging happens on
addDocument() call).  If you will kill indexing process during such merge
you'll get many orphaned files...

You can just run optimize on this index. You'll get three files: 
segments, deletable, <segment>.cfs; you can look name of segment in
'segments' file. Everything else is 'garbage' - you can delete it.


Rob Staveley (Tom) wrote:
> I've been indexing live data into a compound index from an MTA. I'm
> resolving a bunch of problems unrelated to Lucene (disparate hangs in my
> content handlers). When I get a hang, I typically need to kill my daemon,
> alas more often than not using kill -9 (SIGKILL).
>
> However, these SIGKILLs are leaving large temporary(?) files, which I
guess
> are non-compound index files transiently extracted from the working .cfs
> files:
>
> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
>
> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
>
> They are left intact after restarting my daemon. Presumably they are not
> treated as being part of the compound index. I see no corresponding .cfs
> file for them. 
>
> As a consequence of these - I suspect - I am getting a very large overall
> disk requirement for my index, presumably because of replicated field
data.
> My guess is that the field data in the orphaned .fdt files needs to be
> regenerated.
>
> In another index directory from a previous test run (again with SIGKILLs),
I
> have 98 GB of index files, with only 12 BG devoted to compound files for
the
> field index (.cfs). The rest of the disk space is used by orphaned
> uncompounded index files; I see 51 GB devoted to uncompounded field data
> (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted to term
> frequencies (.frq).
>
> Here's my question:
>
> How can I attempt to merge these orphaned into the compound index, using
> IndexWriter.addIndexes(), or would I be foolish attempting this?
>   

-- 
regards,
Volodymyr Bychkoviak


------=_NextPart_000_00B8_01C688DB.8BA353B0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNTE5
MDYzNFowIwYJKoZIhvcNAQkEMRYEFOQvftBmKCs2tfZYgburiDtozV+2MGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAG30TTthRWBZDDms7d6wdkXzFdzZZGR3+BoQ
Z8LBqEtqKTVqn9Hil1cMpDapCpHg/QXT3JbK2hd7s63Qq/xW9ludnKt4lY/lphLif3yRIFyBJ4GO
lf9utni5nrR4yC8tWh/oiviuiTzBzAwTzlPrxwr4uW2ZiX3htQbMQb8Eh/JLsHq8pj3PFMTpiP5o
aKUv7i0BtYFPxHDUC5hfdEDtcPhBqOKHp9D7k4ruMiyce/Sfki+SOsDVJLJNyS54tQvIuG8hTNB/
NtP0Lc8kainBlZQZucVVYeBfwRvSOVtjjauAxUUeuFh1hUp7WzVzcF5tEFvGsDAmkLnXduIHiwuN
86YAAAAAAAA=

------=_NextPart_000_00B8_01C688DB.8BA353B0--


From java-user-return-21118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 19:49:41 2006
Return-Path: <java-user-return-21118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8862 invoked from network); 5 Jun 2006 19:49:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 19:49:41 -0000
Received: (qmail 5647 invoked by uid 500); 5 Jun 2006 19:49:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5489 invoked by uid 500); 5 Jun 2006 19:49:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5326 invoked by uid 99); 5 Jun 2006 19:49:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 12:49:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vsood2@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 12:49:30 -0700
Received: by nz-out-0102.google.com with SMTP id 13so1033504nzp
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 12:49:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ixf//qLsKDBEB/mci4d78DRQkjyeqtW7G0T2NCQW4tyN8B7JAhr0vQ9Gg99gf75ZfR7UfXbsnQiWgn54b5cBfdOjNiqaCqT+GBYjxTvyZGxA0jEJGqz2ik3ssLmZ3hELj5ahwqL/5Ru1Ny/usc31zuMhbfeJV0lIz9SgyKzxJWY=
Received: by 10.36.227.60 with SMTP id z60mr6882212nzg;
        Mon, 05 Jun 2006 12:49:07 -0700 (PDT)
Received: by 10.36.221.72 with HTTP; Mon, 5 Jun 2006 12:49:07 -0700 (PDT)
Message-ID: <800d6e9c0606051249o64a1f85em21f9cd47d2d47eaa@mail.gmail.com>
Date: Mon, 5 Jun 2006 15:49:07 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: duplicate results MultiFieldQueryParser
In-Reply-To: <359a92830606050822t12c3ef4fj46e2c549774a34af@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4671_11303564.1149536947133"
References: <800d6e9c0606050814m549c2638k18676a4243bed7e4@mail.gmail.com>
	 <359a92830606050822t12c3ef4fj46e2c549774a34af@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4671_11303564.1149536947133
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 6/5/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> A few thoughts...
>
> 1> are you sure you only indexed the document once? If you indexed the
> same
> data multiple times, you'll have duplicate documents, each of which will
> have a different Lucene ID (i.e. doc()).


Yes.. but I will make sure again.


2> have you examined your index with, say, Luke? I've found that a wonderful
> tool for seeing if the data I *thought* was in my index was actually
> there.



Database is too huge.. I will need some time to go through it to look if I
did any mistake while creating indexes..

3> when you say "the same document", how do you know that? The internal
> Lucene ID or some field you've put in the index? This really as another
> form
> of "are you sure you indexed the data once?" because the internal Lucene
> id
> is what you get back from hits.doc(). If you're getting multiple entries
> like that, then I'm lost.



Same document means.. same path of the document say .. same URL miltiple
times.. well its a good point.. I will check if they all have same docIDs..

thanks for your suggestion.

------=_Part_4671_11303564.1149536947133--

From java-user-return-21119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 22:46:08 2006
Return-Path: <java-user-return-21119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76924 invoked from network); 5 Jun 2006 22:46:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 22:46:08 -0000
Received: (qmail 30973 invoked by uid 500); 5 Jun 2006 22:46:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30937 invoked by uid 500); 5 Jun 2006 22:46:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30926 invoked by uid 99); 5 Jun 2006 22:46:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 15:46:02 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 15:46:02 -0700
Received: by py-out-1112.google.com with SMTP id c30so1439258pyc
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 15:45:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qemtS4oWwMqTfLK4XcyjTFypJMwYYK+f7if4l3UK8UpwQ43pVsTEQt5B1GhPthsxyxVqpCqRLOeJLnwE2SpL/LtCm6F4LS4eUcjB1djbxxB5j+hQGpPvX+jHXwQVTEK2MWvI7chovTU6d2R9PVBdSzokfYPsojDOohCIG8rsifE=
Received: by 10.35.111.7 with SMTP id o7mr7223769pym;
        Mon, 05 Jun 2006 15:45:41 -0700 (PDT)
Received: by 10.35.17.5 with HTTP; Mon, 5 Jun 2006 15:45:40 -0700 (PDT)
Message-ID: <359a92830606051545q68f7587ekecfa2c5023c81701@mail.gmail.com>
Date: Mon, 5 Jun 2006 18:45:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: duplicate results MultiFieldQueryParser
In-Reply-To: <800d6e9c0606051249o64a1f85em21f9cd47d2d47eaa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8087_8849537.1149547540870"
References: <800d6e9c0606050814m549c2638k18676a4243bed7e4@mail.gmail.com>
	 <359a92830606050822t12c3ef4fj46e2c549774a34af@mail.gmail.com>
	 <800d6e9c0606051249o64a1f85em21f9cd47d2d47eaa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8087_8849537.1149547540870
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Even if the index is huge, you should be able to open it in Luke and submit
a search just like the one that's giving you trouble, and then examine the
documents. Yes, it'll take a while to open the index, but not an outrageous
amount of time... unless you run out of memory or something.

Best
Erick

------=_Part_8087_8849537.1149547540870--

From java-user-return-21120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 05 23:45:44 2006
Return-Path: <java-user-return-21120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9959 invoked from network); 5 Jun 2006 23:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2006 23:45:44 -0000
Received: (qmail 33585 invoked by uid 500); 5 Jun 2006 23:45:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33110 invoked by uid 500); 5 Jun 2006 23:45:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33099 invoked by uid 99); 5 Jun 2006 23:45:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:45:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 16:45:36 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn1.fre.skanova.net (7.2.072.1)
        id 44840AFD00028554 for java-user@lucene.apache.org; Tue, 6 Jun 2006 01:45:14 +0200
Subject: Re: query parser field name aliases
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0606051141240.21328@hal.rescomp.berkeley.edu>
References: <1149458259.4892.66.camel@localhost>
	 <EB25CCC0-EDEF-4394-A7B9-D6184F88A9A4@ehatchersolutions.com>
	 <448380E5.3040000@nuix.com.au> <1149520055.4892.120.camel@localhost>
	 <Pine.LNX.4.58.0606051036560.15791@hal.rescomp.berkeley.edu>
	 <1149531893.4892.168.camel@localhost>
	 <Pine.LNX.4.58.0606051141240.21328@hal.rescomp.berkeley.edu>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 06 Jun 2006 01:45:08 +0200
Message-Id: <1149551108.4892.239.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-06-05 at 11:45 -0700, Chris Hostetter wrote:
> thought "Wrapper" was an official pattern name

It is.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 00:00:52 2006
Return-Path: <java-user-return-21121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15951 invoked from network); 6 Jun 2006 00:00:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 00:00:52 -0000
Received: (qmail 50225 invoked by uid 500); 6 Jun 2006 00:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49570 invoked by uid 500); 6 Jun 2006 00:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49558 invoked by uid 99); 6 Jun 2006 00:00:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 17:00:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 17:00:45 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id E03A0B762E
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 10:00:10 +1000 (EST)
Message-ID: <4484C6DC.9020009@nuix.com.au>
Date: Tue, 06 Jun 2006 10:05:48 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MMapDirectory vs RAMDirectory
References: <429c032d0605280109i7f0c8392x6d0017a5f6b70aac@mail.gmail.com>	 <20060528082805.97131.qmail@web25915.mail.ukl.yahoo.com> <e994873a0606050654u5a65c8cdq84aea688e741ca2@mail.gmail.com>
In-Reply-To: <e994873a0606050654u5a65c8cdq84aea688e741ca2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter Keegan wrote:

> There is no 'unmap' method, so my understanding is that the file mapping is
> valid until the underlying buffer is garbage-collected. However, forcing 
> the gc doesn't help.

You're half right.

The file mapping is indeed valid until the underlying buffer is garbage 
collected, but you can't "force" the GC -- there is no API which does that.

Note the wording in the Javadoc for System.gc():

   "Calling the gc method **suggests** that the Java Virtual Machine
    expend effort toward recycling unused objects in order to make the
    memory they currently occupy available for quick reuse. When control
    returns from the method call, the Java Virtual Machine has made a
    best effort to reclaim space from all discarded objects."

> The file deletes don't fail on Linux, but I'm wondering if there is still a
> memory leak?

Linux allows you to delete a file while someone has the file descriptor 
open, but the file descriptor will remain valid (i.e. the delete doesn't 
actually occur) until everyone releases the file descriptor.

I ran into similar issues as these when working on other things, and 
eventually ended up switching to using a RandomAccessFile, as those can 
be closed.  Otherwise you're right -- the workaround is to routinely try 
to delete the file.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 04:28:26 2006
Return-Path: <java-user-return-21122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94699 invoked from network); 6 Jun 2006 04:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 04:28:25 -0000
Received: (qmail 23821 invoked by uid 500); 6 Jun 2006 04:28:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23784 invoked by uid 500); 6 Jun 2006 04:28:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23773 invoked by uid 99); 6 Jun 2006 04:28:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 21:28:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rajiv.roopan@gmail.com designates 66.249.82.198 as permitted sender)
Received: from [66.249.82.198] (HELO wx-out-0102.google.com) (66.249.82.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 21:28:17 -0700
Received: by wx-out-0102.google.com with SMTP id s16so788942wxc
        for <java-user@lucene.apache.org>; Mon, 05 Jun 2006 21:27:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=sYOWxg0eS0IF3kFBRovIzFLfJjzLzSZnG+Clg8rCIA/+1/16+XTvAzXep4TRoLtLxC1ObQRnOc1EyY4iLr9Mc3o/HJp5weveKZm+3AQrw4aw6o2mrH0iO3cY4gOqCPLRcm2zMO2JU6nDJBprXIup/n55ACt5WDZweH/u3nty1d4=
Received: by 10.70.8.2 with SMTP id 2mr3843878wxh;
        Mon, 05 Jun 2006 21:27:56 -0700 (PDT)
Received: by 10.70.12.12 with HTTP; Mon, 5 Jun 2006 21:27:53 -0700 (PDT)
Message-ID: <5a8b64620606052127o53bb2d78gcab60be7260ef968@mail.gmail.com>
Date: Tue, 6 Jun 2006 00:27:53 -0400
From: "Rajiv Roopan" <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Subject: spring & lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
 I'm using the spring framework to define my indexsearcher and
indexwriter.   They are defined as persistent singletons in the
application.

I'm quite new to lucene and I realize that after updating an index
using IndexWriter you nead to re-create an instance of IndexSearcher
to search that newly updated index. I was wondering if anyone knew,
using spring, how to reload the IndexSearcher bean?

Thanks!
rajiv

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 05:41:26 2006
Return-Path: <java-user-return-21123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18270 invoked from network); 6 Jun 2006 05:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 05:41:26 -0000
Received: (qmail 24793 invoked by uid 500); 6 Jun 2006 05:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24756 invoked by uid 500); 6 Jun 2006 05:41:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24745 invoked by uid 99); 6 Jun 2006 05:41:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 22:41:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jun 2006 22:41:19 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FnUJG-0004Yj-SR
	for java-user@lucene.apache.org; Mon, 05 Jun 2006 22:40:58 -0700
Message-ID: <4727704.post@talk.nabble.com>
Date: Mon, 5 Jun 2006 22:40:58 -0700 (PDT)
From: muraalee <muraalee@gmail.com>
To: java-user@lucene.apache.org
Subject: Browse Functionality
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3672_24365145.1149572458877"
X-Nabble-Sender: muraalee@gmail.com
X-Nabble-From: muraalee <muraalee@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3672_24365145.1149572458877
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi ,
I am looking at exposing a "Browse" like functionality using lucene. Assume
this scenario, a user Browses a Field ( Untokenized one like Book Title )
and he sees a list of "terms" [Book titles ] and their associated doc Hits (
Number of articles / documents this term appears in ). I believe this can be
done bit straightforward. 



Here is the twist.  Since all the users don't have access to all the Books,
basically i want to bind the "terms" by a Filter which ensures that they see
only the "terms" that belongs to their subscribed "books".  For search, i
have modelled the above functionality using "QueryFilter", where i "OR" the
query, with the list of Books.


Is there an elegant way to attack this one ? Appreciate your inputs.

thanks
~Murali


--
View this message in context: http://www.nabble.com/Browse-Functionality-t1739829.html#a4727704
Sent from the Lucene - Java Users forum at Nabble.com.

------=_Part_3672_24365145.1149572458877--


From java-user-return-21124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 07:46:57 2006
Return-Path: <java-user-return-21124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56980 invoked from network); 6 Jun 2006 07:46:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 07:46:56 -0000
Received: (qmail 58270 invoked by uid 500); 6 Jun 2006 07:46:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58230 invoked by uid 500); 6 Jun 2006 07:46:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58215 invoked by uid 99); 6 Jun 2006 07:46:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 00:46:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.160.235.108] (HELO mh4.cvf.fr) (62.160.235.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 00:46:49 -0700
Received: from [10.175.254.140] (helo=ms.int75.cvf)
	by mh4.cvf.fr with esmtp 
	for <java-user@lucene.apache.org>id 1FnWGg-0001BU-00; Tue, 06 Jun 2006 09:46:26 +0200
Received: from [127.0.0.1] (helo=cm.localhost)
	by ms.int75.cvf with esmtp id 1FnWGg-0006J0-00
	for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 09:46:26 +0200
Subject: Re: spring & lucene
From: Sami Dalouche <skoobi@free.fr>
To: java-user@lucene.apache.org
In-Reply-To: <5a8b64620606052127o53bb2d78gcab60be7260ef968@mail.gmail.com>
References: <5a8b64620606052127o53bb2d78gcab60be7260ef968@mail.gmail.com>
Content-Type: text/plain
Date: Tue, 06 Jun 2006 09:46:12 +0200
Message-Id: <1149579972.14222.0.camel@sdalouche1>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-complaints-to: abuse@cvf.fr
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

when working with Spring, the best is to use Compass : 
http://www.opensymphony.com/compass/ (if you can).

Regards,
Sami Dalouche

On Tue, 2006-06-06 at 00:27 -0400, Rajiv Roopan wrote:
> Hello,
>  I'm using the spring framework to define my indexsearcher and
> indexwriter.   They are defined as persistent singletons in the
> application.
> 
> I'm quite new to lucene and I realize that after updating an index
> using IndexWriter you nead to re-create an instance of IndexSearcher
> to search that newly updated index. I was wondering if anyone knew,
> using spring, how to reload the IndexSearcher bean?
> 
> Thanks!
> rajiv
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 08:02:17 2006
Return-Path: <java-user-return-21125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62060 invoked from network); 6 Jun 2006 08:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 08:02:16 -0000
Received: (qmail 80251 invoked by uid 500); 6 Jun 2006 08:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80227 invoked by uid 500); 6 Jun 2006 08:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80215 invoked by uid 99); 6 Jun 2006 08:02:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 01:02:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 01:02:09 -0700
Content-class: urn:content-classes:message
Subject: RE: spring & lucene
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 6 Jun 2006 09:01:47 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE790761@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: spring & lucene
Thread-Index: AcaJIaW8gyX3KzksSEafb8g1wOK2ewAHS2Dg
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We wrote ours for NetSearch to handle this specific issue. I suggest you
create a holder class to hold the IndexReader and IndexSearcher, this
can close them in the finalizer. Clients keep the holder until they are
finished and then discard it. When it is completely de-referenced it
will be closed. We also remove old indexes this way as well. Create a
factory class for the holder that knows when an index is being updated,
and creates new holders, when the index is not being updated it returns
the same one each time.

Mike

www.ardentia.com the home of NetSearch

-----Original Message-----
From: Rajiv Roopan [mailto:rajiv.roopan@gmail.com]=20
Sent: 06 June 2006 05:28
To: java-user@lucene.apache.org
Subject: spring & lucene

Hello,
 I'm using the spring framework to define my indexsearcher and
indexwriter.   They are defined as persistent singletons in the
application.

I'm quite new to lucene and I realize that after updating an index
using IndexWriter you nead to re-create an instance of IndexSearcher
to search that newly updated index. I was wondering if anyone knew,
using spring, how to reload the IndexSearcher bean?

Thanks!
rajiv

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:09:04 2006
Return-Path: <java-user-return-21126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80464 invoked from network); 6 Jun 2006 09:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:09:04 -0000
Received: (qmail 65149 invoked by uid 500); 6 Jun 2006 09:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65109 invoked by uid 500); 6 Jun 2006 09:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65097 invoked by uid 99); 6 Jun 2006 09:08:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:08:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.200.76.18] (HELO mail4.niit.com) (203.200.76.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:08:55 -0700
Received: from 172.17.8.245 [172.17.8.245]
	by mail4.niit.com
	with XWall v3.33 ;
	Tue, 6 Jun 2006 14:38:23 +0530
Received: by ho-kkj-msg3.in.niit.com with Internet Mail Service (5.5.2657.72)
	id <MCC425MH>; Tue, 6 Jun 2006 14:38:23 +0530
From: Amaresh Kumar Yadav <Amaresh.Yadav@niit.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: searching in more than fields on document
Date: Tue, 6 Jun 2006 14:38:23 +0530
X-Assembled-By: XWall v3.33
X-Mailer: Internet Mail Service (5.5.2657.72)
Message-ID: <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

=20     Will u please give me some clue for searching on more than one field
of document.


My document has six field and i want to search on three fields.=20

Presently I am able to search on only TITLE field..

=20query =3D QueryParser.parse(queryString, "TITLE", analyzer);




Regards..

Amaresh Yadav

----------------------------------------------------------------------
DISCLAIMER

This email and any files transmitted with it are confidential and are solely=
 for the use of the individual or entity to which it is addressed. Any use, =
distribution, copying or disclosure by any other person is strictly prohibit=
ed. If you receive this transmission in error, please notify the sender by r=
eply email and then destroy the message. Opinions, conclusions and other inf=
ormation in this message that do not relate to official business of the comp=
any shall be understood to be neither given nor endorsed by NIIT Ltd. or NII=
T Technologies Ltd. Any information contained in this email, when addressed =
to Clients is subject to the terms and conditions in governing client contra=
ct.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:11:40 2006
Return-Path: <java-user-return-21127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80920 invoked from network); 6 Jun 2006 09:11:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:11:40 -0000
Received: (qmail 69245 invoked by uid 500); 6 Jun 2006 09:11:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69217 invoked by uid 500); 6 Jun 2006 09:11:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69206 invoked by uid 99); 6 Jun 2006 09:11:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:11:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:11:31 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id E33DB187B3; Tue,  6 Jun 2006 09:11:09 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id BA4CF187B1
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 09:11:07 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: Avoiding java.lang.OutOfMemoryError in an unstored field
Date: Tue, 6 Jun 2006 10:11:10 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE790761@staf-exm-01.ardentia.co.uk>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00D8_01C68951.88294480"
Thread-Index: AcaJIaW8gyX3KzksSEafb8g1wOK2ewAHS2DgAAIMpGA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060606091107.BA4CF187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00D8_01C68951.88294480
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Sometimes I need to index large documents. I've got just about as much heap
as my application is allowed (-Xmx512m) and I'm using the unstored
org.apache.lucene.document.Field constructed with a java.io.Reader, but I'm
still suffering from java.lang.OutOfMemoryError when I index some large
documents. Are org.apache.lucene.document.Field and
org.apache.lucene.document.Document always loaded entirely in memory?

------=_NextPart_000_00D8_01C68951.88294480
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNjA5
MTEwOVowIwYJKoZIhvcNAQkEMRYEFPzAX6Gjn2pgmCB5QaiN3/uznSAbMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBACqBlGa0PH3eApnNENjUI3VZw9HIC0Syk4md
Jz57E6M5LIaJa504x6wknzHMgWwEG7d1bI3yH+eciWXfwx5twjIJ4lcxkVt7K1LpwbH1UBOH/mR0
ECuqU3PpPYERq1JHi+PO7FQx69Nphb2Uap4bO9y7k+CHursHjC4bu6dHKhPV4fusieIrGeVznD2i
YKzoPmPhJGXA663QAnMC029bc+g04v/73Jz8/330SD0HoE18NdsDr8nFgM2FnqT1yBJ+02g4BiMH
QFTqd+oYL4yEzDF2Q0HVpmPd/2IEkwbFdyqeNRIzFvBIjMtQpZPGRGvtQMT6aRuyerECqnrmfvcy
4swAAAAAAAA=

------=_NextPart_000_00D8_01C68951.88294480--


From java-user-return-21128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:12:34 2006
Return-Path: <java-user-return-21128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81158 invoked from network); 6 Jun 2006 09:12:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:12:34 -0000
Received: (qmail 71805 invoked by uid 500); 6 Jun 2006 09:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71768 invoked by uid 500); 6 Jun 2006 09:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71757 invoked by uid 99); 6 Jun 2006 09:12:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:12:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:12:25 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout1-sn2.hy.skanova.net (7.2.072.1)
        id 44840CC300036D9D for java-user@lucene.apache.org; Tue, 6 Jun 2006 11:12:03 +0200
Subject: Re: searching in more than fields on document
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com>
References:
	 <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 06 Jun 2006 11:12:01 +0200
Message-Id: <1149585122.8159.3.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 14:38 +0530, Amaresh Kumar Yadav wrote:

> My document has six field and i want to search on three fields. 
> 
> Presently I am able to search on only TITLE field..
> 
>  query = QueryParser.parse(queryString, "TITLE", analyzer);

You want to use the MultiFieldQueryParser.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:13:19 2006
Return-Path: <java-user-return-21129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81319 invoked from network); 6 Jun 2006 09:13:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:13:19 -0000
Received: (qmail 73990 invoked by uid 500); 6 Jun 2006 09:13:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73968 invoked by uid 500); 6 Jun 2006 09:13:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73957 invoked by uid 99); 6 Jun 2006 09:13:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:13:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:13:11 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout1-sn2.hy.skanova.net (7.2.072.1)
        id 44840CC300036E38 for java-user@lucene.apache.org; Tue, 6 Jun 2006 11:12:50 +0200
Subject: Re: Avoiding java.lang.OutOfMemoryError in an unstored field
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <20060606091107.BA4CF187B1@mail.seseit.com>
References: <20060606091107.BA4CF187B1@mail.seseit.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 06 Jun 2006 11:12:48 +0200
Message-Id: <1149585169.8159.5.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 10:11 +0100, Rob Staveley (Tom) wrote:
> Sometimes I need to index large documents. I've got just about as much heap
> as my application is allowed (-Xmx512m) and I'm using the unstored
> org.apache.lucene.document.Field constructed with a java.io.Reader, but I'm
> still suffering from java.lang.OutOfMemoryError when I index some large
> documents. Are org.apache.lucene.document.Field and
> org.apache.lucene.document.Document always loaded entirely in memory?

Are you using a RAMDirectory or FSDirectory?

-X:AggressiveHeap might help you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:16:45 2006
Return-Path: <java-user-return-21130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81860 invoked from network); 6 Jun 2006 09:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:16:44 -0000
Received: (qmail 79467 invoked by uid 500); 6 Jun 2006 09:16:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79208 invoked by uid 500); 6 Jun 2006 09:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79194 invoked by uid 99); 6 Jun 2006 09:16:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:16:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:16:35 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 44840D2700036B63 for java-user@lucene.apache.org; Tue, 6 Jun 2006 11:16:13 +0200
Subject: Re: Avoiding java.lang.OutOfMemoryError in an unstored field
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <20060606091107.BA4CF187B1@mail.seseit.com>
References: <20060606091107.BA4CF187B1@mail.seseit.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 06 Jun 2006 11:16:12 +0200
Message-Id: <1149585372.8159.9.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 10:11 +0100, Rob Staveley (Tom) wrote:
> Sometimes I need to index large documents. I've got just about as much
> heap
> as my application is allowed (-Xmx512m) and I'm using the unstored
> org.apache.lucene.document.Field constructed with a java.io.Reader,
> but I'm
> still suffering from java.lang.OutOfMemoryError when I index some
> large
> documents. Are org.apache.lucene.document.Field and
> org.apache.lucene.document.Document always loaded entirely in memory?

Sorry, I answered to quick.

When you create the index? You might want to flush the IndexWriter more
often than normal. How large is really large documents? 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:22:42 2006
Return-Path: <java-user-return-21131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82923 invoked from network); 6 Jun 2006 09:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:22:42 -0000
Received: (qmail 87436 invoked by uid 500); 6 Jun 2006 09:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87407 invoked by uid 500); 6 Jun 2006 09:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87396 invoked by uid 99); 6 Jun 2006 09:22:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:22:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:22:33 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id BBF11187B3; Tue,  6 Jun 2006 09:22:12 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 4980D187B1
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 09:22:11 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Avoiding java.lang.OutOfMemoryError in an unstored field
Date: Tue, 6 Jun 2006 10:22:15 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <1149585169.8159.5.camel@localhost>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00E8_01C68953.14C89B60"
Thread-Index: AcaJSXEdF3r86x6AQMaZ2YUA+NhqqAAACAWw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060606092211.4980D187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00E8_01C68953.14C89B60
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Thanks for the response, Karl. I am using FSDirectory. -X:AggressiveHeap
might reduce the number of times I get bitten by the problem, but I'm really
looking for a streaming/serialised approach [I think!], which allows me to
handle objects which are larger than available memory. Using the
java.io.Reader-based constructor for the unstored
org.apache.lucene.document.Field means that I do not need to load the
untokenised content entirely into RAM, but I'm hoping that the tokenised
content of org.apache.lucene.document.Field and
org.apache.lucene.document.Document also do not need to live in RAM, because
that puts a limit on document size.

-----Original Message-----
From: karl wettin [mailto:kalle@snigel.net] 
Sent: 06 June 2006 10:13
To: java-user@lucene.apache.org
Subject: Re: Avoiding java.lang.OutOfMemoryError in an unstored field

On Tue, 2006-06-06 at 10:11 +0100, Rob Staveley (Tom) wrote:
> Sometimes I need to index large documents. I've got just about as much 
> heap as my application is allowed (-Xmx512m) and I'm using the 
> unstored org.apache.lucene.document.Field constructed with a 
> java.io.Reader, but I'm still suffering from 
> java.lang.OutOfMemoryError when I index some large documents. Are 
> org.apache.lucene.document.Field and org.apache.lucene.document.Document
always loaded entirely in memory?

Are you using a RAMDirectory or FSDirectory?

-X:AggressiveHeap might help you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_00E8_01C68953.14C89B60
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNjA5
MjIxNVowIwYJKoZIhvcNAQkEMRYEFOQgVTadVJcqPg8mUOVYirIRYujtMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAKFe3s0rgPjr6Gci/xTyawfo0+GeePHpN1Cq
lBaCdXbbCd/ak6tqIf1sIT2knl083z6fAvctDgPzEQGrXasIMffw51cY25pPsC3dExpVx9K/F+fb
l+QGDRq4kEn9KJtJir9qXkPCFLre/sCU8cIY0XBhGj4ZtfmE6jFLRi85aUwxO0ACIfNqNM9dUj/J
/ljQFfYdkEXU99N9GA7BnyG0hs7MASIkNLV82bI0YosVBT0o+TvFo/5hSK80GAh4nhvDKSJqbS5F
eBO3pS0gIBaCw/Kxmw2IdoO1M+d2NreCb2bscCMdQBG5R8+HTA2ulDqYbsBnTRr7Qct7gVCnASqI
uD0AAAAAAAA=

------=_NextPart_000_00E8_01C68953.14C89B60--


From java-user-return-21132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:34:01 2006
Return-Path: <java-user-return-21132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87835 invoked from network); 6 Jun 2006 09:34:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:34:00 -0000
Received: (qmail 14439 invoked by uid 500); 6 Jun 2006 09:33:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14365 invoked by uid 500); 6 Jun 2006 09:33:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14315 invoked by uid 99); 6 Jun 2006 09:33:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:33:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:33:41 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn1.fre.skanova.net (7.2.072.1)
        id 44840AFD00037A53 for java-user@lucene.apache.org; Tue, 6 Jun 2006 11:33:20 +0200
Subject: RE: Avoiding java.lang.OutOfMemoryError in an unstored field
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <20060606092211.4980D187B1@mail.seseit.com>
References: <20060606092211.4980D187B1@mail.seseit.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 06 Jun 2006 11:33:18 +0200
Message-Id: <1149586398.8159.16.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 10:22 +0100, Rob Staveley (Tom) wrote:
> 
> Thanks for the response, Karl. I am using FSDirectory.
> -X:AggressiveHeap might reduce the number of times I get bitten by the
> problem, but I'm really looking for a streaming/serialised approach [I
> think!], which allows me to handle objects which are larger than
> available memory. Using the java.io.Reader-based constructor for the
> unstored org.apache.lucene.document.Field means that I do not need to
> load the untokenised content entirely into RAM, but I'm hoping that
> the tokenised content of org.apache.lucene.document.Field and
> org.apache.lucene.document.Document also do not need to live in RAM,
> because that puts a limit on document size. 

The instances of Document and their Fields are only created at
Hits.doc() and when you create them for insertion in the index. They
live only as long as you keep track of them. Lucene keeps no references
as far as I know.

As I wrote in my second reply, if you run out of memory when indexing it
sounds to me as you allow lots and lots of tokens per field. In this
case you should look at flushing your documents more often. 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:39:44 2006
Return-Path: <java-user-return-21133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89562 invoked from network); 6 Jun 2006 09:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:39:43 -0000
Received: (qmail 25347 invoked by uid 500); 6 Jun 2006 09:39:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25321 invoked by uid 500); 6 Jun 2006 09:39:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25310 invoked by uid 99); 6 Jun 2006 09:39:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:39:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:39:35 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 72794187B3; Tue,  6 Jun 2006 09:39:13 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id B914D187B1
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 09:39:11 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Avoiding java.lang.OutOfMemoryError in an unstored field
Date: Tue, 6 Jun 2006 10:39:13 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <1149585372.8159.9.camel@localhost>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00EF_01C68955.739D6C40"
Thread-Index: AcaJSetNjuP+LLnsSaOqYYJXMReLmwAANoiA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060606093911.B914D187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00EF_01C68955.739D6C40
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

I answered too quickly too :-)

The QA folk seem to reckon that a 132MB plain text file with no white space
is where it falls over. There are some accountancy e-mails with attachments
of ~170Mb like this, which we need to be able to field.

How would I go about flushing the IndexWriter? 

-----Original Message-----
From: karl wettin [mailto:kalle@snigel.net] 
Sent: 06 June 2006 10:16
To: java-user@lucene.apache.org
Subject: Re: Avoiding java.lang.OutOfMemoryError in an unstored field

On Tue, 2006-06-06 at 10:11 +0100, Rob Staveley (Tom) wrote:
> Sometimes I need to index large documents. I've got just about as much 
> heap as my application is allowed (-Xmx512m) and I'm using the 
> unstored org.apache.lucene.document.Field constructed with a 
> java.io.Reader, but I'm still suffering from 
> java.lang.OutOfMemoryError when I index some large documents. Are 
> org.apache.lucene.document.Field and 
> org.apache.lucene.document.Document always loaded entirely in memory?

Sorry, I answered to quick.

When you create the index? You might want to flush the IndexWriter more
often than normal. How large is really large documents? 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_00EF_01C68955.739D6C40
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNjA5
MzkxM1owIwYJKoZIhvcNAQkEMRYEFMXCvA+7NZLmRn9Wd5J0VJxS+eUJMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAAdo9wfn+CiALOqTGHZ/qooDicwgU1JM1bQ0
zJhJW9YJDDZvM66Wpm5L3uaz+GIRmIjoCMgjWJSi6JlimGPCPMzKTatM6SPl7zqqx7yS6r8dda3B
maEklWkm62CxutsFLcaNxHujd+0PGRJLCNbs2vHVHSIzUJw+aACzvuu8YpL5br3JtyIgANV6dCQM
WJjfKWAFoZ4cWKskKhAfrS7FAPF3cONOmwYxQpqJdcXcEzlFA1+F5TpD3DE8mplqhqG1R31Rr6J4
znWzadepMEAkC0/OAlQPfLtH6/QQVVdMo23IisIfXGMdNAiQaeg3gtmG/20fRP23nGDgEt5YWHhw
n80AAAAAAAA=

------=_NextPart_000_00EF_01C68955.739D6C40--


From java-user-return-21134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:40:56 2006
Return-Path: <java-user-return-21134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90279 invoked from network); 6 Jun 2006 09:40:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:40:56 -0000
Received: (qmail 27930 invoked by uid 500); 6 Jun 2006 09:40:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27820 invoked by uid 500); 6 Jun 2006 09:40:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27801 invoked by uid 99); 6 Jun 2006 09:40:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:40:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [67.15.12.79] (HELO plesk.ev1servers.net) (67.15.12.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:40:48 -0700
Received: (qmail 10098 invoked from network); 6 Jun 2006 08:55:56 -0000
Received: from unknown (HELO user) (85.154.11.73)
  by connectivsolution.com with SMTP; 6 Jun 2006 08:55:56 -0000
From: "Kiran Joisher" <kiran.joisher@recreatesolutions.com>
To: <java-user@lucene.apache.org>
Subject: RE: searching in more than fields on document
Date: Tue, 6 Jun 2006 13:52:06 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
In-Reply-To: <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com>
Thread-Index: AcaJQqJGFIlbJtl4QcemVokFs0FQlwAC92oA
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060606094049.6305C10FB010@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can use MultiFieldQueryParser

Something like this

Query query = MultiFieldQueryParser.parse(new String[]{queryString,
queryString, queryString}, new String[]{ASSET_TITLE, ASSET_ARTICLE,
ASSET_DIRECTOR_NAMES }, new BooleanClause.Occur[]
{BooleanClause.Occur.SHOULD, BooleanClause.Occur.SHOULD,
BooleanClause.Occur.SHOULD }, analyzer);

Kiran Dama
Senior Software Engineer
 

Recreate Solutions - Architects of Digital Convergence
106, Marwah's Complex, Krishnalal Marwah Marg, Saki Naka, Andheri (E),
Mumbai 400 072 
T: +91 22 2857 6944 / 45  F: +91 22 2857 1123  M: +91 
e: @recreatesolutions.com  
Website: www.recreatesolutions.com 
 
CONFIDENTIALITY NOTICE

This electronic mail transmission and any accompanying documents contain
information belonging to the sender ("Information") that may be confidential
and legally privileged. If you are not the intended recipient, any
disclosure, copying, distribution or action taken in reliance on the
Information is strictly prohibited. If you have received the Information in
error, please contact the sender by reply email and destroy all copies of
the original email. Thank you
 
 
-----Original Message-----
From: Amaresh Kumar Yadav [mailto:Amaresh.Yadav@niit.com] 
Sent: Tuesday, June 06, 2006 1:08 PM
To: java-user@lucene.apache.org
Subject: searching in more than fields on document

Hi All,

      Will u please give me some clue for searching on more than one field
of document.

My document has six field and i want to search on three fields. 

Presently I am able to search on only TITLE field..

 query = QueryParser.parse(queryString, "TITLE", analyzer);

Regards..

Amaresh Yadav

----------------------------------------------------------------------
DISCLAIMER

This email and any files transmitted with it are confidential and are solely
for the use of the individual or entity to which it is addressed. Any use,
distribution, copying or disclosure by any other person is strictly
prohibited. If you receive this transmission in error, please notify the
sender by reply email and then destroy the message. Opinions, conclusions
and other information in this message that do not relate to official
business of the company shall be understood to be neither given nor endorsed
by NIIT Ltd. or NIIT Technologies Ltd. Any information contained in this
email, when addressed to Clients is subject to the terms and conditions in
governing client contract.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

**************************************************************
Scanned by  eScan  Anti-Virus  and  Content Security Software.
Visit http://www.mwti.net for more info on eScan and MailScan.
**************************************************************


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:44:13 2006
Return-Path: <java-user-return-21135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91326 invoked from network); 6 Jun 2006 09:44:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:44:12 -0000
Received: (qmail 33167 invoked by uid 500); 6 Jun 2006 09:44:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32679 invoked by uid 500); 6 Jun 2006 09:44:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32668 invoked by uid 99); 6 Jun 2006 09:44:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:44:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:44:05 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 36705187B3; Tue,  6 Jun 2006 09:43:45 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id AB7E9187B1
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 09:43:43 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Avoiding java.lang.OutOfMemoryError in an unstored field
Date: Tue, 6 Jun 2006 10:43:48 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <1149586398.8159.16.camel@localhost>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00F6_01C68956.17AD3D60"
Thread-Index: AcaJTFVnkEjgXu9YQIOccyt8alVu+wAAOv6A
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060606094343.AB7E9187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00F6_01C68956.17AD3D60
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

You are right there are going to be a lot of tokens. The entire boxy of a
text document is getting indexed in an unstored field, but I don't see how I
can flush a partially loaded field. 

-----Original Message-----
From: karl wettin [mailto:kalle@snigel.net] 
Sent: 06 June 2006 10:33
To: java-user@lucene.apache.org
Subject: RE: Avoiding java.lang.OutOfMemoryError in an unstored field

On Tue, 2006-06-06 at 10:22 +0100, Rob Staveley (Tom) wrote:
> 
> Thanks for the response, Karl. I am using FSDirectory.
> -X:AggressiveHeap might reduce the number of times I get bitten by the 
> problem, but I'm really looking for a streaming/serialised approach [I 
> think!], which allows me to handle objects which are larger than 
> available memory. Using the java.io.Reader-based constructor for the 
> unstored org.apache.lucene.document.Field means that I do not need to 
> load the untokenised content entirely into RAM, but I'm hoping that 
> the tokenised content of org.apache.lucene.document.Field and 
> org.apache.lucene.document.Document also do not need to live in RAM, 
> because that puts a limit on document size.

The instances of Document and their Fields are only created at
Hits.doc() and when you create them for insertion in the index. They live
only as long as you keep track of them. Lucene keeps no references as far as
I know.

As I wrote in my second reply, if you run out of memory when indexing it
sounds to me as you allow lots and lots of tokens per field. In this case
you should look at flushing your documents more often. 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_00F6_01C68956.17AD3D60
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNjA5
NDM0OFowIwYJKoZIhvcNAQkEMRYEFKu+dqajjqqLlZddMysq6MLZXlylMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAI4b4WERNWKf6NRFAdmEMnQtYl3c4kklqw3I
5iT/zoX9f+9gFSzKLk5ArC3KAQeHQVr3MImbdyvH4IPjSduuSvJGOeIVLIjL37AoFxx0NQkcMsHK
34rFrlh6IQNrigoLnpR2n5GQQxtsAjJBVJj7GwoqzDXH2a+4UkEUFVVOj6Onhvu37cVXggtbYLYp
ZYhuu/hy/XtrmOoNZUpoMQZnhrtbP2Nb+YEAQ7W/g2Vbp2GtrLajPo9za9sEntIH5G92YXCSYTd1
ElF/RHP+FMaKulAg50Ejf74uWesgaTNt200/3GAQz5WGWOgIXuI2HiHh7xg0paxypf0HctghSQCR
ktUAAAAAAAA=

------=_NextPart_000_00F6_01C68956.17AD3D60--


From java-user-return-21136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:48:49 2006
Return-Path: <java-user-return-21136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94752 invoked from network); 6 Jun 2006 09:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:48:48 -0000
Received: (qmail 43692 invoked by uid 500); 6 Jun 2006 09:48:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43663 invoked by uid 500); 6 Jun 2006 09:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43652 invoked by uid 99); 6 Jun 2006 09:48:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:48:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:48:38 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 44840D2700038763 for java-user@lucene.apache.org; Tue, 6 Jun 2006 11:48:18 +0200
Subject: RE: Avoiding java.lang.OutOfMemoryError in an unstored field
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <20060606094343.AB7E9187B1@mail.seseit.com>
References: <20060606094343.AB7E9187B1@mail.seseit.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 06 Jun 2006 11:48:16 +0200
Message-Id: <1149587296.8159.19.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 10:43 +0100, Rob Staveley (Tom) wrote:
> You are right there are going to be a lot of tokens. The entire boxy of a
> text document is getting indexed in an unstored field, but I don't see how I
> can flush a partially loaded field. 

Check these out:

http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html

void setMaxBufferedDocs(int maxBufferedDocs) 
          Determines the minimal number of documents required before the
buffered in-memory documents are merging and a new Segment is created. 

void setMaxFieldLength(int maxFieldLength) 
          The maximum number of terms that will be indexed for a single
field in a document.  

void setMergeFactor(int mergeFactor) 
          Determines how often segment indices are merged by
addDocument().


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:54:27 2006
Return-Path: <java-user-return-21137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97091 invoked from network); 6 Jun 2006 09:54:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:54:26 -0000
Received: (qmail 49546 invoked by uid 500); 6 Jun 2006 09:54:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49514 invoked by uid 500); 6 Jun 2006 09:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49406 invoked by uid 99); 6 Jun 2006 09:54:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:54:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO mail.spline-software.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:54:14 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id 2EE2E197534; Tue,  6 Jun 2006 12:53:38 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 424F41AEB2B
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 12:53:31 +0300 (EEST)
Message-ID: <4485509A.9050601@i-hypergrid.com>
Date: Tue, 06 Jun 2006 12:53:30 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Compound / non-compound index files and SIGKILL
References: <20060605190636.59E0F187B1@mail.seseit.com>
In-Reply-To: <20060605190636.59E0F187B1@mail.seseit.com>
Content-Type: multipart/alternative;
 boundary="------------050004090501090507050107"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_20_30,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------050004090501090507050107
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

If your content handlers should respond quickly then you should move 
indexing process to separate thread and maintain items in queue.

Rob Staveley (Tom) wrote:
> This is a real eye-opener, Volodymyr. Many thanks. I guess that means that
> my orphan-producing hangs must be addDocument() calls, and not in the
> content handlers, as I'd previously assumed. I'll put some debug before and
> after my addDocument() calls to confirm (and point my writer's infoStream to
> System.out).
>
> -----Original Message-----
> From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com] 
> Sent: 05 June 2006 18:33
> To: java-user@lucene.apache.org
> Subject: Re: Compound / non-compound index files and SIGKILL
>
> Hi.
> My five cents :)
>
> It might be helpful to know how lucene is working with compound files. 
> When segment is flushed to disk it is written uncompound and after that is
> merged into single .cfs file. If you don't change default setting for using
> compound files (which is on) this is only place (I guess) for these files to
> appear.
>
> If you're working with large indexes, than merging segments can take a while
> (Maybe here is your problem? :) ) (merging happens on
> addDocument() call).  If you will kill indexing process during such merge
> you'll get many orphaned files...
>
> You can just run optimize on this index. You'll get three files: 
> segments, deletable, <segment>.cfs; you can look name of segment in
> 'segments' file. Everything else is 'garbage' - you can delete it.
>
>
> Rob Staveley (Tom) wrote:
>   
>> I've been indexing live data into a compound index from an MTA. I'm
>> resolving a bunch of problems unrelated to Lucene (disparate hangs in my
>> content handlers). When I get a hang, I typically need to kill my daemon,
>> alas more often than not using kill -9 (SIGKILL).
>>
>> However, these SIGKILLs are leaving large temporary(?) files, which I
>>     
> guess
>   
>> are non-compound index files transiently extracted from the working .cfs
>> files:
>>
>> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
>> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
>> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
>>
>> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
>> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
>> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
>>
>> They are left intact after restarting my daemon. Presumably they are not
>> treated as being part of the compound index. I see no corresponding .cfs
>> file for them. 
>>
>> As a consequence of these - I suspect - I am getting a very large overall
>> disk requirement for my index, presumably because of replicated field
>>     
> data.
>   
>> My guess is that the field data in the orphaned .fdt files needs to be
>> regenerated.
>>
>> In another index directory from a previous test run (again with SIGKILLs),
>>     
> I
>   
>> have 98 GB of index files, with only 12 BG devoted to compound files for
>>     
> the
>   
>> field index (.cfs). The rest of the disk space is used by orphaned
>> uncompounded index files; I see 51 GB devoted to uncompounded field data
>> (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted to term
>> frequencies (.frq).
>>
>> Here's my question:
>>
>> How can I attempt to merge these orphaned into the compound index, using
>> IndexWriter.addIndexes(), or would I be foolish attempting this?
>>   
>>     
>
>   

-- 
regards,
Volodymyr Bychkoviak


--------------050004090501090507050107--

From java-user-return-21138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 09:55:34 2006
Return-Path: <java-user-return-21138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97202 invoked from network); 6 Jun 2006 09:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 09:55:34 -0000
Received: (qmail 51129 invoked by uid 500); 6 Jun 2006 09:55:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51103 invoked by uid 500); 6 Jun 2006 09:55:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51092 invoked by uid 99); 6 Jun 2006 09:55:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:55:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 02:55:25 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1FnYH8-0003ea-Ki
	for java-user@lucene.apache.org; Tue, 06 Jun 2006 11:55:02 +0200
Received: from host217-35-101-254.in-addr.btopenworld.com ([217.35.101.254])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 11:55:02 +0200
Received: from lists by host217-35-101-254.in-addr.btopenworld.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 11:55:02 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  digby <lists@digby.net>
Subject:  Re: searching in more than fields on document
Date:  Tue, 06 Jun 2006 10:47:34 +0100
Lines: 24
Message-ID: <e63j07$gb1$1@sea.gmane.org>
References:  <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com> <1149585122.8159.3.camel@localhost>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host217-35-101-254.in-addr.btopenworld.com
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
In-Reply-To: <1149585122.8159.3.camel@localhost>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was wondering this exact question, but MultiFieldQueryParser still 
requires you to specify the field names. In my application I don't know 
the field names (they're automatically generated from beans using 
BeanUtils.getProperties()), so I've resorted to concatenating all the 
fields into a single "content" field which I then search on (I also have 
the individual fields added too).

Would this be the correct approach for what I'm trying to do, or is 
there another "AllFieldsQueryParser" I could use?

TIA

Digby

karl wettin wrote:
> On Tue, 2006-06-06 at 14:38 +0530, Amaresh Kumar Yadav wrote:
> 
>> My document has six field and i want to search on three fields. 
>>
>> Presently I am able to search on only TITLE field..
>>
>>  query = QueryParser.parse(queryString, "TITLE", analyzer);
> 
> You want to use the MultiFieldQueryParser.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 10:01:20 2006
Return-Path: <java-user-return-21139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98468 invoked from network); 6 Jun 2006 10:01:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 10:01:19 -0000
Received: (qmail 59887 invoked by uid 500); 6 Jun 2006 10:01:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59737 invoked by uid 500); 6 Jun 2006 10:01:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59724 invoked by uid 99); 6 Jun 2006 10:01:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:01:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:01:10 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FnYMW-0004bO-AZ
	for java-user@lucene.apache.org; Tue, 06 Jun 2006 12:00:36 +0200
Received: from host217-35-101-254.in-addr.btopenworld.com ([217.35.101.254])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 12:00:36 +0200
Received: from lists by host217-35-101-254.in-addr.btopenworld.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 12:00:36 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  digby <lists@digby.net>
Subject:  Lucene in Action
Date:  Tue, 06 Jun 2006 10:59:53 +0100
Lines: 9
Message-ID: <e63jn9$iuu$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host217-35-101-254.in-addr.btopenworld.com
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does everyone recommend getting this book? I'm just starting out with 
Lucene and like to have a book beside me as well as the web / this 
mailing list, but the book looks quite old now, has a 1-2 month delivery 
wait time here in the UK and is quite expensive. Is it worth waiting for 
a new edition perhaps?

Thanks,

Digby


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 10:03:00 2006
Return-Path: <java-user-return-21140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98991 invoked from network); 6 Jun 2006 10:03:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 10:03:00 -0000
Received: (qmail 63193 invoked by uid 500); 6 Jun 2006 10:02:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62887 invoked by uid 500); 6 Jun 2006 10:02:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62875 invoked by uid 99); 6 Jun 2006 10:02:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:02:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:02:51 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout1-sn1.fre.skanova.net (7.2.072.1)
        id 4483E63400041D1D for java-user@lucene.apache.org; Tue, 6 Jun 2006 12:02:29 +0200
Subject: Re: searching in more than fields on document
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <e63j07$gb1$1@sea.gmane.org>
References:
	 <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com>
	 <1149585122.8159.3.camel@localhost>  <e63j07$gb1$1@sea.gmane.org>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 06 Jun 2006 12:02:27 +0200
Message-Id: <1149588147.8159.22.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 10:47 +0100, digby wrote:
> I was wondering this exact question, but MultiFieldQueryParser still 
> requires you to specify the field names. In my application I don't know 
> the field names (they're automatically generated from beans using 
> BeanUtils.getProperties()), so I've resorted to concatenating all the 
> fields into a single "content" field which I then search on (I also have 
> the individual fields added too).
> 
> Would this be the correct approach for what I'm trying to do, or is 
> there another "AllFieldsQueryParser" I could use?

If you don't know the field names you'll have to use the IndexReader to
iterate available fields:

http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html

getFieldNames(IndexReader.FieldOption fldOption) 
          Get a list of unique field names that exist in this index and
have the specified field option information.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 10:05:01 2006
Return-Path: <java-user-return-21141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99542 invoked from network); 6 Jun 2006 10:05:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 10:05:01 -0000
Received: (qmail 65802 invoked by uid 500); 6 Jun 2006 10:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65772 invoked by uid 500); 6 Jun 2006 10:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65761 invoked by uid 99); 6 Jun 2006 10:04:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:04:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:04:53 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout1-sn1.fre.skanova.net (7.2.072.1)
        id 4483E63400041EAD for java-user@lucene.apache.org; Tue, 6 Jun 2006 12:04:32 +0200
Subject: Re: Lucene in Action
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <e63jn9$iuu$1@sea.gmane.org>
References: <e63jn9$iuu$1@sea.gmane.org>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 06 Jun 2006 12:04:30 +0200
Message-Id: <1149588270.8159.25.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 10:59 +0100, digby wrote:
> 
> Does everyone recommend getting this book?

If you want to learn Lucene then this is definitely a book to get.

> I'm just starting out with Lucene and like to have a book beside me as
> well as the web / this mailing list, but the book looks quite old now,
> has a 1-2 month delivery wait time here in the UK and is quite
> expensive. Is it worth waiting for a new edition perhaps? 

I'll leave that question to Erik and Otis...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 10:06:44 2006
Return-Path: <java-user-return-21142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 589 invoked from network); 6 Jun 2006 10:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 10:06:44 -0000
Received: (qmail 70420 invoked by uid 500); 6 Jun 2006 10:06:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70387 invoked by uid 500); 6 Jun 2006 10:06:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70376 invoked by uid 99); 6 Jun 2006 10:06:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:06:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:06:34 -0700
Received: from c1-ex001.groupinfra.com ([213.86.115.108])
	by rly09e.srv.mailcontrol.com (MailControl) with ESMTP id k56A68gk003128
	for <java-user@lucene.apache.org>; Tue, 6 Jun 2006 11:06:12 +0100
Received: from uk-ex004.groupinfra.com ([158.234.68.230]) by c1-ex001.groupinfra.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 6 Jun 2006 11:05:14 +0100
Received: from uk-ex010.groupinfra.com ([158.234.9.225]) by uk-ex004.groupinfra.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 6 Jun 2006 11:05:14 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE:  Lucene in Action
Date: Tue, 6 Jun 2006 11:05:14 +0100
Message-ID: <DBC3F0E83850C4419A75B1181B5BFE9F083CA2@uk-ex010.groupinfra.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic:  Lucene in Action
Thread-Index: AcaJUCnxrSZ95+mLTtmeLCaD/P90gQAACzTw
From: "Irving, Dave" <dave.irving@logicacmg.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Jun 2006 10:05:14.0692 (UTC) FILETIME=[B4988040:01C68950]
X-Scanned-By: MailControl A-07-00-10 (www.mailcontrol.com) on 10.69.0.119
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It really helped me out loads and I would recommend it to anyone.
I gave up trying to obtain it from amazon - but got it in 2 days from
Blackwell Online
(http://bookshop.blackwell.co.uk)


> -----Original Message-----
> From: news [mailto:news@sea.gmane.org] On Behalf Of digby
> Sent: 06 June 2006 11:00
> To: java-user@lucene.apache.org
> Subject: Lucene in Action
>=20
> Does everyone recommend getting this book? I'm just starting=20
> out with Lucene and like to have a book beside me as well as=20
> the web / this mailing list, but the book looks quite old=20
> now, has a 1-2 month delivery wait time here in the UK and is=20
> quite expensive. Is it worth waiting for a new edition perhaps?
>=20
> Thanks,
>=20
> Digby
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


This e-mail and any attachment is for authorised use by the intended recipi=
ent(s) only. It may contain proprietary material, confidential information =
and/or be subject to legal privilege. It should not be copied, disclosed to=
, retained or used by, any other party. If you are not an intended recipien=
t then please promptly delete this e-mail and any attachment and all copies=
 and inform the sender. Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 10:09:02 2006
Return-Path: <java-user-return-21143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1541 invoked from network); 6 Jun 2006 10:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 10:09:01 -0000
Received: (qmail 77307 invoked by uid 500); 6 Jun 2006 10:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76896 invoked by uid 500); 6 Jun 2006 10:08:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76885 invoked by uid 99); 6 Jun 2006 10:08:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:08:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rociel.buico@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:08:54 -0700
Received: by wr-out-0506.google.com with SMTP id i20so1214659wra
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 03:08:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nCMeEuC5O7mhCL1Nuh/QSDjFdUisHoT+y1LPLAPWnQqABR5q2S5zPGOkMRQnY6/ucCCTow2WrayTRVPV83/aCxOnR3a7CpX/0lj2GyE6HYtejkmiCtm10Xs2MNUbld8QUTmeuQsWpaEyyjLno7EtI53Mk07rRVmLzr1DS+DZtR0=
Received: by 10.64.83.17 with SMTP id g17mr351320qbb;
        Tue, 06 Jun 2006 03:08:34 -0700 (PDT)
Received: by 10.65.75.17 with HTTP; Tue, 6 Jun 2006 03:08:33 -0700 (PDT)
Message-ID: <1ff1ea2f0606060308q51fc0fb2n49b60b99dc9a67e4@mail.gmail.com>
Date: Tue, 6 Jun 2006 18:08:33 +0800
From: "rociel.buico@gmail.com" <rociel.buico@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action
In-Reply-To: <DBC3F0E83850C4419A75B1181B5BFE9F083CA2@uk-ex010.groupinfra.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35491_7228018.1149588513993"
References: <DBC3F0E83850C4419A75B1181B5BFE9F083CA2@uk-ex010.groupinfra.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_35491_7228018.1149588513993
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

its a nice book!!



On 6/6/06, Irving, Dave <dave.irving@logicacmg.com> wrote:
>
> It really helped me out loads and I would recommend it to anyone.
> I gave up trying to obtain it from amazon - but got it in 2 days from
> Blackwell Online
> (http://bookshop.blackwell.co.uk)
>
>
> > -----Original Message-----
> > From: news [mailto:news@sea.gmane.org] On Behalf Of digby
> > Sent: 06 June 2006 11:00
> > To: java-user@lucene.apache.org
> > Subject: Lucene in Action
> >
> > Does everyone recommend getting this book? I'm just starting
> > out with Lucene and like to have a book beside me as well as
> > the web / this mailing list, but the book looks quite old
> > now, has a 1-2 month delivery wait time here in the UK and is
> > quite expensive. Is it worth waiting for a new edition perhaps?
> >
> > Thanks,
> >
> > Digby
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> This e-mail and any attachment is for authorised use by the intended
> recipient(s) only. It may contain proprietary material, confidential
> information and/or be subject to legal privilege. It should not be copied,
> disclosed to, retained or used by, any other party. If you are not an
> intended recipient then please promptly delete this e-mail and any
> attachment and all copies and inform the sender. Thank you.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"Programs must be written for people to read, and only incidentally for
machines to execute."

- Abelson & Sussman, SICP, preface to the first edition

------=_Part_35491_7228018.1149588513993--

From java-user-return-21144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 10:20:04 2006
Return-Path: <java-user-return-21144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4125 invoked from network); 6 Jun 2006 10:20:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 10:20:03 -0000
Received: (qmail 90572 invoked by uid 500); 6 Jun 2006 10:19:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90507 invoked by uid 500); 6 Jun 2006 10:19:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90496 invoked by uid 99); 6 Jun 2006 10:19:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:19:56 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:19:52 -0700
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id LAA17862
	for <java-user@lucene.apache.org>; Tue, 6 Jun 2006 11:20:13 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma017856; Tue, 6 Jun 06 11:20:06 +0100
In-Reply-To: <e63jn9$iuu$1@sea.gmane.org>
Subject: Re: Lucene in Action
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Tue, 6 Jun 2006 11:19:22 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 06/06/2006 11:19:23
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






It's an invaluable book if you're new to Lucene. There have been some
changes to the Lucene API since the book was published but you shouldn't
let this put you off - they're relatively minor. I think Lucene In Action
v2.0 might be a little while in coming (checkout Otis' blog
http://www.jroller.com/page/otis?catname=%2FLucene).
Regards
Paul I.


                                                                           
             digby                                                         
             <lists@digby.net>                                             
             Sent by: news                                              To 
             <news@sea.gmane.o         java-user@lucene.apache.org         
             rg>                                                        cc 
                                                                           
                                                                   Subject 
             06/06/2006 10:59          Lucene in Action                    
                                                                           
                                                                           
             Please respond to                                             
             java-user@lucene.                                             
                apache.org                                                 
                                                                           
                                                                           




Does everyone recommend getting this book? I'm just starting out with
Lucene and like to have a book beside me as well as the web / this
mailing list, but the book looks quite old now, has a 1-2 month delivery
wait time here in the UK and is quite expensive. Is it worth waiting for
a new edition perhaps?

Thanks,

Digby


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 10:51:56 2006
Return-Path: <java-user-return-21145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12606 invoked from network); 6 Jun 2006 10:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 10:51:55 -0000
Received: (qmail 23502 invoked by uid 500); 6 Jun 2006 10:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23476 invoked by uid 500); 6 Jun 2006 10:51:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23465 invoked by uid 99); 6 Jun 2006 10:51:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:51:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Kinnar.Sen@hcl.in designates 203.105.185.20 as permitted sender)
Received: from [203.105.185.20] (HELO nda-hclin-gws02.hcl.in) (203.105.185.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 03:51:47 -0700
Received: from nda-hclin-gws02.hcl.in (nda-hclin-gws02 [10.248.64.135])
	by localhost.hcl.in (Postfix) with SMTP id 5258FCFC04B
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 16:20:49 +0530 (IST)
Received: from nda-egw01-out.corp.hcl.in (unknown [10.248.64.37])by 
	nda-hclin-gws02.hcl.in (Postfix) with ESMTP id 4493CCFC00Dfor 
	<java-user@lucene.apache.org>; Tue,  6 Jun 2006 16:20:49 +0530 (IST)
Received: from HSDLNTD1110010.noida.hcltech.com ([10.112.8.20]) by 
	nda-egw01-out.corp.hcl.in with Microsoft SMTPSVC(6.0.3790.1830); Tue, 6 Jun
	 2006 16:21:24 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene in Action
Date: Tue, 6 Jun 2006 16:24:15 +0530
Message-ID: <539C0A297AA0C74581CB5AF82D5372910148C98D@HSDLNTD1110010.noida.hcltech.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene in Action
Thread-Index: AcaJUsaZgizixWvaRByQoitxzthaZQABLwmg
From: "Kinnar Kumar Sen, Noida" <Kinnar.Sen@hcl.in>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Jun 2006 10:51:24.0691 (UTC) 
	FILETIME=[27A4CE30:01C68957]
X-imss-version: 2.040
X-imss-result: Passed
X-imss-scores: Clean:75.66507 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:2 M:2 S:2 R:2 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


IT'S A REALLY GOOD BOOK TO START OFF WITH

    Regards and Thanks=0D
Kinnar Kumar Sen=0D
  HCL Technologies Ltd.
  Sec-60, Noida-201301
    Ph: - 09313297423
=0D
=0D
=0D
TO SUCEED BE DIFFERENT BE DARING AND BE THERE FIRST
=0D
=0D
-----Original Message-----
From: Paul.Illingworth@saaconsultants.com
[mailto:Paul.Illingworth@saaconsultants.com]=0D
Sent: Tuesday, June 06, 2006 3:49 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action






It's an invaluable book if you're new to Lucene. There have been some
changes to the Lucene API since the book was published but you shouldn't
let this put you off - they're relatively minor. I think Lucene In
Action
v2.0 might be a little while in coming (checkout Otis' blog
http://www.jroller.com/page/otis?catname=3D%2FLucene).
Regards
Paul I.


=0D

             digby

             <lists@digby.net>

             Sent by: news
To=0D
             <news@sea.gmane.o         java-user@lucene.apache.org

             rg>
cc=0D
=0D

=0D
Subject=0D
             06/06/2006 10:59          Lucene in Action

=0D

=0D

             Please respond to

             java-user@lucene.

                apache.org

=0D

=0D





Does everyone recommend getting this book? I'm just starting out with
Lucene and like to have a book beside me as well as the web / this
mailing list, but the book looks quite old now, has a 1-2 month delivery
wait time here in the UK and is quite expensive. Is it worth waiting for
a new edition perhaps?

Thanks,

Digby


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


DISCLAIMER:
---------------------------------------------------------------------------=
--------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and=
 intended for the named recipient(s) only.=0D
It shall not attach any liability on the originator or HCL or its=
 affiliates. Any views or opinions presented in=0D
this email are solely those of the author and may not necessarily reflect=
 the opinions of HCL or its affiliates.=0D
Any form of reproduction, dissemination, copying, disclosure, modification,=
 distribution and / or publication of=0D
this message without the prior written consent of the author of this e-mail=
 is strictly prohibited. If you have=0D
received this email in error please delete it and notify the sender=
 immediately. Before opening any mail and=0D
attachments please check them for viruses and defect.
---------------------------------------------------------------------------=
--------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 10:56:46 2006
Return-Path: <java-user-return-21146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13954 invoked from network); 6 Jun 2006 10:56:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 10:56:45 -0000
Received: (qmail 34689 invoked by uid 500); 6 Jun 2006 10:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34656 invoked by uid 500); 6 Jun 2006 10:56:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34615 invoked by uid 99); 6 Jun 2006 10:56:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:56:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 03:56:36 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FnZEG-0006zm-HG
	for java-user@lucene.apache.org; Tue, 06 Jun 2006 12:56:08 +0200
Received: from host217-35-101-254.in-addr.btopenworld.com ([217.35.101.254])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 12:56:08 +0200
Received: from lists by host217-35-101-254.in-addr.btopenworld.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 12:56:08 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  digby <lists@digby.net>
Subject:  Re: Lucene in Action
Date:  Tue, 06 Jun 2006 11:55:26 +0100
Lines: 54
Message-ID: <e63mve$ufk$1@sea.gmane.org>
References:  <e63jn9$iuu$1@sea.gmane.org> <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host217-35-101-254.in-addr.btopenworld.com
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
In-Reply-To: <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks everyone, although now I'm not sure what to! Blackwells quicker 
but more expensive, but is a new edition due...???

Think I'll blow the moths off my wallet and get on with it...


Paul.Illingworth@saaconsultants.com wrote:
> 
> 
> 
> 
> It's an invaluable book if you're new to Lucene. There have been some
> changes to the Lucene API since the book was published but you shouldn't
> let this put you off - they're relatively minor. I think Lucene In Action
> v2.0 might be a little while in coming (checkout Otis' blog
> http://www.jroller.com/page/otis?catname=%2FLucene).
> Regards
> Paul I.
> 
> 
>                                                                            
>              digby                                                         
>              <lists@digby.net>                                             
>              Sent by: news                                              To 
>              <news@sea.gmane.o         java-user@lucene.apache.org         
>              rg>                                                        cc 
>                                                                            
>                                                                    Subject 
>              06/06/2006 10:59          Lucene in Action                    
>                                                                            
>                                                                            
>              Please respond to                                             
>              java-user@lucene.                                             
>                 apache.org                                                 
>                                                                            
>                                                                            
> 
> 
> 
> 
> Does everyone recommend getting this book? I'm just starting out with
> Lucene and like to have a book beside me as well as the web / this
> mailing list, but the book looks quite old now, has a 1-2 month delivery
> wait time here in the UK and is quite expensive. Is it worth waiting for
> a new edition perhaps?
> 
> Thanks,
> 
> Digby
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 11:06:20 2006
Return-Path: <java-user-return-21147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17545 invoked from network); 6 Jun 2006 11:06:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 11:06:20 -0000
Received: (qmail 41881 invoked by uid 500); 6 Jun 2006 11:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41841 invoked by uid 500); 6 Jun 2006 11:06:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41829 invoked by uid 99); 6 Jun 2006 11:06:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:06:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.138] (HELO smtp801.mail.ukl.yahoo.com) (217.12.12.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 04:06:12 -0700
Received: (qmail 12552 invoked from network); 6 Jun 2006 11:05:50 -0000
Received: from unknown (HELO MalcolmPC) (malcyclark@btinternet.com@86.132.233.154 with login)
  by smtp801.mail.ukl.yahoo.com with SMTP; 6 Jun 2006 11:05:45 -0000
Message-ID: <008801c68959$28cf3280$0201a8c0@MalcolmPC>
From: "Malcolm Clark" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References:  <e63jn9$iuu$1@sea.gmane.org> <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com> <e63mve$ufk$1@sea.gmane.org>
Subject: Re: Lucene in Action
Date: Tue, 6 Jun 2006 12:05:45 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Try here......


http://www.abebooks.co.uk

Maybe they have one cheaper.
Malcolm

----- Original Message ----- 
From: "digby" <lists@digby.net>
To: <java-user@lucene.apache.org>
Sent: Tuesday, June 06, 2006 11:55 AM
Subject: Re: Lucene in Action


> Thanks everyone, although now I'm not sure what to! Blackwells quicker but 
> more expensive, but is a new edition due...???
>
> Think I'll blow the moths off my wallet and get on with it...
>
>
> Paul.Illingworth@saaconsultants.com wrote:
>>
>>
>>
>>
>> It's an invaluable book if you're new to Lucene. There have been some
>> changes to the Lucene API since the book was published but you shouldn't
>> let this put you off - they're relatively minor. I think Lucene In Action
>> v2.0 might be a little while in coming (checkout Otis' blog
>> http://www.jroller.com/page/otis?catname=%2FLucene).
>> Regards
>> Paul I.
>>
>>
>> 
>> digby 
>> <lists@digby.net>                                             Sent by: 
>> news                                              To <news@sea.gmane.o 
>> java-user@lucene.apache.org         rg> 
>> cc Subject 06/06/2006 10:59          Lucene in Action 
>> Please respond to 
>> java-user@lucene.                                             apache.org 
>> Does everyone recommend getting this book? I'm just starting out with
>> Lucene and like to have a book beside me as well as the web / this
>> mailing list, but the book looks quite old now, has a 1-2 month delivery
>> wait time here in the UK and is quite expensive. Is it worth waiting for
>> a new edition perhaps?
>>
>> Thanks,
>>
>> Digby
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 11:08:34 2006
Return-Path: <java-user-return-21148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18126 invoked from network); 6 Jun 2006 11:08:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 11:08:34 -0000
Received: (qmail 46147 invoked by uid 500); 6 Jun 2006 11:08:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45841 invoked by uid 500); 6 Jun 2006 11:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45830 invoked by uid 99); 6 Jun 2006 11:08:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:08:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 66.249.82.206 as permitted sender)
Received: from [66.249.82.206] (HELO wx-out-0102.google.com) (66.249.82.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:08:27 -0700
Received: by wx-out-0102.google.com with SMTP id s16so824193wxc
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 04:08:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JV9GXRgYAR9vULblrDYpYQADLZ7KV93/4pk7X3rk8K5Gvp6KiL9hfU66QoJf+m4LvREs8X1Obr2DP4nk3bTMoohZUPYf/QiG4FeAXTjdjvqz0LQ4orYoH2H2Nn9jxBoBdVJymGrzlrm2lYnjceaMm147Mkold3T5RDBCYmXYrkA=
Received: by 10.70.102.11 with SMTP id z11mr7380523wxb;
        Tue, 06 Jun 2006 04:08:03 -0700 (PDT)
Received: by 10.70.28.12 with HTTP; Tue, 6 Jun 2006 04:08:03 -0700 (PDT)
Message-ID: <8c4e68610606060408r76655ce2g25f38f7a1bb194d0@mail.gmail.com>
Date: Tue, 6 Jun 2006 12:08:03 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action
In-Reply-To: <e63mve$ufk$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e63jn9$iuu$1@sea.gmane.org>
	 <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
	 <e63mve$ufk$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

For what it's worth, Blackwell's uses Lucene for biblio searching.
Developed with the help of Lucene In Action.


--
Ian.


On 6/6/06, digby <lists@digby.net> wrote:
> Thanks everyone, although now I'm not sure what to! Blackwells quicker
> but more expensive, but is a new edition due...???
>
> Think I'll blow the moths off my wallet and get on with it...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 11:41:31 2006
Return-Path: <java-user-return-21149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31935 invoked from network); 6 Jun 2006 11:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 11:41:31 -0000
Received: (qmail 80951 invoked by uid 500); 6 Jun 2006 11:41:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80914 invoked by uid 500); 6 Jun 2006 11:41:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80903 invoked by uid 99); 6 Jun 2006 11:41:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:41:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:41:23 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id E42B8187B3; Tue,  6 Jun 2006 11:41:00 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 85C91187B1
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 11:40:58 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Tue, 6 Jun 2006 12:41:02 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <4485509A.9050601@i-hypergrid.com>
Thread-Index: AcaJTzDAa8xGwzBRQJSup2nxLBKXzQACBDrw
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_010F_01C68966.781995D0"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060606114058.85C91187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_010F_01C68966.781995D0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

This is a good idea. I had been worried about the additional heap
requirement maintaining a queue, without being able to serialize/deserialize
Documents (i.e. a build up of Lucene Documents in RAM). I have been
marshalling addDocument() calls using a synchronized object; the same
threads have been taking responsibility for creating Documents
(unsynchronized) and adding them to the index writer (synchronized). I guess
I could have a one Document queue feeding a single addDocument thread, which
would effectively be the same approach, but which would make it easier to
ensure that only the create Document thread is killed when I get a SIGTERM
and the addDocument thread is left to run its course (assuming it hasn't
hanged!).

Having said that, I'm not sure what I could do in a shutdown hook, which
wouldn't already have been done by a SIGTERM to get the hanged thread to
terminate. The reason for SIGKILL was that the daemon wouldn't be killed by
SIGTERM. I guess I'd feel more confident about using SIGKILL, if I knew that
the uninterruptible hanged thread was creating a Document, which I could
interrupt without corrupting the index, rather than adding the document to
the index, which is liable to result in orphaned files and/or a corrupted
index, if killed.

-----Original Message-----
From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com] 
Sent: 06 June 2006 10:54
To: java-user@lucene.apache.org
Subject: Re: Compound / non-compound index files and SIGKILL

If your content handlers should respond quickly then you should move
indexing process to separate thread and maintain items in queue.

Rob Staveley (Tom) wrote:
> This is a real eye-opener, Volodymyr. Many thanks. I guess that means 
> that my orphan-producing hangs must be addDocument() calls, and not in 
> the content handlers, as I'd previously assumed. I'll put some debug 
> before and after my addDocument() calls to confirm (and point my 
> writer's infoStream to System.out).
>
> -----Original Message-----
> From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
> Sent: 05 June 2006 18:33
> To: java-user@lucene.apache.org
> Subject: Re: Compound / non-compound index files and SIGKILL
>
> Hi.
> My five cents :)
>
> It might be helpful to know how lucene is working with compound files. 
> When segment is flushed to disk it is written uncompound and after 
> that is merged into single .cfs file. If you don't change default 
> setting for using compound files (which is on) this is only place (I 
> guess) for these files to appear.
>
> If you're working with large indexes, than merging segments can take a 
> while (Maybe here is your problem? :) ) (merging happens on
> addDocument() call).  If you will kill indexing process during such 
> merge you'll get many orphaned files...
>
> You can just run optimize on this index. You'll get three files: 
> segments, deletable, <segment>.cfs; you can look name of segment in 
> 'segments' file. Everything else is 'garbage' - you can delete it.
>
>
> Rob Staveley (Tom) wrote:
>   
>> I've been indexing live data into a compound index from an MTA. I'm 
>> resolving a bunch of problems unrelated to Lucene (disparate hangs in 
>> my content handlers). When I get a hang, I typically need to kill my 
>> daemon, alas more often than not using kill -9 (SIGKILL).
>>
>> However, these SIGKILLs are leaving large temporary(?) files, which I
>>     
> guess
>   
>> are non-compound index files transiently extracted from the working 
>> .cfs
>> files:
>>
>> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
>> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
>> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
>>
>> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
>> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
>> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
>>
>> They are left intact after restarting my daemon. Presumably they are 
>> not treated as being part of the compound index. I see no 
>> corresponding .cfs file for them.
>>
>> As a consequence of these - I suspect - I am getting a very large 
>> overall disk requirement for my index, presumably because of 
>> replicated field
>>     
> data.
>   
>> My guess is that the field data in the orphaned .fdt files needs to 
>> be regenerated.
>>
>> In another index directory from a previous test run (again with 
>> SIGKILLs),
>>     
> I
>   
>> have 98 GB of index files, with only 12 BG devoted to compound files 
>> for
>>     
> the
>   
>> field index (.cfs). The rest of the disk space is used by orphaned 
>> uncompounded index files; I see 51 GB devoted to uncompounded field 
>> data (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted 
>> to term frequencies (.frq).
>>
>> Here's my question:
>>
>> How can I attempt to merge these orphaned into the compound index, 
>> using IndexWriter.addIndexes(), or would I be foolish attempting this?
>>   
>>     
>
>   

--
regards,
Volodymyr Bychkoviak


------=_NextPart_000_010F_01C68966.781995D0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNjEx
NDEwMlowIwYJKoZIhvcNAQkEMRYEFIKF+pV55vpUYiwE1QaEvHonoDFoMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBADGKF2qStSPj8l0NFINjd6c/DIXBDaRYnyIU
CYKQ7WXXdXL8zmYcRU8vK75E+XwfLPZY5WDZtSqd4WvSc7IWsshw/PVUKAJU3JHxnDHVuQ0Wfm3i
PeT1J+UgTY6/45GSPFOiSrLKg0YKM/8dHn/FoGmLgI8kYRcDwiUqqAEdyFLgrvyg9BBPObIO5qaf
MOcr74ffdOgb9EjwMo2tsjrR5552SiN7FzhCO2rqbVHTYxZPDKJ/EBPcfZ/EeAU/uwHJFAXQEqTR
2b6Qj79lnCfGGXBYUMk+HW0KZi1mFzdcdw1HJm4qS2m03ZXDuN/OGUd4F2BkFucxx4PSiuz8m9mh
XGkAAAAAAAA=

------=_NextPart_000_010F_01C68966.781995D0--


From java-user-return-21150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 11:45:08 2006
Return-Path: <java-user-return-21150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32511 invoked from network); 6 Jun 2006 11:45:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 11:45:08 -0000
Received: (qmail 85448 invoked by uid 500); 6 Jun 2006 11:45:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84742 invoked by uid 500); 6 Jun 2006 11:45:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84730 invoked by uid 99); 6 Jun 2006 11:45:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:45:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:45:00 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id DB26D187B3; Tue,  6 Jun 2006 11:44:39 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id B33A8187B1
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 11:44:37 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Avoiding java.lang.OutOfMemoryError in an unstored field
Date: Tue, 6 Jun 2006 12:44:42 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <1149587296.8159.19.camel@localhost>
Thread-Index: AcaJTmdKbxlAczY6RX6plhbX2Sd9SgAAYR2A
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0116_01C68966.FB766E30"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060606114437.B33A8187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0116_01C68966.FB766E30
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Thanks, Karl. It would be good if maxBufferedDocs could respond dynamically
to available heap. It seems a shame to set <10 for the sake of sporadic
large documents. Failing that, it would be nice if we could explicitly
pre-flush buffers when we encounter a big field.

I'm increasingly thinking that mergeFactor is what I need to look at. I
currently have it set to the default 10, but bearing in mind that it is a
real-time application (indexing messages from an MTA), it makes sense to
make this smaller. Is the RAM requirement die to mergeFactor a product of
Document size and mergeFactor or does Document size have no bearing on the
RAM requirement due to mergeFactor?


-----Original Message-----
From: karl wettin [mailto:kalle@snigel.net] 
Sent: 06 June 2006 10:48
To: java-user@lucene.apache.org
Subject: RE: Avoiding java.lang.OutOfMemoryError in an unstored field

On Tue, 2006-06-06 at 10:43 +0100, Rob Staveley (Tom) wrote:
> You are right there are going to be a lot of tokens. The entire boxy 
> of a text document is getting indexed in an unstored field, but I 
> don't see how I can flush a partially loaded field.

Check these out:

http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.h
tml

void setMaxBufferedDocs(int maxBufferedDocs) 
          Determines the minimal number of documents required before the
buffered in-memory documents are merging and a new Segment is created. 

void setMaxFieldLength(int maxFieldLength) 
          The maximum number of terms that will be indexed for a single
field in a document.  

void setMergeFactor(int mergeFactor) 
          Determines how often segment indices are merged by addDocument().


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0116_01C68966.FB766E30
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNjEx
NDQ0MlowIwYJKoZIhvcNAQkEMRYEFDv6ARASSraHvhf+yW3x5pMgqnABMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBABmlBZh7dtMtMkBBxSDQAiukZY07xyR0t4FY
mn0I4+L/qdzkZAuEVazJjsetrcezqiJ3uAh0gwsIOPRmAdCSSYbBmIMsiaDPsfNjeM54UhdxZDdb
v9S5VJcoH4w9YnuBpBV3rMnMhExhPFINm8hdlO6bfCVPnf6kMHZ8eZ1UYRt50t3Yi00s3O0IuhyX
xocXIIHbdMQdn6LB+nVQPD8PF6SKg8coGSamS2qwPLsx7lH1cVVu2bmfXIbC9WIaabwJbze4WU9o
JkEx+F15ov5tiMIj5pPOEpuCajYpsxN2jnJRJ0tGYsoF3tlAj0VJlLwuBdu4XRmceSpEko1sSJ/b
QmcAAAAAAAA=

------=_NextPart_000_0116_01C68966.FB766E30--


From java-user-return-21151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 11:48:31 2006
Return-Path: <java-user-return-21151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33260 invoked from network); 6 Jun 2006 11:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 11:48:31 -0000
Received: (qmail 88051 invoked by uid 500); 6 Jun 2006 11:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87614 invoked by uid 500); 6 Jun 2006 11:48:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87603 invoked by uid 99); 6 Jun 2006 11:48:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:48:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.23.157.12] (HELO srv-mail.Keljob.com) (62.23.157.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 04:48:24 -0700
Received: from ft.keljob.com ([192.168.1.206]) by srv-mail.Keljob.com with Microsoft SMTPSVC(6.0.3790.0);
	 Tue, 6 Jun 2006 13:48:07 +0200
Date: Tue, 6 Jun 2006 13:48:03 +0200
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.62.14) Professional
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <1623524732.20060606134803@laposte.net>
To: Malcolm Clark <java-user@lucene.apache.org>
Subject: Re[2]: Lucene in Action
In-Reply-To: <008801c68959$28cf3280$0201a8c0@MalcolmPC>
References: <e63jn9$iuu$1@sea.gmane.org>
 <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
 <e63mve$ufk$1@sea.gmane.org> <008801c68959$28cf3280$0201a8c0@MalcolmPC>
MIME-Version: 1.0
Content-Type: multipart/alternative;
 boundary="----------6EE2864A7D4C"
X-OriginalArrivalTime: 06 Jun 2006 11:48:07.0087 (UTC) FILETIME=[13A13BF0:01C6895F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------------6EE2864A7D4C
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi, 

Or simply grab it online (paper or pdf eBook ) here : http://www.manning.com/hatcher2/

--- Sven

Le mardi 6 juin 2006 à 13:05:45, vous écriviez :

MC> Try here......


MC> http://www.abebooks.co.uk

MC> Maybe they have one cheaper.
MC> Malcolm
------------6EE2864A7D4C--


From java-user-return-21152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 11:55:58 2006
Return-Path: <java-user-return-21152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35082 invoked from network); 6 Jun 2006 11:55:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 11:55:58 -0000
Received: (qmail 98092 invoked by uid 500); 6 Jun 2006 11:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98059 invoked by uid 500); 6 Jun 2006 11:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98048 invoked by uid 99); 6 Jun 2006 11:55:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 04:55:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.201] (HELO web25903.mail.ukl.yahoo.com) (217.12.10.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 04:55:51 -0700
Received: (qmail 57088 invoked by uid 60001); 6 Jun 2006 11:55:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=bv8owPcfLs+C46nbF4qqEMCEJTAQ/S+hUxK6CtXMA7rUO4vv5jkuiZMhgxipSHPeNQMRTZvhS7CvK12RfvtACjENaKYVpRNGgIFDdU00b8/kZ87cFryrdkrkUkLHV+t6QI/HQnSi+RXfC7qFNVCgBRcQIenp8/yffZ48J2uABcI=  ;
Message-ID: <20060606115529.57086.qmail@web25903.mail.ukl.yahoo.com>
Date: Tue, 6 Jun 2006 13:55:29 +0200 (CEST)
From: eks dev <eksdev@yahoo.co.uk>
Reply-To: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Lucene in Action
To: java-user@lucene.apache.org
In-Reply-To: <e63jn9$iuu$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Grab it now, it is worth all this money.

----- Original Message ----
From: digby <lists@digby.net>
To: java-user@lucene.apache.org
Sent: Tuesday, 6 June, 2006 11:59:53 AM
Subject: Lucene in Action

Does everyone recommend getting this book? I'm just starting out with 
Lucene and like to have a book beside me as well as the web / this 
mailing list, but the book looks quite old now, has a 1-2 month delivery 
wait time here in the UK and is quite expensive. Is it worth waiting for 
a new edition perhaps?

Thanks,

Digby


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 12:03:06 2006
Return-Path: <java-user-return-21153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36689 invoked from network); 6 Jun 2006 12:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 12:03:06 -0000
Received: (qmail 12167 invoked by uid 500); 6 Jun 2006 12:02:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12140 invoked by uid 500); 6 Jun 2006 12:02:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12129 invoked by uid 99); 6 Jun 2006 12:02:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 05:02:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 05:02:57 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 187D2187B3; Tue,  6 Jun 2006 12:02:36 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 5D79B187B1
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 12:02:34 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene in Action
Date: Tue, 6 Jun 2006 13:02:37 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	boundary="----=_NextPart_000_0008_01C68969.7ACE7540";
	protocol="application/x-pkcs7-signature";
	micalg=SHA1
In-Reply-To: <20060606115529.57086.qmail@web25903.mail.ukl.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaJYCqHLKMiGdD1QPOhC2vfOQUCWgAAMpWw
Message-Id: <20060606120234.5D79B187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0008_01C68969.7ACE7540
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

 It is better value than the tee shirt http://www.cafepress.com/lucene/

------=_NextPart_000_0008_01C68969.7ACE7540
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNjEy
MDIzNVowIwYJKoZIhvcNAQkEMRYEFEZdY3+uFBw9Dzz4Y2esZhJN2JZdMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAJqkBX5ALNPpqMPKeFOg5wm9clRRYFsVFTwU
7o0XaTQdPjc21Y/4a0RPAd56nFgQ9Rox2+xEpzH1MTR76cKer3pb/yOsIEaGMIgstE6QiqMD58rr
NGNqwNLgB8jyQGv8HBmbh0YICVkyfjmCrD7xdRVzRT/m0fDsff4q6d8Vfv7OJ5TG8ihwgmYlyyBf
vxpA0e1ypTveJyETA+VfMNMqWrOOq0bJ+mKrmCFApnEyrr3WvWbL8VzfbBwePjtnHlBMJvho/T47
ObpnL2nG2tmDjg2lq7UlJJ63PfLqMYZ2yBcDiMKZSIsVA6NHWFPdu7rEjRfP3oZ7UvxXjv7yUtzT
ky8AAAAAAAA=

------=_NextPart_000_0008_01C68969.7ACE7540--


From java-user-return-21154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 12:11:19 2006
Return-Path: <java-user-return-21154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39099 invoked from network); 6 Jun 2006 12:11:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 12:11:18 -0000
Received: (qmail 29993 invoked by uid 500); 6 Jun 2006 12:11:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29949 invoked by uid 500); 6 Jun 2006 12:11:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29932 invoked by uid 99); 6 Jun 2006 12:11:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 05:11:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.107 as permitted sender)
Received: from [205.158.62.107] (HELO ws6-4.us4.outblaze.com) (205.158.62.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 05:11:09 -0700
Received: (qmail 27860 invoked from network); 6 Jun 2006 12:10:48 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.74.14.119)
  by ws6-4.us4.outblaze.com with SMTP; 6 Jun 2006 12:10:48 -0000
Message-ID: <448570C8.5000900@curtin.com>
Date: Tue, 06 Jun 2006 08:10:48 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: searching in more than fields on document
References: <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com> <1149585122.8159.3.camel@localhost> <e63j07$gb1$1@sea.gmane.org>
In-Reply-To: <e63j07$gb1$1@sea.gmane.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not sure if I understand exactly what you want to do, but would the 
"<field>:<keyword>" syntax that QueryParser understands work for you?  That 
is, you could send query text like

     f1:foo f2:foo f3:foo

to search for "foo" in any of the 3 fields.  If you need boolean capabilities 
you can use parentheses, like so:

     +(f1:foo f2:foo f3:foo) +(f1:bar f2:bar f3:bar)

to mean "foo in some field, and bar in some field", or

     +(f1:foo f1:bar) +(f2:foo f2:bar) +(f3:foo f3:bar)

"foo or bar in all fields".

Would this work for ya?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 12:13:40 2006
Return-Path: <java-user-return-21155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39567 invoked from network); 6 Jun 2006 12:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 12:13:39 -0000
Received: (qmail 34865 invoked by uid 500); 6 Jun 2006 12:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34638 invoked by uid 500); 6 Jun 2006 12:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34627 invoked by uid 99); 6 Jun 2006 12:13:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 05:13:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 05:13:31 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: spring & lucene
Date: Tue, 6 Jun 2006 08:13:10 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA0255FA9E@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: spring & lucene
Thread-Index: AcaJIaW8gyX3KzksSEafb8g1wOK2ewAHS2DgAAin6sA=
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

have a look at spring module 0.3. it has a lucene module which contains =
many interesting classes LuceneIndexTemplate, LuceneSearchTemplate, and =
all kind of factotires following spring concepts.
here is the url to the documentation: =
http://www.springframework.org/node/270

-----Original Message-----
From: Mike Streeton [mailto:mike.streeton@ardentia.co.uk]
Sent: Tuesday, June 06, 2006 4:02 AM
To: java-user@lucene.apache.org
Subject: RE: spring & lucene


We wrote ours for NetSearch to handle this specific issue. I suggest you
create a holder class to hold the IndexReader and IndexSearcher, this
can close them in the finalizer. Clients keep the holder until they are
finished and then discard it. When it is completely de-referenced it
will be closed. We also remove old indexes this way as well. Create a
factory class for the holder that knows when an index is being updated,
and creates new holders, when the index is not being updated it returns
the same one each time.

Mike

www.ardentia.com the home of NetSearch

-----Original Message-----
From: Rajiv Roopan [mailto:rajiv.roopan@gmail.com]=20
Sent: 06 June 2006 05:28
To: java-user@lucene.apache.org
Subject: spring & lucene

Hello,
 I'm using the spring framework to define my indexsearcher and
indexwriter.   They are defined as persistent singletons in the
application.

I'm quite new to lucene and I realize that after updating an index
using IndexWriter you nead to re-create an instance of IndexSearcher
to search that newly updated index. I was wondering if anyone knew,
using spring, how to reload the IndexSearcher bean?

Thanks!
rajiv

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 12:26:32 2006
Return-Path: <java-user-return-21156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42979 invoked from network); 6 Jun 2006 12:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 12:26:32 -0000
Received: (qmail 67488 invoked by uid 500); 6 Jun 2006 12:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67446 invoked by uid 500); 6 Jun 2006 12:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67410 invoked by uid 99); 6 Jun 2006 12:26:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 05:26:14 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.31] (HELO web36614.mail.mud.yahoo.com) (209.191.85.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 05:26:12 -0700
Received: (qmail 39197 invoked by uid 60001); 6 Jun 2006 12:25:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=UXJq9sMLCgg7R/jAGj7lSxVEh9gP5LSI2+G95eMwD3l3aTuoMwYxT975cpSpFqEZdYaKlohVBGG5347QdszPq2Qk1gwM9DL+lU4ynygK9gr9p/B+r5jJy7khUjjpeaZyOWvqllnFiMnzHRHrV1iuG96pIrYfNqB9jbba7ZBIUXQ=  ;
Message-ID: <20060606122551.39195.qmail@web36614.mail.mud.yahoo.com>
Date: Tue, 6 Jun 2006 05:25:51 -0700 (PDT)
From: Marc Dauncey <marc_dauncey@yahoo.com>
Reply-To: Marc Dauncey <marc_dauncey@yahoo.com>
Subject: Re: Lucene in Action
To: java-user@lucene.apache.org
In-Reply-To: <e63mve$ufk$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could always purchase the PDF from www.manning.com.

This book is essential in my view. Its also one of the clearest most engaging IT books I've ever read.

----- Original Message ----
From: digby <lists@digby.net>
To: java-user@lucene.apache.org
Sent: Tuesday, 6 June, 2006 11:55:26 AM
Subject: Re: Lucene in Action

Thanks everyone, although now I'm not sure what to! Blackwells quicker 
but more expensive, but is a new edition due...???

Think I'll blow the moths off my wallet and get on with it...


Paul.Illingworth@saaconsultants.com wrote:
> 
> 
> 
> 
> It's an invaluable book if you're new to Lucene. There have been some
> changes to the Lucene API since the book was published but you shouldn't
> let this put you off - they're relatively minor. I think Lucene In Action
> v2.0 might be a little while in coming (checkout Otis' blog
> http://www.jroller.com/page/otis?catname=%2FLucene).
> Regards
> Paul I.
> 
> 
>                                                                            
>              digby                                                         
>              <lists@digby.net>                                             
>              Sent by: news                                              To 
>              <news@sea.gmane.o         java-user@lucene.apache.org         
>              rg>                                                        cc 
>                                                                            
>                                                                    Subject 
>              06/06/2006 10:59          Lucene in Action                    
>                                                                            
>                                                                            
>              Please respond to                                             
>              java-user@lucene.                                             
>                 apache.org                                                 
>                                                                            
>                                                                            
> 
> 
> 
> 
> Does everyone recommend getting this book? I'm just starting out with
> Lucene and like to have a book beside me as well as the web / this
> mailing list, but the book looks quite old now, has a 1-2 month delivery
> wait time here in the UK and is quite expensive. Is it worth waiting for
> a new edition perhaps?
> 
> Thanks,
> 
> Digby
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 13:02:47 2006
Return-Path: <java-user-return-21157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63966 invoked from network); 6 Jun 2006 13:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 13:02:47 -0000
Received: (qmail 63279 invoked by uid 500); 6 Jun 2006 13:02:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63227 invoked by uid 500); 6 Jun 2006 13:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63195 invoked by uid 99); 6 Jun 2006 13:02:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 06:02:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO mail.spline-software.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 06:02:30 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id 3725B1AE10A; Tue,  6 Jun 2006 15:58:30 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id F41AB1AEF24
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 15:11:59 +0300 (EEST)
Message-ID: <44857112.5070206@i-hypergrid.com>
Date: Tue, 06 Jun 2006 15:12:02 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Compound / non-compound index files and SIGKILL
References: <20060606114058.85C91187B1@mail.seseit.com>
In-Reply-To: <20060606114058.85C91187B1@mail.seseit.com>
Content-Type: multipart/alternative;
 boundary="------------080106060504040103010900"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_20_30,HTML_MESSAGE autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------080106060504040103010900
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

In my application I was queuing IDs of appropriate record in Database 
not whole document. Document was created right before adding it to 
index. All this work was done in separated thread, so other threads 
responded very quickly.

It depends on your application and at what speed your new data comes.

If application is killed or crashes then you'll lost all documents that 
was buffered in memory  (IndexWriter.minMergeDocs property).

Actually I don't know how JVM's shutdown hooks reacts to different kill 
signals. My though is that application should not be killed. :)
Also if you need to enshure that your data is indexed properly then on 
startup you can do special check what data was already added to database 
but wasn't added to index and enqueue it into queue... But it also 
depends...

Rob Staveley (Tom) wrote:
> This is a good idea. I had been worried about the additional heap
> requirement maintaining a queue, without being able to serialize/deserialize
> Documents (i.e. a build up of Lucene Documents in RAM). I have been
> marshalling addDocument() calls using a synchronized object; the same
> threads have been taking responsibility for creating Documents
> (unsynchronized) and adding them to the index writer (synchronized). I guess
> I could have a one Document queue feeding a single addDocument thread, which
> would effectively be the same approach, but which would make it easier to
> ensure that only the create Document thread is killed when I get a SIGTERM
> and the addDocument thread is left to run its course (assuming it hasn't
> hanged!).
>
> Having said that, I'm not sure what I could do in a shutdown hook, which
> wouldn't already have been done by a SIGTERM to get the hanged thread to
> terminate. The reason for SIGKILL was that the daemon wouldn't be killed by
> SIGTERM. I guess I'd feel more confident about using SIGKILL, if I knew that
> the uninterruptible hanged thread was creating a Document, which I could
> interrupt without corrupting the index, rather than adding the document to
> the index, which is liable to result in orphaned files and/or a corrupted
> index, if killed.
>
> -----Original Message-----
> From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com] 
> Sent: 06 June 2006 10:54
> To: java-user@lucene.apache.org
> Subject: Re: Compound / non-compound index files and SIGKILL
>
> If your content handlers should respond quickly then you should move
> indexing process to separate thread and maintain items in queue.
>
> Rob Staveley (Tom) wrote:
>   
>> This is a real eye-opener, Volodymyr. Many thanks. I guess that means 
>> that my orphan-producing hangs must be addDocument() calls, and not in 
>> the content handlers, as I'd previously assumed. I'll put some debug 
>> before and after my addDocument() calls to confirm (and point my 
>> writer's infoStream to System.out).
>>
>> -----Original Message-----
>> From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
>> Sent: 05 June 2006 18:33
>> To: java-user@lucene.apache.org
>> Subject: Re: Compound / non-compound index files and SIGKILL
>>
>> Hi.
>> My five cents :)
>>
>> It might be helpful to know how lucene is working with compound files. 
>> When segment is flushed to disk it is written uncompound and after 
>> that is merged into single .cfs file. If you don't change default 
>> setting for using compound files (which is on) this is only place (I 
>> guess) for these files to appear.
>>
>> If you're working with large indexes, than merging segments can take a 
>> while (Maybe here is your problem? :) ) (merging happens on
>> addDocument() call).  If you will kill indexing process during such 
>> merge you'll get many orphaned files...
>>
>> You can just run optimize on this index. You'll get three files: 
>> segments, deletable, <segment>.cfs; you can look name of segment in 
>> 'segments' file. Everything else is 'garbage' - you can delete it.
>>
>>
>> Rob Staveley (Tom) wrote:
>>   
>>     
>>> I've been indexing live data into a compound index from an MTA. I'm 
>>> resolving a bunch of problems unrelated to Lucene (disparate hangs in 
>>> my content handlers). When I get a hang, I typically need to kill my 
>>> daemon, alas more often than not using kill -9 (SIGKILL).
>>>
>>> However, these SIGKILLs are leaving large temporary(?) files, which I
>>>     
>>>       
>> guess
>>   
>>     
>>> are non-compound index files transiently extracted from the working 
>>> .cfs
>>> files:
>>>
>>> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
>>> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
>>> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
>>>
>>> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
>>> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
>>> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
>>>
>>> They are left intact after restarting my daemon. Presumably they are 
>>> not treated as being part of the compound index. I see no 
>>> corresponding .cfs file for them.
>>>
>>> As a consequence of these - I suspect - I am getting a very large 
>>> overall disk requirement for my index, presumably because of 
>>> replicated field
>>>     
>>>       
>> data.
>>   
>>     
>>> My guess is that the field data in the orphaned .fdt files needs to 
>>> be regenerated.
>>>
>>> In another index directory from a previous test run (again with 
>>> SIGKILLs),
>>>     
>>>       
>> I
>>   
>>     
>>> have 98 GB of index files, with only 12 BG devoted to compound files 
>>> for
>>>     
>>>       
>> the
>>   
>>     
>>> field index (.cfs). The rest of the disk space is used by orphaned 
>>> uncompounded index files; I see 51 GB devoted to uncompounded field 
>>> data (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted 
>>> to term frequencies (.frq).
>>>
>>> Here's my question:
>>>
>>> How can I attempt to merge these orphaned into the compound index, 
>>> using IndexWriter.addIndexes(), or would I be foolish attempting this?
>>>   
>>>     
>>>       
>>   
>>     
>
> --
> regards,
> Volodymyr Bychkoviak
>
>   

-- 
regards,
Volodymyr Bychkoviak


--------------080106060504040103010900--

From java-user-return-21158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 13:26:56 2006
Return-Path: <java-user-return-21158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79413 invoked from network); 6 Jun 2006 13:26:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 13:26:56 -0000
Received: (qmail 28781 invoked by uid 500); 6 Jun 2006 13:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28420 invoked by uid 500); 6 Jun 2006 13:26:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28409 invoked by uid 99); 6 Jun 2006 13:26:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 06:26:48 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.240] (HELO web30512.mail.mud.yahoo.com) (68.142.201.240)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 06:26:48 -0700
Received: (qmail 44286 invoked by uid 60001); 6 Jun 2006 13:26:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QpYq/qaP0vBBp4h3X9pCF1yYhiWYXd+3omlozj4wCCeefoF8y27Afx6VooTpVtzsM8zYkkHJdfLmjXhfouBnemAHrJ84ZalStKdY2quVm3ncA/2P0Znwd8NY4fEsNGRtiz4QLAsBNM/y7UBRUFwl0jNKX/3xCDBX/oBSSkF7qwc=  ;
Message-ID: <20060606132626.44271.qmail@web30512.mail.mud.yahoo.com>
Received: from [195.22.232.203] by web30512.mail.mud.yahoo.com via HTTP; Tue, 06 Jun 2006 06:26:26 PDT
Date: Tue, 6 Jun 2006 06:26:26 -0700 (PDT)
From: Alexander MASHTAKOV <amashtakov@yahoo.com>
Reply-To: amashtakov@yahoo.com
Subject: PHP and Lucene integration 
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Folks,

I'm working on project that is going to have free-text
search mechanism. The project is completely based on
open source technologies, such as MySQL and PHP.
I'm reading about Lucene and think that this is
probably the first candidate. 

BTW, the (obvious) question is: "How to integrate PHP
and Lucene ?". What are possible ways to solve this 
task ?

Sure, this question was asked a lot of times ... btw
need your opinion. Any information, advices (cons and
pros of a given approach), links are welcome.

Thank you a lot,
/Alexander

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 13:52:13 2006
Return-Path: <java-user-return-21159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90505 invoked from network); 6 Jun 2006 13:52:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 13:52:13 -0000
Received: (qmail 4118 invoked by uid 500); 6 Jun 2006 13:52:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4082 invoked by uid 500); 6 Jun 2006 13:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4070 invoked by uid 99); 6 Jun 2006 13:52:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 06:52:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of richmondmike@gmail.com designates 66.249.82.197 as permitted sender)
Received: from [66.249.82.197] (HELO wx-out-0102.google.com) (66.249.82.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 06:52:04 -0700
Received: by wx-out-0102.google.com with SMTP id s16so846165wxc
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 06:51:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=N+TeHJpDUmm0MiXSfN00k6295EbfxH7tcCbct9WwROamAcc+LJTZ5TlLPKpPJf5F9qVCBJ4BynufMfgsW+iu+u72IagxQLrMbKmJ0436rcVCp5KBEAT5/Sozh6MFv1kLW6qLtp3h2L5mxoyf//Q/DX9XrF/wpzooMcz6RJ0sV0M=
Received: by 10.70.69.8 with SMTP id r8mr7593153wxa;
        Tue, 06 Jun 2006 06:51:43 -0700 (PDT)
Received: by 10.70.116.1 with HTTP; Tue, 6 Jun 2006 06:51:43 -0700 (PDT)
Message-ID: <931ca11b0606060651o74f62346n4f0781aaae7de181@mail.gmail.com>
Date: Tue, 6 Jun 2006 09:51:43 -0400
From: "Mike Richmond" <richmondmike@gmail.com>
To: java-user@lucene.apache.org, amashtakov@yahoo.com
Subject: Re: PHP and Lucene integration
In-Reply-To: <20060606132626.44271.qmail@web30512.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060606132626.44271.qmail@web30512.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am also working on interfacing Lucene with PHP.  Here are a couple
options that I have found useful:

Call Java directly from PHP:
http://php-java-bridge.sourceforge.net/

Solr - Interacts w/ Lucene via XML requests
http://incubator.apache.org/solr/index.html
There is mention of a PHP interface (SolPHP) here:
http://wiki.apache.org/solr/SolPHP

Hope this helps.


--Mike



On 6/6/06, Alexander MASHTAKOV <amashtakov@yahoo.com> wrote:
> Hi Folks,
>
> I'm working on project that is going to have free-text
> search mechanism. The project is completely based on
> open source technologies, such as MySQL and PHP.
> I'm reading about Lucene and think that this is
> probably the first candidate.
>
> BTW, the (obvious) question is: "How to integrate PHP
> and Lucene ?". What are possible ways to solve this
> task ?
>
> Sure, this question was asked a lot of times ... btw
> need your opinion. Any information, advices (cons and
> pros of a given approach), links are welcome.
>
> Thank you a lot,
> /Alexander
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 14:17:23 2006
Return-Path: <java-user-return-21160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 673 invoked from network); 6 Jun 2006 14:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 14:17:22 -0000
Received: (qmail 76057 invoked by uid 500); 6 Jun 2006 14:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76023 invoked by uid 500); 6 Jun 2006 14:17:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76012 invoked by uid 99); 6 Jun 2006 14:17:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:17:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:17:12 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FncLw-0005HA-3X
	for java-user@lucene.apache.org; Tue, 06 Jun 2006 16:16:16 +0200
Received: from host217-35-101-254.in-addr.btopenworld.com ([217.35.101.254])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 16:16:16 +0200
Received: from lists by host217-35-101-254.in-addr.btopenworld.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 16:16:16 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  digby <lists@digby.net>
Subject:  Re: Lucene in Action
Date:  Tue, 06 Jun 2006 15:15:13 +0100
Lines: 4
Message-ID: <e642m4$9t9$1@sea.gmane.org>
References:  <20060606115529.57086.qmail@web25903.mail.ukl.yahoo.com> <20060606120234.5D79B187B1@mail.seseit.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host217-35-101-254.in-addr.btopenworld.com
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
In-Reply-To: <20060606120234.5D79B187B1@mail.seseit.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

LOL. I gotta get a Lucene License Plate Frame though.

Rob Staveley (Tom) wrote:
>  It is better value than the tee shirt http://www.cafepress.com/lucene/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 14:19:46 2006
Return-Path: <java-user-return-21161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1295 invoked from network); 6 Jun 2006 14:19:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 14:19:45 -0000
Received: (qmail 86762 invoked by uid 500); 6 Jun 2006 14:19:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86731 invoked by uid 500); 6 Jun 2006 14:19:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86720 invoked by uid 99); 6 Jun 2006 14:19:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:19:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:19:37 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 8403B187B3; Tue,  6 Jun 2006 14:19:15 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 11F54187B1
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 14:19:13 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: PHP and Lucene integration 
Date: Tue, 6 Jun 2006 15:19:13 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	boundary="----=_NextPart_000_0026_01C6897C.9123A460";
	protocol="application/x-pkcs7-signature";
	micalg=SHA1
In-Reply-To: <20060606132626.44271.qmail@web30512.mail.mud.yahoo.com>
Thread-Index: AcaJbOBYeIuzmFozQ7euWwHqjiIIqwABRUrw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060606141913.11F54187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0026_01C6897C.9123A460
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

For querying, we have PHP talking to our Java application through sockets
and XML. Queries are set up in PHP, creating an XML document which
corresponds to a subset of the subclasses of
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Query.html.
If we'd had the PHP skill set at the time, we'd probably have implemented
Lucene as a web service, but this works nicely enough and is portable. We
don't interface with the application that writes to the index in PHP -
that's left to a C++ client - but once again there is a simply protocol it
uses to talk through a socket.

-----Original Message-----
From: Alexander MASHTAKOV [mailto:amashtakov@yahoo.com] 
Sent: 06 June 2006 14:26
To: java-user@lucene.apache.org
Subject: PHP and Lucene integration 

Hi Folks,

I'm working on project that is going to have free-text search mechanism. The
project is completely based on open source technologies, such as MySQL and
PHP.
I'm reading about Lucene and think that this is probably the first
candidate. 

BTW, the (obvious) question is: "How to integrate PHP and Lucene ?". What
are possible ways to solve this task ?

Sure, this question was asked a lot of times ... btw need your opinion. Any
information, advices (cons and pros of a given approach), links are welcome.

Thank you a lot,
/Alexander

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0026_01C6897C.9123A460
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNjE0
MTkxM1owIwYJKoZIhvcNAQkEMRYEFMbBaNywo3uoXrAqjLqL8FIv5GT6MGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAFT4XVEk+eDO4/sk2gV42XKJWSs12BD7MZ0y
hd0FzZJ3KOGeN97F6ZzAmXF6hTciopFNH9gdXloJLWkCtvWzrQALSNUqm2Wbncd98I79hxrOlA+H
c0DSZe66w4SIWHNMToDpHjESN3okYJLt0ezH51C6VTPOkmeBeZNHQe/yLgy7aCqJLerJ1VVKb2lb
zpUFZeIc8Av5OmN1/CrhdvdDtG8e8ocCbtVHouu3+ODoN3A2c/n79Ek0iIv5Pbjpwek39SKJsMPa
AtcJPi30MNF6a9BG1IO8C0FT3hWexhXvs1QYQsdhwfq4p8MSIcHkkG/jPqfMrz9C1CHqLlvGtnrR
E9EAAAAAAAA=

------=_NextPart_000_0026_01C6897C.9123A460--


From java-user-return-21162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 14:30:18 2006
Return-Path: <java-user-return-21162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3875 invoked from network); 6 Jun 2006 14:30:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 14:30:18 -0000
Received: (qmail 15752 invoked by uid 500); 6 Jun 2006 14:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15491 invoked by uid 500); 6 Jun 2006 14:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15480 invoked by uid 99); 6 Jun 2006 14:30:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:30:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 07:30:09 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FncY9-0007kZ-5O
	for java-user@lucene.apache.org; Tue, 06 Jun 2006 16:28:53 +0200
Received: from host217-35-101-254.in-addr.btopenworld.com ([217.35.101.254])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 16:28:52 +0200
Received: from lists by host217-35-101-254.in-addr.btopenworld.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 16:28:52 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  digby <lists@digby.net>
Subject:  Re: searching in more than fields on document
Date:  Tue, 06 Jun 2006 15:26:26 +0100
Lines: 42
Message-ID: <e643b6$d18$1@sea.gmane.org>
References:  <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com> <1149585122.8159.3.camel@localhost> <e63j07$gb1$1@sea.gmane.org> <448570C8.5000900@curtin.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host217-35-101-254.in-addr.btopenworld.com
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
In-Reply-To: <448570C8.5000900@curtin.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Basically, I've got a small app which allows me to update fields in 
bunch of mysql tables using Hibernate. As I save each bean, I'm want to 
add it to the lucene index aswell. However, I want the app to be as 
generic as possible and at the moment it doesn't care what the bean is, 
as long as there's a hibernate mapping, it will understand what to do.

When the user is searching for the bean, I want them to be able to 
search over all the fields, but a) there will be lots of beans in the 
index with many different fields (so I can't know which ones to search 
for), and b) the user won't necessarily know the field names (so they 
can't specify them).

Having said that, I've just realised I could loop through all the 
properties defined in the hibernate mapping document and build up a 
MultiFieldQueryParser, but just concatenating all the bean's properties 
into a single field still seems like the easiest option (as well as 
having the proper fields so they can search if they know the field name).

Digby


Michael D. Curtin wrote:
> Not sure if I understand exactly what you want to do, but would the 
> "<field>:<keyword>" syntax that QueryParser understands work for you?  
> That is, you could send query text like
> 
>     f1:foo f2:foo f3:foo
> 
> to search for "foo" in any of the 3 fields.  If you need boolean 
> capabilities you can use parentheses, like so:
> 
>     +(f1:foo f2:foo f3:foo) +(f1:bar f2:bar f3:bar)
> 
> to mean "foo in some field, and bar in some field", or
> 
>     +(f1:foo f1:bar) +(f2:foo f2:bar) +(f3:foo f3:bar)
> 
> "foo or bar in all fields".
> 
> Would this work for ya?
> 
> --MDC


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 14:55:58 2006
Return-Path: <java-user-return-21163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15785 invoked from network); 6 Jun 2006 14:55:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 14:55:58 -0000
Received: (qmail 82517 invoked by uid 500); 6 Jun 2006 14:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82498 invoked by uid 500); 6 Jun 2006 14:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 43516 invoked by uid 99); 6 Jun 2006 14:40:21 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of petedaly@gmail.com designates 66.249.92.169 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mjbWz3s6C0kHJpw1uVxlQ1Z44k0KUvr4yEZQmM6cX68u50PYzJzz3dGbYclip2u58TkdbiehoFcOts/2QY33FoQJKpDbu2N8gPZjji683zhbFWVi9HUvVnazbk3wUEQaAvUPEOj6Yp+ky7CXukJSJB8RPxjGL42MncCljpb02aM=
Message-ID: <6f0a20e10606060739n2094f671s9ab0f54ac3dd24e2@mail.gmail.com>
Date: Tue, 6 Jun 2006 10:39:55 -0400
From: "Peter A. Daly" <petedaly@gmail.com>
Reply-To: petedaly@ix.netcom.com
To: java-user@lucene.apache.org, amashtakov@yahoo.com
Subject: Re: PHP and Lucene integration
In-Reply-To: <20060606132626.44271.qmail@web30512.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060606132626.44271.qmail@web30512.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Other replies mention SOLR.  I'm fairly new to SOLR, but have used
Lucene quite a bit.  Based on your situation, it certainly sounds like
SOLR is worth looking into.  I was able to convert a portion of one of
my sites from being SQL powered to SOLR powered in about a days work,
which includes learning SOLR.

FWIW, my first impressions are here:
http://www.budget-ha.com/lucene/solr/

-Pete

On 6/6/06, Alexander MASHTAKOV <amashtakov@yahoo.com> wrote:
> Hi Folks,
>
> I'm working on project that is going to have free-text
> search mechanism. The project is completely based on
> open source technologies, such as MySQL and PHP.
> I'm reading about Lucene and think that this is
> probably the first candidate.
>
> BTW, the (obvious) question is: "How to integrate PHP
> and Lucene ?". What are possible ways to solve this
> task ?
>
> Sure, this question was asked a lot of times ... btw
> need your opinion. Any information, advices (cons and
> pros of a given approach), links are welcome.
>
> Thank you a lot,
> /Alexander
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 15:05:08 2006
Return-Path: <java-user-return-21164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21614 invoked from network); 6 Jun 2006 15:05:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 15:05:08 -0000
Received: (qmail 3588 invoked by uid 500); 6 Jun 2006 15:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3556 invoked by uid 500); 6 Jun 2006 15:05:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3544 invoked by uid 99); 6 Jun 2006 15:05:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 08:05:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.93.194.218] (HELO serv4.vinras.com) (69.93.194.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 08:05:00 -0700
Received: from [220.224.68.146] (helo=[192.168.0.2])
	by serv4.vinras.com with esmtpa (Exim 4.52)
	id 1Fnd6i-0004YH-V3
	for java-user@lucene.apache.org; Tue, 06 Jun 2006 10:04:38 -0500
Message-ID: <44859A69.5070604@vinayras.com>
Date: Tue, 06 Jun 2006 20:38:25 +0530
From: Vinay Yadav <vinay@vinayras.com>
Reply-To:  vinay@vinayras.com
Organization: vinayRas Infotech
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: PHP and Lucene integration
References: <20060606132626.44271.qmail@web30512.mail.mud.yahoo.com>
In-Reply-To: <20060606132626.44271.qmail@web30512.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PopBeforeSMTPSenders: beldihsc,billing@vinras.com,edoctors,evaranas,gift2ind,info@ebharat.in,info@vinras.com,keturam,missionn,rashmi@vinayras.com,support@vinras.com,tpmandal,vinayras
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - serv4.vinras.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - vinayras.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Zend Search Framework can help you. Take a look at
http://framework.zend.com/manual/en/zend.search.html

-------------------------------------------------------------
  Zend_Search_Lucene is a general purpose text search engine written 
entirely in PHP 5. Since it stores its index on the filesystem and does 
not require a database server, it can add search capabilities to almost 
any PHP-driven website. Zend_Search_Lucene supports the following features:

     * Ranked searching - best results returned first
     * Many powerful query types: phrase queries, wildcard queries, 
proximity queries, range queries and more [5]
     * Search by specific field (e.g., title, author, contents)

Zend_Search_Lucene was derived from the Apache Lucene project. For more 
information on Lucene, visit http://lucene.apache.org/java/docs/.
-------------------------------------------------------------

I have implemented it at http://www.edoctors.in/search/. It works fine - 
  though we are still working on optimizing the index.

Hope this helps.

Regards
Vinay



Alexander MASHTAKOV wrote:
> Hi Folks,
> 
> I'm working on project that is going to have free-text
> search mechanism. The project is completely based on
> open source technologies, such as MySQL and PHP.
> I'm reading about Lucene and think that this is
> probably the first candidate. 
> 
> BTW, the (obvious) question is: "How to integrate PHP
> and Lucene ?". What are possible ways to solve this 
> task ?
> 
> Sure, this question was asked a lot of times ... btw
> need your opinion. Any information, advices (cons and
> pros of a given approach), links are welcome.
> 
> Thank you a lot,
> /Alexander
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


Mob: +91 9422113939

------------------------------------------------
Vinay Yadav			vinayRas Infotech
www.vinayras.com		Nagpur, India
------------------------------------------------
    Linux Consultant & PHP/MySQL Developer
------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 15:21:04 2006
Return-Path: <java-user-return-21165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29192 invoked from network); 6 Jun 2006 15:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 15:21:04 -0000
Received: (qmail 76197 invoked by uid 500); 6 Jun 2006 15:20:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76095 invoked by uid 500); 6 Jun 2006 15:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76046 invoked by uid 99); 6 Jun 2006 15:20:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 08:20:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 08:20:51 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FndLa-0002CE-K9
	for java-user@lucene.apache.org; Tue, 06 Jun 2006 17:19:58 +0200
Received: from host217-35-101-254.in-addr.btopenworld.com ([217.35.101.254])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 17:19:58 +0200
Received: from lists by host217-35-101-254.in-addr.btopenworld.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 17:19:58 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  digby <lists@digby.net>
Subject:  Re: searching in more than fields on document
Date:  Tue, 06 Jun 2006 16:19:30 +0100
Lines: 50
Message-ID: <e646ek$q3u$1@sea.gmane.org>
References:  <934F531A825AFF4F863658E2402E0647078C16B9@ho-kkj-msg3.in.niit.com> <1149585122.8159.3.camel@localhost> <e63j07$gb1$1@sea.gmane.org> <448570C8.5000900@curtin.com> <e643b6$d18$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host217-35-101-254.in-addr.btopenworld.com
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
In-Reply-To: <e643b6$d18$1@sea.gmane.org>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All sorted now. Of course, if I can loop through the properties of a 
bean to add them as fields to the document, then I can certainly do the 
same at query time to build the MultiFieldQueryParser. All done and 
working great.

Thanks for all your comments.

digby wrote:
> Basically, I've got a small app which allows me to update fields in 
> bunch of mysql tables using Hibernate. As I save each bean, I'm want to 
> add it to the lucene index aswell. However, I want the app to be as 
> generic as possible and at the moment it doesn't care what the bean is, 
> as long as there's a hibernate mapping, it will understand what to do.
> 
> When the user is searching for the bean, I want them to be able to 
> search over all the fields, but a) there will be lots of beans in the 
> index with many different fields (so I can't know which ones to search 
> for), and b) the user won't necessarily know the field names (so they 
> can't specify them).
> 
> Having said that, I've just realised I could loop through all the 
> properties defined in the hibernate mapping document and build up a 
> MultiFieldQueryParser, but just concatenating all the bean's properties 
> into a single field still seems like the easiest option (as well as 
> having the proper fields so they can search if they know the field name).
> 
> Digby
> 
> 
> Michael D. Curtin wrote:
>> Not sure if I understand exactly what you want to do, but would the 
>> "<field>:<keyword>" syntax that QueryParser understands work for you?  
>> That is, you could send query text like
>>
>>     f1:foo f2:foo f3:foo
>>
>> to search for "foo" in any of the 3 fields.  If you need boolean 
>> capabilities you can use parentheses, like so:
>>
>>     +(f1:foo f2:foo f3:foo) +(f1:bar f2:bar f3:bar)
>>
>> to mean "foo in some field, and bar in some field", or
>>
>>     +(f1:foo f1:bar) +(f2:foo f2:bar) +(f3:foo f3:bar)
>>
>> "foo or bar in all fields".
>>
>> Would this work for ya?
>>
>> --MDC


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 15:23:36 2006
Return-Path: <java-user-return-21166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30410 invoked from network); 6 Jun 2006 15:23:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 15:23:35 -0000
Received: (qmail 88417 invoked by uid 500); 6 Jun 2006 15:23:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88379 invoked by uid 500); 6 Jun 2006 15:23:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88330 invoked by uid 99); 6 Jun 2006 15:23:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 08:23:28 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.241] (HELO web30513.mail.mud.yahoo.com) (68.142.201.241)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 08:23:27 -0700
Received: (qmail 61941 invoked by uid 60001); 6 Jun 2006 15:23:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=KLznpyKxEruAPQtb68+buzucV82ZmOfm4yFjJkATv878zOfhvzbg2a9RAQx+fLQifSKdg/fWmr87aZbakWt6Biq6IIQyJmGs7ePKB3LhraR/EufLk/+DdP43tbvbLplc8ZN0xoNINHExvyCQoy82KOO4+QljIUSj0xowi+H7Uqk=  ;
Message-ID: <20060606152303.61934.qmail@web30513.mail.mud.yahoo.com>
Received: from [195.22.232.203] by web30513.mail.mud.yahoo.com via HTTP; Tue, 06 Jun 2006 08:23:01 PDT
Date: Tue, 6 Jun 2006 08:23:01 -0700 (PDT)
From: Alexander MASHTAKOV <amashtakov@yahoo.com>
Reply-To: amashtakov@yahoo.com
Subject: Re: PHP and Lucene integration
To: java-user@lucene.apache.org, vinay@vinayras.com
In-Reply-To: <44859A69.5070604@vinayras.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thank you for reply.
I've also had a look at Zend framework. But, at 
this moment they do not support unicode, 
which is a mandatory requirement in my case. 

The other thing - performance. In order
to run faster - it's necessary to have opened
index, rather then open and close it for each request.
Index updates have to be serialized somehow and after
the update, it has to be re-opened again.

IMO, for this purpose it's better to have Lucene
in "separate process" and implement some kind of
communication protocol between PHP and Java sides
(sockets, etc)

Regards,
/Alexander

--- Vinay Yadav <vinay@vinayras.com> wrote:

> Hi,
> 
> Zend Search Framework can help you. Take a look at
> http://framework.zend.com/manual/en/zend.search.html
> 
>
-------------------------------------------------------------
>   Zend_Search_Lucene is a general purpose text
> search engine written 
> entirely in PHP 5. Since it stores its index on the
> filesystem and does 
> not require a database server, it can add search
> capabilities to almost 
> any PHP-driven website. Zend_Search_Lucene supports
> the following features:
> 
>      * Ranked searching - best results returned
> first
>      * Many powerful query types: phrase queries,
> wildcard queries, 
> proximity queries, range queries and more [5]
>      * Search by specific field (e.g., title,
> author, contents)
> 
> Zend_Search_Lucene was derived from the Apache
> Lucene project. For more 
> information on Lucene, visit
> http://lucene.apache.org/java/docs/.
>
-------------------------------------------------------------
> 
> I have implemented it at
> http://www.edoctors.in/search/. It works fine - 
>   though we are still working on optimizing the
> index.
> 
> Hope this helps.
> 
> Regards
> Vinay
> 
> 
> 
> Alexander MASHTAKOV wrote:
> > Hi Folks,
> > 
> > I'm working on project that is going to have
> free-text
> > search mechanism. The project is completely based
> on
> > open source technologies, such as MySQL and PHP.
> > I'm reading about Lucene and think that this is
> > probably the first candidate. 
> > 
> > BTW, the (obvious) question is: "How to integrate
> PHP
> > and Lucene ?". What are possible ways to solve
> this 
> > task ?
> > 
> > Sure, this question was asked a lot of times ...
> btw
> > need your opinion. Any information, advices (cons
> and
> > pros of a given approach), links are welcome.
> > 
> > Thank you a lot,
> > /Alexander
> > 
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> > http://mail.yahoo.com 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> Mob: +91 9422113939
> 
> ------------------------------------------------
> Vinay Yadav			vinayRas Infotech
> www.vinayras.com		Nagpur, India
> ------------------------------------------------
>     Linux Consultant & PHP/MySQL Developer
> ------------------------------------------------
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 15:25:17 2006
Return-Path: <java-user-return-21167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32751 invoked from network); 6 Jun 2006 15:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 15:25:16 -0000
Received: (qmail 92396 invoked by uid 500); 6 Jun 2006 15:25:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92358 invoked by uid 500); 6 Jun 2006 15:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92347 invoked by uid 99); 6 Jun 2006 15:25:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 08:25:09 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.242] (HELO web30514.mail.mud.yahoo.com) (68.142.201.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 08:25:08 -0700
Received: (qmail 67957 invoked by uid 60001); 6 Jun 2006 15:24:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=FPJMxU6xwJMWGa6UvSlgFmaI6lWbJpU0FBQCfOoLEcvHfzMpLBylstWmm02LZe2T4cMx7T+kSvB0qP2iItZZE38wC7JWZGtH28z1n3wRZkiFQXaUvcVoB6ryBZW9/EO5pBJUwE5+aTFLN7OdHz850qDpcIPkD7FQslyyZK9N9ak=  ;
Message-ID: <20060606152447.67955.qmail@web30514.mail.mud.yahoo.com>
Received: from [195.22.232.203] by web30514.mail.mud.yahoo.com via HTTP; Tue, 06 Jun 2006 08:24:47 PDT
Date: Tue, 6 Jun 2006 08:24:47 -0700 (PDT)
From: Alexander MASHTAKOV <amashtakov@yahoo.com>
Reply-To: amashtakov@yahoo.com
Subject: Re: PHP and Lucene integration
To: java-user@lucene.apache.org
In-Reply-To: <20060606152303.61934.qmail@web30513.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Has anyone tried to solve this task ?

--- Alexander MASHTAKOV <amashtakov@yahoo.com> wrote:

> Hi,
> 
> Thank you for reply.
> I've also had a look at Zend framework. But, at 
> this moment they do not support unicode, 
> which is a mandatory requirement in my case. 
> 
> The other thing - performance. In order
> to run faster - it's necessary to have opened
> index, rather then open and close it for each
> request.
> Index updates have to be serialized somehow and
> after
> the update, it has to be re-opened again.
> 
> IMO, for this purpose it's better to have Lucene
> in "separate process" and implement some kind of
> communication protocol between PHP and Java sides
> (sockets, etc)
> 
> Regards,
> /Alexander
> 
> --- Vinay Yadav <vinay@vinayras.com> wrote:
> 
> > Hi,
> > 
> > Zend Search Framework can help you. Take a look at
> >
> http://framework.zend.com/manual/en/zend.search.html
> > 
> >
>
-------------------------------------------------------------
> >   Zend_Search_Lucene is a general purpose text
> > search engine written 
> > entirely in PHP 5. Since it stores its index on
> the
> > filesystem and does 
> > not require a database server, it can add search
> > capabilities to almost 
> > any PHP-driven website. Zend_Search_Lucene
> supports
> > the following features:
> > 
> >      * Ranked searching - best results returned
> > first
> >      * Many powerful query types: phrase queries,
> > wildcard queries, 
> > proximity queries, range queries and more [5]
> >      * Search by specific field (e.g., title,
> > author, contents)
> > 
> > Zend_Search_Lucene was derived from the Apache
> > Lucene project. For more 
> > information on Lucene, visit
> > http://lucene.apache.org/java/docs/.
> >
>
-------------------------------------------------------------
> > 
> > I have implemented it at
> > http://www.edoctors.in/search/. It works fine - 
> >   though we are still working on optimizing the
> > index.
> > 
> > Hope this helps.
> > 
> > Regards
> > Vinay
> > 
> > 
> > 
> > Alexander MASHTAKOV wrote:
> > > Hi Folks,
> > > 
> > > I'm working on project that is going to have
> > free-text
> > > search mechanism. The project is completely
> based
> > on
> > > open source technologies, such as MySQL and PHP.
> > > I'm reading about Lucene and think that this is
> > > probably the first candidate. 
> > > 
> > > BTW, the (obvious) question is: "How to
> integrate
> > PHP
> > > and Lucene ?". What are possible ways to solve
> > this 
> > > task ?
> > > 
> > > Sure, this question was asked a lot of times ...
> > btw
> > > need your opinion. Any information, advices
> (cons
> > and
> > > pros of a given approach), links are welcome.
> > > 
> > > Thank you a lot,
> > > /Alexander
> > > 
> > >
> __________________________________________________
> > > Do You Yahoo!?
> > > Tired of spam?  Yahoo! Mail has the best spam
> > protection around 
> > > http://mail.yahoo.com 
> > > 
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> > Mob: +91 9422113939
> > 
> > ------------------------------------------------
> > Vinay Yadav			vinayRas Infotech
> > www.vinayras.com		Nagpur, India
> > ------------------------------------------------
> >     Linux Consultant & PHP/MySQL Developer
> > ------------------------------------------------
> > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 16:24:11 2006
Return-Path: <java-user-return-21168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58975 invoked from network); 6 Jun 2006 16:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 16:24:11 -0000
Received: (qmail 13229 invoked by uid 500); 6 Jun 2006 16:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13205 invoked by uid 500); 6 Jun 2006 16:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 9378 invoked by uid 99); 6 Jun 2006 15:31:23 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of petedaly@gmail.com designates 66.249.92.169 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=B1m583E8KqgM25N+puSFKz7iIMY0SdFk1aGJkNIqFfN1bo3566HqVe4WgE3pziMf55xXdl8FzlLpNzSTmkrn3eXtayB2F1S3ay7tt9osRDV6eg0tSI2PYhEH4wO9k8dr5U8flxE5yO2K7+CLX7WQTw2DGQE1zi6Dxzfib3nD3rg=
Message-ID: <6f0a20e10606060831s60abe5b7ia2f525e2dd77398d@mail.gmail.com>
Date: Tue, 6 Jun 2006 11:31:01 -0400
From: "Peter A. Daly" <petedaly@gmail.com>
Reply-To: petedaly@ix.netcom.com
To: java-user@lucene.apache.org, amashtakov@yahoo.com
Subject: Re: PHP and Lucene integration
In-Reply-To: <20060606152303.61934.qmail@web30513.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44859A69.5070604@vinayras.com>
	 <20060606152303.61934.qmail@web30513.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/6/06, Alexander MASHTAKOV <amashtakov@yahoo.com> wrote:
> The other thing - performance. In order
> to run faster - it's necessary to have opened
> index, rather then open and close it for each request.
> Index updates have to be serialized somehow and after
> the update, it has to be re-opened again.

SOLR does a very nice job of handling all that.  It even "warms" new
IndexSearchers up by performing automated queries to prepopulate the
cache before a new IndexSearcher is used to respond to queries.

Unless there is an issue with it, SOLR sounds like a good solution for
what you need to do.

-Pete

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 17:12:34 2006
Return-Path: <java-user-return-21169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73334 invoked from network); 6 Jun 2006 17:12:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 17:12:33 -0000
Received: (qmail 72976 invoked by uid 500); 6 Jun 2006 17:12:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72449 invoked by uid 500); 6 Jun 2006 17:12:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72438 invoked by uid 99); 6 Jun 2006 17:12:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:12:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 10:12:26 -0700
Received: by ug-out-1314.google.com with SMTP id u2so1824365uge
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 10:12:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Q47iTxDP8UIX2OAIE9qHfGmcmLf11AYqv/3iLGc//XmtMLuuMfz1Xj9yQuWNHY3Ed/7x2ktdA2c5P/pMfYIiqhDQwlrD3jtfdhOLbvikLz+1Mg94/41CCqmstoByp+YIMbM46Ixr5LEd1sUgmAQHnYxvxApAiM+n4UWrakaIGqo=
Received: by 10.78.21.7 with SMTP id 7mr1234098huu;
        Tue, 06 Jun 2006 10:12:04 -0700 (PDT)
Received: by 10.78.58.8 with HTTP; Tue, 6 Jun 2006 10:12:04 -0700 (PDT)
Message-ID: <8c0c601f0606061012m589b1183u3d67e04bfbc0a0bd@mail.gmail.com>
Date: Tue, 6 Jun 2006 19:12:04 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org, amashtakov@yahoo.com
Subject: Re: PHP and Lucene integration
In-Reply-To: <20060606152303.61934.qmail@web30513.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44859A69.5070604@vinayras.com>
	 <20060606152303.61934.qmail@web30513.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I'm currently doing just that: using the php-java bridge. Here the
goal is to integrate Java-Lucene with a php4 based CMS (eZ publish),
so the Zend framework is not an answer (and premature imho). The code
we've written is a bit CMS specific, but you should be able to to do
the same quite fast.

About having an indexreader open all the time, it should be feasible
(the php-jave bridge can be installed in a number of ways) but have
not tacled that yet.

Good luck

paul

On 6/6/06, Alexander MASHTAKOV <amashtakov@yahoo.com> wrote:
> Hi,
>
> Thank you for reply.
> I've also had a look at Zend framework. But, at
> this moment they do not support unicode,
> which is a mandatory requirement in my case.
>
> The other thing - performance. In order
> to run faster - it's necessary to have opened
> index, rather then open and close it for each request.
> Index updates have to be serialized somehow and after
> the update, it has to be re-opened again.
>
> IMO, for this purpose it's better to have Lucene
> in "separate process" and implement some kind of
> communication protocol between PHP and Java sides
> (sockets, etc)
>
> Regards,
> /Alexander
>
> --- Vinay Yadav <vinay@vinayras.com> wrote:
>
> > Hi,
> >
> > Zend Search Framework can help you. Take a look at
> > http://framework.zend.com/manual/en/zend.search.html
> >
> >
> -------------------------------------------------------------
> >   Zend_Search_Lucene is a general purpose text
> > search engine written
> > entirely in PHP 5. Since it stores its index on the
> > filesystem and does
> > not require a database server, it can add search
> > capabilities to almost
> > any PHP-driven website. Zend_Search_Lucene supports
> > the following features:
> >
> >      * Ranked searching - best results returned
> > first
> >      * Many powerful query types: phrase queries,
> > wildcard queries,
> > proximity queries, range queries and more [5]
> >      * Search by specific field (e.g., title,
> > author, contents)
> >
> > Zend_Search_Lucene was derived from the Apache
> > Lucene project. For more
> > information on Lucene, visit
> > http://lucene.apache.org/java/docs/.
> >
> -------------------------------------------------------------
> >
> > I have implemented it at
> > http://www.edoctors.in/search/. It works fine -
> >   though we are still working on optimizing the
> > index.
> >
> > Hope this helps.
> >
> > Regards
> > Vinay
> >
> >
> >
> > Alexander MASHTAKOV wrote:
> > > Hi Folks,
> > >
> > > I'm working on project that is going to have
> > free-text
> > > search mechanism. The project is completely based
> > on
> > > open source technologies, such as MySQL and PHP.
> > > I'm reading about Lucene and think that this is
> > > probably the first candidate.
> > >
> > > BTW, the (obvious) question is: "How to integrate
> > PHP
> > > and Lucene ?". What are possible ways to solve
> > this
> > > task ?
> > >
> > > Sure, this question was asked a lot of times ...
> > btw
> > > need your opinion. Any information, advices (cons
> > and
> > > pros of a given approach), links are welcome.
> > >
> > > Thank you a lot,
> > > /Alexander
> > >
> > > __________________________________________________
> > > Do You Yahoo!?
> > > Tired of spam?  Yahoo! Mail has the best spam
> > protection around
> > > http://mail.yahoo.com
> > >
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
> > Mob: +91 9422113939
> >
> > ------------------------------------------------
> > Vinay Yadav                   vinayRas Infotech
> > www.vinayras.com              Nagpur, India
> > ------------------------------------------------
> >     Linux Consultant & PHP/MySQL Developer
> > ------------------------------------------------
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 19:13:36 2006
Return-Path: <java-user-return-21170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14869 invoked from network); 6 Jun 2006 19:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 19:13:36 -0000
Received: (qmail 91911 invoked by uid 500); 6 Jun 2006 19:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91883 invoked by uid 500); 6 Jun 2006 19:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91865 invoked by uid 99); 6 Jun 2006 19:13:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 12:13:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 12:13:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BC83C5B77B; Tue,  6 Jun 2006 12:12:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B44EA7F403
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 12:12:56 -0700 (PDT)
Date: Tue, 6 Jun 2006 12:12:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL
In-Reply-To: <20060606114058.85C91187B1@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0606061208300.4420@hal.rescomp.berkeley.edu>
References: <20060606114058.85C91187B1@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) have you tried forcing a threaddump of the JVM when it hangs to see
what it's doing?  (i don't remember which signal it is off the top of my
head, but even if it's not responding to SIGTERM it might respond to that)

: SIGTERM. I guess I'd feel more confident about using SIGKILL, if I knew that
: the uninterruptible hanged thread was creating a Document, which I could
: interrupt without corrupting the index, rather than adding the document to
: the index, which is liable to result in orphaned files and/or a corrupted
: index, if killed.

2) It's possible that the thread is doing both (creating and adding) at
the same time ... if you are Constructing documents using Fields that
contain Readers you get back from convertors which stream data from
complex documents as needed, then DocumentWriter may have started to write
your document, gotten to a Field with a Reader, and then your convertor
may be choking on something within the source document while it tries to
stream data to that Reader.


	...just a theory.


: -----Original Message-----
: From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: Sent: 06 June 2006 10:54
: To: java-user@lucene.apache.org
: Subject: Re: Compound / non-compound index files and SIGKILL
:
: If your content handlers should respond quickly then you should move
: indexing process to separate thread and maintain items in queue.
:
: Rob Staveley (Tom) wrote:
: > This is a real eye-opener, Volodymyr. Many thanks. I guess that means
: > that my orphan-producing hangs must be addDocument() calls, and not in
: > the content handlers, as I'd previously assumed. I'll put some debug
: > before and after my addDocument() calls to confirm (and point my
: > writer's infoStream to System.out).
: >
: > -----Original Message-----
: > From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: > Sent: 05 June 2006 18:33
: > To: java-user@lucene.apache.org
: > Subject: Re: Compound / non-compound index files and SIGKILL
: >
: > Hi.
: > My five cents :)
: >
: > It might be helpful to know how lucene is working with compound files.
: > When segment is flushed to disk it is written uncompound and after
: > that is merged into single .cfs file. If you don't change default
: > setting for using compound files (which is on) this is only place (I
: > guess) for these files to appear.
: >
: > If you're working with large indexes, than merging segments can take a
: > while (Maybe here is your problem? :) ) (merging happens on
: > addDocument() call).  If you will kill indexing process during such
: > merge you'll get many orphaned files...
: >
: > You can just run optimize on this index. You'll get three files:
: > segments, deletable, <segment>.cfs; you can look name of segment in
: > 'segments' file. Everything else is 'garbage' - you can delete it.
: >
: >
: > Rob Staveley (Tom) wrote:
: >
: >> I've been indexing live data into a compound index from an MTA. I'm
: >> resolving a bunch of problems unrelated to Lucene (disparate hangs in
: >> my content handlers). When I get a hang, I typically need to kill my
: >> daemon, alas more often than not using kill -9 (SIGKILL).
: >>
: >> However, these SIGKILLs are leaving large temporary(?) files, which I
: >>
: > guess
: >
: >> are non-compound index files transiently extracted from the working
: >> .cfs
: >> files:
: >>
: >> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
: >> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
: >> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
: >>
: >> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
: >> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
: >> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
: >>
: >> They are left intact after restarting my daemon. Presumably they are
: >> not treated as being part of the compound index. I see no
: >> corresponding .cfs file for them.
: >>
: >> As a consequence of these - I suspect - I am getting a very large
: >> overall disk requirement for my index, presumably because of
: >> replicated field
: >>
: > data.
: >
: >> My guess is that the field data in the orphaned .fdt files needs to
: >> be regenerated.
: >>
: >> In another index directory from a previous test run (again with
: >> SIGKILLs),
: >>
: > I
: >
: >> have 98 GB of index files, with only 12 BG devoted to compound files
: >> for
: >>
: > the
: >
: >> field index (.cfs). The rest of the disk space is used by orphaned
: >> uncompounded index files; I see 51 GB devoted to uncompounded field
: >> data (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted
: >> to term frequencies (.frq).
: >>
: >> Here's my question:
: >>
: >> How can I attempt to merge these orphaned into the compound index,
: >> using IndexWriter.addIndexes(), or would I be foolish attempting this?
: >>
: >>
: >
: >
:
: --
: regards,
: Volodymyr Bychkoviak
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 19:20:27 2006
Return-Path: <java-user-return-21171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21745 invoked from network); 6 Jun 2006 19:20:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 19:20:27 -0000
Received: (qmail 2893 invoked by uid 500); 6 Jun 2006 19:20:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2865 invoked by uid 500); 6 Jun 2006 19:20:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2854 invoked by uid 99); 6 Jun 2006 19:20:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 12:20:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 12:20:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4672A5B776; Tue,  6 Jun 2006 12:19:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 393D47F403
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 12:19:58 -0700 (PDT)
Date: Tue, 6 Jun 2006 12:19:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action
In-Reply-To: <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
Message-ID: <Pine.LNX.4.58.0606061216390.4420@hal.rescomp.berkeley.edu>
References: <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: v2.0 might be a little while in coming (checkout Otis' blog
: http://www.jroller.com/page/otis?catname=%2FLucene).

Great Googly-Moogly Otis! .. how many blogs do you have?

	http://lucenebook.com/blog/
	http://www.jroller.com/page/otis
	http://blog.simpy.com/




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 19:27:47 2006
Return-Path: <java-user-return-21172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25594 invoked from network); 6 Jun 2006 19:27:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 19:27:47 -0000
Received: (qmail 9492 invoked by uid 500); 6 Jun 2006 19:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9456 invoked by uid 500); 6 Jun 2006 19:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9445 invoked by uid 99); 6 Jun 2006 19:27:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 12:27:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO wx-out-0102.google.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 12:27:40 -0700
Received: by wx-out-0102.google.com with SMTP id s16so365wxc
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 12:27:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ldal4VCfpTKiGSsXHLpJyQx8dawa/Qyer2Xol2SjNZ7Os4+PJVIb03pRbqCtkTjJypBIjy/xTiYqgpyUUTN2d3ifCvIJPka8tYOImjMK7cG+eGwktdOaao/wsQlT6TL6BTkPltyev+pYiW/GJRDBdOweCNc9r+8oxCi7wN0EbTQ=
Received: by 10.70.27.12 with SMTP id a12mr7933926wxa;
        Tue, 06 Jun 2006 12:27:19 -0700 (PDT)
Received: by 10.70.53.16 with HTTP; Tue, 6 Jun 2006 12:27:18 -0700 (PDT)
Message-ID: <b487c1370606061227x7868cbf4xc044aee8b1033c22@mail.gmail.com>
Date: Tue, 6 Jun 2006 15:27:19 -0400
From: "Beady Geraghty" <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action
In-Reply-To: <e63jn9$iuu$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_206_8526871.1149622039021"
References: <e63jn9$iuu$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_206_8526871.1149622039021
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I find it very useful.  I hope you will too.



On 6/6/06, digby <lists@digby.net> wrote:
>
> Does everyone recommend getting this book? I'm just starting out with
> Lucene and like to have a book beside me as well as the web / this
> mailing list, but the book looks quite old now, has a 1-2 month delivery
> wait time here in the UK and is quite expensive. Is it worth waiting for
> a new edition perhaps?
>
> Thanks,
>
> Digby
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_206_8526871.1149622039021--

From java-user-return-21173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 20:30:49 2006
Return-Path: <java-user-return-21173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40615 invoked from network); 6 Jun 2006 20:30:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:30:48 -0000
Received: (qmail 78438 invoked by uid 500); 6 Jun 2006 20:30:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78410 invoked by uid 500); 6 Jun 2006 20:30:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78277 invoked by uid 99); 6 Jun 2006 20:30:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:30:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:30:36 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1FniBe-0007MM-Ot
	for java-user@lucene.apache.org; Tue, 06 Jun 2006 22:30:02 +0200
Received: from dsl081-241-052.sfo1.dsl.speakeasy.net ([64.81.241.52])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 22:30:02 +0200
Received: from chris by dsl081-241-052.sfo1.dsl.speakeasy.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 22:30:02 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Chris Nokleberg <chris@sixlegs.com>
Subject:  Avoiding ParseExceptions
Date:  Tue, 06 Jun 2006 13:24:53 -0700
Lines: 22
Message-ID:  <pan.2006.06.06.20.24.52.76293@sixlegs.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: dsl081-241-052.sfo1.dsl.speakeasy.net
User-Agent: Pan/0.14.2 (This is not a psychotic episode. It's a cleansing moment of clarity.)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I am using the QueryParser with a StandardAnalyzer. I would like to avoid
or auto-correct anything that would lead to a ParseException. For example,
I don't think you can get a parse exception from Google--even if you omit
a closing quote it looks like it just closes it for you (please correct me
if you know otherwise).

Does anyone have suggestions on how to accomplish this? I imagine it could
require a mix of techniques:
- pre-processing the input string (e.g. I currently escape colons)
- catching generated exceptions and using the exception info to correct
  the string and retry the query
- a modified QueryParser?

The next step is probably to compile a list of all the ways a
ParseException can be generated, but I figured I should ask if this idea
has any merit first.

Thanks,
Chris



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 20:35:12 2006
Return-Path: <java-user-return-21174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42110 invoked from network); 6 Jun 2006 20:35:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 20:35:12 -0000
Received: (qmail 86706 invoked by uid 500); 6 Jun 2006 20:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86617 invoked by uid 500); 6 Jun 2006 20:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86427 invoked by uid 99); 6 Jun 2006 20:35:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:35:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 13:35:01 -0700
Received: by nz-out-0102.google.com with SMTP id 13so13622nzp
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 13:34:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DkoJk0ip6st8dKM7uz+bPy6qJqQq6/cm+ZPLOSNCmQJRBmZ+t0GAoNyTV14TpLZ3699XAzzj1Jf1YZWEAUYIOV0efNo59XdRfK5m0UBt9FhJufGCd7xf4cs1I3hNnKC+V16QGcTmYO2AWwY+eU4UREmrJFkukDf/+DDf/m+n2Ug=
Received: by 10.37.18.64 with SMTP id v64mr15625nzi;
        Tue, 06 Jun 2006 13:34:41 -0700 (PDT)
Received: by 10.37.20.32 with HTTP; Tue, 6 Jun 2006 13:34:41 -0700 (PDT)
Message-ID: <359a92830606061334l1d9c7524t42cd47843a575264@mail.gmail.com>
Date: Tue, 6 Jun 2006 16:34:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action
In-Reply-To: <Pine.LNX.4.58.0606061216390.4420@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6438_25828035.1149626081332"
References: <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
	 <Pine.LNX.4.58.0606061216390.4420@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6438_25828035.1149626081332
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
>
> Great Googly-Moogly Otis! .. how many blogs do you have?
>

Are you as old as I am or do you just like old Rock-n-Roll? If you're
getting this from the Apostrophe/Overnight Sensation album (Frank Zappa),
you can also listen to my all-time favorite song "I'm the slime".

Erick
P.S. Haven't owned a TV in 30+ years.

P.P.S. This will make no sense whatsoever to anyone who hasn't listened to
the song.

------=_Part_6438_25828035.1149626081332--

From java-user-return-21175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 21:01:52 2006
Return-Path: <java-user-return-21175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50658 invoked from network); 6 Jun 2006 21:01:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:01:52 -0000
Received: (qmail 19681 invoked by uid 500); 6 Jun 2006 21:01:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19653 invoked by uid 500); 6 Jun 2006 21:01:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19641 invoked by uid 99); 6 Jun 2006 21:01:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:01:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:01:44 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])by mailgw3a.lmco.com (LM-6) with ESMTP id k56L1MX5010530for <java-user@lucene.apache.org>; Tue, 6 Jun 2006 17:01:23 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0J0G00701IEAOI@lmco.com> for java-user@lucene.apache.org; Tue, 06 Jun 2006 17:01:22 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0J0G0092SIEAED@lmco.com> for java-user@lucene.apache.org; Tue, 06 Jun 2006 17:01:22 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Tue,
 06 Jun 2006 17:01:22 -0400
Date: Tue, 06 Jun 2006 17:01:22 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Avoiding ParseExceptions
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3B54@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Avoiding ParseExceptions
Thread-Index: AcaJqBuq1KMWkn2NSBuZDiAVc/Wn3gAA88xA
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 06 Jun 2006 21:01:22.0662 (UTC) FILETIME=[5DBC0060:01C689AC]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Basically you need to pre-process the query and rewrite it in a way you
think it should be. Then catch the parse exception if you failed to
rewrite the query and display an error message on the screen (something
like - This kind of query is not supported, please rephrase your query).

HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: news [mailto:news@sea.gmane.org] On Behalf Of Chris Nokleberg
Sent: Tuesday, June 06, 2006 4:25 PM
To: java-user@lucene.apache.org
Subject: Avoiding ParseExceptions

Hi all,

I am using the QueryParser with a StandardAnalyzer. I would like to
avoid or auto-correct anything that would lead to a ParseException. For
example, I don't think you can get a parse exception from Google--even
if you omit a closing quote it looks like it just closes it for you
(please correct me if you know otherwise).

Does anyone have suggestions on how to accomplish this? I imagine it
could require a mix of techniques:
- pre-processing the input string (e.g. I currently escape colons)
- catching generated exceptions and using the exception info to correct
  the string and retry the query
- a modified QueryParser?

The next step is probably to compile a list of all the ways a
ParseException can be generated, but I figured I should ask if this idea
has any merit first.

Thanks,
Chris



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 21:02:19 2006
Return-Path: <java-user-return-21176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50772 invoked from network); 6 Jun 2006 21:02:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:02:18 -0000
Received: (qmail 21069 invoked by uid 500); 6 Jun 2006 21:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21042 invoked by uid 500); 6 Jun 2006 21:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21031 invoked by uid 99); 6 Jun 2006 21:02:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:02:12 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.196 as permitted sender)
Received: from [64.233.162.196] (HELO nz-out-0102.google.com) (64.233.162.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:02:11 -0700
Received: by nz-out-0102.google.com with SMTP id 13so18693nzp
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 14:01:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B6/ms4/cOb5w7iPrYEDHfjwJIjFrqNqceNF/oIaVZsnkyWGDiwgF8CgxKTZ1KMyOYaPRKJ1RUs8I6fve4TiyVpOcnK+bOXPWoZlTThMyplsJ1IcjzCre1OyROU0V7Sq4Rp/hKYUvQOsRbw9UqQ4KiXcfAO3YfAOaJd2ZyvZR1WU=
Received: by 10.36.250.71 with SMTP id x71mr51120nzh;
        Tue, 06 Jun 2006 14:01:51 -0700 (PDT)
Received: by 10.37.20.32 with HTTP; Tue, 6 Jun 2006 14:01:51 -0700 (PDT)
Message-ID: <359a92830606061401g3fc493bdoecb03dd65790b5d0@mail.gmail.com>
Date: Tue, 6 Jun 2006 17:01:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Avoiding ParseExceptions
In-Reply-To: <pan.2006.06.06.20.24.52.76293@sixlegs.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6866_29436993.1149627711256"
References: <pan.2006.06.06.20.24.52.76293@sixlegs.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6866_29436993.1149627711256
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That way madness lies......

I suspect that you'll find that there are a few rules you can apply that
will allow you to "fix" a lot of queries, but... is that really what you
want to do? For instance, a user types

"a and or not b"

Whatever you do, it isn't what the *next* user who types something like that
means.

That said, the exception thrown by the parser gives some information about
what was wrong, but nothing that I'd show a user except perhaps where the
offending token was.

Also, no matter what you fix up, there'll be case + 1 that you didn't think
about.

I suppose the real question is "how many liberties are you willing to take
with the user's query and will the user notice?" Google just wants to return
data, man. Correctness isn't something they really expect users to complain
about. They're better off just simplifying the query until it parses.

If your users expect predictable returns from known data, you can take fewer
liberties than if the users just want *something* back. In the latter case,
ignore my comments and give them something <G>. In the former case, you'll
have to deal with users who submit queries and *don't* get back what they
expect because you "fixed" something in a way they didn't expect. IMO, it's
better to just let these users know the query was mal-formed and perhaps a
hint about why.

If you fix the query, I'd really, really, really recommend that you take a
minimalist approach. Something like:
Chunk the query through the parser
If (parses  OK) return results
Else Strip out everything (e.g. and, or, not, parens, etc) and let the
defaults take over.

It depends on what you want your users to experience and how much time you
want to spend explaining that the program is really behaving as you expect
<G>.....

Of course, this all may be irrelevent depending upon your problem
space.......

Best
Erick

------=_Part_6866_29436993.1149627711256--

From java-user-return-21177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 21:57:36 2006
Return-Path: <java-user-return-21177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73723 invoked from network); 6 Jun 2006 21:57:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 21:57:36 -0000
Received: (qmail 87181 invoked by uid 500); 6 Jun 2006 21:57:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87145 invoked by uid 500); 6 Jun 2006 21:57:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87134 invoked by uid 99); 6 Jun 2006 21:57:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:57:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 14:57:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 454915B775; Tue,  6 Jun 2006 14:57:06 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3D4267F403
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 14:57:06 -0700 (PDT)
Date: Tue, 6 Jun 2006 14:57:06 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Avoiding ParseExceptions
In-Reply-To: <359a92830606061401g3fc493bdoecb03dd65790b5d0@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606061452220.10301@hal.rescomp.berkeley.edu>
References: <pan.2006.06.06.20.24.52.76293@sixlegs.com>
 <359a92830606061401g3fc493bdoecb03dd65790b5d0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


It really depends on what syntax you want to support ... if you just want
basic term matching and do't want to let hte user specify field names, or
boosts or phrases, or ranges, or wildcards -- then just escape the
entirestring, that should make it impossible to get a parse exception.

I took an approach similar to that, by escaping all of the "special'
characters except '+', '-', and '"', and then stripping out all quotes if
there was a non even amount ... this gave me a simplified version of the
Lucene syntax that was fairly safe.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 22:03:52 2006
Return-Path: <java-user-return-21178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76726 invoked from network); 6 Jun 2006 22:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 22:03:52 -0000
Received: (qmail 1527 invoked by uid 500); 6 Jun 2006 22:03:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 849 invoked by uid 500); 6 Jun 2006 22:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 838 invoked by uid 99); 6 Jun 2006 22:03:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:03:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:03:45 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1C6A15B77C; Tue,  6 Jun 2006 15:03:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 02F167F403
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 15:03:24 -0700 (PDT)
Date: Tue, 6 Jun 2006 15:03:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Browse Functionality
In-Reply-To: <4727704.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0606061500300.12859@hal.rescomp.berkeley.edu>
References: <4727704.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Generally the best approach for restricting what results a person sees is
with a Filter ... if you do this, then you can get a BitSet from the
Filter which tells you everything they are allowed to see, if you then
also build a BitSet for each of the Terms you wantto "browse" by (again:
a Filter can help you with this), the size of the intersection of those
two BitSets will give you the number you want.

this is frequenctly refered to as "facet counts" "faceted searching"
and "category counts" ... you might find more info in the archives using
those search terms.

: Date: Mon, 5 Jun 2006 22:40:58 -0700 (PDT)
: From: muraalee <muraalee@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Browse Functionality
:
:
: Hi ,
: I am looking at exposing a "Browse" like functionality using lucene. Assume
: this scenario, a user Browses a Field ( Untokenized one like Book Title )
: and he sees a list of "terms" [Book titles ] and their associated doc Hits (
: Number of articles / documents this term appears in ). I believe this can be
: done bit straightforward.
:
:
:
: Here is the twist.  Since all the users don't have access to all the Books,
: basically i want to bind the "terms" by a Filter which ensures that they see
: only the "terms" that belongs to their subscribed "books".  For search, i
: have modelled the above functionality using "QueryFilter", where i "OR" the
: query, with the list of Books.
:
:
: Is there an elegant way to attack this one ? Appreciate your inputs.
:
: thanks
: ~Murali
:
:
: --
: View this message in context: http://www.nabble.com/Browse-Functionality-t1739829.html#a4727704
: Sent from the Lucene - Java Users forum at Nabble.com.
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 22:10:36 2006
Return-Path: <java-user-return-21179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79289 invoked from network); 6 Jun 2006 22:10:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 22:10:36 -0000
Received: (qmail 11232 invoked by uid 500); 6 Jun 2006 22:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11198 invoked by uid 500); 6 Jun 2006 22:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11184 invoked by uid 99); 6 Jun 2006 22:10:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:10:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:10:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D130B5B77F; Tue,  6 Jun 2006 15:10:06 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CBF117F403
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 15:10:06 -0700 (PDT)
Date: Tue, 6 Jun 2006 15:10:06 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action
In-Reply-To: <359a92830606061334l1d9c7524t42cd47843a575264@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606061507420.12859@hal.rescomp.berkeley.edu>
References: <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
  <Pine.LNX.4.58.0606061216390.4420@hal.rescomp.berkeley.edu>
 <359a92830606061334l1d9c7524t42cd47843a575264@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: > Great Googly-Moogly Otis! .. how many blogs do you have?

: Are you as old as I am or do you just like old Rock-n-Roll? If you're
: getting this from the Apostrophe/Overnight Sensation album (Frank Zappa),
: you can also listen to my all-time favorite song "I'm the slime".

Sorry, I was refrencing a Snickers Commercial from a few years back.

: P.S. Haven't owned a TV in 30+ years.
:
: P.P.S. This will make no sense whatsoever to anyone who hasn't listened to
: the song.

That's funny, because *my* comment won't will make no sense whatsoever to
anyone who hasn't watched a large volume of TV in the last 15 years.






-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 22:35:40 2006
Return-Path: <java-user-return-21180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85323 invoked from network); 6 Jun 2006 22:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 22:35:40 -0000
Received: (qmail 35782 invoked by uid 500); 6 Jun 2006 22:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35752 invoked by uid 500); 6 Jun 2006 22:35:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35741 invoked by uid 99); 6 Jun 2006 22:35:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:35:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 15:35:33 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1Fnk8c-0005Kb-6Q
	for java-user@lucene.apache.org; Wed, 07 Jun 2006 00:35:02 +0200
Received: from c-69-140-22-230.hsd1.md.comcast.net ([69.140.22.230])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 07 Jun 2006 00:35:02 +0200
Received: from mturn1 by c-69-140-22-230.hsd1.md.comcast.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 07 Jun 2006 00:35:02 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  michael turner <mturn1@comcast.net>
Subject:  Lucene and learning search 
Date: Tue, 6 Jun 2006 22:23:00 +0000 (UTC)
Lines: 21
Message-ID:  <loom.20060607T002200-542@post.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 69.140.22.230 (Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.4) Gecko/20060508 Firefox/1.5.0.4)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Everyone!

Working on a project that requires a Search query similiar to what is 
seen on"amazon.com" in that after searching for and displaying an item, 
the system shows:

"Users that have searched for "AAAAA" AND "BBBBB" have also searched 
for "CCCC".

Where "BBBBB"  and   "CCCC" are other related entities.


1. Has anyone used or heard of this algorithm? 
2. Is Lucene capable of executing "learning searches"?
3. Is Lucene capable of executing suggested Searches?

Any assistance rendered would be appreciated.

Thanks in advance.

javaman


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 23:02:39 2006
Return-Path: <java-user-return-21181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96094 invoked from network); 6 Jun 2006 23:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 23:02:38 -0000
Received: (qmail 60888 invoked by uid 500); 6 Jun 2006 23:02:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60612 invoked by uid 500); 6 Jun 2006 23:02:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60601 invoked by uid 99); 6 Jun 2006 23:02:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:02:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:02:32 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7CADE5B77C; Tue,  6 Jun 2006 16:01:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 788967F403
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 16:01:57 -0700 (PDT)
Date: Tue, 6 Jun 2006 16:01:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene and learning search 
In-Reply-To: <loom.20060607T002200-542@post.gmane.org>
Message-ID: <Pine.LNX.4.58.0606061558260.12859@hal.rescomp.berkeley.edu>
References: <loom.20060607T002200-542@post.gmane.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


This isn't really a "learning search" issue as much as an issue of session
tracking and finding patterns.  Eliminate search from the discussion and
the same questions could be a applied to generic product/document viewing...

"users who looked at products AAA and BBB also looked at product CCC"

That's a a little out of Lucene's scope.


: Date: Tue, 6 Jun 2006 22:23:00 +0000 (UTC)
: From: michael turner <mturn1@comcast.net>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Lucene and learning search
:
: Hi Everyone!
:
: Working on a project that requires a Search query similiar to what is
: seen on"amazon.com" in that after searching for and displaying an item,
: the system shows:
:
: "Users that have searched for "AAAAA" AND "BBBBB" have also searched
: for "CCCC".
:
: Where "BBBBB"  and   "CCCC" are other related entities.
:
:
: 1. Has anyone used or heard of this algorithm?
: 2. Is Lucene capable of executing "learning searches"?
: 3. Is Lucene capable of executing suggested Searches?
:
: Any assistance rendered would be appreciated.
:
: Thanks in advance.
:
: javaman
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 06 23:35:49 2006
Return-Path: <java-user-return-21182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7598 invoked from network); 6 Jun 2006 23:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2006 23:35:48 -0000
Received: (qmail 82572 invoked by uid 500); 6 Jun 2006 23:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82548 invoked by uid 500); 6 Jun 2006 23:35:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82535 invoked by uid 99); 6 Jun 2006 23:35:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:35:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO nz-out-0102.google.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 16:35:41 -0700
Received: by nz-out-0102.google.com with SMTP id 13so41723nzp
        for <java-user@lucene.apache.org>; Tue, 06 Jun 2006 16:35:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jExmOE1KkA/VGR1oAE80Yo3qkQQ/Lt/tMdXXntrPX/rv0C+T3RAmNmD28sFAvKW817tZFzOiZ1xjvR6SW9iPFQv3CNDV/XpPmiN+gLC6icOSv3PsVPPXpPKupkvi92MzW70LNdH6GVUvsUl5bL/vYEUTkKQmuCIT44kq7g5iq2w=
Received: by 10.36.220.73 with SMTP id s73mr105634nzg;
        Tue, 06 Jun 2006 16:35:20 -0700 (PDT)
Received: by 10.37.20.32 with HTTP; Tue, 6 Jun 2006 16:35:20 -0700 (PDT)
Message-ID: <359a92830606061635v3db96708w1d7c73eaf4b61ee1@mail.gmail.com>
Date: Tue, 6 Jun 2006 19:35:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action
In-Reply-To: <Pine.LNX.4.58.0606061507420.12859@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com>
	 <Pine.LNX.4.58.0606061216390.4420@hal.rescomp.berkeley.edu>
	 <359a92830606061334l1d9c7524t42cd47843a575264@mail.gmail.com>
	 <Pine.LNX.4.58.0606061507420.12859@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There are about a zillion things that just go whoosh, right over my
head in my TV-less state <G>....

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 00:45:53 2006
Return-Path: <java-user-return-21183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35994 invoked from network); 7 Jun 2006 00:45:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 00:45:53 -0000
Received: (qmail 56476 invoked by uid 500); 7 Jun 2006 00:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55720 invoked by uid 500); 7 Jun 2006 00:45:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55709 invoked by uid 99); 7 Jun 2006 00:45:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 17:45:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.231.31.101] (HELO bulbasaur.wynnesystems.com) (216.231.31.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 17:45:45 -0700
X-SEF-Processed: 5_0_0_910__2006_06_06_17_49_56
X-SEF-37DF5EA0-ABAA-4294-A0CB-59A2F25D2F34: 1
Received: from Unknown [10.35.10.5] by bulbasaur.wynnesystems.com - SurfControl E-mail Filter (5.0); Tue, 06 Jun 2006 17:49:54 -0700
Content-class: urn:content-classes:message
Subject: question with spellchecker
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C689CC.4AC695E0"
Date: Tue, 6 Jun 2006 17:49:52 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <D2D2FEE335CE304C81F17C83626158E2E86A71@wsdmnsvr>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: question with spellchecker
Thread-Index: AcaJzElIhInJhqIUTeiexEHz2U7e7Q==
From: "Van Nguyen" <vnguyen@wynnesystems.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C689CC.4AC695E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm implementing a spellchecker in my search and have a question.=0D=0A=20=0D=
=0AAfter creating the index and spellchecker index, I pass in the word=0D=0A=
"ducted tape" to search (I am expecting "duct tape" back). =20=0D=0A=20=0D=0A=
I've played around with boosting the prefixes and suffixes, setting the=0D=0A=
accuracy, passing in an IndexReader and field to search on and setting=0D=0A=
'morePopular' to true, but my search never returns "duct tape". =20=0D=0A =0D=
=0AFrom the SpellChecker class, I see that for the word "ducted", it tries=0D=
=0Ato find the=20=0D=0A=20=0D=0Astart3:duc^2.0 end3:ted gram3:duc gram3:uct=
 gram3:cte gram3:ted=20=0D=0Astart4:duct^2.0 end4:cted gram4:duct gram4:uct=
e gram4:cted=0D=0A=20=0D=0AI checked to see if the word "duct" even exist i=
n the spellchecker index=0D=0Aand it does.  I specified a number of similar=
 words to return that=0D=0Aexceeds the number of results I get from a above=
 mentioned query to see=0D=0Aif I can see all the terms that it the spellch=
ecker is suggesting; but I=0D=0Ado not see "duct" as a word that it is even=
 suggested.=0D=0A=20=0D=0AThe list it returns is:=0D=0A=20=0D=0A[dotted, co=
ated, ductile, plated, vented, mounted, united, listed,=0D=0Aductape, reduc=
ed]=0D=0A=20=0D=0AAnyone have suggestions as to how to proceed from here=3F=
=3F=0D=0A=20=0D=0AVan=0D=0AThis communication and any documents, files, or =
previous electronic mail messages attached to it constitute=0D=0Aan electro=
nic communication within the scope of the Electronic Communication Privacy =
Act, 18 USCA 2510.=20=0D=0AThis communication may contain non-public, confi=
dential, or legally privileged information intended for the=20=0D=0Asole us=
e of the designated recipient(s). The unlawful interception, use or disclos=
ure of such information is=20=0D=0Astrictly prohibited under 18 USCA 2511 a=
nd any applicable laws.=0D=0A
------_=_NextPart_001_01C689CC.4AC695E0--


From java-user-return-21184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 01:19:16 2006
Return-Path: <java-user-return-21184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43921 invoked from network); 7 Jun 2006 01:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 01:19:16 -0000
Received: (qmail 80945 invoked by uid 500); 7 Jun 2006 01:19:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80918 invoked by uid 500); 7 Jun 2006 01:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80906 invoked by uid 99); 7 Jun 2006 01:19:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 18:19:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 18:19:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0D28433CB16; Tue,  6 Jun 2006 21:18:49 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9532233CB16
	for <java-user@lucene.apache.org>; Tue,  6 Jun 2006 21:18:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <359a92830606061334l1d9c7524t42cd47843a575264@mail.gmail.com>
References: <OF73025135.04D02CDE-ON80257185.00385621-80257185.0038BE02@SAAConsultants.com> <Pine.LNX.4.58.0606061216390.4420@hal.rescomp.berkeley.edu> <359a92830606061334l1d9c7524t42cd47843a575264@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6B6FB9FE-B1E8-41C0-A1CF-95DB4D836A82@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene in Action
Date: Tue, 6 Jun 2006 21:18:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 6, 2006, at 4:34 PM, Erick Erickson wrote:
>> Great Googly-Moogly Otis! .. how many blogs do you have?
>>
>
> Are you as old as I am or do you just like old Rock-n-Roll? If you're
> getting this from the Apostrophe/Overnight Sensation album (Frank  
> Zappa),

Well, to be petty, it's from Nanook Rubs It, but you got the right  
album :)  "I pounced
And I pounced again.... "

> you can also listen to my all-time favorite song "I'm the slime".

I'm more than happy to admit that I too had the Zappa connection

> I'm the best you can get
> Have you guessed me yet?
> I'm the slime oozin' out
> From your TV set
>
> You will obey me while I lead you
> And eat the garbage that I feed you
> Until the day that we don't need you
> Don't go for help . . . no one will heed you
> Your mind is totally controlled
> It has been stuffed into my mold
> And you will do as you are told
> Until the rights to you are sold


> P.S. Haven't owned a TV in 30+ years.

I could easily live without the one cluttering up my living room space.

> P.P.S. This will make no sense whatsoever to anyone who hasn't  
> listened to
> the song.

And for those that have heard the song, over and over and over again,  
it still doesn't make any sense!  :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 02:12:55 2006
Return-Path: <java-user-return-21185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58576 invoked from network); 7 Jun 2006 02:12:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 02:12:55 -0000
Received: (qmail 26958 invoked by uid 500); 7 Jun 2006 02:12:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26929 invoked by uid 500); 7 Jun 2006 02:12:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26918 invoked by uid 99); 7 Jun 2006 02:12:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 19:12:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 19:12:49 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FnnWr-0002m1-TB
	for java-user@lucene.apache.org; Wed, 07 Jun 2006 04:12:17 +0200
Received: from dsl081-241-052.sfo1.dsl.speakeasy.net ([64.81.241.52])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 07 Jun 2006 04:12:17 +0200
Received: from chris by dsl081-241-052.sfo1.dsl.speakeasy.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 07 Jun 2006 04:12:17 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Chris Nokleberg <chris@sixlegs.com>
Subject:  Re: Avoiding ParseExceptions
Date:  Tue, 06 Jun 2006 19:13:10 -0700
Lines: 46
Message-ID:  <pan.2006.06.07.02.13.09.647657@sixlegs.com>
References:  <pan.2006.06.06.20.24.52.76293@sixlegs.com> <359a92830606061401g3fc493bdoecb03dd65790b5d0@mail.gmail.com> <Pine.LNX.4.58.0606061452220.10301@hal.rescomp.berkeley.edu>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: dsl081-241-052.sfo1.dsl.speakeasy.net
User-Agent: Pan/0.14.2 (This is not a psychotic episode. It's a cleansing moment of clarity.)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 06 Jun 2006 14:57:06 -0700, Chris Hostetter wrote:
> I took an approach similar to that, by escaping all of the "special'
> characters except '+', '-', and '"', and then stripping out all quotes if
> there was a non even amount ... this gave me a simplified version of the
> Lucene syntax that was fairly safe.

Actually that is exactly what I wanted (allow '+', '-', and '"' only).

I've attached the code I am using. I'd appreciate it if anyone can find
remaining problems. The escape method should take any string and the
result should be passable to QueryParser without causing a ParseException.

The logic is:
- Lowercase string to remove support for AND and OR (AFAICT they are not
  otherwise escapable)
- Use QueryParser.escape to escape all special characters
- Use a regex to "unescape" only +, -, and '"'
- Count the number of quotes. If it is odd, add a space and a closing
  quote to the end of the query.

It would be nice if QueryParser had methods which would let you choose
which of its features you wanted to enable. I understand that due to the
nature of JavaCC that might be hard to do, though.

Thanks,
Chris

  private static final Pattern unescape =
    Pattern.compile("\\\\([+\\-\"])");

  private static String escape(String s) {
      s = s.toLowerCase();
      s = QueryParser.escape(s);
      s = unescape.matcher(s).replaceAll("$1");
      if ((count(s, '"') & 1) != 0)
          s += " \"";
      return s;
  }

  private static int count(String s, char c) {
      int count = 0;
      for (int i = 0; i < s.length(); i++)
          if (s.charAt(i) == c)
              count++;
      return count;
  }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 04:08:10 2006
Return-Path: <java-user-return-21186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77818 invoked from network); 7 Jun 2006 04:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 04:08:10 -0000
Received: (qmail 30973 invoked by uid 500); 7 Jun 2006 04:08:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30927 invoked by uid 500); 7 Jun 2006 04:08:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30916 invoked by uid 99); 7 Jun 2006 04:08:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 21:08:03 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 21:08:02 -0700
Received: from [10.122.6.231] (gprs01.swisscom-mobile.ch [193.247.250.1])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k5747FY4027422
	for <java-user@lucene.apache.org>; Wed, 7 Jun 2006 06:07:26 +0200
Received: from 127.0.0.1 (AVG SMTP 7.1.394 [268.8.2/356]); Wed, 07 Jun 2006 06:07:07 +0200
Message-ID: <448650EA.6070708@isb-sib.ch>
Date: Wed, 07 Jun 2006 06:07:06 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Avoiding ParseExceptions
References: <pan.2006.06.06.20.24.52.76293@sixlegs.com>
In-Reply-To: <pan.2006.06.06.20.24.52.76293@sixlegs.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Nokleberg wrote:
> I am using the QueryParser with a StandardAnalyzer. I would like to avoid
> or auto-correct anything that would lead to a ParseException. For example,
> I don't think you can get a parse exception from Google--even if you omit
> a closing quote it looks like it just closes it for you (please correct me
> if you know otherwise).

Would definitely be nice if the QueryParser had both a strict and a lenient 
mode. If you used the latter, it would of course wise to reflect the actual 
executed query back to the user, so it's clear what's going on.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 06:01:27 2006
Return-Path: <java-user-return-21187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 958 invoked from network); 7 Jun 2006 06:01:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 06:01:26 -0000
Received: (qmail 15049 invoked by uid 500); 7 Jun 2006 06:01:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15019 invoked by uid 500); 7 Jun 2006 06:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15008 invoked by uid 99); 7 Jun 2006 06:01:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jun 2006 23:01:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.250] (HELO web25912.mail.ukl.yahoo.com) (217.146.176.250)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jun 2006 23:01:16 -0700
Received: (qmail 94943 invoked by uid 60001); 7 Jun 2006 06:00:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=j2uoGYqQPiU7y34L7Rt9/i+aF4iKtegWRQo2FH++KMgE+sZdC3LU8jiLourJ6oAwDdS2kJd8Mrl9K/uz0GBBCdWZh5IFweYms4TWpRoWOzYaT7AWEbPzyqqnWh7TMSF0jk6//nOJpHXhhwOFKWv4NiWSC0IQ9xMELqd1gapc35Q=  ;
Message-ID: <20060607060055.94941.qmail@web25912.mail.ukl.yahoo.com>
Received: from [84.131.246.77] by web25912.mail.ukl.yahoo.com via HTTP; Wed, 07 Jun 2006 06:00:55 GMT
Date: Wed, 7 Jun 2006 06:00:55 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Reply-To: eks dev <eksdev@yahoo.co.uk>
Subject: Re: question with spellchecker
To: java-user@lucene.apache.org
In-Reply-To: <D2D2FEE335CE304C81F17C83626158E2E86A71@wsdmnsvr>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

try your query like ((ducted^1000 duct~2) +tape)
Or maybe (duct* +tape)
or even better you could try to do some stemming (Porter stemmer should get rid of these ed-suffixes) and some of the above

if this does not help, have a look at lingpipe spellChecker class as this looks like exactly what you need.

----- Original Message ----
From: Van Nguyen <vnguyen@wynnesystems.com>
To: java-user@lucene.apache.org
Sent: Wednesday, 7 June, 2006 2:49:52 AM
Subject: question with spellchecker

I'm implementing a spellchecker in my search and have a question.

 

After creating the index and spellchecker index, I pass in the word

"ducted tape" to search (I am expecting "duct tape" back).  

 

I've played around with boosting the prefixes and suffixes, setting the

accuracy, passing in an IndexReader and field to search on and setting

'morePopular' to true, but my search never returns "duct tape".  

 

>From the SpellChecker class, I see that for the word "ducted", it tries

to find the 

 

start3:duc^2.0 end3:ted gram3:duc gram3:uct gram3:cte gram3:ted 

start4:duct^2.0 end4:cted gram4:duct gram4:ucte gram4:cted

 

I checked to see if the word "duct" even exist in the spellchecker index

and it does.  I specified a number of similar words to return that

exceeds the number of results I get from a above mentioned query to see

if I can see all the terms that it the spellchecker is suggesting; but I

do not see "duct" as a word that it is even suggested.

 

The list it returns is:

 

[dotted, coated, ductile, plated, vented, mounted, united, listed,

ductape, reduced]

 

Anyone have suggestions as to how to proceed from here??

 

Van

This communication and any documents, files, or previous electronic mail messages attached to it constitute

an electronic communication within the scope of the Electronic Communication Privacy Act, 18 USCA 2510. 

This communication may contain non-public, confidential, or legally privileged information intended for the 

sole use of the designated recipient(s). The unlawful interception, use or disclosure of such information is 

strictly prohibited under 18 USCA 2511 and any applicable laws.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 09:05:06 2006
Return-Path: <java-user-return-21188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59735 invoked from network); 7 Jun 2006 09:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 09:05:05 -0000
Received: (qmail 62654 invoked by uid 500); 7 Jun 2006 09:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62624 invoked by uid 500); 7 Jun 2006 09:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62613 invoked by uid 99); 7 Jun 2006 09:04:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 02:04:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 02:04:56 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id BC368187B3; Wed,  7 Jun 2006 09:04:33 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id B841E187B1
	for <java-user@lucene.apache.org>; Wed,  7 Jun 2006 09:04:28 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Wed, 7 Jun 2006 10:04:32 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0040_01C68A19.C5676160"
In-Reply-To: <Pine.LNX.4.58.0606061208300.4420@hal.rescomp.berkeley.edu>
Thread-Index: AcaJnU/mGQXqIwlHQ4OmntmdRsGAdQAYCnEg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060607090428.B841E187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0040_01C68A19.C5676160
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

> (1)... threaddump

It hadn't occurred to me that I'd be able to do that, Chris. It took me a
little while to figure out how, because I'm running the application as a
daemon (i.e. using nohup, teeing standard output to a log file and
redirecting stdout and stderr to /dev/null), which counts out Ctrl+'\'.
SIGQUIT wasn't playing ball for me, and then I discovered
http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jstack.html which seems
to be what's needed for Sun 1.5 + Linux. 

However, I'm not sure what to make of:
--------8<--------
Thread 3740: (state = BLOCKED)
- java.lang.Object.wait(long) @bci=0 (Interpreted frame)
- java.lang.Object.wait() @bci=2, line=474 (Compiled frame)
Error occurred during stack walking:
java.lang.NullPointerException
at sun.jvm.hotspot.runtime.Frame.addressOfStackSlot(Frame.java:214)
at
sun.jvm.hotspot.runtime.x86.X86Frame.getEntryFrameCallWrapper(X86Frame.java:
452)
at sun.jvm.hotspot.runtime.Frame.entryFrameIsFirst(Frame.java:379)
at sun.jvm.hotspot.runtime.Frame.isFirstFrame(Frame.java:154)
at sun.jvm.hotspot.runtime.VFrame.sender(VFrame.java:109)
at sun.jvm.hotspot.runtime.VFrame.javaSender(VFrame.java:134)
at sun.jvm.hotspot.tools.StackTrace.run(StackTrace.java:50)
at sun.jvm.hotspot.tools.JStack.run(JStack.java:41)
at sun.jvm.hotspot.tools.Tool.start(Tool.java:204)
at sun.jvm.hotspot.tools.JStack.main(JStack.java:58)
--------8<--------

> (2)... It's possible that the thread is doing both (creating and adding)
at the same time

Does that mean that the PipedReader in the following might persist beyond
the scope of this code, and be read from only when the Lucene document is
added to the index?

--------8<--------
	final PipedWriter pw = new PipedWriter();
	Thread t = new Thread() {
		public void run() {
			try {
				// Index the body text in the Lucene
document, 
				// but do not store it
				doc.add(
					new Field(
						"body"
						,new PipedReader(pw)
					)
				);
			}
			catch (IOException e) {
				e.printStackTrace();
			}
		}
	};
	t.start();

	// Process an input stream for the content handler.
	// Tokens extracted from the stream are written to
	// the piped writer and hence made available to the
	// PipedReader used in the "body" field constructor.
	process(is,pw);	

	// Close the output stream to get the PipedReader to see EOF
	pw.close();

	// Join the thread to wait for the field to be added to the
	// document
	t.join();

	// Now go on to add other fields (metadata), and then add
	// the document to the index...
--------8<--------


-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 06 June 2006 20:13
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL


1) have you tried forcing a threaddump of the JVM when it hangs to see what
it's doing?  (i don't remember which signal it is off the top of my head,
but even if it's not responding to SIGTERM it might respond to that)

: SIGTERM. I guess I'd feel more confident about using SIGKILL, if I knew
that
: the uninterruptible hanged thread was creating a Document, which I could
: interrupt without corrupting the index, rather than adding the document to
: the index, which is liable to result in orphaned files and/or a corrupted
: index, if killed.

2) It's possible that the thread is doing both (creating and adding) at the
same time ... if you are Constructing documents using Fields that contain
Readers you get back from convertors which stream data from complex
documents as needed, then DocumentWriter may have started to write your
document, gotten to a Field with a Reader, and then your convertor may be
choking on something within the source document while it tries to stream
data to that Reader.


	...just a theory.


: -----Original Message-----
: From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: Sent: 06 June 2006 10:54
: To: java-user@lucene.apache.org
: Subject: Re: Compound / non-compound index files and SIGKILL
:
: If your content handlers should respond quickly then you should move
: indexing process to separate thread and maintain items in queue.
:
: Rob Staveley (Tom) wrote:
: > This is a real eye-opener, Volodymyr. Many thanks. I guess that means
: > that my orphan-producing hangs must be addDocument() calls, and not in
: > the content handlers, as I'd previously assumed. I'll put some debug
: > before and after my addDocument() calls to confirm (and point my
: > writer's infoStream to System.out).
: >
: > -----Original Message-----
: > From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: > Sent: 05 June 2006 18:33
: > To: java-user@lucene.apache.org
: > Subject: Re: Compound / non-compound index files and SIGKILL
: >
: > Hi.
: > My five cents :)
: >
: > It might be helpful to know how lucene is working with compound files.
: > When segment is flushed to disk it is written uncompound and after
: > that is merged into single .cfs file. If you don't change default
: > setting for using compound files (which is on) this is only place (I
: > guess) for these files to appear.
: >
: > If you're working with large indexes, than merging segments can take a
: > while (Maybe here is your problem? :) ) (merging happens on
: > addDocument() call).  If you will kill indexing process during such
: > merge you'll get many orphaned files...
: >
: > You can just run optimize on this index. You'll get three files:
: > segments, deletable, <segment>.cfs; you can look name of segment in
: > 'segments' file. Everything else is 'garbage' - you can delete it.
: >
: >
: > Rob Staveley (Tom) wrote:
: >
: >> I've been indexing live data into a compound index from an MTA. I'm
: >> resolving a bunch of problems unrelated to Lucene (disparate hangs in
: >> my content handlers). When I get a hang, I typically need to kill my
: >> daemon, alas more often than not using kill -9 (SIGKILL).
: >>
: >> However, these SIGKILLs are leaving large temporary(?) files, which I
: >>
: > guess
: >
: >> are non-compound index files transiently extracted from the working
: >> .cfs
: >> files:
: >>
: >> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
: >> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
: >> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
: >>
: >> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
: >> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
: >> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
: >>
: >> They are left intact after restarting my daemon. Presumably they are
: >> not treated as being part of the compound index. I see no
: >> corresponding .cfs file for them.
: >>
: >> As a consequence of these - I suspect - I am getting a very large
: >> overall disk requirement for my index, presumably because of
: >> replicated field
: >>
: > data.
: >
: >> My guess is that the field data in the orphaned .fdt files needs to
: >> be regenerated.
: >>
: >> In another index directory from a previous test run (again with
: >> SIGKILLs),
: >>
: > I
: >
: >> have 98 GB of index files, with only 12 BG devoted to compound files
: >> for
: >>
: > the
: >
: >> field index (.cfs). The rest of the disk space is used by orphaned
: >> uncompounded index files; I see 51 GB devoted to uncompounded field
: >> data (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted
: >> to term frequencies (.frq).
: >>
: >> Here's my question:
: >>
: >> How can I attempt to merge these orphaned into the compound index,
: >> using IndexWriter.addIndexes(), or would I be foolish attempting this?
: >>
: >>
: >
: >
:
: --
: regards,
: Volodymyr Bychkoviak
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0040_01C68A19.C5676160
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNzA5
MDQzMVowIwYJKoZIhvcNAQkEMRYEFC66xkW5DCxojWmWEVbb29zMb8HLMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBABXYUck5+w6jfhFljCkppgbioqecqBsRRC4n
HviLjhVjTLTph8ZV9MPheI7Lutqzox017hlrmkiNbbq/awM1XyaNLpOn4zVeX7KnfQ4/j6YqmYLO
io4n+mDdP/Yha8CfkpAtHd605sFf3FOPoNiK/Cg3aLZxIMqjXktQKurazc5ONPp2wfMy84pMgguG
fm2okQnhSbgU7lzp7ovWgDz44Iy+eAiG8lmIpK7Sg3Eou++lIoLFxqpw68RxhPdcUfODtelLK9Ab
jovmEaPkEjOBEO0nmDcHveVQ51M3WOvkw4Id1VugAD5h2paxgjbci9E8NWUgjI2n8hdUxTa30lKF
v0IAAAAAAAA=

------=_NextPart_000_0040_01C68A19.C5676160--


From java-user-return-21189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 09:16:42 2006
Return-Path: <java-user-return-21189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64885 invoked from network); 7 Jun 2006 09:16:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 09:16:41 -0000
Received: (qmail 80407 invoked by uid 500); 7 Jun 2006 09:16:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80368 invoked by uid 500); 7 Jun 2006 09:16:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80338 invoked by uid 99); 7 Jun 2006 09:16:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 02:16:33 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Jun 2006 02:16:31 -0700
Received: (qmail 39902 invoked by uid 60001); 7 Jun 2006 09:16:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=SZDl1V/F82oKoDZSEPZV5Es21zploqCy9A4ZpAe5/6u+LyRAlE6b7mwKkEG7NlWI6/ZTaYkh/c/elASCprVNOO+GOh98AsXTmJBGKhHskXlQjKHlNh+W9+Eld0c0LLmQ1hbL6D/nbWFUrLQ6/EGNn8XaPYsEt9I79StFf6AoszI=  ;
Message-ID: <20060607091610.39900.qmail@web26007.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26007.mail.ukl.yahoo.com via HTTP; Wed, 07 Jun 2006 10:16:10 BST
Date: Wed, 7 Jun 2006 10:16:10 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: question with spellchecker
To: java-user@lucene.apache.org
In-Reply-To: <20060607060055.94941.qmail@web25912.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think the problem in your particular example is the
suggestion software has no consideration of context.

I've been playing with context-sensitive suggestions
recently which take a bunch of validated (ie existing)
words (eg "tape") and use this to help shortlist
alternatives for an unknown or partially typed word
(eg ducted)

This has potential applications in spell checking and
as-you-type query completion.

The approach is quite simple but effective - You use
your choice of code to produce a list of candidate
terms  (eg FuzzyTermEnum or some form of Soundex or
PrefixQuery) THEN take the large list of candidate
terms produced and compare their usage in relation to
the context of  words you already know eg "tape".
In practice this means that TermDocs for the candidate
term are used to construct a doc bitset which is
compared with a doc bitset produced from all other
terms which make up the context. The level of
intersection between these bitsets can be used to help
sensibly rank the "duct" and "ducked" candidates in
relation to "tape". Do they co-occur often?

[psuedo code]
BitSet contextDocs= matchKnownTerms();
float numContextMatches=contextDocs.cardinality();
for all candidate terms for unknown term
{
  BitSet candMatches =createBitset(candTerm)
  float numCandMatches=candMatches.cardinality();
  float
numSharedMatches=candMatches.and(contextDocs).cardinality()
  float contextRelatedness =numSharedMatches/
   (
     (numCandMatches+numContextMatches)
      -numSharedMatches
   )
  //collect candidate Terms that have high combo of 
  //contextRelatedness and unknown term similarity (eg
low edit distance) 
}

There are quite a few optimisations I've added to this
basic pseudo code in my implementation. When I get
some time I'll package this code up and contribute it
but for now this psuedo code may give some pointers
which help to provide a solution.


Cheers,
Mark


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 10:25:45 2006
Return-Path: <java-user-return-21190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87430 invoked from network); 7 Jun 2006 10:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 10:25:45 -0000
Received: (qmail 78668 invoked by uid 500); 7 Jun 2006 10:25:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78625 invoked by uid 500); 7 Jun 2006 10:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78614 invoked by uid 99); 7 Jun 2006 10:25:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 03:25:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 03:25:38 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 4486981500006011 for java-user@lucene.apache.org; Wed, 7 Jun 2006 12:25:14 +0200
Subject: Re: Lucene and learning search
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To:  <loom.20060607T002200-542@post.gmane.org>
References:  <loom.20060607T002200-542@post.gmane.org>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Wed, 07 Jun 2006 12:25:09 +0200
Message-Id: <1149675909.8159.109.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 22:23 +0000, michael turner wrote:
> Working on a project that requires a Search query similiar to what is 
> seen on"amazon.com" in that after searching for and displaying an item, 
> the system shows:
> 
> "Users that have searched for "AAAAA" AND "BBBBB" have also searched 
> for "CCCC".
> 
> Where "BBBBB"  and   "CCCC" are other related entities.
> 
> 
> 1. Has anyone used or heard of this algorithm? 

A quick and dirty reply:

Actually, Amazon does not track the queries, they track what customers
buy. The "algorithm" you are looking for is collaborative filtering. 

You would probably want to build a classification scheme much more
detailed than the formula 1-a facets in order to get good results.

To find such clusters based on searches is tricky as you only want to
take the results that was relevant in to account.

If you only want to find some statistics of how people refine or change
their queries to find what they are looking for, then you need to know
the original query and the end query, and be really sure that the
subject of the search did not change. Overlap all sessions you saved and
use some statistical analysis library (perhaps Weka can help you?) to
get the results.

It might also be possible to implement using hidden markov models.

You really have to tell us more about the application you add Lucene to
in order to get a good reply on how to implement a suggestion scheme.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 11:47:08 2006
Return-Path: <java-user-return-21191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10844 invoked from network); 7 Jun 2006 11:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 11:47:08 -0000
Received: (qmail 63710 invoked by uid 500); 7 Jun 2006 11:47:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63514 invoked by uid 500); 7 Jun 2006 11:47:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63502 invoked by uid 99); 7 Jun 2006 11:47:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 04:47:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [67.15.12.79] (HELO plesk.ev1servers.net) (67.15.12.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 04:46:59 -0700
Received: (qmail 30152 invoked from network); 7 Jun 2006 11:02:07 -0000
Received: from unknown (HELO user) (85.154.11.73)
  by carline-group.com with SMTP; 7 Jun 2006 11:02:07 -0000
From: "Kiran Joisher" <kiran.joisher@recreatesolutions.com>
To: <java-user@lucene.apache.org>
Subject: java.io.IOException: Cannot delete _1d.fdt
Date: Wed, 7 Jun 2006 15:58:20 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <1149675909.8159.109.camel@localhost>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Thread-Index: AcaKFoRKJbFswOqcSjaHxGpHsf60vQAEVIOw
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060607114700.7A80410FB00A@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am working on a struts application using lucene for indexing mysql
database. Whenever I rebuild the application and deploy in tomcat and try to
rebuild the index from scratch I have to shutdown tomcat and then restart it
again. In case I don't do this I get IOException while creating instance of
IndexWriter

indexWriter = new IndexWriter(indexDir, new PhoneticAnalyzer(new Soundex()),
true);

Stack Trace is as follows:-

java.io.IOException: Cannot delete _1d.fdt
        at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:195)
        at org.apache.lucene.store.FSDirectory.init(FSDirectory.java:176)
        at
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:141)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:225)

I feel its due to some stale lock file in the temp folder of #tomcat_home#.
How do I get rid of this file without having to shutdown the tomcat. 

I am sorry if this is a repeated question.

Thanks in advance,
--Kiran
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 13:46:04 2006
Return-Path: <java-user-return-21192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61962 invoked from network); 7 Jun 2006 13:46:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 13:46:03 -0000
Received: (qmail 57968 invoked by uid 500); 7 Jun 2006 13:45:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57942 invoked by uid 500); 7 Jun 2006 13:45:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57931 invoked by uid 99); 7 Jun 2006 13:45:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 06:45:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 06:45:55 -0700
Received: from ewiex01.ewi.utwente.nl (ewiex02.ewi.utwente.nl [130.89.10.121])
	by denhaag.ewi.utwente.nl (8.13.6/8.13.6) with ESMTP id k57DjVE5015905
	for <java-user@lucene.apache.org>; Wed, 7 Jun 2006 15:45:31 +0200 (MEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Different scoring mechanism
Date: Wed, 7 Jun 2006 15:45:28 +0200
Message-ID: <5DD2165A95E801438DAA9C1E0957EB5E012E0216@ewiex02.dynamic.ewi.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Different scoring mechanism
Thread-Index: AcaKOKIAxGlBnIGhTE+ATPWhj8zO9w==
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.299 () ALL_TRUSTED,BAYES_00,J_CHICKENPOX_56
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Wed, 07 Jun 2006 15:45:32 +0200 (MEST)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am trying to implement an alternative scoring mechanism in Lucene.
A query of multiple terms is represented as a BooleanQuery with one or =
more Occur.SHOULD clauses.

The scoring for a document is very simple:
- Assign a score for each queryterm.=20
   ! If a document does not contain a queryterm this score can be larger =
or smaller than 0 !
- Sum these scores.

I run into problems in case a document does not contain a query term. =
See the following sample results with query "a" or "b".

Document1: x b p j x s n f e p t h q y t b q d x=20
Calculated score: -0.9631268
Score should be:
-2.7171288 =3D Sum of:
  -1.754002 =3D score for "a", term frequency 0
  -0.9631268 =3D score for "b", term frequency 2

Document2: r b g a p i h i u x w p f m p m j c m d=20
Calculated score: -2.6189766
Score should be:
-2.6189766 =3D Sum of:
  -1.3109605 =3D score for "a", term frequency 1;=20
  -1.3080161 =3D score for "b", term frequency 1;

The calculated score for document2 is as I have in mind. However, the =
score for documment1 is incorrect. The BooleanScorer seems to ignore the =
score for term "a"; as it doesn't exist in the document.

Any ideas how to solve this?

Regards,
Dolf






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 15:01:48 2006
Return-Path: <java-user-return-21193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91115 invoked from network); 7 Jun 2006 15:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 15:01:47 -0000
Received: (qmail 35802 invoked by uid 500); 7 Jun 2006 15:01:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35767 invoked by uid 500); 7 Jun 2006 15:01:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35755 invoked by uid 99); 7 Jun 2006 15:01:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 08:01:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.222.193.2] (HELO sidekick.frogspace.net) (216.222.193.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 08:01:38 -0700
Received: from [199.222.113.178] (helo=aroushlt)
	by sidekick.frogspace.net with esmtp (Exim 4.44)
	id 1FnzX3-0003fq-8u
	for java-user@lucene.apache.org; Wed, 07 Jun 2006 08:01:17 -0700
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: Converting SQL statement to Lucene query
Date: Wed, 7 Jun 2006 11:01:15 -0400
Message-ID: <06d301c68a43$3ac3f300$d4824109@aroushlt>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
Thread-Index: AcaKQzji427E1QJrSQGEFFK0kQDbpw==
X-SA-Exim-Connect-IP: 199.222.113.178
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi folks,

Has anyone done or do you know of an API library that will take SQL
statement and convert them to Lucene Query?  I know not every SQL statement
can become a Lucene Query but that's OK as long as the library will
highlight them.

Thanks!

-- George


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 15:04:47 2006
Return-Path: <java-user-return-21194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92039 invoked from network); 7 Jun 2006 15:04:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 15:04:47 -0000
Received: (qmail 41626 invoked by uid 500); 7 Jun 2006 15:04:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41599 invoked by uid 500); 7 Jun 2006 15:04:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41588 invoked by uid 99); 7 Jun 2006 15:04:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 08:04:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 08:04:37 -0700
Received: by py-out-1112.google.com with SMTP id c30so228570pyc
        for <java-user@lucene.apache.org>; Wed, 07 Jun 2006 08:04:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rVNj6Zxxj2L+g0xA7GMe8nEOOL3YMlq5Xd8ACQf6YNaMc1dkKXQPkHR+DfbZoJM/UYSmCGb30WpzNmKVtOmbN3QR11NMwdC8dCKQIBGYvbKh6fR2LX8SVeNa2YWn5QwcZ5JU/J2nn4nqkIQ1QvO12q6JtlPwnhO2e25wqcpgHog=
Received: by 10.35.40.10 with SMTP id s10mr816724pyj;
        Wed, 07 Jun 2006 08:04:16 -0700 (PDT)
Received: by 10.35.60.14 with HTTP; Wed, 7 Jun 2006 08:04:16 -0700 (PDT)
Message-ID: <e994873a0606070804k3e36029bxb7443cbf450a4555@mail.gmail.com>
Date: Wed, 7 Jun 2006 11:04:16 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MMapDirectory vs RAMDirectory
In-Reply-To: <4484C6DC.9020009@nuix.com.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4436_26692321.1149692656696"
References: <429c032d0605280109i7f0c8392x6d0017a5f6b70aac@mail.gmail.com>
	 <20060528082805.97131.qmail@web25915.mail.ukl.yahoo.com>
	 <e994873a0606050654u5a65c8cdq84aea688e741ca2@mail.gmail.com>
	 <4484C6DC.9020009@nuix.com.au>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4436_26692321.1149692656696
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I was able to improve the behavior by setting the mapped ByteBuffer to null
in the close method of MMapIndexInput. This seems to be a strong enough
'suggestion' to the gc, as I can see the references go away with process
explorer, and the index files can be deleted, usually. Occasionally, a
reference to the '.tis' file remains.

Peter


On 6/5/06, Daniel Noll <daniel@nuix.com.au> wrote:
>
> Peter Keegan wrote:
>
> > There is no 'unmap' method, so my understanding is that the file mapping
> is
> > valid until the underlying buffer is garbage-collected. However, forcing
> > the gc doesn't help.
>
> You're half right.
>
> The file mapping is indeed valid until the underlying buffer is garbage
> collected, but you can't "force" the GC -- there is no API which does
> that.
>
> Note the wording in the Javadoc for System.gc():
>
>    "Calling the gc method **suggests** that the Java Virtual Machine
>     expend effort toward recycling unused objects in order to make the
>     memory they currently occupy available for quick reuse. When control
>     returns from the method call, the Java Virtual Machine has made a
>     best effort to reclaim space from all discarded objects."
>
> > The file deletes don't fail on Linux, but I'm wondering if there is
> still a
> > memory leak?
>
> Linux allows you to delete a file while someone has the file descriptor
> open, but the file descriptor will remain valid (i.e. the delete doesn't
> actually occur) until everyone releases the file descriptor.
>
> I ran into similar issues as these when working on other things, and
> eventually ended up switching to using a RandomAccessFile, as those can
> be closed.  Otherwise you're right -- the workaround is to routinely try
> to delete the file.
>
> Daniel
>
> --
> Daniel Noll
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4436_26692321.1149692656696--

From java-user-return-21195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 15:36:09 2006
Return-Path: <java-user-return-21195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7629 invoked from network); 7 Jun 2006 15:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 15:36:09 -0000
Received: (qmail 29303 invoked by uid 500); 7 Jun 2006 15:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29270 invoked by uid 500); 7 Jun 2006 15:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29235 invoked by uid 99); 7 Jun 2006 15:36:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 08:36:00 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 08:35:59 -0700
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id QAA00474
	for <java-user@lucene.apache.org>; Wed, 7 Jun 2006 16:36:23 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma000467; Wed, 7 Jun 06 16:36:08 +0100
In-Reply-To: <06d301c68a43$3ac3f300$d4824109@aroushlt>
Subject: Re: Converting SQL statement to Lucene query
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OFF8BE0C73.9DD221E1-ON80257186.005518FC-80257186.0055AB85@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Wed, 7 Jun 2006 16:35:22 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 07/06/2006 16:35:22
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






You could take a look at Apaches Jackrabbit - it does this sort of thing.
Its not exactly a library but it might give you some pointers. My
understanding is that it uses an SQL like syntax for defining queries that
are converted into an abstract syntax tree which it can then convert into
any query syntax, Lucene query syntax being one. The Lucene query generated
is obviously specific to the Jackrabbit indexes.
Regards
Paul I.


                                                                           
             "George Aroush"                                               
             <george@aroush.ne                                             
             t>                                                         To 
                                       <java-user@lucene.apache.org>       
             07/06/2006 16:01                                           cc 
                                                                           
                                                                   Subject 
             Please respond to         Converting SQL statement to Lucene  
             java-user@lucene.         query                               
                apache.org                                                 
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




Hi folks,

Has anyone done or do you know of an API library that will take SQL
statement and convert them to Lucene Query?  I know not every SQL statement
can become a Lucene Query but that's OK as long as the library will
highlight them.

Thanks!

-- George


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 18:59:49 2006
Return-Path: <java-user-return-21196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86610 invoked from network); 7 Jun 2006 18:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 18:59:49 -0000
Received: (qmail 84777 invoked by uid 500); 7 Jun 2006 18:59:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84748 invoked by uid 500); 7 Jun 2006 18:59:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84737 invoked by uid 99); 7 Jun 2006 18:59:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 11:59:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 11:59:40 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1Fo3IK-0006Sw-1w
	for java-user@lucene.apache.org; Wed, 07 Jun 2006 21:02:20 +0200
Message-ID: <448721EA.2040808@tejnora.cz>
Date: Wed, 07 Jun 2006 20:58:50 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: spring & lucene
References: <63434C14F9A6F74CB36B85033E4C30CA0255FA9E@hermes.corp.cyveillance.com>
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA0255FA9E@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not explict closing can lead especially when is allowed a lot of memory 
to JVM but small amount is used that old files will stay on the disk on 
linux.
Solution is in using ReentrantReadWriteLock
where the re-open method opens new indexreader at ThreadLocal
accuire write lock
saves old reference to IndexReader to his ThreadLocal
swaps global reference to new one
release write lock
close referenced by old one

if indexer and searcher are asynchronous (they don't know about each 
other doing, index reopen is based f.e. on quartz every min or so)
take care about using compound file format - the new segments are 
written to 'segments' file before they are created.

>We wrote ours for NetSearch to handle this specific issue. I suggest you
>create a holder class to hold the IndexReader and IndexSearcher, this
>can close them in the finalizer. Clients keep the holder until they are
>finished and then discard it. When it is completely de-referenced it
>will be closed. We also remove old indexes this way as well. Create a
>factory class for the holder that knows when an index is being updated,
>and creates new holders, when the index is not being updated it returns
>the same one each time.
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 19:18:02 2006
Return-Path: <java-user-return-21197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92574 invoked from network); 7 Jun 2006 19:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 19:18:01 -0000
Received: (qmail 11086 invoked by uid 500); 7 Jun 2006 19:17:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10896 invoked by uid 500); 7 Jun 2006 19:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10857 invoked by uid 99); 7 Jun 2006 19:17:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:17:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 12:17:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 513E95B779; Wed,  7 Jun 2006 12:17:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3BFBD7F403
	for <java-user@lucene.apache.org>; Wed,  7 Jun 2006 12:17:12 -0700 (PDT)
Date: Wed, 7 Jun 2006 12:17:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL
In-Reply-To: <20060607090428.B841E187B1@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0606071205560.10768@hal.rescomp.berkeley.edu>
References: <20060607090428.B841E187B1@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: However, I'm not sure what to make of:
: --------8<--------
: Thread 3740: (state = BLOCKED)
: - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
: - java.lang.Object.wait() @bci=2, line=474 (Compiled frame)
: Error occurred during stack walking:
: java.lang.NullPointerException
: at sun.jvm.hotspot.runtime.Frame.addressOfStackSlot(Frame.java:214)

crap.  i don't know what that means, but it certainly looks bad ... if the
JVM can't make sense of your stack, i can't imagein how there would be any
hope of your program recovering.

: Does that mean that the PipedReader in the following might persist beyond
: the scope of this code, and be read from only when the Lucene document is
: added to the index?

I'm not sure what exactly your process method is doing, but it is
certainly true that Lucene won't do anything to read from that PipedReader
in this code... all the new Field constructor willdo is hand on to a
refrence to that reader, and all the Document.add call will do is hang on
to a refrence to that Field.  It isn't until you add that document using
IndexWriter.addDocument that anything is read from that Reader.

That's acctually teh whole point of makinga Field from a Reader -- if
you're slurping a big chunk of data off disk, or a network connectin or
something, giving lucene a Reader allows you to pipeline the data all the
way to the Analyzer without ever needinga fully copy of it in memory.

Which means if the thing producing your data and streaming it to that
PipedReader chokes and causes your app to crash, it will crash in the
middle of of writing out your Document.

try buffering all the data for each doc in memory as a String and building
a Field with that -- it may not prevent your app from crashing (that
soudns like a problem somewhere else in your code) but it may prevent your
index from getting corrupt when it does crash.

I say it "may" prevent it -- because if you are multithreading your app
then there's no garuntee that one thread won't cause acrash while another
thread is in the middle of writting data to your index.

:
: --------8<--------
: 	final PipedWriter pw = new PipedWriter();
: 	Thread t = new Thread() {
: 		public void run() {
: 			try {
: 				// Index the body text in the Lucene
: document,
: 				// but do not store it
: 				doc.add(
: 					new Field(
: 						"body"
: 						,new PipedReader(pw)
: 					)
: 				);
: 			}
: 			catch (IOException e) {
: 				e.printStackTrace();
: 			}
: 		}
: 	};
: 	t.start();
:
: 	// Process an input stream for the content handler.
: 	// Tokens extracted from the stream are written to
: 	// the piped writer and hence made available to the
: 	// PipedReader used in the "body" field constructor.
: 	process(is,pw);
:
: 	// Close the output stream to get the PipedReader to see EOF
: 	pw.close();
:
: 	// Join the thread to wait for the field to be added to the
: 	// document
: 	t.join();
:
: 	// Now go on to add other fields (metadata), and then add
: 	// the document to the index...
: --------8<--------
:
:
: -----Original Message-----
: From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: Sent: 06 June 2006 20:13
: To: java-user@lucene.apache.org
: Subject: RE: Compound / non-compound index files and SIGKILL
:
:
: 1) have you tried forcing a threaddump of the JVM when it hangs to see what
: it's doing?  (i don't remember which signal it is off the top of my head,
: but even if it's not responding to SIGTERM it might respond to that)
:
: : SIGTERM. I guess I'd feel more confident about using SIGKILL, if I knew
: that
: : the uninterruptible hanged thread was creating a Document, which I could
: : interrupt without corrupting the index, rather than adding the document to
: : the index, which is liable to result in orphaned files and/or a corrupted
: : index, if killed.
:
: 2) It's possible that the thread is doing both (creating and adding) at the
: same time ... if you are Constructing documents using Fields that contain
: Readers you get back from convertors which stream data from complex
: documents as needed, then DocumentWriter may have started to write your
: document, gotten to a Field with a Reader, and then your convertor may be
: choking on something within the source document while it tries to stream
: data to that Reader.
:
:
: 	...just a theory.
:
:
: : -----Original Message-----
: : From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: : Sent: 06 June 2006 10:54
: : To: java-user@lucene.apache.org
: : Subject: Re: Compound / non-compound index files and SIGKILL
: :
: : If your content handlers should respond quickly then you should move
: : indexing process to separate thread and maintain items in queue.
: :
: : Rob Staveley (Tom) wrote:
: : > This is a real eye-opener, Volodymyr. Many thanks. I guess that means
: : > that my orphan-producing hangs must be addDocument() calls, and not in
: : > the content handlers, as I'd previously assumed. I'll put some debug
: : > before and after my addDocument() calls to confirm (and point my
: : > writer's infoStream to System.out).
: : >
: : > -----Original Message-----
: : > From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: : > Sent: 05 June 2006 18:33
: : > To: java-user@lucene.apache.org
: : > Subject: Re: Compound / non-compound index files and SIGKILL
: : >
: : > Hi.
: : > My five cents :)
: : >
: : > It might be helpful to know how lucene is working with compound files.
: : > When segment is flushed to disk it is written uncompound and after
: : > that is merged into single .cfs file. If you don't change default
: : > setting for using compound files (which is on) this is only place (I
: : > guess) for these files to appear.
: : >
: : > If you're working with large indexes, than merging segments can take a
: : > while (Maybe here is your problem? :) ) (merging happens on
: : > addDocument() call).  If you will kill indexing process during such
: : > merge you'll get many orphaned files...
: : >
: : > You can just run optimize on this index. You'll get three files:
: : > segments, deletable, <segment>.cfs; you can look name of segment in
: : > 'segments' file. Everything else is 'garbage' - you can delete it.
: : >
: : >
: : > Rob Staveley (Tom) wrote:
: : >
: : >> I've been indexing live data into a compound index from an MTA. I'm
: : >> resolving a bunch of problems unrelated to Lucene (disparate hangs in
: : >> my content handlers). When I get a hang, I typically need to kill my
: : >> daemon, alas more often than not using kill -9 (SIGKILL).
: : >>
: : >> However, these SIGKILLs are leaving large temporary(?) files, which I
: : >>
: : > guess
: : >
: : >> are non-compound index files transiently extracted from the working
: : >> .cfs
: : >> files:
: : >>
: : >> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
: : >> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
: : >> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
: : >>
: : >> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
: : >> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
: : >> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
: : >>
: : >> They are left intact after restarting my daemon. Presumably they are
: : >> not treated as being part of the compound index. I see no
: : >> corresponding .cfs file for them.
: : >>
: : >> As a consequence of these - I suspect - I am getting a very large
: : >> overall disk requirement for my index, presumably because of
: : >> replicated field
: : >>
: : > data.
: : >
: : >> My guess is that the field data in the orphaned .fdt files needs to
: : >> be regenerated.
: : >>
: : >> In another index directory from a previous test run (again with
: : >> SIGKILLs),
: : >>
: : > I
: : >
: : >> have 98 GB of index files, with only 12 BG devoted to compound files
: : >> for
: : >>
: : > the
: : >
: : >> field index (.cfs). The rest of the disk space is used by orphaned
: : >> uncompounded index files; I see 51 GB devoted to uncompounded field
: : >> data (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted
: : >> to term frequencies (.frq).
: : >>
: : >> Here's my question:
: : >>
: : >> How can I attempt to merge these orphaned into the compound index,
: : >> using IndexWriter.addIndexes(), or would I be foolish attempting this?
: : >>
: : >>
: : >
: : >
: :
: : --
: : regards,
: : Volodymyr Bychkoviak
: :
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 19:44:23 2006
Return-Path: <java-user-return-21198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12839 invoked from network); 7 Jun 2006 19:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 19:44:23 -0000
Received: (qmail 68717 invoked by uid 500); 7 Jun 2006 19:44:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68612 invoked by uid 500); 7 Jun 2006 19:44:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 7821 invoked by uid 99); 7 Jun 2006 19:16:49 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of stv.bstein@gmail.com designates 64.233.162.197 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=jxh3gDovxfDh1YRqXp1d01yNdkd7z8+72OMo8W5wbn9GdkuI4eFT6CK6r4/1O4QMz2BhKwj/9f98dufNuB1fKCELka9P3RTRqHg8jbIpQWAnlwrtiFic9hDwUy3zh/zsnM2lNt2tB7jUY8UxlUPJPPRt80KGpTmonyqbzAgXs+8=
Message-ID: <5d9c9ef10606071216r3d9e28e1q273f81824ad27452@mail.gmail.com>
Date: Wed, 7 Jun 2006 15:16:26 -0400
From: "Benjamin Stein" <ben@shadowtv.com>
Sender: stv.bstein@gmail.com
To: java-user@lucene.apache.org
Subject: IndexWriter.addIndexes & optimization
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4543_15453285.1149707786147"
X-Google-Sender-Auth: 630685ae3b150bd4
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4543_15453285.1149707786147
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have a very large corpus that I am storing in many indexes: 200 indexes
* ~500MB each, with 10^6 very tiny documents in each.  (I could look into
optimizing this later, of course, but seems ok for now)

During indexing, I have been using a RAMDirectory to store many thousands of
documents in memory before flushing the buffer to disk using
IndexWriter.addIndexes.
For the most part this works very well, except that performance degrades
tremendously over time due to the implicit call (or two!)
to optimize() inside the addIndexes function.

I searched the archives and found that this topic has come up a number of
times over the years, but with very few answers (except for one amusing one
from Doug:  "I don't recall exactly why this was done. (I should have
written a comment!)"  :)

Is there a way to accomplish what I'm trying to do without all the calls to
optimize()?

-Ben

------=_Part_4543_15453285.1149707786147--

From java-user-return-21199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 19:44:39 2006
Return-Path: <java-user-return-21199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12948 invoked from network); 7 Jun 2006 19:44:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 19:44:38 -0000
Received: (qmail 70471 invoked by uid 500); 7 Jun 2006 19:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70418 invoked by uid 500); 7 Jun 2006 19:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 25528 invoked by uid 99); 7 Jun 2006 19:23:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of stv.bstein@gmail.com designates 64.233.162.207 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=IeautXGsk6n2LpunH3uv2llshpsEP+k6QXwOmAAc8PDJlRkKZmhd+6EJp9cN2Ago+zBjzrqN8OFzEMWuqFBg68Dzy4wTzvzeWqztMiD7knyzLbt2LPYzKJiB4s/2oPV/FWH/BV3QNjLhOGscwaefya9xIG891r8uTEZMogJQa2c=
Message-ID: <5d9c9ef10606071223k663ec34fq710c49673fbe618c@mail.gmail.com>
Date: Wed, 7 Jun 2006 15:23:26 -0400
From: "Benjamin Stein" <ben@shadowtv.com>
Sender: stv.bstein@gmail.com
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.addIndexes & optimization
In-Reply-To: <5d9c9ef10606071216r3d9e28e1q273f81824ad27452@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4571_906748.1149708206141"
References: <5d9c9ef10606071216r3d9e28e1q273f81824ad27452@mail.gmail.com>
X-Google-Sender-Auth: b8601d451261f0cf
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4571_906748.1149708206141
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 6/7/06, Benjamin Stein <ben@shadowtv.com> wrote:
>
> During indexing, I have been using a RAMDirectory to store many thousands
> of documents in memory before flushing the buffer to disk using
> IndexWriter.addIndexes.
> For the most part this works very well, except that performance degrades
> tremendously over time due to the implicit call (or two!)
> to optimize() inside the addIndexes function.
>


I could probably store the little RAMDirectories to disk as many
FSDirectories, and then addIndexes() of *all* the FSDirectories at the end
instead of every time.  That would probably be smart.

Glad I asked myself!

------=_Part_4571_906748.1149708206141--

From java-user-return-21200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 20:03:41 2006
Return-Path: <java-user-return-21200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21314 invoked from network); 7 Jun 2006 20:03:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 20:03:41 -0000
Received: (qmail 13076 invoked by uid 500); 7 Jun 2006 20:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13048 invoked by uid 500); 7 Jun 2006 20:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13037 invoked by uid 99); 7 Jun 2006 20:03:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 13:03:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 13:03:32 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1544401E@mailer.syr.edu>; Wed, 7 Jun 2006 16:03:11 -0400
Message-ID: <4487317A.4090509@syr.edu>
Date: Wed, 07 Jun 2006 16:05:14 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexWriter.addIndexes & optimization
References: <5d9c9ef10606071216r3d9e28e1q273f81824ad27452@mail.gmail.com> <5d9c9ef10606071223k663ec34fq710c49673fbe618c@mail.gmail.com>
In-Reply-To: <5d9c9ef10606071223k663ec34fq710c49673fbe618c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My understanding of the IndexWriter code is that it more or less manages 
this for you.  It has an internal RAMDirectory which it uses to index in 
memory and then periodically flushes to disk based on your merge factor 
settings (amongst other settings).  So I am not sure if the extra work 
you are doing is really saving you anything.  Once all this is done, 
then you can call optimize just once at the end (or wherever you feel 
you need to)

Benjamin Stein wrote:
> On 6/7/06, Benjamin Stein <ben@shadowtv.com> wrote:
>>
>> During indexing, I have been using a RAMDirectory to store many 
>> thousands
>> of documents in memory before flushing the buffer to disk using
>> IndexWriter.addIndexes.
>> For the most part this works very well, except that performance degrades
>> tremendously over time due to the implicit call (or two!)
>> to optimize() inside the addIndexes function.
>>
>
>
> I could probably store the little RAMDirectories to disk as many
> FSDirectories, and then addIndexes() of *all* the FSDirectories at the 
> end
> instead of every time.  That would probably be smart.
>
> Glad I asked myself!
>

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 20:06:21 2006
Return-Path: <java-user-return-21201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22264 invoked from network); 7 Jun 2006 20:06:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 20:06:21 -0000
Received: (qmail 21376 invoked by uid 500); 7 Jun 2006 20:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21350 invoked by uid 500); 7 Jun 2006 20:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21339 invoked by uid 99); 7 Jun 2006 20:06:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 13:06:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 13:06:10 -0700
Received: by py-out-1112.google.com with SMTP id d80so310448pyd
        for <java-user@lucene.apache.org>; Wed, 07 Jun 2006 13:05:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WVEhvJy0F1465qr6umoa9p5zjg+bIe74uSgp4FpXmtQ261OCta9EPAUcIA0aPoD39624JhZzJACEg2SkLg0HjrmwJJMiwXdVO4JyXYoakWO132LEa6FNQM45zIQX5+jqBPmfapdl215sT5GahdhHgwuK5Bi8qir9AkloKenSbXM=
Received: by 10.35.117.5 with SMTP id u5mr1167594pym;
        Wed, 07 Jun 2006 13:05:50 -0700 (PDT)
Received: from ?172.24.51.72? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id n80sm906518pye.2006.06.07.13.05.49;
        Wed, 07 Jun 2006 13:05:49 -0700 (PDT)
Message-ID: <4487319D.10006@gmail.com>
Date: Wed, 07 Jun 2006 15:05:49 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexWriter.addIndexes & optimization
References: <5d9c9ef10606071216r3d9e28e1q273f81824ad27452@mail.gmail.com> <5d9c9ef10606071223k663ec34fq710c49673fbe618c@mail.gmail.com>
In-Reply-To: <5d9c9ef10606071223k663ec34fq710c49673fbe618c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Benjamin Stein wrote:

> 
> I could probably store the little RAMDirectories to disk as many
> FSDirectories, and then addIndexes() of *all* the FSDirectories at the end
> instead of every time.  That would probably be smart.
> 
> Glad I asked myself!
> 

That was what I was going to suggest - you may also want to benchmark to 
see if the RAMDirectory is buying you anything.  With the data that I am 
indexing on my hardware, I found it to be faster to index to a regular 
FSDirectory that it is to use the RAMDirectory.  Especially if you tweak 
the performance knobs on the indexer so it does its own caching before 
it writes to the Directory.

I do batches of documents to FSDirectories - and then merge all of the 
FSDirectories into a new master index at the end - so I never have to 
optimize during the indexing process.

Dan


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 21:05:37 2006
Return-Path: <java-user-return-21202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42987 invoked from network); 7 Jun 2006 21:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 21:05:37 -0000
Received: (qmail 51439 invoked by uid 500); 7 Jun 2006 21:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50700 invoked by uid 500); 7 Jun 2006 21:05:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50689 invoked by uid 99); 7 Jun 2006 21:05:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 14:05:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vsood2@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO nz-out-0102.google.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 14:05:29 -0700
Received: by nz-out-0102.google.com with SMTP id 9so300010nzo
        for <java-user@lucene.apache.org>; Wed, 07 Jun 2006 14:05:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=evTMuLs0lKCGhTBPFIfPPL9Y2QVhER7+iFQdIZiiMFxxAIV8gj75g/9xeQFrJwaO9x5r8abwZ2fZHYuW/5lT4Nh8GF5EsSDK0RKqS1j1f3N/Qgvq227IalFJfCGAUw63jTf8KwSr2aPvvnUo7g28JI+bqwUgJgqFE6TKy/Ao5V8=
Received: by 10.37.15.76 with SMTP id s76mr1249941nzi;
        Wed, 07 Jun 2006 14:05:08 -0700 (PDT)
Received: by 10.36.221.72 with HTTP; Wed, 7 Jun 2006 14:05:08 -0700 (PDT)
Message-ID: <800d6e9c0606071405p3f0f22e4vccecf5ac90007828@mail.gmail.com>
Date: Wed, 7 Jun 2006 17:05:08 -0400
From: "varun sood" <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: duplicate results MultiFieldQueryParser
In-Reply-To: <359a92830606051545q68f7587ekecfa2c5023c81701@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5330_28765426.1149714308919"
References: <800d6e9c0606050814m549c2638k18676a4243bed7e4@mail.gmail.com>
	 <359a92830606050822t12c3ef4fj46e2c549774a34af@mail.gmail.com>
	 <800d6e9c0606051249o64a1f85em21f9cd47d2d47eaa@mail.gmail.com>
	 <359a92830606051545q68f7587ekecfa2c5023c81701@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5330_28765426.1149714308919
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yeah you are right. I was talking about going through the large index and
discovering the problem as to where else it have occured and how?
But thanks for your tips. I use Luke before and certianly it helped me this
time aswell.  I found the problem. Its not great Lucene. Its me.. error in
understaing nature of data.

Thanks
Varun

On 6/5/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Even if the index is huge, you should be able to open it in Luke and
> submit
> a search just like the one that's giving you trouble, and then examine the
> documents. Yes, it'll take a while to open the index, but not an
> outrageous
> amount of time... unless you run out of memory or something.
>
> Best
> Erick
>
>

------=_Part_5330_28765426.1149714308919--

From java-user-return-21203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 07 23:34:18 2006
Return-Path: <java-user-return-21203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46630 invoked from network); 7 Jun 2006 23:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2006 23:34:18 -0000
Received: (qmail 25352 invoked by uid 500); 7 Jun 2006 23:34:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25319 invoked by uid 500); 7 Jun 2006 23:34:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25308 invoked by uid 99); 7 Jun 2006 23:34:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 16:34:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 16:34:10 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 6ADF4187B3; Wed,  7 Jun 2006 23:33:48 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 6270D187B1
	for <java-user@lucene.apache.org>; Wed,  7 Jun 2006 23:33:46 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Thu, 8 Jun 2006 00:33:51 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	boundary="----=_NextPart_000_0051_01C68A93.36A0A0C0";
	protocol="application/x-pkcs7-signature";
	micalg=SHA1
Thread-index: AcaKZxVIA/VO24gqQa+CowBWMMEQuAAG4Vlg
In-Reply-To: <Pine.LNX.4.58.0606071205560.10768@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060607233346.6270D187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0051_01C68A93.36A0A0C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

> I'm not sure what exactly your process method is doing

In essence it gets text from the content's input stream and writes it to the
PipedWriter and hence to the PipedReader passed to the Field constructor.
The process method for a plain text content handler simply copies from the
input stream and writes to the PipedWriter, but the HTML handler goes
through a few more hoops, involving 3rd party libraries. I favoured the
Reader constructor because it avoided having to load large documents into
RAM. 

> It isn't until you add that document using IndexWriter.addDocument that
anything is read from that Reader

>From what you are saying, my design is flawed, because the PipedWriter is
necessarily closed before the document is added ("// Close the output stream
to get the PipedReader to see EOF"). If reading only occurs during the
document add, it can only works if the entire content is able to be held in
the PipedReader's input buffer, which presumably would mean effectively
having it all loaded in RAM. Bah! Perhaps that's my problem. If reading
occurs during the document addition and not during the Field construction, I
guess I need to use a temporary file, which I should delete after the
document addition to avoid RAM overhead. The Pipe looked natty, but it was
ill-conceived.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 07 June 2006 20:17
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL

: However, I'm not sure what to make of:
: --------8<--------
: Thread 3740: (state = BLOCKED)
: - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
: - java.lang.Object.wait() @bci=2, line=474 (Compiled frame)
: Error occurred during stack walking:
: java.lang.NullPointerException
: at sun.jvm.hotspot.runtime.Frame.addressOfStackSlot(Frame.java:214)

crap.  i don't know what that means, but it certainly looks bad ... if the
JVM can't make sense of your stack, i can't imagein how there would be any
hope of your program recovering.

: Does that mean that the PipedReader in the following might persist beyond
: the scope of this code, and be read from only when the Lucene document is
: added to the index?

I'm not sure what exactly your process method is doing, but it is certainly
true that Lucene won't do anything to read from that PipedReader in this
code... all the new Field constructor willdo is hand on to a refrence to
that reader, and all the Document.add call will do is hang on to a refrence
to that Field.  It isn't until you add that document using
IndexWriter.addDocument that anything is read from that Reader.

That's acctually teh whole point of makinga Field from a Reader -- if you're
slurping a big chunk of data off disk, or a network connectin or something,
giving lucene a Reader allows you to pipeline the data all the way to the
Analyzer without ever needinga fully copy of it in memory.

Which means if the thing producing your data and streaming it to that
PipedReader chokes and causes your app to crash, it will crash in the middle
of of writing out your Document.

try buffering all the data for each doc in memory as a String and building a
Field with that -- it may not prevent your app from crashing (that soudns
like a problem somewhere else in your code) but it may prevent your index
from getting corrupt when it does crash.

I say it "may" prevent it -- because if you are multithreading your app then
there's no garuntee that one thread won't cause acrash while another thread
is in the middle of writting data to your index.

:
: --------8<--------
: 	final PipedWriter pw = new PipedWriter();
: 	Thread t = new Thread() {
: 		public void run() {
: 			try {
: 				// Index the body text in the Lucene
: document,
: 				// but do not store it
: 				doc.add(
: 					new Field(
: 						"body"
: 						,new PipedReader(pw)
: 					)
: 				);
: 			}
: 			catch (IOException e) {
: 				e.printStackTrace();
: 			}
: 		}
: 	};
: 	t.start();
:
: 	// Process an input stream for the content handler.
: 	// Tokens extracted from the stream are written to
: 	// the piped writer and hence made available to the
: 	// PipedReader used in the "body" field constructor.
: 	process(is,pw);
:
: 	// Close the output stream to get the PipedReader to see EOF
: 	pw.close();
:
: 	// Join the thread to wait for the field to be added to the
: 	// document
: 	t.join();
:
: 	// Now go on to add other fields (metadata), and then add
: 	// the document to the index...
: --------8<--------
:
:
: -----Original Message-----
: From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: Sent: 06 June 2006 20:13
: To: java-user@lucene.apache.org
: Subject: RE: Compound / non-compound index files and SIGKILL
:
:
: 1) have you tried forcing a threaddump of the JVM when it hangs to see
what
: it's doing?  (i don't remember which signal it is off the top of my head,
: but even if it's not responding to SIGTERM it might respond to that)
:
: : SIGTERM. I guess I'd feel more confident about using SIGKILL, if I knew
: that
: : the uninterruptible hanged thread was creating a Document, which I could
: : interrupt without corrupting the index, rather than adding the document
to
: : the index, which is liable to result in orphaned files and/or a
corrupted
: : index, if killed.
:
: 2) It's possible that the thread is doing both (creating and adding) at
the
: same time ... if you are Constructing documents using Fields that contain
: Readers you get back from convertors which stream data from complex
: documents as needed, then DocumentWriter may have started to write your
: document, gotten to a Field with a Reader, and then your convertor may be
: choking on something within the source document while it tries to stream
: data to that Reader.
:
:
: 	...just a theory.
:
:
: : -----Original Message-----
: : From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: : Sent: 06 June 2006 10:54
: : To: java-user@lucene.apache.org
: : Subject: Re: Compound / non-compound index files and SIGKILL
: :
: : If your content handlers should respond quickly then you should move
: : indexing process to separate thread and maintain items in queue.
: :
: : Rob Staveley (Tom) wrote:
: : > This is a real eye-opener, Volodymyr. Many thanks. I guess that means
: : > that my orphan-producing hangs must be addDocument() calls, and not in
: : > the content handlers, as I'd previously assumed. I'll put some debug
: : > before and after my addDocument() calls to confirm (and point my
: : > writer's infoStream to System.out).
: : >
: : > -----Original Message-----
: : > From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: : > Sent: 05 June 2006 18:33
: : > To: java-user@lucene.apache.org
: : > Subject: Re: Compound / non-compound index files and SIGKILL
: : >
: : > Hi.
: : > My five cents :)
: : >
: : > It might be helpful to know how lucene is working with compound files.
: : > When segment is flushed to disk it is written uncompound and after
: : > that is merged into single .cfs file. If you don't change default
: : > setting for using compound files (which is on) this is only place (I
: : > guess) for these files to appear.
: : >
: : > If you're working with large indexes, than merging segments can take a
: : > while (Maybe here is your problem? :) ) (merging happens on
: : > addDocument() call).  If you will kill indexing process during such
: : > merge you'll get many orphaned files...
: : >
: : > You can just run optimize on this index. You'll get three files:
: : > segments, deletable, <segment>.cfs; you can look name of segment in
: : > 'segments' file. Everything else is 'garbage' - you can delete it.
: : >
: : >
: : > Rob Staveley (Tom) wrote:
: : >
: : >> I've been indexing live data into a compound index from an MTA. I'm
: : >> resolving a bunch of problems unrelated to Lucene (disparate hangs in
: : >> my content handlers). When I get a hang, I typically need to kill my
: : >> daemon, alas more often than not using kill -9 (SIGKILL).
: : >>
: : >> However, these SIGKILLs are leaving large temporary(?) files, which I
: : >>
: : > guess
: : >
: : >> are non-compound index files transiently extracted from the working
: : >> .cfs
: : >> files:
: : >>
: : >> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
: : >> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
: : >> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
: : >>
: : >> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
: : >> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
: : >> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
: : >>
: : >> They are left intact after restarting my daemon. Presumably they are
: : >> not treated as being part of the compound index. I see no
: : >> corresponding .cfs file for them.
: : >>
: : >> As a consequence of these - I suspect - I am getting a very large
: : >> overall disk requirement for my index, presumably because of
: : >> replicated field
: : >>
: : > data.
: : >
: : >> My guess is that the field data in the orphaned .fdt files needs to
: : >> be regenerated.
: : >>
: : >> In another index directory from a previous test run (again with
: : >> SIGKILLs),
: : >>
: : > I
: : >
: : >> have 98 GB of index files, with only 12 BG devoted to compound files
: : >> for
: : >>
: : > the
: : >
: : >> field index (.cfs). The rest of the disk space is used by orphaned
: : >> uncompounded index files; I see 51 GB devoted to uncompounded field
: : >> data (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted
: : >> to term frequencies (.frq).
: : >>
: : >> Here's my question:
: : >>
: : >> How can I attempt to merge these orphaned into the compound index,
: : >> using IndexWriter.addIndexes(), or would I be foolish attempting
this?
: : >>
: : >>
: : >
: : >
: :
: : --
: : regards,
: : Volodymyr Bychkoviak
: :
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0051_01C68A93.36A0A0C0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwNzIz
MzM1MFowIwYJKoZIhvcNAQkEMRYEFCBVEU+w7tOEs6bShHD/RnDQFVOqMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAKVmhevSj34fk7eRN8t76K0PfUP8jUmxALyR
EmBFoKnLW7WBbR1Gc2zX5TVvxXYBhND2V3r9vuVo1qigG573M5J70QywW17OykSR+bz/X8RAkdgX
IfO/FcRn3U+XNOx8NjhmV3cMIB2UJVQbMDCC6nOPatzIyq7/VkBzi68OE3C4a4ddXuk8PN26061d
Dzb65mN2V+B5F5VF0cQZyIFTOJhZGFWu0zAvpTgnh9ijrr0nXaOVVKFqvvmKv/pcrxIT4KlfRFXC
2aQurmad+TSRjU5Kt6r8jHroi5JShB0nWsRpIe1+dReMwDiaMqwgzdiOIOmO8hpVSUqgWnczhYd1
B04AAAAAAAA=

------=_NextPart_000_0051_01C68A93.36A0A0C0--


From java-user-return-21204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 01:16:06 2006
Return-Path: <java-user-return-21204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70703 invoked from network); 8 Jun 2006 01:16:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 01:16:05 -0000
Received: (qmail 59763 invoked by uid 500); 8 Jun 2006 01:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59719 invoked by uid 500); 8 Jun 2006 01:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59708 invoked by uid 99); 8 Jun 2006 01:15:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 18:15:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jun 2006 18:15:57 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 448733CF0000A58D for java-user@lucene.apache.org; Thu, 8 Jun 2006 03:15:35 +0200
Subject: Re: Lucene and learning search
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To:  <loom.20060607T002200-542@post.gmane.org>
References:  <loom.20060607T002200-542@post.gmane.org>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Thu, 08 Jun 2006 03:15:28 +0200
Message-Id: <1149729329.8159.262.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-06 at 22:23 +0000, michael turner wrote:
> 
> "Users that have searched for "AAAAA" AND "BBBBB" have also searched 
> for "CCCC". 

Something just hit me.

Perhaps it would be interesting for you to track sessions that search
for the same thing but don't seem to find what they are looking for (no
clicks on the hits) and refine their query until they find what they
found something (click on the hit). Associate the "bad queries" with
that document. When some threshold is reached for a document in a "bad
query" you add it to the hits of such a query.

"People who first place the query Q usually refined the query in any way
and ended up clicking on document D1, D2 or D3".

That might be easy enough and yield fairly good results.

But watch it so that you don't end up writing a very complex and
resource consuming spell checker.

(I usually work the results and not the query as users generally have
bad query skills. And queries can have the same semantic even though
they are assembled in totally different ways.)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 07:57:08 2006
Return-Path: <java-user-return-21205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85282 invoked from network); 8 Jun 2006 07:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 07:57:07 -0000
Received: (qmail 37665 invoked by uid 500); 8 Jun 2006 07:56:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37629 invoked by uid 500); 8 Jun 2006 07:56:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37618 invoked by uid 99); 8 Jun 2006 07:56:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 00:56:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 00:56:56 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id C06F6187B3; Thu,  8 Jun 2006 07:56:32 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id BA9C4187B1
	for <java-user@lucene.apache.org>; Thu,  8 Jun 2006 07:56:27 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Thu, 8 Jun 2006 08:56:36 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_000F_01C68AD9.727B0900"
In-Reply-To: <20060607233346.6270D187B1@mail.seseit.com>
Thread-Index: AcaKZxVIA/VO24gqQa+CowBWMMEQuAAG4VlgABJdfRA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060608075627.BA9C4187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000F_01C68AD9.727B0900
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

OK, I see it now. It all happens in DocumentWriter.invertDocument. I should
have looked at the Lucene source.

IndexWriter.addDocument -> DocumentWriter.addDocument ->
DocumentWriter.invertDocument

Many thanks, Chris. 

Whom should I post to suggest adding a note to
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html
#Field(java.lang.String,%20java.io.Reader) to say that the Reader is only
actually read from when the document is added? Without internal knowledge,
it isn't obvious. I can see others making the same mistake I did assuming
that the Reader would have fulfilled its purpose when the call to the
constructor returns.

-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com] 
Sent: 08 June 2006 00:34
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL

> I'm not sure what exactly your process method is doing

In essence it gets text from the content's input stream and writes it to the
PipedWriter and hence to the PipedReader passed to the Field constructor.
The process method for a plain text content handler simply copies from the
input stream and writes to the PipedWriter, but the HTML handler goes
through a few more hoops, involving 3rd party libraries. I favoured the
Reader constructor because it avoided having to load large documents into
RAM. 

> It isn't until you add that document using IndexWriter.addDocument 
> that
anything is read from that Reader

>>From what you are saying, my design is flawed, because the PipedWriter 
>is
necessarily closed before the document is added ("// Close the output stream
to get the PipedReader to see EOF"). If reading only occurs during the
document add, it can only works if the entire content is able to be held in
the PipedReader's input buffer, which presumably would mean effectively
having it all loaded in RAM. Bah! Perhaps that's my problem. If reading
occurs during the document addition and not during the Field construction, I
guess I need to use a temporary file, which I should delete after the
document addition to avoid RAM overhead. The Pipe looked natty, but it was
ill-conceived.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: 07 June 2006 20:17
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL

: However, I'm not sure what to make of:
: --------8<--------
: Thread 3740: (state = BLOCKED)
: - java.lang.Object.wait(long) @bci=0 (Interpreted frame)
: - java.lang.Object.wait() @bci=2, line=474 (Compiled frame)
: Error occurred during stack walking:
: java.lang.NullPointerException
: at sun.jvm.hotspot.runtime.Frame.addressOfStackSlot(Frame.java:214)

crap.  i don't know what that means, but it certainly looks bad ... if the
JVM can't make sense of your stack, i can't imagein how there would be any
hope of your program recovering.

: Does that mean that the PipedReader in the following might persist beyond
: the scope of this code, and be read from only when the Lucene document is
: added to the index?

I'm not sure what exactly your process method is doing, but it is certainly
true that Lucene won't do anything to read from that PipedReader in this
code... all the new Field constructor willdo is hand on to a refrence to
that reader, and all the Document.add call will do is hang on to a refrence
to that Field.  It isn't until you add that document using
IndexWriter.addDocument that anything is read from that Reader.

That's acctually teh whole point of makinga Field from a Reader -- if you're
slurping a big chunk of data off disk, or a network connectin or something,
giving lucene a Reader allows you to pipeline the data all the way to the
Analyzer without ever needinga fully copy of it in memory.

Which means if the thing producing your data and streaming it to that
PipedReader chokes and causes your app to crash, it will crash in the middle
of of writing out your Document.

try buffering all the data for each doc in memory as a String and building a
Field with that -- it may not prevent your app from crashing (that soudns
like a problem somewhere else in your code) but it may prevent your index
from getting corrupt when it does crash.

I say it "may" prevent it -- because if you are multithreading your app then
there's no garuntee that one thread won't cause acrash while another thread
is in the middle of writting data to your index.

:
: --------8<--------
: 	final PipedWriter pw = new PipedWriter();
: 	Thread t = new Thread() {
: 		public void run() {
: 			try {
: 				// Index the body text in the Lucene
: document,
: 				// but do not store it
: 				doc.add(
: 					new Field(
: 						"body"
: 						,new PipedReader(pw)
: 					)
: 				);
: 			}
: 			catch (IOException e) {
: 				e.printStackTrace();
: 			}
: 		}
: 	};
: 	t.start();
:
: 	// Process an input stream for the content handler.
: 	// Tokens extracted from the stream are written to
: 	// the piped writer and hence made available to the
: 	// PipedReader used in the "body" field constructor.
: 	process(is,pw);
:
: 	// Close the output stream to get the PipedReader to see EOF
: 	pw.close();
:
: 	// Join the thread to wait for the field to be added to the
: 	// document
: 	t.join();
:
: 	// Now go on to add other fields (metadata), and then add
: 	// the document to the index...
: --------8<--------
:
:
: -----Original Message-----
: From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: Sent: 06 June 2006 20:13
: To: java-user@lucene.apache.org
: Subject: RE: Compound / non-compound index files and SIGKILL
:
:
: 1) have you tried forcing a threaddump of the JVM when it hangs to see
what
: it's doing?  (i don't remember which signal it is off the top of my head,
: but even if it's not responding to SIGTERM it might respond to that)
:
: : SIGTERM. I guess I'd feel more confident about using SIGKILL, if I knew
: that
: : the uninterruptible hanged thread was creating a Document, which I could
: : interrupt without corrupting the index, rather than adding the document
to
: : the index, which is liable to result in orphaned files and/or a
corrupted
: : index, if killed.
:
: 2) It's possible that the thread is doing both (creating and adding) at
the
: same time ... if you are Constructing documents using Fields that contain
: Readers you get back from convertors which stream data from complex
: documents as needed, then DocumentWriter may have started to write your
: document, gotten to a Field with a Reader, and then your convertor may be
: choking on something within the source document while it tries to stream
: data to that Reader.
:
:
: 	...just a theory.
:
:
: : -----Original Message-----
: : From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: : Sent: 06 June 2006 10:54
: : To: java-user@lucene.apache.org
: : Subject: Re: Compound / non-compound index files and SIGKILL
: :
: : If your content handlers should respond quickly then you should move
: : indexing process to separate thread and maintain items in queue.
: :
: : Rob Staveley (Tom) wrote:
: : > This is a real eye-opener, Volodymyr. Many thanks. I guess that means
: : > that my orphan-producing hangs must be addDocument() calls, and not in
: : > the content handlers, as I'd previously assumed. I'll put some debug
: : > before and after my addDocument() calls to confirm (and point my
: : > writer's infoStream to System.out).
: : >
: : > -----Original Message-----
: : > From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
: : > Sent: 05 June 2006 18:33
: : > To: java-user@lucene.apache.org
: : > Subject: Re: Compound / non-compound index files and SIGKILL
: : >
: : > Hi.
: : > My five cents :)
: : >
: : > It might be helpful to know how lucene is working with compound files.
: : > When segment is flushed to disk it is written uncompound and after
: : > that is merged into single .cfs file. If you don't change default
: : > setting for using compound files (which is on) this is only place (I
: : > guess) for these files to appear.
: : >
: : > If you're working with large indexes, than merging segments can take a
: : > while (Maybe here is your problem? :) ) (merging happens on
: : > addDocument() call).  If you will kill indexing process during such
: : > merge you'll get many orphaned files...
: : >
: : > You can just run optimize on this index. You'll get three files:
: : > segments, deletable, <segment>.cfs; you can look name of segment in
: : > 'segments' file. Everything else is 'garbage' - you can delete it.
: : >
: : >
: : > Rob Staveley (Tom) wrote:
: : >
: : >> I've been indexing live data into a compound index from an MTA. I'm
: : >> resolving a bunch of problems unrelated to Lucene (disparate hangs in
: : >> my content handlers). When I get a hang, I typically need to kill my
: : >> daemon, alas more often than not using kill -9 (SIGKILL).
: : >>
: : >> However, these SIGKILLs are leaving large temporary(?) files, which I
: : >>
: : > guess
: : >
: : >> are non-compound index files transiently extracted from the working
: : >> .cfs
: : >> files:
: : >>
: : >> -rw-r--r--    1  373138432 Jun  2 13:42 _18hup.fdt
: : >> -rw-r--r--    1      5054464 Jun  2 13:42 _18hup.fdx
: : >> -rw-r--r--    1              426 Jun  2 13:42 _18hup.fnm
: : >>
: : >> -rw-r--r--    1  457253888 Jun  2 09:22 _15djq.fdt
: : >> -rw-r--r--    1      6205440 Jun  2 09:22 _15djq.fdx
: : >> -rw-r--r--    1              426 Jun  2 09:21 _15djq.fnm
: : >>
: : >> They are left intact after restarting my daemon. Presumably they are
: : >> not treated as being part of the compound index. I see no
: : >> corresponding .cfs file for them.
: : >>
: : >> As a consequence of these - I suspect - I am getting a very large
: : >> overall disk requirement for my index, presumably because of
: : >> replicated field
: : >>
: : > data.
: : >
: : >> My guess is that the field data in the orphaned .fdt files needs to
: : >> be regenerated.
: : >>
: : >> In another index directory from a previous test run (again with
: : >> SIGKILLs),
: : >>
: : > I
: : >
: : >> have 98 GB of index files, with only 12 BG devoted to compound files
: : >> for
: : >>
: : > the
: : >
: : >> field index (.cfs). The rest of the disk space is used by orphaned
: : >> uncompounded index files; I see 51 GB devoted to uncompounded field
: : >> data (.fdt), 13 BG devoted to term positions (.prx) and 13 BG devoted
: : >> to term frequencies (.frq).
: : >>
: : >> Here's my question:
: : >>
: : >> How can I attempt to merge these orphaned into the compound index,
: : >> using IndexWriter.addIndexes(), or would I be foolish attempting
this?
: : >>
: : >>
: : >
: : >
: :
: : --
: : regards,
: : Volodymyr Bychkoviak
: :
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_000F_01C68AD9.727B0900
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwODA3
NTYzNVowIwYJKoZIhvcNAQkEMRYEFDU9hLXjWTN4Mmx/eQLECP+bHdKqMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAEfFunP0xMg3HRrowzHX9NXm3Wx4A9u9xUGq
AhV9DGqbrIFRARE44oYgWSDEvSavilXPVWyGc7Rj7IjSJLZgR4HR1mAgO5qpoT74SxK5mvU8Q8zz
Az0YqKE9gAtltaTf+Oabd00FyGUrM4yyeiEqABybjemrgqCdeWBNwmBwX//FsqPuvJZeBI85IFeD
Ic+GTxMvyBveFOO7gb2KxpZrGV82+bWljCqQKU/xQqyDdP2PETaOgvNM/HDDp4MmF1yEqEuofiP/
aMLQy/RrajqvHDi1R+HhtUcRM8VIWuVBMajOfzIgnrHxJ8zQhDoHKUAdBoRTV4w6Y2qaZhbYk3Ld
1hQAAAAAAAA=

------=_NextPart_000_000F_01C68AD9.727B0900--


From java-user-return-21206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 09:56:02 2006
Return-Path: <java-user-return-21206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18642 invoked from network); 8 Jun 2006 09:56:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 09:56:02 -0000
Received: (qmail 47837 invoked by uid 500); 8 Jun 2006 09:55:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47484 invoked by uid 500); 8 Jun 2006 09:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47473 invoked by uid 99); 8 Jun 2006 09:55:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 02:55:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.23.157.12] (HELO srv-mail.Keljob.com) (62.23.157.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Jun 2006 02:55:53 -0700
Received: from ft.keljob.com ([192.168.1.206]) by srv-mail.Keljob.com with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 8 Jun 2006 11:55:59 +0200
Date: Thu, 8 Jun 2006 11:55:58 +0200
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.62.14) Professional
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <395975213.20060608115558@laposte.net>
To: Daniel Naber <java-user@lucene.apache.org>
Subject: Re: Fwd: Lucene 2.0.0 release available
In-Reply-To: <200605271337.54996@danielnaber.de>
References: <200605271337.54996@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative;
 boundary="----------991CE16D36825CB"
X-OriginalArrivalTime: 08 Jun 2006 09:55:59.0267 (UTC) FILETIME=[BE5CDF30:01C68AE1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------------991CE16D36825CB
Content-Type: text/plain; charset=iso-8859-15
Content-Transfer-Encoding: 8bit

Hello, 

Nice job, thanks.
Question : When will it be available on Maven2 repositories ?
Thanks

--- Sven

Le samedi 27 mai 2006 à 13:37:54, vous écriviez :

DN> ----------  Forwarded Message  ----------

DN> Subject: Lucene 2.0.0 release available
DN> Date: Samstag 27 Mai 2006 05:57
DN> From: Doug Cutting <cutting@apache.org>
DN> To: java-dev@lucene.apache.org

DN> Release 2.0.0 of Lucene is now available from:

DN> http://www.apache.org/dyn/closer.cgi/lucene/java/

DN> This is mostly a bugfix release from release 1.9.1. Note however that
DN> deprecated 1.x features have now been removed. Any code that compiles
DN> against Lucene 1.9.1 without deprecation warnings should work without
DN> further changes with any 2.x release.

DN> The detailed change log is at:

DN> http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_0_0/CHANGES.txt

DN> Doug


DN> ---------------------------------------------------------------------
DN> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
DN> For additional commands, e-mail: java-dev-help@lucene.apache.org

DN> -------------------------------------------------------




-- 
Cordialement,
 Sven                            mailto:sven.duzont@laposte.net
------------991CE16D36825CB--


From java-user-return-21207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 12:19:09 2006
Return-Path: <java-user-return-21207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61740 invoked from network); 8 Jun 2006 12:19:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 12:19:09 -0000
Received: (qmail 94175 invoked by uid 500); 8 Jun 2006 12:19:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94009 invoked by uid 500); 8 Jun 2006 12:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93911 invoked by uid 99); 8 Jun 2006 12:19:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 05:19:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ngvinny@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 05:18:59 -0700
Received: by nf-out-0910.google.com with SMTP id l24so316031nfc
        for <java-user@lucene.apache.org>; Thu, 08 Jun 2006 05:18:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZpcLRUGMzetQ04aKAEe+kbNwxJ3Gp+DTqWcKo09m9SwxQCcGdyOGee1plHEZV8oS1mnou44H9fnlov0vuX1k/Kf+a4q7/KXdL/VLtnNNbEJfStcEPB+1MB+HHmSTotUhjUJuPHBNNp7nqNkZjyS7tgYVpYl3Otq2VyG7UXuij/w=
Received: by 10.48.48.17 with SMTP id v17mr1176709nfv;
        Thu, 08 Jun 2006 05:18:38 -0700 (PDT)
Received: by 10.49.30.12 with HTTP; Thu, 8 Jun 2006 05:18:38 -0700 (PDT)
Message-ID: <5db95abe0606080518g6c2f944fy62fb74bbffd3d525@mail.gmail.com>
Date: Thu, 8 Jun 2006 13:18:38 +0100
From: "Vinny Ng" <ngvinny@gmail.com>
To: java-user@lucene.apache.org
Subject: SynonymsQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17017_27552949.1149769118464"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17017_27552949.1149769118464
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,

I tried to use SynonymsQuery mentioned at:
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200603.mbox/%3c39B0FB508E5D7540ACA5AD57225E150D39203D@xmail.me.corp.entopia.com%3e

Compiling the given source code results in error message:
"The method createWeight(Searcher) in the type Query is not applicable for
the arguments  (Searcher) " in:

public SynonymsWeight( Searcher searcher ) throws IOException {
      this.searcher = searcher;
      weights = new Weight[queries.size()];
      for( int i = 0; i < queries.size(); i++ )
error here ===>        weights[i] = ((QueryInfo) queries.get
(i)).getQuery().createWeight(searcher);
        squareWeights = new float[queries.size()];
    }


I tried to fix it by changing the line with error to: weights[i] =
((SynonymsQuery) ((QueryInfo) queries.get
(i)).getQuery()).createWeight(searcher);

Then I tried it out in :
                Term t1 = new Term("content", "fraudulent");
        Query query1 = new TermQuery(t1);

        Term t2 = new Term("content", "deceptive");
        Query query2 = new TermQuery(t2);

           SynonymsQuery q= new SynonymsQuery();
           q.add(query1,1.0f,false);
           q.add(query2,0.8f,true);

        Hits hits = searcher.search(q);

The error is:
 Exception in thread "main" java.lang.UnsupportedOperationException
    at org.apache.lucene.search.Query.createWeight(Query.java:87)
    at org.apache.lucene.search.Query.weight(Query.java:94)
    at org.apache.lucene.search.Hits.<init>(Hits.java:41)
    at org.apache.lucene.search.Searcher.search(Searcher.java:44)
    at org.apache.lucene.search.Searcher.search(Searcher.java:36)
    at SynonymQuerySample.main(SynonymQuerySample.java:31)

Please tell me what I am doing wrong here.....

Thanks a lot.

Ng Vinny

------=_Part_17017_27552949.1149769118464--

From java-user-return-21208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 16:38:39 2006
Return-Path: <java-user-return-21208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72490 invoked from network); 8 Jun 2006 16:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 16:38:39 -0000
Received: (qmail 26728 invoked by uid 500); 8 Jun 2006 16:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26702 invoked by uid 500); 8 Jun 2006 16:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26688 invoked by uid 99); 8 Jun 2006 16:38:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 09:38:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 09:38:31 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.13.6/8.12.7/2.0.kim.desco.357) with ESMTP id k58Gc2Lt022020
 for <java-user@lucene.apache.org>; Thu, 8 Jun 2006 22:08:05 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: The fields in my document aren't getting analyzed
Date: Thu, 8 Jun 2006 22:08:01 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083107D1B7@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: The fields in my document aren't getting analyzed
Thread-Index: AcaLGeiK5b2+uF0sQPC0Pk/AV4wXmQ==
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

It seems to me my Fields aren't getting analyzed before they are stored
in the index. I am sure I am overlooking some obvious point here, but
cant figure out what that is. I recently migrated to Lucene2.0 from
Lucene 1.4.3, and my fields used to get indexed earlier, so maybe I am
missing something.

Code I use for making a new field:
new Field(desc, value, Field.Store.YES, Field.Index.TOKENIZED );

Code I use for opening the IndexWriter:
writer =3D new IndexWriter(indexLocation,new MyAnalyzer(), false);

I know the Analyzer is being invoked because I have my own Analyzer
(which is sort of like the PerFieldAnalyzerWrapper) and I have debug
statements in its tokenStream(fieldName, reader) method that do get
printed. When I test the Analyzer separately, it analyzes as expected.

Here is the code for MyAnalyzer.tokenStream();
    public TokenStream tokenStream(String fieldName, Reader reader)
    {
    	if ( ContactIndexer.getKeyWordFields().contains( fieldName ) )
        {
    	    LOG.debug( "fieldName:" + fieldName + " is a keyword" );
            return new LowerCaseFilter( new KeywordTokenizer( reader )
);
        }
       =20
        LOG.debug( "fieldName:" + fieldName + " is not a keyword" );
        return new PorterStemFilter(
    	         new StopFilter(
                    new LowerCaseFilter(
                        new StandardFilter(
                           new StandardTokenizer( reader ) ) )=20
                                 , StandardAnalyzer.STOP_WORDS ) );
       =20
    }=20

Any help hugely appreciated.

Venu




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 16:59:24 2006
Return-Path: <java-user-return-21209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81397 invoked from network); 8 Jun 2006 16:59:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 16:59:23 -0000
Received: (qmail 82115 invoked by uid 500); 8 Jun 2006 16:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82089 invoked by uid 500); 8 Jun 2006 16:59:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82078 invoked by uid 99); 8 Jun 2006 16:59:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 09:59:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.28] (HELO godard.uk.mediasurface.com) (193.123.241.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 09:59:16 -0700
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by godard.uk.mediasurface.com (8.13.4+Sun/8.13.4) with ESMTP id k58Gwo8Z013186
	for <java-user@lucene.apache.org>; Thu, 8 Jun 2006 16:58:51 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C68B1C.D19EEF8E"
Subject: Property comparison possible??
Date: Thu, 8 Jun 2006 17:58:53 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A0178F517@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Property comparison possible??
Thread-Index: AcaLHNJy83ZQ/D4HRZOcDbdKyt9nmA==
From: "Robert Haycock" <Robert.Haycock@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Scanned-By: MIMEDefang 2.54 on 10.0.5.28
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C68B1C.D19EEF8E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is it possible to perform a search using fields instead of terms, eg.
like this sql:

=20

SELECT col1, col2

FROM table1

WHERE col1 =3D col2

=20

Or is this something that might be going on the whiteboard?

=20

Thanks,

Rob.


------_=_NextPart_001_01C68B1C.D19EEF8E--

From java-user-return-21210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 17:02:45 2006
Return-Path: <java-user-return-21210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82478 invoked from network); 8 Jun 2006 17:02:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 17:02:44 -0000
Received: (qmail 95792 invoked by uid 500); 8 Jun 2006 17:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95758 invoked by uid 500); 8 Jun 2006 17:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95746 invoked by uid 99); 8 Jun 2006 17:02:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 10:02:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 10:02:35 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])by mailgw3a.lmco.com (LM-6) with ESMTP id k58H2Ekk025165for <java-user@lucene.apache.org>; Thu, 8 Jun 2006 13:02:14 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0J0J00F01WNN2B@lmco.com> for java-user@lucene.apache.org; Thu, 08 Jun 2006 13:02:14 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0J0J00A6IWN2F1@lmco.com> for java-user@lucene.apache.org; Thu, 08 Jun 2006 13:01:52 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 08 Jun 2006 13:01:50 -0400
Date: Thu, 08 Jun 2006 13:01:50 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Property comparison possible??
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3B5A@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Property comparison possible??
Thread-Index: AcaLHNJy83ZQ/D4HRZOcDbdKyt9nmAAAFEjQ
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 08 Jun 2006 17:01:50.0661 (UTC) FILETIME=[3C2E2F50:01C68B1D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

AFIK it is not possible to perform this kind of query with Lucene

Aviran
http://www.aviransplace.com 

-----Original Message-----
From: Robert Haycock [mailto:Robert.Haycock@mediasurface.com] 
Sent: Thursday, June 08, 2006 12:59 PM
To: java-user@lucene.apache.org
Subject: Property comparison possible??

Is it possible to perform a search using fields instead of terms, eg.
like this sql:

 

SELECT col1, col2

FROM table1

WHERE col1 = col2

 

Or is this something that might be going on the whiteboard?

 

Thanks,

Rob.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 17:06:29 2006
Return-Path: <java-user-return-21211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84289 invoked from network); 8 Jun 2006 17:06:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 17:06:29 -0000
Received: (qmail 9640 invoked by uid 500); 8 Jun 2006 17:06:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9604 invoked by uid 500); 8 Jun 2006 17:06:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9593 invoked by uid 99); 8 Jun 2006 17:06:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 10:06:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 10:06:22 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.13.6/8.12.7/2.0.kim.desco.357) with ESMTP id k58H5v9Q027824
 for <java-user@lucene.apache.org>; Thu, 8 Jun 2006 22:35:59 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: The fields in my document aren't getting analyzed
Date: Thu, 8 Jun 2006 22:35:56 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083103D7AD@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: The fields in my document aren't getting analyzed
Thread-Index: AcaLGeiK5b2+uF0sQPC0Pk/AV4wXmQAA5p2A
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am sorry about the previous mail. It turns out that I was confusing
the *stored* value of the field with the *indexed* value. The indexed
value is what I expect it to be, alright.

Thanks all,
Venu

-----Original Message-----
From: Satuluri, Venu_Madhav=20
Sent: Thursday, June 08, 2006 10:08 PM
To: java-user@lucene.apache.org
Subject: The fields in my document aren't getting analyzed


Hi all,

It seems to me my Fields aren't getting analyzed before they are stored
in the index. I am sure I am overlooking some obvious point here, but
cant figure out what that is. I recently migrated to Lucene2.0 from
Lucene 1.4.3, and my fields used to get indexed earlier, so maybe I am
missing something.

Code I use for making a new field:
new Field(desc, value, Field.Store.YES, Field.Index.TOKENIZED );

Code I use for opening the IndexWriter:
writer =3D new IndexWriter(indexLocation,new MyAnalyzer(), false);

I know the Analyzer is being invoked because I have my own Analyzer
(which is sort of like the PerFieldAnalyzerWrapper) and I have debug
statements in its tokenStream(fieldName, reader) method that do get
printed. When I test the Analyzer separately, it analyzes as expected.

Here is the code for MyAnalyzer.tokenStream();
    public TokenStream tokenStream(String fieldName, Reader reader)
    {
    	if ( ContactIndexer.getKeyWordFields().contains( fieldName ) )
        {
    	    LOG.debug( "fieldName:" + fieldName + " is a keyword" );
            return new LowerCaseFilter( new KeywordTokenizer( reader )
);
        }
       =20
        LOG.debug( "fieldName:" + fieldName + " is not a keyword" );
        return new PorterStemFilter(
    	         new StopFilter(
                    new LowerCaseFilter(
                        new StandardFilter(
                           new StandardTokenizer( reader ) ) )=20
                                 , StandardAnalyzer.STOP_WORDS ) );
       =20
    }=20

Any help hugely appreciated.

Venu




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 18:00:23 2006
Return-Path: <java-user-return-21212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4572 invoked from network); 8 Jun 2006 18:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 18:00:23 -0000
Received: (qmail 53246 invoked by uid 500); 8 Jun 2006 18:00:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53224 invoked by uid 500); 8 Jun 2006 18:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53213 invoked by uid 99); 8 Jun 2006 18:00:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 11:00:16 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of danutchi@gmail.com designates 66.249.82.198 as permitted sender)
Received: from [66.249.82.198] (HELO wx-out-0102.google.com) (66.249.82.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 11:00:15 -0700
Received: by wx-out-0102.google.com with SMTP id s16so341975wxc
        for <java-user@lucene.apache.org>; Thu, 08 Jun 2006 10:59:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Ei9wJxIUJz9blMguIiMK+4BNikeMXNxknFEhLhOl3q6Rqf5+vqc6J+BhYfJsqshm1D5lP/NBUhlZ3mhH+mh2+N5LY7yf7YqW6KLfGssoxAnue+/yUpFnKqxkxvFlV+gMiuDLCcGb/0KwAx4Zx1cZOsgMVHbKIuxKNlRPd2L/5pU=
Received: by 10.70.36.1 with SMTP id j1mr2346733wxj;
        Thu, 08 Jun 2006 10:59:54 -0700 (PDT)
Received: by 10.70.33.17 with HTTP; Thu, 8 Jun 2006 10:59:54 -0700 (PDT)
Message-ID: <d7a865a50606081059k4a358d31wcec2863589da888c@mail.gmail.com>
Date: Thu, 8 Jun 2006 19:59:54 +0200
From: "Dan Wiggin" <danutchi@gmail.com>
To: java-user@lucene.apache.org
Subject: Multisearch Problem
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14515_14091341.1149789594468"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14515_14091341.1149789594468
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello everybody I have a new problem that I want share with you :D

The problem is doing a search in a Multisearcher.
Normally this multisearcher works well. When I start my tomcat and my two
index are empties, and if I do a search wtih this index I have no exception
and obviusly no hits, but after I do a reindex of an Index and I do a search
I obtain the next pretty message :

19:49:11,327 [ERROR] SearchResults::creacio:202 - [ERROR Indexation ]
SearchResults problem iterating hits
java.lang.ArrayIndexOutOfBoundsException: -1
        at org.apache.lucene.index.MultiReader.document(MultiReader.java
:108)
        at org.apache.lucene.search.IndexSearcher.doc(IndexSearcher.java:74)
        at org.apache.lucene.search.MultiSearcher.doc(MultiSearcher.java:66)
        at org.apache.lucene.search.Hits.doc(Hits.java:101)


It's very strange because before it, I do a hits.length and tell me that I
have some results, the problem I think it is when I'm working with all hits
(iterating) . And this problem doesn't appear when the other index is
indexed.
Anyone have any Idea what I can do?
thks for reply all my questions, It's a good tool but I have some problems.

------=_Part_14515_14091341.1149789594468--

From java-user-return-21213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 19:08:09 2006
Return-Path: <java-user-return-21213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23778 invoked from network); 8 Jun 2006 19:08:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 19:08:09 -0000
Received: (qmail 79952 invoked by uid 500); 8 Jun 2006 19:08:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79916 invoked by uid 500); 8 Jun 2006 19:08:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79901 invoked by uid 99); 8 Jun 2006 19:08:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 12:08:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 12:08:00 -0700
Received: (qmail 14440 invoked from network); 8 Jun 2006 19:07:37 -0000
Received: from unknown (HELO p5496cfe4.dip.t-dialin.net) ([pbs]695637@[84.150.207.228])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 Jun 2006 19:07:37 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Multisearch Problem
Date: Thu, 8 Jun 2006 21:08:01 +0200
User-Agent: KMail/1.8.2
References: <d7a865a50606081059k4a358d31wcec2863589da888c@mail.gmail.com>
In-Reply-To: <d7a865a50606081059k4a358d31wcec2863589da888c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606082108.01418@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Donnerstag 08 Juni 2006 19:59, Dan Wiggin wrote:

> java.lang.ArrayIndexOutOfBoundsException: -1

You get this when you access a Lucene 1.9/2.0 index with Lucene 1.4. Maybe 
your classpath contains two versions of Lucene.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 19:47:53 2006
Return-Path: <java-user-return-21214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43215 invoked from network); 8 Jun 2006 19:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 19:47:52 -0000
Received: (qmail 54690 invoked by uid 500); 8 Jun 2006 19:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53697 invoked by uid 500); 8 Jun 2006 19:47:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53686 invoked by uid 99); 8 Jun 2006 19:47:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 12:47:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of galeas@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Jun 2006 12:47:46 -0700
Received: (qmail invoked by alias); 08 Jun 2006 19:47:24 -0000
Received: from p5083F817.dip.t-dialin.net (EHLO patricio) [80.131.248.23]
  by mail.gmx.net (mp032) with SMTP; 08 Jun 2006 21:47:24 +0200
X-Authenticated: #24368204
From: "Patricio" <galeas@gmx.de>
To: <java-user@lucene.apache.org>
Subject: adding term information to index ...
Date: Thu, 8 Jun 2006 21:47:14 +0200
Message-ID: <007701c68b34$5d7d2280$1402a8c0@patricio>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0078_01C68B45.2105F280"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcaLNFbx/g1w7a+WQ4OLjUcNS4mIUA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0078_01C68B45.2105F280
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello,

I try to use Lucene to make some experiments with the distribution of words
in documents. Using the TermPositionVector, one can compute some statistics
about word positions (mean, standard deviation, etc.). 

It is possible to store such statistical values directly in the Lucene
index?

For example, I want to save the statistical values of each Term by the index
process, and get them later in query time.

 

Term    =>    <docNum, freq, <X1, X2, ... ,Xn> >

 

Where <X1, X2, ... ,Xn> are some statistical values about the Term position
in docNum.

 

 

Should I modify the classes: IndexWriter.java and IndexReader.java?

 

Thank You

pgaleas

 


------=_NextPart_000_0078_01C68B45.2105F280--


From java-user-return-21215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 19:54:34 2006
Return-Path: <java-user-return-21215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45339 invoked from network); 8 Jun 2006 19:54:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 19:54:34 -0000
Received: (qmail 64814 invoked by uid 500); 8 Jun 2006 19:54:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64792 invoked by uid 500); 8 Jun 2006 19:54:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 38692 invoked by uid 99); 8 Jun 2006 19:36:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
From: "Patricio Galeas" <patricio@galeas.de>
To: <java-user@lucene.apache.org>
Subject: adding term information to Index
Date: Thu, 8 Jun 2006 21:36:07 +0200
Message-ID: <006a01c68b32$cbfefff0$1402a8c0@patricio>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_006B_01C68B43.8F87CFF0"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcaLMsmv4gyc1BxeSIa1oX0gLgw39g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:7ebe486065e7cbca12d0f1567c7c535e
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_006B_01C68B43.8F87CFF0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello,

I try to use Lucene to make some experiments with the distribution of words
in documents. Using the TermPositionVector, one can compute some statistics
about word positions (mean, standard deviation, etc.). 

It is possible to store such statistical values directly in the Lucene
index?

For example, I want to save the statistical values of each Term (X1, X2, .,
Xn) by the index process, and get them later in query time.

 

Term    =>    <docNum, freq, <X1, X2, ... ,Xn> >

 

Should I modify the classes: IndexWriter.java and IndexReader.java?

 

Thank You

pgaleas

 


------=_NextPart_000_006B_01C68B43.8F87CFF0--


From java-user-return-21216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 08 23:55:16 2006
Return-Path: <java-user-return-21216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2079 invoked from network); 8 Jun 2006 23:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2006 23:55:16 -0000
Received: (qmail 77496 invoked by uid 500); 8 Jun 2006 23:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76312 invoked by uid 500); 8 Jun 2006 23:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76300 invoked by uid 99); 8 Jun 2006 23:55:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 16:55:10 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.227] (HELO web50314.mail.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Jun 2006 16:55:10 -0700
Received: (qmail 25068 invoked by uid 60001); 8 Jun 2006 23:54:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=cxrYiBlrk48qt9Bly20TJRIXcMwk0vaBxI2Kn9d/jHPN0DHHkKZYBk+B+1XIbT6A7WfBf1Y1RsxJ0c1WMTULeDwr+ggi98Xlpo6GJ/4JAcyv+qKgSgQaCOBgc+fx0rI0sNsRFL30C9mrhmG1yLoPFPzLS9diWKgILxQIh9m3kHA=  ;
Message-ID: <20060608235448.25066.qmail@web50314.mail.yahoo.com>
Received: from [72.229.167.99] by web50314.mail.yahoo.com via HTTP; Thu, 08 Jun 2006 16:54:48 PDT
Date: Thu, 8 Jun 2006 16:54:48 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Fwd: Lucene 2.0.0 release available
To: java-user@lucene.apache.org
In-Reply-To: <395975213.20060608115558@laposte.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Sven,

Somebody asked about the same thing a few weeks back and opened a JIRA issu=
e.  It looks like the push to ibiblio servers did not happen, even though I=
 added notes about that to the release HOWTO doc on the Wiki.  My notes mig=
ht be incorrect, so I commented on that JIRA issues asking for clarificatio=
ns, as people there seemed to know how new releases should get pushed out f=
or ibiblio.  Nobody responded yet, I'm afraid.  If you know how that's done=
, let me know, I'll gladly push the release files wherever they need to get=
 pushed.

Otis

----- Original Message ----
From: Sven Duzont <sven.duzont@laposte.net>
To: Daniel Naber <java-user@lucene.apache.org>
Sent: Thursday, June 8, 2006 5:55:58 AM
Subject: Re: Fwd: Lucene 2.0.0 release available

Hello,=20

Nice job, thanks.
Question : When will it be available on Maven2 repositories ?
Thanks

--- Sven

Le samedi 27 mai 2006 =C3=A0 13:37:54, vous =C3=A9criviez :

DN> ----------  Forwarded Message  ----------

DN> Subject: Lucene 2.0.0 release available
DN> Date: Samstag 27 Mai 2006 05:57
DN> From: Doug Cutting <cutting@apache.org>
DN> To: java-dev@lucene.apache.org

DN> Release 2.0.0 of Lucene is now available from:

DN> http://www.apache.org/dyn/closer.cgi/lucene/java/

DN> This is mostly a bugfix release from release 1.9.1. Note however that
DN> deprecated 1.x features have now been removed. Any code that compiles
DN> against Lucene 1.9.1 without deprecation warnings should work without
DN> further changes with any 2.x release.

DN> The detailed change log is at:

DN> http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_0_0/CHANGES.t=
xt

DN> Doug


DN> ---------------------------------------------------------------------
DN> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
DN> For additional commands, e-mail: java-dev-help@lucene.apache.org

DN> -------------------------------------------------------




--=20
Cordialement,
 Sven                            mailto:sven.duzont@laposte.net



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 00:04:02 2006
Return-Path: <java-user-return-21217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3811 invoked from network); 9 Jun 2006 00:04:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 00:04:02 -0000
Received: (qmail 86163 invoked by uid 500); 9 Jun 2006 00:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85493 invoked by uid 500); 9 Jun 2006 00:03:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85482 invoked by uid 99); 9 Jun 2006 00:03:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:03:56 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Jun 2006 17:03:55 -0700
Received: (qmail 23413 invoked by uid 60001); 9 Jun 2006 00:03:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Up3s9tidyUUQ7BQS1T07xAD1GSJcZygGgYyUgtx7y1o4JhlCFqsj4XxHvHTNQo4YcA0yVRHPr/jv/lVWgibgrq3d7/H05ilLMNFZ8C8wr8oB5HLfBZzXVMI71GFKiYMQypxEPM3baXpTtStcbecU7HEmHRecFnQfWESxgfJzWhw=  ;
Message-ID: <20060609000333.23411.qmail@web50305.mail.yahoo.com>
Received: from [72.229.167.99] by web50305.mail.yahoo.com via HTTP; Thu, 08 Jun 2006 17:03:33 PDT
Date: Thu, 8 Jun 2006 17:03:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexWriter.addIndexes & optimization
To: java-user@lucene.apache.org
In-Reply-To: <4487319D.10006@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When writing a unit test that comapres RAMDirectory and FSDirectory performance for Lucene in Action I had a very hard time showing that RAMDirectory really is faster. :)  Just set your maxBufferedDocs to as high a number as your RAM/heap will let you, and pick a mergeFactor that is high, but doesn't get you in trouble with open files.

Otis

----- Original Message ----
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, June 7, 2006 4:05:49 PM
Subject: Re: IndexWriter.addIndexes & optimization

Benjamin Stein wrote:

> 
> I could probably store the little RAMDirectories to disk as many
> FSDirectories, and then addIndexes() of *all* the FSDirectories at the end
> instead of every time.  That would probably be smart.
> 
> Glad I asked myself!
> 

That was what I was going to suggest - you may also want to benchmark to 
see if the RAMDirectory is buying you anything.  With the data that I am 
indexing on my hardware, I found it to be faster to index to a regular 
FSDirectory that it is to use the RAMDirectory.  Especially if you tweak 
the performance knobs on the indexer so it does its own caching before 
it writes to the Directory.

I do batches of documents to FSDirectories - and then merge all of the 
FSDirectories into a new master index at the end - so I never have to 
optimize during the indexing process.

Dan


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 00:06:17 2006
Return-Path: <java-user-return-21218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4346 invoked from network); 9 Jun 2006 00:06:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 00:06:17 -0000
Received: (qmail 88575 invoked by uid 500); 9 Jun 2006 00:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88537 invoked by uid 500); 9 Jun 2006 00:06:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88526 invoked by uid 99); 9 Jun 2006 00:06:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:06:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Seeta.Somagani@xplana.com designates 65.61.155.233 as permitted sender)
Received: from [65.61.155.233] (HELO server1.takeexit33.com) (65.61.155.233)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Jun 2006 17:06:11 -0700
Received: (qmail 20954 invoked from network); 9 Jun 2006 00:05:50 -0000
Received: from w082.z209031132.bos-ma.dsl.cnc.net (HELO xplana.com) (209.31.132.82)
  by whereisyour.com with SMTP; 9 Jun 2006 00:05:50 -0000
Content-class: urn:content-classes:message
Subject: fieldNorm
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 8 Jun 2006 20:00:22 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <666F5DC00A92964896146F60A828D32B98A68C@MASSAVE.xplana.priv>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: fieldNorm
thread-index: AcaLVwUZNU883kr0TeydXPCMnfiNuwAAA+7A
From: "Seeta Somagani" <Seeta.Somagani@xplana.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

My simple search application is returning hits ordered by the default
relevance. But, I noticed that when for example searched for "what", the
first hit has considerably lesser occurrences of the term "what" than
those that follow. When I viewed the explanation for each document, all
the values made sense except the fieldNorm which is comparatively very
high for the topmost hit.=20

Can someone please explain how the fieldNorm factor is calculated?

Thanks so much.
Seeta

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 00:13:08 2006
Return-Path: <java-user-return-21219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5630 invoked from network); 9 Jun 2006 00:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 00:13:08 -0000
Received: (qmail 98582 invoked by uid 500); 9 Jun 2006 00:13:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98547 invoked by uid 500); 9 Jun 2006 00:13:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98533 invoked by uid 99); 9 Jun 2006 00:13:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:13:02 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Jun 2006 17:13:01 -0700
Received: (qmail 25482 invoked by uid 60001); 9 Jun 2006 00:12:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=scVvBSEQYN+r4n5cbFZSNu8QCFtwKJx9YSoNxmKewsBtwEvFMRz+259T8EvX2Bod1Fnmwsp1vvg7I0yq4UqxP2BFpU6ydI3/tMGKeMnkTnDfp4W4EoroKiJdO7GEcgBwBw64ORT/9p7IxcLynT35D9h6+LeK+zxEdVcnBsZnD+E=  ;
Message-ID: <20060609001239.25480.qmail@web50310.mail.yahoo.com>
Received: from [72.229.167.99] by web50310.mail.yahoo.com via HTTP; Thu, 08 Jun 2006 17:12:39 PDT
Date: Thu, 8 Jun 2006 17:12:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: fieldNorm
To: java-user@lucene.apache.org
In-Reply-To: <666F5DC00A92964896146F60A828D32B98A68C@MASSAVE.xplana.priv>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In English, fieldNorm essentially means:
"give term hits in shorter fields more weight/importance than those in longer fields".

I believe the implementation is  1/sqrt(number of terms in field).

Keep in mind that index-time boost is calculated into the field norm.

Otis

----- Original Message ----
From: Seeta Somagani <Seeta.Somagani@xplana.com>
To: java-user@lucene.apache.org
Sent: Thursday, June 8, 2006 8:00:22 PM
Subject: fieldNorm

Hi,

My simple search application is returning hits ordered by the default
relevance. But, I noticed that when for example searched for "what", the
first hit has considerably lesser occurrences of the term "what" than
those that follow. When I viewed the explanation for each document, all
the values made sense except the fieldNorm which is comparatively very
high for the topmost hit. 

Can someone please explain how the fieldNorm factor is calculated?

Thanks so much.
Seeta

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 00:30:52 2006
Return-Path: <java-user-return-21220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9997 invoked from network); 9 Jun 2006 00:30:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 00:30:52 -0000
Received: (qmail 14152 invoked by uid 500); 9 Jun 2006 00:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13371 invoked by uid 500); 9 Jun 2006 00:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13359 invoked by uid 99); 9 Jun 2006 00:30:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:30:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 17:30:46 -0700
Received: by py-out-1112.google.com with SMTP id i75so700220pye
        for <java-user@lucene.apache.org>; Thu, 08 Jun 2006 17:30:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VymSL+Xbnayun9Y7wdKEQUpImMmBpjVoT4/Zt/hZ3nf5bCWndxB89pmLzMNcOuu67UXNCbKqUEr7cJKnf0pIDHkzT37TaIx/EMgY6UwNm+5Eq1T/pfuTW8/LsPN2cxk94fqQyzMGzYINb/zY/DTlQLPe9uWKWUA0UqrJyUDz4fo=
Received: by 10.35.93.19 with SMTP id v19mr1727503pyl;
        Thu, 08 Jun 2006 17:30:25 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Thu, 8 Jun 2006 17:30:25 -0700 (PDT)
Message-ID: <c68e39170606081730l203eeb8ftd01902653ad12746@mail.gmail.com>
Date: Thu, 8 Jun 2006 20:30:25 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.addIndexes & optimizatio
In-Reply-To: <20060609000333.23411.qmail@web50305.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4487319D.10006@gmail.com>
	 <20060609000333.23411.qmail@web50305.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/8/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> When writing a unit test that comapres RAMDirectory and FSDirectory performance for Lucene in Action I had a very hard time showing that RAMDirectory really is faster. :)

For indexing, even if you open IndexWriter with a FSDirectory, it
internally uses RAMDirectory to buffer until it reaches
maxBufferedDocs.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 03:43:39 2006
Return-Path: <java-user-return-21221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47295 invoked from network); 9 Jun 2006 03:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 03:43:39 -0000
Received: (qmail 55487 invoked by uid 500); 9 Jun 2006 03:43:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54694 invoked by uid 500); 9 Jun 2006 03:43:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54676 invoked by uid 99); 9 Jun 2006 03:43:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 20:43:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [128.255.44.97] (HELO serv07.divms.uiowa.edu) (128.255.44.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 20:43:33 -0700
Received: from [192.168.1.4] (12-217-224-230.client.mchsi.com [12.217.224.230]) by serv07.divms.uiowa.edu with id k593h4i1011224 for <java-user@lucene.apache.org>; Thu, 8 Jun 2006 22:43:06 -0500
Mime-Version: 1.0 (Apple Message framework v750)
Content-Transfer-Encoding: 7bit
Message-Id: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Bob Arens <lists@absent-error.net>
Subject: Adding Fields to Documents with UnStored Fields - crazy scheme?
Date: Thu, 8 Jun 2006 22:42:59 -0500
X-Mailer: Apple Mail (2.750)
X-Spam-Score: 2.873 (**) AWL,BAYES_00,RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Scanned-By: MIMEDefang 2.55 on 128.255.44.22
X-Virus-Scanned: ClamAV version 0.88.2, clamav-milter version 0.88.2 on serv07.divms.uiowa.edu
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I've been handed a legacy index containing Documents with two Fields;  
one is a file ID, the other is contents of the file. The contents  
field was added using UnStored. Now, we want to add fields. Oh, the  
humanity!

I've looked through the archives, and previously suggested methods  
won't work well for us.
1. Recreating with Luke is infeasible, as our index is 1.8 Gigabytes  
in size.
2. Recreating the index from scratch will require the moving of the  
heavens and the earth.

My crazy idea - can we add new Documents to the index with the Fields  
we wish to add, and duplicate file IDs? i.e. an entry for file ID Foo  
would consist of two Documents,
Document X: fileID:<Foo>, contents:<unknown>
Document Y:fileID:<Foo>, title:<Bar>, url:<www.baz.com>, etc.

It would be no problem to implement different Searcher objects to  
look at specific Fields, we were already leaning in that direction  
anyhow.

So - is this scheme crazy enough to work? Thanks for your thoughts,
Bob 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 06:13:32 2006
Return-Path: <java-user-return-21222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78427 invoked from network); 9 Jun 2006 06:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 06:13:31 -0000
Received: (qmail 78050 invoked by uid 500); 9 Jun 2006 06:13:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78008 invoked by uid 500); 9 Jun 2006 06:13:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77806 invoked by uid 99); 9 Jun 2006 06:13:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 23:13:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 23:13:20 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1F0355B763; Thu,  8 Jun 2006 23:12:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 166C17F403
	for <java-user@lucene.apache.org>; Thu,  8 Jun 2006 23:12:58 -0700 (PDT)
Date: Thu, 8 Jun 2006 23:12:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL
In-Reply-To: <20060608075627.BA9C4187B1@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0606082310390.1736@hal.rescomp.berkeley.edu>
References: <20060608075627.BA9C4187B1@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Whom should I post to suggest adding a note to
: http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html
: #Field(java.lang.String,%20java.io.Reader) to say that the Reader is only
: actually read from when the document is added? Without internal knowledge,

Documentation improvemnets are handled like any other code improvement --
just open a Jira issue and attach a patch.

(allthough i'm guessing a true patch isn't all that neccessary -- just be
explicitly about the method you think has bad javadocs, and include what
you think the text should be)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 06:28:23 2006
Return-Path: <java-user-return-21223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81301 invoked from network); 9 Jun 2006 06:28:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 06:28:22 -0000
Received: (qmail 99297 invoked by uid 500); 9 Jun 2006 06:28:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98753 invoked by uid 500); 9 Jun 2006 06:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98742 invoked by uid 99); 9 Jun 2006 06:28:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 23:28:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jun 2006 23:28:15 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1108839uge
        for <java-user@lucene.apache.org>; Thu, 08 Jun 2006 23:27:54 -0700 (PDT)
Received: by 10.78.18.1 with SMTP id 1mr778906hur;
        Thu, 08 Jun 2006 23:27:54 -0700 (PDT)
Received: by 10.78.57.17 with HTTP; Thu, 8 Jun 2006 23:27:54 -0700 (PDT)
Message-ID: <be7ea59a0606082327q2c902e40t20dc4e0107a802d0@mail.gmail.com>
Date: Fri, 9 Jun 2006 14:27:54 +0800
From: "Alan Boo" <alan@e-sandakan.net>
To: java-user@lucene.apache.org
Subject: return single document from duplicated documents in index
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

g'day,

i've two questions.

let's say the following is my index with 2 field : title and contents

title                   contents
beer                  beer is good
beer                  beer is good
cat                    sleepy
dog                   what a cute one!
beer                  beer is good

if i do a search on beer, i'll get 3 result returns and three of them
are the same, is there any elegant way to workaround so the hitlist
contains only one document instead of 3? (and i want the index
contains duplicate records for some reason)

____


yet, another senario,

title                   contents                      location
        date
beer                  beer is god                   /usr/data/beer
   111111111
beer                  beer is good                 /usr/data/beer
  222222255
cat                    sleepy                         /usr/data/cat
      222222224
dog                   what a cute one!           /usr/data/dog         555555555
beer                  beer is good                 /usr/data/beer2
   999999999

i want to do a search on beer that will returns only the 2 result on
beer on different location and it must be the latest. is there any way
to do that?

regards,

alan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 07:01:09 2006
Return-Path: <java-user-return-21224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89870 invoked from network); 9 Jun 2006 07:01:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 07:01:09 -0000
Received: (qmail 32565 invoked by uid 500); 9 Jun 2006 07:00:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32523 invoked by uid 500); 9 Jun 2006 07:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32506 invoked by uid 99); 9 Jun 2006 07:00:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:00:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:00:51 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2CCD55B77E; Fri,  9 Jun 2006 00:00:17 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 49EBA7F403
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 00:00:17 -0700 (PDT)
Date: Fri, 9 Jun 2006 00:00:17 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Property comparison possible??
In-Reply-To: <92A278501EF50444AD3EE1FFB51219550BCE3B5A@emss10m03.us.lmco.com>
Message-ID: <Pine.LNX.4.58.0606082352210.1736@hal.rescomp.berkeley.edu>
References: <92A278501EF50444AD3EE1FFB51219550BCE3B5A@emss10m03.us.lmco.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: Is it possible to perform a search using fields instead of terms, eg.
: like this sql:

: SELECT col1, col2
: FROM table1
: WHERE col1 = col2

presumably "col1" and "col2" are untokenized fields? (otherwise equality
is kind of vague)

if you really wanted to add a constraint like this to an existing lucene
query, you could impliment it by walking the FieldCaches for the two
fields in parallel and recording any doc whose value is the same in each
-- but if this is a piece of information you expect to want a lot, you're
better of just testing this type of information when you index your doc,
and add it as a seperate field.

(i won't say this problem is a screw, and Lucene is a hammer; but this
problem is a phillips head screw, and Lucene is a tiny flat screwdriver
that just happens to fit in the philips head and can turn it if you apply
just the right amount of pressure -- but it's certainly not what it was
intended for)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 07:11:19 2006
Return-Path: <java-user-return-21225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93095 invoked from network); 9 Jun 2006 07:11:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 07:11:18 -0000
Received: (qmail 47918 invoked by uid 500); 9 Jun 2006 07:11:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47889 invoked by uid 500); 9 Jun 2006 07:11:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47878 invoked by uid 99); 9 Jun 2006 07:11:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:11:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:11:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C1D635B763; Fri,  9 Jun 2006 00:10:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B28D07F403
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 00:10:48 -0700 (PDT)
Date: Fri, 9 Jun 2006 00:10:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Adding Fields to Documents with UnStored Fields - crazy scheme?
In-Reply-To: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net>
Message-ID: <Pine.LNX.4.58.0606090005020.1736@hal.rescomp.berkeley.edu>
References: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: 2. Recreating the index from scratch will require the moving of the
: heavens and the earth.
:
: My crazy idea - can we add new Documents to the index with the Fields
: we wish to add, and duplicate file IDs? i.e. an entry for file ID Foo
: would consist of two Documents,
: Document X: fileID:<Foo>, contents:<unknown>
: Document Y:fileID:<Foo>, title:<Bar>, url:<www.baz.com>, etc.
:
: It would be no problem to implement different Searcher objects to
: look at specific Fields, we were already leaning in that direction
: anyhow.

you certainly could do that .. but what exactly would the point be? ..
presumably you currently query for "contents:germany" and get back the
fileIDs of files that contain the work germany in their contents -- if you
add another document with the same fileID and a title field and a url
field, and you search for "contents:germany" you're still going to get
back the same document -- it's not going to magically have the other
fields in it just because they have the same fileID.

I supose you could do the search on contents, get back the fileIDs and
*then* do another search for those fileIDs to get back the titles and urls
... but i can't imagine earth and the heavens are that hard to move that
you'd want to jump through that hoop on every search.

(if you're goingto add these new documents with the title and url and all
that -- why can't you add the contents atthe same time ... are the
contents stored someplace else that you no longer have access to - but you
do have access to all the other fields???)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 07:21:29 2006
Return-Path: <java-user-return-21226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1703 invoked from network); 9 Jun 2006 07:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 07:21:29 -0000
Received: (qmail 54724 invoked by uid 500); 9 Jun 2006 07:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54692 invoked by uid 500); 9 Jun 2006 07:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54681 invoked by uid 99); 9 Jun 2006 07:21:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:21:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:21:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 02D935B763; Fri,  9 Jun 2006 00:20:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F34E27F403
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 00:20:58 -0700 (PDT)
Date: Fri, 9 Jun 2006 00:20:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: return single document from duplicated documents in index
In-Reply-To: <be7ea59a0606082327q2c902e40t20dc4e0107a802d0@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606090016370.1736@hal.rescomp.berkeley.edu>
References: <be7ea59a0606082327q2c902e40t20dc4e0107a802d0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


take a look at the HitCollector and Filter APIs .. you can impliment any
logic you want in either of those classes to restrict what results you get
-- and the FieldCache gives you an easy way to check what the value of a
particular indexed field is.

storing the mappings of field value to "best" matching doc is up to you.

: Date: Fri, 9 Jun 2006 14:27:54 +0800
: From: Alan Boo <alan@e-sandakan.net>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: return single document from duplicated documents in index
:
: g'day,
:
: i've two questions.
:
: let's say the following is my index with 2 field : title and contents
:
: title                   contents
: beer                  beer is good
: beer                  beer is good
: cat                    sleepy
: dog                   what a cute one!
: beer                  beer is good
:
: if i do a search on beer, i'll get 3 result returns and three of them
: are the same, is there any elegant way to workaround so the hitlist
: contains only one document instead of 3? (and i want the index
: contains duplicate records for some reason)
:
: ____
:
:
: yet, another senario,
:
: title                   contents                      location
:         date
: beer                  beer is god                   /usr/data/beer
:    111111111
: beer                  beer is good                 /usr/data/beer
:   222222255
: cat                    sleepy                         /usr/data/cat
:       222222224
: dog                   what a cute one!           /usr/data/dog         555555555
: beer                  beer is good                 /usr/data/beer2
:    999999999
:
: i want to do a search on beer that will returns only the 2 result on
: beer on different location and it must be the latest. is there any way
: to do that?
:
: regards,
:
: alan
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 07:28:26 2006
Return-Path: <java-user-return-21227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3733 invoked from network); 9 Jun 2006 07:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 07:28:25 -0000
Received: (qmail 61383 invoked by uid 500); 9 Jun 2006 07:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60673 invoked by uid 500); 9 Jun 2006 07:28:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60659 invoked by uid 99); 9 Jun 2006 07:28:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:28:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:28:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 749C75B763; Fri,  9 Jun 2006 00:27:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 716CC7F403
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 00:27:58 -0700 (PDT)
Date: Fri, 9 Jun 2006 00:27:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Different scoring mechanism
In-Reply-To: <5DD2165A95E801438DAA9C1E0957EB5E012E0216@ewiex02.dynamic.ewi.utwente.nl>
Message-ID: <Pine.LNX.4.58.0606090022410.1736@hal.rescomp.berkeley.edu>
References: <5DD2165A95E801438DAA9C1E0957EB5E012E0216@ewiex02.dynamic.ewi.utwente.nl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:    ! If a document does not contain a queryterm this score can be larger
: or smaller than 0 !

if a document doesn't contain a term, then the scorer for that query will
never even try to score that document -- regardless of what your
Similarity class looks like.

if you really want this kind of behavior, you'll need to roll your own
TermQuery/TermScorer classes and change next and skipTo to allways advance
ot the next doc -- regardless of wether or not it matches (you can check
for that in the score function and act accordingly)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 07:48:03 2006
Return-Path: <java-user-return-21228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8422 invoked from network); 9 Jun 2006 07:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 07:48:02 -0000
Received: (qmail 78996 invoked by uid 500); 9 Jun 2006 07:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78971 invoked by uid 500); 9 Jun 2006 07:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78957 invoked by uid 99); 9 Jun 2006 07:47:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:47:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [128.255.44.97] (HELO serv07.divms.uiowa.edu) (128.255.44.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 00:47:54 -0700
Received: from [192.168.1.4] (12-217-224-230.client.mchsi.com [12.217.224.230]) by serv07.divms.uiowa.edu with id k597lLeR018881 for <java-user@lucene.apache.org>; Fri, 9 Jun 2006 02:47:29 -0500
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <Pine.LNX.4.58.0606090005020.1736@hal.rescomp.berkeley.edu>
References: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net> <Pine.LNX.4.58.0606090005020.1736@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A5DE0480-CC91-4AA8-A4DF-48BC599A9EA3@absent-error.net>
Content-Transfer-Encoding: 7bit
From: Bob Arens <lists@absent-error.net>
Subject: Re: Adding Fields to Documents with UnStored Fields - crazy scheme?
Date: Fri, 9 Jun 2006 02:47:16 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Spam-Score: 2.661 (**) AWL,BAYES_00,RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Scanned-By: MIMEDefang 2.55 on 128.255.44.22
X-Virus-Scanned: ClamAV version 0.88.2, clamav-milter version 0.88.2 on serv07.divms.uiowa.edu
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 9, 2006, at 2:10 AM, Chris Hostetter wrote:

>
> : 2. Recreating the index from scratch will require the moving of the
> : heavens and the earth.
> :
> : My crazy idea - can we add new Documents to the index with the  
> Fields
> : we wish to add, and duplicate file IDs? i.e. an entry for file ID  
> Foo
> : would consist of two Documents,
> : Document X: fileID:<Foo>, contents:<unknown>
> : Document Y:fileID:<Foo>, title:<Bar>, url:<www.baz.com>, etc.
> :
> : It would be no problem to implement different Searcher objects to
> : look at specific Fields, we were already leaning in that direction
> : anyhow.
>
> you certainly could do that .. but what exactly would the point be? ..
> presumably you currently query for "contents:germany" and get back the
> fileIDs of files that contain the work germany in their contents --  
> if you
> add another document with the same fileID and a title field and a url
> field, and you search for "contents:germany" you're still going to get
> back the same document -- it's not going to magically have the other
> fields in it just because they have the same fileID.
That kinda would be the point - "contents:germany" would get the same  
fileIDs, but "contents:germany title:medicine" would (hopefully) give  
us a more specific query.

> I supose you could do the search on contents, get back the fileIDs and
> *then* do another search for those fileIDs to get back the titles  
> and urls
> ... but i can't imagine earth and the heavens are that hard to move  
> that
> you'd want to jump through that hoop on every search.
Good point. Perhaps the better idea would be to build a separate  
index with the fields to be added, and create a MultiSearcher to  
operate over both indices.

> (if you're goingto add these new documents with the title and url  
> and all
> that -- why can't you add the contents atthe same time ... are the
> contents stored someplace else that you no longer have access to -  
> but you
> do have access to all the other fields???)
That is indeed the case. We have a BerkeleyDB with titles, URLs, that  
sort of thing for an on-disk precache, but a) the code written to  
actually generate the Lucene index is terrible, b) the resources used  
to generate the index are scattered at best, missing at worst, and c)  
the person who wrote the code isn't available any more. I was hoping  
to find some Brilliant Plan to get this done quickly (we're demoing  
for the World Health Organization sometime this week).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 08:14:15 2006
Return-Path: <java-user-return-21229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14855 invoked from network); 9 Jun 2006 08:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 08:14:15 -0000
Received: (qmail 18881 invoked by uid 500); 9 Jun 2006 08:14:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18831 invoked by uid 500); 9 Jun 2006 08:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18794 invoked by uid 99); 9 Jun 2006 08:14:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 01:14:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.28] (HELO godard.uk.mediasurface.com) (193.123.241.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 01:14:06 -0700
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by godard.uk.mediasurface.com (8.13.4+Sun/8.13.4) with ESMTP id k598DPJp001178
	for <java-user@lucene.apache.org>; Fri, 9 Jun 2006 08:13:40 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Property comparison possible??
Date: Fri, 9 Jun 2006 09:13:32 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A0178F53C@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Property comparison possible??
Thread-Index: AcaLkn3YSmuskHIMTGe8fBxi9ZTtnwACcRkg
From: "Robert Haycock" <Robert.Haycock@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Scanned-By: MIMEDefang 2.54 on 10.0.5.28
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

He he, nice comparison!

Cheers for the advice.

Rob.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: 09 June 2006 08:00
To: java-user@lucene.apache.org
Subject: RE: Property comparison possible??

: Is it possible to perform a search using fields instead of terms, eg.
: like this sql:

: SELECT col1, col2
: FROM table1
: WHERE col1 =3D col2

presumably "col1" and "col2" are untokenized fields? (otherwise equality
is kind of vague)

if you really wanted to add a constraint like this to an existing lucene
query, you could impliment it by walking the FieldCaches for the two
fields in parallel and recording any doc whose value is the same in each
-- but if this is a piece of information you expect to want a lot,
you're
better of just testing this type of information when you index your doc,
and add it as a seperate field.

(i won't say this problem is a screw, and Lucene is a hammer; but this
problem is a phillips head screw, and Lucene is a tiny flat screwdriver
that just happens to fit in the philips head and can turn it if you
apply
just the right amount of pressure -- but it's certainly not what it was
intended for)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 08:33:39 2006
Return-Path: <java-user-return-21230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19288 invoked from network); 9 Jun 2006 08:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 08:33:39 -0000
Received: (qmail 36664 invoked by uid 500); 9 Jun 2006 08:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36638 invoked by uid 500); 9 Jun 2006 08:33:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36627 invoked by uid 99); 9 Jun 2006 08:33:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 01:33:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 01:33:31 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 3F12F187B3; Fri,  9 Jun 2006 08:33:06 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id E9E63187B1
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 08:33:01 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compound / non-compound index files and SIGKILL
Date: Fri, 9 Jun 2006 09:33:10 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	boundary="----=_NextPart_000_0000_01C68BA7.B7533240";
	protocol="application/x-pkcs7-signature";
	micalg=SHA1
In-Reply-To: <Pine.LNX.4.58.0606082310390.1736@hal.rescomp.berkeley.edu>
Thread-Index: AcaLi9LM5FIXw4L7QHC6NbPAVh9ydQAEwPBA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060609083301.E9E63187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C68BA7.B7533240
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I am no longer a Jira virgin.
http://issues.apache.org/jira/browse/LUCENE-594 Thanks again. 

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 09 June 2006 07:13
To: java-user@lucene.apache.org
Subject: RE: Compound / non-compound index files and SIGKILL


: Whom should I post to suggest adding a note to
:
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html
: #Field(java.lang.String,%20java.io.Reader) to say that the Reader is only
: actually read from when the document is added? Without internal knowledge,

Documentation improvemnets are handled like any other code improvement --
just open a Jira issue and attach a patch.

(allthough i'm guessing a true patch isn't all that neccessary -- just be
explicitly about the method you think has bad javadocs, and include what you
think the text should be)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0000_01C68BA7.B7533240
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYwOTA4
MzMwN1owIwYJKoZIhvcNAQkEMRYEFNkkN1kz1w/T7P2OwAM4oubrD6yEMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAIioeO1cL12rpgwFKiSJyFA56JTes6ff1Kva
cQk/zdHbnFZC9bFtQj5Q85ehaNV8pAGw6bWFosKm5TW4tou7OGo3knXycJjutRgS7VV5+I28egRu
YRbB97yLBpd8zaEpLEioMxEBHBYNkck72pmrqnCaVEYOFxtlaHeeHknYrLDxYz5YbAkXBxgRqKjC
Glu1Tt5Z9ZV7NdaZLnrvhpIAONtWJhab6P9RTHDkDb+xvpg5rbgWBfXtCCh7PYbyhHSuHj0u4UNb
s9GoxxHmWrsVa0pRAmcL2NaTT4WrHbEVuLHnvA82VkT0SF3vi3qfuxRq/GAq4CRNc2iBnVmKYtQP
BBUAAAAAAAA=

------=_NextPart_000_0000_01C68BA7.B7533240--


From java-user-return-21231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 08:52:48 2006
Return-Path: <java-user-return-21231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22310 invoked from network); 9 Jun 2006 08:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 08:52:48 -0000
Received: (qmail 53912 invoked by uid 500); 9 Jun 2006 08:52:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53726 invoked by uid 500); 9 Jun 2006 08:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53715 invoked by uid 99); 9 Jun 2006 08:52:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 01:52:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.28] (HELO godard.uk.mediasurface.com) (193.123.241.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 01:52:41 -0700
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by godard.uk.mediasurface.com (8.13.4+Sun/8.13.4) with ESMTP id k598qFt9006259
	for <java-user@lucene.apache.org>; Fri, 9 Jun 2006 08:52:15 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Adding Fields to Documents with UnStored Fields - crazy scheme?
Date: Fri, 9 Jun 2006 09:52:10 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A0178F555@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Adding Fields to Documents with UnStored Fields - crazy scheme?
Thread-Index: AcaLduhKQcCIXoRESyWw/N5W7U6FXgAKV3dQ
From: "Robert Haycock" <Robert.Haycock@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Scanned-By: MIMEDefang 2.54 on 10.0.5.28
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Bob,

No idea if this would work BUT...

If the old index is optimized then you might be able to iterate through
all the docs in your old index (sorted by doc id) and for each iteration
add the corresponding doc to the new index so it has a matching doc id.
The idea being that after searching on one index you could use the doc
id to look up the corresponding doc in the other index.  It's just so
crazy, it might just work!

Rob.

-----Original Message-----
From: Bob Arens [mailto:lists@absent-error.net]=20
Sent: 09 June 2006 04:43
To: java-user@lucene.apache.org
Subject: Adding Fields to Documents with UnStored Fields - crazy scheme?

Hi,

I've been handed a legacy index containing Documents with two Fields; =20
one is a file ID, the other is contents of the file. The contents =20
field was added using UnStored. Now, we want to add fields. Oh, the =20
humanity!

I've looked through the archives, and previously suggested methods =20
won't work well for us.
1. Recreating with Luke is infeasible, as our index is 1.8 Gigabytes =20
in size.
2. Recreating the index from scratch will require the moving of the =20
heavens and the earth.

My crazy idea - can we add new Documents to the index with the Fields =20
we wish to add, and duplicate file IDs? i.e. an entry for file ID Foo =20
would consist of two Documents,
Document X: fileID:<Foo>, contents:<unknown>
Document Y:fileID:<Foo>, title:<Bar>, url:<www.baz.com>, etc.

It would be no problem to implement different Searcher objects to =20
look at specific Fields, we were already leaning in that direction =20
anyhow.

So - is this scheme crazy enough to work? Thanks for your thoughts,
Bob=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 08:53:34 2006
Return-Path: <java-user-return-21232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22435 invoked from network); 9 Jun 2006 08:53:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 08:53:34 -0000
Received: (qmail 55686 invoked by uid 500); 9 Jun 2006 08:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55269 invoked by uid 500); 9 Jun 2006 08:53:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55258 invoked by uid 99); 9 Jun 2006 08:53:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 01:53:28 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of danutchi@gmail.com designates 66.249.82.206 as permitted sender)
Received: from [66.249.82.206] (HELO wx-out-0102.google.com) (66.249.82.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 01:53:27 -0700
Received: by wx-out-0102.google.com with SMTP id s16so445932wxc
        for <java-user@lucene.apache.org>; Fri, 09 Jun 2006 01:53:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Fn+K8WnjT1gLsla7chmytoj1mWfMHCq8mV/h359HroXBmEjo+zOHoT2QQhpGsEa7BTEdN/8pn+kJmUoF/4h/Lu4fIGJc9sgZNtb+nsqMbll/p0kN5y0wjXo00EYTCQtft9/BkrqbDPLgbe5cppjkMtjnxrsW7Sk4YjR7qSIAyzk=
Received: by 10.70.14.5 with SMTP id 5mr362999wxn;
        Fri, 09 Jun 2006 01:53:06 -0700 (PDT)
Received: by 10.70.33.17 with HTTP; Fri, 9 Jun 2006 01:53:06 -0700 (PDT)
Message-ID: <d7a865a50606090153h451c4467t3b8135aab66910d9@mail.gmail.com>
Date: Fri, 9 Jun 2006 10:53:06 +0200
From: "Dan Wiggin" <danutchi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multisearch Problem
In-Reply-To: <200606082108.01418@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19952_28215552.1149843186744"
References: <d7a865a50606081059k4a358d31wcec2863589da888c@mail.gmail.com>
	 <200606082108.01418@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19952_28215552.1149843186744
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My lucene version is 1.4.3 and always worked with this. Someday I have to do
the change to Lucene 2.0. But the problem isn't this because the problem is
something like One index have something indexed and other index is olnly
created but without any document.
It's very strange because this problem doesn't appear if I close my
aplication and restart it doing no rebuild, the problem doesn't exist.


2006/6/8, Daniel Naber <lucenelist2005@danielnaber.de>:
>
> On Donnerstag 08 Juni 2006 19:59, Dan Wiggin wrote:
>
> > java.lang.ArrayIndexOutOfBoundsException: -1
>
> You get this when you access a Lucene 1.9/2.0 index with Lucene 1.4. Maybe
> your classpath contains two versions of Lucene.
>
> Regards
> Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19952_28215552.1149843186744--

From java-user-return-21233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 11:48:42 2006
Return-Path: <java-user-return-21233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71257 invoked from network); 9 Jun 2006 11:48:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 11:48:41 -0000
Received: (qmail 30613 invoked by uid 500); 9 Jun 2006 11:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30581 invoked by uid 500); 9 Jun 2006 11:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30569 invoked by uid 99); 9 Jun 2006 11:48:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 04:48:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 04:48:33 -0700
Received: from ewiex01.ewi.utwente.nl (ewiex02.ewi.utwente.nl [130.89.10.121])
	by denhaag.ewi.utwente.nl (8.13.6/8.13.6) with ESMTP id k59Bm92p000675
	for <java-user@lucene.apache.org>; Fri, 9 Jun 2006 13:48:09 +0200 (MEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Different scoring mechanism
Date: Fri, 9 Jun 2006 13:48:05 +0200
Message-ID: <5DD2165A95E801438DAA9C1E0957EB5E012E066E@ewiex02.dynamic.ewi.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Different scoring mechanism
Thread-Index: AcaLlkxyaLX71vEKTOmfZ43gVC2T/QAH71jw
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.778 () ALL_TRUSTED,AWL,BAYES_00
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Fri, 09 Jun 2006 13:48:10 +0200 (MEST)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> :    ! If a document does not contain a queryterm this score=20
> can be larger
> : or smaller than 0 !
>=20
> if a document doesn't contain a term, then the scorer for=20
> that query will never even try to score that document --=20
> regardless of what your Similarity class looks like.
>=20
> if you really want this kind of behavior, you'll need to roll=20
> your own TermQuery/TermScorer classes and change next and=20
> skipTo to allways advance ot the next doc -- regardless of=20
> wether or not it matches (you can check for that in the score=20
> function and act accordingly)

That sounds like a reasonable approach. However, I still require the =
searching process to be optimized for retrieving the first n hits. (I =
made my own implementation outside the Lucene search-architecture which =
was unbelievably slow).

For example: a query containing two terms: "fast", "car", having =
document frequencies 300.000 and 20.000 in the index respectively. In a =
worst case scenario this would require 320.000 document scores to be =
calculated. I am not really sure how lucene optimizes its search, but I =
guess it does that by first processing the documents having the highest =
term frequencies (and thus highest combined score) with these query =
terms, and pruning the search if the n hits have been found and it's =
certain that no document can be found which will give a higher score.

If I would change the next function in my own scorer to process all =
document ids, I am afraid I will wreck Lucene's optimization method (as =
I am then not serving the documents in descending term frequency order).

Perhaps someone can tell if Lucene indeed requires <scorer>.next() to =
return the documents for a term in descending term frequency order?

Regards,
Dolf

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 11:51:09 2006
Return-Path: <java-user-return-21234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71765 invoked from network); 9 Jun 2006 11:51:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 11:51:09 -0000
Received: (qmail 34666 invoked by uid 500); 9 Jun 2006 11:51:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34230 invoked by uid 500); 9 Jun 2006 11:51:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34218 invoked by uid 99); 9 Jun 2006 11:51:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 04:51:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 04:51:02 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1545343B@mailer.syr.edu>; Fri, 9 Jun 2006 7:50:41 -0400
Message-ID: <44896091.3000109@syr.edu>
Date: Fri, 09 Jun 2006 07:50:41 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: adding term information to Index
References: <006a01c68b32$cbfefff0$1402a8c0@patricio>
In-Reply-To: <006a01c68b32$cbfefff0$1402a8c0@patricio>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Patricio,

As of now, I don't think this is possible.  However, we are slowly but 
surely working on similar problems.  Please feel free to add your two 
cents to http://wiki.apache.org/jakarta-lucene/FlexibleIndexing as we 
are considering several new ideas related to making indexing more 
flexible. 

For now, I guess you need to store them elsewhere. Or, if you have 
thoughts on what to do you could come up w/ an implementation and submit 
a patch.

-Grant

Patricio Galeas wrote:
> Hello,
>
> I try to use Lucene to make some experiments with the distribution of words
> in documents. Using the TermPositionVector, one can compute some statistics
> about word positions (mean, standard deviation, etc.). 
>
> It is possible to store such statistical values directly in the Lucene
> index?
>
> For example, I want to save the statistical values of each Term (X1, X2, .,
> Xn) by the index process, and get them later in query time.
>
>  
>
> Term    =>    <docNum, freq, <X1, X2, ... ,Xn> >
>
>  
>
> Should I modify the classes: IndexWriter.java and IndexReader.java?
>
>  
>
> Thank You
>
> pgaleas
>
>  
>
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 13:58:07 2006
Return-Path: <java-user-return-21235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12017 invoked from network); 9 Jun 2006 13:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 13:58:07 -0000
Received: (qmail 7865 invoked by uid 500); 9 Jun 2006 13:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7765 invoked by uid 500); 9 Jun 2006 13:57:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7728 invoked by uid 99); 9 Jun 2006 13:57:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 06:57:58 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.227] (HELO web60819.mail.yahoo.com) (209.73.178.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Jun 2006 06:57:56 -0700
Received: (qmail 34756 invoked by uid 60001); 9 Jun 2006 13:57:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=l6yR6Hjpjejz7dB5eC76VTXQx7M2AoG55VH3/QcFidlcGCMhrCZOaAh10oOenX82y9ZyCNISAlVeR0OklEXSgKOHt1Axxzi3oWp1sBq4f89kDxA61vrriK2Szlc2xxI8WlbA1C8kfI7GyFLbOrjG47YaEm3zgrCVqV1kkq9KUcM=  ;
Message-ID: <20060609135735.34754.qmail@web60819.mail.yahoo.com>
Received: from [212.199.22.143] by web60819.mail.yahoo.com via HTTP; Fri, 09 Jun 2006 06:57:35 PDT
Date: Fri, 9 Jun 2006 06:57:35 -0700 (PDT)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: combining two query calls in one?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1417201232-1149861455=:26017"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1417201232-1149861455=:26017
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hey,
   
  i am using the pmsearcher to retrieve data from a number of ram indexes.  i am calling my own search function which calls the indexsearcher.search meathod and returns the top 100 ids/scores , however, before returning the topdocs i start a separate thread which requeries the index and collects ALL the ids/scores and saves them.
   
  my question is, since i already queried the index is there anyway i can send only the topdocs on the top 100 (as is in the hits class default) but somehow continue retrieving the rest of the docs without requering? 
   
  thanx in advance...

 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1417201232-1149861455=:26017--

From java-user-return-21236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 14:30:40 2006
Return-Path: <java-user-return-21236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24159 invoked from network); 9 Jun 2006 14:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 14:30:39 -0000
Received: (qmail 87711 invoked by uid 500); 9 Jun 2006 14:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87646 invoked by uid 500); 9 Jun 2006 14:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87604 invoked by uid 99); 9 Jun 2006 14:30:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 07:30:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 07:30:24 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: searching multiple indexes in multiple servers.
Date: Fri, 9 Jun 2006 10:30:03 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA0255FAAA@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: combining two query calls in one?
Thread-Index: AcaLzLyD7gsOwPljSi2NEdEe2woHGgAAxCsA
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

my index size has grown too much and I keep getting outOfMemoryError =
after running few searches. I am using all the RAM that the JVM is =
allowing me 2.6GB.
I am left with two solutions now, the easy and expensive solution is to =
upgrade the hardware to a 64-bit System and use more RAM. the other =
solution is to split the index in let's say 3 indexes, deploy each index =
on a different box. as I understand using a RemoteSearcher will require =
opening the indexes with same Searcher, which will result in the =
OutOfMemoryError(correct me if I am wrong). so each box will have it's =
own searcher, I need to find a way to run a query on the 3 indexes and =
combine the results based on the query criteria.
has anyone done this before, and how was the performance?. is there =
another way that I am missing?.
thanks for the help,=20
for those who love soccer enjoy the world cup.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 16:04:39 2006
Return-Path: <java-user-return-21237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59094 invoked from network); 9 Jun 2006 16:04:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 16:04:39 -0000
Received: (qmail 74702 invoked by uid 500); 9 Jun 2006 16:04:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74667 invoked by uid 500); 9 Jun 2006 16:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74656 invoked by uid 99); 9 Jun 2006 16:04:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 09:04:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.28.9.26] (HELO newman.ridge.aps.org) (149.28.9.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 09:04:31 -0700
Received: from [149.28.3.20] (duval.ridge.aps.org [149.28.3.20])
	by newman.ridge.aps.org (8.13.6/8.13.1) with ESMTP id k59G4Dum033170
	for <Java-user@lucene.apache.org>; Fri, 9 Jun 2006 12:04:13 -0400 (EDT)
Message-ID: <44899BFA.3010100@aps.org>
Date: Fri, 09 Jun 2006 12:04:10 -0400
From: Michael Duval <duval@aps.org>
User-Agent: Thunderbird 1.5.0.4 (Macintosh/20060530)
MIME-Version: 1.0
To: Java-user@lucene.apache.org
Subject: COMMIT_LOCK_TIMEOUT  - IndexSearcher/IndexReader
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi All,

Has anyone else out there come across the shortcomings of the new 
COMMIT_LOCK_TIMEOUT in regards to
searching on an actively updated Index?

It used to be a settable system property and therefor "semi" dynamic 
across a system with multiple readers/searchers and
one writer.   I am aware now that it has access methods for IndexWriter 
instances, however, IndexSearcher/Readers that
indirectly need to access the commit lock (to read it's segments) use 
the final static COMMIT_LOCK_TIMEOUT in
IndexWriter.   There is no way of waiting longer or shorter than the 
default (10000) milliseconds.

Perhaps there should be another constructor in IndexSearcher/Reader that 
takes commit lock settings allowing for dynamic
blocking based on a particular implementation's needs.

Any thoughts on this?

Thanks,

Michael R. Duval

Senior Programmer/Analyst
American Physical Society
(631) 591-4127

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 17:19:52 2006
Return-Path: <java-user-return-21238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84502 invoked from network); 9 Jun 2006 17:19:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 17:19:52 -0000
Received: (qmail 23285 invoked by uid 500); 9 Jun 2006 17:19:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23264 invoked by uid 500); 9 Jun 2006 17:19:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 95475 invoked by uid 99); 9 Jun 2006 17:01:57 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of stv.bstein@gmail.com designates 64.233.162.207 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=Gxv5yVtN45aSBDqqRDv5BOUOHZgUNae3hYrEursmD9S1jTKRfowpdIG3GygfT0OPOFW6K+Ny+nxkHsxCttfQNkeyKGGXxWioD+/nNiAkNwygfNcFY8SjR7rOEUUyIXKkfkhl8ZQKw+Ce95TNjtEf/vS7dhvgLyOpp9attfvn7Zg=
Message-ID: <5d9c9ef10606091001p6f11efyec5b73abf2a09510@mail.gmail.com>
Date: Fri, 9 Jun 2006 13:01:27 -0400
From: "Benjamin Stein" <ben@shadowtv.com>
Sender: stv.bstein@gmail.com
To: java-user@lucene.apache.org
Subject: Numbertools and efficient sorting
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 3f0cac3bd6a2f1fa
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have an integer field that I've indexed after converting to a string
using NumberTools.longToString().
Now I want to sort my results using this field.  Everything works when
treating the field as a string, but is very slow and memory intensive.

I want to use INT sorting instead, but these strings can not be parsed
back into integers by Java's built in parsing functions, which is
presumably what is called when Lucene does its sorting.  They require
NumberTools.stringToLong().

My plan is to reindex and zero pad the number myself instead of using
NumberTools.  Is there a way to accomplish what I'm trying to do
without reindexing?

Thanks for any suggestions.
--Ben

For those of you unfamiliar with the output of numberTools, strings
are stored as follows:

Number 0 converts to 00000000000000
Number 1 converts to 00000000000001
Number 2 converts to 00000000000002
...
Number 8 converts to 00000000000008
Number 9 converts to 00000000000009
Number 10 converts to 0000000000000a
Number 11 converts to 0000000000000b
...
Number 34 converts to 0000000000000y
Number 35 converts to 0000000000000z
Number 36 converts to 00000000000010
Number 37 converts to 00000000000011
...
Number 44 converts to 00000000000018
Number 45 converts to 00000000000019
...
Number 46 converts to 0000000000001a
Number 47 converts to 0000000000001b
...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 17:32:02 2006
Return-Path: <java-user-return-21239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87228 invoked from network); 9 Jun 2006 17:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 17:32:02 -0000
Received: (qmail 36684 invoked by uid 500); 9 Jun 2006 17:31:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36655 invoked by uid 500); 9 Jun 2006 17:31:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 35207 invoked by uid 99); 9 Jun 2006 17:29:19 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Message-ID: <61246.80.32.40.126.1149872305.squirrel@correo.usal.es>
Date: Fri, 9 Jun 2006 18:58:25 +0200 (CEST)
Subject: Indexing question
From: manumohedano@usal.es
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All! I have a trouble... When I index text documents in english, there
is no problem, buy when I index Spanish text documents (And they're big),
a lot of information form the document don't become Indexed (I suppose it
is due to the Analyzer). Howewer I want to Index ALL the strings in the
document with no StopWords. Is this possible??

Thank's in advance

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 18:11:00 2006
Return-Path: <java-user-return-21240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99846 invoked from network); 9 Jun 2006 18:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 18:11:00 -0000
Received: (qmail 4117 invoked by uid 500); 9 Jun 2006 18:10:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4058 invoked by uid 500); 9 Jun 2006 18:10:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4029 invoked by uid 99); 9 Jun 2006 18:10:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:10:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:10:47 -0700
Received: by py-out-1112.google.com with SMTP id d42so981347pyd
        for <java-user@lucene.apache.org>; Fri, 09 Jun 2006 11:10:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FLELaUfqm2WEpNvKGfa5TDDr+OlSjlqgruau5orOql6Q4xvZ1xhQXnY+3d1U/9RJsbKMwTfrAHu+Qhm2LsnM1q4CNJ1FGUxiWSDIEedJ47fiKXAKCNZUmxlQ+Wg/bo9NOGKjWPB93zBy5PYbKtEWybYUW6DWTMG28WWfboUQfZ8=
Received: by 10.35.127.7 with SMTP id e7mr4498732pyn;
        Fri, 09 Jun 2006 11:10:26 -0700 (PDT)
Received: by 10.35.60.14 with HTTP; Fri, 9 Jun 2006 11:10:26 -0700 (PDT)
Message-ID: <e994873a0606091110w683d4899s9987bed01d06582e@mail.gmail.com>
Date: Fri, 9 Jun 2006 14:10:26 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Aggregating category hits
In-Reply-To: <20060529224417.26106.qmail@web60814.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8222_4176445.1149876626817"
References: <0E1423F2-DD3C-424D-84D1-7ED0BB795F44@rectangular.com>
	 <20060529224417.26106.qmail@web60814.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8222_4176445.1149876626817
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I compared Solr's DocSetHitCollector and counting bitset intersections to
get facet counts with a different approach that uses a custom hit collector
that tests each docid hit (bit) with each facets' bitset and increments a
count in a histogram. My assumption was that for queries with few hits, this
would be much faster than always doing bitset intersections/cardinality for
every facet all the time.

However, my throughput testing shows that the Solr method is at least 50%
faster than mine. I'm seeing a big win with the use of the HashDocSet for
lower hit counts. On my 64-bit platform, a MAX_SIZE value of 10K-20K seems
to provide optimal performance. I'm looking forward to trying this with
OpenBitSet.

Peter




On 5/29/06, zzzzz shalev <zzzzz_shalev@yahoo.com> wrote:
>
> i know im a little late replying to this thread, but, in my humble opinion
> the best way to aggregate values (not necessarily terms, but whole values in
> fields) is as follows:
>
>   startup stage:
>
>   for each field you would like to aggregate create a hashmap
>
>   open an index reader and run through all the docs
>
>   get the values to be aggregated from the fields of each doc
>
>   create a hashcode for each value from each field collected, the hashcode
> should have some sort of prefix indicating which field its from (for exampe:
> 1 = author, 2 = ....) and hence which hash it is stored in (at retrieval
> time, this prefix can be used to easily retrieve the value from the correct
> hash)
>
>   place the hashcode/value in the appropriate hash
>
>   create an arraylist
>
>   at index X in the arraylist place an int array of all the hashcodes
> associated with doc id X
>
>   so for example: if i have doc id 0 which contains the values: william
> shakespeare and the value 1797 the array list at index 0 will have an int
> array containing 2 values (the 2 hashcodes of shaklespeare and 1797)
>
>   run time:
>
>   at run time receive the hits and iterate through the doc ids , aggregate
> the values with direct access into the arraylist (for doc id 10 go to index
> 10 in the arraylist to retrieve the array of hashcodes) and lookups into the
> hashmaps
>
>   i tested this today on a small index approx 400,000 docs (1GB of data)
> but i ran queries returning over 100,000 results
>
>   my response time was about 550 milliseconds on large (over 100,000)
> result sets
>
>   another point, this method should be scalable for much larger indexes as
> well, as it is linear to the result set size and not the index size (which
> is a HUGE bonus)
>
>   if anyone wants the code let me know,
>
>
>
>
> Marvin Humphrey <marvin@rectangular.com> wrote:
>
> Thanks, all.
>
> The field cache and the bitsets both seem like good options until the
> collection grows too large, provided that the index does not need to
> be updated very frequently. Then for large collections, there's
> statistical sampling. Any of those options seems preferable to
> retrieving all docs all the time.
>
> Marvin Humphrey
> Rectangular Research
> http://www.rectangular.com/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------
> Feel free to call! Free PC-to-PC calls. Low rates on PC-to-Phone.  Get
> Yahoo! Messenger with Voice
>

------=_Part_8222_4176445.1149876626817--

From java-user-return-21241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 18:21:58 2006
Return-Path: <java-user-return-21241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3983 invoked from network); 9 Jun 2006 18:21:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 18:21:57 -0000
Received: (qmail 27122 invoked by uid 500); 9 Jun 2006 18:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26784 invoked by uid 500); 9 Jun 2006 18:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26773 invoked by uid 99); 9 Jun 2006 18:21:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:21:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [128.255.44.97] (HELO serv07.divms.uiowa.edu) (128.255.44.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:21:50 -0700
Received: from [128.255.103.7] (dhcp80ff6707.dynamic.uiowa.edu [128.255.103.7]) by serv07.divms.uiowa.edu with id k59ILJFA020598 for <java-user@lucene.apache.org>; Fri, 9 Jun 2006 13:21:23 -0500
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A0178F555@neptune.int.mediasurface.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308A0178F555@neptune.int.mediasurface.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <886DFA75-9836-4043-BB47-D5E1F28C996B@absent-error.net>
Content-Transfer-Encoding: 7bit
From: Bob Arens <lists@absent-error.net>
Subject: Re: Adding Fields to Documents with UnStored Fields - crazy scheme?
Date: Fri, 9 Jun 2006 13:21:15 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Scanned: ClamAV version 0.88.2, clamav-milter version 0.88.2 on serv07.divms.uiowa.edu
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>
> If the old index is optimized then you might be able to iterate  
> through
> all the docs in your old index (sorted by doc id) and for each  
> iteration
> add the corresponding doc to the new index so it has a matching doc  
> id.
> The idea being that after searching on one index you could use the doc
> id to look up the corresponding doc in the other index.

True - it would be like using Lucene as a thin relational DB.  
However, I don't want to just be able to associate the new fields  
with the old, I also want to be able to search over them.

Right now, I'm thinking of rolling a custom MultiSearcher that  
operates over two indices containing identical fileIDs, and returns  
the set intersection of fileIDs returned from their respective  
searches; i.e. a search for "contents:germany title:medicine" would  
get the fileIDs containing "germany" in the contents index, the  
fileIDs containing "medicine" in the new index, find the fileIDs in  
both sets of hits, and return them.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 18:58:04 2006
Return-Path: <java-user-return-21242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13759 invoked from network); 9 Jun 2006 18:58:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 18:58:04 -0000
Received: (qmail 84745 invoked by uid 500); 9 Jun 2006 18:55:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84719 invoked by uid 500); 9 Jun 2006 18:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84706 invoked by uid 99); 9 Jun 2006 18:55:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:55:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 11:55:24 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C9D065B764; Fri,  9 Jun 2006 11:54:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C686F7F403
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 11:54:56 -0700 (PDT)
Date: Fri, 9 Jun 2006 11:54:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Adding Fields to Documents with UnStored Fields - crazy scheme?
In-Reply-To: <A5DE0480-CC91-4AA8-A4DF-48BC599A9EA3@absent-error.net>
Message-ID: <Pine.LNX.4.58.0606091151480.21598@hal.rescomp.berkeley.edu>
References: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net>
 <Pine.LNX.4.58.0606090005020.1736@hal.rescomp.berkeley.edu>
 <A5DE0480-CC91-4AA8-A4DF-48BC599A9EA3@absent-error.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > : would consist of two Documents,
: > : Document X: fileID:<Foo>, contents:<unknown>
: > : Document Y:fileID:<Foo>, title:<Bar>, url:<www.baz.com>, etc.

: > add another document with the same fileID and a title field and a url
: > field, and you search for "contents:germany" you're still going to get
: > back the same document -- it's not going to magically have the other
: > fields in it just because they have the same fileID.
: That kinda would be the point - "contents:germany" would get the same
: fileIDs, but "contents:germany title:medicine" would (hopefully) give
: us a more specific query.

when you say "contents:germany title:medicine" i'm not sure if you are
assuming that both clauses are mandatory or optional ... if they are
optional then yeah you can do that, and in some cases you'll get the same
fileID twice .. if you mean you want the list of fileIDs that match both
clauses, you're not going to get any results back -- because no doc with a
contents field is going to have a title field, and no doc with a title
field is going to have a contents field.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 19:09:02 2006
Return-Path: <java-user-return-21243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18299 invoked from network); 9 Jun 2006 19:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 19:09:01 -0000
Received: (qmail 7818 invoked by uid 500); 9 Jun 2006 19:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7221 invoked by uid 500); 9 Jun 2006 19:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7210 invoked by uid 99); 9 Jun 2006 19:08:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 12:08:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 12:08:55 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0AF765B763; Fri,  9 Jun 2006 12:08:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0747D7F403
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 12:08:35 -0700 (PDT)
Date: Fri, 9 Jun 2006 12:08:35 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Different scoring mechanism
In-Reply-To: <5DD2165A95E801438DAA9C1E0957EB5E012E066E@ewiex02.dynamic.ewi.utwente.nl>
Message-ID: <Pine.LNX.4.58.0606091201080.21598@hal.rescomp.berkeley.edu>
References: <5DD2165A95E801438DAA9C1E0957EB5E012E066E@ewiex02.dynamic.ewi.utwente.nl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



: For example: a query containing two terms: "fast", "car", having
: document frequencies 300.000 and 20.000 in the index respectively. In a
: worst case scenario this would require 320.000 document scores to be
: calculated. I am not really sure how lucene optimizes its search, but I
: guess it does that by first processing the documents having the highest
: term frequencies (and thus highest combined score) with these query
: terms, and pruning the search if the n hits have been found and it's
: certain that no document can be found which will give a higher score.

Nope.  Lucene scores all "matching" documents in the index in increasing
order of docId -- it can optimize the process using "skipTo" in Scorers
when it knows that it's not possible for for a document to "match" the
overall query, so it "skips ahead" to the first doc that can match.

ie: if you have a boolean query like "+title:cat +title:dog body:snake" it
knows that unless something matches title:cat and title:dog then there is
not point in checking wether it matches body:snake -- let alone scoring
hte doc at all.  so BooleanScorer uses skipTo on the individual Scorers
for title:cat and title:dog to keep skipping ahead untill it finds a doc
matching both, then it checks if it matches body:snake, and if it does
*then* it scores things.

: If I would change the next function in my own scorer to process all
: document ids, I am afraid I will wreck Lucene's optimization method (as
: I am then not serving the documents in descending term frequency order).

it would certianly eliminate lucenes ability to skip ahead (allthough
not in the way you imagined) ... but based on the way you've described how
you want scoring to work, it has to score every doc no matter what --
you've said that even if it doesn't contain the term at all it may get a
score value which needs to be factored in to the overall score.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 19:29:13 2006
Return-Path: <java-user-return-21244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32558 invoked from network); 9 Jun 2006 19:29:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 19:29:12 -0000
Received: (qmail 42249 invoked by uid 500); 9 Jun 2006 19:29:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42213 invoked by uid 500); 9 Jun 2006 19:29:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42202 invoked by uid 99); 9 Jun 2006 19:29:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 12:29:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [128.255.44.97] (HELO serv07.divms.uiowa.edu) (128.255.44.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 12:29:05 -0700
Received: from [128.255.103.7] (dhcp80ff6707.dynamic.uiowa.edu [128.255.103.7]) by serv07.divms.uiowa.edu with id k59JScjR032036 for <java-user@lucene.apache.org>; Fri, 9 Jun 2006 14:28:42 -0500
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <Pine.LNX.4.58.0606091151480.21598@hal.rescomp.berkeley.edu>
References: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net> <Pine.LNX.4.58.0606090005020.1736@hal.rescomp.berkeley.edu> <A5DE0480-CC91-4AA8-A4DF-48BC599A9EA3@absent-error.net> <Pine.LNX.4.58.0606091151480.21598@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B7E29EE3-4728-45FE-98C5-6E11090DF6A2@absent-error.net>
Content-Transfer-Encoding: 7bit
From: Bob Arens <lists@absent-error.net>
Subject: Re: Adding Fields to Documents with UnStored Fields - crazy scheme?
Date: Fri, 9 Jun 2006 14:28:33 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Scanned: ClamAV version 0.88.2, clamav-milter version 0.88.2 on serv07.divms.uiowa.edu
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> : That kinda would be the point - "contents:germany" would get the  
> same
> : fileIDs, but "contents:germany title:medicine" would (hopefully)  
> give
> : us a more specific query.
>
> when you say "contents:germany title:medicine" i'm not sure if you are
> assuming that both clauses are mandatory or optional ... if they are
> optional then yeah you can do that, and in some cases you'll get  
> the same
> fileID twice .. if you mean you want the list of fileIDs that match  
> both
> clauses, you're not going to get any results back -- because no doc  
> with a
> contents field is going to have a title field, and no doc with a title
> field is going to have a contents field.
I'd want both clauses, so I'd have to write a Parser to make sure  
queries would get split up into the two different indices, right?  
Something to take "contents:germany title:medicine", send the  
"contents:germany" query to the IndexSearcher operating over the  
existing index, and the "title:medicine" query to the IndexSearcher  
operating over my new index. The Searchers get their results, I  
return the fileIDs in both.

Or is that just nuts?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 19:32:03 2006
Return-Path: <java-user-return-21245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33455 invoked from network); 9 Jun 2006 19:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 19:32:03 -0000
Received: (qmail 47739 invoked by uid 500); 9 Jun 2006 19:31:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47236 invoked by uid 500); 9 Jun 2006 19:31:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47225 invoked by uid 99); 9 Jun 2006 19:31:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 12:31:57 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of manumohedano@gmail.com designates 66.249.82.201 as permitted sender)
Received: from [66.249.82.201] (HELO wx-out-0102.google.com) (66.249.82.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 12:31:56 -0700
Received: by wx-out-0102.google.com with SMTP id s16so531823wxc
        for <java-user@lucene.apache.org>; Fri, 09 Jun 2006 12:31:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=gURS1G1aSGNBfcaVV+I0tV+A5l+DM9jJMELm1vjhi6HACh0XsGHXg55GDKQ9Xc0ZN0Uq8pR3AYBhzW+1pPfudD0qVCxgfOMotBgnxJ69HRc+5YGhgyor/w0O7zUr0grIWVQma+OqnjCHa+S32FYDChqQmw9kOGzZlIGQcQShjt0=
Received: by 10.70.62.9 with SMTP id k9mr3831714wxa;
        Fri, 09 Jun 2006 12:31:36 -0700 (PDT)
Received: by 10.70.49.10 with HTTP; Fri, 9 Jun 2006 12:31:36 -0700 (PDT)
Message-ID: <86e354e90606091231m15276b78s9e773d9bb05a8910@mail.gmail.com>
Date: Fri, 9 Jun 2006 21:31:36 +0200
From: "manu mohedano" <manumohedano@gmail.com>
To: java-user@lucene.apache.org
Subject: Problems indexing large documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36891_21127733.1149881496197"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_36891_21127733.1149881496197
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All! I have a trouble... When I index text documents in english, there
is no problem, buy when I index Spanish text documents (And they're big),
a lot of information from the document don't become indexed (I suppose it
is due to the Analyzer, but if the documents is less tahn 400kb it
works perfectly). Howewer I want to Index ALL the strings in the
document with no StopWords. Is this possible??

Thank's in advance

------=_Part_36891_21127733.1149881496197--

From java-user-return-21246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 20:25:01 2006
Return-Path: <java-user-return-21246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51681 invoked from network); 9 Jun 2006 20:25:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 20:25:00 -0000
Received: (qmail 32400 invoked by uid 500); 9 Jun 2006 20:24:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31813 invoked by uid 500); 9 Jun 2006 20:24:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31802 invoked by uid 99); 9 Jun 2006 20:24:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 13:24:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 13:24:54 -0700
Received: (qmail 30460 invoked from network); 9 Jun 2006 20:24:31 -0000
Received: from unknown (HELO p5496dd46.dip.t-dialin.net) ([pbs]695637@[84.150.221.70])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 9 Jun 2006 20:24:31 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Problems indexing large documents
Date: Fri, 9 Jun 2006 22:25:02 +0200
User-Agent: KMail/1.8.2
References: <86e354e90606091231m15276b78s9e773d9bb05a8910@mail.gmail.com>
In-Reply-To: <86e354e90606091231m15276b78s9e773d9bb05a8910@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606092225.02140@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Freitag 09 Juni 2006 21:31, manu mohedano wrote:

> Hi All! I have a trouble... When I index text documents in english,
> there is no problem, buy when I index Spanish text documents (And
> they're big), a lot of information from the document don't become
> indexed

Read the FAQ at http://wiki.apache.org/jakarta-lucene/LuceneFAQ,
item "Why am I getting no hits / incorrect hits?"

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 20:27:48 2006
Return-Path: <java-user-return-21247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52312 invoked from network); 9 Jun 2006 20:27:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 20:27:47 -0000
Received: (qmail 39468 invoked by uid 500); 9 Jun 2006 20:27:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39443 invoked by uid 500); 9 Jun 2006 20:27:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39432 invoked by uid 99); 9 Jun 2006 20:27:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 13:27:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.93.125.162] (HELO cpanel37.gzo.com) (69.93.125.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 13:27:39 -0700
Received: from home-pool7-2.com2com.ru ([195.98.167.2] helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.52)
	id 1FonZY-0003KK-EI
	for java-user@lucene.apache.org; Fri, 09 Jun 2006 15:27:13 -0500
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Problems indexing large documents
Date: Sat, 10 Jun 2006 00:34:52 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
In-Reply-To: <86e354e90606091231m15276b78s9e773d9bb05a8910@mail.gmail.com>
Thread-Index: AcaL+10A41DL9PftR1aQQW1Ji0t0GAACG7Qg
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060609202740.2F24F10FB01C@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: manu mohedano [mailto:manumohedano@gmail.com] 

> Hi All! I have a trouble... When I index text documents in 
> english, there is no problem, buy when I index Spanish text 
> documents (And they're big), a lot of information from the 
> document don't become indexed (I suppose it is due to the 
> Analyzer, but if the documents is less tahn 400kb it works 
> perfectly). Howewer I want to Index ALL the strings in the 
> document with no StopWords. Is this possible??

Read javadoc about  DEFAULT_MAX_FIELD_LENGTH at
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.h
tml#setMaxFieldLength(int) 

Pasha Bizhan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 21:30:00 2006
Return-Path: <java-user-return-21248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68873 invoked from network); 9 Jun 2006 21:30:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 21:30:00 -0000
Received: (qmail 39392 invoked by uid 500); 9 Jun 2006 21:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39364 invoked by uid 500); 9 Jun 2006 21:29:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39353 invoked by uid 99); 9 Jun 2006 21:29:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 14:29:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 14:29:52 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F35EB5B763; Fri,  9 Jun 2006 14:29:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EE1577F403
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 14:29:29 -0700 (PDT)
Date: Fri, 9 Jun 2006 14:29:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Adding Fields to Documents with UnStored Fields - crazy scheme?
In-Reply-To: <B7E29EE3-4728-45FE-98C5-6E11090DF6A2@absent-error.net>
Message-ID: <Pine.LNX.4.58.0606091425110.30580@hal.rescomp.berkeley.edu>
References: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net>
 <Pine.LNX.4.58.0606090005020.1736@hal.rescomp.berkeley.edu>
 <A5DE0480-CC91-4AA8-A4DF-48BC599A9EA3@absent-error.net>
 <Pine.LNX.4.58.0606091151480.21598@hal.rescomp.berkeley.edu>
 <B7E29EE3-4728-45FE-98C5-6E11090DF6A2@absent-error.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > fileID twice .. if you mean you want the list of fileIDs that match
: > both
: > clauses, you're not going to get any results back -- because no doc
: > with a
: > contents field is going to have a title field, and no doc with a title
: > field is going to have a contents field.
: I'd want both clauses, so I'd have to write a Parser to make sure
: queries would get split up into the two different indices, right?
: Something to take "contents:germany title:medicine", send the
: "contents:germany" query to the IndexSearcher operating over the
: existing index, and the "title:medicine" query to the IndexSearcher
: operating over my new index. The Searchers get their results, I
: return the fileIDs in both.
:
: Or is that just nuts?

In my opinion: yes.  But I'm not the one that has to do the work, and i'm
not in a position to judge how much work is involved compared to the
amount of work needed to rebuild your index.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 22:22:08 2006
Return-Path: <java-user-return-21249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81060 invoked from network); 9 Jun 2006 22:22:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 22:22:08 -0000
Received: (qmail 19945 invoked by uid 500); 9 Jun 2006 22:22:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19914 invoked by uid 500); 9 Jun 2006 22:22:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19903 invoked by uid 99); 9 Jun 2006 22:22:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 15:22:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 15:22:02 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8D8E75B770; Fri,  9 Jun 2006 15:21:30 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8215A7F403
	for <java-user@lucene.apache.org>; Fri,  9 Jun 2006 15:21:30 -0700 (PDT)
Date: Fri, 9 Jun 2006 15:21:30 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Numbertools and efficient sorting
In-Reply-To: <5d9c9ef10606091001p6f11efyec5b73abf2a09510@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606091516430.30580@hal.rescomp.berkeley.edu>
References: <5d9c9ef10606091001p6f11efyec5b73abf2a09510@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I have an integer field that I've indexed after converting to a string
: using NumberTools.longToString().
: Now I want to sort my results using this field.  Everything works when
: treating the field as a string, but is very slow and memory intensive.
:
: I want to use INT sorting instead, but these strings can not be parsed
: back into integers by Java's built in parsing functions, which is

1) Take a look at FieldCache.IntParser and
FieldCache.getInts(IndexReader,String,IntParser) .. you can use it in your
own custom SortComparatorSource and use it when building your Sort Field.

2) unless you are using a MultiSearcher, sorting by a string shouldn't
take any more tiem then sorting on an int -- String sorting only looks at
the ordinal value of the string for each doc (which is an int) ... it will
certainly take more memory however, and the Strings themselves are kept in
a big array.  if you really are seeing an obvious difference in the time
it takes to sort on strings versus ints, then i'm guessing that either you
aren't looking at a significant number of queries, or you aren't reusing
the same IndexSearcher/IndexReader or multiple searchers, so you're paying
the hit of building hte FieldCache everytime.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 09 23:30:21 2006
Return-Path: <java-user-return-21250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95713 invoked from network); 9 Jun 2006 23:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2006 23:30:20 -0000
Received: (qmail 85930 invoked by uid 500); 9 Jun 2006 23:30:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85897 invoked by uid 500); 9 Jun 2006 23:30:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85886 invoked by uid 99); 9 Jun 2006 23:30:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 16:30:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 16:30:13 -0700
Received: by py-out-1112.google.com with SMTP id i75so1012841pye
        for <java-user@lucene.apache.org>; Fri, 09 Jun 2006 16:29:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=U1SvhmeTC9A+Uw4SWyw6a/Vq4Jj+bSjsBEkRDWuSmh26Y5hcmvkzgRhGFRCYilFdVPM5U/YjB37w6UqoYxpWkqCeo9DRZFYLodpPf5wZ+U2F8+Iji6yQP6+4tB6c5TPwTOqyZpmJ2qWRphbuhWeMcJTe7za7DmeMQtRIASP5oAE=
Received: by 10.35.37.18 with SMTP id p18mr3566568pyj;
        Fri, 09 Jun 2006 16:29:53 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Fri, 9 Jun 2006 16:29:52 -0700 (PDT)
Message-ID: <c68e39170606091629j18cd6b38jd52e90611b327cb8@mail.gmail.com>
Date: Fri, 9 Jun 2006 19:29:52 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Adding Fields to Documents with UnStored Fields - crazy scheme?
In-Reply-To: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5037126C-571B-424A-B5C2-C661796AC08A@absent-error.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/8/06, Bob Arens <lists@absent-error.net> wrote:
> I've been handed a legacy index containing Documents with two Fields;
> one is a file ID, the other is contents of the file. The contents
> field was added using UnStored. Now, we want to add fields. Oh, the
> humanity!
>
> My crazy idea - can we add new Documents to the index with the Fields
> we wish to add, and duplicate file IDs? i.e. an entry for file ID Foo
> would consist of two Documents,
> Document X: fileID:<Foo>, contents:<unknown>
> Document Y:fileID:<Foo>, title:<Bar>, url:<www.baz.com>, etc.

Bob, it sounds like ParallelIndexReader is exactly what you need.
Iterate through the old Index, and add a new Document to a new second
index for each docid.  Then open a ParallelIndexReader over both, and
it looks like a unified index!

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 00:04:12 2006
Return-Path: <java-user-return-21251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99867 invoked from network); 10 Jun 2006 00:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 00:04:12 -0000
Received: (qmail 7645 invoked by uid 500); 10 Jun 2006 00:04:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7610 invoked by uid 500); 10 Jun 2006 00:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7599 invoked by uid 99); 10 Jun 2006 00:04:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 17:04:06 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 17:04:04 -0700
Received: by nz-out-0102.google.com with SMTP id 13so766859nzp
        for <java-user@lucene.apache.org>; Fri, 09 Jun 2006 17:03:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q0YAMFZfnpKYAYrZpfvmcU3Bx4LEZQ4T/9y3Ln1kqg3JfGL/tPHCXrKZXy+/wm5MtOIdRUpi3Kui56/w1Z7EgMqEuG5fMgTpzR0G1SZV62vEQFQvqFTDNduzgbwsNKZsIYC+aIWvLN1fGpdZJC5eo8WZACjVQ2vHikuQUqCPbFo=
Received: by 10.37.15.52 with SMTP id s52mr4949461nzi;
        Fri, 09 Jun 2006 17:03:44 -0700 (PDT)
Received: by 10.37.20.32 with HTTP; Fri, 9 Jun 2006 17:03:43 -0700 (PDT)
Message-ID: <359a92830606091703p41b3157y61ba0bd719085542@mail.gmail.com>
Date: Fri, 9 Jun 2006 20:03:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing question
In-Reply-To: <61246.80.32.40.126.1149872305.squirrel@correo.usal.es>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3492_7592447.1149897823989"
References: <61246.80.32.40.126.1149872305.squirrel@correo.usal.es>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3492_7592447.1149897823989
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Couple of things.

1> you can use a different analyzer to NOT remove stopwords. SimpleAnalyzer
comes to mind (though watch out for case). Look at LuceneInAction for an
explanation of several analyzers that are available.

2> If memory servers, Lucene defaults to indexing only the first 10,000
words of a document, so it's quite possible that you are missing parts of
your document. I believe this is configurable, but haven't had to delve into
it yet, but IndexWriter.setMaximumFieldLength looks promising...

Best
Erick

------=_Part_3492_7592447.1149897823989--

From java-user-return-21252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 04:28:35 2006
Return-Path: <java-user-return-21252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44904 invoked from network); 10 Jun 2006 04:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 04:28:35 -0000
Received: (qmail 73184 invoked by uid 500); 10 Jun 2006 04:28:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72847 invoked by uid 500); 10 Jun 2006 04:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72834 invoked by uid 99); 10 Jun 2006 04:28:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 21:28:29 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of manumohedano@gmail.com designates 66.249.82.197 as permitted sender)
Received: from [66.249.82.197] (HELO wx-out-0102.google.com) (66.249.82.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 21:28:28 -0700
Received: by wx-out-0102.google.com with SMTP id s16so578165wxc
        for <java-user@lucene.apache.org>; Fri, 09 Jun 2006 21:28:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ftz/kVfbT0peaf0kr9C3hxXATTzE6ijrGaHWamWRdfs47j/D0IdKKOJM+nvhjlnVzmmcYJE8pr4tliTw73RDIdlN+Og+Uve80ZW1zb1hIg5z7JkMHzulRpdu6yU79cRrbghJwkFb5Ubv11QUHFVnf3e8/8DBtTeE6+UvoJXOYVU=
Received: by 10.70.116.11 with SMTP id o11mr1688226wxc;
        Fri, 09 Jun 2006 21:28:07 -0700 (PDT)
Received: by 10.70.49.10 with HTTP; Fri, 9 Jun 2006 21:28:07 -0700 (PDT)
Message-ID: <86e354e90606092128o6acbd58foff4ce2ec1296c2e@mail.gmail.com>
Date: Sat, 10 Jun 2006 06:28:07 +0200
From: "manu mohedano" <manumohedano@gmail.com>
To: java-user@lucene.apache.org
Subject: Problems indexing large documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39864_13069583.1149913687798"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_39864_13069583.1149913687798
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Problem Solved! Thank's a lot guys!!!

------=_Part_39864_13069583.1149913687798--

From java-user-return-21253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 06:21:36 2006
Return-Path: <java-user-return-21253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58236 invoked from network); 10 Jun 2006 06:21:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 06:21:35 -0000
Received: (qmail 32043 invoked by uid 500); 10 Jun 2006 06:21:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32018 invoked by uid 500); 10 Jun 2006 06:21:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32007 invoked by uid 99); 10 Jun 2006 06:21:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 23:21:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jun 2006 23:21:29 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 95413187B3; Sat, 10 Jun 2006 06:21:08 +0000 (GMT)
Received: from TechTesting (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 4A1B2187B1
	for <java-user@lucene.apache.org>; Sat, 10 Jun 2006 06:21:05 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Problems indexing large documents
Date: Sat, 10 Jun 2006 07:21:57 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-index: AcaL+10A41DL9PftR1aQQW1Ji0t0GAACG7QgABRYlCA=
In-Reply-To: <20060609202740.2F24F10FB01C@asf.osuosl.org>
Message-Id: <20060610062105.4A1B2187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm trying to come to terms with
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.h
tml#setMaxFieldLength(int) too. I've been attempting to index large text
files as single Lucene documents, passing them as java.io.Reader to cope
with RAM. I was assuming (like - I suspect - manu mohedano) that an unstored
field could be of any length and that maxFieldLength was only applicable to
stored fields. Do we in fact need to break the document into manageable
parts?

-----Original Message-----
From: Pasha Bizhan [mailto:lucene-list@lucenedotnet.com] 
Sent: 09 June 2006 21:35
To: java-user@lucene.apache.org
Subject: RE: Problems indexing large documents

Hi, 

> From: manu mohedano [mailto:manumohedano@gmail.com] 

> Hi All! I have a trouble... When I index text documents in 
> english, there is no problem, buy when I index Spanish text 
> documents (And they're big), a lot of information from the 
> document don't become indexed (I suppose it is due to the 
> Analyzer, but if the documents is less tahn 400kb it works 
> perfectly). Howewer I want to Index ALL the strings in the 
> document with no StopWords. Is this possible??

Read javadoc about  DEFAULT_MAX_FIELD_LENGTH at
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.h
tml#setMaxFieldLength(int) 

Pasha Bizhan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 07:01:29 2006
Return-Path: <java-user-return-21254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61265 invoked from network); 10 Jun 2006 07:01:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 07:01:29 -0000
Received: (qmail 44424 invoked by uid 500); 10 Jun 2006 07:01:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44395 invoked by uid 500); 10 Jun 2006 07:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44384 invoked by uid 99); 10 Jun 2006 07:01:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 00:01:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 00:01:14 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id ADDD1187B3; Sat, 10 Jun 2006 07:00:52 +0000 (GMT)
Received: from TechTesting (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id F1C35187B1
	for <java-user@lucene.apache.org>; Sat, 10 Jun 2006 07:00:50 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Problems indexing large documents
Date: Sat, 10 Jun 2006 08:01:42 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-index: AcaL+10A41DL9PftR1aQQW1Ji0t0GAACG7QgABRYlCAAAJZsIA==
In-Reply-To: <20060610062105.4A1B2187B1@mail.seseit.com>
Message-Id: <20060610070050.F1C35187B1@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The answer was of course in the FAQ -
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80fc0
22d889484a9248b71

Breaking large documents into manageable chunks isn't ideal. I need to index
e-mail and with attachments which are frequently large. Currently each
message part corresponds to a Lucene Document, but that means I am
discarding terms > maxFieldLength. It is ugly having to span message parts
across multiple Lucene Documents for various reasons - e.g. a search returns
multiple Documents with different relevance, but more than one of these
Documents refer to the same message part.

Two thoughts:

(1) If the sentence "XX YY XX ZZ XX" was indexed, does that count as 3 terms
in this context or 5? If repeat terms are not counted, I can probably cope
with increasing the size of the heap and increasing maxFieldLength to deal
with realistic vocabularies, and I ought to be able to cope with most large
documents.

(2) Lucene wishlist thought... Would it be realistic to have an option for
Field indexing, which isn't entirely in RAM? The client code knows when the
Field is going to be a big one, because it can look at the file size before
passing the Field the java.io.Reader. If we could have a flag in Field that
says "do this the slow way because the calling code already knows that it is
a big one" and Otis, Eric & Co could work their magic, we could perhaps have
large Lucene Documents without running out of heap space. maxFieldLength =
-1 could perhaps denote what's needed??

-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com] 
Sent: 10 June 2006 07:22
To: java-user@lucene.apache.org
Subject: RE: Problems indexing large documents

I'm trying to come to terms with
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.h
tml#setMaxFieldLength(int) too. I've been attempting to index large text
files as single Lucene documents, passing them as java.io.Reader to cope
with RAM. I was assuming (like - I suspect - manu mohedano) that an unstored
field could be of any length and that maxFieldLength was only applicable to
stored fields. Do we in fact need to break the document into manageable
parts?

-----Original Message-----
From: Pasha Bizhan [mailto:lucene-list@lucenedotnet.com] 
Sent: 09 June 2006 21:35
To: java-user@lucene.apache.org
Subject: RE: Problems indexing large documents

Hi, 

> From: manu mohedano [mailto:manumohedano@gmail.com] 

> Hi All! I have a trouble... When I index text documents in 
> english, there is no problem, buy when I index Spanish text 
> documents (And they're big), a lot of information from the 
> document don't become indexed (I suppose it is due to the 
> Analyzer, but if the documents is less tahn 400kb it works 
> perfectly). Howewer I want to Index ALL the strings in the 
> document with no StopWords. Is this possible??

Read javadoc about  DEFAULT_MAX_FIELD_LENGTH at
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.h
tml#setMaxFieldLength(int) 

Pasha Bizhan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 13:41:16 2006
Return-Path: <java-user-return-21255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20464 invoked from network); 10 Jun 2006 13:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 13:41:15 -0000
Received: (qmail 18660 invoked by uid 500); 10 Jun 2006 13:41:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18351 invoked by uid 500); 10 Jun 2006 13:41:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18334 invoked by uid 99); 10 Jun 2006 13:41:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 06:41:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Jun 2006 06:41:07 -0700
Received: (qmail 68377 invoked by uid 60001); 10 Jun 2006 13:40:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=kwqYkt9US9NVismv7vsS3+Wbl/WVwVX/OAmSkD6nxcOghAA6lDxl4apw85y4Ug2MtERPQSSaHEDs6CQdROekhfbnlRG/ax0wqIFaKJmQ7Sk+H19MK6p0H+J5+y3cxfqlkugNjexTdn6y2emx1l6ccxC/MDxZ9DVFV9R9oU5FNn4=  ;
Message-ID: <20060610134045.68375.qmail@web50310.mail.yahoo.com>
Received: from [72.229.167.99] by web50310.mail.yahoo.com via HTTP; Sat, 10 Jun 2006 06:40:45 PDT
Date: Sat, 10 Jun 2006 06:40:45 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Different scoring mechanism
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0606091201080.21598@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris,

Somebody recently asked me about how Lucene processes queries.  Other than working on required clauses in a BooleanQuery first, and skipping if there are no matching Docs for them, there are no other query optimization strategies/tricks, are there?

Otis

----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Friday, June 9, 2006 3:08:35 PM
Subject: RE: Different scoring mechanism



: For example: a query containing two terms: "fast", "car", having
: document frequencies 300.000 and 20.000 in the index respectively. In a
: worst case scenario this would require 320.000 document scores to be
: calculated. I am not really sure how lucene optimizes its search, but I
: guess it does that by first processing the documents having the highest
: term frequencies (and thus highest combined score) with these query
: terms, and pruning the search if the n hits have been found and it's
: certain that no document can be found which will give a higher score.

Nope.  Lucene scores all "matching" documents in the index in increasing
order of docId -- it can optimize the process using "skipTo" in Scorers
when it knows that it's not possible for for a document to "match" the
overall query, so it "skips ahead" to the first doc that can match.

ie: if you have a boolean query like "+title:cat +title:dog body:snake" it
knows that unless something matches title:cat and title:dog then there is
not point in checking wether it matches body:snake -- let alone scoring
hte doc at all.  so BooleanScorer uses skipTo on the individual Scorers
for title:cat and title:dog to keep skipping ahead untill it finds a doc
matching both, then it checks if it matches body:snake, and if it does
*then* it scores things.

: If I would change the next function in my own scorer to process all
: document ids, I am afraid I will wreck Lucene's optimization method (as
: I am then not serving the documents in descending term frequency order).

it would certianly eliminate lucenes ability to skip ahead (allthough
not in the way you imagined) ... but based on the way you've described how
you want scoring to work, it has to score every doc no matter what --
you've said that even if it doesn't contain the term at all it may get a
score value which needs to be factored in to the overall score.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 13:44:30 2006
Return-Path: <java-user-return-21256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21483 invoked from network); 10 Jun 2006 13:44:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 13:44:30 -0000
Received: (qmail 22378 invoked by uid 500); 10 Jun 2006 13:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21332 invoked by uid 500); 10 Jun 2006 13:44:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21321 invoked by uid 99); 10 Jun 2006 13:44:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 06:44:24 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Jun 2006 06:44:23 -0700
Received: (qmail 90038 invoked by uid 60001); 10 Jun 2006 13:44:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=VLHDu7u5zfIJwJn1GpTRhOuwd2HSlsP3duEIQVTNE7qS+UD/OG0NT/x/mOZymiK2tgkIchKcfvIgGJYpxMYol5ut4PHwulYkIQLk38vNK+xlF+txv1b+cCTJSc1Jeq54RUu9/aaXfObiMmnWGX061zqisq5fE5j/WwmMvL1q0vA=  ;
Message-ID: <20060610134402.90036.qmail@web50301.mail.yahoo.com>
Received: from [72.229.167.99] by web50301.mail.yahoo.com via HTTP; Sat, 10 Jun 2006 06:44:02 PDT
Date: Sat, 10 Jun 2006 06:44:02 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: COMMIT_LOCK_TIMEOUT  - IndexSearcher/IndexReader
To: java-user@lucene.apache.org
In-Reply-To: <44899BFA.3010100@aps.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have never run into this problem, but I'd be curious to know why your system takes more than 10 seconds to read the segments?  Super-large index on a slow disk?  As for new ctors, I suppose they wouldn't hurt, if there really is a need for them.  But 10 seconds is a long time...

Otis

----- Original Message ----
From: Michael Duval <duval@aps.org>
To: Java-user@lucene.apache.org
Sent: Friday, June 9, 2006 12:04:10 PM
Subject: COMMIT_LOCK_TIMEOUT  - IndexSearcher/IndexReader


Hi All,

Has anyone else out there come across the shortcomings of the new 
COMMIT_LOCK_TIMEOUT in regards to
searching on an actively updated Index?

It used to be a settable system property and therefor "semi" dynamic 
across a system with multiple readers/searchers and
one writer.   I am aware now that it has access methods for IndexWriter 
instances, however, IndexSearcher/Readers that
indirectly need to access the commit lock (to read it's segments) use 
the final static COMMIT_LOCK_TIMEOUT in
IndexWriter.   There is no way of waiting longer or shorter than the 
default (10000) milliseconds.

Perhaps there should be another constructor in IndexSearcher/Reader that 
takes commit lock settings allowing for dynamic
blocking based on a particular implementation's needs.

Any thoughts on this?

Thanks,

Michael R. Duval

Senior Programmer/Analyst
American Physical Society
(631) 591-4127

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 14:24:23 2006
Return-Path: <java-user-return-21257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27285 invoked from network); 10 Jun 2006 14:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 14:24:23 -0000
Received: (qmail 61021 invoked by uid 500); 10 Jun 2006 14:24:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60994 invoked by uid 500); 10 Jun 2006 14:24:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60983 invoked by uid 99); 10 Jun 2006 14:24:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 07:24:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 07:24:15 -0700
Received: by py-out-1112.google.com with SMTP id i75so1151354pye
        for <java-user@lucene.apache.org>; Sat, 10 Jun 2006 07:23:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TNX8MZOp8F8+ChOggBWJ5lCprFBZSp5gbhDdATEHT0qrpICh3PuogTWBac+OJ6CWv1aRKHw3kdY5YjecOTCPcW2JS4IMZB13WGOdPdZdpm6I0Sx8KDvIUg9AYtwrBJHaVQfn1tsHnOi2NFaUumtQzXVMAM16GGD/GWO2SFIwOrg=
Received: by 10.35.103.12 with SMTP id f12mr1238566pym;
        Sat, 10 Jun 2006 07:23:55 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Sat, 10 Jun 2006 07:23:55 -0700 (PDT)
Message-ID: <c68e39170606100723l3fe48b87u7db5c33bf3bff32a@mail.gmail.com>
Date: Sat, 10 Jun 2006 10:23:55 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Different scoring mechanism
In-Reply-To: <20060610134045.68375.qmail@web50310.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <Pine.LNX.4.58.0606091201080.21598@hal.rescomp.berkeley.edu>
	 <20060610134045.68375.qmail@web50310.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/10/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>  Other than working on required clauses in a BooleanQuery first, and skipping if there are no matching Docs for them, there are no other query optimization strategies/tricks, are there?


I think that's pretty much it, depending on what you consider an
optimization/trick.
Efficient seeking to a specific term, efficient skipping to a
particular document number for that term, keeping track of the term
with the lowest docid with heaps or priority queues, and keeping track
of the highest scoring docs with a priority queue.

Higher level optimizations that do query transformations are left as
an exercise to the application :-)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


> Otis
>
> ----- Original Message ----
> From: Chris Hostetter <hossman_lucene@fucit.org>
> To: java-user@lucene.apache.org
> Sent: Friday, June 9, 2006 3:08:35 PM
> Subject: RE: Different scoring mechanism
>
>
>
> : For example: a query containing two terms: "fast", "car", having
> : document frequencies 300.000 and 20.000 in the index respectively. In a
> : worst case scenario this would require 320.000 document scores to be
> : calculated. I am not really sure how lucene optimizes its search, but I
> : guess it does that by first processing the documents having the highest
> : term frequencies (and thus highest combined score) with these query
> : terms, and pruning the search if the n hits have been found and it's
> : certain that no document can be found which will give a higher score.
>
> Nope.  Lucene scores all "matching" documents in the index in increasing
> order of docId -- it can optimize the process using "skipTo" in Scorers
> when it knows that it's not possible for for a document to "match" the
> overall query, so it "skips ahead" to the first doc that can match.
>
> ie: if you have a boolean query like "+title:cat +title:dog body:snake" it
> knows that unless something matches title:cat and title:dog then there is
> not point in checking wether it matches body:snake -- let alone scoring
> hte doc at all.  so BooleanScorer uses skipTo on the individual Scorers
> for title:cat and title:dog to keep skipping ahead untill it finds a doc
> matching both, then it checks if it matches body:snake, and if it does
> *then* it scores things.
>
> : If I would change the next function in my own scorer to process all
> : document ids, I am afraid I will wreck Lucene's optimization method (as
> : I am then not serving the documents in descending term frequency order).
>
> it would certianly eliminate lucenes ability to skip ahead (allthough
> not in the way you imagined) ... but based on the way you've described how
> you want scoring to work, it has to score every doc no matter what --
> you've said that even if it doesn't contain the term at all it may get a
> score value which needs to be factored in to the overall score.
>
>
>
> -Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 18:21:33 2006
Return-Path: <java-user-return-21258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66156 invoked from network); 10 Jun 2006 18:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 18:21:32 -0000
Received: (qmail 50729 invoked by uid 500); 10 Jun 2006 18:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50012 invoked by uid 500); 10 Jun 2006 18:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50001 invoked by uid 99); 10 Jun 2006 18:21:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 11:21:26 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.234] (HELO web60811.mail.yahoo.com) (209.73.178.234)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Jun 2006 11:21:25 -0700
Received: (qmail 90617 invoked by uid 60001); 10 Jun 2006 18:21:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=HFaV6ELq2R5t3WEGbK9JeGdHzkh7vHhNFZfAxWP4vcCHaapnXM0OBjtLU2jUk53PPKMan9fArpVmIepVBvNmfCzGKD5zofefdzYe03arhXxVMW1hkKHmDlS1vqv0XLkNkgq/wGhjsUZPSD06Nf6/E6pyw1PEEmODB4b75Q69g3M=  ;
Message-ID: <20060610182104.90615.qmail@web60811.mail.yahoo.com>
Received: from [88.152.245.242] by web60811.mail.yahoo.com via HTTP; Sat, 10 Jun 2006 11:21:04 PDT
Date: Sat, 10 Jun 2006 11:21:04 -0700 (PDT)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: Re: Aggregating category hits
To: java-user@lucene.apache.org
In-Reply-To: <e994873a0606091110w683d4899s9987bed01d06582e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1156473266-1149963664=:89445"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1156473266-1149963664=:89445
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hi peter,
   
  two quick questions,,,,
   
  1. could you let me know what kind of response time you were getting with solr (as well as the size of data and result sizes)
   
  2. i took a really really quick look at DocSetHitCollector  and saw the dreaded 
   
  if (bits==null) bits = new BitSet(maxDoc);
   
  line of code,
   
  since i rewrote some lucene code to support 64-bit search instances i have indexes that may reach quite a few GB's , allocating bitset's (arrays of long's is quite expensive memory wise and i am still a little skeptical about performance with large result sets)
   
  i did some testing of my facet impl and after an overnight webload session received about a 500 milli response time average for full faceting (with result sets from a few thousand to over 100,000)
   
  would really like to hear your views,,
   
  thanks,
   
  

Peter Keegan <peterlkeegan@gmail.com> wrote:
  I compared Solr's DocSetHitCollector and counting bitset intersections to
get facet counts with a different approach that uses a custom hit collector
that tests each docid hit (bit) with each facets' bitset and increments a
count in a histogram. My assumption was that for queries with few hits, this
would be much faster than always doing bitset intersections/cardinality for
every facet all the time.

However, my throughput testing shows that the Solr method is at least 50%
faster than mine. I'm seeing a big win with the use of the HashDocSet for
lower hit counts. On my 64-bit platform, a MAX_SIZE value of 10K-20K seems
to provide optimal performance. I'm looking forward to trying this with
OpenBitSet.

Peter




On 5/29/06, zzzzz shalev wrote:
>
> i know im a little late replying to this thread, but, in my humble opinion
> the best way to aggregate values (not necessarily terms, but whole values in
> fields) is as follows:
>
> startup stage:
>
> for each field you would like to aggregate create a hashmap
>
> open an index reader and run through all the docs
>
> get the values to be aggregated from the fields of each doc
>
> create a hashcode for each value from each field collected, the hashcode
> should have some sort of prefix indicating which field its from (for exampe:
> 1 = author, 2 = ....) and hence which hash it is stored in (at retrieval
> time, this prefix can be used to easily retrieve the value from the correct
> hash)
>
> place the hashcode/value in the appropriate hash
>
> create an arraylist
>
> at index X in the arraylist place an int array of all the hashcodes
> associated with doc id X
>
> so for example: if i have doc id 0 which contains the values: william
> shakespeare and the value 1797 the array list at index 0 will have an int
> array containing 2 values (the 2 hashcodes of shaklespeare and 1797)
>
> run time:
>
> at run time receive the hits and iterate through the doc ids , aggregate
> the values with direct access into the arraylist (for doc id 10 go to index
> 10 in the arraylist to retrieve the array of hashcodes) and lookups into the
> hashmaps
>
> i tested this today on a small index approx 400,000 docs (1GB of data)
> but i ran queries returning over 100,000 results
>
> my response time was about 550 milliseconds on large (over 100,000)
> result sets
>
> another point, this method should be scalable for much larger indexes as
> well, as it is linear to the result set size and not the index size (which
> is a HUGE bonus)
>
> if anyone wants the code let me know,
>
>
>
>
> Marvin Humphrey wrote:
>
> Thanks, all.
>
> The field cache and the bitsets both seem like good options until the
> collection grows too large, provided that the index does not need to
> be updated very frequently. Then for large collections, there's
> statistical sampling. Any of those options seems preferable to
> retrieving all docs all the time.
>
> Marvin Humphrey
> Rectangular Research
> http://www.rectangular.com/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------
> Feel free to call! Free PC-to-PC calls. Low rates on PC-to-Phone. Get
> Yahoo! Messenger with Voice
>


 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1156473266-1149963664=:89445--

From java-user-return-21259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 20:19:44 2006
Return-Path: <java-user-return-21259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95387 invoked from network); 10 Jun 2006 20:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 20:19:43 -0000
Received: (qmail 32519 invoked by uid 500); 10 Jun 2006 20:19:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32475 invoked by uid 500); 10 Jun 2006 20:19:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32464 invoked by uid 99); 10 Jun 2006 20:19:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 13:19:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 13:19:37 -0700
Received: by py-out-1112.google.com with SMTP id i75so1206832pye
        for <java-user@lucene.apache.org>; Sat, 10 Jun 2006 13:19:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=tYI5d0teLc4+2sC1UEDg7lQLEfaoGVHfxSgb7WNqgQYBGrwwsM7XIqHezKI59W2QOdBy+vNmJi+hRRx98HFDPL+v3wHzDpfTyzL4QVDmDKM2CJ4RTbcJ7i8cEmmMgBN8tnU8btSMWT2en8F5CXvg4z53YA9vDoWQdRZvFgD7fA8=
Received: by 10.35.27.1 with SMTP id e1mr2123191pyj;
        Sat, 10 Jun 2006 13:19:17 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Sat, 10 Jun 2006 13:19:17 -0700 (PDT)
Message-ID: <c68e39170606101319q606dcaf3iee5de60fc6d3915b@mail.gmail.com>
Date: Sat, 10 Jun 2006 16:19:17 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Aggregating category hits
In-Reply-To: <20060610182104.90615.qmail@web60811.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e994873a0606091110w683d4899s9987bed01d06582e@mail.gmail.com>
	 <20060610182104.90615.qmail@web60811.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/10/06, zzzzz shalev <zzzzz_shalev@yahoo.com> wrote:
>   1. could you let me know what kind of response time you were getting with solr (as well as the size of data and result sizes)

A can tell you a little bit about ours... on one CNET faceted browsing
implementation using Solr, the number of facets to check per request
average somewhere between 100 and 200 (the total number of unique
facets is much larger though).  The median request time is 3ms (and I
don't think the majority of that time is calculating set
intersections).

We actually don't have the LRUCaches set large enough to achieve a
100% hit rate, but performance is still fine.

>   2. i took a really really quick look at DocSetHitCollector  and saw the dreaded
>
>   if (bits==null) bits = new BitSet(maxDoc);

Yes, DocSets can be memory intensive.  A BitSet is only used when the
number of results gets larger than a threshold... below that, a
HashDocSet is used that is O(n) rather than O(maxDoc).  So the memory
footprint also depends on the cardinality of the sets.

>   since i rewrote some lucene code to support 64-bit search instances i have indexes that may reach quite a few GB's ,

GBs of index size, or actually billions of documents.  It's the number
of documents that matters in this case.

> allocating bitset's (arrays of long's is quite expensive memory wise and i am still a little
> skeptical about performance with large result sets)

I just checked in a replacement for BitSet that takes intersection
counts much faster.

>   i did some testing of my facet impl and after an overnight webload session received about a 500 milli response time average for full faceting (with result sets from a few thousand to over 100,000)

How many documents was that with, and how many facets per document?

I certainly am interested in more memory efficient faceted browsing,
and have been meaning to try some alternatives.  So far, we've had
good results using cached DocSets though.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 20:34:50 2006
Return-Path: <java-user-return-21260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98277 invoked from network); 10 Jun 2006 20:34:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 20:34:50 -0000
Received: (qmail 42047 invoked by uid 500); 10 Jun 2006 20:34:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42021 invoked by uid 500); 10 Jun 2006 20:34:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42010 invoked by uid 99); 10 Jun 2006 20:34:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 13:34:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 13:34:43 -0700
Received: by py-out-1112.google.com with SMTP id i75so1208572pye
        for <java-user@lucene.apache.org>; Sat, 10 Jun 2006 13:34:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=g0HSfEBNMen7azsLRSHxjddfqP58LhoA6Qel3pRQ0mYgKW2538h56vEkswjJPJDy1FKwYPk+jN/5muZTThmwS/4e6VL49fF9oP4TxBEF8OhEFkHAS5T8iy0HqBxXaSX/IFJGoegFJBQHNiLPjKN6iFZZcXLSLzrU1Hxf0W6G6FM=
Received: by 10.35.21.1 with SMTP id y1mr1619736pyi;
        Sat, 10 Jun 2006 13:34:22 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Sat, 10 Jun 2006 13:34:22 -0700 (PDT)
Message-ID: <c68e39170606101334u6be7f7fm2fe0f47bd57c4070@mail.gmail.com>
Date: Sat, 10 Jun 2006 16:34:22 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Aggregating category hits
In-Reply-To: <e994873a0606091110w683d4899s9987bed01d06582e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0E1423F2-DD3C-424D-84D1-7ED0BB795F44@rectangular.com>
	 <20060529224417.26106.qmail@web60814.mail.yahoo.com>
	 <e994873a0606091110w683d4899s9987bed01d06582e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/9/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> However, my throughput testing shows that the Solr method is at least 50%
> faster than mine. I'm seeing a big win with the use of the HashDocSet for
> lower hit counts. On my 64-bit platform, a MAX_SIZE value of 10K-20K seems
> to provide optimal performance.

Interesting... how many documents are in your collection?
It would prob be nice to make the HashDocSet cutt-off dynamic rather than fixed.
Are you using Solr, or just some of it's code?

>  I'm looking forward to trying this with
> OpenBitSet.

I checked in the OpenBitSet changes today.  I imagine this will lower
the optimal max HashDocSet size for performance a little.  You might
not see much performance improvement if most of the intersections
involved a HashDocSet... the OpenBitSet improvements only kick in with
bitset<->bitset intersection counts.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 20:50:47 2006
Return-Path: <java-user-return-21261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1138 invoked from network); 10 Jun 2006 20:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 20:50:47 -0000
Received: (qmail 50202 invoked by uid 500); 10 Jun 2006 20:50:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50174 invoked by uid 500); 10 Jun 2006 20:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50160 invoked by uid 99); 10 Jun 2006 20:50:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 13:50:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 13:50:39 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F3D8A5B772; Sat, 10 Jun 2006 13:50:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E3A057F403
	for <java-user@lucene.apache.org>; Sat, 10 Jun 2006 13:50:12 -0700 (PDT)
Date: Sat, 10 Jun 2006 13:50:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Different scoring mechanism
In-Reply-To: <c68e39170606100723l3fe48b87u7db5c33bf3bff32a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606101344070.18372@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0606091201080.21598@hal.rescomp.berkeley.edu> 
 <20060610134045.68375.qmail@web50310.mail.yahoo.com>
 <c68e39170606100723l3fe48b87u7db5c33bf3bff32a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Higher level optimizations that do query transformations are left as
: an exercise to the application :-)

Word!

For example, Yonik helped me speed up a fairly hairy query i had a while
back by realizing that the way i was progromatically generating a query,
one deeply nested clause was actually constant even though the wrapper
around it changed depending on the input, and it was mainly a "match all
docs, except things that amtch a, b, c" type query -- so we converted it
to a Filter, wrapped it in in a CachingWrapperFilter, then wrapped that in
a FilteredQuery -- majorly speed things up.

in general, the best optimization I've seen is to identify the parts of
your query that aren't really about scoring as much as they are about
filtering -- and convert them to Filters which can be cached.  usually
they can be applied using the normal search(Query,Filter) methods -- but
even if they are conditions that you have nested deep down like the one i
described, don't be afraid to go crazy :)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 21:13:19 2006
Return-Path: <java-user-return-21262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4718 invoked from network); 10 Jun 2006 21:13:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 21:13:19 -0000
Received: (qmail 64125 invoked by uid 500); 10 Jun 2006 21:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64094 invoked by uid 500); 10 Jun 2006 21:13:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64083 invoked by uid 99); 10 Jun 2006 21:13:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 14:13:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 14:13:12 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 731E25B771; Sat, 10 Jun 2006 14:12:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 69E0D7F403
	for <java-user@lucene.apache.org>; Sat, 10 Jun 2006 14:12:50 -0700 (PDT)
Date: Sat, 10 Jun 2006 14:12:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Aggregating category hits
In-Reply-To: <c68e39170606101319q606dcaf3iee5de60fc6d3915b@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606101407200.18372@hal.rescomp.berkeley.edu>
References: <e994873a0606091110w683d4899s9987bed01d06582e@mail.gmail.com> 
 <20060610182104.90615.qmail@web60811.mail.yahoo.com>
 <c68e39170606101319q606dcaf3iee5de60fc6d3915b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: A can tell you a little bit about ours... on one CNET faceted browsing
: implementation using Solr, the number of facets to check per request
: average somewhere between 100 and 200 (the total number of unique
: facets is much larger though).  The median request time is 3ms (and I
: don't think the majority of that time is calculating set
: intersections).

I've also posted some other numbers for a differnet CNET page which
doesn't seem very "faceted" but actually does many more DocSet
intersections to rank categories (1500-2000 per request), and does a
lot more complicated main search queries (really big nested
Boolean/DisjunctionMax/Phrase queries).  The average request time there
was 30ms ... but more importantly (to me and the people i work with
anyway) the 99.9th percentile was only 456ms

http://wiki.apache.org/solr/SolrPerformanceData

(note: this was before the OpenBitSet changes Yonik just commited)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 21:57:44 2006
Return-Path: <java-user-return-21263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12023 invoked from network); 10 Jun 2006 21:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 21:57:44 -0000
Received: (qmail 87432 invoked by uid 500); 10 Jun 2006 21:57:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87397 invoked by uid 500); 10 Jun 2006 21:57:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87386 invoked by uid 99); 10 Jun 2006 21:57:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 14:57:38 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=RCVD_IN_WHOIS_INVALID
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.255.54.11] (HELO mx.laposte.net) (81.255.54.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 14:57:37 -0700
Received: from ft.keljob.com (82.225.66.75) by mx.laposte.net (7.2.060.1) (authenticated as sven.duzont)
        id 4487059200410443 for java-user@lucene.apache.org; Sat, 10 Jun 2006 23:57:16 +0200
Date: Sun, 11 Jun 2006 00:03:00 +0200
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.80.06) Professional
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <1624244657.20060611000300@laposte.net>
To: Otis Gospodnetic <java-user@lucene.apache.org>
Subject: Re[2]: Fwd: Lucene 2.0.0 release available
In-Reply-To: <20060608235448.25066.qmail@web50314.mail.yahoo.com>
References: <395975213.20060608115558@laposte.net> <20060608235448.25066.qmail@web50314.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Otis,

I unfortunately don't master enough maven yet to know how to push a library on maven public repositories.

<off-topic>
 However i just found this eBook that looks interesting http://www.mergere.com/m2book_download.jsp
</off-topic>

Waiting for a maven guru to release lucene 2.0 on a public repo, i'll
just put the lib on a local one
Thanks and have a nice day.

--- Sven

Le vendredi 9 juin 2006 à 01:54:48, vous écriviez :

OG> Hi Sven,

OG> Somebody asked about the same thing a few weeks back and opened a
OG> JIRA issue.  It looks like the push to ibiblio servers did not
OG> happen, even though I added notes about that to the release HOWTO
OG> doc on the Wiki.  My notes might be incorrect, so I commented on
OG> that JIRA issues asking for clarifications, as people there seemed
OG> to know how new releases should get pushed out for ibiblio. 
OG> Nobody responded yet, I'm afraid.  If you know how that's done,
OG> let me know, I'll gladly push the release files wherever they need to get pushed.

OG> Otis



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 22:47:04 2006
Return-Path: <java-user-return-21264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17235 invoked from network); 10 Jun 2006 22:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 22:47:04 -0000
Received: (qmail 13257 invoked by uid 500); 10 Jun 2006 22:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13231 invoked by uid 500); 10 Jun 2006 22:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13220 invoked by uid 99); 10 Jun 2006 22:46:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 15:46:58 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.231] (HELO web60823.mail.yahoo.com) (209.73.178.231)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Jun 2006 15:46:57 -0700
Received: (qmail 85739 invoked by uid 60001); 10 Jun 2006 22:46:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ZNT9L36s09c0scjPH1VKJ4e/zsjP9QjocRc7B69VutP/aXYfA8wcc5tEyTcDrNJ5Pno22CtGkQlB/OzKzGHvle5TzyrvW4SamW2X/DYW5q3BYl1y2gi6a8Cs1t9tmSEanzDUSUV38jGtv3eG+BxIy3dPuSzgZgHHtBtDwz96kEo=  ;
Message-ID: <20060610224636.85737.qmail@web60823.mail.yahoo.com>
Received: from [212.199.22.140] by web60823.mail.yahoo.com via HTTP; Sat, 10 Jun 2006 15:46:36 PDT
Date: Sat, 10 Jun 2006 15:46:36 -0700 (PDT)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: Re: Aggregating category hits
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170606101319q606dcaf3iee5de60fc6d3915b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-184641345-1149979596=:83482"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-184641345-1149979596=:83482
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hi yonik,
   
  thanks for the thurough reply,,
   
  a few more quick questions...
   
  "the number of facets to check per request
average somewhere between 100 and 200 (the total number of unique
facets is much larger though). "
   
  you mean 100 - 200 different catagories to facet?
   
  i ran the test on a 600,000 doc index, however the cool thing about my solution, is that the total doc count is not too relavant , i will be checking this with much larger indexes probably 10x the size of my initial testing, and algorithmically i dont expect too much of a performance dropoff, due to the fact that response time is effected by the result set size and not the docs in the index size (since i cache all faceted values on startup),
   
  as for the 500 milli, this is basically what i do in that time:
   
  1. in each search instance: initally send a query and return the top 100 docs. start a seprate thread to collect full facet values (i do this by resending the same query with maxDoc as the number of results to return.... can i save this requerying somehow?)
   
  2. then merge all instances' docs using a custom parallel m searcher
   
  3. for the top 100 docs i calculate which doc came from which instance
   
  4. and send the doc id's back to each instance and have each instance create facets on its docs from the top 100
   
  5. each instance returns this info, i then go back to the instance and pass to them the top 20 terms of each facet for the actual facet counts...
   
  i do this so that the facet counts i display are from good docs, i am trying to avoid a situation where i recieve 5,000 results and that 4,500 of them with awful rankings have the same facet values and therefore the facets displayed in the UI are of bad ranked docs
   
  confusing!!!!
   
  however , i will look into your impl, it sounds solid, i am curretly on lucene 1.4.3 (which classes should i look into in solr?)
   
  comments welcomed
   
  thanks in advance!
  

Yonik Seeley <yseeley@gmail.com> wrote:
  On 6/10/06, zzzzz shalev wrote:
> 1. could you let me know what kind of response time you were getting with solr (as well as the size of data and result sizes)

A can tell you a little bit about ours... on one CNET faceted browsing
implementation using Solr, the number of facets to check per request
average somewhere between 100 and 200 (the total number of unique
facets is much larger though). The median request time is 3ms (and I
don't think the majority of that time is calculating set
intersections).

We actually don't have the LRUCaches set large enough to achieve a
100% hit rate, but performance is still fine.

> 2. i took a really really quick look at DocSetHitCollector and saw the dreaded
>
> if (bits==null) bits = new BitSet(maxDoc);

Yes, DocSets can be memory intensive. A BitSet is only used when the
number of results gets larger than a threshold... below that, a
HashDocSet is used that is O(n) rather than O(maxDoc). So the memory
footprint also depends on the cardinality of the sets.

> since i rewrote some lucene code to support 64-bit search instances i have indexes that may reach quite a few GB's ,

GBs of index size, or actually billions of documents. It's the number
of documents that matters in this case.

> allocating bitset's (arrays of long's is quite expensive memory wise and i am still a little
> skeptical about performance with large result sets)

I just checked in a replacement for BitSet that takes intersection
counts much faster.

> i did some testing of my facet impl and after an overnight webload session received about a 500 milli response time average for full faceting (with result sets from a few thousand to over 100,000)

How many documents was that with, and how many facets per document?

I certainly am interested in more memory efficient faceted browsing,
and have been meaning to try some alternatives. So far, we've had
good results using cached DocSets though.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-184641345-1149979596=:83482--

From java-user-return-21265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 22:58:37 2006
Return-Path: <java-user-return-21265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18545 invoked from network); 10 Jun 2006 22:58:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 22:58:37 -0000
Received: (qmail 20336 invoked by uid 500); 10 Jun 2006 22:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20305 invoked by uid 500); 10 Jun 2006 22:58:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20293 invoked by uid 99); 10 Jun 2006 22:58:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 15:58:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dominik@dbruhn.de designates 213.239.217.207 as permitted sender)
Received: from [213.239.217.207] (HELO flacons.org) (213.239.217.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 15:58:31 -0700
Received: from localhost (localhost [127.0.0.1])
	by flacons.org (flacons.org) with ESMTP id B791636805E
	for <java-user@lucene.apache.org>; Sun, 11 Jun 2006 00:58:09 +0200 (CEST)
Received: from flacons.org ([127.0.0.1])
	by localhost (debian [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 00386-04 for <java-user@lucene.apache.org>;
	Sun, 11 Jun 2006 00:58:05 +0200 (CEST)
Received: from localhost (dslb-084-057-186-252.pools.arcor-ip.net [84.57.186.252])
	by flacons.org (flacons.org) with ESMTP id 9E3C736805C
	for <java-user@lucene.apache.org>; Sun, 11 Jun 2006 00:58:04 +0200 (CEST)
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Lucene as Search in a BuletinBoard
Date: Sun, 11 Jun 2006 00:58:03 +0200
User-Agent: KMail/1.9.3
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606110058.03710.dominik@dbruhn.de>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at flacons.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy,
Im writing a kind of bulletin-board-software in java (servlet+velocity as 
template framework, mysql5 as backend). As the whole database is in INNODB 
and this doesn't support Fulltext-Indexes I looked for alternatives and liked 
the concept of Lucene. But I got serveral questions:

1. Everybody says that Lucene is faster than a MySQL-Fulltext Index. But how 
comes: MySQL can cache the results in RAM (at least when small) but Lucene 
has to open the index on the harddisk uppon any search. Why is this so 
performant. 

2. (Connected to 1): Is there a possibility to tell Lucene to keep the Index 
in RAM so the access is faster?

3. Is the following use of lucene ok?
Uppon every posting:
After inserting the post into the database-tables I create a IndexWriter, 
write the new Document and then close the writer again.

Uppon every editing of a post:
I create a IndexReader delete the old Data, close the reader, create a writer, 
save the document and the close the writer

Uppon every search:
I create a IndexReader and search.

Isn't it possible to reuse the IndexReader? I thought about creating it one 
time uppon startup of the servlet and the reuse it. But as I read in the 
documentation this would result in a locking issue uppon writing. Is this 
correct?

4. I read about the possibility to store the index in a database. When would 
you consider using this? Is this more performant that a disk-version?

Thanks for any help
Dominik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 10 23:49:38 2006
Return-Path: <java-user-return-21266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26712 invoked from network); 10 Jun 2006 23:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2006 23:49:37 -0000
Received: (qmail 45795 invoked by uid 500); 10 Jun 2006 23:49:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45248 invoked by uid 500); 10 Jun 2006 23:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45237 invoked by uid 99); 10 Jun 2006 23:49:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 16:49:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 16:49:30 -0700
Received: by py-out-1112.google.com with SMTP id i75so1231541pye
        for <java-user@lucene.apache.org>; Sat, 10 Jun 2006 16:49:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=W8GtaLACs6lYBZ0ALo8sW/CAyJCUuHTYMCr+3a9rkOA2r8wuYUpDTRntSBTgnADjztjFJtAoDDarey7G1hFoCdppVfebm6LPZQyCf4sGHmZO/tsGf3LoqXYLqyP0PkpcuGFmia+UvPbjfPJeuoYj4IHkrfyPFvoqJXdSK/L7bsM=
Received: by 10.35.123.2 with SMTP id a2mr2201930pyn;
        Sat, 10 Jun 2006 16:49:10 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Sat, 10 Jun 2006 16:49:10 -0700 (PDT)
Message-ID: <c68e39170606101649r66f8453bx2145276856e3ec4e@mail.gmail.com>
Date: Sat, 10 Jun 2006 19:49:10 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Aggregating category hits
In-Reply-To: <20060610224636.85737.qmail@web60823.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170606101319q606dcaf3iee5de60fc6d3915b@mail.gmail.com>
	 <20060610224636.85737.qmail@web60823.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/10/06, zzzzz shalev <zzzzz_shalev@yahoo.com> wrote:
>   "the number of facets to check per request
> average somewhere between 100 and 200 (the total number of unique
> facets is much larger though). "
>
>   you mean 100 - 200 different catagories to facet?

I was going by memory, but 100 to 200 set intersections (specific
counts to gather) per individual request.

>   i ran the test on a 600,000 doc index, however the cool thing about my solution, is that the total doc count is not too relavant

Yeah, you can always get faster if aproximations are OK.

>   i do this so that the facet counts i display are from good docs, i am trying to avoid a situation where i recieve 5,000 results and that 4,500 of them with awful rankings have the same facet values and therefore the facets displayed in the UI are of bad ranked docs
>
>   confusing!!!!

Actually, that sounds like it can make a lot of sense, as long as you
can approximate what is good vs bad.

>   however , i will look into your impl, it sounds solid, i am curretly on lucene 1.4.3 (which classes should i look into in solr?)

Solr doesn't do faceted browsing for you yet.  It provides caching of
sets and fast set intersections.  You currently need code to tell solr
what intersection counts to get.

DocSetHitCollector and HashDocSet + BitDocSet would only help you if
you cache sets of docids.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 03:07:26 2006
Return-Path: <java-user-return-21267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47659 invoked from network); 11 Jun 2006 03:07:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 03:07:26 -0000
Received: (qmail 27381 invoked by uid 500); 11 Jun 2006 03:07:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27346 invoked by uid 500); 11 Jun 2006 03:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 75379 invoked by uid 99); 10 Jun 2006 21:34:27 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of stv.bstein@gmail.com designates 64.233.162.196 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=RpxZLoiS/z59F4BkW4pY84rVvXUHMaRHxAJYHFHXW0Awia7YhiQ4FV2Y8W7yD60kgkEfiNXKSXrb/bTL5eWpjtSa0tlgPP+EhISnn4YgNP+41H60w3HC62ur/Byb1KIEJyaYsUaXyECvQRKJBnLGyfRMaPdgxIxI++fhb9TBou0=
Message-ID: <5d9c9ef10606101434l6a691cdbk539d453076b92bc8@mail.gmail.com>
Date: Sat, 10 Jun 2006 17:34:05 -0400
From: "Benjamin Stein" <ben@shadowtv.com>
Sender: stv.bstein@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Numbertools and efficient sorting
In-Reply-To: <Pine.LNX.4.58.0606091516430.30580@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5d9c9ef10606091001p6f11efyec5b73abf2a09510@mail.gmail.com>
	 <Pine.LNX.4.58.0606091516430.30580@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 576a1b8285c93159
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/9/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : I have an integer field that I've indexed after converting to a string
> : using NumberTools.longToString().
> : Now I want to sort my results using this field.  Everything works when
> : treating the field as a string, but is very slow and memory intensive.
> :
> : I want to use INT sorting instead, but these strings can not be parsed
> : back into integers by Java's built in parsing functions, which is
>
> 1) Take a look at FieldCache.IntParser and
> FieldCache.getInts(IndexReader,String,IntParser) .. you can use it in your
> own custom SortComparatorSource and use it when building your Sort Field.
>
> 2) unless you are using a MultiSearcher, sorting by a string shouldn't
> take any more tiem then sorting on an int -- String sorting only looks at

Thanks for the reply Hoss, as always.

You hit the nail on the head though: I am using a MultiSearcher.  100+
indexes, each with millions of documents.  The memory usage when
storing the strings is very, very high.

I'll do a little more research about the memory usage and expanding to
more boxes and repost to the list.

--Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 03:49:36 2006
Return-Path: <java-user-return-21268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51225 invoked from network); 11 Jun 2006 03:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 03:49:36 -0000
Received: (qmail 43310 invoked by uid 500); 11 Jun 2006 03:49:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43274 invoked by uid 500); 11 Jun 2006 03:49:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43263 invoked by uid 99); 11 Jun 2006 03:49:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 20:49:31 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Jun 2006 20:49:30 -0700
Received: (qmail 91281 invoked by uid 60001); 11 Jun 2006 03:49:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=MftJcq8kx4ThF5NPT/FfrDhtwJgFUIzImatyTCtSNgir3D10Apz0z/5AUlrREceTmApNu1lFjv7QKNs4RFJgpdU2ZyeMJw4v8SDAUvXr64vaPRAZdYLK1rGFGQJjFP3W+3O7MBzeR9plEw0hk0sFCxjbXyFPY/6OdgPQ5Z3DK0I=  ;
Message-ID: <20060611034910.91279.qmail@web50301.mail.yahoo.com>
Received: from [72.229.167.99] by web50301.mail.yahoo.com via HTTP; Sat, 10 Jun 2006 20:49:10 PDT
Date: Sat, 10 Jun 2006 20:49:10 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene as Search in a BuletinBoard
To: java-user@lucene.apache.org
In-Reply-To: <200606110058.03710.dominik@dbruhn.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Dominik,

I think most of your questions are answered in the Lucene FAQ and various Lucene articles, so I'll be brief.

----- Original Message ----
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Sent: Saturday, June 10, 2006 6:58:03 PM
Subject: Lucene as Search in a BuletinBoard

Hy,
Im writing a kind of bulletin-board-software in java (servlet+velocity as 
template framework, mysql5 as backend). As the whole database is in INNODB 
and this doesn't support Fulltext-Indexes I looked for alternatives and liked 
the concept of Lucene. But I got serveral questions:

1. Everybody says that Lucene is faster than a MySQL-Fulltext Index. But how 
comes: MySQL can cache the results in RAM (at least when small) but Lucene 
has to open the index on the harddisk uppon any search. Why is this so 
performant. 

OG: You can open the index only once and reuse IndexReader/Searcher for multiple searches.

2. (Connected to 1): Is there a possibility to tell Lucene to keep the Index 
in RAM so the access is faster?

OG: Yes.  Look eda FSDirectory and RAMDirectory.

3. Is the following use of lucene ok?
Uppon every posting:
After inserting the post into the database-tables I create a IndexWriter, 
write the new Document and then close the writer again.

OG: Yes.  Also look at IndexModifier and consider batching delete and add operations when you can.

Uppon every editing of a post:
I create a IndexReader delete the old Data, close the reader, create a writer, 
save the document and the close the writer

OG: Yes.  Also look at IndexModifier and consider batching delete and add operations when you can.
 
Uppon every search:
I create a IndexReader and search.

OG: You can reuse it.  This must be in the FAQ on the Wiki.

Isn't it possible to reuse the IndexReader? I thought about creating it one 
time uppon startup of the servlet and the reuse it. But as I read in the 
documentation this would result in a locking issue uppon writing. Is this 
correct?

OG: Yes and then no.  Yes, you can reuse it.  No, no locking issues.

4. I read about the possibility to store the index in a database. When would 
you consider using this? Is this more performant that a disk-version?

OG: No, it is actually slower, people say.

Otis





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 03:53:45 2006
Return-Path: <java-user-return-21269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51660 invoked from network); 11 Jun 2006 03:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 03:53:44 -0000
Received: (qmail 46973 invoked by uid 500); 11 Jun 2006 03:53:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46426 invoked by uid 500); 11 Jun 2006 03:53:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46412 invoked by uid 99); 11 Jun 2006 03:53:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jun 2006 20:53:39 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Jun 2006 20:53:38 -0700
Received: (qmail 78600 invoked by uid 60001); 11 Jun 2006 03:53:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;
  b=lQS4XBclreV1yj/jDkDJROTvZ4J+E8qp36W+QB5mAjQptJM0+1y74TX0d2LHV+nCsFAFrYhrIbFw4pgxKpmypXdQkDb3VPTLdnrA/KbvW/9QTAO5Q6jKf+/PESdIeKi5yhyRO+PEVRxDwm4qJTpz68vL7YI/G/iQdDQUjn+Ejmw=  ;
Message-ID: <20060611035327.78598.qmail@web50308.mail.yahoo.com>
Received: from [72.229.167.99] by web50308.mail.yahoo.com via HTTP; Sat, 10 Jun 2006 20:53:27 PDT
Date: Sat, 10 Jun 2006 20:53:27 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Re[2]: Fwd: Lucene 2.0.0 release available
To: java-user@lucene.apache.org
Cc: jrduncans@stephenduncanjr.com, martinc@apache.org
In-Reply-To: <1624244657.20060611000300@laposte.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's really just a matter of putting the Jars in the appropriate directory on the appropriate machine, I think.
Maybe CC-ed people know which dir/machine that is.
The issue is: http://issues.apache.org/jira/browse/LUCENE-551

Otis

----- Original Message ----
From: Sven Duzont <sven.duzont@laposte.net>
To: Otis Gospodnetic <java-user@lucene.apache.org>
Sent: Saturday, June 10, 2006 6:03:00 PM
Subject: Re[2]: Fwd: Lucene 2.0.0 release available

Hello Otis,

I unfortunately don't master enough maven yet to know how to push a library on maven public repositories.

<off-topic>
 However i just found this eBook that looks interesting http://www.mergere.com/m2book_download.jsp
</off-topic>

Waiting for a maven guru to release lucene 2.0 on a public repo, i'll
just put the lib on a local one
Thanks and have a nice day.

--- Sven

Le vendredi 9 juin 2006  01:54:48, vous criviez :

OG> Hi Sven,

OG> Somebody asked about the same thing a few weeks back and opened a
OG> JIRA issue.  It looks like the push to ibiblio servers did not
OG> happen, even though I added notes about that to the release HOWTO
OG> doc on the Wiki.  My notes might be incorrect, so I commented on
OG> that JIRA issues asking for clarifications, as people there seemed
OG> to know how new releases should get pushed out for ibiblio. 
OG> Nobody responded yet, I'm afraid.  If you know how that's done,
OG> let me know, I'll gladly push the release files wherever they need to get pushed.

OG> Otis



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 08:17:05 2006
Return-Path: <java-user-return-21270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78920 invoked from network); 11 Jun 2006 08:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 08:17:04 -0000
Received: (qmail 27679 invoked by uid 500); 11 Jun 2006 08:16:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27650 invoked by uid 500); 11 Jun 2006 08:16:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27639 invoked by uid 99); 11 Jun 2006 08:16:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 01:16:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 01:16:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6EA865B774; Sun, 11 Jun 2006 01:16:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 67E927F403
	for <java-user@lucene.apache.org>; Sun, 11 Jun 2006 01:16:29 -0700 (PDT)
Date: Sun, 11 Jun 2006 01:16:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Numbertools and efficient sorting
In-Reply-To: <5d9c9ef10606101434l6a691cdbk539d453076b92bc8@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606110114290.5844@hal.rescomp.berkeley.edu>
References: <5d9c9ef10606091001p6f11efyec5b73abf2a09510@mail.gmail.com> 
 <Pine.LNX.4.58.0606091516430.30580@hal.rescomp.berkeley.edu>
 <5d9c9ef10606101434l6a691cdbk539d453076b92bc8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > : I want to use INT sorting instead, but these strings can not be parsed
: > : back into integers by Java's built in parsing functions, which is
: >
: > 1) Take a look at FieldCache.IntParser and
: > FieldCache.getInts(IndexReader,String,IntParser) .. you can use it in your
: > own custom SortComparatorSource and use it when building your Sort Field.

: You hit the nail on the head though: I am using a MultiSearcher.  100+
: indexes, each with millions of documents.  The memory usage when
: storing the strings is very, very high.
:
: I'll do a little more research about the memory usage and expanding to
: more boxes and repost to the list.

Don't overlook my first point about using FieldCache with your
own IntParser -- that should be just as fast as adding another version
of the field that doesn't use NumberTools with the added bonus of not
requiring another field.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 09:38:29 2006
Return-Path: <java-user-return-21271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85013 invoked from network); 11 Jun 2006 09:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 09:38:29 -0000
Received: (qmail 50296 invoked by uid 500); 11 Jun 2006 09:38:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49823 invoked by uid 500); 11 Jun 2006 09:38:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49812 invoked by uid 99); 11 Jun 2006 09:38:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 02:38:23 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 02:38:22 -0700
Received: from gtconn01.ad.infosys.com ([192.168.180.63]) by SFOVWL03.infosys.com with InterScan Messaging Security Suite; Sun, 11 Jun 2006 02:29:32 -0700
Received: from SGIMSG01.ad.infosys.com ([172.21.240.8]) by gtconn01.ad.infosys.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Sun, 11 Jun 2006 02:35:10 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C68D3A.533E9618"
Subject: An interesting thing
Date: Sun, 11 Jun 2006 17:34:50 +0800
Message-ID: <858CC94E9BA8CF42BE18C3BCB82511B501E544FA@sgimsg01.ad.infosys.com>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: An interesting thing
Thread-Index: AcaNN5LRyB17ZXv8TRKCSncfcRrw0gAAWAfQAABTvFA=
From: "Flik Shen" <Flik_Shen@infosys.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Jun 2006 09:35:10.0457 (UTC) FILETIME=[5540D690:01C68D3A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C68D3A.533E9618
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01C68D3A.533E9618"


------_=_NextPart_002_01C68D3A.533E9618
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,

=0D

I am freshman to Lucene and I am reading the book "Lucene In Action".

Just as that we know, there are two kinds of directory to hold index,
one is File System and the other is RAM.

There is a sample to compare performances of these two kind directories
and there is also a piece of code about "Batch indexing by using
RAMDirectory as a buffer".

When I follow some samples, I found an interesting thing about indexing
performance.

=0D

I combine these two pieces of codes and time each kind directory
indexing. (Please refer the attachment for details processes)

I load 3000 docs and 5 words per doc. I use File System Directory and
RAM Directory to indexing these docs directly. The time of these two are
10737ms and 1575ms.

Then I use a RAM directory as a buffer for indexing and use method
"addIndexes" of a new Index writer which finally holds index in a File
System directory.

The time it consumed is 1348ms.

How could this be?

I think the time that buffered indexing consumes should base on the time
of RAM indexing.

I wonder why a buffered indexing even has a good performance than a ram
indexing.

So interesting!

=0D

Best regards,

Flik Shen



**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
------_=_NextPart_002_01C68D3A.533E9618
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" xmlns:w=
=3D"urn:schemas-microsoft-com:office:word" xmlns=
=3D"http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal;
	font-family:Arial;
	color:windowtext;}
span.EmailStyle18
	{mso-style-type:personal;
	font-family:Arial;
	color:navy;}
span.EmailStyle19
	{mso-style-type:personal-reply;
	font-family:Arial;
	color:navy;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DZH-CN link=3Dblue vlink=3Dpurple style=
=3D'text-justify-trim:punctuation'>

<div class=3DSection1 style=3D'layout-grid:15.6pt'>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>Hi,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>I am freshman to Lucene and I am reading the book
&#8220;Lucene In Action&#8221;.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>Just as that we know, there are two kinds of=
 directory
to hold index, one is File System and the other is=
 RAM.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>There is a sample to compare performances of these=
 two
kind directories and there is also a piece of code about &#8220;Batch=
 indexing
by using RAMDirectory as a buffer&#8221;.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>When I follow some samples, I found an interesting
thing about indexing performance.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>I combine these two pieces of codes and time each=
 kind
directory indexing. (Please refer the attachment for details=
 processes)<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>I load 3000 docs and 5 words per doc. I use File
System Directory and RAM Directory to indexing these docs directly. The=
 time of
these two are 10737ms and 1575ms.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>Then I use a RAM directory as a buffer for=
 indexing
and use method &#8220;addIndexes&#8221; of a new Index writer which finally
holds index in a File System directory.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>The time it consumed is=
 1348ms.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>How could this be?<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>I think the time that buffered indexing consumes
should base on the time of RAM indexing.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>I wonder why a buffered indexing even has a good
performance than a ram indexing.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>So interesting!<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>Best regards,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>Flik Shen<o:p></o:p></span></font></p>

</div>

</body>

</html>

<table><tr><td bgcolor=3D#ffffff><font color=3D#000000>****************=
 CAUTION - Disclaimer *****************<br>
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.<br>
***INFOSYS******** End of Disclaimer ********INFOSYS***<br>
</font></td></tr></table>
------_=_NextPart_002_01C68D3A.533E9618--

------_=_NextPart_001_01C68D3A.533E9618
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C68D3A.533E9618--

From java-user-return-21272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 11:31:34 2006
Return-Path: <java-user-return-21272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 271 invoked from network); 11 Jun 2006 11:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 11:31:33 -0000
Received: (qmail 97842 invoked by uid 500); 11 Jun 2006 11:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97801 invoked by uid 500); 11 Jun 2006 11:31:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97790 invoked by uid 99); 11 Jun 2006 11:31:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 04:31:28 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=HTML_MESSAGE,HTML_TAG_EXIST_TBODY,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 04:31:25 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1886290ugc
        for <java-user@lucene.apache.org>; Sun, 11 Jun 2006 04:31:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fcKVY7tuHm5tj+OS12ik6aASUgS34LIcIhMy2cqvKRUoUMW4j4oka6EKihe4HO+gVBnCax2gEGlKvPWrB7r2G+m508mP+xX24oSwzS6KeqZLkca4yeNao0uQlmq4Me5/wZfpNiFDi2rYdzwmLwWCItBTfmQPHrdHSQfc+TV2L0M=
Received: by 10.67.105.19 with SMTP id h19mr4128819ugm;
        Sun, 11 Jun 2006 04:31:03 -0700 (PDT)
Received: by 10.66.248.13 with HTTP; Sun, 11 Jun 2006 04:31:03 -0700 (PDT)
Message-ID: <8e7e4d020606110431s6a573effia7bf210e0122ebdb@mail.gmail.com>
Date: Sun, 11 Jun 2006 19:31:03 +0800
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: An interesting thing
In-Reply-To: <858CC94E9BA8CF42BE18C3BCB82511B501E544FA@sgimsg01.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7923_6701131.1150025463692"
References: <858CC94E9BA8CF42BE18C3BCB82511B501E544FA@sgimsg01.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7923_6701131.1150025463692
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In some OS, the ram is not only "RAM". The virtual ram uses the disk. That's
very slow.
In some windows platform, you will find half of some application's ram is
virtual ram.
That's some why windows is slow in some fields.

On 6/11/06, Flik Shen <Flik_Shen@infosys.com> wrote:
>
>  Hi,
>
>
>
> I am freshman to Lucene and I am reading the book "Lucene In Action".
>
> Just as that we know, there are two kinds of directory to hold index, one
> is File System and the other is RAM.
>
> There is a sample to compare performances of these two kind directories
> and there is also a piece of code about "Batch indexing by using
> RAMDirectory as a buffer".
>
> When I follow some samples, I found an interesting thing about indexing
> performance.
>
>
>
> I combine these two pieces of codes and time each kind directory indexing.
> (Please refer the attachment for details processes)
>
> I load 3000 docs and 5 words per doc. I use File System Directory and RAM
> Directory to indexing these docs directly. The time of these two are 10737ms
> and 1575ms.
>
> Then I use a RAM directory as a buffer for indexing and use method
> "addIndexes" of a new Index writer which finally holds index in a File
> System directory.
>
> The time it consumed is 1348ms.
>
> How could this be?
>
> I think the time that buffered indexing consumes should base on the time
> of RAM indexing.
>
> I wonder why a buffered indexing even has a good performance than a ram
> indexing.
>
> So interesting!
>
>
>
> Best regards,
>
> Flik Shen
>  **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely for the use of the addressee(s). If you are not the intended
> recipient, please notify the sender by e-mail and delete the original
> message. Further, you are not to copy, disclose, or distribute this e-mail
> or its contents to any other person and any such actions are unlawful. This
> e-mail may contain viruses. Infosys has taken every reasonable precaution to
> minimize this risk, but is not liable for any damage you may sustain as a
> result of any virus in this e-mail. You should carry out your own virus
> checks before opening the e-mail or attachment. Infosys reserves the right
> to monitor and review the content of all messages sent to or from this
> e-mail address. Messages sent to or from this e-mail address may be stored
> on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
Yueyu Lin

------=_Part_7923_6701131.1150025463692--

From java-user-return-21273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 13:35:49 2006
Return-Path: <java-user-return-21273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21948 invoked from network); 11 Jun 2006 13:35:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 13:35:49 -0000
Received: (qmail 37784 invoked by uid 500); 11 Jun 2006 13:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37753 invoked by uid 500); 11 Jun 2006 13:35:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37742 invoked by uid 99); 11 Jun 2006 13:35:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 06:35:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 06:35:41 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout1-sn2.hy.skanova.net (7.2.072.1)
        id 448977B300049204 for java-user@lucene.apache.org; Sun, 11 Jun 2006 15:35:18 +0200
Subject: Re: sitegeist
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <1148685472.5049.16.camel@localhost>
References: <1148550683.4682.65.camel@localhost>
	 <1148685472.5049.16.camel@localhost>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Sun, 11 Jun 2006 15:35:12 +0200
Message-Id: <1150032913.4978.135.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sat, 2006-05-27 at 01:17 +0200, karl wettin wrote:
> Will report back with results in a month or so. so.

Here is a report on my very simple sitegiest:

I have about 200,000 documents in my corpus. All search results are
passed on the SiteGeist-class that contains a Map<Content, Double>,
where the double represent the total score of the top n (5 in my case,
quite unscientific) results. This value is updated by a secondary thread
to avoid synchronization or and loss of data.

It's not too bad. Most important, it is fast.

However, since I use the results and not the query I have to mine the
data (currently with my eyes) in order to see what people have been
searching for. An example of this could be the results of query "vista".
Does it mean they are looking for "buena vista social club" or
"microsoft vista"? Using my current strategy with a "mean document
result score" it will not work too well, so I'll have to consider a mean
classification of the results before I choose what document to boost.

Another way to go is to track what result people choose to click on.
This is probably much better. It is also worth to consider if the user
found what they are looking for. Given that a corpus is supposed to
contain everything, this would mean something is missing. Or that the
user has bad query skills. I would then have to analyze the query and
keep track of how and if the query is refined. What should go to the
"wish list" and what should be considered a bad query? This might
consume too much resources for my application.

Perhaps a simple thing as mining on a time-axis will help me. I'll be
adding some new dimensions to the statistics and report back in a few
weeks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 16:10:35 2006
Return-Path: <java-user-return-21274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47979 invoked from network); 11 Jun 2006 16:10:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 16:10:35 -0000
Received: (qmail 32038 invoked by uid 500); 11 Jun 2006 16:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31829 invoked by uid 500); 11 Jun 2006 16:10:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31818 invoked by uid 99); 11 Jun 2006 16:10:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 09:10:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.47] (HELO mtaout01-winn.ispmail.ntl.com) (81.103.221.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 09:10:23 -0700
Received: from aamtaout02-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout01-winn.ispmail.ntl.com with ESMTP
          id <20060611161000.SJO29343.mtaout01-winn.ispmail.ntl.com@aamtaout02-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>;
          Sun, 11 Jun 2006 17:10:00 +0100
Received: from jhi ([82.15.75.27]) by aamtaout02-winn.ispmail.ntl.com
          with SMTP
          id <20060611161000.ZBZE24467.aamtaout02-winn.ispmail.ntl.com@jhi>
          for <java-user@lucene.apache.org>;
          Sun, 11 Jun 2006 17:10:00 +0100
Message-ID: <002901c68d71$810706a0$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>
References: <858CC94E9BA8CF42BE18C3BCB82511B501E544FA@sgimsg01.ad.infosys.com> <8e7e4d020606110431s6a573effia7bf210e0122ebdb@mail.gmail.com>
Subject: Re: An interesting thing
Date: Sun, 11 Jun 2006 17:10:03 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In Windows XP can't you change the registry to use only phyiscal RAM?
----- Original Message ----- 
From: "yueyu lin" <popeyelin@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, June 11, 2006 12:31 PM
Subject: Re: An interesting thing


> In some OS, the ram is not only "RAM". The virtual ram uses the disk. 
> That's
> very slow.
> In some windows platform, you will find half of some application's ram is
> virtual ram.
> That's some why windows is slow in some fields.
>
> On 6/11/06, Flik Shen <Flik_Shen@infosys.com> wrote:
>>
>>  Hi,
>>
>>
>>
>> I am freshman to Lucene and I am reading the book "Lucene In Action".
>>
>> Just as that we know, there are two kinds of directory to hold index, one
>> is File System and the other is RAM.
>>
>> There is a sample to compare performances of these two kind directories
>> and there is also a piece of code about "Batch indexing by using
>> RAMDirectory as a buffer".
>>
>> When I follow some samples, I found an interesting thing about indexing
>> performance.
>>
>>
>>
>> I combine these two pieces of codes and time each kind directory 
>> indexing.
>> (Please refer the attachment for details processes)
>>
>> I load 3000 docs and 5 words per doc. I use File System Directory and RAM
>> Directory to indexing these docs directly. The time of these two are 
>> 10737ms
>> and 1575ms.
>>
>> Then I use a RAM directory as a buffer for indexing and use method
>> "addIndexes" of a new Index writer which finally holds index in a File
>> System directory.
>>
>> The time it consumed is 1348ms.
>>
>> How could this be?
>>
>> I think the time that buffered indexing consumes should base on the time
>> of RAM indexing.
>>
>> I wonder why a buffered indexing even has a good performance than a ram
>> indexing.
>>
>> So interesting!
>>
>>
>>
>> Best regards,
>>
>> Flik Shen
>>  **************** CAUTION - Disclaimer *****************
>> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
>> solely for the use of the addressee(s). If you are not the intended
>> recipient, please notify the sender by e-mail and delete the original
>> message. Further, you are not to copy, disclose, or distribute this 
>> e-mail
>> or its contents to any other person and any such actions are unlawful. 
>> This
>> e-mail may contain viruses. Infosys has taken every reasonable precaution 
>> to
>> minimize this risk, but is not liable for any damage you may sustain as a
>> result of any virus in this e-mail. You should carry out your own virus
>> checks before opening the e-mail or attachment. Infosys reserves the 
>> right
>> to monitor and review the content of all messages sent to or from this
>> e-mail address. Messages sent to or from this e-mail address may be 
>> stored
>> on the Infosys e-mail system.
>> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> --
> Yueyu Lin
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 11 22:20:36 2006
Return-Path: <java-user-return-21275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8732 invoked from network); 11 Jun 2006 22:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2006 22:20:36 -0000
Received: (qmail 88023 invoked by uid 500); 11 Jun 2006 22:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87337 invoked by uid 500); 11 Jun 2006 22:20:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 59438 invoked by uid 99); 11 Jun 2006 16:45:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mfncooper@gmail.com designates 64.233.162.194 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=lgUVfh9kc0Rnl//iB+yvnlierb9oGq1XWOYmQX1cEzEUIq+khTL9InRyvubV1r1BWzz0qzPgxoumEjiodVAVgnletPdq8NY/K6iEmWq/r0oqkJt3GlK3NaTf2N72dCEgeZfEJsRAXhO9vGpcomECkphFx980mvVBHtqv1HLddWw=
Message-ID: <16d6c6200606110945m32c5caa2pd048fc8dfbc3a944@mail.gmail.com>
Date: Sun, 11 Jun 2006 09:45:33 -0700
From: "Martin Cooper" <martinc@apache.org>
Sender: mfncooper@gmail.com
To: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Re[2]: Fwd: Lucene 2.0.0 release available
Cc: java-user@lucene.apache.org, jrduncans@stephenduncanjr.com
In-Reply-To: <20060611035327.78598.qmail@web50308.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_137_25991313.1150044333122"
References: <1624244657.20060611000300@laposte.net>
	 <20060611035327.78598.qmail@web50308.mail.yahoo.com>
X-Google-Sender-Auth: 3961b4a167fb47da
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_137_25991313.1150044333122
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've deployed 1.9.1 and 2.0.0 to the ASF Maven 2 repo and requested a sync
with ibiblio, so hopefully they'll be available soon.

--
Martin Cooper


On 6/10/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> It's really just a matter of putting the Jars in the appropriate directory
> on the appropriate machine, I think.
> Maybe CC-ed people know which dir/machine that is.
> The issue is: http://issues.apache.org/jira/browse/LUCENE-551
>
> Otis
>
> ----- Original Message ----
> From: Sven Duzont <sven.duzont@laposte.net>
> To: Otis Gospodnetic <java-user@lucene.apache.org>
> Sent: Saturday, June 10, 2006 6:03:00 PM
> Subject: Re[2]: Fwd: Lucene 2.0.0 release available
>
> Hello Otis,
>
> I unfortunately don't master enough maven yet to know how to push a
> library on maven public repositories.
>
> <off-topic>
> However i just found this eBook that looks interesting
> http://www.mergere.com/m2book_download.jsp
> </off-topic>
>
> Waiting for a maven guru to release lucene 2.0 on a public repo, i'll
> just put the lib on a local one
> Thanks and have a nice day.
>
> --- Sven
>
> Le vendredi 9 juin 2006  01:54:48, vous criviez :
>
> OG> Hi Sven,
>
> OG> Somebody asked about the same thing a few weeks back and opened a
> OG> JIRA issue.  It looks like the push to ibiblio servers did not
> OG> happen, even though I added notes about that to the release HOWTO
> OG> doc on the Wiki.  My notes might be incorrect, so I commented on
> OG> that JIRA issues asking for clarifications, as people there seemed
> OG> to know how new releases should get pushed out for ibiblio.
> OG> Nobody responded yet, I'm afraid.  If you know how that's done,
> OG> let me know, I'll gladly push the release files wherever they need to
> get pushed.
>
> OG> Otis
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>

------=_Part_137_25991313.1150044333122--

From java-user-return-21276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 02:33:20 2006
Return-Path: <java-user-return-21276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62846 invoked from network); 12 Jun 2006 02:33:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 02:33:20 -0000
Received: (qmail 29641 invoked by uid 500); 12 Jun 2006 02:33:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29380 invoked by uid 500); 12 Jun 2006 02:33:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29369 invoked by uid 99); 12 Jun 2006 02:33:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 19:33:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 19:33:10 -0700
Received: from gtconn01.ad.infosys.com ([192.168.180.63]) by SFOVWL03.infosys.com with InterScan Messaging Security Suite; Sun, 11 Jun 2006 19:24:17 -0700
Received: from SGIMSG01.ad.infosys.com ([172.21.240.8]) by gtconn01.ad.infosys.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Sun, 11 Jun 2006 19:29:55 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: An interesting thing
Date: Mon, 12 Jun 2006 10:29:51 +0800
Message-ID: <858CC94E9BA8CF42BE18C3BCB82511B501E546A5@sgimsg01.ad.infosys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: An interesting thing
Thread-Index: AcaNSjX5gNjcEbJPQXGNA9usGJxDwAAeXDJg
From: "Flik Shen" <Flik_Shen@infosys.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jun 2006 02:29:55.0584 (UTC) FILETIME=[179DF000:01C68DC8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One thing could not be explained clearly.
That is why "RAM" ALWAYS take more time than buffered indexing.
On other hand the buffered indexing is to use "RAM" as a buffer.
Is there some difference between these two "RAM"?
To use "RAM" as a buffer I take additional step to convert buffered
index to FS index eventually. How could it save time?

Following is the class declaration:
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Class =
FSversusRAMDirectoryTest Begin =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
package study.lucene.chapter2;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

import junit.framework.TestCase;

import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.RAMDirectory;

public class FSversusRAMDirectoryTest extends TestCase {

    private Directory fsDir;

    private Directory ramDir;

    private Directory fsBufDir;

    private Collection docs =3D loadDocuments(3000, 5);

    protected void setUp() throws Exception {

        String fsIndexDir =3D System.getProperty("java.io.tmpdir", =
"tmp")
                          + System.getProperty("file.separator")
                          + "fs-index";
        String fsBufIndexDir =3D System.getProperty("java.io.tmpdir",
"tmp")
                                  + System.getProperty("file.separator")
                                  + "fs-buffered-index";
        // Create Directory whose content is held in RAM
        ramDir =3D new RAMDirectory();

        // Create Directory whose content is stored on disk
        fsDir =3D FSDirectory.getDirectory(fsIndexDir, true);

        // Create Directory whose content is stored on disk
        fsBufDir =3D FSDirectory.getDirectory(fsBufIndexDir, true);
    }

    public void testTiming() throws IOException {

        // RAMDirectory is faster than FSDirectory
        long ramTiming =3D timeIndexWriter(ramDir);
        long fsTiming =3D timeIndexWriter(fsDir);
        assertTrue(fsTiming > ramTiming);

        long bfsTiming =3D timeBufIndexWriter(fsBufDir);

        System.out.println("RAMDirectory Time: " + (ramTiming) + " ms");
        System.out.println("FSDirectory Time : " + (fsTiming) + " ms");
        System.out.println("BufferedDirectory Time : " + (bfsTiming) + "
ms");
    }

    private long timeBufIndexWriter(Directory dir) throws IOException {

        long start =3D System.currentTimeMillis();
        addBufDocuments(dir);
       =20
        long stop =3D System.currentTimeMillis();
        return (stop - start);
    }

    private void addBufDocuments(Directory dir) throws IOException {

        Directory[] tempDirs =3D {new RAMDirectory()};
        addDocuments(tempDirs[0]);

        IndexWriter writer =3D new IndexWriter(dir, new =
SimpleAnalyzer(),
true);
        writer.addIndexes(tempDirs);
       =20
        writer.optimize();
        writer.close();
    }

    private long timeIndexWriter(Directory dir) throws IOException {
        long start =3D System.currentTimeMillis();
        addDocuments(dir);
        long stop =3D System.currentTimeMillis();
        return (stop - start);
    }

    private void addDocuments(Directory dir) throws IOException {
        IndexWriter writer =3D new IndexWriter(dir, new =
SimpleAnalyzer(),
true);
       =20
/*
        // change to adjust performance of indexing with FSDirectory
        // Parameters that affect performance of FSDirectory
        writer.setMergeFactor(writer.getMergeFactor());
        writer.setMaxMergeDocs(writer.getMaxMergeDocs());
        writer.setMaxBufferedDocs(writer.getMaxBufferedDocs());
*/        =20

        for (Iterator iter =3D docs.iterator(); iter.hasNext();) {

            Document doc =3D new Document();
            String word =3D (String) iter.next();
            doc.add(new Field("keyword", word, Field.Store.YES,
                    Field.Index.UN_TOKENIZED));
            doc.add(new Field("unindexed", word, Field.Store.YES,
                    Field.Index.NO));
            doc.add(new Field("unstored", word, Field.Store.NO,
                    Field.Index.NO_NORMS));
            doc.add(new Field("text", word, Field.Store.YES,
                    Field.Index.TOKENIZED));
            writer.addDocument(doc);
        }
        writer.optimize();
        writer.close();
    }

    private Collection loadDocuments(int numDocs, int wordsPerDoc) {
        Collection docs =3D new ArrayList(numDocs);
        for (int i =3D 0; i < numDocs; i++) {
            StringBuffer doc =3D new StringBuffer(wordsPerDoc);
            for (int j =3D 0; j < wordsPerDoc; j++) {
                doc.append("Bibamus ");
            }
            docs.add(doc.toString());
        }
        return docs;
    }
}
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D  Class =
FSversusRAMDirectoryTest End  =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
-----Original Message-----
From: yueyu lin [mailto:popeyelin@gmail.com]=20
Sent: Sunday, June 11, 2006 7:31 PM
To: java-user@lucene.apache.org
Subject: Re: An interesting thing

In some OS, the ram is not only "RAM". The virtual ram uses the disk.
That's
very slow.
In some windows platform, you will find half of some application's ram
is
virtual ram.
That's some why windows is slow in some fields.

On 6/11/06, Flik Shen <Flik_Shen@infosys.com> wrote:
>
>  Hi,
>
>
>
> I am freshman to Lucene and I am reading the book "Lucene In Action".
>
> Just as that we know, there are two kinds of directory to hold index,
one
> is File System and the other is RAM.
>
> There is a sample to compare performances of these two kind
directories
> and there is also a piece of code about "Batch indexing by using
> RAMDirectory as a buffer".
>
> When I follow some samples, I found an interesting thing about
indexing
> performance.
>
>
>
> I combine these two pieces of codes and time each kind directory
indexing.
> (Please refer the attachment for details processes)
>
> I load 3000 docs and 5 words per doc. I use File System Directory and
RAM
> Directory to indexing these docs directly. The time of these two are
10737ms
> and 1575ms.
>
> Then I use a RAM directory as a buffer for indexing and use method
> "addIndexes" of a new Index writer which finally holds index in a File
> System directory.
>
> The time it consumed is 1348ms.
>
> How could this be?
>
> I think the time that buffered indexing consumes should base on the
time
> of RAM indexing.
>
> I wonder why a buffered indexing even has a good performance than a
ram
> indexing.
>
> So interesting!
>
>
>
> Best regards,
>
> Flik Shen
>  **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely for the use of the addressee(s). If you are not the intended
> recipient, please notify the sender by e-mail and delete the original
> message. Further, you are not to copy, disclose, or distribute this
e-mail
> or its contents to any other person and any such actions are unlawful.
This
> e-mail may contain viruses. Infosys has taken every reasonable
precaution to
> minimize this risk, but is not liable for any damage you may sustain
as a
> result of any virus in this e-mail. You should carry out your own
virus
> checks before opening the e-mail or attachment. Infosys reserves the
right
> to monitor and review the content of all messages sent to or from this
> e-mail address. Messages sent to or from this e-mail address may be
stored
> on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
--
Yueyu Lin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 02:38:52 2006
Return-Path: <java-user-return-21277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63913 invoked from network); 12 Jun 2006 02:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 02:38:52 -0000
Received: (qmail 35796 invoked by uid 500); 12 Jun 2006 02:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35760 invoked by uid 500); 12 Jun 2006 02:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35749 invoked by uid 99); 12 Jun 2006 02:38:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 19:38:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 19:38:45 -0700
Received: by ug-out-1314.google.com with SMTP id j40so2071364ugd
        for <java-user@lucene.apache.org>; Sun, 11 Jun 2006 19:38:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q9GytAKYDrZH8j6RbAIhsylzJJCexLpsgbeUm41zdbjWtD01EAKMBwuI0oLT9b2fsRJZk/5Lu9+VhSCY1wsUN3jDnxHHtVTri/1zPsyZiTbKkEZeMJ7IPOOeBX/b4+XpH9IRTmW6/iyJudJqivVKtw7HTW2BUHmn056jF2ohOwc=
Received: by 10.67.101.10 with SMTP id d10mr4717101ugm;
        Sun, 11 Jun 2006 19:38:23 -0700 (PDT)
Received: by 10.66.248.13 with HTTP; Sun, 11 Jun 2006 19:38:23 -0700 (PDT)
Message-ID: <8e7e4d020606111938h38b46ae6uc5c527a1ff985b30@mail.gmail.com>
Date: Mon, 12 Jun 2006 10:38:23 +0800
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: An interesting thing
In-Reply-To: <858CC94E9BA8CF42BE18C3BCB82511B501E546A5@sgimsg01.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4130_5331339.1150079903044"
References: <858CC94E9BA8CF42BE18C3BCB82511B501E546A5@sgimsg01.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4130_5331339.1150079903044
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

1.  Buffered index is using ram. They are small and samll enough to be easy
for OS to allocate several(or only one) pages to store them.
2. RAMDirectory will have to apply huge blocks of ram from OS. Sometimes OS
cannot allocate so many ram efficiently. So some of pages are moved to disk
and a ram-disk mapping is constructed. When using those kinds of pages, OS
has to first remove some using pages in memory and then load some pages from
disk into ram. That's a great cost.

For any program, applying huge memory is always slow than applying small
memory.

On 6/12/06, Flik Shen <Flik_Shen@infosys.com> wrote:
>
> One thing could not be explained clearly.
> That is why "RAM" ALWAYS take more time than buffered indexing.
> On other hand the buffered indexing is to use "RAM" as a buffer.
> Is there some difference between these two "RAM"?
> To use "RAM" as a buffer I take additional step to convert buffered
> index to FS index eventually. How could it save time?
>
> Following is the class declaration:
> ================= Class FSversusRAMDirectoryTest Begin =================
> package study.lucene.chapter2;
>
> import java.io.IOException;
> import java.util.ArrayList;
> import java.util.Collection;
> import java.util.Iterator;
>
> import junit.framework.TestCase;
>
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.store.RAMDirectory;
>
> public class FSversusRAMDirectoryTest extends TestCase {
>
>     private Directory fsDir;
>
>     private Directory ramDir;
>
>     private Directory fsBufDir;
>
>     private Collection docs = loadDocuments(3000, 5);
>
>     protected void setUp() throws Exception {
>
>         String fsIndexDir = System.getProperty("java.io.tmpdir", "tmp")
>                           + System.getProperty("file.separator")
>                           + "fs-index";
>         String fsBufIndexDir = System.getProperty("java.io.tmpdir",
> "tmp")
>                                   + System.getProperty("file.separator")
>                                   + "fs-buffered-index";
>         // Create Directory whose content is held in RAM
>         ramDir = new RAMDirectory();
>
>         // Create Directory whose content is stored on disk
>         fsDir = FSDirectory.getDirectory(fsIndexDir, true);
>
>         // Create Directory whose content is stored on disk
>         fsBufDir = FSDirectory.getDirectory(fsBufIndexDir, true);
>     }
>
>     public void testTiming() throws IOException {
>
>         // RAMDirectory is faster than FSDirectory
>         long ramTiming = timeIndexWriter(ramDir);
>         long fsTiming = timeIndexWriter(fsDir);
>         assertTrue(fsTiming > ramTiming);
>
>         long bfsTiming = timeBufIndexWriter(fsBufDir);
>
>         System.out.println("RAMDirectory Time: " + (ramTiming) + " ms");
>         System.out.println("FSDirectory Time : " + (fsTiming) + " ms");
>         System.out.println("BufferedDirectory Time : " + (bfsTiming) + "
> ms");
>     }
>
>     private long timeBufIndexWriter(Directory dir) throws IOException {
>
>         long start = System.currentTimeMillis();
>         addBufDocuments(dir);
>
>         long stop = System.currentTimeMillis();
>         return (stop - start);
>     }
>
>     private void addBufDocuments(Directory dir) throws IOException {
>
>         Directory[] tempDirs = {new RAMDirectory()};
>         addDocuments(tempDirs[0]);
>
>         IndexWriter writer = new IndexWriter(dir, new SimpleAnalyzer(),
> true);
>         writer.addIndexes(tempDirs);
>
>         writer.optimize();
>         writer.close();
>     }
>
>     private long timeIndexWriter(Directory dir) throws IOException {
>         long start = System.currentTimeMillis();
>         addDocuments(dir);
>         long stop = System.currentTimeMillis();
>         return (stop - start);
>     }
>
>     private void addDocuments(Directory dir) throws IOException {
>         IndexWriter writer = new IndexWriter(dir, new SimpleAnalyzer(),
> true);
>
> /*
>         // change to adjust performance of indexing with FSDirectory
>         // Parameters that affect performance of FSDirectory
>         writer.setMergeFactor(writer.getMergeFactor());
>         writer.setMaxMergeDocs(writer.getMaxMergeDocs());
>         writer.setMaxBufferedDocs(writer.getMaxBufferedDocs());
> */
>
>         for (Iterator iter = docs.iterator(); iter.hasNext();) {
>
>             Document doc = new Document();
>             String word = (String) iter.next();
>             doc.add(new Field("keyword", word, Field.Store.YES,
>                     Field.Index.UN_TOKENIZED));
>             doc.add(new Field("unindexed", word, Field.Store.YES,
>                     Field.Index.NO));
>             doc.add(new Field("unstored", word, Field.Store.NO,
>                     Field.Index.NO_NORMS));
>             doc.add(new Field("text", word, Field.Store.YES,
>                     Field.Index.TOKENIZED));
>             writer.addDocument(doc);
>         }
>         writer.optimize();
>         writer.close();
>     }
>
>     private Collection loadDocuments(int numDocs, int wordsPerDoc) {
>         Collection docs = new ArrayList(numDocs);
>         for (int i = 0; i < numDocs; i++) {
>             StringBuffer doc = new StringBuffer(wordsPerDoc);
>             for (int j = 0; j < wordsPerDoc; j++) {
>                 doc.append("Bibamus ");
>             }
>             docs.add(doc.toString());
>         }
>         return docs;
>     }
> }
> =================  Class FSversusRAMDirectoryTest End  =================
> -----Original Message-----
> From: yueyu lin [mailto:popeyelin@gmail.com]
> Sent: Sunday, June 11, 2006 7:31 PM
> To: java-user@lucene.apache.org
> Subject: Re: An interesting thing
>
> In some OS, the ram is not only "RAM". The virtual ram uses the disk.
> That's
> very slow.
> In some windows platform, you will find half of some application's ram
> is
> virtual ram.
> That's some why windows is slow in some fields.
>
> On 6/11/06, Flik Shen <Flik_Shen@infosys.com> wrote:
> >
> >  Hi,
> >
> >
> >
> > I am freshman to Lucene and I am reading the book "Lucene In Action".
> >
> > Just as that we know, there are two kinds of directory to hold index,
> one
> > is File System and the other is RAM.
> >
> > There is a sample to compare performances of these two kind
> directories
> > and there is also a piece of code about "Batch indexing by using
> > RAMDirectory as a buffer".
> >
> > When I follow some samples, I found an interesting thing about
> indexing
> > performance.
> >
> >
> >
> > I combine these two pieces of codes and time each kind directory
> indexing.
> > (Please refer the attachment for details processes)
> >
> > I load 3000 docs and 5 words per doc. I use File System Directory and
> RAM
> > Directory to indexing these docs directly. The time of these two are
> 10737ms
> > and 1575ms.
> >
> > Then I use a RAM directory as a buffer for indexing and use method
> > "addIndexes" of a new Index writer which finally holds index in a File
> > System directory.
> >
> > The time it consumed is 1348ms.
> >
> > How could this be?
> >
> > I think the time that buffered indexing consumes should base on the
> time
> > of RAM indexing.
> >
> > I wonder why a buffered indexing even has a good performance than a
> ram
> > indexing.
> >
> > So interesting!
> >
> >
> >
> > Best regards,
> >
> > Flik Shen
> >  **************** CAUTION - Disclaimer *****************
> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> > solely for the use of the addressee(s). If you are not the intended
> > recipient, please notify the sender by e-mail and delete the original
> > message. Further, you are not to copy, disclose, or distribute this
> e-mail
> > or its contents to any other person and any such actions are unlawful.
> This
> > e-mail may contain viruses. Infosys has taken every reasonable
> precaution to
> > minimize this risk, but is not liable for any damage you may sustain
> as a
> > result of any virus in this e-mail. You should carry out your own
> virus
> > checks before opening the e-mail or attachment. Infosys reserves the
> right
> > to monitor and review the content of all messages sent to or from this
> > e-mail address. Messages sent to or from this e-mail address may be
> stored
> > on the Infosys e-mail system.
> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> --
> Yueyu Lin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
Yueyu Lin

------=_Part_4130_5331339.1150079903044--

From java-user-return-21278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 03:32:18 2006
Return-Path: <java-user-return-21278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76011 invoked from network); 12 Jun 2006 03:32:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 03:32:17 -0000
Received: (qmail 71243 invoked by uid 500); 12 Jun 2006 03:32:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71218 invoked by uid 500); 12 Jun 2006 03:32:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71207 invoked by uid 99); 12 Jun 2006 03:32:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 20:32:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 20:32:11 -0700
Received: from gtsmtp02.ad.infosys.com ([192.168.180.64]) by SFOVWL03.infosys.com with InterScan Messaging Security Suite; Sun, 11 Jun 2006 20:23:20 -0700
Received: from SGIMSG01.ad.infosys.com ([172.21.240.8]) by gtsmtp02.ad.infosys.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Sun, 11 Jun 2006 20:28:58 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: An interesting thing
Date: Mon, 12 Jun 2006 11:28:51 +0800
Message-ID: <858CC94E9BA8CF42BE18C3BCB82511B501E89E91@sgimsg01.ad.infosys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: An interesting thing
Thread-Index: AcaNyPNx0qIZPuzjSySZx6oBUkx6pgABXh0Q
From: "Flik Shen" <Flik_Shen@infosys.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jun 2006 03:28:58.0555 (UTC) FILETIME=[576468B0:01C68DD0]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

1. I use buffered indexing and ram indexing to index same 3000
documents. So I think they have same total sizes.
2. I store them in ram directory firstly no matter ram or buffered. I
think it should have same performances. Then I take further step to hold
index into file system directory.
So why do we consume less time when we take more actions based on same
previous action?

-----Original Message-----
From: yueyu lin [mailto:popeyelin@gmail.com]=20
Sent: Monday, June 12, 2006 10:38 AM
To: java-user@lucene.apache.org
Subject: Re: An interesting thing

1.  Buffered index is using ram. They are small and samll enough to be
easy
for OS to allocate several(or only one) pages to store them.
2. RAMDirectory will have to apply huge blocks of ram from OS. Sometimes
OS
cannot allocate so many ram efficiently. So some of pages are moved to
disk
and a ram-disk mapping is constructed. When using those kinds of pages,
OS
has to first remove some using pages in memory and then load some pages
from
disk into ram. That's a great cost.

For any program, applying huge memory is always slow than applying small
memory.

On 6/12/06, Flik Shen <Flik_Shen@infosys.com> wrote:
>
> One thing could not be explained clearly.
> That is why "RAM" ALWAYS take more time than buffered indexing.
> On other hand the buffered indexing is to use "RAM" as a buffer.
> Is there some difference between these two "RAM"?
> To use "RAM" as a buffer I take additional step to convert buffered
> index to FS index eventually. How could it save time?
>
> Following is the class declaration:
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Class =
FSversusRAMDirectoryTest Begin
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> package study.lucene.chapter2;
>
> import java.io.IOException;
> import java.util.ArrayList;
> import java.util.Collection;
> import java.util.Iterator;
>
> import junit.framework.TestCase;
>
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.store.RAMDirectory;
>
> public class FSversusRAMDirectoryTest extends TestCase {
>
>     private Directory fsDir;
>
>     private Directory ramDir;
>
>     private Directory fsBufDir;
>
>     private Collection docs =3D loadDocuments(3000, 5);
>
>     protected void setUp() throws Exception {
>
>         String fsIndexDir =3D System.getProperty("java.io.tmpdir",
"tmp")
>                           + System.getProperty("file.separator")
>                           + "fs-index";
>         String fsBufIndexDir =3D System.getProperty("java.io.tmpdir",
> "tmp")
>                                   +
System.getProperty("file.separator")
>                                   + "fs-buffered-index";
>         // Create Directory whose content is held in RAM
>         ramDir =3D new RAMDirectory();
>
>         // Create Directory whose content is stored on disk
>         fsDir =3D FSDirectory.getDirectory(fsIndexDir, true);
>
>         // Create Directory whose content is stored on disk
>         fsBufDir =3D FSDirectory.getDirectory(fsBufIndexDir, true);
>     }
>
>     public void testTiming() throws IOException {
>
>         // RAMDirectory is faster than FSDirectory
>         long ramTiming =3D timeIndexWriter(ramDir);
>         long fsTiming =3D timeIndexWriter(fsDir);
>         assertTrue(fsTiming > ramTiming);
>
>         long bfsTiming =3D timeBufIndexWriter(fsBufDir);
>
>         System.out.println("RAMDirectory Time: " + (ramTiming) + "
ms");
>         System.out.println("FSDirectory Time : " + (fsTiming) + "
ms");
>         System.out.println("BufferedDirectory Time : " + (bfsTiming) +
"
> ms");
>     }
>
>     private long timeBufIndexWriter(Directory dir) throws IOException
{
>
>         long start =3D System.currentTimeMillis();
>         addBufDocuments(dir);
>
>         long stop =3D System.currentTimeMillis();
>         return (stop - start);
>     }
>
>     private void addBufDocuments(Directory dir) throws IOException {
>
>         Directory[] tempDirs =3D {new RAMDirectory()};
>         addDocuments(tempDirs[0]);
>
>         IndexWriter writer =3D new IndexWriter(dir, new
SimpleAnalyzer(),
> true);
>         writer.addIndexes(tempDirs);
>
>         writer.optimize();
>         writer.close();
>     }
>
>     private long timeIndexWriter(Directory dir) throws IOException {
>         long start =3D System.currentTimeMillis();
>         addDocuments(dir);
>         long stop =3D System.currentTimeMillis();
>         return (stop - start);
>     }
>
>     private void addDocuments(Directory dir) throws IOException {
>         IndexWriter writer =3D new IndexWriter(dir, new
SimpleAnalyzer(),
> true);
>
> /*
>         // change to adjust performance of indexing with FSDirectory
>         // Parameters that affect performance of FSDirectory
>         writer.setMergeFactor(writer.getMergeFactor());
>         writer.setMaxMergeDocs(writer.getMaxMergeDocs());
>         writer.setMaxBufferedDocs(writer.getMaxBufferedDocs());
> */
>
>         for (Iterator iter =3D docs.iterator(); iter.hasNext();) {
>
>             Document doc =3D new Document();
>             String word =3D (String) iter.next();
>             doc.add(new Field("keyword", word, Field.Store.YES,
>                     Field.Index.UN_TOKENIZED));
>             doc.add(new Field("unindexed", word, Field.Store.YES,
>                     Field.Index.NO));
>             doc.add(new Field("unstored", word, Field.Store.NO,
>                     Field.Index.NO_NORMS));
>             doc.add(new Field("text", word, Field.Store.YES,
>                     Field.Index.TOKENIZED));
>             writer.addDocument(doc);
>         }
>         writer.optimize();
>         writer.close();
>     }
>
>     private Collection loadDocuments(int numDocs, int wordsPerDoc) {
>         Collection docs =3D new ArrayList(numDocs);
>         for (int i =3D 0; i < numDocs; i++) {
>             StringBuffer doc =3D new StringBuffer(wordsPerDoc);
>             for (int j =3D 0; j < wordsPerDoc; j++) {
>                 doc.append("Bibamus ");
>             }
>             docs.add(doc.toString());
>         }
>         return docs;
>     }
> }
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D  Class =
FSversusRAMDirectoryTest End
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> -----Original Message-----
> From: yueyu lin [mailto:popeyelin@gmail.com]
> Sent: Sunday, June 11, 2006 7:31 PM
> To: java-user@lucene.apache.org
> Subject: Re: An interesting thing
>
> In some OS, the ram is not only "RAM". The virtual ram uses the disk.
> That's
> very slow.
> In some windows platform, you will find half of some application's ram
> is
> virtual ram.
> That's some why windows is slow in some fields.
>
> On 6/11/06, Flik Shen <Flik_Shen@infosys.com> wrote:
> >
> >  Hi,
> >
> >
> >
> > I am freshman to Lucene and I am reading the book "Lucene In
Action".
> >
> > Just as that we know, there are two kinds of directory to hold
index,
> one
> > is File System and the other is RAM.
> >
> > There is a sample to compare performances of these two kind
> directories
> > and there is also a piece of code about "Batch indexing by using
> > RAMDirectory as a buffer".
> >
> > When I follow some samples, I found an interesting thing about
> indexing
> > performance.
> >
> >
> >
> > I combine these two pieces of codes and time each kind directory
> indexing.
> > (Please refer the attachment for details processes)
> >
> > I load 3000 docs and 5 words per doc. I use File System Directory
and
> RAM
> > Directory to indexing these docs directly. The time of these two are
> 10737ms
> > and 1575ms.
> >
> > Then I use a RAM directory as a buffer for indexing and use method
> > "addIndexes" of a new Index writer which finally holds index in a
File
> > System directory.
> >
> > The time it consumed is 1348ms.
> >
> > How could this be?
> >
> > I think the time that buffered indexing consumes should base on the
> time
> > of RAM indexing.
> >
> > I wonder why a buffered indexing even has a good performance than a
> ram
> > indexing.
> >
> > So interesting!
> >
> >
> >
> > Best regards,
> >
> > Flik Shen
> >  **************** CAUTION - Disclaimer *****************
> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION
intended
> > solely for the use of the addressee(s). If you are not the intended
> > recipient, please notify the sender by e-mail and delete the
original
> > message. Further, you are not to copy, disclose, or distribute this
> e-mail
> > or its contents to any other person and any such actions are
unlawful.
> This
> > e-mail may contain viruses. Infosys has taken every reasonable
> precaution to
> > minimize this risk, but is not liable for any damage you may sustain
> as a
> > result of any virus in this e-mail. You should carry out your own
> virus
> > checks before opening the e-mail or attachment. Infosys reserves the
> right
> > to monitor and review the content of all messages sent to or from
this
> > e-mail address. Messages sent to or from this e-mail address may be
> stored
> > on the Infosys e-mail system.
> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> --
> Yueyu Lin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
--
Yueyu Lin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 04:26:25 2006
Return-Path: <java-user-return-21279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84119 invoked from network); 12 Jun 2006 04:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 04:26:25 -0000
Received: (qmail 96982 invoked by uid 500); 12 Jun 2006 04:26:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96948 invoked by uid 500); 12 Jun 2006 04:26:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96937 invoked by uid 99); 12 Jun 2006 04:26:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 21:26:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 21:26:17 -0700
Received: from shivani [220.227.153.49] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id AE5DD9C0096; Mon, 12 Jun 2006 10:02:29 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: Asserting that a value must match the entire content of a field
Date: Mon, 12 Jun 2006 10:00:57 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0165_01C68E07.1A46CA40"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcaN2P/lAUYcRCvmRDO7EneUi+NVHQ==
Message-Id: <200606121002656.SM01068@shivani>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0165_01C68E07.1A46CA40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

I have a small query here.

 

How do I do an exact match on the value of a field and also assert that the
value must match the entire content of that field?

For E.g., I want that only the documents with 'Product Lifecycle' as the
value of a given field must be selected and even documents with 'Product
Lifecycle Management' as the field value must not be selected.

 

Thanks in Advance.

 

Shivani

 

 

 


------=_NextPart_000_0165_01C68E07.1A46CA40--



From java-user-return-21280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 04:31:22 2006
Return-Path: <java-user-return-21280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84793 invoked from network); 12 Jun 2006 04:31:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 04:31:22 -0000
Received: (qmail 1181 invoked by uid 500); 12 Jun 2006 04:31:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 754 invoked by uid 500); 12 Jun 2006 04:31:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 743 invoked by uid 99); 12 Jun 2006 04:31:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 21:31:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 21:31:14 -0700
Received: by wr-out-0506.google.com with SMTP id 70so383693wra
        for <java-user@lucene.apache.org>; Sun, 11 Jun 2006 21:30:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VPfVTDO3dIY7NKWpNNkplOFtOzQCXfHYcEBg8IytZY5iI00CerRZR526daFF3fWiA/0ZZ1kTTz0PElE+zz0dbq6avgYVn3F00u6/rV9kn1NE9l0L3ygCHxTZtrcACx+QW/dyi3NWdiXC3u6/QdZ+Q37/4JXNvhB0L1naO80vQlU=
Received: by 10.65.59.4 with SMTP id m4mr1850109qbk;
        Sun, 11 Jun 2006 21:30:53 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Sun, 11 Jun 2006 21:30:53 -0700 (PDT)
Message-ID: <a36516400606112130j692fd034s661331e8cfd8a588@mail.gmail.com>
Date: Mon, 12 Jun 2006 10:00:53 +0530
From: "vipin sharma" <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: IndexWriter.addIndexes & optimizatio
In-Reply-To: <20060609000333.23411.qmail@web50305.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1130_25810410.1150086653558"
References: <4487319D.10006@gmail.com>
	 <20060609000333.23411.qmail@web50305.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1130_25810410.1150086653558
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 - > Just set your maxBufferedDocs to as high a number as your RAM/heap will
let you, and pick a mergeFactor that is high, but doesn't get you in trouble
with open files.

can you please explaing this in brief??

regards and thanks,

On 6/9/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> When writing a unit test that comapres RAMDirectory and FSDirectory
> performance for Lucene in Action I had a very hard time showing that
> RAMDirectory really is faster. :)  Just set your maxBufferedDocs to as high
> a number as your RAM/heap will let you, and pick a mergeFactor that is high,
> but doesn't get you in trouble with open files.
>
> Otis
>
> ----- Original Message ----
> From: Dan Armbrust <daniel.armbrust.list@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 7, 2006 4:05:49 PM
> Subject: Re: IndexWriter.addIndexes & optimization
>
> Benjamin Stein wrote:
>
> >
> > I could probably store the little RAMDirectories to disk as many
> > FSDirectories, and then addIndexes() of *all* the FSDirectories at the
> end
> > instead of every time.  That would probably be smart.
> >
> > Glad I asked myself!
> >
>
> That was what I was going to suggest - you may also want to benchmark to
> see if the RAMDirectory is buying you anything.  With the data that I am
> indexing on my hardware, I found it to be faster to index to a regular
> FSDirectory that it is to use the RAMDirectory.  Especially if you tweak
> the performance knobs on the indexer so it does its own caching before
> it writes to the Directory.
>
> I do batches of documents to FSDirectories - and then merge all of the
> FSDirectories into a new master index at the end - so I never have to
> optimize during the indexing process.
>
> Dan
>
>
> --
> ****************************
> Daniel Armbrust
> Biomedical Informatics
> Mayo Clinic Rochester
> daniel.armbrust(at)mayo.edu
> http://informatics.mayo.edu/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1130_25810410.1150086653558--

From java-user-return-21281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 05:40:23 2006
Return-Path: <java-user-return-21281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96274 invoked from network); 12 Jun 2006 05:40:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 05:40:23 -0000
Received: (qmail 32201 invoked by uid 500); 12 Jun 2006 05:40:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32170 invoked by uid 500); 12 Jun 2006 05:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32159 invoked by uid 99); 12 Jun 2006 05:40:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 22:40:16 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 11 Jun 2006 22:40:14 -0700
Received: (qmail 27291 invoked by uid 60001); 12 Jun 2006 05:39:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=libZiDE6UXzxNUfdI4pnIOiLoMlbaa6ZEumqc6+ekKG/ICUfKmoJKEgBZUBsGchk5mTQJrn5sB1qAdP8Blnig8C6HflhP3vCxWlTeOvL5NQynpwxS2b17LAbTI4sxTEbZS9eTbGWfHq1Z5FuqrT5Av2tAZfmEpAagP1t7IQE84o=  ;
Message-ID: <20060612053948.27289.qmail@web50303.mail.yahoo.com>
Received: from [72.229.167.99] by web50303.mail.yahoo.com via HTTP; Sun, 11 Jun 2006 22:39:48 PDT
Date: Sun, 11 Jun 2006 22:39:48 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Asserting that a value must match the entire content of a field
To: java-user@lucene.apache.org
In-Reply-To: <200606121002656.SM01068@shivani>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One (ugly) way might be to insert artificial begin/end markers at both index and search time.

Otis

----- Original Message ----
From: Shivani Sawhney <shivani@netedgecomputing.com>
To: java-user@lucene.apache.org
Sent: Monday, June 12, 2006 12:30:57 AM
Subject: Asserting that a value must match the entire content of a field

Hi,

I have a small query here.

 

How do I do an exact match on the value of a field and also assert that the
value must match the entire content of that field?

For E.g., I want that only the documents with 'Product Lifecycle' as the
value of a given field must be selected and even documents with 'Product
Lifecycle Management' as the field value must not be selected.

 

Thanks in Advance.

 

Shivani

 

 

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 05:56:25 2006
Return-Path: <java-user-return-21282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99267 invoked from network); 12 Jun 2006 05:56:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 05:56:24 -0000
Received: (qmail 46373 invoked by uid 500); 12 Jun 2006 05:56:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46346 invoked by uid 500); 12 Jun 2006 05:56:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46333 invoked by uid 99); 12 Jun 2006 05:56:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 22:56:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 22:56:18 -0700
Received: from gtsmtp02.ad.infosys.com ([192.168.180.64]) by SFOVWL03.infosys.com with InterScan Messaging Security Suite; Sun, 11 Jun 2006 22:47:24 -0700
Received: from SGIMSG01.ad.infosys.com ([172.21.240.8]) by gtsmtp02.ad.infosys.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Sun, 11 Jun 2006 22:53:02 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexWriter.addIndexes & optimizatio
Date: Mon, 12 Jun 2006 13:52:49 +0800
Message-ID: <858CC94E9BA8CF42BE18C3BCB82511B501E8A087@sgimsg01.ad.infosys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexWriter.addIndexes & optimizatio
Thread-Index: AcaN2NjmqlgRQvIdQqSfNyhossc+qwACqK1Q
From: "Flik Shen" <Flik_Shen@infosys.com>
To: <java-user@lucene.apache.org>,
	"Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
X-OriginalArrivalTime: 12 Jun 2006 05:53:02.0467 (UTC) FILETIME=[7790B530:01C68DE4]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


It means that to pick both high maxBufferedDocs and mergeFator will
improve your indexing performance.
But if too high, it will lead you to an OutOfMemberException.exception.
And if you set mergeFactor too high will also lead you to problem "open
too many files".
So you should pick proper values according to your box physical setting.

> -----Original Message-----
> From: vipin sharma [mailto:heritrix.lucene@gmail.com]
> Sent: Monday, June 12, 2006 12:31 PM
> To: java-user@lucene.apache.org; Otis Gospodnetic
> Subject: Re: IndexWriter.addIndexes & optimizatio
>=0D
>  - > Just set your maxBufferedDocs to as high a number as your
RAM/heap will
> let you, and pick a mergeFactor that is high, but doesn't get you in
trouble
> with open files.
>=0D
> can you please explaing this in brief??
>=0D
> regards and thanks,
>=0D
> On 6/9/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> > When writing a unit test that comapres RAMDirectory and FSDirectory
> > performance for Lucene in Action I had a very hard time showing that
> > RAMDirectory really is faster. :)  Just set your maxBufferedDocs to
as high
> > a number as your RAM/heap will let you, and pick a mergeFactor that
is high,
> > but doesn't get you in trouble with open files.
> >
> > Otis
> >
> > ----- Original Message ----
> > From: Dan Armbrust <daniel.armbrust.list@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, June 7, 2006 4:05:49 PM
> > Subject: Re: IndexWriter.addIndexes & optimization
> >
> > Benjamin Stein wrote:
> >
> > >
> > > I could probably store the little RAMDirectories to disk as many
> > > FSDirectories, and then addIndexes() of *all* the FSDirectories at
the
> > end
> > > instead of every time.  That would probably be smart.
> > >
> > > Glad I asked myself!
> > >
> >
> > That was what I was going to suggest - you may also want to
benchmark to
> > see if the RAMDirectory is buying you anything.  With the data that
I am
> > indexing on my hardware, I found it to be faster to index to a
regular
> > FSDirectory that it is to use the RAMDirectory.  Especially if you
tweak
> > the performance knobs on the indexer so it does its own caching
before
> > it writes to the Directory.
> >
> > I do batches of documents to FSDirectories - and then merge all of
the
> > FSDirectories into a new master index at the end - so I never have
to
> > optimize during the indexing process.
> >
> > Dan
> >
> >
> > --
> > ****************************
> > Daniel Armbrust
> > Biomedical Informatics
> > Mayo Clinic Rochester
> > daniel.armbrust(at)mayo.edu
> > http://informatics.mayo.edu/
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >

**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 05:59:46 2006
Return-Path: <java-user-return-21283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99522 invoked from network); 12 Jun 2006 05:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 05:59:46 -0000
Received: (qmail 48518 invoked by uid 500); 12 Jun 2006 05:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48489 invoked by uid 500); 12 Jun 2006 05:59:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48478 invoked by uid 99); 12 Jun 2006 05:59:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 22:59:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 22:59:39 -0700
Received: from shivani [220.227.153.49] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id A42D66700AE; Mon, 12 Jun 2006 11:35:33 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>,
	"'Otis Gospodnetic'" <otis_gospodnetic@yahoo.com>
Subject: RE: Asserting that a value must match the entire content of a field
Date: Mon, 12 Jun 2006 11:34:04 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <20060612053948.27289.qmail@web50303.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcaN450i6fKC6FM0SPWdNgPEBdhsWgAAcaIw
Message-Id: <200606121135734.SM01068@shivani>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are you saying that there is no out-of-the-box way of doing this...?
Can I not check the content length somehow? As in, mention that the length
of the value (to be matched) must match the length of the field value...

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Monday, June 12, 2006 11:10 AM
To: java-user@lucene.apache.org
Subject: Re: Asserting that a value must match the entire content of a field

One (ugly) way might be to insert artificial begin/end markers at both index
and search time.

Otis

----- Original Message ----
From: Shivani Sawhney <shivani@netedgecomputing.com>
To: java-user@lucene.apache.org
Sent: Monday, June 12, 2006 12:30:57 AM
Subject: Asserting that a value must match the entire content of a field

Hi,

I have a small query here.

 

How do I do an exact match on the value of a field and also assert that the
value must match the entire content of that field?

For E.g., I want that only the documents with 'Product Lifecycle' as the
value of a given field must be selected and even documents with 'Product
Lifecycle Management' as the field value must not be selected.

 

Thanks in Advance.

 

Shivani

 

 

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 06:58:33 2006
Return-Path: <java-user-return-21284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7905 invoked from network); 12 Jun 2006 06:58:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 06:58:33 -0000
Received: (qmail 95234 invoked by uid 500); 12 Jun 2006 06:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95171 invoked by uid 500); 12 Jun 2006 06:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95131 invoked by uid 99); 12 Jun 2006 06:58:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 23:58:23 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jun 2006 23:58:21 -0700
Received: from gtconn01.ad.infosys.com ([192.168.180.63]) by SFOVWL03.infosys.com with InterScan Messaging Security Suite; Sun, 11 Jun 2006 23:49:27 -0700
Received: from SGIMSG01.ad.infosys.com ([172.21.240.8]) by gtconn01.ad.infosys.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Sun, 11 Jun 2006 23:55:05 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: An interesting thing
Date: Mon, 12 Jun 2006 14:54:59 +0800
Message-ID: <858CC94E9BA8CF42BE18C3BCB82511B501E8A193@sgimsg01.ad.infosys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: An interesting thing
Thread-Index: AcaNyPNx0qIZPuzjSySZx6oBUkx6pgABXh0QAAZ9NZA=
From: "Flik Shen" <Flik_Shen@infosys.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jun 2006 06:55:05.0786 (UTC) FILETIME=[22D619A0:01C68DED]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I understand why buffered indexing seems running faster.
It seems that initialization operation takes obvious time and impact the
indexing performance.
I found ram indexing is faster if I run buffered indexing prior to ram
indexing.
So I think the method "addDocuments" will take more time at first
running than second time.
This is why the buffered indexing runs faster when ram indexing prior to
buffered .



> -----Original Message-----
> From: Flik Shen [mailto:Flik_Shen@infosys.com]
> Sent: Monday, June 12, 2006 11:29 AM
> To: java-user@lucene.apache.org
> Subject: RE: An interesting thing
>=20
> 1. I use buffered indexing and ram indexing to index same 3000
> documents. So I think they have same total sizes.
> 2. I store them in ram directory firstly no matter ram or buffered. I
> think it should have same performances. Then I take further step to
hold
> index into file system directory.
> So why do we consume less time when we take more actions based on same
> previous action?
>=20
> -----Original Message-----
> From: yueyu lin [mailto:popeyelin@gmail.com]
> Sent: Monday, June 12, 2006 10:38 AM
> To: java-user@lucene.apache.org
> Subject: Re: An interesting thing
>=20
> 1.  Buffered index is using ram. They are small and samll enough to be
> easy
> for OS to allocate several(or only one) pages to store them.
> 2. RAMDirectory will have to apply huge blocks of ram from OS.
Sometimes
> OS
> cannot allocate so many ram efficiently. So some of pages are moved to
> disk
> and a ram-disk mapping is constructed. When using those kinds of
pages,
> OS
> has to first remove some using pages in memory and then load some
pages
> from
> disk into ram. That's a great cost.
>=20
> For any program, applying huge memory is always slow than applying
small
> memory.
>=20
> On 6/12/06, Flik Shen <Flik_Shen@infosys.com> wrote:
> >
> > One thing could not be explained clearly.
> > That is why "RAM" ALWAYS take more time than buffered indexing.
> > On other hand the buffered indexing is to use "RAM" as a buffer.
> > Is there some difference between these two "RAM"?
> > To use "RAM" as a buffer I take additional step to convert buffered
> > index to FS index eventually. How could it save time?
> >
> > Following is the class declaration:
> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Class =
FSversusRAMDirectoryTest Begin
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> > package study.lucene.chapter2;
> >
> > import java.io.IOException;
> > import java.util.ArrayList;
> > import java.util.Collection;
> > import java.util.Iterator;
> >
> > import junit.framework.TestCase;
> >
> > import org.apache.lucene.analysis.SimpleAnalyzer;
> > import org.apache.lucene.document.Document;
> > import org.apache.lucene.document.Field;
> > import org.apache.lucene.index.IndexWriter;
> > import org.apache.lucene.store.Directory;
> > import org.apache.lucene.store.FSDirectory;
> > import org.apache.lucene.store.RAMDirectory;
> >
> > public class FSversusRAMDirectoryTest extends TestCase {
> >
> >     private Directory fsDir;
> >
> >     private Directory ramDir;
> >
> >     private Directory fsBufDir;
> >
> >     private Collection docs =3D loadDocuments(3000, 5);
> >
> >     protected void setUp() throws Exception {
> >
> >         String fsIndexDir =3D System.getProperty("java.io.tmpdir",
> "tmp")
> >                           + System.getProperty("file.separator")
> >                           + "fs-index";
> >         String fsBufIndexDir =3D =
System.getProperty("java.io.tmpdir",
> > "tmp")
> >                                   +
> System.getProperty("file.separator")
> >                                   + "fs-buffered-index";
> >         // Create Directory whose content is held in RAM
> >         ramDir =3D new RAMDirectory();
> >
> >         // Create Directory whose content is stored on disk
> >         fsDir =3D FSDirectory.getDirectory(fsIndexDir, true);
> >
> >         // Create Directory whose content is stored on disk
> >         fsBufDir =3D FSDirectory.getDirectory(fsBufIndexDir, true);
> >     }
> >
> >     public void testTiming() throws IOException {
> >
> >         // RAMDirectory is faster than FSDirectory
> >         long ramTiming =3D timeIndexWriter(ramDir);
> >         long fsTiming =3D timeIndexWriter(fsDir);
> >         assertTrue(fsTiming > ramTiming);
> >
> >         long bfsTiming =3D timeBufIndexWriter(fsBufDir);
> >
> >         System.out.println("RAMDirectory Time: " + (ramTiming) + "
> ms");
> >         System.out.println("FSDirectory Time : " + (fsTiming) + "
> ms");
> >         System.out.println("BufferedDirectory Time : " + (bfsTiming)
+
> "
> > ms");
> >     }
> >
> >     private long timeBufIndexWriter(Directory dir) throws
IOException
> {
> >
> >         long start =3D System.currentTimeMillis();
> >         addBufDocuments(dir);
> >
> >         long stop =3D System.currentTimeMillis();
> >         return (stop - start);
> >     }
> >
> >     private void addBufDocuments(Directory dir) throws IOException {
> >
> >         Directory[] tempDirs =3D {new RAMDirectory()};
> >         addDocuments(tempDirs[0]);
> >
> >         IndexWriter writer =3D new IndexWriter(dir, new
> SimpleAnalyzer(),
> > true);
> >         writer.addIndexes(tempDirs);
> >
> >         writer.optimize();
> >         writer.close();
> >     }
> >
> >     private long timeIndexWriter(Directory dir) throws IOException {
> >         long start =3D System.currentTimeMillis();
> >         addDocuments(dir);
> >         long stop =3D System.currentTimeMillis();
> >         return (stop - start);
> >     }
> >
> >     private void addDocuments(Directory dir) throws IOException {
> >         IndexWriter writer =3D new IndexWriter(dir, new
> SimpleAnalyzer(),
> > true);
> >
> > /*
> >         // change to adjust performance of indexing with FSDirectory
> >         // Parameters that affect performance of FSDirectory
> >         writer.setMergeFactor(writer.getMergeFactor());
> >         writer.setMaxMergeDocs(writer.getMaxMergeDocs());
> >         writer.setMaxBufferedDocs(writer.getMaxBufferedDocs());
> > */
> >
> >         for (Iterator iter =3D docs.iterator(); iter.hasNext();) {
> >
> >             Document doc =3D new Document();
> >             String word =3D (String) iter.next();
> >             doc.add(new Field("keyword", word, Field.Store.YES,
> >                     Field.Index.UN_TOKENIZED));
> >             doc.add(new Field("unindexed", word, Field.Store.YES,
> >                     Field.Index.NO));
> >             doc.add(new Field("unstored", word, Field.Store.NO,
> >                     Field.Index.NO_NORMS));
> >             doc.add(new Field("text", word, Field.Store.YES,
> >                     Field.Index.TOKENIZED));
> >             writer.addDocument(doc);
> >         }
> >         writer.optimize();
> >         writer.close();
> >     }
> >
> >     private Collection loadDocuments(int numDocs, int wordsPerDoc) {
> >         Collection docs =3D new ArrayList(numDocs);
> >         for (int i =3D 0; i < numDocs; i++) {
> >             StringBuffer doc =3D new StringBuffer(wordsPerDoc);
> >             for (int j =3D 0; j < wordsPerDoc; j++) {
> >                 doc.append("Bibamus ");
> >             }
> >             docs.add(doc.toString());
> >         }
> >         return docs;
> >     }
> > }
> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D  Class =
FSversusRAMDirectoryTest End
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> > -----Original Message-----
> > From: yueyu lin [mailto:popeyelin@gmail.com]
> > Sent: Sunday, June 11, 2006 7:31 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: An interesting thing
> >
> > In some OS, the ram is not only "RAM". The virtual ram uses the
disk.
> > That's
> > very slow.
> > In some windows platform, you will find half of some application's
ram
> > is
> > virtual ram.
> > That's some why windows is slow in some fields.
> >
> > On 6/11/06, Flik Shen <Flik_Shen@infosys.com> wrote:
> > >
> > >  Hi,
> > >
> > >
> > >
> > > I am freshman to Lucene and I am reading the book "Lucene In
> Action".
> > >
> > > Just as that we know, there are two kinds of directory to hold
> index,
> > one
> > > is File System and the other is RAM.
> > >
> > > There is a sample to compare performances of these two kind
> > directories
> > > and there is also a piece of code about "Batch indexing by using
> > > RAMDirectory as a buffer".
> > >
> > > When I follow some samples, I found an interesting thing about
> > indexing
> > > performance.
> > >
> > >
> > >
> > > I combine these two pieces of codes and time each kind directory
> > indexing.
> > > (Please refer the attachment for details processes)
> > >
> > > I load 3000 docs and 5 words per doc. I use File System Directory
> and
> > RAM
> > > Directory to indexing these docs directly. The time of these two
are
> > 10737ms
> > > and 1575ms.
> > >
> > > Then I use a RAM directory as a buffer for indexing and use method
> > > "addIndexes" of a new Index writer which finally holds index in a
> File
> > > System directory.
> > >
> > > The time it consumed is 1348ms.
> > >
> > > How could this be?
> > >
> > > I think the time that buffered indexing consumes should base on
the
> > time
> > > of RAM indexing.
> > >
> > > I wonder why a buffered indexing even has a good performance than
a
> > ram
> > > indexing.
> > >
> > > So interesting!
> > >
> > >
> > >
> > > Best regards,
> > >
> > > Flik Shen
> > >  **************** CAUTION - Disclaimer *****************
> > > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION
> intended
> > > solely for the use of the addressee(s). If you are not the
intended
> > > recipient, please notify the sender by e-mail and delete the
> original
> > > message. Further, you are not to copy, disclose, or distribute
this
> > e-mail
> > > or its contents to any other person and any such actions are
> unlawful.
> > This
> > > e-mail may contain viruses. Infosys has taken every reasonable
> > precaution to
> > > minimize this risk, but is not liable for any damage you may
sustain
> > as a
> > > result of any virus in this e-mail. You should carry out your own
> > virus
> > > checks before opening the e-mail or attachment. Infosys reserves
the
> > right
> > > to monitor and review the content of all messages sent to or from
> this
> > > e-mail address. Messages sent to or from this e-mail address may
be
> > stored
> > > on the Infosys e-mail system.
> > > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > --
> > Yueyu Lin
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> --
> --
> Yueyu Lin
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 07:09:51 2006
Return-Path: <java-user-return-21285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10319 invoked from network); 12 Jun 2006 07:09:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 07:09:50 -0000
Received: (qmail 3416 invoked by uid 500); 12 Jun 2006 07:09:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2951 invoked by uid 500); 12 Jun 2006 07:09:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2940 invoked by uid 99); 12 Jun 2006 07:09:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 00:09:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 00:09:43 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 12EC633CFA6; Mon, 12 Jun 2006 03:09:21 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: *
Received: from [192.168.123.138] (cpe-024-163-089-046.nc.res.rr.com [24.163.89.46])
	by ehatchersolutions.com (Postfix) with ESMTP id 19CE833CFA3
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 03:09:16 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <200606121135734.SM01068@shivani>
References: <200606121135734.SM01068@shivani>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <95A25655-82F1-4EAF-9463-4BCEC7879E7C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Asserting that a value must match the entire content of a field
Date: Mon, 12 Jun 2006 03:09:14 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.6 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 12, 2006, at 2:04 AM, Shivani Sawhney wrote:
> Are you saying that there is no out-of-the-box way of doing this...?

Well, there are lots of techniques for all sorts of tricks with  
Lucene.  What you're basically asking for is an untokenized, indexed  
field and a TermQuery to find a document with an exact match for a  
field.  Will that work for your situation?  If not, give us some more  
details of why that doesn't work and we'll work from there.

	Erik



> Can I not check the content length somehow? As in, mention that the  
> length
> of the value (to be matched) must match the length of the field  
> value...
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Monday, June 12, 2006 11:10 AM
> To: java-user@lucene.apache.org
> Subject: Re: Asserting that a value must match the entire content  
> of a field
>
> One (ugly) way might be to insert artificial begin/end markers at  
> both index
> and search time.
>
> Otis
>
> ----- Original Message ----
> From: Shivani Sawhney <shivani@netedgecomputing.com>
> To: java-user@lucene.apache.org
> Sent: Monday, June 12, 2006 12:30:57 AM
> Subject: Asserting that a value must match the entire content of a  
> field
>
> Hi,
>
> I have a small query here.
>
>
>
> How do I do an exact match on the value of a field and also assert  
> that the
> value must match the entire content of that field?
>
> For E.g., I want that only the documents with 'Product Lifecycle'  
> as the
> value of a given field must be selected and even documents with  
> 'Product
> Lifecycle Management' as the field value must not be selected.
>
>
>
> Thanks in Advance.
>
>
>
> Shivani
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 07:54:02 2006
Return-Path: <java-user-return-21286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23243 invoked from network); 12 Jun 2006 07:54:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 07:54:02 -0000
Received: (qmail 32802 invoked by uid 500); 12 Jun 2006 07:53:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32657 invoked by uid 500); 12 Jun 2006 07:53:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32568 invoked by uid 99); 12 Jun 2006 07:53:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 00:53:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 00:53:53 -0700
Received: from shivani [220.227.153.49] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id AF056AF00B2; Mon, 12 Jun 2006 13:30:05 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: RE: Asserting that a value must match the entire content of a field
Date: Mon, 12 Jun 2006 13:28:24 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <95A25655-82F1-4EAF-9463-4BCEC7879E7C@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcaN8By2FNlHd93/SyixCQ50+s1AUgAAe8RA
Message-Id: <200606121330656.SM01068@shivani>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok...

I'll explain the problem that I am facing with an example...

I have several fields for the documents that I index; one of the fields is
'title'. Now I have provided the user with a screen to search for documents
with a particular title. Let's assume that the value inputted by the user is
'Project Lifecycle', now I want only the documents with 'Project Lifecycle'
as the 'title' field value to be selected and not the documents with title
as 'Project Lifecycle Management', etc. 
I have used exact match but then exact match for 'Project Lifecycle' in the
'title' field will also allow documents with 'Project Lifecycle Management'
as the field value to be short-listed, which I want to avoid.

How do I accomplish this? 

Shivani

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Monday, June 12, 2006 12:39 PM
To: java-user@lucene.apache.org
Subject: Re: Asserting that a value must match the entire content of a field


On Jun 12, 2006, at 2:04 AM, Shivani Sawhney wrote:
> Are you saying that there is no out-of-the-box way of doing this...?

Well, there are lots of techniques for all sorts of tricks with  
Lucene.  What you're basically asking for is an untokenized, indexed  
field and a TermQuery to find a document with an exact match for a  
field.  Will that work for your situation?  If not, give us some more  
details of why that doesn't work and we'll work from there.

	Erik



> Can I not check the content length somehow? As in, mention that the  
> length
> of the value (to be matched) must match the length of the field  
> value...
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Monday, June 12, 2006 11:10 AM
> To: java-user@lucene.apache.org
> Subject: Re: Asserting that a value must match the entire content  
> of a field
>
> One (ugly) way might be to insert artificial begin/end markers at  
> both index
> and search time.
>
> Otis
>
> ----- Original Message ----
> From: Shivani Sawhney <shivani@netedgecomputing.com>
> To: java-user@lucene.apache.org
> Sent: Monday, June 12, 2006 12:30:57 AM
> Subject: Asserting that a value must match the entire content of a  
> field
>
> Hi,
>
> I have a small query here.
>
>
>
> How do I do an exact match on the value of a field and also assert  
> that the
> value must match the entire content of that field?
>
> For E.g., I want that only the documents with 'Product Lifecycle'  
> as the
> value of a given field must be selected and even documents with  
> 'Product
> Lifecycle Management' as the field value must not be selected.
>
>
>
> Thanks in Advance.
>
>
>
> Shivani
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 08:07:06 2006
Return-Path: <java-user-return-21287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25985 invoked from network); 12 Jun 2006 08:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 08:07:06 -0000
Received: (qmail 46842 invoked by uid 500); 12 Jun 2006 08:06:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46769 invoked by uid 500); 12 Jun 2006 08:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46731 invoked by uid 99); 12 Jun 2006 08:06:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 01:06:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 01:06:55 -0700
Received: from gtsmtp01.ad.infosys.com ([192.168.180.66]) by SFOVWL03.infosys.com with InterScan Messaging Security Suite; Mon, 12 Jun 2006 00:58:02 -0700
Received: from SGIMSG01.ad.infosys.com ([172.21.240.8]) by gtsmtp01.ad.infosys.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 12 Jun 2006 01:03:40 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Asserting that a value must match the entire content of a field
Date: Mon, 12 Jun 2006 16:03:42 +0800
Message-ID: <858CC94E9BA8CF42BE18C3BCB82511B501E8A26F@sgimsg01.ad.infosys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Asserting that a value must match the entire content of a field
Thread-Index: AcaN8By2FNlHd93/SyixCQ50+s1AUgAAe8RAAADkVcA=
From: "Flik Shen" <Flik_Shen@infosys.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jun 2006 08:03:40.0050 (UTC) FILETIME=[B720F720:01C68DF6]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I think you could follow Erik's advice.
You could index you document's title as an un-tokenized field.
Then searcher will treat the title as a whole string.
If you hope when user inputs "Lifecycle", this document also be hit, you
should think any other ways to solve your problem.

> -----Original Message-----
> From: Shivani Sawhney [mailto:shivani@netedgecomputing.com]
> Sent: Monday, June 12, 2006 3:58 PM
> To: java-user@lucene.apache.org
> Subject: RE: Asserting that a value must match the entire content of a
field
>=0D
> Ok...
>=0D
> I'll explain the problem that I am facing with an example...
>=0D
> I have several fields for the documents that I index; one of the
fields is
> 'title'. Now I have provided the user with a screen to search for
documents
> with a particular title. Let's assume that the value inputted by the
user is
> 'Project Lifecycle', now I want only the documents with 'Project
Lifecycle'
> as the 'title' field value to be selected and not the documents with
title
> as 'Project Lifecycle Management', etc.
> I have used exact match but then exact match for 'Project Lifecycle'
in the
> 'title' field will also allow documents with 'Project Lifecycle
Management'
> as the field value to be short-listed, which I want to avoid.
>=0D
> How do I accomplish this?
>=0D
> Shivani
>=0D
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, June 12, 2006 12:39 PM
> To: java-user@lucene.apache.org
> Subject: Re: Asserting that a value must match the entire content of a
field
>=0D
>=0D
> On Jun 12, 2006, at 2:04 AM, Shivani Sawhney wrote:
> > Are you saying that there is no out-of-the-box way of doing this...?
>=0D
> Well, there are lots of techniques for all sorts of tricks with
> Lucene.  What you're basically asking for is an untokenized, indexed
> field and a TermQuery to find a document with an exact match for a
> field.  Will that work for your situation?  If not, give us some more
> details of why that doesn't work and we'll work from there.
>=0D
> 	Erik
>=0D
>=0D
>=0D
> > Can I not check the content length somehow? As in, mention that the
> > length
> > of the value (to be matched) must match the length of the field
> > value...
> >
> > -----Original Message-----
> > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > Sent: Monday, June 12, 2006 11:10 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Asserting that a value must match the entire content
> > of a field
> >
> > One (ugly) way might be to insert artificial begin/end markers at
> > both index
> > and search time.
> >
> > Otis
> >
> > ----- Original Message ----
> > From: Shivani Sawhney <shivani@netedgecomputing.com>
> > To: java-user@lucene.apache.org
> > Sent: Monday, June 12, 2006 12:30:57 AM
> > Subject: Asserting that a value must match the entire content of a
> > field
> >
> > Hi,
> >
> > I have a small query here.
> >
> >
> >
> > How do I do an exact match on the value of a field and also assert
> > that the
> > value must match the entire content of that field?
> >
> > For E.g., I want that only the documents with 'Product Lifecycle'
> > as the
> > value of a given field must be selected and even documents with
> > 'Product
> > Lifecycle Management' as the field value must not be selected.
> >
> >
> >
> > Thanks in Advance.
> >
> >
> >
> > Shivani
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=0D
>=0D
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=0D
>=0D
>=0D
>=0D
>=0D
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 08:53:03 2006
Return-Path: <java-user-return-21288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41368 invoked from network); 12 Jun 2006 08:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 08:53:03 -0000
Received: (qmail 98212 invoked by uid 500); 12 Jun 2006 08:52:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97623 invoked by uid 500); 12 Jun 2006 08:52:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97595 invoked by uid 99); 12 Jun 2006 08:52:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 01:52:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.15.245.75] (HELO post01.avanza.se) (217.15.245.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 01:52:44 -0700
Received: from azaexch02.aza.se (azaexch02.aza.se [172.22.30.9])
	by post01.avanza.se (Postfix) with ESMTP id 31FC9746A1
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 10:52:22 +0200 (MET DST)
Received: by azaexch02.aza.se with Internet Mail Service (5.5.2653.19)
	id <K4LDP9R9>; Mon, 12 Jun 2006 10:51:26 +0200
Message-ID: <A38622326E61704A9E271E100137755D0103DA35@azaexch02.aza.se>
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: java-user@lucene.apache.org
Subject: Best solution for the Date Range problem
Date: Mon, 12 Jun 2006 10:51:25 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C68DFD.62CCA960"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C68DFD.62CCA960
Content-Type: text/plain;
	charset="iso-8859-1"

Hi,
I would like users to be able to search on both terms and within a date
range. The solutions I have come across so far are:
 
1. Use the default QueryParser which will use RangeQuery which will expand
into a number of Boolean clauses. It is quite likely that this will run into
the TooManyClauses error.
2. Extend QueryParser and override getRangeQuery() and let it return a
FilteredQuery containing a RangeFilter.
3. Split Dates during indexing into YYYY, MM, DD and create a custom
RangeQuery that uses only the granularity needed:
 
  +date[20040830 TO 20060202]   
 
expands to 
 
(year:2004 AND month:08 AND day:30) OR
(year:2004 AND month:08 AND day:31) OR
(year:2004 AND month:09) OR 
(year:2004 AND month:10) OR 
(year:2004 AND month:11) OR 
(year:2004 AND month:12) OR
(year:2005) OR
(year:2006 AND month:01) OR
(year:2006 AND month:02 AND day:01) OR 
(year:2006 AND month:02 AND day:02)
 
Are there any other options, and which one is the best ?
 
/B

------_=_NextPart_001_01C68DFD.62CCA960--

From java-user-return-21289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 09:23:02 2006
Return-Path: <java-user-return-21289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47957 invoked from network); 12 Jun 2006 09:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 09:23:02 -0000
Received: (qmail 28532 invoked by uid 500); 12 Jun 2006 09:22:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28503 invoked by uid 500); 12 Jun 2006 09:22:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28492 invoked by uid 99); 12 Jun 2006 09:22:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 02:22:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 02:22:55 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id 58FD3A662C
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 12:22:33 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id 4B280A6639; Mon, 12 Jun 2006 12:22:33 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from nemo.level7.local (nemo.intranet [10.0.0.8])
	by mail.datagroup.ro (Postfix) with ESMTP id 844CAA662C
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 12:22:31 +0300 (EEST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Using more than one index
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Mon, 12 Jun 2006 12:22:30 +0300
Message-ID: <7688DA376E992B408BEFBF22A9F7F618387A60@nemo.intranet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using more than one index
thread-index: AcaNSjX5gNjcEbJPQXGNA9usGJxDwAAeXDJgAA4+/CA=
From: "Mile Rosu" <mile.rosu@level7.ro>
To: <java-user@lucene.apache.org>
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 12062006 #187954, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.3 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

We have an application dealing with historical books. The books have
metadata consisting of event dates, and person names among others.
The FullText, Person and Date indexes were split until we realized that
for a larger number of documents (400K) the combination of the
sequential search hits took a way too long time to complete (15 min).
The date index was built using the suggestion found at:
http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing (big
thanks for the hint)

Is there a recommended approach to combining results from different
indexes (with different fields)?

The indexes structure:
MainIndex:
	Fields:
      	@ID@ - keyword (document id)
		@FULLTEXT@ - tokenized (used for full text6 search)
		Ptitle - tokenized (used for full text publication title
search)
		Dtitle - tokenized (used for full text document title
search)
		Type - keyword - (used for document type)

PersonIndex:
		@ID@ - keyword (document id =3D=3D mainIndex.@ID@)
		Person - tokenized (full text person name search)
DateIndex:
		@ID@ - keyword (document id =3D=3D mainIdex.@ID@)
		Date - date as YYYYMMDD - keyword
		Type - type of date (document date, birth day, etc...)
		@YYYY@ - year of date
		@YYYYMM@ - year and month of date
		@DDD@ - decade
		@CC@ - century of date


Eg:
If I want to search for documents that contain: person "John", full text
"book" and date: before 06/12/2005=20
Step 1:  search in personIndex for John - retrieve all @ID@ from the hit
list
Step 2: search in DateIndex for documents that have dates before
06/12/2005 - retrieve id from the hit list=20
Step 3: search in mainIndex for "book" - retrieve all @ID@=20
Step 4: combine all the lists=20
Step 5: search mainIndex for documents with the @ID@ from the combined
id list

Each search takes less then 1 second, but retrieving @ID@ from the index
takes a lot more - the time increases by the number of hits. This is
because when retrieving a field value from a document hit, the Lucene
engine loads all the fields from the index (the entire document). So if
in one search I get 300.000 hits cont, I have to iterate through all and
retrieve the @ID@ field value - this takes a lot of time.

Regards,
Mile Rosu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 09:38:36 2006
Return-Path: <java-user-return-21290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50487 invoked from network); 12 Jun 2006 09:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 09:38:36 -0000
Received: (qmail 50013 invoked by uid 500); 12 Jun 2006 09:38:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49788 invoked by uid 500); 12 Jun 2006 09:38:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49777 invoked by uid 99); 12 Jun 2006 09:38:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 02:38:29 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DATE_IN_PAST_24_48,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.183] (HELO smtpout.mac.com) (17.250.248.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 02:38:29 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout13/MantshX 4.0) with ESMTP id k5C9c8GI008477
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 02:38:08 -0700 (PDT)
Received: from [10.0.1.2] (md403.quns.cam.ac.uk [131.111.248.102])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k5C9c6wJ011604
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 02:38:07 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v750)
To: Lucene Mailing List <java-user@lucene.apache.org>
Message-Id: <6FFDDB1C-27B6-4FC9-B2A7-CD5B65953E0F@mac.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--165851934
From: Michael Dodson <mgdodson@mac.com>
Subject: Retrieving a document from a Hits object
Date: Sat, 10 Jun 2006 12:47:19 +0100
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-1--165851934
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi,

I'm trying to retrieve a document from a Hits object and I'm getting  
the following exception and stack trace.  I have a Hits object named  
"hits" and I'm just trying to retrieve the first document using

Document doc = hits.doc(0);

I can retrieve all other kinds of information for the document using  
hits.score(0), hits.id(0), etc but it won't let me retrieve a  
document.  Any help is greatly appreciated.  Thanks.

Mike

java.io.IOException: Bad file descriptor
	at java.io.RandomAccessFile.seek(Native Method)
	at org.apache.lucene.store.FSIndexInput.readInternal 
(FSDirectory.java:444)
	at org.apache.lucene.store.BufferedIndexInput.refill 
(BufferedIndexInput.java:64)
	at org.apache.lucene.store.BufferedIndexInput.readByte 
(BufferedIndexInput.java:33)
	at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:46)
	at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:69)
	at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:62)
	at org.apache.lucene.index.SegmentReader.document(SegmentReader.java: 
284)
	at org.apache.lucene.search.IndexSearcher.doc(IndexSearcher.java:83)
	at org.apache.lucene.search.Hits.doc(Hits.java:103)
	at  
diploma.project.content.AddContentToContext.addContentToContextDocs 
(AddContentToContext.java:124)
	at diploma.project.content.AddContentToContext.combineIndices 
(AddContentToContext.java:67)
	at diploma.project.content.AddContentToContext.main 
(AddContentToContext.java:42)
--Apple-Mail-1--165851934--

From java-user-return-21291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 11:50:16 2006
Return-Path: <java-user-return-21291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96526 invoked from network); 12 Jun 2006 11:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 11:50:16 -0000
Received: (qmail 11538 invoked by uid 500); 12 Jun 2006 11:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11282 invoked by uid 500); 12 Jun 2006 11:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11271 invoked by uid 99); 12 Jun 2006 11:50:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 04:50:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 04:50:08 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id 81A01A662A
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:49:47 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id 726AEA662C; Mon, 12 Jun 2006 14:49:47 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from nemo.level7.local (nemo.intranet [10.0.0.8])
	by mail.datagroup.ro (Postfix) with ESMTP id 2F0FBA662A
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:49:45 +0300 (EEST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Best solution for the Date Range problem
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Mon, 12 Jun 2006 14:49:44 +0300
Message-ID: <7688DA376E992B408BEFBF22A9F7F618387A82@nemo.intranet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Best solution for the Date Range problem
thread-index: AcaN/aGHHcsWpHo/QIC2sYEvxPTrpgAF+Lqw
From: "Mile Rosu" <mile.rosu@level7.ro>
To: <java-user@lucene.apache.org>
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 12062006 #187954, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-103.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

You might consider using the suggestion at =
http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
We successfully used it to search for wide date ranges, on a relatively =
large number of date records.
Using this approach simplifies a lot the query you are suggesting (3). =
Gluing YYYY and MM in a field like YYYYMM also would make your query =
look nicer.

Greets,
Mile Rosu

-----Original Message-----
From: Bj=F6rn Ekengren [mailto:bjorn.ekengren@avanza.se]=20
Sent: Monday, June 12, 2006 11:51 AM
To: java-user@lucene.apache.org
Subject: Best solution for the Date Range problem

Hi,
I would like users to be able to search on both terms and within a date
range. The solutions I have come across so far are:
=20
1. Use the default QueryParser which will use RangeQuery which will =
expand
into a number of Boolean clauses. It is quite likely that this will run =
into
the TooManyClauses error.
2. Extend QueryParser and override getRangeQuery() and let it return a
FilteredQuery containing a RangeFilter.
3. Split Dates during indexing into YYYY, MM, DD and create a custom
RangeQuery that uses only the granularity needed:
=20
  +date[20040830 TO 20060202]  =20
=20
expands to=20
=20
(year:2004 AND month:08 AND day:30) OR
(year:2004 AND month:08 AND day:31) OR
(year:2004 AND month:09) OR=20
(year:2004 AND month:10) OR=20
(year:2004 AND month:11) OR=20
(year:2004 AND month:12) OR
(year:2005) OR
(year:2006 AND month:01) OR
(year:2006 AND month:02 AND day:01) OR=20
(year:2006 AND month:02 AND day:02)
=20
Are there any other options, and which one is the best ?
=20
/B

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 11:58:26 2006
Return-Path: <java-user-return-21292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 762 invoked from network); 12 Jun 2006 11:58:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 11:58:25 -0000
Received: (qmail 22910 invoked by uid 500); 12 Jun 2006 11:58:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22851 invoked by uid 500); 12 Jun 2006 11:58:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22824 invoked by uid 99); 12 Jun 2006 11:58:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 04:58:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 04:58:10 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.13.6/8.12.7/2.0.kim.desco.357) with ESMTP id k5CBvhBW023953
 for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 17:27:44 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Best solution for the Date Range problem
Date: Mon, 12 Jun 2006 17:27:43 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083103D7B7@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Best solution for the Date Range problem
Thread-Index: AcaN/aGHHcsWpHo/QIC2sYEvxPTrpgAF+LqwAABt+kA=
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can also try using a ConstantScoreRangeQuery in lieu of the plain =
RangeQuery.
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ConstantS=
coreRangeQuery.html

Regards,
Venu

-----Original Message-----
From: Mile Rosu [mailto:mile.rosu@level7.ro]=20
Sent: Monday, June 12, 2006 5:20 PM
To: java-user@lucene.apache.org
Subject: RE: Best solution for the Date Range problem


Hello,

You might consider using the suggestion at =
http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
We successfully used it to search for wide date ranges, on a relatively =
large number of date records.
Using this approach simplifies a lot the query you are suggesting (3). =
Gluing YYYY and MM in a field like YYYYMM also would make your query =
look nicer.

Greets,
Mile Rosu

-----Original Message-----
From: Bj=F6rn Ekengren [mailto:bjorn.ekengren@avanza.se]=20
Sent: Monday, June 12, 2006 11:51 AM
To: java-user@lucene.apache.org
Subject: Best solution for the Date Range problem

Hi,
I would like users to be able to search on both terms and within a date
range. The solutions I have come across so far are:
=20
1. Use the default QueryParser which will use RangeQuery which will =
expand
into a number of Boolean clauses. It is quite likely that this will run =
into
the TooManyClauses error.
2. Extend QueryParser and override getRangeQuery() and let it return a
FilteredQuery containing a RangeFilter.
3. Split Dates during indexing into YYYY, MM, DD and create a custom
RangeQuery that uses only the granularity needed:
=20
  +date[20040830 TO 20060202]  =20
=20
expands to=20
=20
(year:2004 AND month:08 AND day:30) OR
(year:2004 AND month:08 AND day:31) OR
(year:2004 AND month:09) OR=20
(year:2004 AND month:10) OR=20
(year:2004 AND month:11) OR=20
(year:2004 AND month:12) OR
(year:2005) OR
(year:2006 AND month:01) OR
(year:2006 AND month:02 AND day:01) OR=20
(year:2006 AND month:02 AND day:02)
=20
Are there any other options, and which one is the best ?
=20
/B

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 12:06:29 2006
Return-Path: <java-user-return-21293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2855 invoked from network); 12 Jun 2006 12:06:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 12:06:29 -0000
Received: (qmail 42788 invoked by uid 500); 12 Jun 2006 12:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42438 invoked by uid 500); 12 Jun 2006 12:06:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42427 invoked by uid 99); 12 Jun 2006 12:06:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:06:22 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:06:22 -0700
Received: by wr-out-0506.google.com with SMTP id 70so435109wra
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 05:06:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=GtSQrrOKSlLwsFyzQZhhnwYZmLEGw6FGK6QzqJEtI745rtAsldL7lrlmoaoQZf/FfCyqZS+jUX602KOKaeCPpAQMnmqdbdMY/XOmraPAi3dQhT1SYrWokvee0FaB0O5OIM8DTQR0RX6abRso/UFshI/7XhjU4UKnm7MKvICyp3M=
Received: by 10.64.184.8 with SMTP id h8mr3287605qbf;
        Mon, 12 Jun 2006 05:06:01 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Mon, 12 Jun 2006 05:06:01 -0700 (PDT)
Message-ID: <a36516400606120506l130fe8d6r3b60a8e1e450bdee@mail.gmail.com>
Date: Mon, 12 Jun 2006 17:36:01 +0530
From: "vipin sharma" <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Getting count on distinct values of a field.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5135_14204613.1150113961190"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5135_14204613.1150113961190
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
i am having problem in getting the count on distict values of a field. The
reason for getting this value is that, each of all documents in index
belongs to one predefined class and i want to get the number of documents
belonging to each class.

Regards..

------=_Part_5135_14204613.1150113961190--

From java-user-return-21294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 12:20:47 2006
Return-Path: <java-user-return-21294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7427 invoked from network); 12 Jun 2006 12:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 12:20:46 -0000
Received: (qmail 71013 invoked by uid 500); 12 Jun 2006 12:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70979 invoked by uid 500); 12 Jun 2006 12:20:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70967 invoked by uid 99); 12 Jun 2006 12:20:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:20:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:20:39 -0700
Received: by wr-out-0506.google.com with SMTP id 70so437455wra
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 05:20:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PiOc9dbK/s04gJUt0DF0C26Z/ltodK4OUfKW0sN93qBJ2G37Q/BrWo9CAdpnfDZbGhU13LK4NEqnVs0/QuNoU+XTRM0g1ebGFEYDeOfBhpZp+WpB8wphKEXy0lZdhCQtZ+gha+bTT0glrl1U7ryq087XOLBFbDCcv+DdV/qJ/VU=
Received: by 10.64.10.5 with SMTP id 5mr4544508qbj;
        Mon, 12 Jun 2006 05:20:15 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Mon, 12 Jun 2006 05:20:14 -0700 (PDT)
Message-ID: <a36516400606120520i61703cb6r1b088603b003927f@mail.gmail.com>
Date: Mon, 12 Jun 2006 17:50:14 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.addIndexes & optimizatio
In-Reply-To: <858CC94E9BA8CF42BE18C3BCB82511B501E8A087@sgimsg01.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5259_9482300.1150114814892"
References: <858CC94E9BA8CF42BE18C3BCB82511B501E8A087@sgimsg01.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5259_9482300.1150114814892
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I want to index 1 billion documents. what do you think which one (i mean
using fsDir or ramDir) is suitable for indexing these many documents.


On 6/12/06, Flik Shen <Flik_Shen@infosys.com> wrote:
>
>
> It means that to pick both high maxBufferedDocs and mergeFator will
> improve your indexing performance.
> But if too high, it will lead you to an OutOfMemberException.exception.
> And if you set mergeFactor too high will also lead you to problem "open
> too many files".
> So you should pick proper values according to your box physical setting.
>
> > -----Original Message-----
> > From: vipin sharma [mailto:heritrix.lucene@gmail.com]
> > Sent: Monday, June 12, 2006 12:31 PM
> > To: java-user@lucene.apache.org; Otis Gospodnetic
> > Subject: Re: IndexWriter.addIndexes & optimizatio
> >
> >  - > Just set your maxBufferedDocs to as high a number as your
> RAM/heap will
> > let you, and pick a mergeFactor that is high, but doesn't get you in
> trouble
> > with open files.
> >
> > can you please explaing this in brief??
> >
> > regards and thanks,
> >
> > On 6/9/06, Otis Gospodnetic < otis_gospodnetic@yahoo.com> wrote:
> > >
> > > When writing a unit test that comapres RAMDirectory and FSDirectory
> > > performance for Lucene in Action I had a very hard time showing that
> > > RAMDirectory really is faster. :)  Just set your maxBufferedDocs to
> as high
> > > a number as your RAM/heap will let you, and pick a mergeFactor that
> is high,
> > > but doesn't get you in trouble with open files.
> > >
> > > Otis
> > >
> > > ----- Original Message ----
> > > From: Dan Armbrust <daniel.armbrust.list@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Wednesday, June 7, 2006 4:05:49 PM
> > > Subject: Re: IndexWriter.addIndexes & optimization
> > >
> > > Benjamin Stein wrote:
> > >
> > > >
> > > > I could probably store the little RAMDirectories to disk as many
> > > > FSDirectories, and then addIndexes() of *all* the FSDirectories at
> the
> > > end
> > > > instead of every time.  That would probably be smart.
> > > >
> > > > Glad I asked myself!
> > > >
> > >
> > > That was what I was going to suggest - you may also want to
> benchmark to
> > > see if the RAMDirectory is buying you anything.  With the data that
> I am
> > > indexing on my hardware, I found it to be faster to index to a
> regular
> > > FSDirectory that it is to use the RAMDirectory.  Especially if you
> tweak
> > > the performance knobs on the indexer so it does its own caching
> before
> > > it writes to the Directory.
> > >
> > > I do batches of documents to FSDirectories - and then merge all of
> the
> > > FSDirectories into a new master index at the end - so I never have
> to
> > > optimize during the indexing process.
> > >
> > > Dan
> > >
> > >
> > > --
> > > ****************************
> > > Daniel Armbrust
> > > Biomedical Informatics
> > > Mayo Clinic Rochester
> > > daniel.armbrust(at)mayo.edu
> > > http://informatics.mayo.edu/
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely for the use of the addressee(s). If you are not the intended
> recipient, please notify the sender by e-mail and delete the original
> message. Further, you are not to copy, disclose, or distribute this e-mail
> or its contents to any other person and any such actions are unlawful. This
> e-mail may contain viruses. Infosys has taken every reasonable precaution to
> minimize this risk, but is not liable for any damage you may sustain as a
> result of any virus in this e-mail. You should carry out your own virus
> checks before opening the e-mail or attachment. Infosys reserves the right
> to monitor and review the content of all messages sent to or from this
> e-mail address. Messages sent to or from this e-mail address may be stored
> on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5259_9482300.1150114814892--

From java-user-return-21295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 12:23:25 2006
Return-Path: <java-user-return-21295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8005 invoked from network); 12 Jun 2006 12:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 12:23:25 -0000
Received: (qmail 77881 invoked by uid 500); 12 Jun 2006 12:23:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77850 invoked by uid 500); 12 Jun 2006 12:23:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77839 invoked by uid 99); 12 Jun 2006 12:23:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:23:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:23:17 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.6/8.13.6) with ESMTP id k5CCMtU6108340
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 12:22:56 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k5CCP1VR079186
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:25:01 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k5CCMsd6032213
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:22:54 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k5CCMsN2032210
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:22:54 +0200
Subject: Does more memory help Lucene?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF8C219D75.A2428776-ONC225718B.00419BE8-C225718B.00431FD6@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Mon, 12 Jun 2006 15:13:10 +0300
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 12/06/2006 15:25:00
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

I am trying to index a huge collection of documents - several hundreds of
gigabytes.
Needless to say, I'm trying to squeeze every ounce of performance from my
machine, to get this indexing done in a sensible amount of time.

Making use of the fact that my machine has two CPUs was easy: I just run
two indexing threads, creating two separate indices which can later be
merged, or searched with a MultiSearch.

What I couldn't figure out how to use, however, was the abundant memory (2
GB) that this machine has.

I tried playing with IndexWriter.setMaxBufferedDocs(), and noticed that
there is no speed gain after I set it to 1000, at which point the running
Lucene takes up just 70 MB of memory, or 140 MB for the two threads.

Is there a way for Lucene to make use of the much larger memory I have, to
speed up the indexing process? Does having a huge memory somehow improve
the speed of huge merges, for example?

Thanks,
Nadav.

--
Nadav Har'El
nyh@il.ibm.com
+972-4-829-6326


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 12:50:20 2006
Return-Path: <java-user-return-21296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16326 invoked from network); 12 Jun 2006 12:50:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 12:50:20 -0000
Received: (qmail 28389 invoked by uid 500); 12 Jun 2006 12:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27655 invoked by uid 500); 12 Jun 2006 12:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27644 invoked by uid 99); 12 Jun 2006 12:50:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:50:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.107 as permitted sender)
Received: from [205.158.62.107] (HELO ws6-4.us4.outblaze.com) (205.158.62.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 12 Jun 2006 05:50:13 -0700
Received: (qmail 22009 invoked from network); 12 Jun 2006 12:49:50 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@67.38.14.191)
  by ws6-4.us4.outblaze.com with SMTP; 12 Jun 2006 12:49:50 -0000
Message-ID: <448D62F1.7020803@curtin.com>
Date: Mon, 12 Jun 2006 08:49:53 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Does more memory help Lucene?
References: <OF8C219D75.A2428776-ONC225718B.00419BE8-C225718B.00431FD6@il.ibm.com>
In-Reply-To: <OF8C219D75.A2428776-ONC225718B.00419BE8-C225718B.00431FD6@il.ibm.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nadav Har'El wrote:

> What I couldn't figure out how to use, however, was the abundant memory (2
> GB) that this machine has.
> 
> I tried playing with IndexWriter.setMaxBufferedDocs(), and noticed that
> there is no speed gain after I set it to 1000, at which point the running
> Lucene takes up just 70 MB of memory, or 140 MB for the two threads.
> 
> Is there a way for Lucene to make use of the much larger memory I have, to
> speed up the indexing process? Does having a huge memory somehow improve
> the speed of huge merges, for example?

It may not be a Lucene limit per se, but a JVM limit instead.  What are you 
using for the JVM's heap (via -Xms and -Xmx switches)?  For example, I often 
run with java -Xmx1000m to let the heap grow to a gigabyte, if necessary.

Might I also suggest that you not try to index all of this data in a single 
invocation of a Java program.  That is, index a portion, say 10GB at a time, 
and then use AddIndexes() later to bring them together.  Set your granularity 
based on the amount of time you can stand to do work over, when the seemingly 
inevitable problems crop up.  It sure would stink to be working on the 1000th 
GB of input data and have a power supply go out, and then have to start all 
the way over from the beginning!  Other checkpointing schemes are possible, if 
you have the time and inclination to be more clever, too ...

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 12:58:59 2006
Return-Path: <java-user-return-21297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19095 invoked from network); 12 Jun 2006 12:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 12:58:58 -0000
Received: (qmail 48374 invoked by uid 500); 12 Jun 2006 12:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48340 invoked by uid 500); 12 Jun 2006 12:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48329 invoked by uid 99); 12 Jun 2006 12:58:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:58:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 05:58:50 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.6/8.13.6) with ESMTP id k5CCwSO3144462
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 12:58:29 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k5CD0Ze5115080
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 15:00:35 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k5CCwSvd021345
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:58:28 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k5CCwSCD021342
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:58:28 +0200
In-Reply-To: <448D62F1.7020803@curtin.com>
Subject: Re: Does more memory help Lucene?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFFF735DF1.C76E6DD5-ONC225718B.0045CAD9-C225718B.00464ECA@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Mon, 12 Jun 2006 15:47:56 +0300
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 12/06/2006 16:00:35
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"Michael D. Curtin" <mike@curtin.com> wrote on 12/06/2006 03:49:53 PM:
> Nadav Har'El wrote:
>
> > What I couldn't figure out how to use, however, was the abundant memory
(2
> > GB) that this machine has.
> >
> > I tried playing with IndexWriter.setMaxBufferedDocs(), and noticed that
> > there is no speed gain after I set it to 1000, at which point the
running
> > Lucene takes up just 70 MB of memory, or 140 MB for the two threads.
>
> It may not be a Lucene limit per se, but a JVM limit instead.  What are
you
> using for the JVM's heap (via -Xms and -Xmx switches)?  For example, I
often
> run with java -Xmx1000m to let the heap grow to a gigabyte, if necessary.

Sure, I used -Xmx500m, for example, but Java still only grew to 70 MB.
When I continued to increase setMaxBufferedDocs(), Java's memory use grew,
but performance did not continue to improve (it even slightly dropped, I
don't know why). So apparently, the problem isn't Java's memory limit,
it's Lucene simply not wishing to use more memory.

> Might I also suggest that you not try to index all of this data in a
single
> invocation of a Java program.  That is, index a portion, say 10GB at a
time,
> and then use AddIndexes() later to bring them together.  Set your
granularity
> based on the amount of time you can stand to do work over, when the
seemingly
> inevitable problems crop up.  It sure would stink to be working on the
1000th
> GB of input data and have a power supply go out, and then have to start
all
> the way over from the beginning!  Other checkpointing schemes are
> possible, if
> you have the time and inclination to be more clever, too ...

Good idea.

Thanks,
Nadav.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 13:37:17 2006
Return-Path: <java-user-return-21298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36018 invoked from network); 12 Jun 2006 13:37:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 13:37:16 -0000
Received: (qmail 23310 invoked by uid 500); 12 Jun 2006 13:37:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22896 invoked by uid 500); 12 Jun 2006 13:37:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22885 invoked by uid 99); 12 Jun 2006 13:37:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 06:37:10 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 12 Jun 2006 06:37:09 -0700
Received: (qmail 70878 invoked by uid 60001); 12 Jun 2006 13:36:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=iGHQUxJ1DWKA0B1YcsUuz7mIw3mlOq6rNubmCfzORSStT4pvCkgpmIJuLrZGZcdFgc6spOezCp6OUcsWjubyKZKM/6wbWdwQJok6KGovM6qcPFOdu1RdnIGgpfzHUhUH/J2GVFEsAJq3oSwFr85W0CKzmYnRerkk4hyQ1u5YC3Q=  ;
Message-ID: <20060612133645.70875.qmail@web50304.mail.yahoo.com>
Received: from [72.229.167.99] by web50304.mail.yahoo.com via HTTP; Mon, 12 Jun 2006 06:36:45 PDT
Date: Mon, 12 Jun 2006 06:36:45 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Does more memory help Lucene?
To: java-user@lucene.apache.org
In-Reply-To: <OF8C219D75.A2428776-ONC225718B.00419BE8-C225718B.00431FD6@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nadav,

Look up one of my onjava.com Lucene articles, where I talk about this.  You may also want to tell Lucene to merge segments on disk less frequently, which is what mergeFactor does.

Otis

----- Original Message ----
From: Nadav Har'El <NYH@il.ibm.com>
To: java-user@lucene.apache.org
Sent: Monday, June 12, 2006 8:13:10 AM
Subject: Does more memory help Lucene?


Hi,

I am trying to index a huge collection of documents - several hundreds of
gigabytes.
Needless to say, I'm trying to squeeze every ounce of performance from my
machine, to get this indexing done in a sensible amount of time.

Making use of the fact that my machine has two CPUs was easy: I just run
two indexing threads, creating two separate indices which can later be
merged, or searched with a MultiSearch.

What I couldn't figure out how to use, however, was the abundant memory (2
GB) that this machine has.

I tried playing with IndexWriter.setMaxBufferedDocs(), and noticed that
there is no speed gain after I set it to 1000, at which point the running
Lucene takes up just 70 MB of memory, or 140 MB for the two threads.

Is there a way for Lucene to make use of the much larger memory I have, to
speed up the indexing process? Does having a huge memory somehow improve
the speed of huge merges, for example?

Thanks,
Nadav.

--
Nadav Har'El
nyh@il.ibm.com
+972-4-829-6326


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 13:42:51 2006
Return-Path: <java-user-return-21299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37511 invoked from network); 12 Jun 2006 13:42:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 13:42:51 -0000
Received: (qmail 37150 invoked by uid 500); 12 Jun 2006 13:42:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37086 invoked by uid 500); 12 Jun 2006 13:42:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37058 invoked by uid 99); 12 Jun 2006 13:42:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 06:42:43 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 12 Jun 2006 06:42:41 -0700
Received: (qmail 69489 invoked by uid 60001); 12 Jun 2006 13:42:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=1YStZf3lC5OQolywPoUV0ONl2kjI6l0LLWf88iVay9qoGsQ+Qg7KLtBmxFkNXAczypJWtffjSN89JSSEuhkFqXfVjZ28d7wDdcuCuKQQrD5er3mxaxapvMjho79C0KYJoLL18xqUUd9pTREP4HlIrC0W8WGGTqzviyOmh9Am+3A=  ;
Message-ID: <20060612134232.69487.qmail@web50308.mail.yahoo.com>
Received: from [72.229.167.99] by web50308.mail.yahoo.com via HTTP; Mon, 12 Jun 2006 06:42:32 PDT
Date: Mon, 12 Jun 2006 06:42:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Asserting that a value must match the entire content of a field
To: java-user@lucene.apache.org
In-Reply-To: <200606121330656.SM01068@shivani>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Don't tokenize the "title" field.  Use Index.UN_TOKENIZED when constructing the "title" Field.

Otis

----- Original Message ----
From: Shivani Sawhney <shivani@netedgecomputing.com>
To: java-user@lucene.apache.org
Sent: Monday, June 12, 2006 3:58:24 AM
Subject: RE: Asserting that a value must match the entire content of a field

Ok...

I'll explain the problem that I am facing with an example...

I have several fields for the documents that I index; one of the fields is
'title'. Now I have provided the user with a screen to search for documents
with a particular title. Let's assume that the value inputted by the user is
'Project Lifecycle', now I want only the documents with 'Project Lifecycle'
as the 'title' field value to be selected and not the documents with title
as 'Project Lifecycle Management', etc. 
I have used exact match but then exact match for 'Project Lifecycle' in the
'title' field will also allow documents with 'Project Lifecycle Management'
as the field value to be short-listed, which I want to avoid.

How do I accomplish this? 

Shivani

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Monday, June 12, 2006 12:39 PM
To: java-user@lucene.apache.org
Subject: Re: Asserting that a value must match the entire content of a field


On Jun 12, 2006, at 2:04 AM, Shivani Sawhney wrote:
> Are you saying that there is no out-of-the-box way of doing this...?

Well, there are lots of techniques for all sorts of tricks with  
Lucene.  What you're basically asking for is an untokenized, indexed  
field and a TermQuery to find a document with an exact match for a  
field.  Will that work for your situation?  If not, give us some more  
details of why that doesn't work and we'll work from there.

    Erik



> Can I not check the content length somehow? As in, mention that the  
> length
> of the value (to be matched) must match the length of the field  
> value...
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Monday, June 12, 2006 11:10 AM
> To: java-user@lucene.apache.org
> Subject: Re: Asserting that a value must match the entire content  
> of a field
>
> One (ugly) way might be to insert artificial begin/end markers at  
> both index
> and search time.
>
> Otis
>
> ----- Original Message ----
> From: Shivani Sawhney <shivani@netedgecomputing.com>
> To: java-user@lucene.apache.org
> Sent: Monday, June 12, 2006 12:30:57 AM
> Subject: Asserting that a value must match the entire content of a  
> field
>
> Hi,
>
> I have a small query here.
>
>
>
> How do I do an exact match on the value of a field and also assert  
> that the
> value must match the entire content of that field?
>
> For E.g., I want that only the documents with 'Product Lifecycle'  
> as the
> value of a given field must be selected and even documents with  
> 'Product
> Lifecycle Management' as the field value must not be selected.
>
>
>
> Thanks in Advance.
>
>
>
> Shivani
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 14:30:17 2006
Return-Path: <java-user-return-21300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50952 invoked from network); 12 Jun 2006 14:30:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 14:30:17 -0000
Received: (qmail 13022 invoked by uid 500); 12 Jun 2006 14:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12981 invoked by uid 500); 12 Jun 2006 14:30:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12969 invoked by uid 99); 12 Jun 2006 14:30:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 07:30:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 07:30:09 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.6/8.13.6) with ESMTP id k5CETkn0176710
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:29:46 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k5CEVpf6080130
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 16:31:52 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k5CETixT015213
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 16:29:44 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k5CETiqu015205
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 16:29:44 +0200
In-Reply-To: <20060612133645.70875.qmail@web50304.mail.yahoo.com>
Subject: Re: Does more memory help Lucene?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF1CBFD492.7732AB08-ONC225718B.004DCC55-C225718B.004EB500@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Mon, 12 Jun 2006 17:19:41 +0300
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 12/06/2006 17:31:50
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 12/06/2006 04:36:45
PM:

> Nadav,
>
> Look up one of my onjava.com Lucene articles, where I talk about
> this.  You may also want to tell Lucene to merge segments on disk
> less frequently, which is what mergeFactor does.

Thanks. Can you please point me to the appropriate article (I found one
from March 2003, but I'm not sure if it's the one you meant).

About mergeFactor() - thanks for the hint, I'll try changing it too (I used
20 so far), and see if it helps performance.

Still, there is one thing about mergeFactor(), and the merge process, that
I don't understand: does having more memory help this process at all? Does
having a large mergeFactor() actually require more memory? The reason I'm
asking this that I'm still trying to figure out whether having a machine
with huge ram actually helps Lucene, or not.

Thanks,
Nadav.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 14:31:02 2006
Return-Path: <java-user-return-21301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51343 invoked from network); 12 Jun 2006 14:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 14:31:02 -0000
Received: (qmail 14971 invoked by uid 500); 12 Jun 2006 14:30:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14637 invoked by uid 500); 12 Jun 2006 14:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14626 invoked by uid 99); 12 Jun 2006 14:30:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 07:30:56 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dragon-fly999@hotmail.com designates 207.46.9.102 as permitted sender)
Received: from [207.46.9.102] (HELO hotmail.com) (207.46.9.102)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 07:30:53 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 12 Jun 2006 07:30:33 -0700
Message-ID: <BAY119-F22C5DA900A8F95AF24244EB98F0@phx.gbl>
Received: from 207.46.9.123 by by119fd.bay119.hotmail.msn.com with HTTP;
	Mon, 12 Jun 2006 14:30:29 GMT
X-Originating-IP: [206.35.175.10]
X-Originating-Email: [dragon-fly999@hotmail.com]
X-Sender: dragon-fly999@hotmail.com
From: "Dragon Fly" <dragon-fly999@hotmail.com>
To: java-user@lucene.apache.org
Subject: Related documents ...
Date: Mon, 12 Jun 2006 10:30:29 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 12 Jun 2006 14:30:33.0487 (UTC) FILETIME=[C36A59F0:01C68E2C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have an index that contains 3 fields: Book Id, Book Title, and Related 
Book Ids.
For example:

=====

Book Id		Book Title	Related Book Ids

A0001		Title 1		A0003, A0004
A0002		Title 2
A0003		Title 3		A0001, A0002
A0004		Title 4
....
....

=====

Note that the related book id field can be empty.  My application allows
the users to search for a book title and optionally return the related
books.  For example:

(Book Title = "Title 3") and (Return Related Books = false)
This should return the Lucene document for A0003 only and can be implemented 
easily.

(Book Title = "Title 3") and (Return Related Books = true)
This should return the Lucene documents for A0003, A0001, and A0002.  What 
is
a good way to implement this? Thank you.

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 15:27:08 2006
Return-Path: <java-user-return-21302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75191 invoked from network); 12 Jun 2006 15:27:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 15:27:08 -0000
Received: (qmail 13252 invoked by uid 500); 12 Jun 2006 15:27:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13208 invoked by uid 500); 12 Jun 2006 15:27:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13197 invoked by uid 99); 12 Jun 2006 15:27:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 08:27:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 08:26:59 -0700
Received: by py-out-1112.google.com with SMTP id i75so1628228pye
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 08:26:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SvHgN+kX5v9VhyaVofzi9nqgB2bginTyAZGgEA8wJcBqqQH2PSbwjbA5Rfzukuhg0glKKHkZBoh4gc5Vrx9jUClvH7QxfhOfBQ1R6bcRjdBlWHtSKMg65GH2NdI9pZGGjFR6IjRA4BWBkedVH+Ct9+Xgb4Ki96RkjsAU9J82AS4=
Received: by 10.35.14.1 with SMTP id r1mr1554918pyi;
        Mon, 12 Jun 2006 08:26:38 -0700 (PDT)
Received: from ?172.24.51.72? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id w63sm1457530pyw.2006.06.12.08.26.37;
        Mon, 12 Jun 2006 08:26:38 -0700 (PDT)
Message-ID: <448D87AD.1090105@gmail.com>
Date: Mon, 12 Jun 2006 10:26:37 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Does more memory help Lucene?
References: <OF1CBFD492.7732AB08-ONC225718B.004DCC55-C225718B.004EB500@il.ibm.com>
In-Reply-To: <OF1CBFD492.7732AB08-ONC225718B.004DCC55-C225718B.004EB500@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 >The reason I'm
> asking this that I'm still trying to figure out whether having a machine
> with huge ram actually helps Lucene, or not.
> 
> Thanks,
> Nadav.
> 
> 


Memory can help a little at index time, but you will mostly be Disk / IO 
bound.  How fast can you read your data in, how fast can you write it 
out.  More spinning disks will help more than extra RAM.

At least in my experience.

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 15:56:32 2006
Return-Path: <java-user-return-21303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83060 invoked from network); 12 Jun 2006 15:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 15:56:32 -0000
Received: (qmail 47903 invoked by uid 500); 12 Jun 2006 15:56:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47864 invoked by uid 500); 12 Jun 2006 15:56:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47851 invoked by uid 99); 12 Jun 2006 15:56:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 08:56:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hycel1@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 08:56:25 -0700
Received: by nz-out-0102.google.com with SMTP id z6so1340705nzd
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 08:56:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=CcqpbSTZgNytS/PVVaf4yql3uk8wADuqPNzrdMSv1mg24DK/ua583135HjekPJ4IYEw1Hkvcs1TPVLOIwvg+4+YOmULHsLu0T+DvbF28GXovzE6JK14fnCV24Z38Tt4L0kbj92/QFal8JAT229ek8iyMWm92gx6EcbdMYEaMVko=
Received: by 10.36.251.19 with SMTP id y19mr8994167nzh;
        Mon, 12 Jun 2006 08:56:04 -0700 (PDT)
Received: by 10.36.121.17 with HTTP; Mon, 12 Jun 2006 08:56:04 -0700 (PDT)
Message-ID: <65c8da90606120856t57158e6brfab395718d767464@mail.gmail.com>
Date: Mon, 12 Jun 2006 11:56:04 -0400
From: "Hycel Taylor" <hycel1@gmail.com>
To: java-user@lucene.apache.org
Subject: Handling a end user query from multiple indexes
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm new to lucene.  I'm unsure as to how to use the QueryParser to
execute a search, retrieved from an end user request.

For example, if an end user enters the query "new your"  and selects
"content" from a pull down list, I can easily translate that request
with the QueryParser as the following:

QueryParser query = new QueryParser("new york","content",new
StandardAnalizere());

But, I'm not sure what to do if the end user wants to enter a query
where he/she is search for "new york" from the "content" index  and
"weather" from the "description" index.  In a case like this, I have
two questions.

1) Is there a specific syntax the user must follow for entering such
search (i.e. new york:content and weather:description)?

2) How can the QueryParser be used if it always needs to know which
index to search from?

Thanks, in advance, for any help concerning this issue.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 16:08:05 2006
Return-Path: <java-user-return-21304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87445 invoked from network); 12 Jun 2006 16:08:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 16:08:05 -0000
Received: (qmail 76391 invoked by uid 500); 12 Jun 2006 16:07:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76366 invoked by uid 500); 12 Jun 2006 16:07:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76355 invoked by uid 99); 12 Jun 2006 16:07:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 09:07:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.28.9.26] (HELO newman.ridge.aps.org) (149.28.9.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 09:07:57 -0700
Received: from [149.28.3.20] (duval.ridge.aps.org [149.28.3.20])
	by newman.ridge.aps.org (8.13.6/8.13.1) with ESMTP id k5CG7dlo086728
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 12:07:39 -0400 (EDT)
Message-ID: <448D9148.7080502@aps.org>
Date: Mon, 12 Jun 2006 12:07:36 -0400
From: Michael Duval <duval@aps.org>
User-Agent: Thunderbird 1.5.0.4 (Macintosh/20060530)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: COMMIT_LOCK_TIMEOUT  - IndexSearcher/IndexReader
References: <20060610134402.90036.qmail@web50301.mail.yahoo.com>
In-Reply-To: <20060610134402.90036.qmail@web50301.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


You're absolutely right, in most cases there would never be a need to 
increase the COMMIT_LOCK_TIMEOUT.   In fact, if anything, you would
want to decrease it to prevent wait bottlenecks on a system with a heavy 
update load.   In short, it would be nice to have the option to change it
to suit your system if the need ever occurred.   Something to think 
about for the future ...

Thanks for the quick response.

Mike Duval

Otis Gospodnetic wrote:
> I have never run into this problem, but I'd be curious to know why your system takes more than 10 seconds to read the segments?  Super-large index on a slow disk?  As for new ctors, I suppose they wouldn't hurt, if there really is a need for them.  But 10 seconds is a long time...
>
> Otis
>
> ----- Original Message ----
> From: Michael Duval <duval@aps.org>
> To: Java-user@lucene.apache.org
> Sent: Friday, June 9, 2006 12:04:10 PM
> Subject: COMMIT_LOCK_TIMEOUT  - IndexSearcher/IndexReader
>
>
> Hi All,
>
> Has anyone else out there come across the shortcomings of the new 
> COMMIT_LOCK_TIMEOUT in regards to
> searching on an actively updated Index?
>
> It used to be a settable system property and therefor "semi" dynamic 
> across a system with multiple readers/searchers and
> one writer.   I am aware now that it has access methods for IndexWriter 
> instances, however, IndexSearcher/Readers that
> indirectly need to access the commit lock (to read it's segments) use 
> the final static COMMIT_LOCK_TIMEOUT in
> IndexWriter.   There is no way of waiting longer or shorter than the 
> default (10000) milliseconds.
>
> Perhaps there should be another constructor in IndexSearcher/Reader that 
> takes commit lock settings allowing for dynamic
> blocking based on a particular implementation's needs.
>
> Any thoughts on this?
>
> Thanks,
>
> Michael R. Duval
>
> Senior Programmer/Analyst
> American Physical Society
> (631) 591-4127
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 16:15:49 2006
Return-Path: <java-user-return-21305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89126 invoked from network); 12 Jun 2006 16:15:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 16:15:49 -0000
Received: (qmail 85890 invoked by uid 500); 12 Jun 2006 16:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85863 invoked by uid 500); 12 Jun 2006 16:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85852 invoked by uid 99); 12 Jun 2006 16:15:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 09:15:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.199 as permitted sender)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 12 Jun 2006 09:15:41 -0700
Received: (qmail 2516 invoked from network); 12 Jun 2006 16:03:52 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@67.38.14.191)
  by ws6-3.us4.outblaze.com with SMTP; 12 Jun 2006 16:03:52 -0000
Message-ID: <448D9064.8000007@curtin.com>
Date: Mon, 12 Jun 2006 12:03:48 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Does more memory help Lucene?
References: <OF1CBFD492.7732AB08-ONC225718B.004DCC55-C225718B.004EB500@il.ibm.com>
In-Reply-To: <OF1CBFD492.7732AB08-ONC225718B.004DCC55-C225718B.004EB500@il.ibm.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nadav Har'El wrote:

> Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 12/06/2006 04:36:45
> PM:
> 
> 
>>Nadav,
>>
>>Look up one of my onjava.com Lucene articles, where I talk about
>>this.  You may also want to tell Lucene to merge segments on disk
>>less frequently, which is what mergeFactor does.
> 
> 
> Thanks. Can you please point me to the appropriate article (I found one
> from March 2003, but I'm not sure if it's the one you meant).
> 
> About mergeFactor() - thanks for the hint, I'll try changing it too (I used
> 20 so far), and see if it helps performance.
> 
> Still, there is one thing about mergeFactor(), and the merge process, that
> I don't understand: does having more memory help this process at all? Does
> having a large mergeFactor() actually require more memory? The reason I'm
> asking this that I'm still trying to figure out whether having a machine
> with huge ram actually helps Lucene, or not.

I'm using 1.4.3, so I don't know if things are the same in 2.0.  Anyhow, I 
found a significant performance benefit from changing minMergeDocs and 
mergeFactor from their defaults of 10 and 10 to 1,000 and 70, respectively. 
The improvement seems to come from a reduction in the number of merges as the 
index is created.  Each merge involves reading and writing a bunch of data 
already indexed, sometimes everything indexed so far, so it's easy to see how 
reducing the number of merges reduces the overall indexing time.

I can't remember why, but I also little benefit to increasing minMergeDocs 
beyond 1000.  A lot of time was being spent in the first merge, which takes a 
bunch of one-document "segments" in a RAMDirectory and merges them into the 
first-level segments on disk.  I hacked the code to make this first merge (and 
ONLY the first merge) operate on minMergeDocs * mergeFactor documents instead, 
which greatly increased the RAM consumption but reduced the indexing time.  In 
detail, what I started with was:
   a.  read minMergeDocs of docs, creating one-doc segments in RAM
   b.  read those one-doc RAM segments and merge them
   c.  write the merged results to a disk segment
   ...
   i.  read mergeFactor first-level disk segments and merge them
   j.  write second-level segments to disk
   ...
   p.  normal disk-based merging thereafter, as necessary

And what I ended up with was:
   A.  read minMergeDocs * mergeFactor docs, and remember them in RAM
   B.  write a segment from all the remembered RAM docs (a modified merge)
   ...
   F.  normal disk-based merging thereafter, as necessary

In essence, I eliminated that first level merge, one that involved lots and 
lots of teeny-weeny I/O operations that were very inefficient.

In my case, steps A & B worked on 70,000 documents instead of 1,000. 
Remembering all those docs required a lot of RAM (almost 2GB), but it almost 
tripled indexing performance.  Later, I had to knock the 70 down to 35 (maybe 
because my docs got a lot bigger but I don't remember now), but you get the 
idea.  I couldn't use a mergeFactor of 70,000 because that's way more file 
descriptors than I could have without recompiling the kernel (I seem to 
remember my limit being 1,024, and each segment took 14 file descriptors).

Hope it helps.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 16:18:54 2006
Return-Path: <java-user-return-21306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90860 invoked from network); 12 Jun 2006 16:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 16:18:54 -0000
Received: (qmail 93161 invoked by uid 500); 12 Jun 2006 16:18:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92760 invoked by uid 500); 12 Jun 2006 16:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92749 invoked by uid 99); 12 Jun 2006 16:18:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 09:18:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 09:18:47 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id k5CGIJUJ065655
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 18:18:19 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200606121618.k5CGIJUJ065655@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: How can I tell Lucene to also use analyzer for Keyword fields
Date: Mon, 12 Jun 2006 18:18:17 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaOOmRh7IzmIvbDS6uQUcz8kInYWgAAKlCw
In-Reply-To: <448D9148.7080502@aps.org>
X-Scanned-By: MIMEDefang 2.56 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
It seems anaylzers are never get called for UnTokenized fields(Seems no luck
either using PerFieldAnalyzer).

What should I do, If I would like to use analyzer for Untokenized fields.
Lets say for Keyword or Unstored fields.

I basically would like to use lucene Sort functionality on UnTokenized
fields which needs some analyzation at indexing time.

Thanks in advance,
Regards,
Jelda


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 16:44:18 2006
Return-Path: <java-user-return-21307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98418 invoked from network); 12 Jun 2006 16:44:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 16:44:17 -0000
Received: (qmail 27193 invoked by uid 500); 12 Jun 2006 16:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27157 invoked by uid 500); 12 Jun 2006 16:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27146 invoked by uid 99); 12 Jun 2006 16:44:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 09:44:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 09:44:10 -0700
Received: by py-out-1112.google.com with SMTP id i75so1651378pye
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 09:43:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K/5UEw2eRgyqTvCDsBPi60xYnjNmYo/8b3sGFN6q8JIqBRrImOuYtVaVzrsLOXpl3KpyfwcEDu9rsnJO+WNAPttQMLpkC7zvivFjq2QJrYfAEitvMTbSkX4nSt5uuPGOJ9QhzG3CbQi2cuIorqz6EKHuV+II7GEcWwRxAihxROw=
Received: by 10.35.40.10 with SMTP id s10mr1080021pyj;
        Mon, 12 Jun 2006 09:43:49 -0700 (PDT)
Received: by 10.35.58.19 with HTTP; Mon, 12 Jun 2006 09:43:49 -0700 (PDT)
Message-ID: <e994873a0606120943v2d5dc626pd84b3263884ca3fb@mail.gmail.com>
Date: Mon, 12 Jun 2006 12:43:49 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Aggregating category hits
In-Reply-To: <c68e39170606101334u6be7f7fm2fe0f47bd57c4070@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8477_20118424.1150130629315"
References: <0E1423F2-DD3C-424D-84D1-7ED0BB795F44@rectangular.com>
	 <20060529224417.26106.qmail@web60814.mail.yahoo.com>
	 <e994873a0606091110w683d4899s9987bed01d06582e@mail.gmail.com>
	 <c68e39170606101334u6be7f7fm2fe0f47bd57c4070@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8477_20118424.1150130629315
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm seeing query throughput of approx. 290 qps with OpenBitSet vs. 270 with
BitSet. I had to reduce the max. HashDocSet size to 2K - 3K (from 10K-20K)
to get optimal tradeoff.

no. docs in index: 730,000
average no. results returned: 40
average response time: 50 msec (15-20 for counting facets)
no. facets: 100 on every query

I'm not using the Solr server as we have already developed an
infrastructure.

Peter


On 6/10/06, Yonik Seeley <yseeley@gmail.com> wrote:
>
> On 6/9/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > However, my throughput testing shows that the Solr method is at least
> 50%
> > faster than mine. I'm seeing a big win with the use of the HashDocSet
> for
> > lower hit counts. On my 64-bit platform, a MAX_SIZE value of 10K-20K
> seems
> > to provide optimal performance.
>
> Interesting... how many documents are in your collection?
> It would prob be nice to make the HashDocSet cutt-off dynamic rather than
> fixed.
> Are you using Solr, or just some of it's code?
>
> >  I'm looking forward to trying this with
> > OpenBitSet.
>
> I checked in the OpenBitSet changes today.  I imagine this will lower
> the optimal max HashDocSet size for performance a little.  You might
> not see much performance improvement if most of the intersections
> involved a HashDocSet... the OpenBitSet improvements only kick in with
> bitset<->bitset intersection counts.
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8477_20118424.1150130629315--

From java-user-return-21308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 17:20:22 2006
Return-Path: <java-user-return-21308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11104 invoked from network); 12 Jun 2006 17:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 17:20:21 -0000
Received: (qmail 78034 invoked by uid 500); 12 Jun 2006 17:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78004 invoked by uid 500); 12 Jun 2006 17:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77993 invoked by uid 99); 12 Jun 2006 17:20:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:20:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:20:13 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])by mailgw3a.lmco.com (LM-6) with ESMTP id k5CHJqOW006505for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 13:19:52 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0J0R00901C54IA@lmco.com> for java-user@lucene.apache.org; Mon, 12 Jun 2006 13:19:52 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0J0R0061DC5488@lmco.com> for java-user@lucene.apache.org; Mon, 12 Jun 2006 13:19:52 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 12 Jun 2006 13:19:52 -0400
Date: Mon, 12 Jun 2006 13:19:51 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: How can I tell Lucene to also use analyzer for Keyword fields
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3B64@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: How can I tell Lucene to also use analyzer for Keyword fields
Thread-Index: AcaOOmRh7IzmIvbDS6uQUcz8kInYWgAAKlCwAAJAGnA=
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 12 Jun 2006 17:19:52.0270 (UTC) FILETIME=[6A859EE0:01C68E44]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What you are asking is not possible. The whole purpose of the analyzer
is to tokenize the fields, so if you want them to be tokenized don't use
the Keyword fields. If you want to use both tokenized and untokenized
just create another filed that will be tokenized.

Aviran

http://www.aviransplace.com 

-----Original Message-----
From: Ramana Jelda [mailto:ramana.jelda@ciao-group.com] 
Sent: Monday, June 12, 2006 12:18 PM
To: java-user@lucene.apache.org
Subject: How can I tell Lucene to also use analyzer for Keyword fields

Hi,
It seems anaylzers are never get called for UnTokenized fields(Seems no
luck either using PerFieldAnalyzer).

What should I do, If I would like to use analyzer for Untokenized
fields.
Lets say for Keyword or Unstored fields.

I basically would like to use lucene Sort functionality on UnTokenized
fields which needs some analyzation at indexing time.

Thanks in advance,
Regards,
Jelda


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 17:25:56 2006
Return-Path: <java-user-return-21309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13447 invoked from network); 12 Jun 2006 17:25:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 17:25:56 -0000
Received: (qmail 89407 invoked by uid 500); 12 Jun 2006 17:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89381 invoked by uid 500); 12 Jun 2006 17:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89370 invoked by uid 99); 12 Jun 2006 17:25:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:25:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:25:49 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])by mailgw3a.lmco.com (LM-6) with ESMTP id k5CHPTWO009491for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 13:25:29 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0J0R00C01CEGU1@lmco.com> for java-user@lucene.apache.org; Mon, 12 Jun 2006 13:25:28 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0J0R0056SCEGGM@lmco.com> for java-user@lucene.apache.org; Mon, 12 Jun 2006 13:25:28 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 12 Jun 2006 13:25:28 -0400
Date: Mon, 12 Jun 2006 13:25:28 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Related documents ...
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3B65@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Related documents ...
Thread-Index: AcaOLwZX+AnIw18URR+zqsOYNmSucgAFcRnA
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 12 Jun 2006 17:25:28.0605 (UTC) FILETIME=[32FE44D0:01C68E45]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You'll need to run two queries. One for the user's query. Then if you
need to get the related books, collect all the related books from the
results, build a second query that will query the BookId field for all
the related books (create an OR query for all the related bookIDs).

Then merge the results from the two queries (manually)

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Dragon Fly [mailto:dragon-fly999@hotmail.com] 
Sent: Monday, June 12, 2006 10:30 AM
To: java-user@lucene.apache.org
Subject: Related documents ...

Hi,

I have an index that contains 3 fields: Book Id, Book Title, and Related
Book Ids.
For example:

=====

Book Id		Book Title	Related Book Ids

A0001		Title 1		A0003, A0004
A0002		Title 2
A0003		Title 3		A0001, A0002
A0004		Title 4
....
....

=====

Note that the related book id field can be empty.  My application allows
the users to search for a book title and optionally return the related
books.  For example:

(Book Title = "Title 3") and (Return Related Books = false) This should
return the Lucene document for A0003 only and can be implemented easily.

(Book Title = "Title 3") and (Return Related Books = true) This should
return the Lucene documents for A0003, A0001, and A0002.  What is a good
way to implement this? Thank you.

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's
FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 17:50:39 2006
Return-Path: <java-user-return-21310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19490 invoked from network); 12 Jun 2006 17:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 17:50:39 -0000
Received: (qmail 30994 invoked by uid 500); 12 Jun 2006 17:50:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30788 invoked by uid 500); 12 Jun 2006 17:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30777 invoked by uid 99); 12 Jun 2006 17:50:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:50:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:50:31 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1546838F@mailer.syr.edu>; Mon, 12 Jun 2006 13:50:10 -0400
Message-ID: <448DA951.1090400@syr.edu>
Date: Mon, 12 Jun 2006 13:50:09 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5 (Windows/20060113)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How can I tell Lucene to also use analyzer for Keyword fields
References: <92A278501EF50444AD3EE1FFB51219550BCE3B64@emss10m03.us.lmco.com>
In-Reply-To: <92A278501EF50444AD3EE1FFB51219550BCE3B64@emss10m03.us.lmco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mordo, Aviran (EXP N-NANNATEK) wrote:
> What you are asking is not possible. The whole purpose of the analyzer
> is to tokenize the fields, so if you want them to be tokenized don't use
> the Keyword fields.

Um, KeywordAnalyzer? 
<http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/KeywordAnalyzer.html>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 17:52:58 2006
Return-Path: <java-user-return-21311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20012 invoked from network); 12 Jun 2006 17:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 17:52:58 -0000
Received: (qmail 39150 invoked by uid 500); 12 Jun 2006 17:52:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38675 invoked by uid 500); 12 Jun 2006 17:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38663 invoked by uid 99); 12 Jun 2006 17:52:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:52:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 10:52:50 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id BD757C2006B
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 12:52:31 -0500 (CDT)
Message-ID: <448DA9DD.7050300@dragonflymc.com>
Date: Mon, 12 Jun 2006 12:52:29 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Breaking up an index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there a way to break up a single large index into many smaller indexes?

Dennis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 18:03:58 2006
Return-Path: <java-user-return-21312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24832 invoked from network); 12 Jun 2006 18:03:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 18:03:58 -0000
Received: (qmail 56004 invoked by uid 500); 12 Jun 2006 18:03:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55976 invoked by uid 500); 12 Jun 2006 18:03:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55964 invoked by uid 99); 12 Jun 2006 18:03:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 11:03:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 11:03:51 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15468589@mailer.syr.edu>; Mon, 12 Jun 2006 14:03:30 -0400
Message-ID: <448DAC72.9050801@syr.edu>
Date: Mon, 12 Jun 2006 14:03:30 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Handling a end user query from multiple indexes
References: <65c8da90606120856t57158e6brfab395718d767464@mail.gmail.com>
In-Reply-To: <65c8da90606120856t57158e6brfab395718d767464@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See below

Hycel Taylor wrote:
> Hi,
>
> I'm new to lucene.  I'm unsure as to how to use the QueryParser to
> execute a search, retrieved from an end user request.
>
> For example, if an end user enters the query "new your"  and selects
> "content" from a pull down list, I can easily translate that request
> with the QueryParser as the following:
>
> QueryParser query = new QueryParser("new york","content",new
> StandardAnalizere());
>
> But, I'm not sure what to do if the end user wants to enter a query
> where he/she is search for "new york" from the "content" index  and
> "weather" from the "description" index.  In a case like this, I have
> two questions.
>
> 1) Is there a specific syntax the user must follow for entering such
> search (i.e. new york:content and weather:description)?
>
See http://lucene.apache.org/java/docs/queryparsersyntax.html for the 
Query Parser syntax

> 2) How can the QueryParser be used if it always needs to know which
> index to search from?
>
(Query Parser doesn't care about the index, but I assume you mean how to 
generate queries when you don't know what fields you have available on 
each index)
This is generally up to your application to manage.  I think most people 
end up storing some metadata about each index that contains what fields 
are available, etc.  Either that or they use conventions to know that 
every index has the same fields available.  I believe there is also a 
method or two on IndexReader that lets you recover what fields are in 
the index.

> Thanks, in advance, for any help concerning this issue.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 18:18:14 2006
Return-Path: <java-user-return-21313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32568 invoked from network); 12 Jun 2006 18:18:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 18:18:14 -0000
Received: (qmail 82143 invoked by uid 500); 12 Jun 2006 18:18:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82119 invoked by uid 500); 12 Jun 2006 18:18:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82108 invoked by uid 99); 12 Jun 2006 18:18:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 11:18:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 11:18:06 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])by mailgw3a.lmco.com (LM-6) with ESMTP id k5CIHjNG009089for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 14:17:45 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0J0R00101ETLQX@lmco.com> for java-user@lucene.apache.org; Mon, 12 Jun 2006 14:17:45 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0J0R005JZETLQS@lmco.com> for java-user@lucene.apache.org; Mon, 12 Jun 2006 14:17:45 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 12 Jun 2006 14:17:45 -0400
Date: Mon, 12 Jun 2006 14:17:45 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: How can I tell Lucene to also use analyzer for Keyword fields
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3B67@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: How can I tell Lucene to also use analyzer for Keyword fields
Thread-Index: AcaOSLhY7pgqS8nlQ/u+ur85BdUG+QAA5dEA
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 12 Jun 2006 18:17:45.0228 (UTC) FILETIME=[8090F4C0:01C68E4C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The KeywordAnalyzer does not do anything, it just returns the whole
phrase as a single term, just as if you didn't use an analyzer at all.

Aviran
http://www.aviransplace.com 

-----Original Message-----
From: Steven Rowe [mailto:sarowe@syr.edu] 
Sent: Monday, June 12, 2006 1:50 PM
To: java-user@lucene.apache.org
Subject: Re: How can I tell Lucene to also use analyzer for Keyword
fields

Mordo, Aviran (EXP N-NANNATEK) wrote:
> What you are asking is not possible. The whole purpose of the analyzer

> is to tokenize the fields, so if you want them to be tokenized don't 
> use the Keyword fields.

Um, KeywordAnalyzer? 
<http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/Keywo
rdAnalyzer.html>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 19:53:40 2006
Return-Path: <java-user-return-21314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72621 invoked from network); 12 Jun 2006 19:53:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 19:53:40 -0000
Received: (qmail 18922 invoked by uid 500); 12 Jun 2006 19:53:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18569 invoked by uid 500); 12 Jun 2006 19:53:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18558 invoked by uid 99); 12 Jun 2006 19:53:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 12:53:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 12:53:32 -0700
Received: by py-out-1112.google.com with SMTP id i75so1700043pye
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 12:53:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jKzRWIAcsgj2B/vzXdVJmD8RR+wgngSHhMudiPWp+Xwh9cJ7qRco4owwJVkystcUJe7hWvkRJ9RuqZWCi/cjRF6PbskdAboWYqZJUKL8OVytjYGI6d/CbTEPaO5TDr3udbKwinAMwK471y7x2t+hIRddVTMFx3JjBZwj+m4obg0=
Received: by 10.35.8.1 with SMTP id l1mr4719182pyi;
        Mon, 12 Jun 2006 12:53:11 -0700 (PDT)
Received: by 10.35.58.19 with HTTP; Mon, 12 Jun 2006 12:53:11 -0700 (PDT)
Message-ID: <e994873a0606121253h66dd5965x38c904044f22aa35@mail.gmail.com>
Date: Mon, 12 Jun 2006 15:53:11 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does more memory help Lucene?
In-Reply-To: <448D9064.8000007@curtin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10382_25342865.1150141991299"
References: <OF1CBFD492.7732AB08-ONC225718B.004DCC55-C225718B.004EB500@il.ibm.com>
	 <448D9064.8000007@curtin.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10382_25342865.1150141991299
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See my note about overlapping indexing documents with merging:

http://www.gossamer-threads.com/lists/lucene/java-user/34188?search_string=%2Bkeegan%20%2Baddindexes;#34188

Peter

On 6/12/06, Michael D. Curtin <mike@curtin.com> wrote:
>
> Nadav Har'El wrote:
>
> > Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 12/06/2006
> 04:36:45
> > PM:
> >
> >
> >>Nadav,
> >>
> >>Look up one of my onjava.com Lucene articles, where I talk about
> >>this.  You may also want to tell Lucene to merge segments on disk
> >>less frequently, which is what mergeFactor does.
> >
> >
> > Thanks. Can you please point me to the appropriate article (I found one
> > from March 2003, but I'm not sure if it's the one you meant).
> >
> > About mergeFactor() - thanks for the hint, I'll try changing it too (I
> used
> > 20 so far), and see if it helps performance.
> >
> > Still, there is one thing about mergeFactor(), and the merge process,
> that
> > I don't understand: does having more memory help this process at all?
> Does
> > having a large mergeFactor() actually require more memory? The reason
> I'm
> > asking this that I'm still trying to figure out whether having a machine
> > with huge ram actually helps Lucene, or not.
>
> I'm using 1.4.3, so I don't know if things are the same in 2.0.  Anyhow, I
> found a significant performance benefit from changing minMergeDocs and
> mergeFactor from their defaults of 10 and 10 to 1,000 and 70,
> respectively.
> The improvement seems to come from a reduction in the number of merges as
> the
> index is created.  Each merge involves reading and writing a bunch of data
> already indexed, sometimes everything indexed so far, so it's easy to see
> how
> reducing the number of merges reduces the overall indexing time.
>
> I can't remember why, but I also little benefit to increasing minMergeDocs
> beyond 1000.  A lot of time was being spent in the first merge, which
> takes a
> bunch of one-document "segments" in a RAMDirectory and merges them into
> the
> first-level segments on disk.  I hacked the code to make this first merge
> (and
> ONLY the first merge) operate on minMergeDocs * mergeFactor documents
> instead,
> which greatly increased the RAM consumption but reduced the indexing
> time.  In
> detail, what I started with was:
>    a.  read minMergeDocs of docs, creating one-doc segments in RAM
>    b.  read those one-doc RAM segments and merge them
>    c.  write the merged results to a disk segment
>    ...
>    i.  read mergeFactor first-level disk segments and merge them
>    j.  write second-level segments to disk
>    ...
>    p.  normal disk-based merging thereafter, as necessary
>
> And what I ended up with was:
>    A.  read minMergeDocs * mergeFactor docs, and remember them in RAM
>    B.  write a segment from all the remembered RAM docs (a modified merge)
>    ...
>    F.  normal disk-based merging thereafter, as necessary
>
> In essence, I eliminated that first level merge, one that involved lots
> and
> lots of teeny-weeny I/O operations that were very inefficient.
>
> In my case, steps A & B worked on 70,000 documents instead of 1,000.
> Remembering all those docs required a lot of RAM (almost 2GB), but it
> almost
> tripled indexing performance.  Later, I had to knock the 70 down to 35
> (maybe
> because my docs got a lot bigger but I don't remember now), but you get
> the
> idea.  I couldn't use a mergeFactor of 70,000 because that's way more file
> descriptors than I could have without recompiling the kernel (I seem to
> remember my limit being 1,024, and each segment took 14 file descriptors).
>
> Hope it helps.
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10382_25342865.1150141991299--

From java-user-return-21315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 19:55:37 2006
Return-Path: <java-user-return-21315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74103 invoked from network); 12 Jun 2006 19:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 19:55:37 -0000
Received: (qmail 21549 invoked by uid 500); 12 Jun 2006 19:55:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21526 invoked by uid 500); 12 Jun 2006 19:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21515 invoked by uid 99); 12 Jun 2006 19:55:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 12:55:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hycel1@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 12:55:30 -0700
Received: by nz-out-0102.google.com with SMTP id i1so1235526nzh
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 12:55:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HhQDvho8279xahlnweZ99LaGO745jN1fRk+dOmppQypUca+ni0wWxahDhin/Y7MrrpntKrqqscenfVA/2Y+g2cMDSeH92Y5cGk8xSmzogro+LqV5wbZKz76BdVgEj/xLx0LlIJX6/J/C41F50XuuAQp/42szJJviOO4NVYrVCIk=
Received: by 10.37.22.49 with SMTP id z49mr9341181nzi;
        Mon, 12 Jun 2006 12:55:09 -0700 (PDT)
Received: by 10.36.121.17 with HTTP; Mon, 12 Jun 2006 12:55:09 -0700 (PDT)
Message-ID: <65c8da90606121255y326884f8o358b4d0e9c73636a@mail.gmail.com>
Date: Mon, 12 Jun 2006 15:55:09 -0400
From: "Hycel Taylor" <hycel1@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Handling a end user query from multiple indexes
In-Reply-To: <448DAC72.9050801@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <65c8da90606120856t57158e6brfab395718d767464@mail.gmail.com>
	 <448DAC72.9050801@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the help:-)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 20:36:00 2006
Return-Path: <java-user-return-21316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87649 invoked from network); 12 Jun 2006 20:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 20:35:59 -0000
Received: (qmail 76144 invoked by uid 500); 12 Jun 2006 20:35:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75695 invoked by uid 500); 12 Jun 2006 20:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75684 invoked by uid 99); 12 Jun 2006 20:35:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 13:35:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 13:35:53 -0700
Received: by py-out-1112.google.com with SMTP id i75so1709242pye
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 13:35:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qE3gC0s3uTPBVP6jaANI5FcTfLjwTo6q4O+0VtAB09ejXX1HuUpcKuzs/X8Ho3gu09ce9ijxilDO8XsQg/qQ6B2EDw08UzrFmSnm8xaWuiH4VNQreNI+YdCoKmBiWCH67CVpoO9OLEP7FupJje+4slU3jWZ/0/AsNI56f0r4H7I=
Received: by 10.35.126.7 with SMTP id d7mr1423946pyn;
        Mon, 12 Jun 2006 13:35:32 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 12 Jun 2006 13:35:32 -0700 (PDT)
Message-ID: <c68e39170606121335i1797c8ffqdbc854dee8bf3573@mail.gmail.com>
Date: Mon, 12 Jun 2006 16:35:32 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieving a document from a Hits object
In-Reply-To: <6FFDDB1C-27B6-4FC9-B2A7-CD5B65953E0F@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6FFDDB1C-27B6-4FC9-B2A7-CD5B65953E0F@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Michael,

The Searcher you used to get the Hits needs to remain open while
accessing the hits.  Your stack trace could have been caused by the
Searcher being closed first.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


On 6/10/06, Michael Dodson <mgdodson@mac.com> wrote:
> Hi,
>
> I'm trying to retrieve a document from a Hits object and I'm getting
> the following exception and stack trace.  I have a Hits object named
> "hits" and I'm just trying to retrieve the first document using
>
> Document doc = hits.doc(0);
>
> I can retrieve all other kinds of information for the document using
> hits.score(0), hits.id(0), etc but it won't let me retrieve a
> document.  Any help is greatly appreciated.  Thanks.
>
> Mike
>
> java.io.IOException: Bad file descriptor
>         at java.io.RandomAccessFile.seek(Native Method)
>         at org.apache.lucene.store.FSIndexInput.readInternal
> (FSDirectory.java:444)
>         at org.apache.lucene.store.BufferedIndexInput.refill
> (BufferedIndexInput.java:64)
>         at org.apache.lucene.store.BufferedIndexInput.readByte
> (BufferedIndexInput.java:33)
>         at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:46)
>         at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:69)
>         at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:62)
>         at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:
> 284)
>         at org.apache.lucene.search.IndexSearcher.doc(IndexSearcher.java:83)
>         at org.apache.lucene.search.Hits.doc(Hits.java:103)
>         at
> diploma.project.content.AddContentToContext.addContentToContextDocs
> (AddContentToContext.java:124)
>         at diploma.project.content.AddContentToContext.combineIndices
> (AddContentToContext.java:67)
>         at diploma.project.content.AddContentToContext.main
> (AddContentToContext.java:42)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 22:05:16 2006
Return-Path: <java-user-return-21317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21421 invoked from network); 12 Jun 2006 22:05:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 22:05:15 -0000
Received: (qmail 30504 invoked by uid 500); 12 Jun 2006 22:05:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30467 invoked by uid 500); 12 Jun 2006 22:05:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30454 invoked by uid 99); 12 Jun 2006 22:05:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 15:05:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 15:05:08 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 12 Jun 2006 18:04:47 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 12 Jun 2006 18:04:46 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: question with spellchecker
Date: Mon, 12 Jun 2006 18:09:20 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81126CF22F@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: question with spellchecker
Thread-Index: AcaKE7dzyHeJCVmWTrexNT06NhKrTgEWRU2Q
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jun 2006 22:04:46.0105 (UTC) FILETIME=[373DD890:01C68E6C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'll experiment with both.

Thanks...

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk]=20
Sent: Wednesday, June 07, 2006 2:16 AM
To: java-user@lucene.apache.org
Subject: Re: question with spellchecker

I think the problem in your particular example is the
suggestion software has no consideration of context.

I've been playing with context-sensitive suggestions
recently which take a bunch of validated (ie existing)
words (eg "tape") and use this to help shortlist
alternatives for an unknown or partially typed word
(eg ducted)

This has potential applications in spell checking and
as-you-type query completion.

The approach is quite simple but effective - You use
your choice of code to produce a list of candidate
terms  (eg FuzzyTermEnum or some form of Soundex or
PrefixQuery) THEN take the large list of candidate
terms produced and compare their usage in relation to
the context of  words you already know eg "tape".
In practice this means that TermDocs for the candidate
term are used to construct a doc bitset which is
compared with a doc bitset produced from all other
terms which make up the context. The level of
intersection between these bitsets can be used to help
sensibly rank the "duct" and "ducked" candidates in
relation to "tape". Do they co-occur often?

[psuedo code]
BitSet contextDocs=3D matchKnownTerms();
float numContextMatches=3DcontextDocs.cardinality();
for all candidate terms for unknown term
{
  BitSet candMatches =3DcreateBitset(candTerm)
  float numCandMatches=3DcandMatches.cardinality();
  float
numSharedMatches=3DcandMatches.and(contextDocs).cardinality()
  float contextRelatedness =3DnumSharedMatches/
   (
     (numCandMatches+numContextMatches)
      -numSharedMatches
   )
  //collect candidate Terms that have high combo of=20
  //contextRelatedness and unknown term similarity (eg
low edit distance)=20
}

There are quite a few optimisations I've added to this
basic pseudo code in my implementation. When I get
some time I'll package this code up and contribute it
but for now this psuedo code may give some pointers
which help to provide a solution.


Cheers,
Mark


Send instant messages to your online friends
http://uk.messenger.yahoo.com=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 22:55:13 2006
Return-Path: <java-user-return-21318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37680 invoked from network); 12 Jun 2006 22:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 22:55:13 -0000
Received: (qmail 9270 invoked by uid 500); 12 Jun 2006 22:55:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9203 invoked by uid 500); 12 Jun 2006 22:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9152 invoked by uid 99); 12 Jun 2006 22:55:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 15:55:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 15:55:04 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 12 Jun 2006 18:54:42 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 12 Jun 2006 18:54:42 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C68E73.3143F0BC"
Subject: updating index - web application
Date: Mon, 12 Jun 2006 18:59:16 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81126CF2FC@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: updating index - web application
Thread-Index: AcaOc9TVCSqJNsg5SP6uMjoA5TfZTg==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jun 2006 22:54:42.0765 (UTC) FILETIME=[3163DFD0:01C68E73]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C68E73.3143F0BC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I've been playing around with Lucene for a while now.  I'm pretty
comfortable with creating an index and searching against it.  Up until
now, I've been using the LuceneIndexAccessor package contributed by Maik
Schreiber and that's working well for me. =20

=20

Now the next obstacle is to figure out what the best implementation is
for updating the index.  Should the updating of the index be handled via
a web service, a schedule windows task, etc (the web app will be running
on WebSphere Application Server on Windows 2003)?  I have a timer
service that was written for another application that sends out emails
at regular scheduled intervals.  Should I apply the same methodology to
updating the index (I actually tried that... did as I wanted - but
synchronizing the LuceneIndexAccessor proved to be a challenge).  Any
input would be appreciated.

=20

Thanks


------_=_NextPart_001_01C68E73.3143F0BC--

From java-user-return-21319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 12 23:50:29 2006
Return-Path: <java-user-return-21319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53158 invoked from network); 12 Jun 2006 23:50:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2006 23:50:29 -0000
Received: (qmail 86626 invoked by uid 500); 12 Jun 2006 23:50:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86590 invoked by uid 500); 12 Jun 2006 23:50:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86579 invoked by uid 99); 12 Jun 2006 23:50:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 16:50:23 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 16:50:22 -0700
Received: by nz-out-0102.google.com with SMTP id 13so1274628nzp
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 16:50:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T6HqkvDG2G2TlpH2eB+HYwUyR2j0er7Ho0kopL0RgdlXMpE/ohdajfxUM0xkUqYDvLyh95lZBpRW4PmP5NjtW/3aH75VqkyY2crqjb0k5B3Bvaz0kh53Cmq4nUHP79v8oPzO8C5r5NSKZeSJ9GPqj2RB4CIFjLmsdwH/BtU3lLQ=
Received: by 10.37.12.54 with SMTP id p54mr9681905nzi;
        Mon, 12 Jun 2006 16:50:01 -0700 (PDT)
Received: by 10.37.20.32 with HTTP; Mon, 12 Jun 2006 16:50:01 -0700 (PDT)
Message-ID: <359a92830606121650s50b810a3v83ce03f68aecacbe@mail.gmail.com>
Date: Mon, 12 Jun 2006 19:50:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.addIndexes & optimizatio
In-Reply-To: <a36516400606120520i61703cb6r1b088603b003927f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5327_19615755.1150156201889"
References: <858CC94E9BA8CF42BE18C3BCB82511B501E8A087@sgimsg01.ad.infosys.com>
	 <a36516400606120520i61703cb6r1b088603b003927f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5327_19615755.1150156201889
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

a billion? Wow! First, I really, really, really doubt you can use a RAMdir
to index a billion documents. I'd be interested in the parameters of your
problem if you could. I'd be especially interested in providing a home for
any of your old hardware, since I bet it beats mine all to hell <G>.

Second, you'll just have to play with the MergeFactor and MaxBufferedDocs to
see how high you can set them on your particular machine (using an FSDir).
Then reduce those factors by a pretty major amount (I'd recommend maybe 1/4
the size that runs out memory on your test data set). The last thing you
want to do is cruise through 900,000,000 documents and find the particular
set of data that causes an exception...

Actually, I'd guess you're better off indexing the documents in smaller
groups and combining the indexes afterwards. That way, you place an upper
limit on how much work is lost if you have any problems, as well as
parallelize the index creation process. Assuming you have the hardware.

Best
Erick

------=_Part_5327_19615755.1150156201889--

From java-user-return-21320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 00:54:22 2006
Return-Path: <java-user-return-21320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66093 invoked from network); 13 Jun 2006 00:54:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 00:54:22 -0000
Received: (qmail 51928 invoked by uid 500); 13 Jun 2006 00:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51893 invoked by uid 500); 13 Jun 2006 00:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51882 invoked by uid 99); 13 Jun 2006 00:54:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 17:54:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 17:54:15 -0700
Received: by nz-out-0102.google.com with SMTP id 18so1283406nzp
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 17:53:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KEvVAipa3yXqt/g5KFHqKzqpEGAxcyEt0XZZK4YE/6OsAIJH2tUQ6x+CFt0FWsCC5fsko4kFVusEq/8Wca5ZmaAE2CVu2wL5lfi54UJY0VfZPKX9CzsAfRM9GMNsG2W0ezFIQMCcBJMjoY1ky9Bz30w4pBLe2lH56xDVZSFDBwI=
Received: by 10.36.103.6 with SMTP id a6mr9781077nzc;
        Mon, 12 Jun 2006 17:53:54 -0700 (PDT)
Received: by 10.37.22.59 with HTTP; Mon, 12 Jun 2006 17:53:54 -0700 (PDT)
Message-ID: <6e3ae6310606121753t572f5623rd104671cfeabc05b@mail.gmail.com>
Date: Mon, 12 Jun 2006 17:53:54 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating index - web application
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81126CF2FC@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0D6A3C278F4DC346B98DF4D2F1397E81126CF2FC@UREXCHVS3.ur.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My approach, which I think is common, is to use Quartz sheduler.

Chris
-----------------------------
Instant Lucene Search on Any Databases/Applications
http://www.dbsight.net

On 6/12/06, Van Nguyen <vnguyen@ur.com> wrote:
> I've been playing around with Lucene for a while now.  I'm pretty
> comfortable with creating an index and searching against it.  Up until
> now, I've been using the LuceneIndexAccessor package contributed by Maik
> Schreiber and that's working well for me.
>
>
>
> Now the next obstacle is to figure out what the best implementation is
> for updating the index.  Should the updating of the index be handled via
> a web service, a schedule windows task, etc (the web app will be running
> on WebSphere Application Server on Windows 2003)?  I have a timer
> service that was written for another application that sends out emails
> at regular scheduled intervals.  Should I apply the same methodology to
> updating the index (I actually tried that... did as I wanted - but
> synchronizing the LuceneIndexAccessor proved to be a challenge).  Any
> input would be appreciated.
>
>
>
> Thanks
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 03:36:02 2006
Return-Path: <java-user-return-21321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13628 invoked from network); 13 Jun 2006 03:36:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 03:36:02 -0000
Received: (qmail 13861 invoked by uid 500); 13 Jun 2006 03:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13353 invoked by uid 500); 13 Jun 2006 03:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13342 invoked by uid 99); 13 Jun 2006 03:35:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 20:35:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 20:35:53 -0700
Received: by wr-out-0506.google.com with SMTP id 50so205976wri
        for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 20:35:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AKa2LHQdf7vtZGieGmusH/gNHE9PvZcektwBCZ42YvnS5NlWlTu5PjFWKhxfmUoSElNWAcTPQPkOPjBqg89itIwRQgpsn/Ny8bVkUmN30t5HpefWlfwU3j93KQ14GR3k+ZWHurVBCdIzBMoHeJb5LD7Ma9QQLyfzb0DGuzpUrVc=
Received: by 10.64.21.11 with SMTP id 11mr4949685qbu;
        Mon, 12 Jun 2006 20:35:32 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Mon, 12 Jun 2006 20:35:32 -0700 (PDT)
Message-ID: <a36516400606122035n19b8b72dm6ba2955f6ad2db@mail.gmail.com>
Date: Tue, 13 Jun 2006 09:05:32 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.addIndexes & optimizatio
In-Reply-To: <359a92830606121650s50b810a3v83ce03f68aecacbe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16527_18785453.1150169732777"
References: <858CC94E9BA8CF42BE18C3BCB82511B501E8A087@sgimsg01.ad.infosys.com>
	 <a36516400606120520i61703cb6r1b088603b003927f@mail.gmail.com>
	 <359a92830606121650s50b810a3v83ce03f68aecacbe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_16527_18785453.1150169732777
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Aprrox 50 Million i have processed upto now. I kept maxMergeFactor and
maxBufferedDoc's value 1000. This value i got after several round of test
runs.
Indexing rate for each document in 50 M, is 1 Document per 4.85 ms.

I am only using fsdirectory. Is there any other way to reduce this time??

with regards,


On 6/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> a billion? Wow! First, I really, really, really doubt you can use a RAMdir
> to index a billion documents. I'd be interested in the parameters of your
> problem if you could. I'd be especially interested in providing a home for
> any of your old hardware, since I bet it beats mine all to hell <G>.
>
> Second, you'll just have to play with the MergeFactor and MaxBufferedDocs
> to
> see how high you can set them on your particular machine (using an FSDir).
> Then reduce those factors by a pretty major amount (I'd recommend maybe
> 1/4
> the size that runs out memory on your test data set). The last thing you
> want to do is cruise through 900,000,000 documents and find the particular
> set of data that causes an exception...
>
> Actually, I'd guess you're better off indexing the documents in smaller
> groups and combining the indexes afterwards. That way, you place an upper
> limit on how much work is lost if you have any problems, as well as
> parallelize the index creation process. Assuming you have the hardware.
>
> Best
> Erick
>
>

------=_Part_16527_18785453.1150169732777--

From java-user-return-21322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 06:55:36 2006
Return-Path: <java-user-return-21322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50902 invoked from network); 13 Jun 2006 06:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 06:55:35 -0000
Received: (qmail 489 invoked by uid 500); 13 Jun 2006 06:55:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 458 invoked by uid 500); 13 Jun 2006 06:55:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 447 invoked by uid 99); 13 Jun 2006 06:55:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 23:55:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 23:55:26 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DD4CD5B776; Mon, 12 Jun 2006 23:54:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D5A397F403
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 23:54:51 -0700 (PDT)
Date: Mon, 12 Jun 2006 23:54:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Using more than one index
In-Reply-To: <7688DA376E992B408BEFBF22A9F7F618387A60@nemo.intranet>
Message-ID: <Pine.LNX.4.58.0606122348410.13650@hal.rescomp.berkeley.edu>
References: <7688DA376E992B408BEFBF22A9F7F618387A60@nemo.intranet>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


A couple of suggestions...

1) don't use multiple indexes.  create one index, with one document per
"thing" you want to return (in this case it sounds like books) and index
all of the relevent data about each thing in that doc.  If multiple people
worked on a book, add all of their names to the same field.  addd all of
the dates to the book doc -- if you need to distibguish the differnet
types of dates, make a seaprete field for each type.

If you *must* cross refrence...

2) make sure you aren't useing the Hits API to iterate over all the
results when gathering IDs -- use a lower level api (like a HitCollector)

3) use the FieldCache to get the IDs instead of he stored Document fields.

4) don't extract full ID lists from all of then indexes and then search
on one of the indexes again with the ID list ... use the ID lists
generated from the supporting indexes (people and dates) to build a Filter
that you can use when searching the main index.



: Date: Mon, 12 Jun 2006 12:22:30 +0300
: From: Mile Rosu <mile.rosu@level7.ro>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Using more than one index
:
: Hello,
:
: We have an application dealing with historical books. The books have
: metadata consisting of event dates, and person names among others.
: The FullText, Person and Date indexes were split until we realized that
: for a larger number of documents (400K) the combination of the
: sequential search hits took a way too long time to complete (15 min).
: The date index was built using the suggestion found at:
: http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing (big
: thanks for the hint)
:
: Is there a recommended approach to combining results from different
: indexes (with different fields)?
:
: The indexes structure:
: MainIndex:
: 	Fields:
:       	@ID@ - keyword (document id)
: 		@FULLTEXT@ - tokenized (used for full text6 search)
: 		Ptitle - tokenized (used for full text publication title
: search)
: 		Dtitle - tokenized (used for full text document title
: search)
: 		Type - keyword - (used for document type)
:
: PersonIndex:
: 		@ID@ - keyword (document id == mainIndex.@ID@)
: 		Person - tokenized (full text person name search)
: DateIndex:
: 		@ID@ - keyword (document id == mainIdex.@ID@)
: 		Date - date as YYYYMMDD - keyword
: 		Type - type of date (document date, birth day, etc...)
: 		@YYYY@ - year of date
: 		@YYYYMM@ - year and month of date
: 		@DDD@ - decade
: 		@CC@ - century of date
:
:
: Eg:
: If I want to search for documents that contain: person "John", full text
: "book" and date: before 06/12/2005
: Step 1:  search in personIndex for John - retrieve all @ID@ from the hit
: list
: Step 2: search in DateIndex for documents that have dates before
: 06/12/2005 - retrieve id from the hit list
: Step 3: search in mainIndex for "book" - retrieve all @ID@
: Step 4: combine all the lists
: Step 5: search mainIndex for documents with the @ID@ from the combined
: id list
:
: Each search takes less then 1 second, but retrieving @ID@ from the index
: takes a lot more - the time increases by the number of hits. This is
: because when retrieving a field value from a document hit, the Lucene
: engine loads all the fields from the index (the entire document). So if
: in one search I get 300.000 hits cont, I have to iterate through all and
: retrieve the @ID@ field value - this takes a lot of time.
:
: Regards,
: Mile Rosu
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 06:57:14 2006
Return-Path: <java-user-return-21323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52182 invoked from network); 13 Jun 2006 06:57:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 06:57:14 -0000
Received: (qmail 6494 invoked by uid 500); 13 Jun 2006 06:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6466 invoked by uid 500); 13 Jun 2006 06:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6455 invoked by uid 99); 13 Jun 2006 06:57:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 23:57:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jun 2006 23:57:06 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 577EA5B776; Mon, 12 Jun 2006 23:56:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 52B3E7F403
	for <java-user@lucene.apache.org>; Mon, 12 Jun 2006 23:56:46 -0700 (PDT)
Date: Mon, 12 Jun 2006 23:56:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Getting count on distinct values of a field.
In-Reply-To: <a36516400606120506l130fe8d6r3b60a8e1e450bdee@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606122356010.13650@hal.rescomp.berkeley.edu>
References: <a36516400606120506l130fe8d6r3b60a8e1e450bdee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Look at the TermEnum class... iterate over the terms in your field, and
docFreq is the number of docs with that term.


: Date: Mon, 12 Jun 2006 17:36:01 +0530
: From: vipin sharma <heritrix.lucene@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Getting count on distinct values of a field.
:
: Hi,
: i am having problem in getting the count on distict values of a field. The
: reason for getting this value is that, each of all documents in index
: belongs to one predefined class and i want to get the number of documents
: belonging to each class.
:
: Regards..
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 07:13:12 2006
Return-Path: <java-user-return-21324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56834 invoked from network); 13 Jun 2006 07:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 07:13:11 -0000
Received: (qmail 24414 invoked by uid 500); 13 Jun 2006 07:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23297 invoked by uid 500); 13 Jun 2006 07:13:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23286 invoked by uid 99); 13 Jun 2006 07:13:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 00:13:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 00:13:04 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2507B5B776; Tue, 13 Jun 2006 00:12:44 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 169E77F403
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 00:12:44 -0700 (PDT)
Date: Tue, 13 Jun 2006 00:12:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How can I tell Lucene to also use analyzer for Keyword fields
In-Reply-To: <200606121618.k5CGIJUJ065655@pigeon.ciao.com>
Message-ID: <Pine.LNX.4.58.0606130003110.13650@hal.rescomp.berkeley.edu>
References: <200606121618.k5CGIJUJ065655@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: It seems anaylzers are never get called for UnTokenized fields(Seems no luck
: either using PerFieldAnalyzer).

The label "tokenized" is somewhat missleading .. it assumes that your
analyzer will do some tokenizing (which it doesn't have to do in the case
of the KeywordAnalyzer).  The best thing to do is equate "tokenize ==
analyzed" in your mind when reading any of the Field methods/constants.

Which makes this question kind of meaningless..

: What should I do, If I would like to use analyzer for Untokenized fields.
: Lets say for Keyword or Unstored fields.
:
: I basically would like to use lucene Sort functionality on UnTokenized
: fields which needs some analyzation at indexing time.

Index your fields as "TOKENIZED" but choise an analyzer that doesn't do
any tokenizing (something that uses the KeywordTokenizer)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 08:33:46 2006
Return-Path: <java-user-return-21325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81497 invoked from network); 13 Jun 2006 08:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 08:33:46 -0000
Received: (qmail 97759 invoked by uid 500); 13 Jun 2006 08:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97707 invoked by uid 500); 13 Jun 2006 08:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97696 invoked by uid 99); 13 Jun 2006 08:33:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 01:33:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 01:33:38 -0700
Received: by wr-out-0506.google.com with SMTP id i22so1262170wra
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 01:33:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I5Px6/zS6B2UNMAQf6lF/d9qpfni7GpdAJ71K3aYcaAi44jWauk2AaYWFWRfxGZbvWpuiHDhWiXvylR766k8xZaetUPFHBTteRJjnlEptKHXK1rwLUF4I9kSGjM6bJfOxoKAYr+hP/u6j6ZFxxWNcJPzVZI5/giV0oWN8rPQzUA=
Received: by 10.65.180.4 with SMTP id h4mr5270249qbp;
        Tue, 13 Jun 2006 01:33:17 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Tue, 13 Jun 2006 01:33:17 -0700 (PDT)
Message-ID: <a36516400606130133tb3d9acal70795cff6710d40a@mail.gmail.com>
Date: Tue, 13 Jun 2006 14:03:17 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting count on distinct values of a field.
In-Reply-To: <Pine.LNX.4.58.0606122356010.13650@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18661_30283665.1150187597535"
References: <a36516400606120506l130fe8d6r3b60a8e1e450bdee@mail.gmail.com>
	 <Pine.LNX.4.58.0606122356010.13650@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18661_30283665.1150187597535
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

But what if that word is present in other fields also.
does "docFreq " only look into that particular field ??

On 6/13/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> Look at the TermEnum class... iterate over the terms in your field, and
> docFreq is the number of docs with that term.
>
>
> : Date: Mon, 12 Jun 2006 17:36:01 +0530
> : From: vipin sharma <heritrix.lucene@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Getting count on distinct values of a field.
> :
> : Hi,
> : i am having problem in getting the count on distict values of a field.
> The
> : reason for getting this value is that, each of all documents in index
> : belongs to one predefined class and i want to get the number of
> documents
> : belonging to each class.
> :
> : Regards..
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18661_30283665.1150187597535--

From java-user-return-21326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 09:12:43 2006
Return-Path: <java-user-return-21326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96132 invoked from network); 13 Jun 2006 09:12:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 09:12:43 -0000
Received: (qmail 56293 invoked by uid 500); 13 Jun 2006 09:12:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56265 invoked by uid 500); 13 Jun 2006 09:12:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56254 invoked by uid 99); 13 Jun 2006 09:12:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 02:12:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 02:12:35 -0700
Received: from ewiex01.ewi.utwente.nl (ewiex02.ewi.utwente.nl [130.89.10.121])
	by denhaag.ewi.utwente.nl (8.13.6/8.13.6) with ESMTP id k5D9CC4Q005180
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 11:12:12 +0200 (MEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Index (speed) optimization
Date: Tue, 13 Jun 2006 11:12:12 +0200
Message-ID: <5DD2165A95E801438DAA9C1E0957EB5E013711EA@ewiex02.dynamic.ewi.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index (speed) optimization
Thread-Index: AcaOyXT4Sq3vifKeTx2siAUwv21eBg==
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.778 () ALL_TRUSTED,AWL,BAYES_00
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Tue, 13 Jun 2006 11:12:13 +0200 (MEST)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I just looked at the log of my indexing program and saw that after =
adding 4.5 million documents (16 Gb of text) to a newly created index, =
it took 7 hours (!) to carry out the optimization =
(indexWriter.optimize()). I am running the indexing program on a =
(3.2Ghz, 1Gb RAM) desktop computer with a 7200 RPM harddisk.

Obviously it depends on the hardware you're using, but is this a =
"normal" time?

Searching the archive I found a number of tips to increase indexing =
speed, perhaps someone knows more?

* indexWriter.setMaxBufferedDocs(1000); // default 10
* indexWriter.setMergeFactor(70); // default 10
* Write to multiple RAMDirectories and use 'addIndexes' to finally merge =
them to a FSDirectory
* ...

Regards,
Dolf

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 10:11:44 2006
Return-Path: <java-user-return-21327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10154 invoked from network); 13 Jun 2006 10:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 10:11:44 -0000
Received: (qmail 20541 invoked by uid 500); 13 Jun 2006 10:11:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20509 invoked by uid 500); 13 Jun 2006 10:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20497 invoked by uid 99); 13 Jun 2006 10:11:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 03:11:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 03:11:36 -0700
Received: from gtconn01.ad.infosys.com ([192.168.180.63]) by SFOVWL03.infosys.com with InterScan Messaging Security Suite; Tue, 13 Jun 2006 03:02:41 -0700
Received: from SGIMSG01.ad.infosys.com ([172.21.240.8]) by gtconn01.ad.infosys.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 13 Jun 2006 03:08:18 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C68ED1.14B4842F"
Subject: about PrefixQuery Matching
Date: Tue, 13 Jun 2006 18:07:01 +0800
Message-ID: <858CC94E9BA8CF42BE18C3BCB82511B501E8ACC0@sgimsg01.ad.infosys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: about PrefixQuery Matching
Thread-Index: AcaO0RzfTo0Te3gPQA6Mmes8sPgnWQ==
From: "Flik Shen" <Flik_Shen@infosys.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 Jun 2006 10:08:18.0821 (UTC) FILETIME=[4B3C9B50:01C68ED1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C68ED1.14B4842F
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


When I study PrefixQuery, I found a problem.

For example search string: test(*)

This could match testX, testX...X, but not to match test only.

=0D

Is it real problem?



**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
------_=_NextPart_001_01C68ED1.14B4842F--

From java-user-return-21328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 11:29:08 2006
Return-Path: <java-user-return-21328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34712 invoked from network); 13 Jun 2006 11:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 11:29:08 -0000
Received: (qmail 31242 invoked by uid 500); 13 Jun 2006 11:29:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31208 invoked by uid 500); 13 Jun 2006 11:29:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31197 invoked by uid 99); 13 Jun 2006 11:29:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 04:29:01 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Jun 2006 04:28:59 -0700
Received: (qmail 88316 invoked by uid 60001); 13 Jun 2006 11:28:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=wxO4n92kGkrbbBh/iVGCjiYBxpMuxOxXp9RFhlWBUCKna6czIx4kB0Zcvv0ud3icy1rsZv+Wwbe6tHvMzP6/ZLuMoRwegnRy4mP323VEvB/0FUbtXMLb9FG/BzX7TfAOdrg2YvlYeCHgB9IE0oo0U8L9iVPrFLzoHGnl2M1HRHc=  ;
Message-ID: <20060613112837.88314.qmail@web26002.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Tue, 13 Jun 2006 11:28:37 GMT
Date: Tue, 13 Jun 2006 11:28:37 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: question with spellchecker
To: java-user@lucene.apache.org
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81126CF22F@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

For those with the luxury of a large store of historical queries it's interesting to note Google's approach to this.

Not some fancy spell checker - just mining searcher behaviour patterns.
Google's Bosworth describes this approach approx 13 minutes into this podcast:

http://www.itconversations.com/shows/detail571.html



----- Original Message ----
From: Van Nguyen <vnguyen@ur.com>
To: java-user@lucene.apache.org
Sent: Monday, 12 June, 2006 11:09:20 PM
Subject: RE: question with spellchecker

I'll experiment with both.

Thanks...

-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk] 
Sent: Wednesday, June 07, 2006 2:16 AM
To: java-user@lucene.apache.org
Subject: Re: question with spellchecker

I think the problem in your particular example is the
suggestion software has no consideration of context.

I've been playing with context-sensitive suggestions
recently which take a bunch of validated (ie existing)
words (eg "tape") and use this to help shortlist
alternatives for an unknown or partially typed word
(eg ducted)

This has potential applications in spell checking and
as-you-type query completion.

The approach is quite simple but effective - You use
your choice of code to produce a list of candidate
terms  (eg FuzzyTermEnum or some form of Soundex or
PrefixQuery) THEN take the large list of candidate
terms produced and compare their usage in relation to
the context of  words you already know eg "tape".
In practice this means that TermDocs for the candidate
term are used to construct a doc bitset which is
compared with a doc bitset produced from all other
terms which make up the context. The level of
intersection between these bitsets can be used to help
sensibly rank the "duct" and "ducked" candidates in
relation to "tape". Do they co-occur often?

[psuedo code]
BitSet contextDocs= matchKnownTerms();
float numContextMatches=contextDocs.cardinality();
for all candidate terms for unknown term
{
  BitSet candMatches =createBitset(candTerm)
  float numCandMatches=candMatches.cardinality();
  float
numSharedMatches=candMatches.and(contextDocs).cardinality()
  float contextRelatedness =numSharedMatches/
   (
     (numCandMatches+numContextMatches)
      -numSharedMatches
   )
  //collect candidate Terms that have high combo of 
  //contextRelatedness and unknown term similarity (eg
low edit distance) 
}

There are quite a few optimisations I've added to this
basic pseudo code in my implementation. When I get
some time I'll package this code up and contribute it
but for now this psuedo code may give some pointers
which help to provide a solution.


Cheers,
Mark


Send instant messages to your online friends
http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 12:24:45 2006
Return-Path: <java-user-return-21329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54506 invoked from network); 13 Jun 2006 12:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 12:24:45 -0000
Received: (qmail 7878 invoked by uid 500); 13 Jun 2006 12:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7355 invoked by uid 500); 13 Jun 2006 12:24:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7344 invoked by uid 99); 13 Jun 2006 12:24:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 05:24:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 05:24:36 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id k5DCO7nb070783
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 14:24:07 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200606131224.k5DCO7nb070783@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: How can I tell Lucene to also use analyzer for Keyword fields
Date: Tue, 13 Jun 2006 14:24:06 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaOuNjbGMEfi8TZQrqi6J/tuwTBugACEjVA
In-Reply-To: <Pine.LNX.4.58.0606130003110.13650@hal.rescomp.berkeley.edu>
X-Scanned-By: MIMEDefang 2.56 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for your  replies.


> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
> Sent: Tuesday, June 13, 2006 9:13 AM
> To: java-user@lucene.apache.org
> Subject: Re: How can I tell Lucene to also use analyzer for 
> Keyword fields
> 
> 
> : It seems anaylzers are never get called for UnTokenized 
> fields(Seems no luck
> : either using PerFieldAnalyzer).
> 
> The label "tokenized" is somewhat missleading .. it assumes 
> that your analyzer will do some tokenizing (which it doesn't 
> have to do in the case of the KeywordAnalyzer).  The best 
> thing to do is equate "tokenize == analyzed" in your mind 
> when reading any of the Field methods/constants.
> 
> Which makes this question kind of meaningless..
> 
> : What should I do, If I would like to use analyzer for 
> Untokenized fields.
> : Lets say for Keyword or Unstored fields.
> :
> : I basically would like to use lucene Sort functionality on 
> UnTokenized
> : fields which needs some analyzation at indexing time.
> 
> Index your fields as "TOKENIZED" but choise an analyzer that 
> doesn't do any tokenizing (something that uses the KeywordTokenizer)
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 13:14:29 2006
Return-Path: <java-user-return-21330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75241 invoked from network); 13 Jun 2006 13:14:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 13:14:28 -0000
Received: (qmail 94615 invoked by uid 500); 13 Jun 2006 13:14:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94012 invoked by uid 500); 13 Jun 2006 13:14:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93999 invoked by uid 99); 13 Jun 2006 13:14:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 06:14:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 06:14:20 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])by mailgw3a.lmco.com (LM-6) with ESMTP id k5DDDwws004050for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 09:13:59 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0J0S00F01VFA8H@lmco.com> for java-user@lucene.apache.org; Tue, 13 Jun 2006 09:13:58 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0J0S00726VFAGF@lmco.com> for java-user@lucene.apache.org; Tue, 13 Jun 2006 09:13:58 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Tue,
 13 Jun 2006 09:13:58 -0400
Date: Tue, 13 Jun 2006 09:13:58 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: about PrefixQuery Matching
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3B6D@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: about PrefixQuery Matching
Thread-Index: AcaO0RzfTo0Te3gPQA6Mmes8sPgnWQAGdusg
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 13 Jun 2006 13:13:58.0799 (UTC) FILETIME=[3B2E59F0:01C68EEB]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The query should be test*

The brackets will be eliminated by the analyzer

Aviran

http://www.aviransplace.com 

-----Original Message-----
From: Flik Shen [mailto:Flik_Shen@infosys.com] 
Sent: Tuesday, June 13, 2006 6:07 AM
To: java-user@lucene.apache.org
Subject: about PrefixQuery Matching


When I study PrefixQuery, I found a problem.

For example search string: test(*)

This could match testX, testX...X, but not to match test only.



Is it real problem?



**************** CAUTION - Disclaimer ***************** This e-mail
contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the
use of the addressee(s). If you are not the intended recipient, please
notify the sender by e-mail and delete the original message. Further,
you are not to copy, disclose, or distribute this e-mail or its contents
to any other person and any such actions are unlawful. This e-mail may
contain viruses. Infosys has taken every reasonable precaution to
minimize this risk, but is not liable for any damage you may sustain as
a result of any virus in this e-mail. You should carry out your own
virus checks before opening the e-mail or attachment. Infosys reserves
the right to monitor and review the content of all messages sent to or
from this e-mail address. Messages sent to or from this e-mail address
may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 13:17:38 2006
Return-Path: <java-user-return-21331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76841 invoked from network); 13 Jun 2006 13:17:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 13:17:37 -0000
Received: (qmail 98871 invoked by uid 500); 13 Jun 2006 13:17:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98624 invoked by uid 500); 13 Jun 2006 13:17:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98613 invoked by uid 99); 13 Jun 2006 13:17:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 06:17:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 06:17:30 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id F1993A662A
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 16:17:05 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id D6E8DA6639; Tue, 13 Jun 2006 16:17:05 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from nemo.level7.local (nemo.intranet [10.0.0.8])
	by mail.datagroup.ro (Postfix) with ESMTP id 86C3CA662A
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 16:16:59 +0300 (EEST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using more than one index
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 13 Jun 2006 16:16:57 +0300
Message-ID: <7688DA376E992B408BEFBF22A9F7F618387B3D@nemo.intranet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using more than one index
thread-index: AcaOtmUYIOQ59NBpTC6mKJLc1POePwANAe0g
From: "Mile Rosu" <mile.rosu@level7.ro>
To: <java-user@lucene.apache.org>
Cc: "Mircea Pop" <Mircea.Pop@level7.ro>
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 13062006 #188213, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.0 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Hoss,

Thanks for your quick answer. One of the problems left with the date is
this:

A document (in our case an xml that has many metadata) can have more
than one date, each date with 2 attributes:

Eg:

<date type=3D"document" art=3D"geburt">00-00-1886</date>=20

In the date index I have for every <date> in the input xml a document
with fields: type (document |other), date, art (birthday | deportation |
death...). For example if I merge all the dates that correspond to a
document then the new type field will contain all the values. So if I
want to search for a document that has type:document art:birthday and
date between a and b then I won't get the correct results.

Regards,
Mile Rosu

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Tuesday, June 13, 2006 9:55 AM
To: java-user@lucene.apache.org
Subject: Re: Using more than one index


A couple of suggestions...

1) don't use multiple indexes.  create one index, with one document per
"thing" you want to return (in this case it sounds like books) and index
all of the relevent data about each thing in that doc.  If multiple
people
worked on a book, add all of their names to the same field.  addd all of
the dates to the book doc -- if you need to distibguish the differnet
types of dates, make a seaprete field for each type.

If you *must* cross refrence...

2) make sure you aren't useing the Hits API to iterate over all the
results when gathering IDs -- use a lower level api (like a
HitCollector)

3) use the FieldCache to get the IDs instead of he stored Document
fields.

4) don't extract full ID lists from all of then indexes and then search
on one of the indexes again with the ID list ... use the ID lists
generated from the supporting indexes (people and dates) to build a
Filter
that you can use when searching the main index.



: Date: Mon, 12 Jun 2006 12:22:30 +0300
: From: Mile Rosu <mile.rosu@level7.ro>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Using more than one index
:
: Hello,
:
: We have an application dealing with historical books. The books have
: metadata consisting of event dates, and person names among others.
: The FullText, Person and Date indexes were split until we realized
that
: for a larger number of documents (400K) the combination of the
: sequential search hits took a way too long time to complete (15 min).
: The date index was built using the suggestion found at:
: http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
(big
: thanks for the hint)
:
: Is there a recommended approach to combining results from different
: indexes (with different fields)?
:
: The indexes structure:
: MainIndex:
: 	Fields:
:       	@ID@ - keyword (document id)
: 		@FULLTEXT@ - tokenized (used for full text6 search)
: 		Ptitle - tokenized (used for full text publication title
: search)
: 		Dtitle - tokenized (used for full text document title
: search)
: 		Type - keyword - (used for document type)
:
: PersonIndex:
: 		@ID@ - keyword (document id =3D=3D mainIndex.@ID@)
: 		Person - tokenized (full text person name search)
: DateIndex:
: 		@ID@ - keyword (document id =3D=3D mainIdex.@ID@)
: 		Date - date as YYYYMMDD - keyword
: 		Type - type of date (document date, birth day, etc...)
: 		@YYYY@ - year of date
: 		@YYYYMM@ - year and month of date
: 		@DDD@ - decade
: 		@CC@ - century of date
:
:
: Eg:
: If I want to search for documents that contain: person "John", full
text
: "book" and date: before 06/12/2005
: Step 1:  search in personIndex for John - retrieve all @ID@ from the
hit
: list
: Step 2: search in DateIndex for documents that have dates before
: 06/12/2005 - retrieve id from the hit list
: Step 3: search in mainIndex for "book" - retrieve all @ID@
: Step 4: combine all the lists
: Step 5: search mainIndex for documents with the @ID@ from the combined
: id list
:
: Each search takes less then 1 second, but retrieving @ID@ from the
index
: takes a lot more - the time increases by the number of hits. This is
: because when retrieving a field value from a document hit, the Lucene
: engine loads all the fields from the index (the entire document). So
if
: in one search I get 300.000 hits cont, I have to iterate through all
and
: retrieve the @ID@ field value - this takes a lot of time.
:
: Regards,
: Mile Rosu
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 14:01:32 2006
Return-Path: <java-user-return-21332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4754 invoked from network); 13 Jun 2006 14:01:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 14:01:32 -0000
Received: (qmail 73246 invoked by uid 500); 13 Jun 2006 14:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73221 invoked by uid 500); 13 Jun 2006 14:01:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73210 invoked by uid 99); 13 Jun 2006 14:01:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 07:01:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.224] (HELO smtpout06-04.prod.mesa1.secureserver.net) (64.202.165.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Jun 2006 07:01:23 -0700
Received: (qmail 25029 invoked from network); 13 Jun 2006 14:01:02 -0000
Received: from unknown (202.153.32.162)
  by smtpout06-04.prod.mesa1.secureserver.net (64.202.165.227) with ESMTP; 13 Jun 2006 14:01:01 -0000
Subject: How to use Query and TermQuery in a single file
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary="=-qFIU4SotAS8c9LvhMe8E"
Organization: iptouch
Date: Tue, 13 Jun 2006 19:31:39 +0530
Message-Id: <1150207299.3851.35.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-qFIU4SotAS8c9LvhMe8E
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi,

I am new to Lucene but feel quite comfortable using the API.

I retrieve the Meta tags and the body from HTML files and  their
respective Title and Description from the database and then index
documents.

I use Query class to parse the search query. I get the results and I
display the Title and the Description successfully.

The Problem is :

    Now I wish to highlight the terms in the search results. Is it
compulsory to use TermQuery? If so, Will I have to replace the Query
class with TermQuery?
Am I thinking right?
If I am not clear, I can pass on the code..


Thanks in Advance... bye

--=-qFIU4SotAS8c9LvhMe8E--


From java-user-return-21333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 17:40:36 2006
Return-Path: <java-user-return-21333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81345 invoked from network); 13 Jun 2006 17:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 17:40:35 -0000
Received: (qmail 33821 invoked by uid 500); 13 Jun 2006 17:40:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33794 invoked by uid 500); 13 Jun 2006 17:40:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33783 invoked by uid 99); 13 Jun 2006 17:40:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 10:40:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 10:40:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 24CB15B775; Tue, 13 Jun 2006 10:39:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 151D67F403
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 10:39:58 -0700 (PDT)
Date: Tue, 13 Jun 2006 10:39:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Getting count on distinct values of a field.
In-Reply-To: <a36516400606130133tb3d9acal70795cff6710d40a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606131038550.27086@hal.rescomp.berkeley.edu>
References: <a36516400606120506l130fe8d6r3b60a8e1e450bdee@mail.gmail.com> 
 <Pine.LNX.4.58.0606122356010.13650@hal.rescomp.berkeley.edu>
 <a36516400606130133tb3d9acal70795cff6710d40a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: But what if that word is present in other fields also.
: does "docFreq " only look into that particular field ??

docFreq tells you the frequency of a term, a term is a field and a value
-- if you want the counts of a value across multiple fields, you'll have
to add them up yourself.  (or make a field that contains the union of all
the other fields)

: > : From: vipin sharma <heritrix.lucene@gmail.com>
: > : Reply-To: java-user@lucene.apache.org
: > : To: java-user@lucene.apache.org
: > : Subject: Getting count on distinct values of a field.
: > :
: > : Hi,
: > : i am having problem in getting the count on distict values of a field.
: > The
: > : reason for getting this value is that, each of all documents in index
: > : belongs to one predefined class and i want to get the number of
: > documents
: > : belonging to each class.
: > :
: > : Regards..


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 17:45:35 2006
Return-Path: <java-user-return-21334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86852 invoked from network); 13 Jun 2006 17:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 17:45:35 -0000
Received: (qmail 42645 invoked by uid 500); 13 Jun 2006 17:45:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42612 invoked by uid 500); 13 Jun 2006 17:45:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42598 invoked by uid 99); 13 Jun 2006 17:45:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 10:45:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 10:45:28 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D8F295B775; Tue, 13 Jun 2006 10:45:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CF0E37F403;
	Tue, 13 Jun 2006 10:45:07 -0700 (PDT)
Date: Tue, 13 Jun 2006 10:45:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Cc: Mircea Pop <Mircea.Pop@level7.ro>
Subject: RE: Using more than one index
In-Reply-To: <7688DA376E992B408BEFBF22A9F7F618387B3D@nemo.intranet>
Message-ID: <Pine.LNX.4.58.0606131043000.27086@hal.rescomp.berkeley.edu>
References: <7688DA376E992B408BEFBF22A9F7F618387B3D@nemo.intranet>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: A document (in our case an xml that has many metadata) can have more
: than one date, each date with 2 attributes:

: <date type="document" art="geburt">00-00-1886</date>
:
: In the date index I have for every <date> in the input xml a document
: with fields: type (document |other), date, art (birthday | deportation |
: death...). For example if I merge all the dates that correspond to a
: document then the new type field will contain all the values. So if I

so make a seperate field for each type of date, lucene is very good at
supporting documents with heterogenous sets of fields -- and it's even
better if you use OMIT_NORMS (which makes perfect sense for a date field
where norm values are meaningless anyway)

: A couple of suggestions...
:
: 1) don't use multiple indexes.  create one index, with one document per
: "thing" you want to return (in this case it sounds like books) and index
: all of the relevent data about each thing in that doc.  If multiple
: people
: worked on a book, add all of their names to the same field.  addd all of
: the dates to the book doc -- if you need to distibguish the differnet
: types of dates, make a seaprete field for each type.
:
: If you *must* cross refrence...
:
: 2) make sure you aren't useing the Hits API to iterate over all the
: results when gathering IDs -- use a lower level api (like a
: HitCollector)
:
: 3) use the FieldCache to get the IDs instead of he stored Document
: fields.
:
: 4) don't extract full ID lists from all of then indexes and then search
: on one of the indexes again with the ID list ... use the ID lists
: generated from the supporting indexes (people and dates) to build a
: Filter
: that you can use when searching the main index.
:
:
:
: : Date: Mon, 12 Jun 2006 12:22:30 +0300
: : From: Mile Rosu <mile.rosu@level7.ro>
: : Reply-To: java-user@lucene.apache.org
: : To: java-user@lucene.apache.org
: : Subject: Using more than one index
: :
: : Hello,
: :
: : We have an application dealing with historical books. The books have
: : metadata consisting of event dates, and person names among others.
: : The FullText, Person and Date indexes were split until we realized
: that
: : for a larger number of documents (400K) the combination of the
: : sequential search hits took a way too long time to complete (15 min).
: : The date index was built using the suggestion found at:
: : http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
: (big
: : thanks for the hint)
: :
: : Is there a recommended approach to combining results from different
: : indexes (with different fields)?
: :
: : The indexes structure:
: : MainIndex:
: : 	Fields:
: :       	@ID@ - keyword (document id)
: : 		@FULLTEXT@ - tokenized (used for full text6 search)
: : 		Ptitle - tokenized (used for full text publication title
: : search)
: : 		Dtitle - tokenized (used for full text document title
: : search)
: : 		Type - keyword - (used for document type)
: :
: : PersonIndex:
: : 		@ID@ - keyword (document id == mainIndex.@ID@)
: : 		Person - tokenized (full text person name search)
: : DateIndex:
: : 		@ID@ - keyword (document id == mainIdex.@ID@)
: : 		Date - date as YYYYMMDD - keyword
: : 		Type - type of date (document date, birth day, etc...)
: : 		@YYYY@ - year of date
: : 		@YYYYMM@ - year and month of date
: : 		@DDD@ - decade
: : 		@CC@ - century of date
: :
: :
: : Eg:
: : If I want to search for documents that contain: person "John", full
: text
: : "book" and date: before 06/12/2005
: : Step 1:  search in personIndex for John - retrieve all @ID@ from the
: hit
: : list
: : Step 2: search in DateIndex for documents that have dates before
: : 06/12/2005 - retrieve id from the hit list
: : Step 3: search in mainIndex for "book" - retrieve all @ID@
: : Step 4: combine all the lists
: : Step 5: search mainIndex for documents with the @ID@ from the combined
: : id list
: :
: : Each search takes less then 1 second, but retrieving @ID@ from the
: index
: : takes a lot more - the time increases by the number of hits. This is
: : because when retrieving a field value from a document hit, the Lucene
: : engine loads all the fields from the index (the entire document). So
: if
: : in one search I get 300.000 hits cont, I have to iterate through all
: and
: : retrieve the @ID@ field value - this takes a lot of time.
: :
: : Regards,
: : Mile Rosu
: :
: : ---------------------------------------------------------------------
: : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: : For additional commands, e-mail: java-user-help@lucene.apache.org
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 18:57:11 2006
Return-Path: <java-user-return-21335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91068 invoked from network); 13 Jun 2006 18:57:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 18:57:11 -0000
Received: (qmail 73922 invoked by uid 500); 13 Jun 2006 18:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73861 invoked by uid 500); 13 Jun 2006 18:57:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73820 invoked by uid 99); 13 Jun 2006 18:57:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 11:57:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.175] (HELO smtpout.mac.com) (17.250.248.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 11:57:00 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout05/MantshX 4.0) with ESMTP id k5DIueF4013023
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 11:56:40 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k5DIucvl007007
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 11:56:40 -0700 (PDT)
Message-ID: <448F0A67.3060801@mac.com>
Date: Tue, 13 Jun 2006 14:56:39 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document design and analyzer questions?
References: <447DD4FC.4060406@mac.com> <Pine.LNX.4.58.0605311044500.941@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0605311044500.941@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Chris,

Thanks for the response.

Chris Hostetter wrote:

>: Question is two fold.  One, here is the layout I was thinking:
>
>my rule of thumb: if a field is going to contain less then a few dozen
>bytes (ie: a date, an email address, etc) you might as well store it ...
>it will make your life easier when looking at your results.
>
>  
>
I will have millions of entries in my index.  Would storing them cause 
any performance issues?

>another important thing you should consider is field norms: they don't
>make sense for most date fields or numeric fields, or fields where the
>length is fairly irrelevant (ie: email addresses, guids, document types)
>
>  
>
What do you mean?

>: Also, any recommendations on what analyzer to use?  I was thinking the
>: synonym analyzer based on the one in the Lucene in Action book.
>
>you are probably going to want to use PerFieldAnalyzer so you can use a
>differnet analyzer for the fields that store email addresses then the
>analyzer you use for the body text ... if i'm searching for
>emails from "bob@car.com" i dont want it matching on emails from
>"bob@automobile.com"
>
>  
>
Sounds good.  I guess I could just use a StandardAnalyzer on these fields.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 19:02:41 2006
Return-Path: <java-user-return-21336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94789 invoked from network); 13 Jun 2006 19:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:02:41 -0000
Received: (qmail 80591 invoked by uid 500); 13 Jun 2006 19:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79992 invoked by uid 500); 13 Jun 2006 19:02:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79981 invoked by uid 99); 13 Jun 2006 19:02:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:02:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:02:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 701DB5B766; Tue, 13 Jun 2006 12:02:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 642A87F403
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 12:02:12 -0700 (PDT)
Date: Tue, 13 Jun 2006 12:02:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Document design and analyzer questions?
In-Reply-To: <448F0A67.3060801@mac.com>
Message-ID: <Pine.LNX.4.58.0606131158460.28126@hal.rescomp.berkeley.edu>
References: <447DD4FC.4060406@mac.com> <Pine.LNX.4.58.0605311044500.941@hal.rescomp.berkeley.edu>
 <448F0A67.3060801@mac.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I will have millions of entries in my index.  Would storing them cause
: any performance issues?

only testing will tell ... but generally speaking i don't think stored
affect query performance very much -- just disk usage.

: >another important thing you should consider is field norms: they don't
: >make sense for most date fields or numeric fields, or fields where the
: >length is fairly irrelevant (ie: email addresses, guids, document types)

: What do you mean?

Check the archives and/or LIA for what a field norm is .. then look at
using Field.setOmitNorm to disable them for fields where you don't
want/need them.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 19:06:21 2006
Return-Path: <java-user-return-21337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1307 invoked from network); 13 Jun 2006 19:06:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:06:21 -0000
Received: (qmail 90804 invoked by uid 500); 13 Jun 2006 19:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90763 invoked by uid 500); 13 Jun 2006 19:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90752 invoked by uid 500); 13 Jun 2006 19:06:13 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 90749 invoked by uid 99); 13 Jun 2006 19:06:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:06:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.205.163.221] (HELO nivis.com) (65.205.163.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:06:11 -0700
Received: from [216.198.65.254] (HELO commerceross)
  by nivis.com (CommuniGate Pro SMTP 5.0.4)
  with ESMTP id 9821845 for lucene-user@jakarta.apache.org; Tue, 13 Jun 2006 15:05:48 -0400
From: "Ross Rankin" <ross@commercescience.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: JVM Crash
Date: Tue, 13 Jun 2006 15:05:47 -0400
Message-ID: <002d01c68f1c$614cfed0$0a01a8c0@commerceross>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002E_01C68EFA.DA4040D0"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaPHGEAKgMvim7gRfuQcJicKRDnCg==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_002E_01C68EFA.DA4040D0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

We keep getting JVM crashes on 1.4.3.  I found in the archive that setting a
JVM parameter solved the problem for a few users.  We've tried that and it
has not worked.  Here's our JVM parameters:

     -Xms512m -Xmx1024m -XX:PermSize=256m

 

We're running Tomcat 5.5.16.  Any Idea?  

 

If it's any help, here's the JVM error we get:

#

# An unexpected error has been detected by HotSpot Virtual Machine:

#

#  SIGSEGV (0xb) at pc=0x0000002a95a5a300, pid=6020, tid=1084602720

#

# Java VM: Java HotSpot(TM) 64-Bit Server VM (1.5.0_06-b05 mixed mode)

# Problematic frame:

# V  [libjvm.so+0x4fa300]

#

 

---------------  T H R E A D  ---------------

 

Current thread (0x0000002b2a7852a0):  JavaThread "CompilerThread1" daemon
[_thread_in_native, id=6029]

 

siginfo:si_signo=11, si_errno=0, si_code=1, si_addr=0x0000000000000000

 

Registers:

RAX=0x0000000000000000, RBX=0x0000002b2f306d78, RCX=0x0000000040a58df0,
RDX=0x0000002b2f304c78

RSP=0x0000000040a58d70, RBP=0x0000000040a58d90, RSI=0x0000002b2f304c48,
RDI=0x0000000000000000

R8 =0x0000000000000044, R9 =0x0000003998c10280, R10=0x0000000000000010,
R11=0x0000000000000002

R12=0x0000000040a58df0, R13=0x0000002b2d9c24c8, R14=0x0000000040a58df0,
R15=0x0000002b2d9c24c8

RIP=0x0000002a95a5a300, EFL=0x0000000000010246, CSGSFS=0x0000000000004390,
ERR=0x0000000000000004

  TRAPNO=0x000000000000000e

 

Top of Stack: (sp=0x0000000040a58d70)

0x0000000040a58d70:   0000002b2e26fe28 0000002b2f306d78

0x0000000040a58d80:   0000002a95d858b0 0000002b2f306d08

0x0000000040a58d90:   0000000040a58dd0 0000002a95a5a3c2

0x0000000040a58da0:   0000002b2d9c24c8 0000002b2d9c2568

0x0000000040a58db0:   0000002b2d9c24c8 0000000000000000

0x0000000040a58dc0:   0000000040a59570 0000000040a59570

0x0000000040a58dd0:   0000000040a58e40 0000002a95a5a876

0x0000000040a58de0:   0000000040a58e40 0000000040a58df0

0x0000000040a58df0:   0000000200000000 0000002b2f32f3c0

0x0000000040a58e00:   0000000000000000 0000002b2e26fd60

0x0000000040a58e10:   0000000040a59570 0000002a95d7e230

0x0000000040a58e20:   0000002b2d9c24c8 0000000040a59570

0x0000000040a58e30:   0000002b2d9c24c8 0000000040a59570

0x0000000040a58e40:   0000000040a58ea0 0000002a95ae051e

0x0000000040a58e50:   0000002b2e27c408 000000000000066c

0x0000000040a58e60:   0000002b2a6f7bd0 0000009340a59578

0x0000000040a58e70:   0000000040a595c0 0000002a95dafe10

0x0000000040a58e80:   0000002b2d9c24c8 0000002a95db62b0

0x0000000040a58e90:   0000000000000043 0000000040a59570

0x0000000040a58ea0:   0000000040a58ef0 0000002a95ae017c

0x0000000040a58eb0:   0000000040a58ef0 0000000040a597e0

0x0000000040a58ec0:   0000000040a597c0 0000000040a59520

0x0000000040a58ed0:   0000002a95db3ba0 0000000040a59e10

0x0000000040a58ee0:   0000000040a5acd0 0000000040a59570

0x0000000040a58ef0:   0000000040a598b0 0000002a9581968b

0x0000000040a58f00:   0000002a95dafe50 0000002b307fa400

0x0000000040a58f10:   0000000000000008 0000000040a59830

0x0000000040a58f20:   0000002b307ffda0 0000000000000002

0x0000000040a58f30:   0000000040a59020 0000002a95a90d04

0x0000000040a58f40:   0000000040a58f60 0000002b307fa400

0x0000000040a58f50:   0000000040a58fe0 00000000307ff469

0x0000000040a58f60:   0000002b307fa400 0000002b307f9890

 

Instructions: (pc=0x0000002a95a5a300)

0x0000002a95a5a2f0:   db 31 c0 e9 77 ff ff ff 48 8b 56 08 48 8b 7a 10

0x0000002a95a5a300:   48 8b 1f ff 53 50 e9 3b ff ff ff 90 66 66 66 90

 

Stack: [0x000000004095b000,0x0000000040a5c000),  sp=0x0000000040a58d70,
free space=1015k

Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
code)

V  [libjvm.so+0x4fa300]

V  [libjvm.so+0x4fa3c2]

V  [libjvm.so+0x4fa876]

V  [libjvm.so+0x58051e]

V  [libjvm.so+0x58017c]

V  [libjvm.so+0x2b968b]

V  [libjvm.so+0x2b67ba]

V  [libjvm.so+0x25f3c7]

V  [libjvm.so+0x2bed06]

V  [libjvm.so+0x2be6b2]

V  [libjvm.so+0x6163f9]

V  [libjvm.so+0x610ffe]

V  [libjvm.so+0x554745]

 

 

Current CompileTask:

opto:600
org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object; (99 bytes)

 

---------------  P R O C E S S  ---------------

 

Java Threads: ( => current thread )

  0x0000002b2f0e7450 JavaThread "Thread-59" daemon [_thread_in_Java,
id=6303]

  0x0000002b2eb58a70 JavaThread "TP-Monitor" daemon [_thread_blocked,
id=6097]

  0x0000002b2eb57660 JavaThread "TP-Processor4" daemon [_thread_in_native,
id=6096]

  0x0000002b2eb566a0 JavaThread "TP-Processor3" daemon [_thread_blocked,
id=6095]

  0x0000002b2f070280 JavaThread "TP-Processor2" daemon [_thread_blocked,
id=6094]

  0x0000002b2f6ffa50 JavaThread "TP-Processor1" daemon [_thread_blocked,
id=6093]

  0x0000002b2d83d9e0 JavaThread "http-443-Monitor" [_thread_blocked,
id=6092]

  0x0000002b2d83c5d0 JavaThread "http-443-Processor25" daemon
[_thread_blocked, id=6091]

  0x0000002b2e688700 JavaThread "http-443-Processor24" daemon
[_thread_blocked, id=6090]

  0x0000002b2e6872f0 JavaThread "http-443-Processor23" daemon
[_thread_in_native, id=6089]

  0x0000002b2d85d6d0 JavaThread "http-443-Processor22" daemon
[_thread_blocked, id=6088]

  0x0000002b2d85c2c0 JavaThread "http-443-Processor21" daemon
[_thread_blocked, id=6087]

  0x0000002b2e6d85a0 JavaThread "http-443-Processor20" daemon
[_thread_blocked, id=6086]

  0x0000002b2e6d7190 JavaThread "http-443-Processor19" daemon
[_thread_blocked, id=6085]

  0x0000002b2e594920 JavaThread "http-443-Processor18" daemon
[_thread_blocked, id=6084]

  0x0000002b2e593510 JavaThread "http-443-Processor17" daemon
[_thread_blocked, id=6083]

  0x0000002b2e31c4c0 JavaThread "http-443-Processor16" daemon
[_thread_blocked, id=6082]

  0x0000002b2e31b0b0 JavaThread "http-443-Processor15" daemon
[_thread_blocked, id=6081]

  0x0000002b2ea7ea80 JavaThread "http-443-Processor14" daemon
[_thread_blocked, id=6080]

  0x0000002b2e637720 JavaThread "http-443-Processor13" daemon
[_thread_blocked, id=6079]

  0x0000002b2e636310 JavaThread "http-443-Processor12" daemon
[_thread_blocked, id=6078]

  0x0000002b2e4c4c50 JavaThread "http-443-Processor11" daemon
[_thread_blocked, id=6077]

  0x0000002b2e048000 JavaThread "http-443-Processor10" daemon
[_thread_blocked, id=6076]

  0x0000002b2e046bf0 JavaThread "http-443-Processor9" daemon
[_thread_blocked, id=6075]

  0x0000002b2e646770 JavaThread "http-443-Processor8" daemon
[_thread_blocked, id=6074]

  0x0000002b2e799080 JavaThread "http-443-Processor7" daemon
[_thread_blocked, id=6073]

  0x0000002b2dac39d0 JavaThread "http-443-Processor6" daemon
[_thread_blocked, id=6072]

  0x0000002b2dac26e0 JavaThread "http-443-Processor5" daemon
[_thread_blocked, id=6071]

  0x0000002b2eed00c0 JavaThread "http-443-Processor4" daemon
[_thread_blocked, id=6070]

  0x0000002b2eecfcf0 JavaThread "http-443-Processor3" daemon
[_thread_blocked, id=6069]

  0x0000002b30447c80 JavaThread "http-443-Processor2" daemon
[_thread_blocked, id=6068]

  0x0000002b2f5dd2f0 JavaThread "http-443-Processor1" daemon
[_thread_blocked, id=6067]

  0x0000002b2f5da750 JavaThread "http-80-Monitor" [_thread_blocked, id=6066]

  0x0000002b2f5d9600 JavaThread "http-80-Processor25" daemon
[_thread_blocked, id=6065]

  0x0000002b2f583400 JavaThread "http-80-Processor24" daemon
[_thread_blocked, id=6064]

  0x0000002b2f5ce2a0 JavaThread "http-80-Processor23" daemon
[_thread_blocked, id=6063]

  0x0000002b314f4740 JavaThread "http-80-Processor22" daemon
[_thread_in_native, id=6062]

  0x0000002b2f586d60 JavaThread "http-80-Processor21" daemon
[_thread_blocked, id=6061]

  0x0000002b2f585c50 JavaThread "http-80-Processor20" daemon
[_thread_blocked, id=6060]

  0x0000002b2f584b00 JavaThread "http-80-Processor19" daemon
[_thread_blocked, id=6059]

  0x0000002b2f591c70 JavaThread "http-80-Processor18" daemon
[_thread_blocked, id=6058]

  0x0000002b2f590b20 JavaThread "http-80-Processor17" daemon
[_thread_blocked, id=6057]

  0x0000002b2f58fac0 JavaThread "http-80-Processor16" daemon
[_thread_blocked, id=6056]

  0x0000002b2ec70440 JavaThread "http-80-Processor15" daemon
[_thread_blocked, id=6055]

  0x0000002b2e24fe70 JavaThread "http-80-Processor14" daemon
[_thread_blocked, id=6054]

  0x0000002b2e24e900 JavaThread "http-80-Processor13" daemon
[_thread_blocked, id=6053]

  0x0000002b2e2b0a90 JavaThread "http-80-Processor12" daemon
[_thread_blocked, id=6052]

  0x0000002b2e2af940 JavaThread "http-80-Processor11" daemon
[_thread_blocked, id=6051]

  0x0000002b2e2ae7f0 JavaThread "http-80-Processor10" daemon
[_thread_blocked, id=6050]

  0x0000002b2e21ee00 JavaThread "http-80-Processor9" daemon
[_thread_blocked, id=6049]

  0x0000002b2e21dd10 JavaThread "http-80-Processor8" daemon
[_thread_blocked, id=6048]

  0x0000002b2f47ced0 JavaThread "http-80-Processor7" daemon
[_thread_blocked, id=6047]

  0x0000002b2ec49920 JavaThread "http-80-Processor6" daemon
[_thread_blocked, id=6046]

  0x0000002b2ecb1c00 JavaThread "http-80-Processor5" daemon
[_thread_blocked, id=6045]

  0x0000002b2e2ca2d0 JavaThread "http-80-Processor4" daemon
[_thread_blocked, id=6044]

  0x0000002b2f5509d0 JavaThread "http-80-Processor3" daemon
[_thread_blocked, id=6043]

  0x0000002b2e22f730 JavaThread "http-80-Processor2" daemon
[_thread_blocked, id=6042]

  0x0000002b2f528200 JavaThread "http-80-Processor1" daemon
[_thread_blocked, id=6041]

  0x0000002b2f5928f0 JavaThread
"ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon
[_thread_blocked, id=6040]

  0x0000002b2a786ec0 JavaThread "Low Memory Detector" daemon
[_thread_blocked, id=6030]

  0x0000002b2a7852a0 JavaThread "CompilerThread1" daemon [_thread_in_native,
id=6029]

  0x0000002b2a783d00 JavaThread "CompilerThread0" daemon [_thread_blocked,
id=6028]

  0x0000002b2a7825b0 JavaThread "AdapterThread" daemon [_thread_blocked,
id=6027]

  0x0000002b2a7811f0 JavaThread "Signal Dispatcher" daemon [_thread_blocked,
id=6026]

  0x0000002b2a76cfc0 JavaThread "Finalizer" daemon [_thread_blocked,
id=6025]

  0x0000002b2a76c6e0 JavaThread "Reference Handler" daemon [_thread_blocked,
id=6024]

  0x00000000401160c0 JavaThread "main" [_thread_in_native, id=6020]

 

Other Threads:

  0x0000002b2a7682d0 VMThread [id=6023]

Other Threads:

  0x0000002b2a7682d0 VMThread [id=6023]

  0x0000002b2a788b00 WatcherThread [id=6031]

 

VM state:not at safepoint (normal execution)

 

VM Mutex/Monitor currently owned by a thread: None

 

Heap

 PSYoungGen      total 126976K, used 123816K [0x0000002b14d10000,
0x0000002b1f8a0000, 0x0000002b2a260000)

  eden space 116672K, 97% used
[0x0000002b14d10000,0x0000002b1bbea278,0x0000002b1bf00000)

  from space 10304K, 100% used
[0x0000002b1c070000,0x0000002b1ca80000,0x0000002b1ca80000)

  to   space 29504K, 0% used
[0x0000002b1dbd0000,0x0000002b1dbd0000,0x0000002b1f8a0000)

 PSOldGen        total 349568K, used 17214K [0x0000002aea260000,
0x0000002aff7c0000, 0x0000002b14d10000)

  object space 349568K, 4% used
[0x0000002aea260000,0x0000002aeb32fa20,0x0000002aff7c0000)

 PSPermGen       total 262144K, used 22207K [0x0000002ada260000,
0x0000002aea260000, 0x0000002aea260000)

  object space 262144K, 8% used
[0x0000002ada260000,0x0000002adb80ff30,0x0000002aea260000)

Dynamic libraries:

<SNIP>

VM Arguments:

jvm_args: -Djava.net.preferIPv4Stack=true -Xms512m -Xmx1024m
-XX:PermSize=256m -XX:MaxPermSize=256m
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
-Djava.util.logging.config.file=/usr/local/tomcat/conf/logging.properties
-Djava.endorsed.dirs=/usr/local/tomcat/common/endorsed
-Dcatalina.base=/usr/local/tomcat -Dcatalina.home=/usr/local/tomcat
-Djava.io.tmpdir=/usr/local/tomcat/temp

java_command: org.apache.catalina.startup.Bootstrap start

Launcher Type: SUN_STANDARD

 

Environment Variables:

JAVA_HOME=/usr/local/java

CLASSPATH=:/usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/commons
-logging-api.jar

PATH=/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sb
in:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin:/usr/local/java/bin:/usr/local/ant
/bin:/usr/local/tomcat/bin:/root/bin

LD_LIBRARY_PATH=/usr/local/jdk1.5.0_06/jre/lib/amd64/server:/usr/local/jdk1.
5.0_06/jre/lib/amd64:/usr/local/jdk1.5.0_06/jre/../lib/amd64

SHELL=/bin/bash

 

 

---------------  S Y S T E M  ---------------

 

OS:CentOS release 4.3 (Final)

 

uname:Linux 2.6.9-34.ELsmp #1 SMP Thu Mar 9 06:23:23 GMT 2006 x86_64

libc:glibc 2.3.4 NPTL 2.3.4

rlimit: STACK 10240k, CORE 0k, NPROC 16383, NOFILE 1024, AS infinity

load average:0.00 0.00 0.00

 

CPU:total 2 amd64 3dnow

 

Memory: 4k page, physical 2056428k(849824k free), swap 2040212k(2040212k
free)

 

vm_info: Java HotSpot(TM) 64-Bit Server VM (1.5.0_06-b05) for linux-amd64,
built on Nov 10 2005 11:45:12 by java_re with gcc 3.2.2 (SuSE Linux)

 


------=_NextPart_000_002E_01C68EFA.DA4040D0--


From java-user-return-21338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 19:29:01 2006
Return-Path: <java-user-return-21338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36475 invoked from network); 13 Jun 2006 19:29:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:29:00 -0000
Received: (qmail 26417 invoked by uid 500); 13 Jun 2006 19:28:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25583 invoked by uid 500); 13 Jun 2006 19:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25554 invoked by uid 99); 13 Jun 2006 19:28:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:28:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [206.190.49.55] (HELO web53105.mail.yahoo.com) (206.190.49.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Jun 2006 12:28:46 -0700
Received: (qmail 1753 invoked by uid 60001); 13 Jun 2006 19:28:25 -0000
Message-ID: <20060613192825.1751.qmail@web53105.mail.yahoo.com>
Received: from [71.34.19.46] by web53105.mail.yahoo.com via HTTP; Tue, 13 Jun 2006 12:28:24 PDT
Date: Tue, 13 Jun 2006 12:28:24 -0700 (PDT)
From: N Hira <nhira@cognocys.com>
Subject: Re: JVM Crash
To: java-user@lucene.apache.org, lucene-user@jakarta.apache.org
In-Reply-To: <002d01c68f1c$614cfed0$0a01a8c0@commerceross>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We had a similar problem.  We discovered that it was basically that eden/from
was out of memory and made two changes and that seems to have helped:
1.  Reduce [Max]PermSize to 128M
2.  Use the concurrent garbage collector

Good luck.

-h

--- Ross Rankin <ross@commercescience.com> wrote:

> We keep getting JVM crashes on 1.4.3.  I found in the archive that setting a
> JVM parameter solved the problem for a few users.  We've tried that and it
> has not worked.  Here's our JVM parameters:
> 
>      -Xms512m -Xmx1024m -XX:PermSize=256m
> 
>  
> 
> We're running Tomcat 5.5.16.  Any Idea?  
> 
>  
<log snipped>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 19:29:01 2006
Return-Path: <java-user-return-21339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36478 invoked from network); 13 Jun 2006 19:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:29:00 -0000
Received: (qmail 26423 invoked by uid 500); 13 Jun 2006 19:28:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25589 invoked by uid 500); 13 Jun 2006 19:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25557 invoked by uid 500); 13 Jun 2006 19:28:47 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 25553 invoked by uid 99); 13 Jun 2006 19:28:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:28:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [206.190.49.55] (HELO web53105.mail.yahoo.com) (206.190.49.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Jun 2006 12:28:47 -0700
Received: (qmail 1753 invoked by uid 60001); 13 Jun 2006 19:28:25 -0000
Message-ID: <20060613192825.1751.qmail@web53105.mail.yahoo.com>
Received: from [71.34.19.46] by web53105.mail.yahoo.com via HTTP; Tue, 13 Jun 2006 12:28:24 PDT
Date: Tue, 13 Jun 2006 12:28:24 -0700 (PDT)
From: N Hira <nhira@cognocys.com>
Subject: Re: JVM Crash
To: java-user@lucene.apache.org, lucene-user@jakarta.apache.org
In-Reply-To: <002d01c68f1c$614cfed0$0a01a8c0@commerceross>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We had a similar problem.  We discovered that it was basically that eden/from
was out of memory and made two changes and that seems to have helped:
1.  Reduce [Max]PermSize to 128M
2.  Use the concurrent garbage collector

Good luck.

-h

--- Ross Rankin <ross@commercescience.com> wrote:

> We keep getting JVM crashes on 1.4.3.  I found in the archive that setting a
> JVM parameter solved the problem for a few users.  We've tried that and it
> has not worked.  Here's our JVM parameters:
> 
>      -Xms512m -Xmx1024m -XX:PermSize=256m
> 
>  
> 
> We're running Tomcat 5.5.16.  Any Idea?  
> 
>  
<log snipped>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 19:57:17 2006
Return-Path: <java-user-return-21340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81377 invoked from network); 13 Jun 2006 19:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 19:57:17 -0000
Received: (qmail 64694 invoked by uid 500); 13 Jun 2006 19:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64666 invoked by uid 500); 13 Jun 2006 19:57:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64654 invoked by uid 99); 13 Jun 2006 19:57:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:57:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 12:57:06 -0700
Received: from [192.168.1.101] (cpe-68-175-96-170.nyc.res.rr.com [68.175.96.170])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id k5DJutZ19630
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 15:56:55 -0400
Message-ID: <448F182D.9090002@alias-i.com>
Date: Tue, 13 Jun 2006 15:55:25 -0400
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: question with spellchecker
References: <20060613112837.88314.qmail@web26002.mail.ukl.yahoo.com>
In-Reply-To: <20060613112837.88314.qmail@web26002.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Very nice idea.  This is the basis of most of the work on
word-sense-disambiguation (e.g. is it "run" as in baseball,
"run" as in stock, or "run" as in stocking? or is "John Smith"
CEO of GM or "John Smith" lover of  Pocahantas?).  TF/IDF's
not a bad way to compute this, either, though there
are definitely better classifiers for the purpose.  The approach (reprinted
below) to context winds up looking like pseudo query refinement. 

Bosworth is a bit disengenous in the podcast about just how stupid the
techniques are that are being driven by Google's Patton-like Ph.D.s
in tanks (his metaphor, not mine; all the Google employees I know
are pacifists :-)). He also seems to have a bit
of the "only Google can do this" bug, when in fact, Yahoo and Amazon
both have very respectable web-wide spelling correction.  Here's what a 
couple
of Ph.D.s from Microsoft have to say about the problem of using
query logs for search:

http://acl.ldc.upenn.edu/acl2004/emnlp/pdf/Cucerzan.pdf

Check out what Google itself says publicly about how their
spell checker works:

"... When we calculate a greater number of relevant search results with 
an alternative spelling,
     you'll see "Did you mean: (more common spelling)" at the top of 
your search results page."
                    - 
http://www.google.com/support/bin/answer.py?answer=1723

The key here is the "greater number of relevant search results with an 
alt spelling".
Yahoo does the same thing, and you can even reverse-engineer the nubmers,
as in how many times greater does the number of results with an alt spelling
have to be (answer is about 256-2000 times more likely, depending on the
likelihood of the substitution [more expensive early in words, vowels 
cheaper
to substitute for each other than anything else, etc.]).
This is essentially the basis of all the modern spell checkers, whether they
use logs or not. 

If it was just mining searcher behavior patterns literally, you wouldn't 
expect
them to be able to correct all the variants of Lucene, as in:

Apache lacene -> Apache Lucen{a,b,c,...,z}

because as popular and Google and Lucene are, there aren't
that many typos in Google's logs.  Especially from all over the
keyboard and at every point in the word.

So there's really a more sophisticated notion of edit distance going on 
here,
with query logs being used as a feature (in the machine learning sense)
to guide the process.  You need a lot of logs for this, and you need to be
able to put sessions back together from IP addresses to mine the data.
Piece of cake, so it's a common practice.

Now try Google search without the "Apache" in front, and you'll see they use
context:

Apache Lucenx -> apache lucene
akache lucne -> apache lucene
Lucenx -> Lucent

Even if they did only use the logs, it still requires some pretty fancy
algorithm work to extract matches of variable length from huge amounts
of log material.  And a lot of careful tuning that's hard to get right
if you never leave your tank.

Note that they'll also split and recombine, so it's not just 
token-for-token:

apachelucene -> apache lucene
apache luc ene -> apache lucene

You can also see their token sensitivity in

apache luc(ene -> apache lucene
apache lucene( -> apache lucene(

You can also see how they normalize inside:

apache luc()()()()ene -> apache lucene

This is a very hard problem to tackle multi-lingually, which is why
Google et al. a lot of problem with false positives (correcting things
that were right) and false negatives (missing corrections).  This is
especially obvious once you drop into a specialized domain that's
not computer science (which is over-represented proportionally
on the web), or a language that's much less popular on the web
than English.  For example

s'ils vous plaid -> no correction (846 hits)
s'ils vous plait -> no correction 1.3M hits

- Bob Carpenter

mark harwood wrote:
> For those with the luxury of a large store of historical queries it's interesting to note Google's approach to this.
>
> Not some fancy spell checker - just mining searcher behaviour patterns.
> Google's Bosworth describes this approach approx 13 minutes into this podcast:
>
> http://www.itconversations.com/shows/detail571.html
>
>
>
> ----- Original Message ----
> From: Van Nguyen <vnguyen@ur.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 12 June, 2006 11:09:20 PM
> Subject: RE: question with spellchecker
>
> I'll experiment with both.
>
> Thanks...
>
> -----Original Message-----
> From: mark harwood [mailto:markharw00d@yahoo.co.uk] 
> Sent: Wednesday, June 07, 2006 2:16 AM
> To: java-user@lucene.apache.org
> Subject: Re: question with spellchecker
>
> I think the problem in your particular example is the
> suggestion software has no consideration of context.
>
> I've been playing with context-sensitive suggestions
> recently which take a bunch of validated (ie existing)
> words (eg "tape") and use this to help shortlist
> alternatives for an unknown or partially typed word
> (eg ducted)
>
> This has potential applications in spell checking and
> as-you-type query completion.
>
> The approach is quite simple but effective - You use
> your choice of code to produce a list of candidate
> terms  (eg FuzzyTermEnum or some form of Soundex or
> PrefixQuery) THEN take the large list of candidate
> terms produced and compare their usage in relation to
> the context of  words you already know eg "tape".
> In practice this means that TermDocs for the candidate
> term are used to construct a doc bitset which is
> compared with a doc bitset produced from all other
> terms which make up the context. The level of
> intersection between these bitsets can be used to help
> sensibly rank the "duct" and "ducked" candidates in
> relation to "tape". Do they co-occur often?
>
> [psuedo code]
> BitSet contextDocs= matchKnownTerms();
> float numContextMatches=contextDocs.cardinality();
> for all candidate terms for unknown term
> {
>   BitSet candMatches =createBitset(candTerm)
>   float numCandMatches=candMatches.cardinality();
>   float
> numSharedMatches=candMatches.and(contextDocs).cardinality()
>   float contextRelatedness =numSharedMatches/
>    (
>      (numCandMatches+numContextMatches)
>       -numSharedMatches
>    )
>   //collect candidate Terms that have high combo of 
>   //contextRelatedness and unknown term similarity (eg
> low edit distance) 
> }
>
> There are quite a few optimisations I've added to this
> basic pseudo code in my implementation. When I get
> some time I'll package this code up and contribute it
> but for now this psuedo code may give some pointers
> which help to provide a solution.
>
>
> Cheers,
> Mark
>
>
> Send instant messages to your online friends
> http://uk.messenger.yahoo.com 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 20:05:00 2006
Return-Path: <java-user-return-21341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86451 invoked from network); 13 Jun 2006 20:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 20:05:00 -0000
Received: (qmail 74477 invoked by uid 500); 13 Jun 2006 20:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74153 invoked by uid 500); 13 Jun 2006 20:04:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74124 invoked by uid 99); 13 Jun 2006 20:04:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 13:04:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 13:04:48 -0700
Received: from [192.168.1.101] (cpe-68-175-96-170.nyc.res.rr.com [68.175.96.170])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id k5DK4bZ19651
	for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 16:04:37 -0400
Message-ID: <448F19FB.6030606@alias-i.com>
Date: Tue, 13 Jun 2006 16:03:07 -0400
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: JVM Crash
References: <002d01c68f1c$614cfed0$0a01a8c0@commerceross>
In-Reply-To: <002d01c68f1c$614cfed0$0a01a8c0@commerceross>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Java apps shouldn't throw these kind of seg faults.

Sounds like a problem with memory.  Especially if you can't
reproduce the error in the same location.  Double especially
if you have the same problems elsewhere under heavy
memory load.  I had all kinds of problems with seg faults
in the JVM until I replaced my memory with ECC memory
a couple of years ago, and haven't seg-faulted since.

- Bob Carpenter

Ross Rankin wrote:
> We keep getting JVM crashes on 1.4.3.  I found in the archive that setting a
> JVM parameter solved the problem for a few users.  We've tried that and it
> has not worked.  Here's our JVM parameters:
>
>      -Xms512m -Xmx1024m -XX:PermSize=256m
>
>  
>
> We're running Tomcat 5.5.16.  Any Idea?  
>
>  
>
> If it's any help, here's the JVM error we get:
>
> #
>
> # An unexpected error has been detected by HotSpot Virtual Machine:
>
> #
>
> #  SIGSEGV (0xb) at pc=0x0000002a95a5a300, pid=6020, tid=1084602720
>
> #
>
> # Java VM: Java HotSpot(TM) 64-Bit Server VM (1.5.0_06-b05 mixed mode)
>
> # Problematic frame:
>
> # V  [libjvm.so+0x4fa300]
>
> #
>
>  
>
> ---------------  T H R E A D  ---------------
>
>  
>
> Current thread (0x0000002b2a7852a0):  JavaThread "CompilerThread1" daemon
> [_thread_in_native, id=6029]
>
>  
>
> siginfo:si_signo=11, si_errno=0, si_code=1, si_addr=0x0000000000000000
>
>  
>
> Registers:
>
> RAX=0x0000000000000000, RBX=0x0000002b2f306d78, RCX=0x0000000040a58df0,
> RDX=0x0000002b2f304c78
>
> RSP=0x0000000040a58d70, RBP=0x0000000040a58d90, RSI=0x0000002b2f304c48,
> RDI=0x0000000000000000
>
> R8 =0x0000000000000044, R9 =0x0000003998c10280, R10=0x0000000000000010,
> R11=0x0000000000000002
>
> R12=0x0000000040a58df0, R13=0x0000002b2d9c24c8, R14=0x0000000040a58df0,
> R15=0x0000002b2d9c24c8
>
> RIP=0x0000002a95a5a300, EFL=0x0000000000010246, CSGSFS=0x0000000000004390,
> ERR=0x0000000000000004
>
>   TRAPNO=0x000000000000000e
>
>  
>
> Top of Stack: (sp=0x0000000040a58d70)
>
> 0x0000000040a58d70:   0000002b2e26fe28 0000002b2f306d78
>
> 0x0000000040a58d80:   0000002a95d858b0 0000002b2f306d08
>
> 0x0000000040a58d90:   0000000040a58dd0 0000002a95a5a3c2
>
> 0x0000000040a58da0:   0000002b2d9c24c8 0000002b2d9c2568
>
> 0x0000000040a58db0:   0000002b2d9c24c8 0000000000000000
>
> 0x0000000040a58dc0:   0000000040a59570 0000000040a59570
>
> 0x0000000040a58dd0:   0000000040a58e40 0000002a95a5a876
>
> 0x0000000040a58de0:   0000000040a58e40 0000000040a58df0
>
> 0x0000000040a58df0:   0000000200000000 0000002b2f32f3c0
>
> 0x0000000040a58e00:   0000000000000000 0000002b2e26fd60
>
> 0x0000000040a58e10:   0000000040a59570 0000002a95d7e230
>
> 0x0000000040a58e20:   0000002b2d9c24c8 0000000040a59570
>
> 0x0000000040a58e30:   0000002b2d9c24c8 0000000040a59570
>
> 0x0000000040a58e40:   0000000040a58ea0 0000002a95ae051e
>
> 0x0000000040a58e50:   0000002b2e27c408 000000000000066c
>
> 0x0000000040a58e60:   0000002b2a6f7bd0 0000009340a59578
>
> 0x0000000040a58e70:   0000000040a595c0 0000002a95dafe10
>
> 0x0000000040a58e80:   0000002b2d9c24c8 0000002a95db62b0
>
> 0x0000000040a58e90:   0000000000000043 0000000040a59570
>
> 0x0000000040a58ea0:   0000000040a58ef0 0000002a95ae017c
>
> 0x0000000040a58eb0:   0000000040a58ef0 0000000040a597e0
>
> 0x0000000040a58ec0:   0000000040a597c0 0000000040a59520
>
> 0x0000000040a58ed0:   0000002a95db3ba0 0000000040a59e10
>
> 0x0000000040a58ee0:   0000000040a5acd0 0000000040a59570
>
> 0x0000000040a58ef0:   0000000040a598b0 0000002a9581968b
>
> 0x0000000040a58f00:   0000002a95dafe50 0000002b307fa400
>
> 0x0000000040a58f10:   0000000000000008 0000000040a59830
>
> 0x0000000040a58f20:   0000002b307ffda0 0000000000000002
>
> 0x0000000040a58f30:   0000000040a59020 0000002a95a90d04
>
> 0x0000000040a58f40:   0000000040a58f60 0000002b307fa400
>
> 0x0000000040a58f50:   0000000040a58fe0 00000000307ff469
>
> 0x0000000040a58f60:   0000002b307fa400 0000002b307f9890
>
>  
>
> Instructions: (pc=0x0000002a95a5a300)
>
> 0x0000002a95a5a2f0:   db 31 c0 e9 77 ff ff ff 48 8b 56 08 48 8b 7a 10
>
> 0x0000002a95a5a300:   48 8b 1f ff 53 50 e9 3b ff ff ff 90 66 66 66 90
>
>  
>
> Stack: [0x000000004095b000,0x0000000040a5c000),  sp=0x0000000040a58d70,
> free space=1015k
>
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
> code)
>
> V  [libjvm.so+0x4fa300]
>
> V  [libjvm.so+0x4fa3c2]
>
> V  [libjvm.so+0x4fa876]
>
> V  [libjvm.so+0x58051e]
>
> V  [libjvm.so+0x58017c]
>
> V  [libjvm.so+0x2b968b]
>
> V  [libjvm.so+0x2b67ba]
>
> V  [libjvm.so+0x25f3c7]
>
> V  [libjvm.so+0x2bed06]
>
> V  [libjvm.so+0x2be6b2]
>
> V  [libjvm.so+0x6163f9]
>
> V  [libjvm.so+0x610ffe]
>
> V  [libjvm.so+0x554745]
>
>  
>
>  
>
> Current CompileTask:
>
> opto:600
> org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object; (99 bytes)
>
>  
>
> ---------------  P R O C E S S  ---------------
>
>  
>
> Java Threads: ( => current thread )
>
>   0x0000002b2f0e7450 JavaThread "Thread-59" daemon [_thread_in_Java,
> id=6303]
>
>   0x0000002b2eb58a70 JavaThread "TP-Monitor" daemon [_thread_blocked,
> id=6097]
>
>   0x0000002b2eb57660 JavaThread "TP-Processor4" daemon [_thread_in_native,
> id=6096]
>
>   0x0000002b2eb566a0 JavaThread "TP-Processor3" daemon [_thread_blocked,
> id=6095]
>
>   0x0000002b2f070280 JavaThread "TP-Processor2" daemon [_thread_blocked,
> id=6094]
>
>   0x0000002b2f6ffa50 JavaThread "TP-Processor1" daemon [_thread_blocked,
> id=6093]
>
>   0x0000002b2d83d9e0 JavaThread "http-443-Monitor" [_thread_blocked,
> id=6092]
>
>   0x0000002b2d83c5d0 JavaThread "http-443-Processor25" daemon
> [_thread_blocked, id=6091]
>
>   0x0000002b2e688700 JavaThread "http-443-Processor24" daemon
> [_thread_blocked, id=6090]
>
>   0x0000002b2e6872f0 JavaThread "http-443-Processor23" daemon
> [_thread_in_native, id=6089]
>
>   0x0000002b2d85d6d0 JavaThread "http-443-Processor22" daemon
> [_thread_blocked, id=6088]
>
>   0x0000002b2d85c2c0 JavaThread "http-443-Processor21" daemon
> [_thread_blocked, id=6087]
>
>   0x0000002b2e6d85a0 JavaThread "http-443-Processor20" daemon
> [_thread_blocked, id=6086]
>
>   0x0000002b2e6d7190 JavaThread "http-443-Processor19" daemon
> [_thread_blocked, id=6085]
>
>   0x0000002b2e594920 JavaThread "http-443-Processor18" daemon
> [_thread_blocked, id=6084]
>
>   0x0000002b2e593510 JavaThread "http-443-Processor17" daemon
> [_thread_blocked, id=6083]
>
>   0x0000002b2e31c4c0 JavaThread "http-443-Processor16" daemon
> [_thread_blocked, id=6082]
>
>   0x0000002b2e31b0b0 JavaThread "http-443-Processor15" daemon
> [_thread_blocked, id=6081]
>
>   0x0000002b2ea7ea80 JavaThread "http-443-Processor14" daemon
> [_thread_blocked, id=6080]
>
>   0x0000002b2e637720 JavaThread "http-443-Processor13" daemon
> [_thread_blocked, id=6079]
>
>   0x0000002b2e636310 JavaThread "http-443-Processor12" daemon
> [_thread_blocked, id=6078]
>
>   0x0000002b2e4c4c50 JavaThread "http-443-Processor11" daemon
> [_thread_blocked, id=6077]
>
>   0x0000002b2e048000 JavaThread "http-443-Processor10" daemon
> [_thread_blocked, id=6076]
>
>   0x0000002b2e046bf0 JavaThread "http-443-Processor9" daemon
> [_thread_blocked, id=6075]
>
>   0x0000002b2e646770 JavaThread "http-443-Processor8" daemon
> [_thread_blocked, id=6074]
>
>   0x0000002b2e799080 JavaThread "http-443-Processor7" daemon
> [_thread_blocked, id=6073]
>
>   0x0000002b2dac39d0 JavaThread "http-443-Processor6" daemon
> [_thread_blocked, id=6072]
>
>   0x0000002b2dac26e0 JavaThread "http-443-Processor5" daemon
> [_thread_blocked, id=6071]
>
>   0x0000002b2eed00c0 JavaThread "http-443-Processor4" daemon
> [_thread_blocked, id=6070]
>
>   0x0000002b2eecfcf0 JavaThread "http-443-Processor3" daemon
> [_thread_blocked, id=6069]
>
>   0x0000002b30447c80 JavaThread "http-443-Processor2" daemon
> [_thread_blocked, id=6068]
>
>   0x0000002b2f5dd2f0 JavaThread "http-443-Processor1" daemon
> [_thread_blocked, id=6067]
>
>   0x0000002b2f5da750 JavaThread "http-80-Monitor" [_thread_blocked, id=6066]
>
>   0x0000002b2f5d9600 JavaThread "http-80-Processor25" daemon
> [_thread_blocked, id=6065]
>
>   0x0000002b2f583400 JavaThread "http-80-Processor24" daemon
> [_thread_blocked, id=6064]
>
>   0x0000002b2f5ce2a0 JavaThread "http-80-Processor23" daemon
> [_thread_blocked, id=6063]
>
>   0x0000002b314f4740 JavaThread "http-80-Processor22" daemon
> [_thread_in_native, id=6062]
>
>   0x0000002b2f586d60 JavaThread "http-80-Processor21" daemon
> [_thread_blocked, id=6061]
>
>   0x0000002b2f585c50 JavaThread "http-80-Processor20" daemon
> [_thread_blocked, id=6060]
>
>   0x0000002b2f584b00 JavaThread "http-80-Processor19" daemon
> [_thread_blocked, id=6059]
>
>   0x0000002b2f591c70 JavaThread "http-80-Processor18" daemon
> [_thread_blocked, id=6058]
>
>   0x0000002b2f590b20 JavaThread "http-80-Processor17" daemon
> [_thread_blocked, id=6057]
>
>   0x0000002b2f58fac0 JavaThread "http-80-Processor16" daemon
> [_thread_blocked, id=6056]
>
>   0x0000002b2ec70440 JavaThread "http-80-Processor15" daemon
> [_thread_blocked, id=6055]
>
>   0x0000002b2e24fe70 JavaThread "http-80-Processor14" daemon
> [_thread_blocked, id=6054]
>
>   0x0000002b2e24e900 JavaThread "http-80-Processor13" daemon
> [_thread_blocked, id=6053]
>
>   0x0000002b2e2b0a90 JavaThread "http-80-Processor12" daemon
> [_thread_blocked, id=6052]
>
>   0x0000002b2e2af940 JavaThread "http-80-Processor11" daemon
> [_thread_blocked, id=6051]
>
>   0x0000002b2e2ae7f0 JavaThread "http-80-Processor10" daemon
> [_thread_blocked, id=6050]
>
>   0x0000002b2e21ee00 JavaThread "http-80-Processor9" daemon
> [_thread_blocked, id=6049]
>
>   0x0000002b2e21dd10 JavaThread "http-80-Processor8" daemon
> [_thread_blocked, id=6048]
>
>   0x0000002b2f47ced0 JavaThread "http-80-Processor7" daemon
> [_thread_blocked, id=6047]
>
>   0x0000002b2ec49920 JavaThread "http-80-Processor6" daemon
> [_thread_blocked, id=6046]
>
>   0x0000002b2ecb1c00 JavaThread "http-80-Processor5" daemon
> [_thread_blocked, id=6045]
>
>   0x0000002b2e2ca2d0 JavaThread "http-80-Processor4" daemon
> [_thread_blocked, id=6044]
>
>   0x0000002b2f5509d0 JavaThread "http-80-Processor3" daemon
> [_thread_blocked, id=6043]
>
>   0x0000002b2e22f730 JavaThread "http-80-Processor2" daemon
> [_thread_blocked, id=6042]
>
>   0x0000002b2f528200 JavaThread "http-80-Processor1" daemon
> [_thread_blocked, id=6041]
>
>   0x0000002b2f5928f0 JavaThread
> "ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon
> [_thread_blocked, id=6040]
>
>   0x0000002b2a786ec0 JavaThread "Low Memory Detector" daemon
> [_thread_blocked, id=6030]
>
>   0x0000002b2a7852a0 JavaThread "CompilerThread1" daemon [_thread_in_native,
> id=6029]
>
>   0x0000002b2a783d00 JavaThread "CompilerThread0" daemon [_thread_blocked,
> id=6028]
>
>   0x0000002b2a7825b0 JavaThread "AdapterThread" daemon [_thread_blocked,
> id=6027]
>
>   0x0000002b2a7811f0 JavaThread "Signal Dispatcher" daemon [_thread_blocked,
> id=6026]
>
>   0x0000002b2a76cfc0 JavaThread "Finalizer" daemon [_thread_blocked,
> id=6025]
>
>   0x0000002b2a76c6e0 JavaThread "Reference Handler" daemon [_thread_blocked,
> id=6024]
>
>   0x00000000401160c0 JavaThread "main" [_thread_in_native, id=6020]
>
>  
>
> Other Threads:
>
>   0x0000002b2a7682d0 VMThread [id=6023]
>
> Other Threads:
>
>   0x0000002b2a7682d0 VMThread [id=6023]
>
>   0x0000002b2a788b00 WatcherThread [id=6031]
>
>  
>
> VM state:not at safepoint (normal execution)
>
>  
>
> VM Mutex/Monitor currently owned by a thread: None
>
>  
>
> Heap
>
>  PSYoungGen      total 126976K, used 123816K [0x0000002b14d10000,
> 0x0000002b1f8a0000, 0x0000002b2a260000)
>
>   eden space 116672K, 97% used
> [0x0000002b14d10000,0x0000002b1bbea278,0x0000002b1bf00000)
>
>   from space 10304K, 100% used
> [0x0000002b1c070000,0x0000002b1ca80000,0x0000002b1ca80000)
>
>   to   space 29504K, 0% used
> [0x0000002b1dbd0000,0x0000002b1dbd0000,0x0000002b1f8a0000)
>
>  PSOldGen        total 349568K, used 17214K [0x0000002aea260000,
> 0x0000002aff7c0000, 0x0000002b14d10000)
>
>   object space 349568K, 4% used
> [0x0000002aea260000,0x0000002aeb32fa20,0x0000002aff7c0000)
>
>  PSPermGen       total 262144K, used 22207K [0x0000002ada260000,
> 0x0000002aea260000, 0x0000002aea260000)
>
>   object space 262144K, 8% used
> [0x0000002ada260000,0x0000002adb80ff30,0x0000002aea260000)
>
> Dynamic libraries:
>
> <SNIP>
>
> VM Arguments:
>
> jvm_args: -Djava.net.preferIPv4Stack=true -Xms512m -Xmx1024m
> -XX:PermSize=256m -XX:MaxPermSize=256m
> -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
> -Djava.util.logging.config.file=/usr/local/tomcat/conf/logging.properties
> -Djava.endorsed.dirs=/usr/local/tomcat/common/endorsed
> -Dcatalina.base=/usr/local/tomcat -Dcatalina.home=/usr/local/tomcat
> -Djava.io.tmpdir=/usr/local/tomcat/temp
>
> java_command: org.apache.catalina.startup.Bootstrap start
>
> Launcher Type: SUN_STANDARD
>
>  
>
> Environment Variables:
>
> JAVA_HOME=/usr/local/java
>
> CLASSPATH=:/usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/commons
> -logging-api.jar
>
> PATH=/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sb
> in:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin:/usr/local/java/bin:/usr/local/ant
> /bin:/usr/local/tomcat/bin:/root/bin
>
> LD_LIBRARY_PATH=/usr/local/jdk1.5.0_06/jre/lib/amd64/server:/usr/local/jdk1.
> 5.0_06/jre/lib/amd64:/usr/local/jdk1.5.0_06/jre/../lib/amd64
>
> SHELL=/bin/bash
>
>  
>
>  
>
> ---------------  S Y S T E M  ---------------
>
>  
>
> OS:CentOS release 4.3 (Final)
>
>  
>
> uname:Linux 2.6.9-34.ELsmp #1 SMP Thu Mar 9 06:23:23 GMT 2006 x86_64
>
> libc:glibc 2.3.4 NPTL 2.3.4
>
> rlimit: STACK 10240k, CORE 0k, NPROC 16383, NOFILE 1024, AS infinity
>
> load average:0.00 0.00 0.00
>
>  
>
> CPU:total 2 amd64 3dnow
>
>  
>
> Memory: 4k page, physical 2056428k(849824k free), swap 2040212k(2040212k
> free)
>
>  
>
> vm_info: Java HotSpot(TM) 64-Bit Server VM (1.5.0_06-b05) for linux-amd64,
> built on Nov 10 2005 11:45:12 by java_re with gcc 3.2.2 (SuSE Linux)
>
>  
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 20:15:40 2006
Return-Path: <java-user-return-21342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93155 invoked from network); 13 Jun 2006 20:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 20:15:39 -0000
Received: (qmail 87761 invoked by uid 500); 13 Jun 2006 20:15:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87553 invoked by uid 500); 13 Jun 2006 20:15:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87538 invoked by uid 99); 13 Jun 2006 20:15:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 13:15:28 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of devilsf@hotmail.com designates 64.4.61.87 as permitted sender)
Received: from [64.4.61.87] (HELO hotmail.com) (64.4.61.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 13:15:27 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 13 Jun 2006 13:15:07 -0700
Message-ID: <BAY102-DAV15E454676D370B16AF5BCBA88C0@phx.gbl>
Received: from 129.13.186.2 by BAY102-DAV15.phx.gbl with DAV;
	Tue, 13 Jun 2006 20:15:02 +0000
X-Originating-IP: [129.13.186.2]
X-Originating-Email: [devilsf@hotmail.com]
X-Sender: devilsf@hotmail.com
Reply-To: "Sergi Fernandez" <devilsf@hotmail.com>
From: "Sergi Fernandez" <devilsf@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Count occurrences of worths within a corpus.
Date: Tue, 13 Jun 2006 22:15:19 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003B_01C68F36.DAF7D9C0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-OriginalArrivalTime: 13 Jun 2006 20:15:07.0042 (UTC) FILETIME=[103A4020:01C68F26]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_003B_01C68F36.DAF7D9C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi there,=20

I'm new in Lucene, and I just know to index a corpus, and run a query. I =
thought I can count the times that a word appears in the whole corpus =
with a simple query, but it seems to be not so easy. Somebody knows how =
to do it?=20

Many Thanks!

Sergi Fernandez.
------=_NextPart_000_003B_01C68F36.DAF7D9C0--

From java-user-return-21343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 20:26:18 2006
Return-Path: <java-user-return-21343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4420 invoked from network); 13 Jun 2006 20:26:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 20:26:18 -0000
Received: (qmail 7621 invoked by uid 500); 13 Jun 2006 20:26:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7591 invoked by uid 500); 13 Jun 2006 20:26:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7580 invoked by uid 99); 13 Jun 2006 20:26:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 13:26:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 13:26:11 -0700
Received: by ug-out-1314.google.com with SMTP id u2so3348533uge
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 13:25:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QvV7QckqOnl5XA3CRHUpNviWnuCuVNk7IoBmTs+fZMplJZoC2BIxoXjo5zj1MC3kxE4xVAr1lfH63HijW5Tf37qeWQPeV02nQR8h9KC263OCZxoLYp/6/k3qDNWqoO5MjFOFpYSTkUcB/a7COei2rRMHX67SaZ+M+XqqlCOipis=
Received: by 10.78.136.2 with SMTP id j2mr347724hud;
        Tue, 13 Jun 2006 13:25:49 -0700 (PDT)
Received: by 10.78.68.9 with HTTP; Tue, 13 Jun 2006 13:25:49 -0700 (PDT)
Message-ID: <27bc81750606131325g2e708819x1a704df5a0acee83@mail.gmail.com>
Date: Tue, 13 Jun 2006 17:25:49 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene usage
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_481_22677965.1150230349800"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_481_22677965.1150230349800
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all.

I'm writting a wrapper component around Lucene (using Avalon) and I'd like
to know the common api usage.

How should I bootstrap the index? Should I create the IndexSearcher when I
initialize the component?
For how long should I let the IndexWriter open? For one document: should I
create the writer, add the document and close it?

-- 
Leandro Rodrigo Saad Cruz
CTO - InterBusiness Technologies
db.apache.org/ojb
guara-framework.sf.net
xingu.sf.net

------=_Part_481_22677965.1150230349800--

From java-user-return-21344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 21:16:04 2006
Return-Path: <java-user-return-21344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9232 invoked from network); 13 Jun 2006 21:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 21:16:04 -0000
Received: (qmail 68853 invoked by uid 500); 13 Jun 2006 21:15:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65926 invoked by uid 500); 13 Jun 2006 21:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63243 invoked by uid 99); 13 Jun 2006 21:14:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:14:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 13:47:32 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15475DB7@mailer.syr.edu>; Tue, 13 Jun 2006 16:47:11 -0400
Message-ID: <448F244F.5060208@syr.edu>
Date: Tue, 13 Jun 2006 16:47:11 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Count occurrences of worths within a corpus.
References: <BAY102-DAV15E454676D370B16AF5BCBA88C0@phx.gbl>
In-Reply-To: <BAY102-DAV15E454676D370B16AF5BCBA88C0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Sergi,

Take a look at TermEnum and TermDocs in the API.  You will have to 
iterate over these, summing as you go.

You could also, during indexing, store these counts external to Lucene 
as you come across the term during the Analysis phase.

Sergi Fernandez wrote:
> Hi there, 
>
> I'm new in Lucene, and I just know to index a corpus, and run a query. I thought I can count the times that a word appears in the whole corpus with a simple query, but it seems to be not so easy. Somebody knows how to do it? 
>
> Many Thanks!
>
> Sergi Fernandez.
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 21:50:18 2006
Return-Path: <java-user-return-21345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77218 invoked from network); 13 Jun 2006 21:50:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 21:50:17 -0000
Received: (qmail 35868 invoked by uid 500); 13 Jun 2006 21:50:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35354 invoked by uid 500); 13 Jun 2006 21:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35343 invoked by uid 99); 13 Jun 2006 21:50:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:50:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 14:50:10 -0700
Received: by py-out-1112.google.com with SMTP id i75so2053391pye
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 14:49:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=B0siOGDLnqPxoZtLc7Tt50icnSBMInT18R8IaRQrfxrmftbCL1ffn2ee97JyzzjbndUQG7zKU4/dqQySHrLzDATc3hXgymaHkcaWpm3TnXWOjVtKTmU22RYVSRYJHNo0ZIFF+a8Ij7MGt5bEInCCXEqP1h4FCJbGzeKgCKkjKO0=
Received: by 10.35.89.10 with SMTP id r10mr3561088pyl;
        Tue, 13 Jun 2006 14:49:49 -0700 (PDT)
Received: from ?172.24.51.72? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id i70sm94885pye.2006.06.13.14.49.49;
        Tue, 13 Jun 2006 14:49:49 -0700 (PDT)
Message-ID: <448F32FC.1050201@gmail.com>
Date: Tue, 13 Jun 2006 16:49:48 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: JVM Crash
References: <002d01c68f1c$614cfed0$0a01a8c0@commerceross>
In-Reply-To: <002d01c68f1c$614cfed0$0a01a8c0@commerceross>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ross Rankin wrote:
> We keep getting JVM crashes on 1.4.3.  I found in the archive that setting a
> JVM parameter solved the problem for a few users.  We've tried that and it
> has not worked.  Here's our JVM parameters:


Why not try a new JVM?

Either a newer sun... or a JDK, or a blackdown...

In our experience, JVM crashes are usually caused by a bad JVM.

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 22:02:10 2006
Return-Path: <java-user-return-21346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4578 invoked from network); 13 Jun 2006 22:02:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 22:02:10 -0000
Received: (qmail 56324 invoked by uid 500); 13 Jun 2006 22:02:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56166 invoked by uid 500); 13 Jun 2006 22:02:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56153 invoked by uid 99); 13 Jun 2006 22:02:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 15:02:03 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.160.149.192] (HELO kitsite.com) (66.160.149.192)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Jun 2006 15:02:01 -0700
Received: from 84.235.130.50 ([84.235.130.50]) by kitsite.com for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 15:01:37 -0700
Message-ID: <448F35BE.3040809@kitsite.com>
Date: Tue, 13 Jun 2006 23:01:34 +0100
From: kieran <kieran@kitsite.com>
Reply-To:  kieran@kitsite.com
Organization: Kitsite
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: JVM Crash
References: <002d01c68f1c$614cfed0$0a01a8c0@commerceross> <448F32FC.1050201@gmail.com>
In-Reply-To: <448F32FC.1050201@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It may well be to do with this Hotspot bug:

http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6407471

Note, the bug only appears when you invoke java with the "-server" 
command line option.

Kieran




Dan Armbrust wrote:
> Ross Rankin wrote:
>> We keep getting JVM crashes on 1.4.3.  I found in the archive that 
>> setting a
>> JVM parameter solved the problem for a few users.  We've tried that 
>> and it
>> has not worked.  Here's our JVM parameters:
>
>
> Why not try a new JVM?
>
> Either a newer sun... or a JDK, or a blackdown...
>
> In our experience, JVM crashes are usually caused by a bad JVM.
>
> Dan
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 23:24:15 2006
Return-Path: <java-user-return-21347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30125 invoked from network); 13 Jun 2006 23:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 23:24:15 -0000
Received: (qmail 44294 invoked by uid 500); 13 Jun 2006 23:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43428 invoked by uid 500); 13 Jun 2006 23:24:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43416 invoked by uid 99); 13 Jun 2006 23:24:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:24:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of escordeiro@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO nz-out-0102.google.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:24:08 -0700
Received: by nz-out-0102.google.com with SMTP id 13so1527912nzp
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 16:23:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=bNlpW0VdbZJsQeihRekkGzhBALM+GzMXlV3D8ScFbWFCRd6cA35i+Bm2uYZXXJjnNrxgkLJoe8GHtTOE1VPLvTKY/50IwgcL/DPT39pOPNWZ4QDIhKtRUkgF3WEe8ivivtw9yN/pMdEZTI8GzoZ95xnAqB3kltNa4IZxiOI0apo=
Received: by 10.36.33.3 with SMTP id g3mr5756nzg;
        Tue, 13 Jun 2006 16:23:47 -0700 (PDT)
Received: by 10.37.12.26 with HTTP; Tue, 13 Jun 2006 16:23:47 -0700 (PDT)
Message-ID: <f6d98ade0606131623n58aa21c5oa1c5f10f59fb4e94@mail.gmail.com>
Date: Tue, 13 Jun 2006 20:23:47 -0300
From: "Eduardo S. Cordeiro" <escordeiro@gmail.com>
To: java-user@lucene.apache.org
Subject: Detecting index existance
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there,

I'm just starting up with Lucene after reading bits and pieces from
Gospodnetic and Hatcher's "Lucene in Action" (and noticing the API has
changed for 2.0.0).

My question is this: is there a way to detect whether or not the index
exists? I'm currently developing a web application that will use
Lucene for searching, but all indexable data will be entered by admin
users of this webapp, so there is no initial index. My hope is to be
able to create an empty one "on the fly" as it is first needed...is
this possible?

Thanks and regards,
Eduardo Cordeiro

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 23:35:52 2006
Return-Path: <java-user-return-21348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36606 invoked from network); 13 Jun 2006 23:35:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 23:35:52 -0000
Received: (qmail 65179 invoked by uid 500); 13 Jun 2006 23:35:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65147 invoked by uid 500); 13 Jun 2006 23:35:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65134 invoked by uid 99); 13 Jun 2006 23:35:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:35:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FROM_EXCESS_QP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.194.240.137] (HELO station174.com) (203.194.240.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:35:46 -0700
Received: (qmail 26724 invoked by uid 513); 13 Jun 2006 23:35:23 -0000
Message-ID: <20060613233523.30133.qmail@station174.com>
Reply-To: "=?iso-8859-1?Q?kent.fitch?=" <kent.fitch@projectcomputing.com>
From: "=?iso-8859-1?Q?kent.fitch?=" <kent.fitch@projectcomputing.com>
To: java-user@lucene.apache.org
Subject: Re: Detecting index existance
Date: Tue, 13 Jun 2006 23:35:23 +0000
MIME-Version: 1.0
X-Mailer: WebMail 2.5
X-Originating-IP: 131.236.1.5
X-Originating-Email: kent.fitch@projectcomputing.com
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Try IndexReader static method indexExists:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#indexExists(java.lang.String)

Kent Fitch  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 23:52:10 2006
Return-Path: <java-user-return-21349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44099 invoked from network); 13 Jun 2006 23:52:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 23:52:10 -0000
Received: (qmail 82419 invoked by uid 500); 13 Jun 2006 23:52:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81990 invoked by uid 500); 13 Jun 2006 23:52:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81979 invoked by uid 99); 13 Jun 2006 23:52:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:52:04 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO nz-out-0102.google.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:52:03 -0700
Received: by nz-out-0102.google.com with SMTP id 13so3017nzp
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 16:51:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j3CbMspi63hg6nCzATgfElRSbtXn+/BoOI7ndqE5B3i8F90FzVhpKg3LTK7SkcIdBmCeqg96XMoRZBI0xwLvgK39XWo0R4wM20484rgU4U9gHUymv2OzSr1VQ/oBa7IN3pFKCY4M0jBdQG+S9EgptcqfkkzVhsUwplCY3Kl7+20=
Received: by 10.37.22.35 with SMTP id z35mr46123nzi;
        Tue, 13 Jun 2006 16:51:43 -0700 (PDT)
Received: by 10.37.20.32 with HTTP; Tue, 13 Jun 2006 16:51:43 -0700 (PDT)
Message-ID: <359a92830606131651v5ce7223fs7724915bab65cd95@mail.gmail.com>
Date: Tue, 13 Jun 2006 19:51:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Detecting index existance
In-Reply-To: <f6d98ade0606131623n58aa21c5oa1c5f10f59fb4e94@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4722_18965498.1150242703120"
References: <f6d98ade0606131623n58aa21c5oa1c5f10f59fb4e94@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4722_18965498.1150242703120
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I just tried it (opening an IndexSearcher) and got this exception...

java.io.FileNotFoundException: C:\blank\segments (The system cannot find the
file specified)

The directory c:\blank exists, but is empty. So, it seems you can just catch
the exception and infer that your admin users aren't doing very well at
keeping up <G>. Or you could test for the existence of the sebments file
first, up to you.

Best
Erick

------=_Part_4722_18965498.1150242703120--

From java-user-return-21350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 13 23:54:00 2006
Return-Path: <java-user-return-21350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44620 invoked from network); 13 Jun 2006 23:53:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2006 23:53:59 -0000
Received: (qmail 86372 invoked by uid 500); 13 Jun 2006 23:53:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85824 invoked by uid 500); 13 Jun 2006 23:53:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85808 invoked by uid 99); 13 Jun 2006 23:53:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:53:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of askxuefeng@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 16:53:51 -0700
Received: by py-out-1112.google.com with SMTP id i75so2076048pye
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 16:53:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:in-reply-to:x-mimeole;
        b=K0knQhN4eYSDLXihYyFSgTMFO6JVUnlFfA2nvXcRaL+uG4ZwFaY2H/NOFKBDK770nQd9aP4E7AwUofADOpzALXlksEU0WhfWPuoGtIAsN4onryOQSlJmx/gRARPV6IYtoqaMLhPnsnuZv8iWS7PH4BLMMWrkOUuJG/f9C9Xi6FU=
Received: by 10.35.45.14 with SMTP id x14mr7728pyj;
        Tue, 13 Jun 2006 16:53:29 -0700 (PDT)
Received: from lymobile ( [222.35.80.112])
        by mx.gmail.com with ESMTP id w54sm35664pye.2006.06.13.16.53.13;
        Tue, 13 Jun 2006 16:53:18 -0700 (PDT)
From: "Liao Xuefeng" <askxuefeng@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Use one or more indexes?
Date: Wed, 14 Jun 2006 07:52:57 +0800
Message-ID: <000001c68f44$843a9e20$6500a8c0@lymobile>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcaO1K3+qsp6VI0wQbu9gXhNjGUq+wAboLwg
In-Reply-To: <6e3ae6310606121753t572f5623rd104671cfeabc05b@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi, I'm new to lucene.

Now I want to add full-text search for my website to search articles, images
and bbs topics. I'm not sure to use only one index to search all types of
these, or create 3 indexes for each of type.

If I use only one index, do I have to add a 'type' field to identify
document type? and how to filter the specified type?
If I use 3 indexes, is there more memory & cpu time cost?

Thanks in advance, for any help & suggestions.


Best regards,
  Xuefeng

Email: askxuefeng@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 01:07:20 2006
Return-Path: <java-user-return-21351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26186 invoked from network); 14 Jun 2006 01:07:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 01:07:20 -0000
Received: (qmail 42968 invoked by uid 500); 14 Jun 2006 01:07:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42932 invoked by uid 500); 14 Jun 2006 01:07:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42921 invoked by uid 99); 14 Jun 2006 01:07:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 18:07:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of escordeiro@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 18:07:13 -0700
Received: by nz-out-0102.google.com with SMTP id 13so13182nzp
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 18:06:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MRWavO+E188XljahV6ZJyXbGY0r8125gvDLXIHd/7+oUuP4lpiJYhIc8GYZRPW0cTq2gIw+NwJyxfa2aaUx0ipQ+zofvwaF55tXyTuzN+eUFFFQkx4+pMYOuw2Q/fstx7GH+djoBDlRcdB38L3O2+rGNAbwVsvbklFBQyXLHkdw=
Received: by 10.36.227.51 with SMTP id z51mr131966nzg;
        Tue, 13 Jun 2006 18:06:52 -0700 (PDT)
Received: by 10.37.12.26 with HTTP; Tue, 13 Jun 2006 18:06:52 -0700 (PDT)
Message-ID: <f6d98ade0606131806n13e32758k7f9523d456c47349@mail.gmail.com>
Date: Tue, 13 Jun 2006 22:06:52 -0300
From: "Eduardo S. Cordeiro" <escordeiro@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Detecting index existance
In-Reply-To: <359a92830606131651v5ce7223fs7724915bab65cd95@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f6d98ade0606131623n58aa21c5oa1c5f10f59fb4e94@mail.gmail.com>
	 <359a92830606131651v5ce7223fs7724915bab65cd95@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Kent's suggestion worked (in fact, I had looked for such a method in
other classes of the API -- forgot to look in IndexReader).

It works just as expected :)

Thanks again

On 6/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
> Well, I just tried it (opening an IndexSearcher) and got this exception...
>
> java.io.FileNotFoundException: C:\blank\segments (The system cannot find the
> file specified)
>
> The directory c:\blank exists, but is empty. So, it seems you can just catch
> the exception and infer that your admin users aren't doing very well at
> keeping up <G>. Or you could test for the existence of the sebments file
> first, up to you.
>
> Best
> Erick
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 02:49:42 2006
Return-Path: <java-user-return-21352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 661 invoked from network); 14 Jun 2006 02:49:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 02:49:41 -0000
Received: (qmail 17323 invoked by uid 500); 14 Jun 2006 02:49:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17298 invoked by uid 500); 14 Jun 2006 02:49:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17287 invoked by uid 99); 14 Jun 2006 02:49:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 19:49:35 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,MPART_ALT_DIFF,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of foxwu718@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 19:49:34 -0700
Received: by nf-out-0910.google.com with SMTP id p46so13737nfa
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 19:49:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Vt832PajDuZEMHfFRWuQAkqMX8dRmc4ugQdClMLQPV54vP5WgUksIqxcnD+YQO/KDhuResGknq6Hd/j1OWgaWD/I5rdt+kc3Frh23H+7Sx+4LatvSpFR7R9hb4ikQqEqJSmqrdaVFiJ+nSLjG3Jg+rskh17DfEz7ec8uFR8N3mY=
Received: by 10.48.240.2 with SMTP id n2mr129148nfh;
        Tue, 13 Jun 2006 19:49:13 -0700 (PDT)
Received: by 10.48.221.1 with HTTP; Tue, 13 Jun 2006 19:49:13 -0700 (PDT)
Message-ID: <9e7ba420606131949h90d4d8albcdc1bc003309412@mail.gmail.com>
Date: Wed, 14 Jun 2006 10:49:13 +0800
From: "wu fox" <foxwu718@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Use one or more indexes?
In-Reply-To: <000001c68f44$843a9e20$6500a8c0@lymobile>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90433_18383370.1150253353672"
References: <6e3ae6310606121753t572f5623rd104671cfeabc05b@mail.gmail.com>
	 <000001c68f44$843a9e20$6500a8c0@lymobile>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_90433_18383370.1150253353672
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

uOfDxzoKICDV4tKqv7TE47Tyy+PI57rO1+nWr8TjtcTL99L9wcsutuDL99L9tcTH6b/2z8Kx2NDr
0qq/vMLH0ru49rrPsqK1xM7KzOIKLLHIyOfE49KqsunV0sirzsS6zbHqzOK+zbHY0OvJ5rywtb3B
vbj2y/fS/bXEy9HL973hufssxMfDtMTjsLTV1cqyw7TAtLrPsqLE2D+7udPQLNfUvLq6z7KiveG5
+8rH0ru49tPetMC1xM/rt6gsxOOx2NDryMNsdWNlbmXM5sTjus+yoiwK1eLKx9PJ09rL47eotcTL
2bbIvva2qLXELtXiyse24Mv30v3X7tb30qq1xM7KzOIsyOe6zsilus+yorj3uPa31sf4tcS94bn7
LsjnufvKx7Wlt9bH+AostbHIu8Tjv8nS1LDRy/nT0M/gudi1xLarzve2vLfF1NrSu7j2ZG9jdW1l
bnTA7yzL0cv3ysfDu9PQzsrM4rXELMTRtsjU2tPaIrj80MIiLGx1Y2VuZcrHw7vT0Lj80MKy2df3
tcQsy/u74c/Iyb6z/WRvYyzU2dbYz9bM7bzTLMjnuftkb2PA77HIvc+4tNTTtcS7sMTjvs3Q6NKq
1tjQwsil1/a52NPa1eK49mRvY7XEy/fS/SzI57n7u7nJ5rywtb2z6cihyKvOxCwK1eK49rn9s8zQ
6NKqtcTKsbzkv8m+zbTzt6LByy6xyMjn08O7p9DeuMTBy9K7uPax6sziCizSqsO0yMPTw7untcjJ
z7DrzOy1yMTj1tjQwtf2zerL99L9LNei0uLV4sqxuvLL99L9yse808v4tcQstdq2/rj2yMvI57n7
1/a4/NDCtcS7sNa7xNzFxbbTLMjnufu4/NDCxrW3sbXEu7DE48n11sG7udDo0qq208HQu/rWxjvS
qsO0xOO4+NPDu6e3tbvY0ru49r3hufs6z7XNs9X91NrX9izIu7rz08O7p7eiz9a4/NDCveG5+7K7
xNzC7cnPs/bAtCwKy/u+zdKqwu7E7y7X3NauxOPSqrj5vt3E47XEyrW8ysfpv/bAtL72tqjExNK7
1ta3vbC4LNLyzqrE48zhuam1xNDFz6LMq8nZLM7S1rvE3Lj4xOPWuLP2wb3W1re9sLi1xNfutPPI
sbXjuanE47LOv7wK
------=_Part_90433_18383370.1150253353672--

From java-user-return-21353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 03:33:26 2006
Return-Path: <java-user-return-21353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10352 invoked from network); 14 Jun 2006 03:33:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 03:33:26 -0000
Received: (qmail 54978 invoked by uid 500); 14 Jun 2006 03:33:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54950 invoked by uid 500); 14 Jun 2006 03:33:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54938 invoked by uid 99); 14 Jun 2006 03:33:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 20:33:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jun 2006 20:33:20 -0700
Received: by wr-out-0506.google.com with SMTP id i34so29562wra
        for <java-user@lucene.apache.org>; Tue, 13 Jun 2006 20:32:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=U8Gl9PETTA9ZvAPMCQGxJjBgp89xt+hbNWFewlT0nz03FSmIJgCwd4uYphn6sNjGFelA8c40KnlimkI9rolyPeI+M1sW/nD3ChTYM1KR4GQh9q/ignAJihflpuwkUPB4uIY3SpmkBqT1j6kDNEWikKwyxeq3rwdTbbWsEfo1MJk=
Received: by 10.65.250.17 with SMTP id c17mr141245qbs;
        Tue, 13 Jun 2006 20:32:59 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Tue, 13 Jun 2006 20:32:59 -0700 (PDT)
Message-ID: <a36516400606132032yc25e423t7c89a7621578298a@mail.gmail.com>
Date: Wed, 14 Jun 2006 09:02:59 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting count on distinct values of a field.
In-Reply-To: <Pine.LNX.4.58.0606131038550.27086@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32798_16831395.1150255979453"
References: <a36516400606120506l130fe8d6r3b60a8e1e450bdee@mail.gmail.com>
	 <Pine.LNX.4.58.0606122356010.13650@hal.rescomp.berkeley.edu>
	 <a36516400606130133tb3d9acal70795cff6710d40a@mail.gmail.com>
	 <Pine.LNX.4.58.0606131038550.27086@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_32798_16831395.1150255979453
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am sorry for my stupid question. Thanks..... :-)

Regards,

On 6/13/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : But what if that word is present in other fields also.
> : does "docFreq " only look into that particular field ??
>
> docFreq tells you the frequency of a term, a term is a field and a value
> -- if you want the counts of a value across multiple fields, you'll have
> to add them up yourself.  (or make a field that contains the union of all
> the other fields)
>
> : > : From: vipin sharma <heritrix.lucene@gmail.com>
> : > : Reply-To: java-user@lucene.apache.org
> : > : To: java-user@lucene.apache.org
> : > : Subject: Getting count on distinct values of a field.
> : > :
> : > : Hi,
> : > : i am having problem in getting the count on distict values of a
> field.
> : > The
> : > : reason for getting this value is that, each of all documents in
> index
> : > : belongs to one predefined class and i want to get the number of
> : > documents
> : > : belonging to each class.
> : > :
> : > : Regards..
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32798_16831395.1150255979453--

From java-user-return-21354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 08:50:41 2006
Return-Path: <java-user-return-21354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72278 invoked from network); 14 Jun 2006 08:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 08:50:40 -0000
Received: (qmail 17876 invoked by uid 500); 14 Jun 2006 08:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17273 invoked by uid 500); 14 Jun 2006 08:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17262 invoked by uid 99); 14 Jun 2006 08:50:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 01:50:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 01:50:30 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id D707BA662C
	for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 11:50:08 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id BD809A662A; Wed, 14 Jun 2006 11:50:08 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from nemo.level7.local (nemo.intranet [10.0.0.8])
	by mail.datagroup.ro (Postfix) with ESMTP id B283BA6639
	for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 11:50:04 +0300 (EEST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using more than one index
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Wed, 14 Jun 2006 11:50:03 +0300
Message-ID: <7688DA376E992B408BEFBF22A9F7F618387BC0@nemo.intranet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using more than one index
thread-index: AcaPES+7NmGD4olpTY+/1T9KenWIdAAfi56A
From: "Mile Rosu" <mile.rosu@level7.ro>
To: <java-user@lucene.apache.org>
Cc: "Mircea Pop" <Mircea.Pop@level7.ro>
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 14062006 #188324, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.0 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello again,

Here  http://people.level7.ro/mile.rosu/small_index.zip are a couple of
documents in our index which might provide you a better overview of our
problem(both separated indexes and merged version).

Our problem remains with the date index - a date record has additional
fields used for date range searches which cannot be merged into one
index unfortunately - or at least we do not see a solution.=20

Thank you,
Mile

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: Tuesday, June 13, 2006 8:45 PM
To: java-user@lucene.apache.org
Cc: Mircea Pop
Subject: RE: Using more than one index

: A document (in our case an xml that has many metadata) can have more
: than one date, each date with 2 attributes:

: <date type=3D"document" art=3D"geburt">00-00-1886</date>
:
: In the date index I have for every <date> in the input xml a document
: with fields: type (document |other), date, art (birthday | deportation
|
: death...). For example if I merge all the dates that correspond to a
: document then the new type field will contain all the values. So if I

so make a seperate field for each type of date, lucene is very good at
supporting documents with heterogenous sets of fields -- and it's even
better if you use OMIT_NORMS (which makes perfect sense for a date field
where norm values are meaningless anyway)

: A couple of suggestions...
:
: 1) don't use multiple indexes.  create one index, with one document
per
: "thing" you want to return (in this case it sounds like books) and
index
: all of the relevent data about each thing in that doc.  If multiple
: people
: worked on a book, add all of their names to the same field.  addd all
of
: the dates to the book doc -- if you need to distibguish the differnet
: types of dates, make a seaprete field for each type.
:
: If you *must* cross refrence...
:
: 2) make sure you aren't useing the Hits API to iterate over all the
: results when gathering IDs -- use a lower level api (like a
: HitCollector)
:
: 3) use the FieldCache to get the IDs instead of he stored Document
: fields.
:
: 4) don't extract full ID lists from all of then indexes and then
search
: on one of the indexes again with the ID list ... use the ID lists
: generated from the supporting indexes (people and dates) to build a
: Filter
: that you can use when searching the main index.
:
:
:
: : Date: Mon, 12 Jun 2006 12:22:30 +0300
: : From: Mile Rosu <mile.rosu@level7.ro>
: : Reply-To: java-user@lucene.apache.org
: : To: java-user@lucene.apache.org
: : Subject: Using more than one index
: :
: : Hello,
: :
: : We have an application dealing with historical books. The books have
: : metadata consisting of event dates, and person names among others.
: : The FullText, Person and Date indexes were split until we realized
: that
: : for a larger number of documents (400K) the combination of the
: : sequential search hits took a way too long time to complete (15
min).
: : The date index was built using the suggestion found at:
: : http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
: (big
: : thanks for the hint)
: :
: : Is there a recommended approach to combining results from different
: : indexes (with different fields)?
: :
: : The indexes structure:
: : MainIndex:
: : 	Fields:
: :       	@ID@ - keyword (document id)
: : 		@FULLTEXT@ - tokenized (used for full text6 search)
: : 		Ptitle - tokenized (used for full text publication title
: : search)
: : 		Dtitle - tokenized (used for full text document title
: : search)
: : 		Type - keyword - (used for document type)
: :
: : PersonIndex:
: : 		@ID@ - keyword (document id =3D=3D mainIndex.@ID@)
: : 		Person - tokenized (full text person name search)
: : DateIndex:
: : 		@ID@ - keyword (document id =3D=3D mainIdex.@ID@)
: : 		Date - date as YYYYMMDD - keyword
: : 		Type - type of date (document date, birth day, etc...)
: : 		@YYYY@ - year of date
: : 		@YYYYMM@ - year and month of date
: : 		@DDD@ - decade
: : 		@CC@ - century of date
: :
: :
: : Eg:
: : If I want to search for documents that contain: person "John", full
: text
: : "book" and date: before 06/12/2005
: : Step 1:  search in personIndex for John - retrieve all @ID@ from the
: hit
: : list
: : Step 2: search in DateIndex for documents that have dates before
: : 06/12/2005 - retrieve id from the hit list
: : Step 3: search in mainIndex for "book" - retrieve all @ID@
: : Step 4: combine all the lists
: : Step 5: search mainIndex for documents with the @ID@ from the
combined
: : id list
: :
: : Each search takes less then 1 second, but retrieving @ID@ from the
: index
: : takes a lot more - the time increases by the number of hits. This is
: : because when retrieving a field value from a document hit, the
Lucene
: : engine loads all the fields from the index (the entire document). So
: if
: : in one search I get 300.000 hits cont, I have to iterate through all
: and
: : retrieve the @ID@ field value - this takes a lot of time.
: :
: : Regards,
: : Mile Rosu
: :
: :
---------------------------------------------------------------------
: : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: : For additional commands, e-mail: java-user-help@lucene.apache.org
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 09:33:40 2006
Return-Path: <java-user-return-21355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11489 invoked from network); 14 Jun 2006 09:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 09:33:39 -0000
Received: (qmail 84387 invoked by uid 500); 14 Jun 2006 09:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83339 invoked by uid 500); 14 Jun 2006 09:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83328 invoked by uid 99); 14 Jun 2006 09:33:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 02:33:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mails.adam@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 02:33:31 -0700
Received: by wr-out-0506.google.com with SMTP id 68so73777wri
        for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 02:33:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=tUN81K+3rI30/PINGp07iFQ5QJ+UvWqfnbe1l3c+kyy6lf8rUTLU9ExB/Iq6Rg9RpaDtnKr++OLcJmRR3CZ9mv2YNLL7/E7/elC/SPWu6RsjKRj1BX/q+BDGM3/xuQ8m9d+VP89FS3h8x61LxxpZElEwTi5j7aHoqJqFk+RyDas=
Received: by 10.54.101.13 with SMTP id y13mr431017wrb;
        Wed, 14 Jun 2006 02:33:11 -0700 (PDT)
Received: from ?192.168.1.27? ( [202.143.127.193])
        by mx.gmail.com with ESMTP id 12sm492470wrl.2006.06.14.02.33.10;
        Wed, 14 Jun 2006 02:33:10 -0700 (PDT)
Message-ID: <448FD7CA.40107@gmail.com>
Date: Wed, 14 Jun 2006 14:32:58 +0500
From: Adam Saeed <mails.adam@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: create index through db for System Admin
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How could we create index through database, in lucene as a System Admin 
point of view?

Thanks
Adam

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 09:39:44 2006
Return-Path: <java-user-return-21356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18423 invoked from network); 14 Jun 2006 09:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 09:39:44 -0000
Received: (qmail 91201 invoked by uid 500); 14 Jun 2006 09:39:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91171 invoked by uid 500); 14 Jun 2006 09:39:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91160 invoked by uid 99); 14 Jun 2006 09:39:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 02:39:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mails.adam@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 02:39:37 -0700
Received: by wr-out-0506.google.com with SMTP id i24so76067wra
        for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 02:39:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=iVfB2rUet3rkRDIWlIcDagPHnIzCiwxergwFLhvsD8hWDBJHwl6bDbNmiKSyK5210H8g0b3Yu3sZJOnxJQ7XPyu49J7lLVHHZlTv4tiJk1j7ITNneSMjy52rgrFVfVjbmItqTuXj5/lTJOhAc6zJADmLR3SEPXaLDovAfw+Xs2U=
Received: by 10.54.124.15 with SMTP id w15mr472873wrc;
        Wed, 14 Jun 2006 02:39:16 -0700 (PDT)
Received: from ?192.168.1.27? ( [202.143.127.193])
        by mx.gmail.com with ESMTP id 12sm498945wrl.2006.06.14.02.39.15;
        Wed, 14 Jun 2006 02:39:16 -0700 (PDT)
Message-ID: <448FD937.1080509@gmail.com>
Date: Wed, 14 Jun 2006 14:39:03 +0500
From: Adam Saeed <mails.adam@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: create index through db for System Admin
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How could we create index through database, in lucene as a System Admin
point of view, using PHP, MYSQL?

Thanks
Adam


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 10:08:09 2006
Return-Path: <java-user-return-21357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25937 invoked from network); 14 Jun 2006 10:08:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 10:08:08 -0000
Received: (qmail 38853 invoked by uid 500); 14 Jun 2006 10:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38829 invoked by uid 500); 14 Jun 2006 10:07:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38818 invoked by uid 99); 14 Jun 2006 10:07:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 03:07:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mails.adam@gmail.com designates 66.249.82.198 as permitted sender)
Received: from [66.249.82.198] (HELO wx-out-0102.google.com) (66.249.82.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 03:07:58 -0700
Received: by wx-out-0102.google.com with SMTP id s16so58911wxc
        for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 03:07:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n7Wte/d8UhAf+go4T3Yt1CcwPu2C6yle9meAP9PCWq9LaddwvSMWzwtvddoASbzSJDtfozJVEcSUzZIitd7Kqx62JwL3O97+gt6BjND9B0P8Bt1zWNuJZm1EiPpNmpTKLpRrV5VkLXQ/XZCzozDwygYjo5zOq1rlSqZjsQcFfqU=
Received: by 10.70.103.15 with SMTP id a15mr569472wxc;
        Wed, 14 Jun 2006 03:07:36 -0700 (PDT)
Received: by 10.70.96.1 with HTTP; Wed, 14 Jun 2006 03:07:36 -0700 (PDT)
Message-ID: <7808dd520606140307j5ae4d475tc7d51fd139fff412@mail.gmail.com>
Date: Wed, 14 Jun 2006 15:07:36 +0500
From: "Adam Adam" <mails.adam@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: create index through db for System Admin
In-Reply-To: <448FD937.1080509@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54684_28848346.1150279656151"
References: <448FD937.1080509@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_54684_28848346.1150279656151
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

---------- Forwarded message ----------
From: Adam Saeed <mails.adam@gmail.com>
Date: Jun 14, 2006 2:39 PM
Subject: create index through db for System Admin
To: java-user@lucene.apache.org

How could we create index through database, in lucene as a System Admin
point of view, using PHP, MYSQL?

Thanks
Adam



-- 
Regards

- Adam

------=_Part_54684_28848346.1150279656151--

From java-user-return-21358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 10:55:23 2006
Return-Path: <java-user-return-21358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80485 invoked from network); 14 Jun 2006 10:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 10:55:22 -0000
Received: (qmail 24604 invoked by uid 500); 14 Jun 2006 10:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24551 invoked by uid 500); 14 Jun 2006 10:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24534 invoked by uid 99); 14 Jun 2006 10:55:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 03:55:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 03:55:13 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout1-sn2.hy.skanova.net (7.2.072.1)
        id 448977B30010CA2F for java-user@lucene.apache.org; Wed, 14 Jun 2006 12:54:51 +0200
Subject: seeking directories
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
Content-Type: text/plain
Organization: snigel heavy industries
Date: Wed, 14 Jun 2006 12:54:43 +0200
Message-Id: <1150282483.25631.67.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How would I go about to seek to the stored value of a specific field of
a certain document? I would like to access the safe identity of my
documents without creating the document instance.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 14:00:54 2006
Return-Path: <java-user-return-21359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49410 invoked from network); 14 Jun 2006 14:00:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 14:00:53 -0000
Received: (qmail 39024 invoked by uid 500); 14 Jun 2006 14:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38875 invoked by uid 500); 14 Jun 2006 14:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38864 invoked by uid 99); 14 Jun 2006 14:00:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 07:00:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 07:00:44 -0700
Received: by nz-out-0102.google.com with SMTP id 13so131694nzp
        for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 07:00:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=twpChJq7/tDYLkhm4ZC5T7ji7q8LKgjFeL7D7HKUp67tqnF0wrNZvIJMdhA7ZSRoDB4AiMIGsxCrbEC5gpx0soczrTFeRWYgsQdoxanIjhlp50ECSno7earv2dTEHulInynRCMAZP20YIdBWLG19L+qQNPX48ZJ91g74DPF04Ak=
Received: by 10.36.222.66 with SMTP id u66mr1138721nzg;
        Wed, 14 Jun 2006 07:00:23 -0700 (PDT)
Received: by 10.37.22.59 with HTTP; Wed, 14 Jun 2006 07:00:23 -0700 (PDT)
Message-ID: <6e3ae6310606140700i687818bdyd098a9f4d5d6fceb@mail.gmail.com>
Date: Wed, 14 Jun 2006 07:00:23 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: create index through db for System Admin
In-Reply-To: <448FD937.1080509@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <448FD937.1080509@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I believe DBSight is a good alternative for you.

You use SQL to create index from MYSQL database, and use your php code
to send/receive http request to/from DBSight server, which is a J2EE.
But with jetty, you can simply do "java -jar start.jar".

BTW: The mailing list received 3 of your mails.

Chris
----------------------------
Instant Lucene Search on Any Databases/Applications
http://www.dbsight.net

On 6/14/06, Adam Saeed <mails.adam@gmail.com> wrote:
> How could we create index through database, in lucene as a System Admin
> point of view, using PHP, MYSQL?
>
> Thanks
> Adam
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 15:39:35 2006
Return-Path: <java-user-return-21360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89080 invoked from network); 14 Jun 2006 15:39:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 15:39:34 -0000
Received: (qmail 46383 invoked by uid 500); 14 Jun 2006 15:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46341 invoked by uid 500); 14 Jun 2006 15:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46330 invoked by uid 99); 14 Jun 2006 15:39:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 08:39:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 08:39:26 -0700
Received: by py-out-1112.google.com with SMTP id i75so2286538pye
        for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 08:39:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PxHXU+X3jeKOAh7QfapK8AFH0enjcqJcezcJuU2Kgx0LrY6MJCKtOwV1s8nrNph4kVmVysg0Wf39ZTo/xxZGDGJehEQ8auo+tvKmXVk6eS7s4r7ZwNu3sp39giP6t831QAqPd402BssROjXoRlaL8ZgeRNgkW/LAOgUNVqi8WU4=
Received: by 10.35.27.1 with SMTP id e1mr1265837pyj;
        Wed, 14 Jun 2006 08:39:06 -0700 (PDT)
Received: by 10.35.58.19 with HTTP; Wed, 14 Jun 2006 08:39:06 -0700 (PDT)
Message-ID: <e994873a0606140839x3e5c267ma0291f32939885e1@mail.gmail.com>
Date: Wed, 14 Jun 2006 11:39:06 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Aggregating category hits
In-Reply-To: <e994873a0606120943v2d5dc626pd84b3263884ca3fb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32373_6966104.1150299546300"
References: <0E1423F2-DD3C-424D-84D1-7ED0BB795F44@rectangular.com>
	 <20060529224417.26106.qmail@web60814.mail.yahoo.com>
	 <e994873a0606091110w683d4899s9987bed01d06582e@mail.gmail.com>
	 <c68e39170606101334u6be7f7fm2fe0f47bd57c4070@mail.gmail.com>
	 <e994873a0606120943v2d5dc626pd84b3263884ca3fb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_32373_6966104.1150299546300
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The performance results in my previous posting were based on an
implementation that performs 2 searches, one for getting 'Hits' and another
for getting the BitSet. I reimplemented this in one search using the code in
'SolrIndexSearcher.getDocListAndSetNC' and I'm now getting throughput of
350-375 qps.

This is great stuff Solr guys! I'd love to see the DocSet and DocList
features added to Lucene's IndexSearcher.

Peter

On 6/12/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> I'm seeing query throughput of approx. 290 qps with OpenBitSet vs. 270
> with BitSet. I had to reduce the max. HashDocSet size to 2K - 3K (from
> 10K-20K) to get optimal tradeoff.
>
> no. docs in index: 730,000
> average no. results returned: 40
> average response time: 50 msec (15-20 for counting facets)
> no. facets: 100 on every query
>
> I'm not using the Solr server as we have already developed an
> infrastructure.
>
> Peter
>
>
>
> On 6/10/06, Yonik Seeley <yseeley@gmail.com> wrote:
> >
> > On 6/9/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > However, my throughput testing shows that the Solr method is at least
> > 50%
> > > faster than mine. I'm seeing a big win with the use of the HashDocSet
> > for
> > > lower hit counts. On my 64-bit platform, a MAX_SIZE value of 10K-20K
> > seems
> > > to provide optimal performance.
> >
> > Interesting... how many documents are in your collection?
> > It would prob be nice to make the HashDocSet cutt-off dynamic rather
> > than fixed.
> > Are you using Solr, or just some of it's code?
> >
> > >  I'm looking forward to trying this with
> > > OpenBitSet.
> >
> > I checked in the OpenBitSet changes today.  I imagine this will lower
> > the optimal max HashDocSet size for performance a little.  You might
> > not see much performance improvement if most of the intersections
> > involved a HashDocSet... the OpenBitSet improvements only kick in with
> > bitset<->bitset intersection counts.
> >
> > -Yonik
> > http://incubator.apache.org/solr Solr, the open-source Lucene search
> > server
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_32373_6966104.1150299546300--

From java-user-return-21361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 15:42:04 2006
Return-Path: <java-user-return-21361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92541 invoked from network); 14 Jun 2006 15:42:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 15:42:04 -0000
Received: (qmail 50548 invoked by uid 500); 14 Jun 2006 15:41:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50512 invoked by uid 500); 14 Jun 2006 15:41:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50500 invoked by uid 99); 14 Jun 2006 15:41:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 08:41:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 08:41:52 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 14 Jun 2006 11:41:32 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 14 Jun 2006 11:41:32 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Use one or more indexes?
Date: Wed, 14 Jun 2006 11:46:00 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81127EE752@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Use one or more indexes?
Thread-Index: AcaO1K3+qsp6VI0wQbu9gXhNjGUq+wAboLwgACGCrRA=
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Jun 2006 15:41:32.0022 (UTC) FILETIME=[0286B960:01C68FC9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a question in regards to the same topic:

If I have three different database queries, should I just create a
separate index for each query?

Or should I just add all the results I get back from each of the query
into one big index.  Will there be any issues with documents having
different number of fields, documents that don't have a particular
field, etc??

Thanks,

Van

-----Original Message-----
From: Liao Xuefeng [mailto:askxuefeng@gmail.com]=20
Sent: Tuesday, June 13, 2006 4:53 PM
To: java-user@lucene.apache.org
Subject: Use one or more indexes?

hi, I'm new to lucene.

Now I want to add full-text search for my website to search articles,
images
and bbs topics. I'm not sure to use only one index to search all types
of
these, or create 3 indexes for each of type.

If I use only one index, do I have to add a 'type' field to identify
document type? and how to filter the specified type?
If I use 3 indexes, is there more memory & cpu time cost?

Thanks in advance, for any help & suggestions.


Best regards,
  Xuefeng

Email: askxuefeng@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 15:46:03 2006
Return-Path: <java-user-return-21362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96232 invoked from network); 14 Jun 2006 15:46:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 15:46:02 -0000
Received: (qmail 66179 invoked by uid 500); 14 Jun 2006 15:45:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66122 invoked by uid 500); 14 Jun 2006 15:45:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66086 invoked by uid 99); 14 Jun 2006 15:45:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 08:45:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 08:45:44 -0700
Received: by py-out-1112.google.com with SMTP id i75so2288413pye
        for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 08:45:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PeQl1dnSdqoB7ROrJDNKEdhpRW1j4Ntc9PBjwz2d87mmvMZEFKaS5+kDHhEBT223GQKEgV5N+S2nvS0ULcv1xYls1/p9IV37kYXJRO99IV2l9nnqASHx7gVe1DV/Vp/qCka+aeuHl4qvghtYmHZPyqktc+PLL8THFpHgZKrzT9E=
Received: by 10.35.18.18 with SMTP id v18mr1246718pyi;
        Wed, 14 Jun 2006 08:45:23 -0700 (PDT)
Received: by 10.35.30.11 with HTTP; Wed, 14 Jun 2006 08:45:23 -0700 (PDT)
Message-ID: <8e7e4d020606140845g69ef4f34q48d9b0f92770f53c@mail.gmail.com>
Date: Wed, 14 Jun 2006 23:45:23 +0800
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Use one or more indexes?
In-Reply-To: <000001c68f44$843a9e20$6500a8c0@lymobile>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14023_11350204.1150299923014"
References: <6e3ae6310606121753t572f5623rd104671cfeabc05b@mail.gmail.com>
	 <000001c68f44$843a9e20$6500a8c0@lymobile>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14023_11350204.1150299923014
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What's search engine?
There's an inverted index table.

Key----> Document

Only key, the document will be anything you like.

You can use different key for different document.

Lucene is not relational database, no column. Different document may have
different fields.

Another thing you must know is that Lucene is a tool kit, you have to use it
to implment your application.
You can never user Lucene to finish any task without any your own efforts.

On 6/14/06, Liao Xuefeng <askxuefeng@gmail.com> wrote:
>
> hi, I'm new to lucene.
>
> Now I want to add full-text search for my website to search articles,
> images
> and bbs topics. I'm not sure to use only one index to search all types of
> these, or create 3 indexes for each of type.
>
> If I use only one index, do I have to add a 'type' field to identify
> document type? and how to filter the specified type?
> If I use 3 indexes, is there more memory & cpu time cost?
>
> Thanks in advance, for any help & suggestions.
>
>
> Best regards,
>   Xuefeng
>
> Email: askxuefeng@gmail.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
Yueyu Lin

------=_Part_14023_11350204.1150299923014--

From java-user-return-21363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 18:11:56 2006
Return-Path: <java-user-return-21363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90615 invoked from network); 14 Jun 2006 18:11:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 18:11:56 -0000
Received: (qmail 39638 invoked by uid 500); 14 Jun 2006 18:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38878 invoked by uid 500); 14 Jun 2006 18:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 35311 invoked by uid 99); 14 Jun 2006 18:07:24 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=cEf6/92Y5hbCBtNaxSJOeq5fh3PMy4AgkCKAuxm0FgpRZJhcFU1rsSu8GVuzacCjxcgvhRI/8Wn7RpL2WgGf7r7HGTJisS3+mudtE8f39xwTGf5ZfXzOWWh2NjdB/UQ8bJ7nb8zBD6WkL5e3UZsXEdTSi4YpmjhNUNFJBF6io/Y=  ;
Message-ID: <20060614180701.77315.qmail@web30214.mail.mud.yahoo.com>
Date: Wed, 14 Jun 2006 11:07:01 -0700 (PDT)
From: Joe Amstadt <tekkacon@yahoo.com>
Subject: MultiFieldQueryParser Search On C++ problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm trying to do a search on ( Java PHP C++ ) with
lucene 1.9.  I am using a MultiFieldQueryParser to
parse with StandardAnalyzer. Before I parse the string
I clean up the search string and it looks like this (
Java PHP C\+\+ ).  The query is only searching on "c"
and not "c++" any ideas as to what I am doing wrong at
this point would be great.

MultiFieldQueryParser mfqp = new
MultiFieldQueryParser( str_arr_fields, analyzer );

try{

	System.out.println( "String Before Clean Up --> " +
str_search_value );
	String str_clean_search = stringCleanUp(
str_search_value );				//Escape these special chars +
- && || ! ( ) { } [ ] ^ " ~ * ? : \ 
	System.out.println( "String After Clean Up --> " +
str_clean_search);
	Query query = mfqp.parse( str_clean_search );
	System.out.println( "Search Query --> " +
query.toString() );
	bq_query.add( query, BooleanClause.Occur.MUST );

}catch( ParseException pe_error ){
										
	pe_error.printStackTrace();
}

output:

String Before Clean Up --> Java PHP C++
String After Clean Up --> Java PHP C\+\+
Search Query --> ( search_text:java title:java ) (
search_text:php title:php ) ( search_text:c title:c )

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 20:55:18 2006
Return-Path: <java-user-return-21364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64417 invoked from network); 14 Jun 2006 20:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 20:55:18 -0000
Received: (qmail 38107 invoked by uid 500); 14 Jun 2006 20:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38074 invoked by uid 500); 14 Jun 2006 20:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38063 invoked by uid 99); 14 Jun 2006 20:55:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 13:55:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kkinder@gmail.com designates 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO nz-out-0102.google.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 13:55:10 -0700
Received: by nz-out-0102.google.com with SMTP id 13so230304nzp
        for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 13:54:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Zdn5Ux80i59MVdt/sKc5IqcQd5BahdLuBVE/AjZ1qGhDKkkyq2cIcCmldEIjLiYkjvzRdB/iBKtirPo7GzmvcFqr/Mfi9uIzaURmGS5H9grvhGReJIP2kZZFSzJH6cOs+Hx6WIEyS69TBqLQf9ffZlbocqhfwAOIKJ5puVxAjKE=
Received: by 10.36.138.3 with SMTP id l3mr1695184nzd;
        Wed, 14 Jun 2006 13:54:49 -0700 (PDT)
Received: by 10.36.108.20 with HTTP; Wed, 14 Jun 2006 13:54:49 -0700 (PDT)
Message-ID: <2295ce5d0606141354s2e94028fj268d63c73238abf6@mail.gmail.com>
Date: Wed, 14 Jun 2006 14:54:49 -0600
From: "Ken Kinder" <kkinder@gmail.com>
To: java-user@lucene.apache.org
Subject: Out-of-order distinct
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've poked around on google and the archives quite a bite, but I can't
find exactly what I need. Say I have a query that would normally
return a set of documents:

1 002 (text...)
2 001 (text...)
3 001 (text...)
4 002 (text...)
5 004 (text...)

I'd like that modified to be:

1 002 (text...)
2 001 (text...)
5 004 (text...)

So the ordering is the same, but I only want the first 001 in the
result set -- skip all the rest.

Does this make sense? Is there a way to do it?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 14 23:17:34 2006
Return-Path: <java-user-return-21365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95421 invoked from network); 14 Jun 2006 23:17:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2006 23:17:34 -0000
Received: (qmail 21184 invoked by uid 500); 14 Jun 2006 23:17:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20090 invoked by uid 500); 14 Jun 2006 23:17:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20078 invoked by uid 99); 14 Jun 2006 23:17:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 16:17:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 16:17:26 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.154807DD@mailer.syr.edu>; Wed, 14 Jun 2006 19:17:05 -0400
Message-ID: <449098F1.9050204@syr.edu>
Date: Wed, 14 Jun 2006 19:17:05 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Out-of-order distinct
References: <2295ce5d0606141354s2e94028fj268d63c73238abf6@mail.gmail.com>
In-Reply-To: <2295ce5d0606141354s2e94028fj268d63c73238abf6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could implement your own HitCollector interface and remove lower 
scoring duplicates as you come across them by using a Map or something 
to keep track as you go.

Ken Kinder wrote:
> I've poked around on google and the archives quite a bite, but I can't
> find exactly what I need. Say I have a query that would normally
> return a set of documents:
>
> 1 002 (text...)
> 2 001 (text...)
> 3 001 (text...)
> 4 002 (text...)
> 5 004 (text...)
>
> I'd like that modified to be:
>
> 1 002 (text...)
> 2 001 (text...)
> 5 004 (text...)
>
> So the ordering is the same, but I only want the first 001 in the
> result set -- skip all the rest.
>
> Does this make sense? Is there a way to do it?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 06:27:56 2006
Return-Path: <java-user-return-21366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18255 invoked from network); 15 Jun 2006 06:27:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 06:27:56 -0000
Received: (qmail 40034 invoked by uid 500); 15 Jun 2006 06:27:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40003 invoked by uid 500); 15 Jun 2006 06:27:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39988 invoked by uid 99); 15 Jun 2006 06:27:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 23:27:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jun 2006 23:27:47 -0700
Received: by nf-out-0910.google.com with SMTP id p46so191374nfa
        for <java-user@lucene.apache.org>; Wed, 14 Jun 2006 23:27:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tLS4DnY2m+2ypmMKCFzqeSamsVZUjkvwMrwViaeB6AWIg1IKxgWQD7sPvAr87valH35Mgxfz2O2sHlJgzZvHA3ELr8qmFkcPOfwQyYhMT5kRvVd5i1O2eWuR8SOsu3h+lC4Z3UuNYK/dkOrkuYDh/EeRcQwyiNP73A/SsBeEk8A=
Received: by 10.48.242.19 with SMTP id p19mr1057243nfh;
        Wed, 14 Jun 2006 23:27:24 -0700 (PDT)
Received: by 10.49.39.19 with HTTP; Wed, 14 Jun 2006 23:27:24 -0700 (PDT)
Message-ID: <8837fb770606142327j1f0789eax2006392bcd6dfb73@mail.gmail.com>
Date: Wed, 14 Jun 2006 23:27:24 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Browse Functionality
In-Reply-To: <4727704.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3679_5140908.1150352844733"
References: <4727704.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3679_5140908.1150352844733
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Check out:

www.browseengine.com

written in Java builds on Lucene.

-John

On 6/5/06, muraalee <muraalee@gmail.com> wrote:
>
>
> Hi ,
> I am looking at exposing a "Browse" like functionality using lucene.
> Assume
> this scenario, a user Browses a Field ( Untokenized one like Book Title )
> and he sees a list of "terms" [Book titles ] and their associated doc Hits
> (
> Number of articles / documents this term appears in ). I believe this can
> be
> done bit straightforward.
>
>
>
> Here is the twist.  Since all the users don't have access to all the
> Books,
> basically i want to bind the "terms" by a Filter which ensures that they
> see
> only the "terms" that belongs to their subscribed "books".  For search, i
> have modelled the above functionality using "QueryFilter", where i "OR"
> the
> query, with the list of Books.
>
>
> Is there an elegant way to attack this one ? Appreciate your inputs.
>
> thanks
> ~Murali
>
>
> --
> View this message in context:
> http://www.nabble.com/Browse-Functionality-t1739829.html#a4727704
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>

------=_Part_3679_5140908.1150352844733--

From java-user-return-21367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 09:26:24 2006
Return-Path: <java-user-return-21367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26784 invoked from network); 15 Jun 2006 09:26:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 09:26:24 -0000
Received: (qmail 85626 invoked by uid 500); 15 Jun 2006 09:26:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85570 invoked by uid 500); 15 Jun 2006 09:26:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85558 invoked by uid 99); 15 Jun 2006 09:26:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 02:26:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.129.80.238] (HELO mail.dcivision.com) (203.129.80.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 02:26:17 -0700
Received: from DH08FerdinandC (unknown [218.189.137.162])
	by mail.dcivision.com (Postfix) with ESMTP id 514D639C070
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 17:37:05 +0800 (HKT)
From: "Ferdinand Chan" <ferdinand.chan@dcivision.com>
To: <java-user@lucene.apache.org>
Subject: Questions on Query Scorer
Date: Thu, 15 Jun 2006 17:25:50 +0800
Message-ID: <025401c6905d$b1745fb0$6f00a8c0@DH08FerdinandC>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0255_01C690A0.BF979FB0"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaQXbEs0Y2qOd4jQXmtB6ZTIdHkLA==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0255_01C690A0.BF979FB0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

How can I create a QueryScorer in Lucene 2.0???

 

When I create a QueryScorer using the following codes,

 

BooleanQuery booleanQuery = new BooleanQuery();

booleanQuery.add(q1,BooleanClause.Occur.SHOULD);

booleanQuery.add(q2,BooleanClause.Occur.SHOULD);

 

QueryScorer scorer = new QueryScorer(booleanQuery);

 

It compiles successfully but throws a runtime exception when I execute the
code.

 

java.lang.NoSuchFieldError: prohibited

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTermsFromBooleanQue
ry(QueryTermExtractor.java:91)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtr
actor.java:66)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtr
actor.java:59)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtr
actor.java:45)

        at
org.apache.lucene.search.highlight.QueryScorer.<init>(QueryScorer.java:48)

 

Can anyone suggest a solution to this problem?

 

Thanks

 

Ferdinand

 


------=_NextPart_000_0255_01C690A0.BF979FB0--



From java-user-return-21368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 09:27:01 2006
Return-Path: <java-user-return-21368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27035 invoked from network); 15 Jun 2006 09:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 09:27:01 -0000
Received: (qmail 87515 invoked by uid 500); 15 Jun 2006 09:26:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87493 invoked by uid 500); 15 Jun 2006 09:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87482 invoked by uid 99); 15 Jun 2006 09:26:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 02:26:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.129.80.238] (HELO mail.dcivision.com) (203.129.80.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 02:26:53 -0700
Received: from DH08FerdinandC (unknown [218.189.137.162])
	by mail.dcivision.com (Postfix) with ESMTP id 1470839C070
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 17:37:42 +0800 (HKT)
From: "Ferdinand Chan" <ferdinand.chan@dcivision.com>
To: <java-user@lucene.apache.org>
Subject: Question on MutliFieldQueryParser
Date: Thu, 15 Jun 2006 17:26:27 +0800
Message-ID: <025901c6905d$c7632680$6f00a8c0@DH08FerdinandC>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_025A_01C690A0.D5866680"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaQXccxfeODlv9YQGiKjVOodBw6CQ==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_025A_01C690A0.D5866680
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

My webapp is developed with Lucene 1.4.3 and I want to upgrade the Lucene
library to version 2.0

 

But in Lucene 2.0, the MultiFieldQueryParser class was deprecated. 

 

I try to rewrite the code using a BooleanQuery as follows.

 

Original code:

 

String[] fields = {"TERM_A","TERM_B"};

query6 = MultiFieldQueryParser.parse(keyword,fields,analyzer);

 

Rewritten code:

 

QueryParser qp = new QueryParser("TERM_A",new StandardAnalyzer());

Query q1 = qp.parse(keyword);

 

qp = new QueryParser("TERM_B",new StandardAnalyzer());

Query q2 = qp.parse(keyword);

 

BooleanQuery booleanQuery = new BooleanQuery();

booleanQuery.add(q1,BooleanClause.Occur.SHOULD);

booleanQuery.add(q2,BooleanClause.Occur.SHOULD);

query6 = booleanQuery;

 

Is this correct???

 

Thanks

 

Ferdinand

 


------=_NextPart_000_025A_01C690A0.D5866680--



From java-user-return-21369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 09:44:19 2006
Return-Path: <java-user-return-21369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30911 invoked from network); 15 Jun 2006 09:44:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 09:44:18 -0000
Received: (qmail 18062 invoked by uid 500); 15 Jun 2006 09:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18027 invoked by uid 500); 15 Jun 2006 09:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18016 invoked by uid 99); 15 Jun 2006 09:44:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 02:44:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 02:44:10 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id 84A67A662A
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 12:43:44 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id 6F489A6639; Thu, 15 Jun 2006 12:43:44 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from nemo.level7.local (nemo.intranet [10.0.0.8])
	by mail.datagroup.ro (Postfix) with ESMTP id C8AC5A662A
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 12:43:37 +0300 (EEST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Questions on Query Scorer
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Thu, 15 Jun 2006 12:43:36 +0300
Message-ID: <7688DA376E992B408BEFBF22A9F7F618387C8E@nemo.intranet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Questions on Query Scorer
thread-index: AcaQXbEs0Y2qOd4jQXmtB6ZTIdHkLAAAgIUw
From: "Mile Rosu" <mile.rosu@level7.ro>
To: <java-user@lucene.apache.org>
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 15062006 #188643, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.1 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

The problem may be rather in the name of the field you are querying -
"prohibited" in your case.=20
You can check with Luke(http://www.getopt.org/luke/) the structure of
the index on which you are performing your query.

Mile

-----Original Message-----
From: Ferdinand Chan [mailto:ferdinand.chan@dcivision.com]=20
Sent: Thursday, June 15, 2006 12:26 PM
To: java-user@lucene.apache.org
Subject: Questions on Query Scorer

How can I create a QueryScorer in Lucene 2.0???

=20

When I create a QueryScorer using the following codes,

=20

BooleanQuery booleanQuery =3D new BooleanQuery();

booleanQuery.add(q1,BooleanClause.Occur.SHOULD);

booleanQuery.add(q2,BooleanClause.Occur.SHOULD);

=20

QueryScorer scorer =3D new QueryScorer(booleanQuery);

=20

It compiles successfully but throws a runtime exception when I execute
the
code.

=20

java.lang.NoSuchFieldError: prohibited

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTermsFromBoolea
nQue
ry(QueryTermExtractor.java:91)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTerm
Extr
actor.java:66)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTerm
Extr
actor.java:59)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTerm
Extr
actor.java:45)

        at
org.apache.lucene.search.highlight.QueryScorer.<init>(QueryScorer.java:4
8)

=20

Can anyone suggest a solution to this problem?

=20

Thanks

=20

Ferdinand

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 10:08:14 2006
Return-Path: <java-user-return-21370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63819 invoked from network); 15 Jun 2006 10:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 10:08:14 -0000
Received: (qmail 44759 invoked by uid 500); 15 Jun 2006 10:08:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44664 invoked by uid 500); 15 Jun 2006 10:08:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44626 invoked by uid 99); 15 Jun 2006 10:08:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 03:08:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.129.80.238] (HELO mail.dcivision.com) (203.129.80.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 03:08:01 -0700
Received: from DH08FerdinandC (unknown [218.189.137.162])
	by mail.dcivision.com (Postfix) with ESMTP id 88CAA39C070
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 18:18:49 +0800 (HKT)
From: "Ferdinand Chan" <ferdinand.chan@dcivision.com>
To: <java-user@lucene.apache.org>
Subject: RE: Questions on Query Scorer
Date: Thu, 15 Jun 2006 18:07:34 +0800
Message-ID: <026701c69063$85c99320$6f00a8c0@DH08FerdinandC>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaQXbEs0Y2qOd4jQXmtB6ZTIdHkLAAAgIUwAADtb1A=
In-Reply-To: <7688DA376E992B408BEFBF22A9F7F618387C8E@nemo.intranet>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Mile,

But in my code, I haven't query the term prohibited. Also, in my index,
there isn't a field called prohibited

-----Original Message-----
From: Mile Rosu [mailto:mile.rosu@level7.ro] 
Sent: Thursday, June 15, 2006 5:44 PM
To: java-user@lucene.apache.org
Subject: RE: Questions on Query Scorer

Hello,

The problem may be rather in the name of the field you are querying -
"prohibited" in your case. 
You can check with Luke(http://www.getopt.org/luke/) the structure of
the index on which you are performing your query.

Mile

-----Original Message-----
From: Ferdinand Chan [mailto:ferdinand.chan@dcivision.com] 
Sent: Thursday, June 15, 2006 12:26 PM
To: java-user@lucene.apache.org
Subject: Questions on Query Scorer

How can I create a QueryScorer in Lucene 2.0???

 

When I create a QueryScorer using the following codes,

 

BooleanQuery booleanQuery = new BooleanQuery();

booleanQuery.add(q1,BooleanClause.Occur.SHOULD);

booleanQuery.add(q2,BooleanClause.Occur.SHOULD);

 

QueryScorer scorer = new QueryScorer(booleanQuery);

 

It compiles successfully but throws a runtime exception when I execute
the
code.

 

java.lang.NoSuchFieldError: prohibited

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTermsFromBoolea
nQue
ry(QueryTermExtractor.java:91)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTerm
Extr
actor.java:66)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTerm
Extr
actor.java:59)

        at
org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTerm
Extr
actor.java:45)

        at
org.apache.lucene.search.highlight.QueryScorer.<init>(QueryScorer.java:4
8)

 

Can anyone suggest a solution to this problem?

 

Thanks

 

Ferdinand

 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 11:30:53 2006
Return-Path: <java-user-return-21371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36604 invoked from network); 15 Jun 2006 11:30:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 11:30:52 -0000
Received: (qmail 26694 invoked by uid 500); 15 Jun 2006 11:30:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26652 invoked by uid 500); 15 Jun 2006 11:30:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26640 invoked by uid 99); 15 Jun 2006 11:30:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 04:30:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.28] (HELO godard.uk.mediasurface.com) (193.123.241.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 04:30:44 -0700
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by godard.uk.mediasurface.com (8.13.4+Sun/8.13.4) with ESMTP id k5FBUIgl005884
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 11:30:18 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: CJKAnalyzer - does it work?
Date: Thu, 15 Jun 2006 12:30:18 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A0178FD0E@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: CJKAnalyzer - does it work?
Thread-Index: AcaQXbEs0Y2qOd4jQXmtB6ZTIdHkLAAAgIUwAADtb1AAApQfAA==
From: "Robert Haycock" <Robert.Haycock@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Scanned-By: MIMEDefang 2.54 on 10.0.5.28
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a very simple example.  An IndexWriter (Lucene 1.9.0) with
CJKAnalyzer (latest version as of today).  A Chinese friend of mine as
given me a sentence and a word that appears in that sentence, eg:

"C1C2C3C4C5C6C7C8" where the word is "C3C4".

Here's code segment:

IndexWriter writer =3D new IndexWriter(directory, new CJKAnalyzer(),
true);
Document doc =3D new Document();
doc.add(new Field("name", " C1C2C3C4C5C6C7C8", Store.YES,
Index.TOKENIZED));
writer.addDocument(doc);
writer.optimize();
writer.close();

IndexSearcher searcher =3D new IndexSearcher(directory);
Hits hits =3D searcher.search(new TermQuery(new Term("name", "C3C4")));


This returns no hits.  I've also tried with the ChineseAnalyzer too, but
still no good.  It still works fine for English though.

Anyone know how to get this working?

Rob.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 12:26:58 2006
Return-Path: <java-user-return-21372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50031 invoked from network); 15 Jun 2006 12:26:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 12:26:56 -0000
Received: (qmail 85156 invoked by uid 500); 15 Jun 2006 12:24:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84314 invoked by uid 500); 15 Jun 2006 12:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81941 invoked by uid 99); 15 Jun 2006 12:24:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:24:30 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_FAKE_HELO_DOTCOM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prasenjitm@aol.com designates 152.163.225.130 as permitted sender)
Received: from [152.163.225.130] (HELO omr-r02.mail.aol.com) (152.163.225.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 04:51:21 -0700
Received: from aol.com (10.146.144.225)
  by omr-r02.mail.aol.com with ESMTP; 15 Jun 2006 07:51:00 -0400
Message-ID: <4491499F.50106@aol.com>
Date: Thu, 15 Jun 2006 17:20:55 +0530
From: Prasenjit Mukherjee <prasenjitm@aol.com>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc4 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Document clustering  using lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I want to do some document  clustering on a corpus of  ~ 100,000 
documents, with average doc size being ~ 7k. I have looked into carrot2 
but it seems to work only for relatively short documents and has soem 
scalign issues for large corpus.  Certainly for these kind of corpus 
size, one cannot use a pure memory based clustering algorithm. Hence the 
possible use of lucene.

I was thinking of using lucene to create the similarity matrix (between 
documents).  Before adding a document (i.e. D-k) to the lucene index, we 
can compute the document similarity between D-k with all other existing 
documents by creating a Query out of D-k and doing a search on the 
existing index. We can take the score of each document as   similarity 
measure between the document and D-k. It is going to be a symmetric and 
parse matrix. Now we can use this similarity  matrix and feed it to any 
similarity based clustering algorithm.

Would like to know if anyone has worked along similar lines, and are 
happy  to share their experiences.

thanks,
Prasen



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 12:59:30 2006
Return-Path: <java-user-return-21373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99712 invoked from network); 15 Jun 2006 12:59:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 12:59:30 -0000
Received: (qmail 72036 invoked by uid 500); 15 Jun 2006 12:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72010 invoked by uid 500); 15 Jun 2006 12:59:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71999 invoked by uid 99); 15 Jun 2006 12:59:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:59:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 05:59:20 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5FCwx9b086486
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 14:58:59 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Document clustering  using lucene
Date: Thu, 15 Jun 2006 14:58:58 +0200
User-Agent: KMail/1.8.2
References: <4491499F.50106@aol.com>
In-Reply-To: <4491499F.50106@aol.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606151458.58461.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 15 June 2006 13:50, Prasenjit Mukherjee wrote:
> I want to do some document  clustering on a corpus of  ~ 100,000 
> documents, with average doc size being ~ 7k. I have looked into carrot2 
> but it seems to work only for relatively short documents and has soem 
> scalign issues for large corpus.  Certainly for these kind of corpus 
> size, one cannot use a pure memory based clustering algorithm. Hence the 
> possible use of lucene.
> 
> I was thinking of using lucene to create the similarity matrix (between 
> documents).  Before adding a document (i.e. D-k) to the lucene index, we 
> can compute the document similarity between D-k with all other existing 
> documents by creating a Query out of D-k and doing a search on the 
> existing index. We can take the score of each document as   similarity 
> measure between the document and D-k. It is going to be a symmetric and 
> parse matrix. Now we can use this similarity  matrix and feed it to any 
> similarity based clustering algorithm.
> 
> Would like to know if anyone has worked along similar lines, and are 
> happy  to share their experiences.

Did you look into indexing a TermVector for each document?
It is easy to compute an element of a similarity matrix from two
term vectors.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 13:12:02 2006
Return-Path: <java-user-return-21374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3140 invoked from network); 15 Jun 2006 13:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 13:12:02 -0000
Received: (qmail 92966 invoked by uid 500); 15 Jun 2006 13:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92928 invoked by uid 500); 15 Jun 2006 13:11:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92917 invoked by uid 99); 15 Jun 2006 13:11:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 06:11:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jlhamilton@kbsi.com designates 209.189.225.82 as permitted sender)
Received: from [209.189.225.82] (HELO mail.kbsi.com) (209.189.225.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 06:11:11 -0700
Subject: RE: Document clustering  using lucene
Date: Thu, 15 Jun 2006 08:10:50 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-ID: <25039D8626986D42820764CF3C2AB791580E66@00-EMERALD.kbsi-cs.com>
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-TNEF-Correlator: 
Thread-Topic: Document clustering  using lucene
Thread-Index: AcaQdvFUyiNfvA2oR0O8PMT7m3FYegABarGQ
From: "John Hamilton" <jlhamilton@kbsi.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'v been thinking about a similar problem.  However, it seems that the =
similarity score returned by a search is only relevant within those =
search results.  You can't compare the similarity scores from two =
different searches.  I think you will have to compute the similarities =
yourself using the term vectors.

-John

-----Original Message-----
From: Prasenjit Mukherjee [mailto:prasenjitm@aol.com]
Sent: Thursday, June 15, 2006 6:51 AM
To: java-user@lucene.apache.org
Subject: Document clustering using lucene


I want to do some document  clustering on a corpus of  ~ 100,000=20
documents, with average doc size being ~ 7k. I have looked into carrot2=20
but it seems to work only for relatively short documents and has soem=20
scalign issues for large corpus.  Certainly for these kind of corpus=20
size, one cannot use a pure memory based clustering algorithm. Hence the =

possible use of lucene.

I was thinking of using lucene to create the similarity matrix (between=20
documents).  Before adding a document (i.e. D-k) to the lucene index, we =

can compute the document similarity between D-k with all other existing=20
documents by creating a Query out of D-k and doing a search on the=20
existing index. We can take the score of each document as   similarity=20
measure between the document and D-k. It is going to be a symmetric and=20
parse matrix. Now we can use this similarity  matrix and feed it to any=20
similarity based clustering algorithm.

Would like to know if anyone has worked along similar lines, and are=20
happy  to share their experiences.

thanks,
Prasen



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 13:26:50 2006
Return-Path: <java-user-return-21375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14293 invoked from network); 15 Jun 2006 13:26:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 13:26:50 -0000
Received: (qmail 24896 invoked by uid 500); 15 Jun 2006 13:26:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24872 invoked by uid 500); 15 Jun 2006 13:26:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24861 invoked by uid 99); 15 Jun 2006 13:26:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 06:26:36 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 06:26:35 -0700
Received: (qmail 19023 invoked by uid 509); 15 Jun 2006 15:26:10 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.123895 secs); 15 Jun 2006 13:26:10 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.123895 secs Process 19017)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 15 Jun 2006 15:26:10 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6907F.3BC4F6B9"
Subject: FieldCache problems
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Thu, 15 Jun 2006 15:22:46 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C014E49A7@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FieldCache problems
Thread-Index: AcaQfsql940SxkCmTxqUXIOZTZQU3A==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6907F.3BC4F6B9
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,

=20

I'm going to index a lot of data in lucene. I have just written a
functional prototype.

=20

One requirement for the application I'm designing the prototype for are
the ability to present the search results ordered by date and since the
data is very frequently changed I can't have the IndexReader (for the
searcher) open for more than 5 minutes.=20

=20

I'm hoping that I don't will have to redo the ranking functionality for
this so I started by trying to sort the results using the document dates
tick representation.

=20

The prototype is currently working on a relatively small index ( around
8 GB ) and I'm already having performance problems.=20

If I query the index without sort the response times are around 100 ms
if I add a sort to the query the response time are around 12 seconds
(even for small resultsets).

=20

I can't figure out what's taking so long? Doesn't the retrieval of field
cache only occur at the first sorted search as long as I maintain the
same IndexReader (could this be a bug in the Lucene.Net port??) ?=20

=20

=20

/

Regards

Marcus


------_=_NextPart_001_01C6907F.3BC4F6B9--

From java-user-return-21376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 13:51:51 2006
Return-Path: <java-user-return-21376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32218 invoked from network); 15 Jun 2006 13:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 13:51:50 -0000
Received: (qmail 81606 invoked by uid 500); 15 Jun 2006 13:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81529 invoked by uid 500); 15 Jun 2006 13:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81504 invoked by uid 99); 15 Jun 2006 13:51:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 06:51:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 06:51:09 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 7BB91187B6; Thu, 15 Jun 2006 13:50:46 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id A9FED187B4
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 13:50:43 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: BooleanQuery.TooManyClauses on MultiSearcher
Date: Thu, 15 Jun 2006 14:50:53 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	boundary="----=_NextPart_000_006D_01C6908B.199AFF40";
	protocol="application/x-pkcs7-signature";
	micalg=SHA1
In-Reply-To: <025401c6905d$b1745fb0$6f00a8c0@DH08FerdinandC>
Thread-Index: AcaQXbEs0Y2qOd4jQXmtB6ZTIdHkLAAIhAnw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060615135043.A9FED187B4@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_006D_01C6908B.199AFF40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I've just added a 3rd index directory (i.e. 3rd IndexSearcher) to my
MultiSearcher and I'm getting BooleanQuery.TooManyClauses errors on queries
which were working happily on 2 indexes.

Here's an example query, which hopefully you'll find self-explanatory from
the XML structure.
--------8<--------
<composite-query analyzer='1'>
	<group required="true" prohibited="false">
		<group required="false" prohibited="false">
			<prefix field="to" required="false"
prohibited="false">james</prefix>
			<prefix field="cc" required="false"
prohibited="false">james</prefix>
			<prefix field="smtp-rcptto" required="false"
prohibited="false">james</prefix>
			<prefix field="from" required="false"
prohibited="false">james</prefix>
			<prefix field="smtp-mailfrom" required="false"
prohibited="false">james</prefix>
		</group>
		<parse field="body" required="false"
prohibited="false">james</parse>
		<parse field="subject" required="false"
prohibited="false">james</parse>
	</group>
</composite-query>
--------8<--------

Note that there isn't even a range in there.

Do BooleanQueries not scale well across indexes?

------=_NextPart_000_006D_01C6908B.199AFF40
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxNTEz
NTA1M1owIwYJKoZIhvcNAQkEMRYEFPt00YpDGJiKyqPkaic8QqJ2RCIhMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAIdTe3eeGQW3N/SsAVnOvUjxjvQmjHRmup8e
GbKFI53zxwoYATCDjfTYyrMLGTKNj8UcHSfGg4O/M70VGbuqsum7mck1DcVoLFHSLBQwebohaaQZ
0369LoOb3/ftMla/hk1VpGR94GYDHSfIGnP4K0lKh+BarXVJN0QryPKj5mHaQXOLIyfYFnE+fI/D
Ehi5GCYmFyDfOQsmc8ePzDZ1ssr/e0G+QziUtPCzKeEqLZTQ95hEmJ95jo48xxjSQN6rwwCjuOno
lKdsDWgzeLkhENagZSrV9iDTHr2I0bJ8TCLHXopxXeCU4EPBN34+sdTQ0rexPgqCH6NHDEGCppp1
hPUAAAAAAAA=

------=_NextPart_000_006D_01C6908B.199AFF40--


From java-user-return-21377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 13:57:00 2006
Return-Path: <java-user-return-21377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59287 invoked from network); 15 Jun 2006 13:56:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 13:56:59 -0000
Received: (qmail 587 invoked by uid 500); 15 Jun 2006 13:56:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 558 invoked by uid 500); 15 Jun 2006 13:56:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 543 invoked by uid 99); 15 Jun 2006 13:56:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 06:56:53 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.101] (HELO web32004.mail.mud.yahoo.com) (68.142.207.101)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Jun 2006 06:56:52 -0700
Received: (qmail 74155 invoked by uid 60001); 15 Jun 2006 13:56:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OiIMaHAa1nru2Typ7AnHdmaliQIjbZ2Ju4eSQsOVYvGyjaAlK0HLFlYPGqFXlUoUnvLnoSyjV7AQ9BY4YGKMyKDwsMKK6TTi0i4VJhEGP9iY1NYjNw8bsnXHDl9u+fuTJdQw4pR/sDRQalGtSlExpMcAUeXdWpKakQ3BSAAEqn0=  ;
Message-ID: <20060615135631.74153.qmail@web32004.mail.mud.yahoo.com>
Received: from [70.61.22.83] by web32004.mail.mud.yahoo.com via HTTP; Thu, 15 Jun 2006 06:56:31 PDT
Date: Thu, 15 Jun 2006 06:56:31 -0700 (PDT)
From: <deshmol-lists@yahoo.com>
Reply-To: deshmol-lists@yahoo.com
Subject: Searching UN_TOKENIZED fields
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a field indexed as follows:

new Field(name, value, Store.YES, Index.UN_TOKENIZED)


I would like to search this field for exact match of
the query term. Thus if, for instance in the above
code snippet:

  String name="PROJECT";
  String value="Apache Lucene";

I would like to get a hit in the following case:
   query is PROJECT:"apache lucene"
OR query is PROJECT:"Apache Lucene"
OR query is PROJECT:"Apache Luc*"

...but not in the following case:
   query is: PROJECT:apache
OR query is: PROJECT:lucene

With the Indexing call as above, and a query string of
PROJECT:"Apache Lucene" I get 0 hits. I do get hits if
I create the Field as TOKENIZED, but then it also
matches the query PROJECT:apache which is not what I
want.

It is my understanding that I'm indexing correctly,
but when I query, I need to indicate to the
QueryParser that it should not tokenize the query
string.
Since the call:
Term[] terms = ((PhraseQuery) query).getTerms();

returns 2 terms, which for the above example are:
"Apache" and "Lucene"

Any ideas on how I can make this work?

Thanks,
~ amol

~ They have even applied logic to probability and vice versa. ~

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 14:09:44 2006
Return-Path: <java-user-return-21378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76647 invoked from network); 15 Jun 2006 14:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 14:09:43 -0000
Received: (qmail 29103 invoked by uid 500); 15 Jun 2006 14:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28877 invoked by uid 500); 15 Jun 2006 14:09:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28866 invoked by uid 99); 15 Jun 2006 14:09:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 07:09:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.152 as permitted sender)
Received: from [205.158.62.152] (HELO ws6-5.us4.outblaze.com) (205.158.62.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Jun 2006 07:09:35 -0700
Received: (qmail 2292 invoked from network); 15 Jun 2006 14:09:13 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@67.38.14.191)
  by ws6-5.us4.outblaze.com with SMTP; 15 Jun 2006 14:09:13 -0000
Message-ID: <44916A0B.6040902@curtin.com>
Date: Thu, 15 Jun 2006 10:09:15 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching UN_TOKENIZED fields
References: <20060615135631.74153.qmail@web32004.mail.mud.yahoo.com>
In-Reply-To: <20060615135631.74153.qmail@web32004.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

deshmol-lists@yahoo.com wrote:
> Hi,
> 
> I have a field indexed as follows:
> 
> new Field(name, value, Store.YES, Index.UN_TOKENIZED)
> 
> 
> I would like to search this field for exact match of
> the query term. Thus if, for instance in the above
> code snippet:
> 
>   String name="PROJECT";
>   String value="Apache Lucene";
> 
> I would like to get a hit in the following case:
>    query is PROJECT:"apache lucene"
> OR query is PROJECT:"Apache Lucene"
> OR query is PROJECT:"Apache Luc*"
> 
> ...but not in the following case:
>    query is: PROJECT:apache
> OR query is: PROJECT:lucene
> 
> With the Indexing call as above, and a query string of
> PROJECT:"Apache Lucene" I get 0 hits. I do get hits if
> I create the Field as TOKENIZED, but then it also
> matches the query PROJECT:apache which is not what I
> want.
> 
> It is my understanding that I'm indexing correctly,
> but when I query, I need to indicate to the
> QueryParser that it should not tokenize the query
> string.
> Since the call:
> Term[] terms = ((PhraseQuery) query).getTerms();
> 
> returns 2 terms, which for the above example are:
> "Apache" and "Lucene"
> 
> Any ideas on how I can make this work?

If your queries are really as simple as this example, then you could just 
build queries up programmatically instead of using QueryParser, e.g. with new 
TermQuery().  Otherwise, you might want to look into using PerFieldAnalyzer 
and KeywordAnalyzer with QueryParser.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 14:12:54 2006
Return-Path: <java-user-return-21379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77918 invoked from network); 15 Jun 2006 14:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 14:12:54 -0000
Received: (qmail 37715 invoked by uid 500); 15 Jun 2006 14:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37455 invoked by uid 500); 15 Jun 2006 14:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37444 invoked by uid 99); 15 Jun 2006 14:12:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 07:12:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 07:12:45 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id B2DF0187B6; Thu, 15 Jun 2006 14:12:23 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 367D9187B4
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 14:12:20 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
Date: Thu, 15 Jun 2006 15:12:30 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	boundary="----=_NextPart_000_0082_01C6908E.1ED61460";
	protocol="application/x-pkcs7-signature";
	micalg=SHA1
In-Reply-To: <20060615135043.A9FED187B4@mail.seseit.com>
Thread-Index: AcaQXbEs0Y2qOd4jQXmtB6ZTIdHkLAAIhAnwAAFN6NA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060615141220.367D9187B4@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0082_01C6908E.1ED61460
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I guess the most expensive thing I'm doing from the perspective of Boolean
clauses is heavily using PrefixQuery.

I want my user to be able to find e-mail to, cc or from james@anydomain, so
I opted for PrefixQuery on James. Bearing in mind that this is causing me
grief with BooleanQuery.TooManyClauses on my MultiSearcher, is there a
smarter approach that I should be adopting?

-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com] 
Sent: 15 June 2006 14:51
To: java-user@lucene.apache.org
Subject: BooleanQuery.TooManyClauses on MultiSearcher

I've just added a 3rd index directory (i.e. 3rd IndexSearcher) to my
MultiSearcher and I'm getting BooleanQuery.TooManyClauses errors on queries
which were working happily on 2 indexes.

Here's an example query, which hopefully you'll find self-explanatory from
the XML structure.
--------8<--------
<composite-query analyzer='1'>
	<group required="true" prohibited="false">
		<group required="false" prohibited="false">
			<prefix field="to" required="false"
prohibited="false">james</prefix>
			<prefix field="cc" required="false"
prohibited="false">james</prefix>
			<prefix field="smtp-rcptto" required="false"
prohibited="false">james</prefix>
			<prefix field="from" required="false"
prohibited="false">james</prefix>
			<prefix field="smtp-mailfrom" required="false"
prohibited="false">james</prefix>
		</group>
		<parse field="body" required="false"
prohibited="false">james</parse>
		<parse field="subject" required="false"
prohibited="false">james</parse>
	</group>
</composite-query>
--------8<--------

Note that there isn't even a range in there.

Do BooleanQueries not scale well across indexes?

------=_NextPart_000_0082_01C6908E.1ED61460
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxNTE0
MTIzMFowIwYJKoZIhvcNAQkEMRYEFPgfhDmGls61t2nIKkchcnEuiW2uMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAGcHVODQA0o5uIUHrPM1oaBO/3uLjdcYXk3t
OsvcxdqHlVFHzQkebWqRpGAD0wbuH1SmVvrq7Dp5RzYZgF719uII29PeG+431RYe8o0MDGrHEZeX
s/ALk7Mi7M2eCHYBA6NOJle5OuhN7iHE7sNh6h1CpmHF7ct7DjAl8XSU+ZLwg4x+tADDXVi5NoyP
pu2XElYRO8aYMtDM9ECZ1jIwJle8B7tZJ0BVekVb9A/sNp0ShkNaaRpgAynHfBztltZBtXtJuOzo
OZikvvecd5S37rIOu3d07O2EhYWoWjSjPbtf4B+uFwV6X5wx6seIBZCBc8/ZTcDlvq7JsaJXWuoq
288AAAAAAAA=

------=_NextPart_000_0082_01C6908E.1ED61460--


From java-user-return-21380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 14:18:50 2006
Return-Path: <java-user-return-21380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80792 invoked from network); 15 Jun 2006 14:18:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 14:18:50 -0000
Received: (qmail 51076 invoked by uid 500); 15 Jun 2006 14:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51050 invoked by uid 500); 15 Jun 2006 14:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51039 invoked by uid 99); 15 Jun 2006 14:18:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 07:18:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Jun 2006 07:18:41 -0700
Received: (qmail 2962 invoked from network); 15 Jun 2006 14:18:21 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@67.38.14.191)
  by ws6-1.us4.outblaze.com with SMTP; 15 Jun 2006 14:18:21 -0000
Message-ID: <44916C2E.4030708@curtin.com>
Date: Thu, 15 Jun 2006 10:18:22 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: BooleanQuery.TooManyClauses on MultiSearcher
References: <20060615141220.367D9187B4@mail.seseit.com>
In-Reply-To: <20060615141220.367D9187B4@mail.seseit.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rob Staveley (Tom) wrote:

> I guess the most expensive thing I'm doing from the perspective of Boolean
> clauses is heavily using PrefixQuery.
> 
> I want my user to be able to find e-mail to, cc or from james@anydomain, so
> I opted for PrefixQuery on James. Bearing in mind that this is causing me
> grief with BooleanQuery.TooManyClauses on my MultiSearcher, is there a
> smarter approach that I should be adopting?

I don't know about "smarter", but it seems like separating (parsing) out the 
username from the hostname in the email addresses, into separate fields at 
index time, would get you want you want.  If you want documents to, cc, or 
from "james" from any domain, then the query
	"touser:james ccuser:james fromuser:james"
would work.  If you were looking for a specific sender at a specific site, 
then the query
	"+fromuser:james +fromhost:foo.com"
would work.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 14:20:37 2006
Return-Path: <java-user-return-21381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81356 invoked from network); 15 Jun 2006 14:20:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 14:20:37 -0000
Received: (qmail 57563 invoked by uid 500); 15 Jun 2006 14:20:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57517 invoked by uid 500); 15 Jun 2006 14:20:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57490 invoked by uid 99); 15 Jun 2006 14:20:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 07:20:22 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.106] (HELO web32009.mail.mud.yahoo.com) (68.142.207.106)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Jun 2006 07:20:21 -0700
Received: (qmail 777 invoked by uid 60001); 15 Jun 2006 14:20:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=PmAacuvYQTcGgtHiC9jDm93YlUiuEoe5ml0jexUcywnQs7HRVsPAIsuioviY6WgprjUi28NEnqnQcGnjy3iLg18aTQi1PwuCEjsU8uQf/+pptjWWstpVCs6jrLemPOpybjOdHoSmpwjZvGQi4BrWESs0hNWAzM1IM47LZ/ZK8I8=  ;
Message-ID: <20060615142000.775.qmail@web32009.mail.mud.yahoo.com>
Received: from [70.61.22.83] by web32009.mail.mud.yahoo.com via HTTP; Thu, 15 Jun 2006 07:20:00 PDT
Date: Thu, 15 Jun 2006 07:20:00 -0700 (PDT)
From: <deshmol-lists@yahoo.com>
Reply-To: deshmol-lists@yahoo.com
Subject: Re: Searching UN_TOKENIZED fields
To: java-user@lucene.apache.org
In-Reply-To: <44916A0B.6040902@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Michael,

I general my queries could be more complex than the
example I outlined earlier, so I do need to use the
Query Parser. Hence, PerFieldAnalyzerWrapper and
KeywordAnalyzer seemed to do the trick for me.

PerFieldAnalyzerWrapper analyzer = new
PerFieldAnalyzerWrapper(new StandardAnalyzer());
analyzer.addAnalyzer("PROJECT", new
KeywordAnalyzer());
QueryParser parser = new QueryParser(defaultField,
analyzer);

~ amol




--- "Michael D. Curtin" <mike@curtin.com> wrote:

> deshmol-lists@yahoo.com wrote:
> > Hi,
> > 
> > I have a field indexed as follows:
> > 
> > new Field(name, value, Store.YES,
> Index.UN_TOKENIZED)
> > 
> > 
> > I would like to search this field for exact match
> of
> > the query term. Thus if, for instance in the above
> > code snippet:
> > 
> >   String name="PROJECT";
> >   String value="Apache Lucene";
> > 
> > I would like to get a hit in the following case:
> >    query is PROJECT:"apache lucene"
> > OR query is PROJECT:"Apache Lucene"
> > OR query is PROJECT:"Apache Luc*"
> > 
> > ...but not in the following case:
> >    query is: PROJECT:apache
> > OR query is: PROJECT:lucene
> > 
> > With the Indexing call as above, and a query
> string of
> > PROJECT:"Apache Lucene" I get 0 hits. I do get
> hits if
> > I create the Field as TOKENIZED, but then it also
> > matches the query PROJECT:apache which is not what
> I
> > want.
> > 
> > It is my understanding that I'm indexing
> correctly,
> > but when I query, I need to indicate to the
> > QueryParser that it should not tokenize the query
> > string.
> > Since the call:
> > Term[] terms = ((PhraseQuery) query).getTerms();
> > 
> > returns 2 terms, which for the above example are:
> > "Apache" and "Lucene"
> > 
> > Any ideas on how I can make this work?
> 
> If your queries are really as simple as this
> example, then you could just 
> build queries up programmatically instead of using
> QueryParser, e.g. with new 
> TermQuery().  Otherwise, you might want to look into
> using PerFieldAnalyzer 
> and KeywordAnalyzer with QueryParser.
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 14:45:50 2006
Return-Path: <java-user-return-21382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94107 invoked from network); 15 Jun 2006 14:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 14:45:50 -0000
Received: (qmail 15933 invoked by uid 500); 15 Jun 2006 14:45:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15833 invoked by uid 500); 15 Jun 2006 14:45:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15768 invoked by uid 99); 15 Jun 2006 14:45:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 07:45:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of richmondmike@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 07:45:35 -0700
Received: by ug-out-1314.google.com with SMTP id u2so923932uge
        for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 07:45:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=doz4PXxjCrEDQr/7KkonNLWYbbPD4dtHTiT6viK7Usa7sL5kLurWGASDBeSdjuQe5Qtn/25dPK3HMMMmJDrVS3ASUKY0+QyWYZwMJ85nLQo5av9KuwE0+15STZr8xIol+JGQ4XYAzGAKjvyWgIQPk31dyhKwkFykm93Cz+wpPkE=
Received: by 10.67.96.14 with SMTP id y14mr1791505ugl;
        Thu, 15 Jun 2006 07:45:14 -0700 (PDT)
Received: by 10.66.223.19 with HTTP; Thu, 15 Jun 2006 07:45:14 -0700 (PDT)
Message-ID: <931ca11b0606150745p1b608bdfjf18eebf4313224d5@mail.gmail.com>
Date: Thu, 15 Jun 2006 10:45:14 -0400
From: "Mike Richmond" <richmondmike@gmail.com>
To: java-user@lucene.apache.org
Subject: Query For Top Values
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello All,

Can anyone recommend a solution to get the top values of a field from
the results of a query?  For example, If I have a field named "from"
is there a way to get the top occuring values in that field after I
filter the results based on a query?

Note:
Luke has a great tool that enumerates the top terms for a field, but
it does it for all documents.  I just want to enumerate the top terms
on a set of documents that match a query.


Thanks in advance,

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 15:50:11 2006
Return-Path: <java-user-return-21383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24190 invoked from network); 15 Jun 2006 15:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 15:50:11 -0000
Received: (qmail 88008 invoked by uid 500); 15 Jun 2006 15:50:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87979 invoked by uid 500); 15 Jun 2006 15:50:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87968 invoked by uid 99); 15 Jun 2006 15:50:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 08:50:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 08:50:02 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 470D95B78E; Thu, 15 Jun 2006 08:49:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 422C27F403
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 08:49:42 -0700 (PDT)
Date: Thu, 15 Jun 2006 08:49:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
In-Reply-To: <20060615141220.367D9187B4@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0606150844230.29150@hal.rescomp.berkeley.edu>
References: <20060615141220.367D9187B4@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I guess the most expensive thing I'm doing from the perspective of Boolean
: clauses is heavily using PrefixQuery.
:
: I want my user to be able to find e-mail to, cc or from james@anydomain, so
: I opted for PrefixQuery on James. Bearing in mind that this is causing me
: grief with BooleanQuery.TooManyClauses on my MultiSearcher, is there a
: smarter approach that I should be adopting?

if the only reason you are using a PrefixQuery is so that searchinging for
"james" matches "james@domain.com" then i think MDC is right, split that
field up (or have one field, but put three terms in "james", "domain.com"
and "james@domain.com") .. but if you genuinely need flexible PrefixQuery
support, you may want to look at the ConstantScorePrefixQuery in Solr ...
there's nothing Solr specific about it, so you could drop it into your
Lucene installation.  I'm not entirely sure how well the
ConstantScoreQueries work with a MultiSearcher (mainly because i odn't
know how well Filter's work with MultiSearchers) but you could give it a
try -- it certainly won't have a TooManyClauses problem.

:
: -----Original Message-----
: From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]
: Sent: 15 June 2006 14:51
: To: java-user@lucene.apache.org
: Subject: BooleanQuery.TooManyClauses on MultiSearcher
:
: I've just added a 3rd index directory (i.e. 3rd IndexSearcher) to my
: MultiSearcher and I'm getting BooleanQuery.TooManyClauses errors on queries
: which were working happily on 2 indexes.
:
: Here's an example query, which hopefully you'll find self-explanatory from
: the XML structure.
: --------8<--------
: <composite-query analyzer='1'>
: 	<group required="true" prohibited="false">
: 		<group required="false" prohibited="false">
: 			<prefix field="to" required="false"
: prohibited="false">james</prefix>
: 			<prefix field="cc" required="false"
: prohibited="false">james</prefix>
: 			<prefix field="smtp-rcptto" required="false"
: prohibited="false">james</prefix>
: 			<prefix field="from" required="false"
: prohibited="false">james</prefix>
: 			<prefix field="smtp-mailfrom" required="false"
: prohibited="false">james</prefix>
: 		</group>
: 		<parse field="body" required="false"
: prohibited="false">james</parse>
: 		<parse field="subject" required="false"
: prohibited="false">james</parse>
: 	</group>
: </composite-query>
: --------8<--------
:
: Note that there isn't even a range in there.
:
: Do BooleanQueries not scale well across indexes?
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 15:58:07 2006
Return-Path: <java-user-return-21384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28491 invoked from network); 15 Jun 2006 15:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 15:58:07 -0000
Received: (qmail 6489 invoked by uid 500); 15 Jun 2006 15:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6463 invoked by uid 500); 15 Jun 2006 15:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6452 invoked by uid 99); 15 Jun 2006 15:57:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 08:57:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 08:57:59 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CB8825B78E; Thu, 15 Jun 2006 08:57:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C02AA7F403
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 08:57:38 -0700 (PDT)
Date: Thu, 15 Jun 2006 08:57:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Query For Top Values
In-Reply-To: <931ca11b0606150745p1b608bdfjf18eebf4313224d5@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606150856400.29150@hal.rescomp.berkeley.edu>
References: <931ca11b0606150745p1b608bdfjf18eebf4313224d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


google the mailing list archives for "category counts" and "facet counts"
and i think you'll find several past discussions on this topic.

: Date: Thu, 15 Jun 2006 10:45:14 -0400
: From: Mike Richmond <richmondmike@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Query For Top Values
:
: Hello All,
:
: Can anyone recommend a solution to get the top values of a field from
: the results of a query?  For example, If I have a field named "from"
: is there a way to get the top occuring values in that field after I
: filter the results based on a query?
:
: Note:
: Luke has a great tool that enumerates the top terms for a field, but
: it does it for all documents.  I just want to enumerate the top terms
: on a set of documents that match a query.
:
:
: Thanks in advance,
:
: Mike
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 16:16:53 2006
Return-Path: <java-user-return-21385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38123 invoked from network); 15 Jun 2006 16:16:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 16:16:53 -0000
Received: (qmail 52534 invoked by uid 500); 15 Jun 2006 16:16:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52501 invoked by uid 500); 15 Jun 2006 16:16:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52438 invoked by uid 99); 15 Jun 2006 16:16:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 09:16:45 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.200] (HELO web25902.mail.ukl.yahoo.com) (217.12.10.200)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Jun 2006 09:16:44 -0700
Received: (qmail 55492 invoked by uid 60001); 15 Jun 2006 16:16:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=jToMCdnVrTsrfbgO1LyrOT1O3etrH6IuzU3Hyj5G7RkU4JuBRiIJOhSfl6mRc2BuQopsPC/K+1uM/F6S5HVE4hc/5A+TR6dhMSUG+axBleYYPY9YYezZyHDMRUI7XSkWapfMMhOz8WcPSydddHZg7UAmPTtw7q7m8+5KZ6rb0Os=  ;
Message-ID: <20060615161622.55490.qmail@web25902.mail.ukl.yahoo.com>
Received: from [84.131.241.249] by web25902.mail.ukl.yahoo.com via HTTP; Thu, 15 Jun 2006 16:16:22 GMT
Date: Thu, 15 Jun 2006 16:16:22 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Reply-To: eks dev <eksdev@yahoo.co.uk>
Subject: Re: BooleanQuery.TooManyClauses on MultiSearcher
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0606150844230.29150@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Did not check it, but  solr is using SkippingFilter which is not yet commited in Lucene... so this will maybe not work?

By the way, any reason today not to commit SkippingFilter to Lucene?  I actually see nothing to do for this, but to commit existing SkippingFilter. If there is something I do not mind to spend a few hours to help

----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Thursday, 15 June, 2006 5:49:42 PM
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher


: I guess the most expensive thing I'm doing from the perspective of Boolean
: clauses is heavily using PrefixQuery.
:
: I want my user to be able to find e-mail to, cc or from james@anydomain, so
: I opted for PrefixQuery on James. Bearing in mind that this is causing me
: grief with BooleanQuery.TooManyClauses on my MultiSearcher, is there a
: smarter approach that I should be adopting?

if the only reason you are using a PrefixQuery is so that searchinging for
"james" matches "james@domain.com" then i think MDC is right, split that
field up (or have one field, but put three terms in "james", "domain.com"
and "james@domain.com") .. but if you genuinely need flexible PrefixQuery
support, you may want to look at the ConstantScorePrefixQuery in Solr ...
there's nothing Solr specific about it, so you could drop it into your
Lucene installation.  I'm not entirely sure how well the
ConstantScoreQueries work with a MultiSearcher (mainly because i odn't
know how well Filter's work with MultiSearchers) but you could give it a
try -- it certainly won't have a TooManyClauses problem.

:
: -----Original Message-----
: From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]
: Sent: 15 June 2006 14:51
: To: java-user@lucene.apache.org
: Subject: BooleanQuery.TooManyClauses on MultiSearcher
:
: I've just added a 3rd index directory (i.e. 3rd IndexSearcher) to my
: MultiSearcher and I'm getting BooleanQuery.TooManyClauses errors on queries
: which were working happily on 2 indexes.
:
: Here's an example query, which hopefully you'll find self-explanatory from
: the XML structure.
: --------8<--------
: <composite-query analyzer='1'>
:     <group required="true" prohibited="false">
:         <group required="false" prohibited="false">
:             <prefix field="to" required="false"
: prohibited="false">james</prefix>
:             <prefix field="cc" required="false"
: prohibited="false">james</prefix>
:             <prefix field="smtp-rcptto" required="false"
: prohibited="false">james</prefix>
:             <prefix field="from" required="false"
: prohibited="false">james</prefix>
:             <prefix field="smtp-mailfrom" required="false"
: prohibited="false">james</prefix>
:         </group>
:         <parse field="body" required="false"
: prohibited="false">james</parse>
:         <parse field="subject" required="false"
: prohibited="false">james</parse>
:     </group>
: </composite-query>
: --------8<--------
:
: Note that there isn't even a range in there.
:
: Do BooleanQueries not scale well across indexes?
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 16:26:27 2006
Return-Path: <java-user-return-21386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41605 invoked from network); 15 Jun 2006 16:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 16:26:26 -0000
Received: (qmail 73219 invoked by uid 500); 15 Jun 2006 16:26:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73191 invoked by uid 500); 15 Jun 2006 16:26:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73180 invoked by uid 99); 15 Jun 2006 16:26:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 09:26:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 09:26:17 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 11B39187B6; Thu, 15 Jun 2006 16:25:53 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 0A608187B4
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 16:25:46 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
Date: Thu, 15 Jun 2006 17:25:58 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_002C_01C690A0.C3FA0F70"
Thread-Index: AcaQk2EV6atXE2P4Rg+AimmO5OO/+AABJZrg
In-Reply-To: <Pine.LNX.4.58.0606150844230.29150@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060615162546.0A608187B4@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_002C_01C690A0.C3FA0F70
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I'd quite like to avoid tokenising james from  james@domain.com, because I
like the way PrefixQuery (when it works) matches james.dean@holywood.com
too. I'll take a look at ConstantScorePrefixQuery

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 15 June 2006 16:50
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher


: I guess the most expensive thing I'm doing from the perspective of Boolean
: clauses is heavily using PrefixQuery.
:
: I want my user to be able to find e-mail to, cc or from james@anydomain,
so
: I opted for PrefixQuery on James. Bearing in mind that this is causing me
: grief with BooleanQuery.TooManyClauses on my MultiSearcher, is there a
: smarter approach that I should be adopting?

if the only reason you are using a PrefixQuery is so that searchinging for
"james" matches "james@domain.com" then i think MDC is right, split that
field up (or have one field, but put three terms in "james", "domain.com"
and "james@domain.com") .. but if you genuinely need flexible PrefixQuery
support, you may want to look at the ConstantScorePrefixQuery in Solr ...
there's nothing Solr specific about it, so you could drop it into your
Lucene installation.  I'm not entirely sure how well the
ConstantScoreQueries work with a MultiSearcher (mainly because i odn't know
how well Filter's work with MultiSearchers) but you could give it a try --
it certainly won't have a TooManyClauses problem.

:
: -----Original Message-----
: From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]
: Sent: 15 June 2006 14:51
: To: java-user@lucene.apache.org
: Subject: BooleanQuery.TooManyClauses on MultiSearcher
:
: I've just added a 3rd index directory (i.e. 3rd IndexSearcher) to my
: MultiSearcher and I'm getting BooleanQuery.TooManyClauses errors on
queries
: which were working happily on 2 indexes.
:
: Here's an example query, which hopefully you'll find self-explanatory from
: the XML structure.
: --------8<--------
: <composite-query analyzer='1'>
: 	<group required="true" prohibited="false">
: 		<group required="false" prohibited="false">
: 			<prefix field="to" required="false"
: prohibited="false">james</prefix>
: 			<prefix field="cc" required="false"
: prohibited="false">james</prefix>
: 			<prefix field="smtp-rcptto" required="false"
: prohibited="false">james</prefix>
: 			<prefix field="from" required="false"
: prohibited="false">james</prefix>
: 			<prefix field="smtp-mailfrom" required="false"
: prohibited="false">james</prefix>
: 		</group>
: 		<parse field="body" required="false"
: prohibited="false">james</parse>
: 		<parse field="subject" required="false"
: prohibited="false">james</parse>
: 	</group>
: </composite-query>
: --------8<--------
:
: Note that there isn't even a range in there.
:
: Do BooleanQueries not scale well across indexes?
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_002C_01C690A0.C3FA0F70
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxNTE2
MjU1OFowIwYJKoZIhvcNAQkEMRYEFHntxwzUj4AR5phjRFMmym74u4RtMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAB9Hf2OJW2eHklaybRS4/4FK6vPW7NuHHd2C
/S1LjDBT38vyA8eD6fgwKKo27NA6VidEEHsFPxNeuwaq0CGxNlb+m3ndE8psmpjtWntwONSoenKT
tAfDSj4oclohkdahtCQPvURFJWWi4WAkO8ZetfsViNGBG/crvmL8SfvA/JT7/TOLxv0woAPEfsbh
/hIosUnqiLMsSHwsMzkcw+WTaNh3bss4sSl8TtcQ+XRN2TJ7WOYDeWEpNxOnh8q//hq7jTJ/0lYg
hdu7Kd2ps1ZcY5RCBk1L4FW5VJu+d6Mq9IJrPGLn1td/0K1LapLoyfmnOnc2DBeifzot00PnlEu2
PQQAAAAAAAA=

------=_NextPart_000_002C_01C690A0.C3FA0F70--


From java-user-return-21387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 17:22:34 2006
Return-Path: <java-user-return-21387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57412 invoked from network); 15 Jun 2006 17:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 17:22:34 -0000
Received: (qmail 67094 invoked by uid 500); 15 Jun 2006 17:22:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67066 invoked by uid 500); 15 Jun 2006 17:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67054 invoked by uid 99); 15 Jun 2006 17:22:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:22:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:22:26 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D84395B764; Thu, 15 Jun 2006 10:21:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CF0967F403;
	Thu, 15 Jun 2006 10:21:57 -0700 (PDT)
Date: Thu, 15 Jun 2006 10:21:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, eks dev <eksdev@yahoo.co.uk>
Subject: Re: BooleanQuery.TooManyClauses on MultiSearcher
In-Reply-To: <20060615161622.55490.qmail@web25902.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.58.0606151021330.2432@hal.rescomp.berkeley.edu>
References: <20060615161622.55490.qmail@web25902.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Did not check it, but solr is using SkippingFilter which is not yet
: commited in Lucene... so this will maybe not work?

Solr des not use SkippingFilter.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 17:28:39 2006
Return-Path: <java-user-return-21388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59362 invoked from network); 15 Jun 2006 17:28:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 17:28:39 -0000
Received: (qmail 86681 invoked by uid 500); 15 Jun 2006 17:28:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86645 invoked by uid 500); 15 Jun 2006 17:28:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86634 invoked by uid 99); 15 Jun 2006 17:28:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:28:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:28:30 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id DB1AB187B6; Thu, 15 Jun 2006 17:28:08 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 69537187B4
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 17:28:06 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
Date: Thu, 15 Jun 2006 18:28:15 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_003A_01C690A9.77563910"
Thread-Index: AcaQoEj3ilb9o1SJT4+HSfEtpKkXWQAAHVWw
In-Reply-To: <Pine.LNX.4.58.0606151021330.2432@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060615172806.69537187B4@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_003A_01C690A9.77563910
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I'm still trying to get my head around ConstantScorePrefixQuery. Could I
simply use this as a drop-in replacement for PrefixQuery?

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 15 June 2006 18:22
To: java-user@lucene.apache.org; eks dev
Subject: Re: BooleanQuery.TooManyClauses on MultiSearcher


: Did not check it, but solr is using SkippingFilter which is not yet
: commited in Lucene... so this will maybe not work?

Solr des not use SkippingFilter.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_003A_01C690A9.77563910
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxNTE3
MjgxNVowIwYJKoZIhvcNAQkEMRYEFJICihEAZKzG3n4Zvbx7ASEltM5NMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAIxjHG1MDRSrcw9+v5ZihSOaUXMiD6btSQ77
ybMeNtnye8WjQGKW1RpUTDAXQCthc/lvQP056Qy9xoOPvrIDW2nI96iuf2Med2zXKpmNVfvBApQk
frFN+jvGgCKrJM6hiUJLRV+wx+rUooxKtil14OuOpRkAoCogwEMMJunuH5fk/l8MAJRak+SuQKdt
ezOupxN289PrPHn/ypSr2W27O5LW2FQQOvPYYSw9aLgc8bvDtAl4wBG1X2tiu1lvMMq+VoXikbCJ
dPbj58TwA3pPcvnqysvplWa6g4nWjSzCMTKKLtG9LKtTs9deKXLCsNrk0ZwxV2lqkEJEk2RFqvn2
VEIAAAAAAAA=

------=_NextPart_000_003A_01C690A9.77563910--


From java-user-return-21389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 17:28:49 2006
Return-Path: <java-user-return-21389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59449 invoked from network); 15 Jun 2006 17:28:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 17:28:48 -0000
Received: (qmail 87736 invoked by uid 500); 15 Jun 2006 17:28:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87694 invoked by uid 500); 15 Jun 2006 17:28:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87670 invoked by uid 99); 15 Jun 2006 17:28:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:28:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:28:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9282E5B764; Thu, 15 Jun 2006 10:28:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8D38B7F403
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 10:28:14 -0700 (PDT)
Date: Thu, 15 Jun 2006 10:28:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
In-Reply-To: <20060615162546.0A608187B4@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0606151022000.2432@hal.rescomp.berkeley.edu>
References: <20060615162546.0A608187B4@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'd quite like to avoid tokenising james from  james@domain.com, because I
: like the way PrefixQuery (when it works) matches james.dean@holywood.com

well sure ... but if you say that becaues you want "." and "-" to be
treaded specially you could write an Email EmailAnalyzer that produces the
token stream: "james", "dean", "james.dean", "holywood.com",
"james.dean@holywood.com" ... the real question is do you really want a
search for "jam" to match "james.dean@holywood.com" while a search for
"dean", "james dean" and "holywood.com" doesn't ?


: -----Original Message-----
: From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: Sent: 15 June 2006 16:50
: To: java-user@lucene.apache.org
: Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
:
:
: : I guess the most expensive thing I'm doing from the perspective of Boolean
: : clauses is heavily using PrefixQuery.
: :
: : I want my user to be able to find e-mail to, cc or from james@anydomain,
: so
: : I opted for PrefixQuery on James. Bearing in mind that this is causing me
: : grief with BooleanQuery.TooManyClauses on my MultiSearcher, is there a
: : smarter approach that I should be adopting?
:
: if the only reason you are using a PrefixQuery is so that searchinging for
: "james" matches "james@domain.com" then i think MDC is right, split that
: field up (or have one field, but put three terms in "james", "domain.com"
: and "james@domain.com") .. but if you genuinely need flexible PrefixQuery
: support, you may want to look at the ConstantScorePrefixQuery in Solr ...
: there's nothing Solr specific about it, so you could drop it into your
: Lucene installation.  I'm not entirely sure how well the
: ConstantScoreQueries work with a MultiSearcher (mainly because i odn't know
: how well Filter's work with MultiSearchers) but you could give it a try --
: it certainly won't have a TooManyClauses problem.
:
: :
: : -----Original Message-----
: : From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]
: : Sent: 15 June 2006 14:51
: : To: java-user@lucene.apache.org
: : Subject: BooleanQuery.TooManyClauses on MultiSearcher
: :
: : I've just added a 3rd index directory (i.e. 3rd IndexSearcher) to my
: : MultiSearcher and I'm getting BooleanQuery.TooManyClauses errors on
: queries
: : which were working happily on 2 indexes.
: :
: : Here's an example query, which hopefully you'll find self-explanatory from
: : the XML structure.
: : --------8<--------
: : <composite-query analyzer='1'>
: : 	<group required="true" prohibited="false">
: : 		<group required="false" prohibited="false">
: : 			<prefix field="to" required="false"
: : prohibited="false">james</prefix>
: : 			<prefix field="cc" required="false"
: : prohibited="false">james</prefix>
: : 			<prefix field="smtp-rcptto" required="false"
: : prohibited="false">james</prefix>
: : 			<prefix field="from" required="false"
: : prohibited="false">james</prefix>
: : 			<prefix field="smtp-mailfrom" required="false"
: : prohibited="false">james</prefix>
: : 		</group>
: : 		<parse field="body" required="false"
: : prohibited="false">james</parse>
: : 		<parse field="subject" required="false"
: : prohibited="false">james</parse>
: : 	</group>
: : </composite-query>
: : --------8<--------
: :
: : Note that there isn't even a range in there.
: :
: : Do BooleanQueries not scale well across indexes?
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 17:34:04 2006
Return-Path: <java-user-return-21390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61682 invoked from network); 15 Jun 2006 17:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 17:34:03 -0000
Received: (qmail 275 invoked by uid 500); 15 Jun 2006 17:33:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 111 invoked by uid 500); 15 Jun 2006 17:33:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 100 invoked by uid 99); 15 Jun 2006 17:33:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:33:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:33:54 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 42EA2187B6; Thu, 15 Jun 2006 17:33:34 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id E3B96187B4
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 17:33:31 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
Date: Thu, 15 Jun 2006 18:33:44 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_004A_01C690AA.3B531AE0"
Thread-Index: AcaQoEj3ilb9o1SJT4+HSfEtpKkXWQAAHVWwAAAfu2A=
In-Reply-To: <20060615172806.69537187B4@mail.seseit.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060615173331.E3B96187B4@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_004A_01C690AA.3B531AE0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Incidentally, I'm getting BooleanQuery.TooManyClauses when I search on
"james", but I don't when I search on "James". Surely  the number of clauses
isn't dependent on the number of hits?! 

However, I know that "fred" is relatively uncommon in my index and "neil" is
relatively common and yet "fred" is getting the BooleanQuery.TooManyClauses
and "neil" isn't. Does that make sense? 

Should the actual term used in a PrefixQuery effect the number of clauses?

-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com] 
Sent: 15 June 2006 18:28
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher

I'm still trying to get my head around ConstantScorePrefixQuery. Could I
simply use this as a drop-in replacement for PrefixQuery?

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: 15 June 2006 18:22
To: java-user@lucene.apache.org; eks dev
Subject: Re: BooleanQuery.TooManyClauses on MultiSearcher


: Did not check it, but solr is using SkippingFilter which is not yet
: commited in Lucene... so this will maybe not work?

Solr des not use SkippingFilter.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_004A_01C690AA.3B531AE0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxNTE3
MzM0NFowIwYJKoZIhvcNAQkEMRYEFOTNVqh3N8lJn4dvBcPYOvxOa6IcMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAGqePiVJdaCW4mVKLkAisItHlR/fsLwX9lZ/
c8wH4L4ArYz4b/CMDyNpfZU7O6bRFcvRzX/dAzd52Camxt4ADbei6qg99aDdMzXP1brHKnhTDqXm
K32C3DrPsvXb5275cZMgB/l3Hg2wIZZVUuqwepzqkaVxrgWsPyL2kxdyOsqfVP2uNJ4FDzC1nGFi
lpK2ulD/ZUc/SzUKTZL45CYSgNz+S5Z9LF2Md/3Ys69BJDeFkEqwkquzgv1pmZfpC+VBRHxEoHIl
pfFAkN+prp0qHV0aMyFMhKjAGr9BowwvxdwGW08GPsbQ/Yyytx+g8JX7h7GE8NrZfveNrQVH4FPI
fZ0AAAAAAAA=

------=_NextPart_000_004A_01C690AA.3B531AE0--


From java-user-return-21391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 17:39:05 2006
Return-Path: <java-user-return-21391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62957 invoked from network); 15 Jun 2006 17:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 17:39:05 -0000
Received: (qmail 8939 invoked by uid 500); 15 Jun 2006 17:38:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8890 invoked by uid 500); 15 Jun 2006 17:38:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8850 invoked by uid 99); 15 Jun 2006 17:38:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:38:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:38:53 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 83B395B77C; Thu, 15 Jun 2006 10:38:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7D88D7F403
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 10:38:33 -0700 (PDT)
Date: Thu, 15 Jun 2006 10:38:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
In-Reply-To: <20060615172806.69537187B4@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0606151035440.2906@hal.rescomp.berkeley.edu>
References: <20060615172806.69537187B4@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm still trying to get my head around ConstantScorePrefixQuery. Could I
: simply use this as a drop-in replacement for PrefixQuery?

that's what it was designed to do .. you just need to grab a copy of
ConstantScorePrefixQuery and PrefixFilter from the same package
(ConstantScorePrefixQuery is just a convinient wrapper around "new
ConstantScoreQuery(new PrefixFilter(prefix))")

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 17:43:56 2006
Return-Path: <java-user-return-21392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64156 invoked from network); 15 Jun 2006 17:43:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 17:43:55 -0000
Received: (qmail 18696 invoked by uid 500); 15 Jun 2006 17:43:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18666 invoked by uid 500); 15 Jun 2006 17:43:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18649 invoked by uid 99); 15 Jun 2006 17:43:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:43:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:43:47 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 6C873187B6; Thu, 15 Jun 2006 17:43:25 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id AAA87187B4
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 17:43:22 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
Date: Thu, 15 Jun 2006 18:43:34 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0051_01C690AB.9B1CEF90"
Thread-Index: AcaQoSt31Yhu8JBHTWuHdB20SACIxAAANfDw
In-Reply-To: <Pine.LNX.4.58.0606151022000.2432@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060615174322.AAA87187B4@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0051_01C690AB.9B1CEF90
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

It is a good point that you raise, Chris. I'm already treating To, Cc, From,
MAIL-FROM, and RCPT-TO as separate fields (the latter fields being from
SMTP). I'd like a "fast and loose" query on james, to find anything relevant
to James. I guess to avoid getting too many Boolean terms, I should have
another field which is a soup of the sender and recipient fields and
tokenise e-mail addresses in it as you suggest.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 15 June 2006 18:28
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher


: I'd quite like to avoid tokenising james from  james@domain.com, because I
: like the way PrefixQuery (when it works) matches james.dean@holywood.com

well sure ... but if you say that becaues you want "." and "-" to be treaded
specially you could write an Email EmailAnalyzer that produces the token
stream: "james", "dean", "james.dean", "holywood.com",
"james.dean@holywood.com" ... the real question is do you really want a
search for "jam" to match "james.dean@holywood.com" while a search for
"dean", "james dean" and "holywood.com" doesn't ?


: -----Original Message-----
: From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: Sent: 15 June 2006 16:50
: To: java-user@lucene.apache.org
: Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
:
:
: : I guess the most expensive thing I'm doing from the perspective of
Boolean
: : clauses is heavily using PrefixQuery.
: :
: : I want my user to be able to find e-mail to, cc or from james@anydomain,
: so
: : I opted for PrefixQuery on James. Bearing in mind that this is causing
me
: : grief with BooleanQuery.TooManyClauses on my MultiSearcher, is there a
: : smarter approach that I should be adopting?
:
: if the only reason you are using a PrefixQuery is so that searchinging for
: "james" matches "james@domain.com" then i think MDC is right, split that
: field up (or have one field, but put three terms in "james", "domain.com"
: and "james@domain.com") .. but if you genuinely need flexible PrefixQuery
: support, you may want to look at the ConstantScorePrefixQuery in Solr ...
: there's nothing Solr specific about it, so you could drop it into your
: Lucene installation.  I'm not entirely sure how well the
: ConstantScoreQueries work with a MultiSearcher (mainly because i odn't
know
: how well Filter's work with MultiSearchers) but you could give it a try --
: it certainly won't have a TooManyClauses problem.
:
: :
: : -----Original Message-----
: : From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]
: : Sent: 15 June 2006 14:51
: : To: java-user@lucene.apache.org
: : Subject: BooleanQuery.TooManyClauses on MultiSearcher
: :
: : I've just added a 3rd index directory (i.e. 3rd IndexSearcher) to my
: : MultiSearcher and I'm getting BooleanQuery.TooManyClauses errors on
: queries
: : which were working happily on 2 indexes.
: :
: : Here's an example query, which hopefully you'll find self-explanatory
from
: : the XML structure.
: : --------8<--------
: : <composite-query analyzer='1'>
: : 	<group required="true" prohibited="false">
: : 		<group required="false" prohibited="false">
: : 			<prefix field="to" required="false"
: : prohibited="false">james</prefix>
: : 			<prefix field="cc" required="false"
: : prohibited="false">james</prefix>
: : 			<prefix field="smtp-rcptto" required="false"
: : prohibited="false">james</prefix>
: : 			<prefix field="from" required="false"
: : prohibited="false">james</prefix>
: : 			<prefix field="smtp-mailfrom" required="false"
: : prohibited="false">james</prefix>
: : 		</group>
: : 		<parse field="body" required="false"
: : prohibited="false">james</parse>
: : 		<parse field="subject" required="false"
: : prohibited="false">james</parse>
: : 	</group>
: : </composite-query>
: : --------8<--------
: :
: : Note that there isn't even a range in there.
: :
: : Do BooleanQueries not scale well across indexes?
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0051_01C690AB.9B1CEF90
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxNTE3
NDMzNFowIwYJKoZIhvcNAQkEMRYEFOmUJzoRhj0zDaE7RJ/thuksokuMMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAAc1c0+XNS866BLwund3AmwOAc01LzQgzXfz
hu1+LtdrTB+Ki3pa3e/JRqD+LqeyIisrXdbRYEiDEaYX7zGLjEdQbueOTCDEs0BnKSy+0Rl91b68
J4fG6hJlJO0j0NJ5ybjwGXLjOXycLz9khrikHjAlCjMYpcp9ud2O4v4tg0lDITj1JOThMTXInlz3
bNF1MO4YxWLt2yaGxqJNt1RGM0xVCybrxCPOzn/AxD49HOzNdJtbUhzRDVXKzmeUdOjfn6O1rWVO
HTF0T5BM8z9vrmPqM5nfi10MN7BSZ6qar+lV4FnRxkKSl2MBiY2pLXY8hsYee6eFW8pjWuGga9ZL
p9oAAAAAAAA=

------=_NextPart_000_0051_01C690AB.9B1CEF90--


From java-user-return-21393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 17:44:03 2006
Return-Path: <java-user-return-21393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64243 invoked from network); 15 Jun 2006 17:44:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 17:44:02 -0000
Received: (qmail 19283 invoked by uid 500); 15 Jun 2006 17:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19216 invoked by uid 500); 15 Jun 2006 17:43:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19170 invoked by uid 99); 15 Jun 2006 17:43:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:43:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:43:50 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D7CA75B764; Thu, 15 Jun 2006 10:43:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D12D37F403
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 10:43:29 -0700 (PDT)
Date: Thu, 15 Jun 2006 10:43:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
In-Reply-To: <20060615173331.E3B96187B4@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0606151038360.2906@hal.rescomp.berkeley.edu>
References: <20060615173331.E3B96187B4@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Incidentally, I'm getting BooleanQuery.TooManyClauses when I search on
: "james", but I don't when I search on "James". Surely  the number of clauses
: isn't dependent on the number of hits?!

not the numebr of hits -- just hte number of terms in your index that
start with the prefix.

: However, I know that "fred" is relatively uncommon in my index and "neil" is
: relatively common and yet "fred" is getting the BooleanQuery.TooManyClauses
: and "neil" isn't. Does that make sense?
:
: Should the actual term used in a PrefixQuery effect the number of clauses?

yes .. the Term used in the PrefixQUery is just a convinient holder for a
fieldname and a term value prefix -- what matters is how many terms in
that field start with that prefix.  if "james*" causes a problem, but
"James*" doesn't then it sounds like your indexing analyzer is case
sensative and you have a lot more lowercase values starting with james
then upercase values starting with James .. if "fred*" causes a problem
but "neil*" doesn't then you probably have a lot more terms that start
with "fred" then you do that start with "neil" -- it doesn't matter if
"neil@foo" is the value more documents then the total number of docs that
contain any value starting with "fred", what matters is how many unique
values there are starting with "fred"




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 17:47:19 2006
Return-Path: <java-user-return-21394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65118 invoked from network); 15 Jun 2006 17:47:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 17:47:19 -0000
Received: (qmail 28146 invoked by uid 500); 15 Jun 2006 17:47:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28120 invoked by uid 500); 15 Jun 2006 17:47:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28109 invoked by uid 99); 15 Jun 2006 17:47:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:47:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 10:47:10 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id D739E187B6; Thu, 15 Jun 2006 17:46:49 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id DCB28187B4
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 17:46:46 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher
Date: Thu, 15 Jun 2006 18:46:59 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0058_01C690AC.15274E70"
Thread-Index: AcaQo0gU6l/pAmTUTbGpY2SCtkHkZQAAEY8A
In-Reply-To: <Pine.LNX.4.58.0606151038360.2906@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060615174646.DCB28187B4@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0058_01C690AC.15274E70
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

The penny drops. Thank you so much for your time, Chris :-) 

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 15 June 2006 18:43
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses on MultiSearcher


: Incidentally, I'm getting BooleanQuery.TooManyClauses when I search on
: "james", but I don't when I search on "James". Surely  the number of
clauses
: isn't dependent on the number of hits?!

not the numebr of hits -- just hte number of terms in your index that start
with the prefix.

: However, I know that "fred" is relatively uncommon in my index and "neil"
is
: relatively common and yet "fred" is getting the
BooleanQuery.TooManyClauses
: and "neil" isn't. Does that make sense?
:
: Should the actual term used in a PrefixQuery effect the number of clauses?

yes .. the Term used in the PrefixQUery is just a convinient holder for a
fieldname and a term value prefix -- what matters is how many terms in that
field start with that prefix.  if "james*" causes a problem, but "James*"
doesn't then it sounds like your indexing analyzer is case sensative and you
have a lot more lowercase values starting with james then upercase values
starting with James .. if "fred*" causes a problem but "neil*" doesn't then
you probably have a lot more terms that start with "fred" then you do that
start with "neil" -- it doesn't matter if "neil@foo" is the value more
documents then the total number of docs that contain any value starting with
"fred", what matters is how many unique values there are starting with
"fred"




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0058_01C690AC.15274E70
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxNTE3
NDY1OVowIwYJKoZIhvcNAQkEMRYEFEq6H5eNTbhp9kfjE4sdLL3NjpLtMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAC6EPnOc88ky/tKCwHnn9YTgF5TPANSZAsbe
ttXqTP5CzZzQoXtuGAnlx8tK31Wbecn5RIFkcnpujCzlBpQGgoJv1x2KO2b2IJ4nFJdMb/OwCQav
6w5M/xnks3a/z4ooiutlkA9gPaM3cMw3raOJSROT9DPPz3/p7IP4btqME2f1zDa7D1XxU0V82g6j
VTgmafNlpkpxT2TZtRIJ2S41K2mv8mDgYN8xeSdGyTBW6DugDdj34j2YABq3VupNtdGNjKYYHdwK
v5GiBMbf91M6GvfiyM9YR5kYATCJRkjT6HtedfeCoKO09h/0Pdd22U+aEIHZY3Fmvv9TeBdZuZJ+
9KYAAAAAAAA=

------=_NextPart_000_0058_01C690AC.15274E70--


From java-user-return-21395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 23:22:24 2006
Return-Path: <java-user-return-21395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68387 invoked from network); 15 Jun 2006 23:22:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 23:22:24 -0000
Received: (qmail 50785 invoked by uid 500); 15 Jun 2006 23:22:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50052 invoked by uid 500); 15 Jun 2006 23:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50041 invoked by uid 99); 15 Jun 2006 23:22:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 16:22:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 16:22:15 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 57F7833CFCC; Thu, 15 Jun 2006 19:21:54 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id B682633CFA8
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 19:21:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A0178FD0E@neptune.int.mediasurface.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308A0178FD0E@neptune.int.mediasurface.com>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <FEF43296-0190-47F1-B85D-2FBCBF483E77@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: CJKAnalyzer - does it work?
Date: Thu, 15 Jun 2006 19:21:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rob,

Your example is, hopefully, not exact since you used "C1..." which I =20
presume was not what you originally tested with.

CJKAnalyzer is working fine for me in this example adapted from your =20
code:

   public void testCJKAnalyzer() throws Exception {
     RAMDirectory directory =3D new RAMDirectory();
     IndexWriter writer =3D new IndexWriter(directory, new CJKAnalyzer=20=

(), true);
     Document doc =3D new Document();
     doc.add(new Field("name", "=E8=84=B1=E4=B8=8B=E4=BD=A0=E7=9A=84=E8=A3=
=A4=E5=AD=90", Field.Store.YES,
         Field.Index.TOKENIZED));
     writer.addDocument(doc);
     writer.optimize();
     writer.close();

     IndexSearcher searcher =3D new IndexSearcher(directory);
     Hits hits =3D searcher.search(new TermQuery(new Term("name", "=E8=A3=A4=
=20
=E5=AD=90")));
     assertEquals(1, hits.length());
   }

Erik


On Jun 15, 2006, at 7:30 AM, Robert Haycock wrote:

> Hi,
>
> I have a very simple example.  An IndexWriter (Lucene 1.9.0) with
> CJKAnalyzer (latest version as of today).  A Chinese friend of mine as
> given me a sentence and a word that appears in that sentence, eg:
>
> "C1C2C3C4C5C6C7C8" where the word is "C3C4".
>
> Here's code segment:
>
> IndexWriter writer =3D new IndexWriter(directory, new CJKAnalyzer(),
> true);
> Document doc =3D new Document();
> doc.add(new Field("name", " C1C2C3C4C5C6C7C8", Store.YES,
> Index.TOKENIZED));
> writer.addDocument(doc);
> writer.optimize();
> writer.close();
>
> IndexSearcher searcher =3D new IndexSearcher(directory);
> Hits hits =3D searcher.search(new TermQuery(new Term("name", =
"C3C4")));
>
>
> This returns no hits.  I've also tried with the ChineseAnalyzer =20
> too, but
> still no good.  It still works fine for English though.
>
> Anyone know how to get this working?
>
> Rob.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 23:30:13 2006
Return-Path: <java-user-return-21396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71354 invoked from network); 15 Jun 2006 23:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 23:30:12 -0000
Received: (qmail 55658 invoked by uid 500); 15 Jun 2006 23:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55618 invoked by uid 500); 15 Jun 2006 23:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55604 invoked by uid 99); 15 Jun 2006 23:30:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 16:30:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 16:30:04 -0700
Received: by nf-out-0910.google.com with SMTP id l35so324933nfa
        for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 16:29:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=q3SNPkMMmhPdYWoy9RwXbZj6nCMhNL6W0dtHBqu4Phn6ZsJbs5KaSTt41FPzTkoPnVZ6XqqLV6z2ede2Vxdb6gyi8ckqire/apcrROIcZS2sWg24Sut1v4cJue40/6DPaCvUEtsx6bZNry+z0S1bGUhrNORy8LsZK6JtpRLdgr4=
Received: by 10.49.95.11 with SMTP id x11mr1060959nfl;
        Thu, 15 Jun 2006 16:29:43 -0700 (PDT)
Received: by 10.49.65.5 with HTTP; Thu, 15 Jun 2006 16:29:43 -0700 (PDT)
Message-ID: <fb9748c90606151629j3623193atd87622e8a063100f@mail.gmail.com>
Date: Thu, 15 Jun 2006 16:29:43 -0700
From: "Ray Tsang" <saturnism@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CJKAnalyzer - does it work?
In-Reply-To: <FEF43296-0190-47F1-B85D-2FBCBF483E77@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <BE3E7BC7F7553B4A9362D4192ECD308A0178FD0E@neptune.int.mediasurface.com>
	 <FEF43296-0190-47F1-B85D-2FBCBF483E77@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SGkgRXJpaywKCldoZXJlIGRpZCB5b3UgZ2V0IHRoYXQgY2hpbmVzZSBzZW50ZW5jZSBmcm9tPyAg
VGhhdCdzIGZ1bm55ISBoYWhhLgoKcmF5LAoKT24gNi8xNS8wNiwgRXJpayBIYXRjaGVyIDxlcmlr
QGVoYXRjaGVyc29sdXRpb25zLmNvbT4gd3JvdGU6Cj4gUm9iLAo+Cj4gWW91ciBleGFtcGxlIGlz
LCBob3BlZnVsbHksIG5vdCBleGFjdCBzaW5jZSB5b3UgdXNlZCAiQzEuLi4iIHdoaWNoIEkKPiBw
cmVzdW1lIHdhcyBub3Qgd2hhdCB5b3Ugb3JpZ2luYWxseSB0ZXN0ZWQgd2l0aC4KPgo+IENKS0Fu
YWx5emVyIGlzIHdvcmtpbmcgZmluZSBmb3IgbWUgaW4gdGhpcyBleGFtcGxlIGFkYXB0ZWQgZnJv
bSB5b3VyCj4gY29kZToKPgo+ICAgIHB1YmxpYyB2b2lkIHRlc3RDSktBbmFseXplcigpIHRocm93
cyBFeGNlcHRpb24gewo+ICAgICAgUkFNRGlyZWN0b3J5IGRpcmVjdG9yeSA9IG5ldyBSQU1EaXJl
Y3RvcnkoKTsKPiAgICAgIEluZGV4V3JpdGVyIHdyaXRlciA9IG5ldyBJbmRleFdyaXRlcihkaXJl
Y3RvcnksIG5ldyBDSktBbmFseXplcgo+ICgpLCB0cnVlKTsKPiAgICAgIERvY3VtZW50IGRvYyA9
IG5ldyBEb2N1bWVudCgpOwo+ICAgICAgZG9jLmFkZChuZXcgRmllbGQoIm5hbWUiLCAi6ISx5LiL
5L2g55qE6KOk5a2QIiwgRmllbGQuU3RvcmUuWUVTLAo+ICAgICAgICAgIEZpZWxkLkluZGV4LlRP
S0VOSVpFRCkpOwo+ICAgICAgd3JpdGVyLmFkZERvY3VtZW50KGRvYyk7Cj4gICAgICB3cml0ZXIu
b3B0aW1pemUoKTsKPiAgICAgIHdyaXRlci5jbG9zZSgpOwo+Cj4gICAgICBJbmRleFNlYXJjaGVy
IHNlYXJjaGVyID0gbmV3IEluZGV4U2VhcmNoZXIoZGlyZWN0b3J5KTsKPiAgICAgIEhpdHMgaGl0
cyA9IHNlYXJjaGVyLnNlYXJjaChuZXcgVGVybVF1ZXJ5KG5ldyBUZXJtKCJuYW1lIiwgIuijpAo+
IOWtkCIpKSk7Cj4gICAgICBhc3NlcnRFcXVhbHMoMSwgaGl0cy5sZW5ndGgoKSk7Cj4gICAgfQo+
Cj4gRXJpawo+Cj4KPiBPbiBKdW4gMTUsIDIwMDYsIGF0IDc6MzAgQU0sIFJvYmVydCBIYXljb2Nr
IHdyb3RlOgo+Cj4gPiBIaSwKPiA+Cj4gPiBJIGhhdmUgYSB2ZXJ5IHNpbXBsZSBleGFtcGxlLiAg
QW4gSW5kZXhXcml0ZXIgKEx1Y2VuZSAxLjkuMCkgd2l0aAo+ID4gQ0pLQW5hbHl6ZXIgKGxhdGVz
dCB2ZXJzaW9uIGFzIG9mIHRvZGF5KS4gIEEgQ2hpbmVzZSBmcmllbmQgb2YgbWluZSBhcwo+ID4g
Z2l2ZW4gbWUgYSBzZW50ZW5jZSBhbmQgYSB3b3JkIHRoYXQgYXBwZWFycyBpbiB0aGF0IHNlbnRl
bmNlLCBlZzoKPiA+Cj4gPiAiQzFDMkMzQzRDNUM2QzdDOCIgd2hlcmUgdGhlIHdvcmQgaXMgIkMz
QzQiLgo+ID4KPiA+IEhlcmUncyBjb2RlIHNlZ21lbnQ6Cj4gPgo+ID4gSW5kZXhXcml0ZXIgd3Jp
dGVyID0gbmV3IEluZGV4V3JpdGVyKGRpcmVjdG9yeSwgbmV3IENKS0FuYWx5emVyKCksCj4gPiB0
cnVlKTsKPiA+IERvY3VtZW50IGRvYyA9IG5ldyBEb2N1bWVudCgpOwo+ID4gZG9jLmFkZChuZXcg
RmllbGQoIm5hbWUiLCAiIEMxQzJDM0M0QzVDNkM3QzgiLCBTdG9yZS5ZRVMsCj4gPiBJbmRleC5U
T0tFTklaRUQpKTsKPiA+IHdyaXRlci5hZGREb2N1bWVudChkb2MpOwo+ID4gd3JpdGVyLm9wdGlt
aXplKCk7Cj4gPiB3cml0ZXIuY2xvc2UoKTsKPiA+Cj4gPiBJbmRleFNlYXJjaGVyIHNlYXJjaGVy
ID0gbmV3IEluZGV4U2VhcmNoZXIoZGlyZWN0b3J5KTsKPiA+IEhpdHMgaGl0cyA9IHNlYXJjaGVy
LnNlYXJjaChuZXcgVGVybVF1ZXJ5KG5ldyBUZXJtKCJuYW1lIiwgIkMzQzQiKSkpOwo+ID4KPiA+
Cj4gPiBUaGlzIHJldHVybnMgbm8gaGl0cy4gIEkndmUgYWxzbyB0cmllZCB3aXRoIHRoZSBDaGlu
ZXNlQW5hbHl6ZXIKPiA+IHRvbywgYnV0Cj4gPiBzdGlsbCBubyBnb29kLiAgSXQgc3RpbGwgd29y
a3MgZmluZSBmb3IgRW5nbGlzaCB0aG91Z2guCj4gPgo+ID4gQW55b25lIGtub3cgaG93IHRvIGdl
dCB0aGlzIHdvcmtpbmc/Cj4gPgo+ID4gUm9iLgo+ID4KPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gVG8g
dW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUu
b3JnCj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZwo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1t
YWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRp
b25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+
Cj4K


From java-user-return-21397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 15 23:32:33 2006
Return-Path: <java-user-return-21397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71871 invoked from network); 15 Jun 2006 23:32:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2006 23:32:32 -0000
Received: (qmail 58529 invoked by uid 500); 15 Jun 2006 23:32:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58492 invoked by uid 500); 15 Jun 2006 23:32:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58473 invoked by uid 99); 15 Jun 2006 23:32:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 16:32:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 16:32:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EB2C433CB5F; Thu, 15 Jun 2006 19:32:04 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id F1F7033CB46
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 19:32:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <fb9748c90606151629j3623193atd87622e8a063100f@mail.gmail.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308A0178FD0E@neptune.int.mediasurface.com> <FEF43296-0190-47F1-B85D-2FBCBF483E77@ehatchersolutions.com> <fb9748c90606151629j3623193atd87622e8a063100f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <8375F431-E668-4429-B84F-681B0BE3A2C5@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: CJKAnalyzer - does it work?
Date: Thu, 15 Jun 2006 19:32:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 15, 2006, at 7:29 PM, Ray Tsang wrote:
> Where did you get that chinese sentence from?  That's funny! haha.

=E6=88=91=E4=B8=8D=E7=9F=A5=E9=81=93=EF=BC=81 ;)

	Erik


> On 6/15/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>> Rob,
>>
>> Your example is, hopefully, not exact since you used "C1..." which I
>> presume was not what you originally tested with.
>>
>> CJKAnalyzer is working fine for me in this example adapted from your
>> code:
>>
>>    public void testCJKAnalyzer() throws Exception {
>>      RAMDirectory directory =3D new RAMDirectory();
>>      IndexWriter writer =3D new IndexWriter(directory, new =
CJKAnalyzer
>> (), true);
>>      Document doc =3D new Document();
>>      doc.add(new Field("name", "=E8=84=B1=E4=B8=8B=E4=BD=A0=E7=9A=84=E8=
=A3=A4=E5=AD=90", Field.Store.YES,
>>          Field.Index.TOKENIZED));
>>      writer.addDocument(doc);
>>      writer.optimize();
>>      writer.close();
>>
>>      IndexSearcher searcher =3D new IndexSearcher(directory);
>>      Hits hits =3D searcher.search(new TermQuery(new Term("name", =
"=E8=A3=A4
>> =E5=AD=90")));
>>      assertEquals(1, hits.length());
>>    }
>>
>> Erik
>>
>>
>> On Jun 15, 2006, at 7:30 AM, Robert Haycock wrote:
>>
>> > Hi,
>> >
>> > I have a very simple example.  An IndexWriter (Lucene 1.9.0) with
>> > CJKAnalyzer (latest version as of today).  A Chinese friend of =20
>> mine as
>> > given me a sentence and a word that appears in that sentence, eg:
>> >
>> > "C1C2C3C4C5C6C7C8" where the word is "C3C4".
>> >
>> > Here's code segment:
>> >
>> > IndexWriter writer =3D new IndexWriter(directory, new =
CJKAnalyzer(),
>> > true);
>> > Document doc =3D new Document();
>> > doc.add(new Field("name", " C1C2C3C4C5C6C7C8", Store.YES,
>> > Index.TOKENIZED));
>> > writer.addDocument(doc);
>> > writer.optimize();
>> > writer.close();
>> >
>> > IndexSearcher searcher =3D new IndexSearcher(directory);
>> > Hits hits =3D searcher.search(new TermQuery(new Term("name", =20
>> "C3C4")));
>> >
>> >
>> > This returns no hits.  I've also tried with the ChineseAnalyzer
>> > too, but
>> > still no good.  It still works fine for English though.
>> >
>> > Anyone know how to get this working?
>> >
>> > Rob.
>> >
>> > =20
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 01:50:06 2006
Return-Path: <java-user-return-21398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99194 invoked from network); 16 Jun 2006 01:50:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 01:50:06 -0000
Received: (qmail 86741 invoked by uid 500); 16 Jun 2006 01:50:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86711 invoked by uid 500); 16 Jun 2006 01:49:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86700 invoked by uid 99); 16 Jun 2006 01:49:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 18:49:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.6.217.67] (HELO host5.scbbs.com) (66.6.217.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Jun 2006 18:49:58 -0700
Received: (qmail 25358 invoked from network); 16 Jun 2006 05:33:49 -0000
Received: from adsl-67-123-201-18.dsl.lsan03.pacbell.net (HELO ?127.0.0.1?) (67.123.201.18)
  by 67-217-6-66.tierzero.net with SMTP; 16 Jun 2006 05:33:49 -0000
Message-ID: <44920DF3.60103@scbbs.com>
Date: Thu, 15 Jun 2006 18:48:35 -0700
From: Ron Parker <sysop@scbbs.com>
Reply-To:  sysop@scbbs.com
Organization: Software Creations
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: luceneweb: 500 Exception with results.jsp "parse(java.lang.String)"
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just installed Lucene 2.0.0, java version "1.4.2_10", Resin-3.0.18.

The test index and query from the command line 
(http://lucene.apache.org/java/docs/demo.html) work successfully.  I 
dropped the lucene.war into my Resin webapps directory and it created 
the luceneweb directory.

When I navigate to the luceneweb web application and enter a search, I 
get this error:

500 Servlet Exception

/results.jsp:60: parse(java.lang.String) in 
org.apache.lucene.queryParser.QueryParser
cannot be applied to 
(java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)
                        query = QueryParser.parse(queryString, 
"contents", analyzer); //parse the
                                           ^
Note: 
/var/www/resin-3.0.18/webapps/luceneweb/WEB-INF/work/_jsp/_results__jsp.java
uses or overrides a deprecated API.
Note: Recompile with -deprecation for details.
1 error

Haven't a clue as to how to correct.  Could someone please help?  Thanks.

-ron

-- 
Ron Parker
Software Creations               http://www.scbbs.com
Self-Administration Web Site     http://saw.scbbs.com
SDSS Subscription Mgmt Service   http://sdss.scbbs.com
Central Ave Dance Ensemble       http://www.centralavedance.com
R & B Salsa                      http://www.randbsalsa.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 02:12:08 2006
Return-Path: <java-user-return-21399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1622 invoked from network); 16 Jun 2006 02:12:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 02:12:08 -0000
Received: (qmail 98619 invoked by uid 500); 16 Jun 2006 02:12:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98580 invoked by uid 500); 16 Jun 2006 02:12:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98569 invoked by uid 99); 16 Jun 2006 02:12:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 19:12:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jun 2006 19:12:00 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 463BF33CF67; Thu, 15 Jun 2006 22:11:39 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id CCAC933CF17
	for <java-user@lucene.apache.org>; Thu, 15 Jun 2006 22:11:33 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <44920DF3.60103@scbbs.com>
References: <44920DF3.60103@scbbs.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B08CADD7-3D0F-4351-83A7-B906DCFF941D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: luceneweb: 500 Exception with results.jsp "parse(java.lang.String)"
Date: Thu, 15 Jun 2006 22:11:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ron,

This issue was corrected just after the release of 2.0.  You can grab  
a new results.jsp from Subversion or download it from here:

	<http://svn.apache.org/viewvc/lucene/java/trunk/src/jsp/results.jsp? 
revision=410678&view=markup>

Erik


On Jun 15, 2006, at 9:48 PM, Ron Parker wrote:

> Just installed Lucene 2.0.0, java version "1.4.2_10", Resin-3.0.18.
>
> The test index and query from the command line (http:// 
> lucene.apache.org/java/docs/demo.html) work successfully.  I  
> dropped the lucene.war into my Resin webapps directory and it  
> created the luceneweb directory.
>
> When I navigate to the luceneweb web application and enter a  
> search, I get this error:
>
> 500 Servlet Exception
>
> /results.jsp:60: parse(java.lang.String) in  
> org.apache.lucene.queryParser.QueryParser
> cannot be applied to  
> (java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer 
> )
>                        query = QueryParser.parse(queryString,  
> "contents", analyzer); //parse the
>                                           ^
> Note: /var/www/resin-3.0.18/webapps/luceneweb/WEB-INF/work/_jsp/ 
> _results__jsp.java
> uses or overrides a deprecated API.
> Note: Recompile with -deprecation for details.
> 1 error
>
> Haven't a clue as to how to correct.  Could someone please help?   
> Thanks.
>
> -ron
>
> -- 
> Ron Parker
> Software Creations               http://www.scbbs.com
> Self-Administration Web Site     http://saw.scbbs.com
> SDSS Subscription Mgmt Service   http://sdss.scbbs.com
> Central Ave Dance Ensemble       http://www.centralavedance.com
> R & B Salsa                      http://www.randbsalsa.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 07:26:23 2006
Return-Path: <java-user-return-21400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76597 invoked from network); 16 Jun 2006 07:26:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 07:26:22 -0000
Received: (qmail 32678 invoked by uid 500); 16 Jun 2006 07:26:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32633 invoked by uid 500); 16 Jun 2006 07:26:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32622 invoked by uid 99); 16 Jun 2006 07:26:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 00:26:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Vikas_Khengare@symantec.com designates 143.127.12.111 as permitted sender)
Received: from [143.127.12.111] (HELO silver.veritas.com) (143.127.12.111)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 00:26:13 -0700
Received: from sxchcon1-int.veritas.com (HELO SVLXCHCON1.enterprise.veritas.com) ([10.137.18.171])
  by silver.veritas.com with ESMTP; 16 Jun 2006 00:25:51 -0700
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.06,140,1149490800"; 
   d="scan'208,217"; a="39285137:sNHT51493748"
Received: from PUNAXCHECNPIN02.enterprise.veritas.com ([10.217.161.22]) by SVLXCHCON1.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 16 Jun 2006 00:25:51 -0700
Received: from ITPXCHCLN1.enterprise.veritas.com ([10.216.17.2]) by PUNAXCHECNPIN02.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.1433);
	 Fri, 16 Jun 2006 12:55:46 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69116.1572FA04"
Subject: How to give AND condition in MultiFieldSearchQueryParser?
Date: Fri, 16 Jun 2006 12:55:44 +0530
Message-ID: <2B63BBC3F2F85B45A985FAD965DE969EEC4394@ITPXCHCLN1.enterprise.veritas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to give AND condition in MultiFieldSearchQueryParser?
Thread-Index: AcaRFhRzP5hb2RcvQY6A6ODIyHS32g==
From: "Vikas Khengare" <Vikas_Khengare@symantec.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 16 Jun 2006 07:25:46.0905 (UTC) FILETIME=[15E19090:01C69116]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69116.1572FA04
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi

=20

            I want to search in multiple fields with "AND" condition
that is, If I have fields for employee

=20

Field ("empNum","EC02261");

Field ("empPurchaseDept","john");

Field ("empAccountDept","john");

Field ("age","Aegentina");

=20

Now I want to search in "PurchaseDept" & "AccountDept" for empName But
Only if that employee exist in both department.

So If I will search for john it should give me corresponding document
because it contents in both fields.

=20

I can use MultiFieldSearchQueryParser. But what about "AND" condition.
if I search then it should present in both fields i.e. Purchase &
Account then n then it should return result.

=20

Can I use BooleanClause.Occur.MUST?

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D

=20


------_=_NextPart_001_01C69116.1572FA04--

From java-user-return-21401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 08:35:58 2006
Return-Path: <java-user-return-21401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96155 invoked from network); 16 Jun 2006 08:35:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 08:35:57 -0000
Received: (qmail 19308 invoked by uid 500); 16 Jun 2006 08:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19280 invoked by uid 500); 16 Jun 2006 08:35:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19269 invoked by uid 99); 16 Jun 2006 08:35:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 01:35:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Vikas_Khengare@symantec.com designates 143.127.12.111 as permitted sender)
Received: from [143.127.12.111] (HELO silver.veritas.com) (143.127.12.111)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 01:35:48 -0700
Received: from sxchcon2-int.veritas.com (HELO SVLXCHCON2.enterprise.veritas.com) ([10.137.18.172])
  by silver.veritas.com with ESMTP; 16 Jun 2006 01:35:28 -0700
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.06,140,1149490800"; 
   d="scan'208,217"; a="39286518:sNHT2213532928"
Received: from itpxchcon2.enterprise.veritas.com ([10.216.17.4]) by SVLXCHCON2.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 16 Jun 2006 01:35:26 -0700
Received: from ITPXCHCLN1.enterprise.veritas.com ([10.216.17.2]) by itpxchcon2.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 16 Jun 2006 14:05:22 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6911F.CEBC1366"
Subject: Field class in Lucene 1.4.3 & Lucene 2.0.0
Date: Fri, 16 Jun 2006 14:05:21 +0530
Message-ID: <2B63BBC3F2F85B45A985FAD965DE969EEC43B6@ITPXCHCLN1.enterprise.veritas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Field class in Lucene 1.4.3 & Lucene 2.0.0
Thread-Index: AcaRH84QrMQEtAewRHGtVTwXebEzyw==
From: "Vikas Khengare" <Vikas_Khengare@symantec.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 16 Jun 2006 08:35:22.0912 (UTC) FILETIME=[CEF9AA00:01C6911F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6911F.CEBC1366
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Friends

=20

            I was using Lucene 1.4.3 But Now I am using Lucene 2.0.0.

The First Problem arise is that in Lucene I was using=20

doc.add (Field.Keyword(FIELD_URL, item.uri));

doc.add (Field.Text(FIELD_OBJNAME, item.ObjName));

doc.add (Field.UnStored(FIELD_ALLDOCS, item.allConcat));

=20

But Now in Lucene 2.0.0 I don't have that facility

So instead of that why should I do?

=20

I want Keyword field to maintain uniqueness in Index. OW what should I
do to maintain Uniqueness in Index by using Lucene 2.0.0 ?

=20

Thanks in advance.

=20


------_=_NextPart_001_01C6911F.CEBC1366--

From java-user-return-21402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 10:33:59 2006
Return-Path: <java-user-return-21402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35793 invoked from network); 16 Jun 2006 10:33:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 10:33:59 -0000
Received: (qmail 79756 invoked by uid 500); 16 Jun 2006 10:33:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79610 invoked by uid 500); 16 Jun 2006 10:33:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79599 invoked by uid 99); 16 Jun 2006 10:33:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 03:33:51 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.229] (HELO web60821.mail.yahoo.com) (209.73.178.229)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Jun 2006 03:33:50 -0700
Received: (qmail 52296 invoked by uid 60001); 16 Jun 2006 10:33:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QF7Ov5ja/qVNogySqR2f/QBdi5ye34mUV9lIlDnydReSAs6oD7hK6PKINYDITMyCrYE3fKaTfDBwl8PHPbcpyPvyC6dQme4uSmMiqmHJ6wikzcvjijd09vCBdE6Rq3m1CjBiOz3Np6mMBROr+AvcnbR9WaA2wplL2jkbGNHn8Ac=  ;
Message-ID: <20060616103329.52294.qmail@web60821.mail.yahoo.com>
Received: from [212.179.71.70] by web60821.mail.yahoo.com via HTTP; Fri, 16 Jun 2006 03:33:29 PDT
Date: Fri, 16 Jun 2006 03:33:29 -0700 (PDT)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: reversing porter stemming
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1457083237-1150454009=:51727"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1457083237-1150454009=:51727
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

is it possible to take a stemmed token from as index and run some sort of reverse porter stemming to get a logical word, the problem is that porter stemming is very aggressive, for example: people is indexed as peopl , so basically my quesion is
   
  if i have peoples , people, both indexed as peopl, is there a way to go from peopl -> people (retrieving the root word would be fine)
   
  thanks

 		
---------------------------------
How low will we go? Check out Yahoo! Messengers low  PC-to-Phone call rates.
--0-1457083237-1150454009=:51727--

From java-user-return-21403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 10:44:00 2006
Return-Path: <java-user-return-21403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38539 invoked from network); 16 Jun 2006 10:43:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 10:43:59 -0000
Received: (qmail 95055 invoked by uid 500); 16 Jun 2006 10:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95023 invoked by uid 500); 16 Jun 2006 10:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95012 invoked by uid 99); 16 Jun 2006 10:43:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 03:43:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 03:43:51 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DF5A133D250; Fri, 16 Jun 2006 06:43:30 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id AF62233D10C
	for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 06:43:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <2B63BBC3F2F85B45A985FAD965DE969EEC43B6@ITPXCHCLN1.enterprise.veritas.com>
References: <2B63BBC3F2F85B45A985FAD965DE969EEC43B6@ITPXCHCLN1.enterprise.veritas.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <22CF495B-A747-4339-9C36-4167FA0FB86F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Field class in Lucene 1.4.3 & Lucene 2.0.0
Date: Fri, 16 Jun 2006 06:43:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have a look at the CHANGES.txt file.  First try upgrading to Lucene  
1.9.x and then ensuring all the deprecation warnings are gone from  
compilation, then you can cleanly go to 2.0.

	Erik



On Jun 16, 2006, at 4:35 AM, Vikas Khengare wrote:

> Hi Friends
>
>
>
>             I was using Lucene 1.4.3 But Now I am using Lucene 2.0.0.
>
> The First Problem arise is that in Lucene I was using
>
> doc.add (Field.Keyword(FIELD_URL, item.uri));
>
> doc.add (Field.Text(FIELD_OBJNAME, item.ObjName));
>
> doc.add (Field.UnStored(FIELD_ALLDOCS, item.allConcat));
>
>
>
> But Now in Lucene 2.0.0 I don't have that facility
>
> So instead of that why should I do?
>
>
>
> I want Keyword field to maintain uniqueness in Index. OW what should I
> do to maintain Uniqueness in Index by using Lucene 2.0.0 ?
>
>
>
> Thanks in advance.
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 14:25:47 2006
Return-Path: <java-user-return-21404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20846 invoked from network); 16 Jun 2006 14:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 14:25:46 -0000
Received: (qmail 75867 invoked by uid 500); 16 Jun 2006 14:25:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75836 invoked by uid 500); 16 Jun 2006 14:25:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75816 invoked by uid 99); 16 Jun 2006 14:25:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 07:25:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 07:25:38 -0700
Received: by py-out-1112.google.com with SMTP id x66so648104pye
        for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 07:25:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oEWc6NVSbGUJm9C0OzP6bQ+TnkQqqw9mF0bm0hZPjRLSachmhNgO1kop2NakhACgrkEJqxf+99ysAz4HEtirL96B0sjWBuq77et3oYc1jpLFFv48JNXLcnWGbRjkdMUjhMOe6cjRlWuzgEEpAy3bhHMVEAvyBlq/lhOfIXQND8A=
Received: by 10.35.27.1 with SMTP id e1mr4650750pyj;
        Fri, 16 Jun 2006 07:25:17 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Fri, 16 Jun 2006 07:25:17 -0700 (PDT)
Message-ID: <c68e39170606160725l56e5c877r754e7e1ff2afdc8b@mail.gmail.com>
Date: Fri, 16 Jun 2006 10:25:17 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reversing porter stemming
In-Reply-To: <20060616103329.52294.qmail@web60821.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060616103329.52294.qmail@web60821.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/16/06, zzzzz shalev <zzzzz_shalev@yahoo.com> wrote:
> is it possible to take a stemmed token from as index and run some sort of reverse porter stemming to get a logical word, the problem is that porter stemming is very aggressive, for example: people is indexed as peopl , so basically my quesion is
>
>   if i have peoples , people, both indexed as peopl, is there a way to go from peopl -> people (retrieving the root word would be fine)

Interesting question... I assume this is so you can do something like
retrieve the top terms for a field and have it more readable by an
end-user?

I don't think there is a way built into Lucene, but you could get
mostly there by keeping a reverse mapping yourself.  Run a dictionary
of common words through the stemmer and keep track of what word
generated the stemmed word.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 15:48:46 2006
Return-Path: <java-user-return-21405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59602 invoked from network); 16 Jun 2006 15:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 15:48:45 -0000
Received: (qmail 26070 invoked by uid 500); 16 Jun 2006 15:48:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26042 invoked by uid 500); 16 Jun 2006 15:48:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26031 invoked by uid 99); 16 Jun 2006 15:48:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 08:48:38 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Jun 2006 08:48:37 -0700
Received: (qmail 45930 invoked by uid 60001); 16 Jun 2006 15:48:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=riQpvlBJ+ceZ0PCoDO0a14M3M+WZFj+YBmInBzsuzwvlHN8mshHk9fbUNQoGW5eVSlu0zOucSgrZMyXxgo5OeQXmsiQ/ftqRoYLbNmY38iyVYumDSlwXBrf30zqThS8TcPR1FdZE3Q1N0mC8oJrgM9C2sW6t43fdIdOCLTZRz4c=  ;
Message-ID: <20060616154815.45928.qmail@web50306.mail.yahoo.com>
Received: from [72.229.167.99] by web50306.mail.yahoo.com via HTTP; Fri, 16 Jun 2006 08:48:15 PDT
Date: Fri, 16 Jun 2006 08:48:15 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Survey: Lucene and Java 1.4 vs. 1.5
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello everyone,

If you have 15 seconds to spare, please let us (Lucene developers) know which version of Java you are using with Lucene: 1.4 or 1.5

All it takes is 1 click on one of the two choices:
  http://www.quimble.com/poll/view/2156

No cheating, please.  Thanks!
Otis




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 17:25:56 2006
Return-Path: <java-user-return-21406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98106 invoked from network); 16 Jun 2006 17:25:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 17:25:56 -0000
Received: (qmail 16909 invoked by uid 500); 16 Jun 2006 17:25:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16868 invoked by uid 500); 16 Jun 2006 17:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16857 invoked by uid 99); 16 Jun 2006 17:25:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 10:25:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 10:25:47 -0700
Received: by ug-out-1314.google.com with SMTP id u2so1605244uge
        for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 10:25:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TYr3qtD2yBXaSmutUa+LS9YhZFuILeLYhjwJq5YQBULOWydQs2W15SQXdYryx5hhbK16KcojI2Rt8n3tk4Ew0W3TQNs7LVHiJ9wnDwlcbzR4FWi7XeJRLr5eapeOcP+RHLR44rS8+yobdLBk+WKH+TSuAE6d3Np/Z1zWXq5sGkk=
Received: by 10.67.30.6 with SMTP id h6mr2944340ugj;
        Fri, 16 Jun 2006 10:25:26 -0700 (PDT)
Received: by 10.67.31.19 with HTTP; Fri, 16 Jun 2006 10:25:26 -0700 (PDT)
Message-ID: <88c6a6720606161025xc052066r57db9c662722934a@mail.gmail.com>
Date: Fri, 16 Jun 2006 12:25:26 -0500
From: "Chris Lamprecht" <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser Search On C++ problem
In-Reply-To: <20060614180701.77315.qmail@web30214.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060614180701.77315.qmail@web30214.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's the Analyzer you're passing into the QueryParser.
StandardAnalyzer turns "C++" into "c".  You can change the .jj grammar
to fix this.  (same for "C#")

On 6/14/06, Joe Amstadt <tekkacon@yahoo.com> wrote:
> I'm trying to do a search on ( Java PHP C++ ) with
> lucene 1.9.  I am using a MultiFieldQueryParser to
> parse with StandardAnalyzer. Before I parse the string
> I clean up the search string and it looks like this (
> Java PHP C\+\+ ).  The query is only searching on "c"
> and not "c++" any ideas as to what I am doing wrong at
> this point would be great.
>
> MultiFieldQueryParser mfqp = new
> MultiFieldQueryParser( str_arr_fields, analyzer );
>
> try{
>
>         System.out.println( "String Before Clean Up --> " +
> str_search_value );
>         String str_clean_search = stringCleanUp(
> str_search_value );                             //Escape these special chars +
> - && || ! ( ) { } [ ] ^ " ~ * ? : \
>         System.out.println( "String After Clean Up --> " +
> str_clean_search);
>         Query query = mfqp.parse( str_clean_search );
>         System.out.println( "Search Query --> " +
> query.toString() );
>         bq_query.add( query, BooleanClause.Occur.MUST );
>
> }catch( ParseException pe_error ){
>
>         pe_error.printStackTrace();
> }
>
> output:
>
> String Before Clean Up --> Java PHP C++
> String After Clean Up --> Java PHP C\+\+
> Search Query --> ( search_text:java title:java ) (
> search_text:php title:php ) ( search_text:c title:c )
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 19:20:56 2006
Return-Path: <java-user-return-21407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45273 invoked from network); 16 Jun 2006 19:20:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 19:20:56 -0000
Received: (qmail 31330 invoked by uid 500); 16 Jun 2006 19:20:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31196 invoked by uid 500); 16 Jun 2006 19:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31144 invoked by uid 99); 16 Jun 2006 19:20:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 12:20:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.174] (HELO smtpout.mac.com) (17.250.248.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 12:20:42 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout04/MantshX 4.0) with ESMTP id k5GJKMxK014632
	for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 12:20:22 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k5GJKIge017137
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 12:20:21 -0700 (PDT)
Message-ID: <44930474.2050301@mac.com>
Date: Fri, 16 Jun 2006 15:20:20 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: indexing emails
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am working on indexing emails and want to have a "to" field.  I am 
currently putting all the emails on one line seperated w/ spaces...example:

michael@foo.bar john@boo.com jane@bar.com

Then i index that with a StandardAnalyzer as follows:

doc.add(new Field("to", (String) itemContent.get("to"), Field.Store.YES, 
Field.Index.UN_TOKENIZED));

Question is...is this the best way to do it?  I want to be able to 
search for michael@foo.bar and pick out just those Documents, etc.

Thanks,
Michael



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 20:14:07 2006
Return-Path: <java-user-return-21408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67655 invoked from network); 16 Jun 2006 20:14:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 20:14:06 -0000
Received: (qmail 22349 invoked by uid 500); 16 Jun 2006 20:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22314 invoked by uid 500); 16 Jun 2006 20:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22303 invoked by uid 99); 16 Jun 2006 20:14:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 13:14:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 13:13:59 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn1.fre.skanova.net (7.2.072.1)
        id 4492E96600008555 for java-user@lucene.apache.org; Fri, 16 Jun 2006 22:13:36 +0200
Subject: Re: indexing emails
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <44930474.2050301@mac.com>
References: <44930474.2050301@mac.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Fri, 16 Jun 2006 22:13:28 +0200
Message-Id: <1150488809.5674.217.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, 2006-06-16 at 15:20 -0400, Michael J. Prichard wrote:
> I am working on indexing emails and want to have a "to" field.  I am 
> currently putting all the emails on one line seperated w/ spaces...example:
> 
> michael@foo.bar john@boo.com jane@bar.com
> 
> Then i index that with a StandardAnalyzer as follows:
> 
> doc.add(new Field("to", (String) itemContent.get("to"), Field.Store.YES, 
> Field.Index.UN_TOKENIZED));
> 
> Question is...is this the best way to do it?  I want to be able to 
> search for michael@foo.bar and pick out just those Documents, etc.

You can either do it as above (but you want to TOKENIZE the field) or
you could create a new UN_TOKENIZED field for each email address.

The second will require less CPU as it does not involve any lexical
analysis. It will also create larger distance between the addresses in
the index (see span queries and term positions).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 20:23:38 2006
Return-Path: <java-user-return-21409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71068 invoked from network); 16 Jun 2006 20:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 20:23:38 -0000
Received: (qmail 38154 invoked by uid 500); 16 Jun 2006 20:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38132 invoked by uid 500); 16 Jun 2006 20:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 25928 invoked by uid 99); 16 Jun 2006 19:18:05 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jgroppe@gmail.com designates 64.233.162.197 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=gCAEIHH76tjImEPYXffPFIJFKM6XsaMXkcfXfQEivfhvTWuxXho4+mBRxc5ajboHBkmVdGRCaS1qLpFhj78ZHdFTyFDLzHX8l3PuenaV5ahqWUHGqk05yD+7MqvAkp7mLvXE/o/N5c/B6eCuQjbmboTtHQM2lAVviQNq6t4mBaE=
Message-ID: <4962541c0606161217l1120bfc5qca623a02b500411c@mail.gmail.com>
Date: Fri, 16 Jun 2006 14:17:44 -0500
From: "John Christopher Groppe" <jgroppe@acm.org>
Sender: jgroppe@gmail.com
To: java-user@lucene.apache.org
Subject: Error reading documents from file index lucene 2.0
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 86db79ce1fad8cd3
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've encountered a very vexing problem with Lucene 2.0.0.  I am able
to create and search an index, but if I attempt get a document out of
the index, an IO exception is thrown.  The type of exception depends
on the size of the index.  If the index is very small, say fewer than
10 documents I do not get the error.  If the index is a Ram index I do
not get any errors.

Am I doing something wrong, or is this a bug.  I am running:

Lucene 2.0.0
Java 1.5.0_07
Windows XP Pro SP2

Here is my test code followed by the Exception stack trace.

Any help is greatly appreciated.  Thanks.

John

import java.util.Iterator;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hit;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.RAMDirectory;

public class SearchTest {

    private static final String[][] ALBUM_DATA = {
        {"51271", "#1 Def Spot Jam [EDITED]", "#1 Def Spot Jam
[EDITED]", "Rap/Hip Hop", "0", "1016", "Various Artists", "Various
Artists"},
        {"51270", "#1 Def Spot Jam [EXPLICIT]", "#1 Def Spot Jam
[EXPLICIT]", "Rap/Hip Hop", "1", "1016", "Various Artists", "Various
Artists"},
        {"64967", "#1 Record/Radio City", "#1 Record/Radio City",
"Rock", "0", "663", "Big Star", "Big Star"},
        {"35141", "#1 [EXPLICIT]","#1 [EXPLICIT]","Alternative Rock",
"1", "9686", "Fischerspooner", "Fischerspooner"},
        {"55322", "#1's", "#1's", "Jazz/Blues", "0", "2759", "Louis
Jordan", "Louis Jordan"},
        {"59738", "#1's", "#1's", "R&B/Soul", "0", "6660", "Destiny's
Child", "Destiny's Child"},
        {"25384",  "001", "001", "Alternative Rock", "0", "7733",
"Dovetail Joint", "Dovetail Joint"},
        {"2719", "02", "02", "Pop", "0", "807", "O-Town", "O-Town"},
        {"35398", "02: Avalon Remixed","02: Avalon Remixed","Pop",
"0","9770","Avalon","Avalon"},
        {"33073","0304","0304","Pop","0","1116","Jewel","Jewel"},
        {"27876","05:22:09:12 Off","05:22:09:12 Off","Alternative
Rock","0","8945","Front 242","Front 242"},
        {"24513","1 Fille And 4 Types","1 fille & 4
types","Pop","0","5074","Celine Dion","Celine Dion"},
        {"23074","1+1","1+1","Jazz/Blues","0","3568","Wayne
Shorter","Wayne Shorter"},
        {"15045","1,000 Fires","1,000 Fires","Pop","0","2888","Traci
Lords","Traci Lords"},
        {"42193","1.22.03.Acoustic","1.22.03.Acoustic","Pop","0","823","Maroon
5","Maroon 5"},
        {"22537","10","10","Rap/Hip Hop","0","3631","LL Cool J","LL Cool J"}
    };

    public static final String FIELD_ID = "id";
    public static final String FIELD_TITLE = "title";
    public static final String FIELD_TITLE_ORIGINAL = "titleOriginal";
    public static final String FIELD_GENRES = "genres";
    public static final String FIELD_EXPLICIT = "explicit";
    public static final String FIELD_ID_ARTIST = "idArtist";
    public static final String FIELD_ARTIST = "artist";
    public static final String FIELD_ARTIST_ORIGINAL = "artistOriginal";
    public static final String FIELD_MEDIA = "media";
    public static final String MEDIA_SONG = "s";
    public static final String MEDIA_ALBUM = "a";

    public static void readAlbums(IndexWriter indexWriter) throws Exception {
        for (int i = 0; i < ALBUM_DATA.length; i++) {
            String[] line = ALBUM_DATA[i];
            Document doc = new Document();
            Field idField = new Field(FIELD_ID, line[0],
Field.Store.YES, Field.Index.NO);
            doc.add(idField);
            Field titleFieldOriginal = new Field(FIELD_TITLE_ORIGINAL,
line[2], Field.Store.YES, Field.Index.TOKENIZED);
            doc.add(titleFieldOriginal);
            Field genreField = new Field(FIELD_GENRES, line[3],
Field.Store.YES, Field.Index.TOKENIZED);
            doc.add(genreField);
            Field explicitField = new Field(FIELD_EXPLICIT, line[4],
Field.Store.YES, Field.Index.UN_TOKENIZED);
            doc.add(explicitField);
            Field artistIdField = new Field(FIELD_ID_ARTIST, line[5],
Field.Store.YES, Field.Index.NO);
            doc.add(artistIdField);
            Field artistFieldOriginal = new
Field(FIELD_ARTIST_ORIGINAL, line[7], Field.Store.YES,
Field.Index.TOKENIZED);
            doc.add(artistFieldOriginal);
            indexWriter.addDocument(doc);
        }
    }

    public static void main(String[] args) throws Exception {
        // create index
        Directory directory = null;
        directory = FSDirectory.getDirectory("index", true);
        // RamDirectory Works!!!
        //directory = new RAMDirectory();
        IndexWriter indexWriter = new IndexWriter(directory, new
StandardAnalyzer(), true);
        indexWriter.setUseCompoundFile(false);
        readAlbums(indexWriter);
        System.out.println("Albums Indexed = " + indexWriter.docCount());
        indexWriter.optimize();
        indexWriter.close();

        // search index
        IndexSearcher indexSearcher = new IndexSearcher(directory);
        QueryParser parser = new
QueryParser(SearchTest.FIELD_ARTIST_ORIGINAL, new StandardAnalyzer());
        // serach for albums by various artists
        Query query = parser.parse("various");
        Hits hits = indexSearcher.search(query);
        indexSearcher.close();
        System.out.println("Hits found:" + hits.length());
        Iterator<Hit> i = hits.iterator();
        while(i.hasNext()) {
            Hit hit = i.next();
            System.out.println("Artist: " +
hit.get(SearchTest.FIELD_ARTIST_ORIGINAL) + " , album: " +
hit.get(SearchTest.FIELD_TITLE_ORIGINAL));
        }

    }

}

// output
Albums Indexed = 16
Hits found:2
Exception in thread "main" java.io.IOException: No such file or directory
        at java.io.RandomAccessFile.readBytes(Native Method)
        at java.io.RandomAccessFile.read(RandomAccessFile.java:315)
        at org.apache.lucene.store.FSIndexInput.readInternal(FSDirectory.java:454)
        at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:64)
        at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:33)
        at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:46)
        at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:69)
        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:62)
        at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)
        at org.apache.lucene.search.IndexSearcher.doc(IndexSearcher.java:83)
        at org.apache.lucene.search.Hits.doc(Hits.java:103)
        at org.apache.lucene.search.Hit.fetchTheHit(Hit.java:77)
        at org.apache.lucene.search.Hit.getDocument(Hit.java:54)
        at org.apache.lucene.search.Hit.get(Hit.java:101)
        at SearchTest.main(SearchTest.java:91)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 20:34:31 2006
Return-Path: <java-user-return-21410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73397 invoked from network); 16 Jun 2006 20:34:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 20:34:31 -0000
Received: (qmail 55969 invoked by uid 500); 16 Jun 2006 20:34:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55704 invoked by uid 500); 16 Jun 2006 20:34:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55693 invoked by uid 99); 16 Jun 2006 20:34:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 13:34:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 13:34:23 -0700
Received: by py-out-1112.google.com with SMTP id 39so735563pyu
        for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 13:34:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BJYzYp2K65/4Lx/cb7lh8zy0+4u091ix+7dmygq7gYUIg/ls3ew3spyA4nQYtk508bzYSI7Myub8V2kfpJM3fTpF9MmOxMzKugLoB5sYjbz36MH1xQTD1OwkByZ/KNUx0FLtgWMG7S7P9PdD0Sz1KroRfh0aoJAC3RLn2xcL0VA=
Received: by 10.35.134.12 with SMTP id l12mr4999517pyn;
        Fri, 16 Jun 2006 13:34:02 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Fri, 16 Jun 2006 13:34:02 -0700 (PDT)
Message-ID: <c68e39170606161334o4a8c1aafl65ef945867a45371@mail.gmail.com>
Date: Fri, 16 Jun 2006 16:34:02 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Error reading documents from file index lucene 2.0
In-Reply-To: <4962541c0606161217l1120bfc5qca623a02b500411c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4962541c0606161217l1120bfc5qca623a02b500411c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi John,

The IndexSearcher must remain open as long as you access the Hits
object returned from it.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


On 6/16/06, John Christopher Groppe <jgroppe@acm.org> wrote:
> I've encountered a very vexing problem with Lucene 2.0.0.  I am able
> to create and search an index, but if I attempt get a document out of
> the index, an IO exception is thrown.  The type of exception depends
> on the size of the index.  If the index is very small, say fewer than
> 10 documents I do not get the error.  If the index is a Ram index I do
> not get any errors.
>
> Am I doing something wrong, or is this a bug.  I am running:
>
> Lucene 2.0.0
> Java 1.5.0_07
> Windows XP Pro SP2
>
> Here is my test code followed by the Exception stack trace.
>
> Any help is greatly appreciated.  Thanks.
>
> John
>
> import java.util.Iterator;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.Hit;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.store.RAMDirectory;
>
> public class SearchTest {
>
>     private static final String[][] ALBUM_DATA = {
>         {"51271", "#1 Def Spot Jam [EDITED]", "#1 Def Spot Jam
> [EDITED]", "Rap/Hip Hop", "0", "1016", "Various Artists", "Various
> Artists"},
>         {"51270", "#1 Def Spot Jam [EXPLICIT]", "#1 Def Spot Jam
> [EXPLICIT]", "Rap/Hip Hop", "1", "1016", "Various Artists", "Various
> Artists"},
>         {"64967", "#1 Record/Radio City", "#1 Record/Radio City",
> "Rock", "0", "663", "Big Star", "Big Star"},
>         {"35141", "#1 [EXPLICIT]","#1 [EXPLICIT]","Alternative Rock",
> "1", "9686", "Fischerspooner", "Fischerspooner"},
>         {"55322", "#1's", "#1's", "Jazz/Blues", "0", "2759", "Louis
> Jordan", "Louis Jordan"},
>         {"59738", "#1's", "#1's", "R&B/Soul", "0", "6660", "Destiny's
> Child", "Destiny's Child"},
>         {"25384",  "001", "001", "Alternative Rock", "0", "7733",
> "Dovetail Joint", "Dovetail Joint"},
>         {"2719", "02", "02", "Pop", "0", "807", "O-Town", "O-Town"},
>         {"35398", "02: Avalon Remixed","02: Avalon Remixed","Pop",
> "0","9770","Avalon","Avalon"},
>         {"33073","0304","0304","Pop","0","1116","Jewel","Jewel"},
>         {"27876","05:22:09:12 Off","05:22:09:12 Off","Alternative
> Rock","0","8945","Front 242","Front 242"},
>         {"24513","1 Fille And 4 Types","1 fille & 4
> types","Pop","0","5074","Celine Dion","Celine Dion"},
>         {"23074","1+1","1+1","Jazz/Blues","0","3568","Wayne
> Shorter","Wayne Shorter"},
>         {"15045","1,000 Fires","1,000 Fires","Pop","0","2888","Traci
> Lords","Traci Lords"},
>         {"42193","1.22.03.Acoustic","1.22.03.Acoustic","Pop","0","823","Maroon
> 5","Maroon 5"},
>         {"22537","10","10","Rap/Hip Hop","0","3631","LL Cool J","LL Cool J"}
>     };
>
>     public static final String FIELD_ID = "id";
>     public static final String FIELD_TITLE = "title";
>     public static final String FIELD_TITLE_ORIGINAL = "titleOriginal";
>     public static final String FIELD_GENRES = "genres";
>     public static final String FIELD_EXPLICIT = "explicit";
>     public static final String FIELD_ID_ARTIST = "idArtist";
>     public static final String FIELD_ARTIST = "artist";
>     public static final String FIELD_ARTIST_ORIGINAL = "artistOriginal";
>     public static final String FIELD_MEDIA = "media";
>     public static final String MEDIA_SONG = "s";
>     public static final String MEDIA_ALBUM = "a";
>
>     public static void readAlbums(IndexWriter indexWriter) throws Exception {
>         for (int i = 0; i < ALBUM_DATA.length; i++) {
>             String[] line = ALBUM_DATA[i];
>             Document doc = new Document();
>             Field idField = new Field(FIELD_ID, line[0],
> Field.Store.YES, Field.Index.NO);
>             doc.add(idField);
>             Field titleFieldOriginal = new Field(FIELD_TITLE_ORIGINAL,
> line[2], Field.Store.YES, Field.Index.TOKENIZED);
>             doc.add(titleFieldOriginal);
>             Field genreField = new Field(FIELD_GENRES, line[3],
> Field.Store.YES, Field.Index.TOKENIZED);
>             doc.add(genreField);
>             Field explicitField = new Field(FIELD_EXPLICIT, line[4],
> Field.Store.YES, Field.Index.UN_TOKENIZED);
>             doc.add(explicitField);
>             Field artistIdField = new Field(FIELD_ID_ARTIST, line[5],
> Field.Store.YES, Field.Index.NO);
>             doc.add(artistIdField);
>             Field artistFieldOriginal = new
> Field(FIELD_ARTIST_ORIGINAL, line[7], Field.Store.YES,
> Field.Index.TOKENIZED);
>             doc.add(artistFieldOriginal);
>             indexWriter.addDocument(doc);
>         }
>     }
>
>     public static void main(String[] args) throws Exception {
>         // create index
>         Directory directory = null;
>         directory = FSDirectory.getDirectory("index", true);
>         // RamDirectory Works!!!
>         //directory = new RAMDirectory();
>         IndexWriter indexWriter = new IndexWriter(directory, new
> StandardAnalyzer(), true);
>         indexWriter.setUseCompoundFile(false);
>         readAlbums(indexWriter);
>         System.out.println("Albums Indexed = " + indexWriter.docCount());
>         indexWriter.optimize();
>         indexWriter.close();
>
>         // search index
>         IndexSearcher indexSearcher = new IndexSearcher(directory);
>         QueryParser parser = new
> QueryParser(SearchTest.FIELD_ARTIST_ORIGINAL, new StandardAnalyzer());
>         // serach for albums by various artists
>         Query query = parser.parse("various");
>         Hits hits = indexSearcher.search(query);
>         indexSearcher.close();
>         System.out.println("Hits found:" + hits.length());
>         Iterator<Hit> i = hits.iterator();
>         while(i.hasNext()) {
>             Hit hit = i.next();
>             System.out.println("Artist: " +
> hit.get(SearchTest.FIELD_ARTIST_ORIGINAL) + " , album: " +
> hit.get(SearchTest.FIELD_TITLE_ORIGINAL));
>         }
>
>     }
>
> }
>
> // output
> Albums Indexed = 16
> Hits found:2
> Exception in thread "main" java.io.IOException: No such file or directory
>         at java.io.RandomAccessFile.readBytes(Native Method)
>         at java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>         at org.apache.lucene.store.FSIndexInput.readInternal(FSDirectory.java:454)
>         at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:64)
>         at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:33)
>         at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:46)
>         at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:69)
>         at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:62)
>         at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)
>         at org.apache.lucene.search.IndexSearcher.doc(IndexSearcher.java:83)
>         at org.apache.lucene.search.Hits.doc(Hits.java:103)
>         at org.apache.lucene.search.Hit.fetchTheHit(Hit.java:77)
>         at org.apache.lucene.search.Hit.getDocument(Hit.java:54)
>         at org.apache.lucene.search.Hit.get(Hit.java:101)
>         at SearchTest.main(SearchTest.java:91)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 21:10:45 2006
Return-Path: <java-user-return-21411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90141 invoked from network); 16 Jun 2006 21:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 21:10:44 -0000
Received: (qmail 22030 invoked by uid 500); 16 Jun 2006 21:10:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21934 invoked by uid 500); 16 Jun 2006 21:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21900 invoked by uid 99); 16 Jun 2006 21:10:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 14:10:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 14:10:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8AED95B763; Fri, 16 Jun 2006 14:10:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7BA297F403
	for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 14:10:14 -0700 (PDT)
Date: Fri, 16 Jun 2006 14:10:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Error reading documents from file index lucene 2.0
In-Reply-To: <4962541c0606161217l1120bfc5qca623a02b500411c@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606161405590.593@hal.rescomp.berkeley.edu>
References: <4962541c0606161217l1120bfc5qca623a02b500411c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:         Hits hits = indexSearcher.search(query);
:         indexSearcher.close();
:         System.out.println("Hits found:" + hits.length());
:         Iterator<Hit> i = hits.iterator();

It's not legal to use an instance of Hits returned from a Searcher after
that Searcher has been closed.  The reason it may work sometimes with a
small number of documents is that Hits does some caching that makes it
unneccessary to reuse the searcher.

I'm not sure why it works with a RAMDirectory ... maybe close is a is a
NOOP in that case?

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 16 22:29:37 2006
Return-Path: <java-user-return-21412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11223 invoked from network); 16 Jun 2006 22:29:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2006 22:29:37 -0000
Received: (qmail 46328 invoked by uid 500); 16 Jun 2006 22:29:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46293 invoked by uid 500); 16 Jun 2006 22:29:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46282 invoked by uid 99); 16 Jun 2006 22:29:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 15:29:31 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.107] (HELO web34109.mail.mud.yahoo.com) (66.163.178.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Jun 2006 15:29:29 -0700
Received: (qmail 34449 invoked by uid 60001); 16 Jun 2006 22:29:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=6DihQKcuPkg/l7awAIhWIL//QrqM1qOKuFizsZEbP97t7Ao3joQpXudX9TPV7yp28RADpQ5mwsFNz394lKGdc/2QiTCcOGGeIsqfXd5yt5BFXQozTu23UIrYMnfxmyn/yVVRtSOglEkH2JKX5H8sgUBw0xPwL6xZChO2yf3KNSE=  ;
Message-ID: <20060616222907.34447.qmail@web34109.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34109.mail.mud.yahoo.com via HTTP; Fri, 16 Jun 2006 15:29:07 PDT
Date: Fri, 16 Jun 2006 15:29:07 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: faceting and categorizing on color?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Everyone,

I have been reading several threads about facet counts
and category counts and was wondering if/how they
might apply to searching for colors. Let's say that
there is a Lucene index where each document
corresponds to an image. In addition, each document
contains the top 10 most frequently occurring colors 
(hex values) in its associated image along with some
other axillary data. So a few example documents might
look like this:

Field	Value
IMAGE	1
COLORS	F00000 FF0000 FFF000 FFFF00 FFFFF0 FFFFFF
E00000 EE0000 EEE000 EEEE00
PIXELS	10000
FORMAT	JPG

Field	Value
IMAGE	2
COLORS	F00000 F0F000 F0FF00 F0FFF0 F0FFFF FFFFFF
E00000 E0E000 E0EE00 E0EEE0
PIXELS	50000
FORMAT	JPG

Field	Value
IMAGE	3
COLORS	F00000 F00F00 F00FF0 F00FFF FFFFFF E00000
E0E000 E0EE00 E0EEE0 E0EEEE
PIXELS	1000
FORMAT	PNG

Field	Value
IMAGE	4
COLORS	F00000 F00F00 F00FF0 F00FFF CCCCCC E00000
E0E000 E0EE00 E0EEE0 E0EEEE
PIXELS	20000
FORMAT	GIF

If I setup the COLORS field such that it is of type
Field.Keyword, then I can construct a query
COLORS:FFFFFF with a StandardAnalyzer that returns the
first 3 documents. The additional bit of information
I'd like to calculate/return is the list of colors the
images share, in order of most frequent to least
frequent i.e.

F00000, 3 occurrences
E00000, 3 occurrences
E0E000, 2 occurrences
E0EE00, 2 occurrences
FF0000, 1 occurrence
...

I could use a custom HitCollector to collect and order
this information, but it would cause a sizable
performance hit.This thread from last year:
http://www.nabble.com/forum/ViewTopic.jtp?topic=266441&tview=threaded

Seems to suggest the creation of a String[] of colors
and then iterate over it using a QueryFilter, AND'ing
the result sets bits with the filtered bits, sorting
based on cardinality. That works in my tests with a
limited number of colors, but my String[] of colors
could contain 16.7M values, and most certainly will
contain at least several million.

I read up on BitSets and Solr's use of them as well in
this thread:
http://www.gossamer-threads.com/lists/lucene/java-user/35427?do=post_view_threaded

But I think that the solutions suggested assume
several hundred facets i.e. price, manufacturer, size,
etc. each one having a few hundred possible values.
Those would make sense so that I could provide
filtering based on FORMAT or number of PIXELS, but
again, don't seem to scale in the colors example.

Am I mistaken in thinking that my problem is similar
to faceting/categorization/rollup, just on a different
scale? I suppose I could also structure my document
such that it looked like this:

Field	Value
IMAGE	1
COLOR	F00000
COLOR	FF0000
COLOR	FFF000
COLOR	FFFF00
COLOR	FFFFF0
COLOR	FFFFFF
COLOR	E00000
COLOR	EE0000
COLOR	EEE000
COLOR	EEEE00
PIXELS	10000
FORMAT	JPG

That would allow me to do something with TermEnums,
but I don't see how it would be any better than using
a HitCollector. Does the above document structure make
things any better/worse/the same compared to the
initial document structure? If the answer to my
question is trivial would anything change if I wanted
to weight the colors. For example, if the initial
document looked like:

Field	Value
IMAGE	1
COLORS	10-F00000 6-FF0000 3-FFF000 9-FFFF00 7-FFFFF0
1-FFFFFF 2-E00000 4-EE0000 8-EEE000 5-EEEE00
PIXELS	10000
FORMAT	JPG

That would be interpreted as FFFFFF is the most
dominant of the top 10 most dominant colors and F00000
is the least. Would that be a terrible document
structure?

Thanx in advance, especially for wading through this
entire post :o)

JAMES

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 17 02:45:55 2006
Return-Path: <java-user-return-21413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66944 invoked from network); 17 Jun 2006 02:45:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 02:45:55 -0000
Received: (qmail 30904 invoked by uid 500); 17 Jun 2006 02:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30870 invoked by uid 500); 17 Jun 2006 02:45:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30859 invoked by uid 99); 17 Jun 2006 02:45:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 19:45:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 19:45:47 -0700
Received: by nf-out-0910.google.com with SMTP id l35so900808nfa
        for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 19:45:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=SpNPZsB6vacyINIWY8/OHIRZ3TpJ+dDsxjxMep0XU8NBAugS5rkRtZEiNcW7E7nVgN7+Afp4ZpwBvhs+xzmy5f2zQE2s4kardHaJb1z191G8WlDNkiB/2eHFP31MXy0cCwTzuxuL8+vanmK5f4iJaHJSMGvSG2fos9Vj63qvNzE=
Received: by 10.49.31.1 with SMTP id i1mr2405584nfj;
        Fri, 16 Jun 2006 19:45:26 -0700 (PDT)
Received: by 10.49.39.19 with HTTP; Fri, 16 Jun 2006 19:45:26 -0700 (PDT)
Message-ID: <8837fb770606161945q6fa4ca26n3002ec84490af2ba@mail.gmail.com>
Date: Fri, 16 Jun 2006 19:45:26 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: term index
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi:

   I have been playing with Lucene's term postings, e.g. iterating
over TermEnums etc.

   For a field, say F, with values: {a, b, c, d, e}, is there a way to
get the index of a value, e.g. for a, return 0, and for c, return 2.
In a way, I am interested in getting the distance between Term("F","")
and Term("F","d") for example.

Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 17 04:58:28 2006
Return-Path: <java-user-return-21414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87204 invoked from network); 17 Jun 2006 04:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 04:58:26 -0000
Received: (qmail 90167 invoked by uid 500); 17 Jun 2006 04:58:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88792 invoked by uid 500); 17 Jun 2006 04:57:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88186 invoked by uid 99); 17 Jun 2006 04:57:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 21:57:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of foxwu718@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jun 2006 21:33:55 -0700
Received: by nf-out-0910.google.com with SMTP id l35so927808nfa
        for <java-user@lucene.apache.org>; Fri, 16 Jun 2006 21:33:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LpHw14ZP4P6NIuTFb8X6I/8ehuKqPq9F3dRxNIJSbq2/DCs2nmXSFCAl+JnRlV2EgCTuUEKzGHN5uEJzS6m0kBTm7x5DQoyzrS3XwaFKw8rXedDeQe5SFZPvYFqslT6IUUNfHs1voqnDH+gvDIcBVuZ9cV3d26eUkBJz03OAYQA=
Received: by 10.49.91.12 with SMTP id t12mr3475717nfl;
        Fri, 16 Jun 2006 21:33:33 -0700 (PDT)
Received: by 10.48.219.3 with HTTP; Fri, 16 Jun 2006 21:33:33 -0700 (PDT)
Message-ID: <9e7ba420606162133k7bed4202te4b2114389f3a91a@mail.gmail.com>
Date: Sat, 17 Jun 2006 12:33:33 +0800
From: "wu fox" <foxwu718@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CJKAnalyzer - does it work?
In-Reply-To: <8375F431-E668-4429-B84F-681B0BE3A2C5@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34128_31299073.1150518813500"
References: <BE3E7BC7F7553B4A9362D4192ECD308A0178FD0E@neptune.int.mediasurface.com>
	 <FEF43296-0190-47F1-B85D-2FBCBF483E77@ehatchersolutions.com>
	 <fb9748c90606151629j3623193atd87622e8a063100f@mail.gmail.com>
	 <8375F431-E668-4429-B84F-681B0BE3A2C5@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_34128_31299073.1150518813500
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

IEVyaWsgaXMgdmVyeSBodW1vcm91cy4gRXJpayC63NPExKwKCj4KPgo=
------=_Part_34128_31299073.1150518813500--

From java-user-return-21415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 17 07:42:50 2006
Return-Path: <java-user-return-21415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22871 invoked from network); 17 Jun 2006 07:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 07:42:50 -0000
Received: (qmail 83416 invoked by uid 500); 17 Jun 2006 07:42:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83379 invoked by uid 500); 17 Jun 2006 07:42:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83368 invoked by uid 99); 17 Jun 2006 07:42:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 00:42:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 00:42:41 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 7AD94187B6; Sat, 17 Jun 2006 07:42:16 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 54149187B4
	for <java-user@lucene.apache.org>; Sat, 17 Jun 2006 07:42:13 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: indexing emails
Date: Sat, 17 Jun 2006 08:42:30 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0026_01C691E9.F7C1AB70"
In-Reply-To: <1150488809.5674.217.camel@localhost>
Thread-Index: AcaRgWsV33YMGp/rT1W84WvTWyCQnwAXBv+Q
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060617074213.54149187B4@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0026_01C691E9.F7C1AB70
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Having spent a lot of time getting this wrong myself in an e-mail
indexer(!), I urge you to consider whether in your query interface you will
need to look for mail to "john*" rather than john@boo.com, because "john*"
may have been addressed to john@boo.net or john.smith@boo2.com. If you index
only john@boo.com (untokenised) you will have to use a PrefixQuery to look
for "john*", and you are liable to hit BooleanQuery.TooManyClauses problems,
if you have more than 1024 (or BooleanQuery.getMaxClauseCount()) e-mail
addresses in your index starting with "john". 

I'm trying to figure out a good design for this now for my own e-mail
indexing application, considering also whether I should cater for searches
for "*smith*". I'm coming round to the realisation that WildCardQuery and
PrefixQuery are not great things to depend upon for getting e-mail addresses
from an index and the right thing to do is to break the address up into
natural tokens ('.' or '-') in one field and leave them intact in another
field. It isn't ideal; e-mail addresses with no separator between initials
or first names and last name still need a PrefixQuery or WildcardQuery, if
you want to search for last names, but it does make some queries possible
which would otherwise blow up.

-----Original Message-----
From: karl wettin [mailto:kalle@snigel.net] 
Sent: 16 June 2006 21:13
To: java-user@lucene.apache.org
Subject: Re: indexing emails

On Fri, 2006-06-16 at 15:20 -0400, Michael J. Prichard wrote:
> I am working on indexing emails and want to have a "to" field.  I am 
> currently putting all the emails on one line seperated w/
spaces...example:
> 
> michael@foo.bar john@boo.com jane@bar.com
> 
> Then i index that with a StandardAnalyzer as follows:
> 
> doc.add(new Field("to", (String) itemContent.get("to"), 
> Field.Store.YES, Field.Index.UN_TOKENIZED));
> 
> Question is...is this the best way to do it?  I want to be able to 
> search for michael@foo.bar and pick out just those Documents, etc.

You can either do it as above (but you want to TOKENIZE the field) or you
could create a new UN_TOKENIZED field for each email address.

The second will require less CPU as it does not involve any lexical
analysis. It will also create larger distance between the addresses in the
index (see span queries and term positions).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0026_01C691E9.F7C1AB70
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxNzA3
NDIyOVowIwYJKoZIhvcNAQkEMRYEFGzTWVjisqsYsU9xTMLCmxdNTNhOMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAGlrAHEH/IWgWpZsYHMKiQLss+8e0ktKPCtf
NuFlXslYrbqda4zjglWPpOrdO6/V5Ojs0V/GYyg7KSevhKWdgz3AtytiZRUOn/dLISAfaYVkYam6
QYm1NM9l8GRwvsrkLvI4I1HLY8APSZDmsMd+MfnhrzDYopWigQHNyyAHoUT4+4rEPp+3xUzwvd82
IEIN2mrPKq1ZUvVUhiRenQRVu9jJBGua9KO/2TmqhzcSeWXD87AXQNzQUuPkimaWO20jxRf34+KM
YABwoYUZ4HDmcEd2DCgpfhaIa2vSlcWvInvkYuZ2VM2VLUw14QWHWcG/1+CZnuvP29c0uLKXSPD9
yZkAAAAAAAA=

------=_NextPart_000_0026_01C691E9.F7C1AB70--


From java-user-return-21416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 17 15:15:36 2006
Return-Path: <java-user-return-21416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1401 invoked from network); 17 Jun 2006 15:15:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 15:15:36 -0000
Received: (qmail 99471 invoked by uid 500); 17 Jun 2006 15:15:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99441 invoked by uid 500); 17 Jun 2006 15:15:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99411 invoked by uid 99); 17 Jun 2006 15:15:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 08:15:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 08:15:28 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1FrcVq-000154-AO
	for java-user@lucene.apache.org; Sat, 17 Jun 2006 17:15:02 +0200
Received: from 105-051-128-083.dynamic.caiway.nl ([83.128.51.105])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 17 Jun 2006 17:15:02 +0200
Received: from typeseven by 105-051-128-083.dynamic.caiway.nl with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 17 Jun 2006 17:15:02 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  typeseven <typeseven@gmail.com>
Subject:  Re: Survey: Lucene and Java 1.4 vs. 1.5
Date:  Sat, 17 Jun 2006 17:10:18 +0200
Lines: 18
Message-ID:  <n142c3dfebty$.1wushirv8zp3y.dlg@40tude.net>
References:  <20060616154815.45928.qmail@web50306.mail.yahoo.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset="us-ascii"
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 105-051-128-083.dynamic.caiway.nl
User-Agent: 40tude_Dialog/2.0.15.1
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, 16 Jun 2006 08:48:15 -0700 (PDT), Otis Gospodnetic wrote:

> Hello everyone,
> 
> If you have 15 seconds to spare, please let us (Lucene developers) know which version of Java you are using with Lucene: 1.4 or 1.5
> 
> All it takes is 1 click on one of the two choices:
>   http://www.quimble.com/poll/view/2156
> 
> No cheating, please.  Thanks!
> Otis

Have you ever realised there are ppl using Lucene in (shudder) VJ# ? FYI
this is JDK 1.2 mostly.

/d

p.s. Or is Lucene.NET not dead after all?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 17 15:33:29 2006
Return-Path: <java-user-return-21417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7024 invoked from network); 17 Jun 2006 15:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 15:33:29 -0000
Received: (qmail 14817 invoked by uid 500); 17 Jun 2006 15:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14043 invoked by uid 500); 17 Jun 2006 15:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14011 invoked by uid 99); 17 Jun 2006 15:33:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 08:33:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 08:31:38 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FrclP-00030c-EZ
	for java-user@lucene.apache.org; Sat, 17 Jun 2006 17:31:07 +0200
Received: from 105-051-128-083.dynamic.caiway.nl ([83.128.51.105])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 17 Jun 2006 17:31:07 +0200
Received: from typeseven by 105-051-128-083.dynamic.caiway.nl with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 17 Jun 2006 17:31:07 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  typeseven <typeseven@gmail.com>
Subject:  Re: Survey: Lucene and Java 1.4 vs. 1.5
Date:  Sat, 17 Jun 2006 17:31:06 +0200
Lines: 8
Message-ID:  <zsqnapmawkjc$.1ezszxqecmd7a$.dlg@40tude.net>
References:  <20060616154815.45928.qmail@web50306.mail.yahoo.com> <n142c3dfebty$.1wushirv8zp3y.dlg@40tude.net>
Mime-Version:  1.0
Content-Type:  text/plain; charset="us-ascii"
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 105-051-128-083.dynamic.caiway.nl
User-Agent: 40tude_Dialog/2.0.15.1
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sat, 17 Jun 2006 17:10:18 +0200, typeseven wrote:

> p.s. Or is Lucene.NET not dead after all?

I just found out that there in fact are active lucene-net mailinglists:
consider the p.s. question answered.

/d


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 17 15:40:05 2006
Return-Path: <java-user-return-21418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8224 invoked from network); 17 Jun 2006 15:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 15:40:05 -0000
Received: (qmail 22701 invoked by uid 500); 17 Jun 2006 15:39:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22665 invoked by uid 500); 17 Jun 2006 15:39:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22654 invoked by uid 99); 17 Jun 2006 15:39:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 08:39:58 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 17 Jun 2006 08:39:57 -0700
Received: (qmail 71065 invoked by uid 60001); 17 Jun 2006 15:39:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=intYAZv3j4P8A4SUvq0ULBQe5hWNvNsk2wxUu4sP1Ib8WViU1OpQlTjkwMfxpJb9Zmijwh8BwZuEX43w6yv4Vox2gvDHxdzjIgZnwVfcJC9c0WoVXGvrRMVK40+7lwhICUDnOdLdZx1oCQwJsOGFL6I7j2u7uCIMv80TxwP3xXg=  ;
Message-ID: <20060617153936.71063.qmail@web50303.mail.yahoo.com>
Received: from [72.229.167.99] by web50303.mail.yahoo.com via HTTP; Sat, 17 Jun 2006 08:39:36 PDT
Date: Sat, 17 Jun 2006 08:39:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Survey: Lucene and Java 1.4 vs. 1.5
To: java-user@lucene.apache.org
In-Reply-To: <n142c3dfebty$.1wushirv8zp3y.dlg@40tude.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene.NET is not dead (it's developing in Apache incubator) at all.

Otis

----- Original Message ----
From: typeseven <typeseven@gmail.com>
To: java-user@lucene.apache.org
Sent: Saturday, June 17, 2006 11:10:18 AM
Subject: Re: Survey: Lucene and Java 1.4 vs. 1.5

On Fri, 16 Jun 2006 08:48:15 -0700 (PDT), Otis Gospodnetic wrote:

> Hello everyone,
> 
> If you have 15 seconds to spare, please let us (Lucene developers) know which version of Java you are using with Lucene: 1.4 or 1.5
> 
> All it takes is 1 click on one of the two choices:
>   http://www.quimble.com/poll/view/2156
> 
> No cheating, please.  Thanks!
> Otis

Have you ever realised there are ppl using Lucene in (shudder) VJ# ? FYI
this is JDK 1.2 mostly.

/d

p.s. Or is Lucene.NET not dead after all?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 17 18:47:28 2006
Return-Path: <java-user-return-21419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43554 invoked from network); 17 Jun 2006 18:47:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2006 18:47:28 -0000
Received: (qmail 5713 invoked by uid 500); 17 Jun 2006 18:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5667 invoked by uid 500); 17 Jun 2006 18:47:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5646 invoked by uid 99); 17 Jun 2006 18:47:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 11:47:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jun 2006 11:47:16 -0700
Received: by ug-out-1314.google.com with SMTP id u2so1979548uge
        for <java-user@lucene.apache.org>; Sat, 17 Jun 2006 11:46:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=M+bR4CqVa804kXazRIt+KDg/zGat8rwegytvj64ceyNlYcY5VPA8TNiLpzA2XupkGbSqmAZQJDTp7Mm2ZyI62aw43YdWPznanJubH1QEmOfd8xC/47EcFI7Cd1f0t03WMVRPNJhFmt5jJC6oJ2KUegiz+2FpJkEpeSBWPzmIkEk=
Received: by 10.78.72.20 with SMTP id u20mr1443662hua;
        Sat, 17 Jun 2006 11:46:55 -0700 (PDT)
Received: by 10.78.58.8 with HTTP; Sat, 17 Jun 2006 11:46:54 -0700 (PDT)
Message-ID: <8c0c601f0606171146x732afee1v19a67fe9cadbd4d4@mail.gmail.com>
Date: Sat, 17 Jun 2006 20:46:54 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Survey: Lucene and Java 1.4 vs. 1.5
In-Reply-To: <20060616154815.45928.qmail@web50306.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060616154815.45928.qmail@web50306.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Here 1.5, on SuSE Linux x86_64

Tx

Paul

On 6/16/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hello everyone,
>
> If you have 15 seconds to spare, please let us (Lucene developers) know which version of Java you are using with Lucene: 1.4 or 1.5
>
> All it takes is 1 click on one of the two choices:
>   http://www.quimble.com/poll/view/2156
>
> No cheating, please.  Thanks!
> Otis
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 08:57:34 2006
Return-Path: <java-user-return-21420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71434 invoked from network); 18 Jun 2006 08:57:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 08:57:34 -0000
Received: (qmail 67723 invoked by uid 500); 18 Jun 2006 08:57:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66698 invoked by uid 500); 18 Jun 2006 08:57:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66687 invoked by uid 99); 18 Jun 2006 08:57:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 01:57:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of PrasenjitM@aol.com designates 64.12.137.1 as permitted sender)
Received: from [64.12.137.1] (HELO imo-m20.mx.aol.com) (64.12.137.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 01:57:21 -0700
Received: from PrasenjitM@aol.com
	by imo-m20.mx.aol.com (mail_out_v38_r7.5.) id h.223.cc299be (16112)
	 for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 04:56:57 -0400 (EDT)
Received: from  aol.com (mow-d19.webmail.aol.com [205.188.139.135]) by air-id12.mx.aol.com (v109.13) with ESMTP id MAILINID124-3ef04495155922c; Sun, 18 Jun 2006 04:56:57 -0400
Date: Sun, 18 Jun 2006 04:56:57 -0400
From: PrasenjitM@aol.com
To: java-user@lucene.apache.org
Subject: Use Lucene for "Frequent Itemset" computation
MIME-Version: 1.0
Message-ID: <1637B7E0.24AA6781.0C8CD8E5@aol.com>
X-Mailer: Atlas Mailer 2.0
X-AOL-IP: 203.101.56.12
X-AOL-Language: english
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just curious, has anyone tried to use Lucene  to do "frequent itemset" computation for auto-clustering. For a given pair of items/words we can use lucene and do a conjunctive search from those items. Only if we can figure out a way to minimize the number of possible itemsets. 

Thanks,
Prasen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 14:24:43 2006
Return-Path: <java-user-return-21421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24449 invoked from network); 18 Jun 2006 14:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 14:24:43 -0000
Received: (qmail 48061 invoked by uid 500); 18 Jun 2006 14:24:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47739 invoked by uid 500); 18 Jun 2006 14:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47728 invoked by uid 99); 18 Jun 2006 14:24:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 07:24:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.177] (HELO smtpout.mac.com) (17.250.248.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 07:24:30 -0700
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout07/MantshX 4.0) with ESMTP id k5IEO9VD010105
	for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 07:24:09 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id k5IEO7ah027121
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 07:24:08 -0700 (PDT)
Message-ID: <4495620D.7050107@mac.com>
Date: Sun, 18 Jun 2006 10:24:13 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing emails
References: <20060617074213.54149187B4@mail.seseit.com>
In-Reply-To: <20060617074213.54149187B4@mail.seseit.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is great!  I was hoping to find some people who are dealing with 
this issue.  I am going to try to tokenize the email addresses and see 
what that does.  I am going to use a StandardAnalyzer which (if I am not 
mistaken) will keep the email address as is.  Would I still have to use 
PrefixQuery for queries such as john*?

Anyone else want to comment?

-Michael

Rob Staveley (Tom) wrote:

>Having spent a lot of time getting this wrong myself in an e-mail
>indexer(!), I urge you to consider whether in your query interface you will
>need to look for mail to "john*" rather than john@boo.com, because "john*"
>may have been addressed to john@boo.net or john.smith@boo2.com. If you index
>only john@boo.com (untokenised) you will have to use a PrefixQuery to look
>for "john*", and you are liable to hit BooleanQuery.TooManyClauses problems,
>if you have more than 1024 (or BooleanQuery.getMaxClauseCount()) e-mail
>addresses in your index starting with "john". 
>
>I'm trying to figure out a good design for this now for my own e-mail
>indexing application, considering also whether I should cater for searches
>for "*smith*". I'm coming round to the realisation that WildCardQuery and
>PrefixQuery are not great things to depend upon for getting e-mail addresses
>from an index and the right thing to do is to break the address up into
>natural tokens ('.' or '-') in one field and leave them intact in another
>field. It isn't ideal; e-mail addresses with no separator between initials
>or first names and last name still need a PrefixQuery or WildcardQuery, if
>you want to search for last names, but it does make some queries possible
>which would otherwise blow up.
>
>-----Original Message-----
>From: karl wettin [mailto:kalle@snigel.net] 
>Sent: 16 June 2006 21:13
>To: java-user@lucene.apache.org
>Subject: Re: indexing emails
>
>On Fri, 2006-06-16 at 15:20 -0400, Michael J. Prichard wrote:
>  
>
>>I am working on indexing emails and want to have a "to" field.  I am 
>>currently putting all the emails on one line seperated w/
>>    
>>
>spaces...example:
>  
>
>>michael@foo.bar john@boo.com jane@bar.com
>>
>>Then i index that with a StandardAnalyzer as follows:
>>
>>doc.add(new Field("to", (String) itemContent.get("to"), 
>>Field.Store.YES, Field.Index.UN_TOKENIZED));
>>
>>Question is...is this the best way to do it?  I want to be able to 
>>search for michael@foo.bar and pick out just those Documents, etc.
>>    
>>
>
>You can either do it as above (but you want to TOKENIZE the field) or you
>could create a new UN_TOKENIZED field for each email address.
>
>The second will require less CPU as it does not involve any lexical
>analysis. It will also create larger distance between the addresses in the
>index (see span queries and term positions).
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 16:06:10 2006
Return-Path: <java-user-return-21422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42496 invoked from network); 18 Jun 2006 16:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 16:06:09 -0000
Received: (qmail 15706 invoked by uid 500); 18 Jun 2006 16:06:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15668 invoked by uid 500); 18 Jun 2006 16:06:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15654 invoked by uid 99); 18 Jun 2006 16:06:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 09:06:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.181] (HELO smtpout.mac.com) (17.250.248.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 09:05:58 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout11/MantshX 4.0) with ESMTP id k5IG5cTc010112
	for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 09:05:38 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k5IG5af6023030
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 09:05:37 -0700 (PDT)
Message-ID: <449579D6.9070202@mac.com>
Date: Sun, 18 Jun 2006 12:05:42 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing emails --> mutliple "to" emails, setting position same
References: <20060617074213.54149187B4@mail.seseit.com> <4495620D.7050107@mac.com>
In-Reply-To: <4495620D.7050107@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So I have emails with multiple recipients (of course, this is very 
common).  I currently put them all on the same string seperated by space 
and then tokenize them with Standard Analyzer.  I was looking into 
SynonymAnalyzers and see that you can drop multiple tokens with the same 
position.  Would this be a better approach to the indexing design 
mentioned above?

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 16:40:13 2006
Return-Path: <java-user-return-21423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46750 invoked from network); 18 Jun 2006 16:40:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 16:40:12 -0000
Received: (qmail 35907 invoked by uid 500); 18 Jun 2006 16:40:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35871 invoked by uid 500); 18 Jun 2006 16:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35860 invoked by uid 99); 18 Jun 2006 16:40:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 09:40:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.182] (HELO smtpout.mac.com) (17.250.248.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 09:40:03 -0700
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout12/MantshX 4.0) with ESMTP id k5IGdhux001845
	for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 09:39:43 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k5IGde7k020449
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 09:39:42 -0700 (PDT)
Message-ID: <449581D3.1080602@mac.com>
Date: Sun, 18 Jun 2006 12:39:47 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Unique indexes?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there anything like a unique key for lucene indexes?  For example, 
say I want to have unique ItemID's in my index...do I need to check for 
that before insert or can I lock it down with Lucene's API?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 17:00:48 2006
Return-Path: <java-user-return-21424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52575 invoked from network); 18 Jun 2006 17:00:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 17:00:48 -0000
Received: (qmail 57051 invoked by uid 500); 18 Jun 2006 17:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57015 invoked by uid 500); 18 Jun 2006 17:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57004 invoked by uid 99); 18 Jun 2006 17:00:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 10:00:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 10:00:36 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1Fs0d2-0000lR-Po
	for java-user@lucene.apache.org; Sun, 18 Jun 2006 19:00:04 +0200
Received: from host130-18.pool874.interbusiness.it ([87.4.18.130])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 19:00:04 +0200
Received: from andreas.moroder by host130-18.pool874.interbusiness.it with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 19:00:04 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Andreas Moroder <andreas.moroder@gmx.net>
Subject:  Lucene as syslog storage
Date:  Sun, 18 Jun 2006 18:58:16 +0200
Lines: 12
Message-ID:  <e740n6$ebk$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7Bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host130-18.pool874.interbusiness.it
User-Agent: KNode/0.9.0
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I would like to write a application to browse around and search the log
files of linux machines, like www.splunk.org does.

Would lucene be the right db to store such text information ?
Because the log info should be stored in the db continuously and not as
batch, this would create many thousand small documents. Is this a problem
for lucene ?

Bye
Andreas


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 17:10:54 2006
Return-Path: <java-user-return-21425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54012 invoked from network); 18 Jun 2006 17:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 17:10:54 -0000
Received: (qmail 65117 invoked by uid 500); 18 Jun 2006 17:10:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64115 invoked by uid 500); 18 Jun 2006 17:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64104 invoked by uid 99); 18 Jun 2006 17:10:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 10:10:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 10:10:43 -0700
Received: by nf-out-0910.google.com with SMTP id l35so1129258nfa
        for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 10:10:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=p6JTyUb8jUBfXaLNNWAhueVu/ea1w91d3JsU81k8X4yIrYdpHsRWslq+8e2lyravB6FlkK433LWQ14i8WuFb2EmBNECc+bdfE7GeazYbq9aMBl48taaqS8lzQw4r3mnFVWxtzckOJYiErG6GWzhVoyLWLtDUzqiE1yH3AokY1ZQ=
Received: by 10.49.95.11 with SMTP id x11mr3800858nfl;
        Sun, 18 Jun 2006 10:10:21 -0700 (PDT)
Received: by 10.49.65.5 with HTTP; Sun, 18 Jun 2006 10:10:21 -0700 (PDT)
Message-ID: <fb9748c90606181010j6c65b5caw35f05bd0f1d68a9e@mail.gmail.com>
Date: Sun, 18 Jun 2006 10:10:21 -0700
From: "Ray Tsang" <saturnism@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene as syslog storage
In-Reply-To: <e740n6$ebk$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e740n6$ebk$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think it ultimately depends on what you would like to do with the
stored data?  Would you need more of full text searches on the log or
more of statistical anlaysis?

ray,

On 6/18/06, Andreas Moroder <andreas.moroder@gmx.net> wrote:
> Hello,
>
> I would like to write a application to browse around and search the log
> files of linux machines, like www.splunk.org does.
>
> Would lucene be the right db to store such text information ?
> Because the log info should be stored in the db continuously and not as
> batch, this would create many thousand small documents. Is this a problem
> for lucene ?
>
> Bye
> Andreas
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 17:24:53 2006
Return-Path: <java-user-return-21426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55998 invoked from network); 18 Jun 2006 17:24:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 17:24:53 -0000
Received: (qmail 74529 invoked by uid 500); 18 Jun 2006 17:24:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74493 invoked by uid 500); 18 Jun 2006 17:24:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74482 invoked by uid 99); 18 Jun 2006 17:24:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 10:24:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 10:24:42 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Fs10B-00037t-IS
	for java-user@lucene.apache.org; Sun, 18 Jun 2006 19:23:59 +0200
Received: from host130-18.pool874.interbusiness.it ([87.4.18.130])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 19:23:59 +0200
Received: from andreas.moroder by host130-18.pool874.interbusiness.it with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 19:23:59 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Andreas Moroder <andreas.moroder@gmx.net>
Subject:  Re: Lucene as syslog storage
Date:  Sun, 18 Jun 2006 19:23:25 +0200
Lines: 15
Message-ID:  <e7426b$hvi$1@sea.gmane.org>
References:  <e740n6$ebk$1@sea.gmane.org> <fb9748c90606181010j6c65b5caw35f05bd0f1d68a9e@mail.gmail.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7Bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: host130-18.pool874.interbusiness.it
User-Agent: KNode/0.9.0
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ray Tsang wrote:

> I think it ultimately depends on what you would like to do with the
> stored data?  Would you need more of full text searches on the log or
> more of statistical anlaysis?
> 
> ray,
Hello Ray,

possibly both, but the full text filtering is more important.

Bye
Andreas




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 19:01:42 2006
Return-Path: <java-user-return-21427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68951 invoked from network); 18 Jun 2006 19:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 19:01:42 -0000
Received: (qmail 42417 invoked by uid 500); 18 Jun 2006 19:01:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42378 invoked by uid 500); 18 Jun 2006 19:01:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42367 invoked by uid 99); 18 Jun 2006 19:01:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 12:01:32 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 12:01:32 -0700
Received: by nz-out-0102.google.com with SMTP id 13so915629nzp
        for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 12:01:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ezPfZupnUt/GVH0GvQEqgUHPigxC8DtEP4vIQEO39rJJzl1AIvpHX9njpKh8oJcFtKonOoug6fsChp4HhDKlB+nQfgDO9rBh1KsUOENMO7l68IgxftYmQ+d6zOb24ltO2JNXaxSlnZf3B2P8fmsEqZwXsVi2KZIDxrCmrjDJTnk=
Received: by 10.37.12.70 with SMTP id p70mr6542912nzi;
        Sun, 18 Jun 2006 12:01:11 -0700 (PDT)
Received: by 10.37.20.1 with HTTP; Sun, 18 Jun 2006 12:01:11 -0700 (PDT)
Message-ID: <359a92830606181201m6e38e69cm8f20daa05071db45@mail.gmail.com>
Date: Sun, 18 Jun 2006 15:01:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unique indexes?
In-Reply-To: <449581D3.1080602@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2022_6875322.1150657271297"
References: <449581D3.1080602@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2022_6875322.1150657271297
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Every document insertion generates a new doc id (doc.id()). It just bumps by
one for each entry. But that ID changes upon re-indexing, and if you submit
the same doc twice, it gets indexed twice and have to documents in your
index that are indistinguishable except for Lucene's ID.

Otherwise, you have to make your own if what you want is a unique key
associated with a particular document. It sounds like you already have a
unique key, and will have to check for it before adding a document.

There is no equivalent that I know of to a DBs UNIQUE_KEY constraint on a
table.

Best
Erick

------=_Part_2022_6875322.1150657271297--

From java-user-return-21428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 19:09:31 2006
Return-Path: <java-user-return-21428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70052 invoked from network); 18 Jun 2006 19:09:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 19:09:30 -0000
Received: (qmail 53028 invoked by uid 500); 18 Jun 2006 19:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52995 invoked by uid 500); 18 Jun 2006 19:09:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52984 invoked by uid 99); 18 Jun 2006 19:09:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 12:09:21 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 12:09:21 -0700
Received: by nz-out-0102.google.com with SMTP id 13so916283nzp
        for <java-user@lucene.apache.org>; Sun, 18 Jun 2006 12:09:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BZj2slnsW3h9P2tbLYrC/5mwJ2+1Xxmj6RSKqeQXiDyERKteBXOwGOGemmCy2J9m9aIKgPAdzYw6Fm32VAF74v1vhUAAp/4wz4az9iD7AQh1MP60cBr5I7rp75WTV5ks0/K1YsIZcQKkVNrD3deX2Eg25w0/mBn8ddc5c96mQnw=
Received: by 10.36.33.15 with SMTP id g15mr3175438nzg;
        Sun, 18 Jun 2006 12:09:00 -0700 (PDT)
Received: by 10.37.20.1 with HTTP; Sun, 18 Jun 2006 12:09:00 -0700 (PDT)
Message-ID: <359a92830606181209r7b73be1craf0de4f2963d077d@mail.gmail.com>
Date: Sun, 18 Jun 2006 15:09:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene as syslog storage
In-Reply-To: <e7426b$hvi$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2094_16006771.1150657740566"
References: <e740n6$ebk$1@sea.gmane.org>
	 <fb9748c90606181010j6c65b5caw35f05bd0f1d68a9e@mail.gmail.com>
	 <e7426b$hvi$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2094_16006771.1150657740566
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

there's somebody on the mailing list who's talking about indexing a Billion
(with a "B") documents. I don't know how far they've gotten, but at least
*somebody* has contemplated a huge archive <G>... If memory serves, s/he had
indexed a significant number of documents, you might try searching for
"billion" in the archive. It was within the last couple of weeks.

Be aware that Lucene, by default, only indexes the first 10,000 words in a
document, so if your starting point is a large, existing log you have to
adjust this (there's a call, but I sure don't remember it off the top of my
head).

I've personally indexed over 1,000,000 documents and Lucene doesn't even
breath hard.

It'd probably be worth creating a small program the generates information
and indexes it to play around with and see if you get what you need. The
data won't be "real", but at least you'll have a better sense of how it
plays in your environment.

Best
Erick

------=_Part_2094_16006771.1150657740566--

From java-user-return-21429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 18 23:59:27 2006
Return-Path: <java-user-return-21429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30794 invoked from network); 18 Jun 2006 23:59:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2006 23:59:26 -0000
Received: (qmail 50883 invoked by uid 500); 18 Jun 2006 23:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50058 invoked by uid 500); 18 Jun 2006 23:59:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50045 invoked by uid 99); 18 Jun 2006 23:59:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jun 2006 16:59:16 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 18 Jun 2006 16:59:16 -0700
Received: (qmail 8937 invoked by uid 60001); 18 Jun 2006 23:58:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=BvG7Q+c/keNpmhB4aI9uJt3b/B4eMVsnC+TaR6v/jU57bcCgALsEJc5mcczIFj31lUfPNvBTDO2oWyp5uvf92ZVX+0lJZbTfyJFLNnkEKgcexmj/2kTFhRa0b5IxqM4gA+8R0w0P8qXRRvFGQ/kMxeXQ7fPmesUUIZM4RrIpOvE=  ;
Message-ID: <20060618235854.8935.qmail@web50305.mail.yahoo.com>
Received: from [72.229.167.99] by web50305.mail.yahoo.com via HTTP; Sun, 18 Jun 2006 16:58:54 PDT
Date: Sun, 18 Jun 2006 16:58:54 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene as syslog storage
To: java-user@lucene.apache.org
In-Reply-To: <e740n6$ebk$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andreas,

Not a problem.  As a matter of fact, when I first saw Splunk months ago, I thought to myself "Are they using Lucene for this?"  I've had the same idea a looong time back, but of course that's just one of many ideas I didn't have time for.

Otis

----- Original Message ----
From: Andreas Moroder <andreas.moroder@gmx.net>
To: java-user@lucene.apache.org
Sent: Sunday, June 18, 2006 12:58:16 PM
Subject: Lucene as syslog storage

Hello,

I would like to write a application to browse around and search the log
files of linux machines, like www.splunk.org does.

Would lucene be the right db to store such text information ?
Because the log info should be stored in the db continuously and not as
batch, this would create many thousand small documents. Is this a problem
for lucene ?

Bye
Andreas


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 19 07:21:40 2006
Return-Path: <java-user-return-21430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36867 invoked from network); 19 Jun 2006 07:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 07:21:40 -0000
Received: (qmail 1076 invoked by uid 500); 19 Jun 2006 07:21:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1046 invoked by uid 500); 19 Jun 2006 07:21:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1035 invoked by uid 99); 19 Jun 2006 07:21:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 00:21:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.wechner@wyona.com designates 195.226.6.68 as permitted sender)
Received: from [195.226.6.68] (HELO mx1.wyona.com) (195.226.6.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 00:21:26 -0700
Received: from [195.226.6.66] (helo=[192.168.1.55])
	by mx1.wyona.com with asmtp (Exim 3.35 #1 (Debian))
	id 1FsE4E-0003FT-00
	for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 09:21:02 +0200
Message-ID: <4496506A.9000607@wyona.com>
Date: Mon, 19 Jun 2006 09:21:14 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Thunderbird 1.5 (X11/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: indexing emails
References: <20060617074213.54149187B4@mail.seseit.com>
In-Reply-To: <20060617074213.54149187B4@mail.seseit.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rob Staveley (Tom) wrote:
> Having spent a lot of time getting this wrong myself in an e-mail
> indexer(!), I urge you to consider whether in your query interface you will
> need to look for mail to "john*" rather than john@boo.com, because "john*"
> may have been addressed to john@boo.net or john.smith@boo2.com. If you index
> only john@boo.com (untokenised) you will have to use a PrefixQuery to look
> for "john*", and you are liable to hit BooleanQuery.TooManyClauses problems,
> if you have more than 1024 (or BooleanQuery.getMaxClauseCount()) e-mail
> addresses in your index starting with "john". 
>
> I'm trying to figure out a good design for this now for my own e-mail
> indexing application,

btw, is your code available somewhere, I mean as Open Source ;-) ?

Thanks

Michi
>  considering also whether I should cater for searches
> for "*smith*". I'm coming round to the realisation that WildCardQuery and
> PrefixQuery are not great things to depend upon for getting e-mail addresses
> from an index and the right thing to do is to break the address up into
> natural tokens ('.' or '-') in one field and leave them intact in another
> field. It isn't ideal; e-mail addresses with no separator between initials
> or first names and last name still need a PrefixQuery or WildcardQuery, if
> you want to search for last names, but it does make some queries possible
> which would otherwise blow up.
>
> -----Original Message-----
> From: karl wettin [mailto:kalle@snigel.net] 
> Sent: 16 June 2006 21:13
> To: java-user@lucene.apache.org
> Subject: Re: indexing emails
>
> On Fri, 2006-06-16 at 15:20 -0400, Michael J. Prichard wrote:
>   
>> I am working on indexing emails and want to have a "to" field.  I am 
>> currently putting all the emails on one line seperated w/
>>     
> spaces...example:
>   
>> michael@foo.bar john@boo.com jane@bar.com
>>
>> Then i index that with a StandardAnalyzer as follows:
>>
>> doc.add(new Field("to", (String) itemContent.get("to"), 
>> Field.Store.YES, Field.Index.UN_TOKENIZED));
>>
>> Question is...is this the best way to do it?  I want to be able to 
>> search for michael@foo.bar and pick out just those Documents, etc.
>>     
>
> You can either do it as above (but you want to TOKENIZE the field) or you
> could create a new UN_TOKENIZED field for each email address.
>
> The second will require less CPU as it does not involve any lexical
> analysis. It will also create larger distance between the addresses in the
> index (see span queries and term positions).
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   


-- 
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 19 07:33:43 2006
Return-Path: <java-user-return-21431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38993 invoked from network); 19 Jun 2006 07:33:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 07:33:43 -0000
Received: (qmail 15309 invoked by uid 500); 19 Jun 2006 07:33:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15251 invoked by uid 500); 19 Jun 2006 07:33:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15225 invoked by uid 99); 19 Jun 2006 07:33:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 00:33:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 00:33:13 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: indexing emails
Date: Mon, 19 Jun 2006 08:32:51 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE7C141F@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: indexing emails
thread-index: AcaTcP7v4sbb83EoTkmEBxyqILPQZAAAHPQg
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When you talk about indexing emails are you indexing Outlook mails? We
have only found a few libraries that will do this and all require
Outlook to be online at the time i.e. you cannot index PST files
standalone.

As far as indexing goes index each address in a separate un-tokenized
field not space delimited in a single field. It is also useful to put
the To; CC and BCC in a single field to enable you to search to email
you have sent to a person. I would also recommend you do some processing
on the Subject field to remove FW and RE this will allow you to search
by subject and pick up all emails in the thread.

Mike

-----Original Message-----
From: Michael Wechner [mailto:michael.wechner@wyona.com]=20
Sent: 19 June 2006 08:21
To: java-user@lucene.apache.org
Subject: Re: indexing emails

Rob Staveley (Tom) wrote:
> Having spent a lot of time getting this wrong myself in an e-mail
> indexer(!), I urge you to consider whether in your query interface you
will
> need to look for mail to "john*" rather than john@boo.com, because
"john*"
> may have been addressed to john@boo.net or john.smith@boo2.com. If you
index
> only john@boo.com (untokenised) you will have to use a PrefixQuery to
look
> for "john*", and you are liable to hit BooleanQuery.TooManyClauses
problems,
> if you have more than 1024 (or BooleanQuery.getMaxClauseCount())
e-mail
> addresses in your index starting with "john".=20
>
> I'm trying to figure out a good design for this now for my own e-mail
> indexing application,

btw, is your code available somewhere, I mean as Open Source ;-) ?

Thanks

Michi
>  considering also whether I should cater for searches
> for "*smith*". I'm coming round to the realisation that WildCardQuery
and
> PrefixQuery are not great things to depend upon for getting e-mail
addresses
> from an index and the right thing to do is to break the address up
into
> natural tokens ('.' or '-') in one field and leave them intact in
another
> field. It isn't ideal; e-mail addresses with no separator between
initials
> or first names and last name still need a PrefixQuery or
WildcardQuery, if
> you want to search for last names, but it does make some queries
possible
> which would otherwise blow up.
>
> -----Original Message-----
> From: karl wettin [mailto:kalle@snigel.net]=20
> Sent: 16 June 2006 21:13
> To: java-user@lucene.apache.org
> Subject: Re: indexing emails
>
> On Fri, 2006-06-16 at 15:20 -0400, Michael J. Prichard wrote:
>  =20
>> I am working on indexing emails and want to have a "to" field.  I am=20
>> currently putting all the emails on one line seperated w/
>>    =20
> spaces...example:
>  =20
>> michael@foo.bar john@boo.com jane@bar.com
>>
>> Then i index that with a StandardAnalyzer as follows:
>>
>> doc.add(new Field("to", (String) itemContent.get("to"),=20
>> Field.Store.YES, Field.Index.UN_TOKENIZED));
>>
>> Question is...is this the best way to do it?  I want to be able to=20
>> search for michael@foo.bar and pick out just those Documents, etc.
>>    =20
>
> You can either do it as above (but you want to TOKENIZE the field) or
you
> could create a new UN_TOKENIZED field for each email address.
>
> The second will require less CPU as it does not involve any lexical
> analysis. It will also create larger distance between the addresses in
the
> index (see span queries and term positions).
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>  =20


--=20
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 19 08:02:43 2006
Return-Path: <java-user-return-21432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44846 invoked from network); 19 Jun 2006 08:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 08:02:43 -0000
Received: (qmail 47481 invoked by uid 500); 19 Jun 2006 08:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47445 invoked by uid 500); 19 Jun 2006 08:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47434 invoked by uid 99); 19 Jun 2006 08:02:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 01:02:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 01:02:27 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 54E1C187B9; Mon, 19 Jun 2006 08:02:04 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 01A1E187B7
	for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 08:02:00 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: indexing emails
Date: Mon, 19 Jun 2006 09:02:02 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	boundary="----=_NextPart_000_0024_01C6937F.07722A90";
	micalg=SHA1
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE7C141F@staf-exm-01.ardentia.co.uk>
Thread-Index: AcaTcP7v4sbb83EoTkmEBxyqILPQZAAAHPQgAADCe5A=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060619080200.01A1E187B7@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0024_01C6937F.07722A90
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

> you cannot index PST files standalone

You can with LibPST (a C library - see
http://sourceforge.net/projects/ol2mbox), if they are 97-2002 format.

-----Original Message-----
From: Mike Streeton [mailto:mike.streeton@ardentia.co.uk] 
Sent: 19 June 2006 08:33
To: java-user@lucene.apache.org
Subject: RE: indexing emails

When you talk about indexing emails are you indexing Outlook mails? We have
only found a few libraries that will do this and all require Outlook to be
online at the time i.e. you cannot index PST files standalone.

As far as indexing goes index each address in a separate un-tokenized field
not space delimited in a single field. It is also useful to put the To; CC
and BCC in a single field to enable you to search to email you have sent to
a person. I would also recommend you do some processing on the Subject field
to remove FW and RE this will allow you to search by subject and pick up all
emails in the thread.

Mike

-----Original Message-----
From: Michael Wechner [mailto:michael.wechner@wyona.com]
Sent: 19 June 2006 08:21
To: java-user@lucene.apache.org
Subject: Re: indexing emails

Rob Staveley (Tom) wrote:
> Having spent a lot of time getting this wrong myself in an e-mail 
> indexer(!), I urge you to consider whether in your query interface you
will
> need to look for mail to "john*" rather than john@boo.com, because
"john*"
> may have been addressed to john@boo.net or john.smith@boo2.com. If you
index
> only john@boo.com (untokenised) you will have to use a PrefixQuery to
look
> for "john*", and you are liable to hit BooleanQuery.TooManyClauses
problems,
> if you have more than 1024 (or BooleanQuery.getMaxClauseCount())
e-mail
> addresses in your index starting with "john". 
>
> I'm trying to figure out a good design for this now for my own e-mail 
> indexing application,

btw, is your code available somewhere, I mean as Open Source ;-) ?

Thanks

Michi
>  considering also whether I should cater for searches for "*smith*". 
> I'm coming round to the realisation that WildCardQuery
and
> PrefixQuery are not great things to depend upon for getting e-mail
addresses
> from an index and the right thing to do is to break the address up
into
> natural tokens ('.' or '-') in one field and leave them intact in
another
> field. It isn't ideal; e-mail addresses with no separator between
initials
> or first names and last name still need a PrefixQuery or
WildcardQuery, if
> you want to search for last names, but it does make some queries
possible
> which would otherwise blow up.
>
> -----Original Message-----
> From: karl wettin [mailto:kalle@snigel.net]
> Sent: 16 June 2006 21:13
> To: java-user@lucene.apache.org
> Subject: Re: indexing emails
>
> On Fri, 2006-06-16 at 15:20 -0400, Michael J. Prichard wrote:
>   
>> I am working on indexing emails and want to have a "to" field.  I am 
>> currently putting all the emails on one line seperated w/
>>     
> spaces...example:
>   
>> michael@foo.bar john@boo.com jane@bar.com
>>
>> Then i index that with a StandardAnalyzer as follows:
>>
>> doc.add(new Field("to", (String) itemContent.get("to"), 
>> Field.Store.YES, Field.Index.UN_TOKENIZED));
>>
>> Question is...is this the best way to do it?  I want to be able to 
>> search for michael@foo.bar and pick out just those Documents, etc.
>>     
>
> You can either do it as above (but you want to TOKENIZE the field) or
you
> could create a new UN_TOKENIZED field for each email address.
>
> The second will require less CPU as it does not involve any lexical 
> analysis. It will also create larger distance between the addresses in
the
> index (see span queries and term positions).
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   


--
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0024_01C6937F.07722A90
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYxOTA4
MDIwMlowIwYJKoZIhvcNAQkEMRYEFCwLWfRWikhYoQ1m02p6OBq8XoEJMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBACiziGWwtJVVVDGRX0Ad7uopVdkSMR+qzl95
cDM33mp+7fUltVBiRjfIMvOm8Oh8r/hqX600d2SfQNWCE+KYnw/Sf91umJwzh6LFtDQKTsRMpRDv
B6H2L1TVp2stRqYv84D7ZtoeOR6UAOEjD5yzlgL/R+Jfh2o9Oo1bEmmZxu6Z9EC9EvipBIYmj8Cx
dQUJvboxQ97hQz29WHt7Bc5qyrtlMhcMRAyNW0DwTsTEErz6lFTXo2duGNCKnkWeYK22JLNlEiR7
Xa6+ix1/Sm6LDR9Iwmga2qN7JNBTkuXzrHNzUizTgv/zbrsbvcNcEwpg+0+qwX/2ZVxEYofysNsM
1MgAAAAAAAA=

------=_NextPart_000_0024_01C6937F.07722A90--


From java-user-return-21433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 19 08:12:49 2006
Return-Path: <java-user-return-21433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46778 invoked from network); 19 Jun 2006 08:12:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 08:12:49 -0000
Received: (qmail 58020 invoked by uid 500); 19 Jun 2006 08:12:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57902 invoked by uid 500); 19 Jun 2006 08:12:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57887 invoked by uid 99); 19 Jun 2006 08:12:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 01:12:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 01:12:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 618685B766; Mon, 19 Jun 2006 01:12:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4C9917F403
	for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 01:12:11 -0700 (PDT)
Date: Mon, 19 Jun 2006 01:12:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: faceting and categorizing on color?
In-Reply-To: <20060616222907.34447.qmail@web34109.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0606190032380.21402@hal.rescomp.berkeley.edu>
References: <20060616222907.34447.qmail@web34109.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I have been reading several threads about facet counts
: and category counts and was wondering if/how they
: might apply to searching for colors. Let's say that

First off, let me clear up somethign regarding your index field structure,
you mentioned that you currently have documents that look like this...

: IMAGE	1
: COLORS	F00000 FF0000 FFF000 FFFF00 FFFFF0 FFFFFF
: E00000 EE0000 EEE000 EEEE00

	...

: If I setup the COLORS field such that it is of type
: Field.Keyword, then I can construct a query
: COLORS:FFFFFF with a StandardAnalyzer that returns the

If you are indexing it as Field.Keyword and you can query for
COLORS:FFFFFF and get results, then either you are only only getting
documents that are 100% white, or when you indexed the Documents you added
eeach collor as a seperate field instance -- I'm going to assume it's the
later, which makes perfect sense and is a reasonable way to do things, but
it's also exactly the same as what you ask about a little later..

: Am I mistaken in thinking that my problem is similar
: to faceting/categorization/rollup, just on a different
: scale? I suppose I could also structure my document
: such that it looked like this:
:
: Field Value
: IMAGE 1
: COLOR F00000
: COLOR FF0000

...unless of course, i'm completley missunderstanding you.

On to the meat of your question...

: performance hit.This thread from last year:
: http://www.nabble.com/forum/ViewTopic.jtp?topic=266441&tview=threaded
:
: Seems to suggest the creation of a String[] of colors
: and then iterate over it using a QueryFilter, AND'ing
: the result sets bits with the filtered bits, sorting
: based on cardinality. That works in my tests with a
: limited number of colors, but my String[] of colors
: could contain 16.7M values, and most certainly will
: contain at least several million.

Actually, the idea behind that approach is that you *want* to build up a
QueryFilter (or some other BitSetish thing) for every possible term value,
even if most of the time you won't be looking at all of them
because you can reuse a differnet subset of all of them on every query --
it's a time/space tradeoff, really fast set lookups/intersections in
exchange of a lot of RAM.

: Am I mistaken in thinking that my problem is similar
: to faceting/categorization/rollup, just on a different

You're not mistaken.  One thing you may want to consider is wether or not
it's really usefull to provide "facet" counts for each of the unique
color values in the 256^3 RGB spectrum, or if it's better (and easier) to
facet on the most significant bytes of the color value.  Searching for
"white" and seeing...

     FFFFFF  22,143 photos
     FFFFFE  22,134 photos
     FEFFFF  22,121 photos
     FFFEFF  22,098 photos
     FEFFFE  22,088 photos

...as the top 5 common colors in my results isn't all the helpfull is it?

If you index both the full color codes as well as just the most
significant hex characters from the RGB code in seperate fields, you can
do "coarse" faceting on one field, and "refined" faceting on the other...

IMAGE:  1
COLOR: FFFFFE FFA3B4 2287C3 773442 666BED
COARSE_COLOR: FFF FAB 28C 734 66E

: That would allow me to do something with TermEnums,
: but I don't see how it would be any better than using
: a HitCollector. Does the above document structure make

Usually, you need to do one pass over your values and one pass over
your documents -- with a HitCollector you do a pass over your values first
(either by constructing a FieldCache or by doing something fancy with
TermEnum).  Alternately, you can do one pass over your documents building
a BitSet of the docs that match, and *then* do a pass over the values
using a TermEnum/TermDocs to get interestign stats about them

If you are interested in doing the coarse appraoch, the QueryFilter/BitSet
approach would probably work very well (only 4096 total BitSets ever).
Once a coarse color was choosen you can use the TermEnum to get a list of
all the subtle shades and TermDocs to check which docs already in your set
match on that shade.

if you store the least significant hex characters last, you can reduce
the amount of skipping arround you have to do...

IMAGE:  1
COLOR: FFFFFE FFA3B4 2587C3 773442 666BED
COARSE_COLOR: FFF FAB 28C 734 66E
REFINE_COLOR: FFFFFE FABF34 28C573 734742 66E6BD

: initial document structure? If the answer to my
: question is trivial would anything change if I wanted
: to weight the colors. For example, if the initial
: document looked like:
:
: Field	Value
: IMAGE	1
: COLORS	10-F00000 6-FF0000 3-FFF000 9-FFFF00 7-FFFFF0
: 1-FFFFFF 2-E00000 4-EE0000 8-EEE000 5-EEEE00
: PIXELS	10000
: FORMAT	JPG
:
: That would be interpreted as FFFFFF is the most
: dominant of the top 10 most dominant colors and F00000
: is the least. Would that be a terrible document
: structure?

thigns certainly get a lot harder when you want to weight them ... but not
impossible.  Using term frequencies would probably be the best way to do
this (ie: add COLORS:F00000 to the 10 times, and COLOR:FFFFFF only once)
and would have the added benefit that this document would score better on
a search for COLORS:F00000 then it would on a search for COLOR:FFFFFF.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 19 08:22:21 2006
Return-Path: <java-user-return-21434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48335 invoked from network); 19 Jun 2006 08:22:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 08:22:21 -0000
Received: (qmail 67385 invoked by uid 500); 19 Jun 2006 08:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67348 invoked by uid 500); 19 Jun 2006 08:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67336 invoked by uid 99); 19 Jun 2006 08:22:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 01:22:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 01:22:07 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3C5865B766; Mon, 19 Jun 2006 01:21:47 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 320097F403
	for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 01:21:47 -0700 (PDT)
Date: Mon, 19 Jun 2006 01:21:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: indexing emails
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE7C141F@staf-exm-01.ardentia.co.uk>
Message-ID: <Pine.LNX.4.58.0606190114040.21402@hal.rescomp.berkeley.edu>
References: <0B1C92228C5C8D45AA7450F78B3FB9DE7C141F@staf-exm-01.ardentia.co.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: As far as indexing goes index each address in a separate un-tokenized
: field not space delimited in a single field. It is also useful to put
: the To; CC and BCC in a single field to enable you to search to email

INdexing email isn't something i've had to think about a lot in my life ..
but if i were going to do it i would certianly have both header specific
fields as well as a "recpipients" field containing To/Cc/Bcc and a
"participants" field that also contained the From/Sender/X-Sender.

I would add each address as a seperate Field instance, using a custom
"EmailAnalyzer" with a really high position incriment gap.  The Analyzer
should index both the full input with no tokenization, as well as the
input split on the @ symbol, and the input tokenized on any character in
the set "_-.+" to the left of the @ and on "." to the right of the @ ...
BUT: not the last "."

So for the input "java-user@lucene.apache.org" the following tokenstream
would be created...

	java-user@lucene.apache.org
	java
	user
	java-user
	lucene.apache.org
	lucene
	apache.org


: you have sent to a person. I would also recommend you do some processing
: on the Subject field to remove FW and RE this will allow you to search
: by subject and pick up all emails in the thread.

There are essays and essays and more essays on detecting/infering threads
in email ... as I recall, JWZ has really written the definitive guide for
this.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 19 11:49:19 2006
Return-Path: <java-user-return-21435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23713 invoked from network); 19 Jun 2006 11:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 11:49:18 -0000
Received: (qmail 97746 invoked by uid 500); 19 Jun 2006 11:48:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97662 invoked by uid 500); 19 Jun 2006 11:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97612 invoked by uid 99); 19 Jun 2006 11:48:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 04:48:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 04:48:34 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k5JBmBcY014365
	for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 12:48:11 +0100
Received: from [10.11.108.231] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.96-alpha)
    via ESMTP; Mon, 19 Jun 2006 12:48:10 +0100 (BST)
Date: Mon, 19 Jun 2006 12:48:09 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44968EF9.4060307@scalix.com>
In-Reply-To: <44930474.2050301@mac.com>
References: <44930474.2050301@mac.com>
Subject: Re: indexing emails
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.4 (X11/20060614)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael J. Prichard wrote:
> I am working on indexing emails and want to have a "to" field.  I am 
> currently putting all the emails on one line seperated w/ 
> spaces...example:
>
> michael@foo.bar john@boo.com jane@bar.com
>
> Then i index that with a StandardAnalyzer as follows:
>
> doc.add(new Field("to", (String) itemContent.get("to"), 
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>
> Question is...is this the best way to do it?  I want to be able to 
> search for michael@foo.bar and pick out just those Documents, etc.
I took a slightly different approach.   Using javamail, given a To: line 
like this:

    To: Fred Smith <fs@example.com>, 
=?ISO-8859-1?Q?Keld_J=F8rn_Simonsen?= <keld@example.com>

I re-constructed the address list to look like this:

    Fred Smith fs@example.com Keld Jørn Simonsen keld@example.com

and fed that to the analyser.   I forget which analyser we eventually 
settled on, but the "fred@example.com" turns into the tokens "fred" 
"example" and "com".   This actually gives rise to a remarkably natural 
way of search for
addresses.   People do things like searching for "lucene.apache.org" to 
look for mail sent to the lucene lists, they search for me variously as 
"jch", "john haxby" and "haxby"; they even, occasionally, search for 
complete mail addresses.   They all work.

The RFC2047 syntax in the example above gives one hint as to the 
minefield that address parsing can be.   If you look at the javamail 
spec, you'll also see reference to group-syntax -- it's often seen as

    undisclosed-recipients:;

but you'll also occasionally see

    example-group: fred@example.com, keld@example.com;

Javamail knows how to parse these and I threw away the group name and 
just indexed the messages.   It might've been better to keep the group 
name, but groups aren't that widely used so it probably doesn't make 
much difference.

Other heads cause headaches as well.   Things like the subject can be 
RFC2047 encoded so you'll need to decode them.  The various message-id 
headers are also slightly problematic.   If you're using "message-id" 
and "references" and "in-reply-to" you'll need to be careful -- the 
individual message-id's will need their angle brackets removed and they 
really ought not to be tokenized.

It's also worth indexing *all* the message headers.   People do do 
searches on some odd things.   I also index the raw content-type as well 
-- those huge presentations can be found and deleted by searching for 
"content-type:application/vnd.ms-powerpoint".   Or at least I could.  It 
seems to be broken at the moment :-(

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 19 12:33:33 2006
Return-Path: <java-user-return-21436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44519 invoked from network); 19 Jun 2006 12:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 12:33:33 -0000
Received: (qmail 85614 invoked by uid 500); 19 Jun 2006 12:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85573 invoked by uid 500); 19 Jun 2006 12:33:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85562 invoked by uid 99); 19 Jun 2006 12:33:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 05:33:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.184] (HELO smtpout.mac.com) (17.250.248.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 05:33:12 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout14/MantshX 4.0) with ESMTP id k5JCWpYS028309
	for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 05:32:52 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k5JCWnK1026455
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 05:32:51 -0700 (PDT)
Message-ID: <44969978.5090108@mac.com>
Date: Mon, 19 Jun 2006 08:32:56 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing emails
References: <20060619080200.01A1E187B7@mail.seseit.com>
In-Reply-To: <20060619080200.01A1E187B7@mail.seseit.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We are actually grabbing emails by becoming part of the SMTP stream.  
This part is figured out and we have archived over 600k emails into a 
mysql database.  The problem is that since we currently store the blobs 
in the DB this databases are getting large and searching takes plenty of 
time.  We want to convert the searching to lucene to add more advanced 
features.

Can I have multiple "to", "from" and "bcc" fields?

-Michael

Rob Staveley (Tom) wrote:

>>you cannot index PST files standalone
>>    
>>
>
>You can with LibPST (a C library - see
>http://sourceforge.net/projects/ol2mbox), if they are 97-2002 format.
>
>-----Original Message-----
>From: Mike Streeton [mailto:mike.streeton@ardentia.co.uk] 
>Sent: 19 June 2006 08:33
>To: java-user@lucene.apache.org
>Subject: RE: indexing emails
>
>When you talk about indexing emails are you indexing Outlook mails? We have
>only found a few libraries that will do this and all require Outlook to be
>online at the time i.e. you cannot index PST files standalone.
>
>As far as indexing goes index each address in a separate un-tokenized field
>not space delimited in a single field. It is also useful to put the To; CC
>and BCC in a single field to enable you to search to email you have sent to
>a person. I would also recommend you do some processing on the Subject field
>to remove FW and RE this will allow you to search by subject and pick up all
>emails in the thread.
>
>Mike
>
>-----Original Message-----
>From: Michael Wechner [mailto:michael.wechner@wyona.com]
>Sent: 19 June 2006 08:21
>To: java-user@lucene.apache.org
>Subject: Re: indexing emails
>
>Rob Staveley (Tom) wrote:
>  
>
>>Having spent a lot of time getting this wrong myself in an e-mail 
>>indexer(!), I urge you to consider whether in your query interface you
>>    
>>
>will
>  
>
>>need to look for mail to "john*" rather than john@boo.com, because
>>    
>>
>"john*"
>  
>
>>may have been addressed to john@boo.net or john.smith@boo2.com. If you
>>    
>>
>index
>  
>
>>only john@boo.com (untokenised) you will have to use a PrefixQuery to
>>    
>>
>look
>  
>
>>for "john*", and you are liable to hit BooleanQuery.TooManyClauses
>>    
>>
>problems,
>  
>
>>if you have more than 1024 (or BooleanQuery.getMaxClauseCount())
>>    
>>
>e-mail
>  
>
>>addresses in your index starting with "john". 
>>
>>I'm trying to figure out a good design for this now for my own e-mail 
>>indexing application,
>>    
>>
>
>btw, is your code available somewhere, I mean as Open Source ;-) ?
>
>Thanks
>
>Michi
>  
>
>> considering also whether I should cater for searches for "*smith*". 
>>I'm coming round to the realisation that WildCardQuery
>>    
>>
>and
>  
>
>>PrefixQuery are not great things to depend upon for getting e-mail
>>    
>>
>addresses
>  
>
>>from an index and the right thing to do is to break the address up
>>    
>>
>into
>  
>
>>natural tokens ('.' or '-') in one field and leave them intact in
>>    
>>
>another
>  
>
>>field. It isn't ideal; e-mail addresses with no separator between
>>    
>>
>initials
>  
>
>>or first names and last name still need a PrefixQuery or
>>    
>>
>WildcardQuery, if
>  
>
>>you want to search for last names, but it does make some queries
>>    
>>
>possible
>  
>
>>which would otherwise blow up.
>>
>>-----Original Message-----
>>From: karl wettin [mailto:kalle@snigel.net]
>>Sent: 16 June 2006 21:13
>>To: java-user@lucene.apache.org
>>Subject: Re: indexing emails
>>
>>On Fri, 2006-06-16 at 15:20 -0400, Michael J. Prichard wrote:
>>  
>>    
>>
>>>I am working on indexing emails and want to have a "to" field.  I am 
>>>currently putting all the emails on one line seperated w/
>>>    
>>>      
>>>
>>spaces...example:
>>  
>>    
>>
>>>michael@foo.bar john@boo.com jane@bar.com
>>>
>>>Then i index that with a StandardAnalyzer as follows:
>>>
>>>doc.add(new Field("to", (String) itemContent.get("to"), 
>>>Field.Store.YES, Field.Index.UN_TOKENIZED));
>>>
>>>Question is...is this the best way to do it?  I want to be able to 
>>>search for michael@foo.bar and pick out just those Documents, etc.
>>>    
>>>      
>>>
>>You can either do it as above (but you want to TOKENIZE the field) or
>>    
>>
>you
>  
>
>>could create a new UN_TOKENIZED field for each email address.
>>
>>The second will require less CPU as it does not involve any lexical 
>>analysis. It will also create larger distance between the addresses in
>>    
>>
>the
>  
>
>>index (see span queries and term positions).
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>  
>>    
>>
>
>
>--
>Michael Wechner
>Wyona      -   Open Source Content Management   -    Apache Lenya
>http://www.wyona.com                      http://lenya.apache.org
>michael.wechner@wyona.com                        michi@apache.org
>+41 44 272 91 61
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 19 20:59:46 2006
Return-Path: <java-user-return-21437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62647 invoked from network); 19 Jun 2006 20:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2006 20:59:45 -0000
Received: (qmail 38174 invoked by uid 500); 19 Jun 2006 20:59:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38139 invoked by uid 500); 19 Jun 2006 20:59:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38097 invoked by uid 99); 19 Jun 2006 20:59:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 13:59:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 13:59:36 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k5JKxCDA012470
	for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 21:59:14 +0100
Received: from [192.168.0.22] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.96-alpha)
    via ESMTP; Mon, 19 Jun 2006 21:59:12 +0100 (BST)
Date: Mon, 19 Jun 2006 21:59:12 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44971020.9010303@scalix.com>
In-Reply-To: <44969978.5090108@mac.com>
References: <20060619080200.01A1E187B7@mail.seseit.com>
References: <44969978.5090108@mac.com>
Subject: Re: indexing emails
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.4 (X11/20060614)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael J. Prichard wrote:
> We are actually grabbing emails by becoming part of the SMTP stream.  
> This part is figured out and we have archived over 600k emails into a 
> mysql database.  The problem is that since we currently store the 
> blobs in the DB this databases are getting large and searching takes 
> plenty of time.  We want to convert the searching to lucene to add 
> more advanced features.
>
In which case, javamail is your friend.

> Can I have multiple "to", "from" and "bcc" fields?
Yes.   And it's definitely worth your while to study not only javamail 
but the MIME RFCs (RFC2047 deals with headers, a nearby one deals with 
the main MIME format, I forget the number) and RFC2822 for the base mail 
format -- understanding the structure of a mail message is more than 
half the battle to knowing how to index it.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 01:02:15 2006
Return-Path: <java-user-return-21438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28793 invoked from network); 20 Jun 2006 01:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 01:02:15 -0000
Received: (qmail 69828 invoked by uid 500); 20 Jun 2006 01:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69512 invoked by uid 500); 20 Jun 2006 01:02:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69500 invoked by uid 99); 20 Jun 2006 01:02:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 18:02:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of krader@skepticism.us designates 216.99.206.50 as permitted sender)
Received: from [216.99.206.50] (HELO skepticism.us) (216.99.206.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 18:02:05 -0700
Received: by skepticism.us (Postfix, from userid 500)
	id C453C27D82; Mon, 19 Jun 2006 18:01:44 -0700 (PDT)
Date: Mon, 19 Jun 2006 18:01:44 -0700
From: "Kurtis D. Rader" <krader@skepticism.us>
To: java-user@lucene.apache.org
Subject: RemoteSearchable and isCurrent
Message-ID: <20060620010144.GA27687@gateway.skepticism.us>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does anyone have an example of how to extend a RemoteSearchable so it
properly handles updates to the indexes it is searching?  That is, how
do I have my RemoteSearchable instance monitor its indexes for changes
and either gracefully terminate (so a new instance can be started) or
reopen the indexes?

Please bear in mind that I'm a Perl guru who can barely write a working
Java program from scratch.  I have a working search interface with a
custom parser. I have a working RemoteSearchable that can be queried by
my user interface. Now I'm working on the hard parts that are needed for
a production grade application. Such as being able to gracefully have
the RemoteSearchable()'s notice when an index has been updated and use
the updated index segments.

-- 
Kurtis (caretaker of the exceptional canines: Nick, Einstein, BJ, and Haley)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 04:31:27 2006
Return-Path: <java-user-return-21439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73683 invoked from network); 20 Jun 2006 04:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 04:31:26 -0000
Received: (qmail 27363 invoked by uid 500); 20 Jun 2006 04:31:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27100 invoked by uid 500); 20 Jun 2006 04:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27082 invoked by uid 99); 20 Jun 2006 04:31:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 21:31:15 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jun 2006 21:31:13 -0700
Received: by nz-out-0102.google.com with SMTP id 8so116718nzo
        for <java-user@lucene.apache.org>; Mon, 19 Jun 2006 21:30:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=OfX4EmoeJh6lTENgLh2cBh5Xnbm6Z2ohw3Nov9Doe+wfzfBxGU13nzw5/xeIUCeR/lqkewHCaBL5C7Oiji0Ebq8dZsoujA0alZT8eTzQoAldDn7zpbDbA/zhE6ZHJ6L/PWxukxDLHtBMyidGyycwrvqFIYV3OLZjOWVywcvb4zM=
Received: by 10.65.51.3 with SMTP id d3mr5639839qbk;
        Mon, 19 Jun 2006 21:30:52 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Mon, 19 Jun 2006 21:30:52 -0700 (PDT)
Message-ID: <a36516400606192130j68429d35ya96bf914a66e17c1@mail.gmail.com>
Date: Tue, 20 Jun 2006 10:00:52 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: How to do pagination on fethed result using lucene...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88223_14773057.1150777852691"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_88223_14773057.1150777852691
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
I have built an small application that give some thousand results. I want to
display results as google displays using pagination.
Here my question is, how I'll maintain the sequence of displayed result.

Should i associate the "Hits" object along with the session.

Assume i want to display 10 results on a page. So if the user requests for
the second page since i have the page number, i 'll simply find the id of
pages starting from 11 and ends at 20 then I'll request hits to get me those
documents. And finally I'll put them into some data structure and will
forward to my jsp, which'll iterate over that and display the results.

This is my naive approach for this problem. Is there any other better
approach for this.
I'll be please to receive your responses.

With Regards.........

------=_Part_88223_14773057.1150777852691--

From java-user-return-21440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 07:40:18 2006
Return-Path: <java-user-return-21440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36593 invoked from network); 20 Jun 2006 07:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 07:40:17 -0000
Received: (qmail 66290 invoked by uid 500); 20 Jun 2006 07:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65265 invoked by uid 500); 20 Jun 2006 07:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65242 invoked by uid 99); 20 Jun 2006 07:40:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 00:40:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 00:40:07 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0FF1C5B766; Tue, 20 Jun 2006 00:39:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 080B47F403
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 00:39:38 -0700 (PDT)
Date: Tue, 20 Jun 2006 00:39:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to do pagination on fethed result using lucene...
In-Reply-To: <a36516400606192130j68429d35ya96bf914a66e17c1@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606200037160.18630@hal.rescomp.berkeley.edu>
References: <a36516400606192130j68429d35ya96bf914a66e17c1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I have built an small application that give some thousand results. I want to
: display results as google displays using pagination.
: Here my question is, how I'll maintain the sequence of displayed result.
:
: Should i associate the "Hits" object along with the session.

assuming your application is web based, the general concesus is to start
by implimening your app so that each page reexecutes the search, and then
accesses the docs it cares about ... if you find that it's inefficient for
your needs in some way, investigate sessoin caching  -- but it's
frequently fast enough as is.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 07:52:36 2006
Return-Path: <java-user-return-21441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40182 invoked from network); 20 Jun 2006 07:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 07:52:35 -0000
Received: (qmail 86264 invoked by uid 500); 20 Jun 2006 07:52:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86069 invoked by uid 500); 20 Jun 2006 07:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86057 invoked by uid 99); 20 Jun 2006 07:52:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 00:52:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 00:52:28 -0700
Received: by nz-out-0102.google.com with SMTP id 8so159807nzo
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 00:52:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sVSkNHnoP+5bUJLpXwHMPgPyt/HEWuhILBQ0HpiW484iLzasplR0NfklxkcwmFIyMcm7SURSJnlXLTQA9lWHgplYp2AlhpfCjZEsZUAY9xXUcFP+vO5C/+l+O4cdq6QTbpzmu7QcKMhyastjXcJEYCp79LiYkvry04auBEsHGmU=
Received: by 10.65.153.20 with SMTP id f20mr5830780qbo;
        Tue, 20 Jun 2006 00:52:07 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Tue, 20 Jun 2006 00:52:07 -0700 (PDT)
Message-ID: <a36516400606200052x14f0a313v3024c529dba81a1a@mail.gmail.com>
Date: Tue, 20 Jun 2006 13:22:07 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to do pagination on fethed result using lucene...
In-Reply-To: <Pine.LNX.4.58.0606200037160.18630@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89724_2314977.1150789927479"
References: <a36516400606192130j68429d35ya96bf914a66e17c1@mail.gmail.com>
	 <Pine.LNX.4.58.0606200037160.18630@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_89724_2314977.1150789927479
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Actually i forgot to write that my application is web based and i am running
this on tomcat server.
>>assuming your application is web based, the general concesus is to start
by implimening your app so that each page reexecutes the search,

reexecuting the search is not feasible as every time it goes to look those
documents in index.
i am also thinking for session as i told in my mail. I am here looking for
another option where the number of users are a lot and maintaining session
for each user is not feasible..

with regards,


On 6/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I have built an small application that give some thousand results. I
> want to
> : display results as google displays using pagination.
> : Here my question is, how I'll maintain the sequence of displayed result.
> :
> : Should i associate the "Hits" object along with the session.
>
> assuming your application is web based, the general concesus is to start
> by implimening your app so that each page reexecutes the search, and then
> accesses the docs it cares about ... if you find that it's inefficient for
> your needs in some way, investigate sessoin caching  -- but it's
> frequently fast enough as is.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_89724_2314977.1150789927479--

From java-user-return-21442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 09:32:14 2006
Return-Path: <java-user-return-21442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80541 invoked from network); 20 Jun 2006 09:32:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 09:32:14 -0000
Received: (qmail 45513 invoked by uid 500); 20 Jun 2006 09:32:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45485 invoked by uid 500); 20 Jun 2006 09:32:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45474 invoked by uid 99); 20 Jun 2006 09:32:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 02:32:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.116.240.69] (HELO exchfront.GRUPOINTERCOM.oficinas) (194.116.240.69)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 02:32:06 -0700
Received: from exchback.GRUPOINTERCOM.oficinas ([10.12.50.50]) by exchfront.GRUPOINTERCOM.oficinas with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 20 Jun 2006 11:31:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6944C.5775C861"
Subject: Custom ScoreDocComparator and normalized Scores
Date: Tue, 20 Jun 2006 11:31:42 +0200
Message-ID: <2829114EEAA49E4899880229DBC4394A07EC35D8@exchback.GRUPOINTERCOM.oficinas>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Custom ScoreDocComparator and normalized Scores
Thread-Index: AcaUTFcq1cE3zIlZSHqFDJt7MIcEwg==
From: "Gustavo Comba" <gcomba@emagister.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jun 2006 09:31:43.0966 (UTC) FILETIME=[57E48FE0:01C6944C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6944C.5775C861
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
    I'm trying to sort the search results by a "combination" of the
"lucene score" and the value of a document field. The "combination" is
something like that:
=20
    scoreWeight * i.score + fieldWeight * getFieldValue(i.doc)
=20
    I expect results between 0 and scoreWeight + fieldWeight
=20
    Until version 1.9 this use to works OK, but now Lucene doesn't
normalize the documents scores before calling
ScoreDocComparator#compare(ScoreDoc i, ScoreDoc j). I know this is
necessary when combining several indexes, but it's not our case (we have
only one index).
=20
    I'm diggin into Lucene's source code to find a way to normalize
values before sorting the results. The solution I found requires a lot
of "custom" code, and doing 2 passes over the results, one to calculate
alll the document's scores, and then a sort using a comparator "who
knows" the maximum score value (in order to normalize values on the
fly), so I think there should be a more efficient and elegant way to do
this.
=20
    Any ideas? Any help will be appreciated! Thanks in advance,
=20
        Gustavo Comba
        Emagister.com

------_=_NextPart_001_01C6944C.5775C861--

From java-user-return-21443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 09:51:41 2006
Return-Path: <java-user-return-21443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86283 invoked from network); 20 Jun 2006 09:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 09:51:41 -0000
Received: (qmail 79021 invoked by uid 500); 20 Jun 2006 09:51:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78949 invoked by uid 500); 20 Jun 2006 09:51:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78807 invoked by uid 99); 20 Jun 2006 09:51:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 02:51:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Vikas_Khengare@symantec.com designates 143.127.12.111 as permitted sender)
Received: from [143.127.12.111] (HELO silver.veritas.com) (143.127.12.111)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 02:51:24 -0700
Received: from sxchcon2-int.veritas.com (HELO SVLXCHCON2.enterprise.veritas.com) ([10.137.18.172])
  by silver.veritas.com with ESMTP; 20 Jun 2006 02:51:03 -0700
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.06,155,1149490800"; 
   d="scan'208,217"; a="39390601:sNHT49763396"
Received: from PUNAXCHECNPIN01.enterprise.veritas.com ([10.217.161.21]) by SVLXCHCON2.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Tue, 20 Jun 2006 02:51:02 -0700
Received: from ITPXCHCLN1.enterprise.veritas.com ([10.216.17.2]) by PUNAXCHECNPIN01.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.1433);
	 Tue, 20 Jun 2006 15:20:56 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6944F.06892018"
Subject: Get exact matching "Field" name from matching Documents
Date: Tue, 20 Jun 2006 15:20:55 +0530
Message-ID: <2B63BBC3F2F85B45A985FAD965DE969EEC481E@ITPXCHCLN1.enterprise.veritas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Get exact matching "Field" name from matching Documents
Thread-Index: AcaUTwZBxje2R/CaRw65ilH0jY7M7A==
From: "Vikas Khengare" <Vikas_Khengare@symantec.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jun 2006 09:50:56.0134 (UTC) FILETIME=[06A37260:01C6944F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6944F.06892018
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi

=20

            I am pretty well with getting results in the form of
Documents objects.

But now I want only those fields in which the query string found from
matching Document.

=20

So If I have Document as {

                                         Field("EmpName","John");

                                         Field("ManagerName","John");

                                         Field("Salary","20K");

                                         Field("Relation","emp");

                                         Field("Designation","Manager");

     }

If I give query for search as "John" it is giving me above document as
result, but from about document again I want only those field names in
which this word found.

=20

Is there any need to search again in that Document?

Or Should I need to handle it in Java coding only?

Or Is there any Lucene way to get that field name?

=20

Thanks & best regards

Vikas r. khengare


------_=_NextPart_001_01C6944F.06892018--

From java-user-return-21444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 10:03:12 2006
Return-Path: <java-user-return-21444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89283 invoked from network); 20 Jun 2006 10:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 10:03:11 -0000
Received: (qmail 2035 invoked by uid 500); 20 Jun 2006 10:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2007 invoked by uid 500); 20 Jun 2006 10:03:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1996 invoked by uid 99); 20 Jun 2006 10:03:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 03:03:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 03:03:03 -0700
Received: (qmail 32289 invoked by uid 509); 20 Jun 2006 12:02:37 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.102608 secs); 20 Jun 2006 10:02:37 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.102608 secs Process 32283)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 20 Jun 2006 12:02:37 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69450.A7F61B86"
Subject: Modifying the stored norm type
Date: Tue, 20 Jun 2006 12:02:36 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Modifying the stored norm type
Thread-Index: AcaUUKhMjkxib63pTv+1WbiSgDCrRQ==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69450.A7F61B86
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi again,

=20

After a lot of debugging and some API doc reading I have come to the
conclusion that the static encodeNorm method of the Similarity class
will encode my boost value into a single byte decimal number.

And I will loose a lot of resolution and will get severe rounding
errors.=20

(please correct me if I'm wrong)

=20

Since I need the exact float value as boost representation this isn't
good enough in my case.

=20

So I guess I will have to get lucene to store a 4 byte norm in the form
of a float instead of the single byte?

Is this do able or is it just madness? And will it slow the search
timings down or will it just eat more memory?

=20

Again the alternative is spending 0.8 million $ on fast.=20

=20

/

Regards

Marcus

=20

=20


------_=_NextPart_001_01C69450.A7F61B86--

From java-user-return-21445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 12:00:08 2006
Return-Path: <java-user-return-21445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25353 invoked from network); 20 Jun 2006 12:00:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 12:00:08 -0000
Received: (qmail 75691 invoked by uid 500); 20 Jun 2006 12:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75452 invoked by uid 500); 20 Jun 2006 12:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75441 invoked by uid 99); 20 Jun 2006 12:00:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:00:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:00:00 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 449683F6000500FF for java-user@lucene.apache.org; Tue, 20 Jun 2006 13:59:37 +0200
Subject: Re: Modifying the stored norm type
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
References:
	 <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 20 Jun 2006 13:59:36 +0200
Message-Id: <1150804776.4882.6.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-20 at 12:02 +0200, Marcus Falck wrote:

> So I guess I will have to get lucene to store a 4 byte norm in the
> form of a float instead of the single byte?
> 
> Is this do able or is it just madness? And will it slow the search
> timings down or will it just eat more memory? 

It is not to hard to refactor Lucene (back) in to doing that. I did it
once. That code is no longer around, but it took something like an hour.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 12:07:48 2006
Return-Path: <java-user-return-21446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28409 invoked from network); 20 Jun 2006 12:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 12:07:48 -0000
Received: (qmail 88685 invoked by uid 500); 20 Jun 2006 12:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88423 invoked by uid 500); 20 Jun 2006 12:07:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88412 invoked by uid 99); 20 Jun 2006 12:07:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:07:41 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:07:40 -0700
Received: by nz-out-0102.google.com with SMTP id n29so1397036nzf
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 05:07:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DHsIBXIqBr8+U15OQSRo+QfMc3in342Eno6TGtim92mCiSVfqrtY7G4GAWeVQk+WMIvDva+2hVMvhoM7lWdNuxXpsyq7rTSIncqCW5vgyByaX7G+G35HzBxgcGv/A6wUtTec8Yl0DtrhZVwIIHA7weV5tHGjRxBiX6VojgkXqww=
Received: by 10.65.84.19 with SMTP id m19mr6048729qbl;
        Tue, 20 Jun 2006 05:07:19 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Tue, 20 Jun 2006 05:07:19 -0700 (PDT)
Message-ID: <a36516400606200507h2c381597j6d847137a4c3757@mail.gmail.com>
Date: Tue, 20 Jun 2006 17:37:19 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: addIndexes() is taking infinite time ...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_92190_14781115.1150805239575"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_92190_14781115.1150805239575
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
I had five different indexes:
1 having 15469008 documents
2 having 7734504 documents
3 having 7734504 documents
4 having 7734504 documents
5 having 7734504 documents
Which sums to 46407024.
The constant values are
maxMergeFactor = 1000
maxBufferedDocs = 1000

I wrote a simple program which uses the addIndex method for adding indexes.
It has been more then 32 hours adding the indexes. My logs say upto now it
has finished only first two indexes. It is adding the third one.
I want to know what exactly happens while merging the indexes?? Why this
time grows exponentially ????
Can anybody explain this in brief.

Thanks in advance..
With Regards

------=_Part_92190_14781115.1150805239575--

From java-user-return-21447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 12:09:47 2006
Return-Path: <java-user-return-21447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28880 invoked from network); 20 Jun 2006 12:09:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 12:09:47 -0000
Received: (qmail 93296 invoked by uid 500); 20 Jun 2006 12:09:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92273 invoked by uid 500); 20 Jun 2006 12:09:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92262 invoked by uid 99); 20 Jun 2006 12:09:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:09:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:09:40 -0700
Received: (qmail 17498 invoked from network); 20 Jun 2006 12:09:18 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]870765@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 20 Jun 2006 12:09:18 -0000
Message-ID: <4497E56E.3080601@artnology.com>
Date: Tue, 20 Jun 2006 14:09:18 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: How to search for europian word with and without special characters
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I have a question regarding the indexing and searching for german 
characters. For eg. when I search for the word "müller" also I want to 
search for the word "mueller". How to achieve this in lucene.

Thanks,
supriya

-- 
Mit freundlichen Grüßen / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelösung für die Verwaltung der Sammlung zeitgenössischer
   Kunstwerke zur kulturellen Repräsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site für Springer: www.springeronline.com
 * E-Detailing-Portal für Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform für Biogen: www.ms-life.de
 * eCRM-System für Grünenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 12:22:09 2006
Return-Path: <java-user-return-21448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38946 invoked from network); 20 Jun 2006 12:22:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 12:22:09 -0000
Received: (qmail 17565 invoked by uid 500); 20 Jun 2006 12:22:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16913 invoked by uid 500); 20 Jun 2006 12:22:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16900 invoked by uid 99); 20 Jun 2006 12:22:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:22:02 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.155] (HELO web50412.mail.yahoo.com) (206.190.38.155)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 05:22:02 -0700
Received: (qmail 42349 invoked by uid 60001); 20 Jun 2006 12:21:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RXj3hatzTRN1oWRa2BtA4CUKa99tkEv8A+WgGYI8AD8GsDF0+Pm+h3/cMm6Of2qC0O6TBuhph+2s6vLTKckq7+ujr83Uj4Xw+eWszsIL4VxojjMBzgdZsoRdXBbTXEbK60BwlH3c2GXgUku3lwx/pQqkBZF8gykO+4AaYzk8r+c=  ;
Message-ID: <20060620122141.42347.qmail@web50412.mail.yahoo.com>
Received: from [82.99.196.156] by web50412.mail.yahoo.com via HTTP; Tue, 20 Jun 2006 05:21:41 PDT
Date: Tue, 20 Jun 2006 05:21:41 -0700 (PDT)
From: Shaghayegh Sahebie <shaghayegh_sahebie@yahoo.com>
Subject: Search within multiple different subfolders
To: luceneuser <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1100600085-1150806101=:43903"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1100600085-1150806101=:43903
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi all,
I'm a new user of Lucene and wanted to know if Lucne can search multiple data directories which these directories do not have similar parent? 
e.g. I have a directory named "father" and i have a subDirectory called "son" and i have another directory called "mother" with a subDirectory called "daughter" and i want to search within both "son" and "daughter" but not in other subfolders and files of "mother" and "father". 
Is it possible to limit the search to these two different path directories? should i use any kind of filter for it?

Thanks in advance
--Shaghayegh

		
---------------------------------
Talk is cheap. Use Yahoo! Messenger to make PC-to-Phone calls.  Great rates starting at 1¢/min.
--0-1100600085-1150806101=:43903--

From java-user-return-21449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 12:41:14 2006
Return-Path: <java-user-return-21449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49323 invoked from network); 20 Jun 2006 12:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 12:41:13 -0000
Received: (qmail 48880 invoked by uid 500); 20 Jun 2006 12:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48851 invoked by uid 500); 20 Jun 2006 12:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48840 invoked by uid 99); 20 Jun 2006 12:41:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:41:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:41:06 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id A1C08A663C
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 15:40:42 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id 92A6AA662E; Tue, 20 Jun 2006 15:40:42 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from nemo.level7.local (nemo.intranet [10.0.0.8])
	by mail.datagroup.ro (Postfix) with ESMTP id DDD91A662E
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 15:40:35 +0300 (EEST)
Content-class: urn:content-classes:message
Subject: RE: How to search for europian word with and without special characters
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 20 Jun 2006 15:40:35 +0300
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <7688DA376E992B408BEFBF22A9F7F618387E96@nemo.intranet>
In-Reply-To: <4497E56E.3080601@artnology.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to search for europian word with and without special characters
Thread-Index: AcaUYnBFlHB206Y9S9Cz8HawCrc97QAA8Bsg
From: "Mile Rosu" <mile.rosu@level7.ro>
To: <java-user@lucene.apache.org>
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 20062006 #189518, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.1 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Supriya,

One possibility would be to search for both m=FCller and mueller from =
the interface. It means you should "normalize" in some way the search =
query you are doing. This solution would not affect the content of the =
existing index (no reindexing needed).

Greets,
Mile

-----Original Message-----
From: Supriya Kumar Shyamal [mailto:supriya.shyamal@artnology.com]=20
Sent: Tuesday, June 20, 2006 3:09 PM
To: java-user@lucene.apache.org
Subject: How to search for europian word with and without special =
characters

Hi All,

I have a question regarding the indexing and searching for german=20
characters. For eg. when I search for the word "m=FCller" also I want to =

search for the word "mueller". How to achieve this in lucene.

Thanks,
supriya

--=20
Mit freundlichen Gr=FC=DFen / Regards
=20
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
_________________________________________________________________________=
_

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarel=F6sung f=FCr die Verwaltung der Sammlung zeitgen=F6ssischer
   Kunstwerke zur kulturellen Repr=E4sentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site f=FCr Springer: =
www.springeronline.com
 * E-Detailing-Portal f=FCr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform f=FCr Biogen: www.ms-life.de
 * eCRM-System f=FCr Gr=FCnenthal: www.gruenenthal.com

_________________________________________________________________________=
__=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 12:47:56 2006
Return-Path: <java-user-return-21450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50626 invoked from network); 20 Jun 2006 12:47:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 12:47:55 -0000
Received: (qmail 58350 invoked by uid 500); 20 Jun 2006 12:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58322 invoked by uid 500); 20 Jun 2006 12:47:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58311 invoked by uid 99); 20 Jun 2006 12:47:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:47:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:47:48 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn2.hy.skanova.net (7.2.072.1)
        id 449683F600053A21 for java-user@lucene.apache.org; Tue, 20 Jun 2006 14:47:27 +0200
Subject: Re: Modifying the stored norm type
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <1150804776.4882.6.camel@localhost>
References:
	 <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
	 <1150804776.4882.6.camel@localhost>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 20 Jun 2006 14:47:26 +0200
Message-Id: <1150807646.4882.16.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-20 at 13:59 +0200, karl wettin wrote:
> On Tue, 2006-06-20 at 12:02 +0200, Marcus Falck wrote:
> 
> > So I guess I will have to get lucene to store a 4 byte norm in the
> > form of a float instead of the single byte?
> > 
> > Is this do able or is it just madness? And will it slow the search
> > timings down or will it just eat more memory? 
> 
> It is not to hard to refactor Lucene (back) in to doing that. I did it
> once. That code is no longer around, but it took something like an hour.

I would personally start in the SegmentWriter/Reader-end.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 12:51:58 2006
Return-Path: <java-user-return-21451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53314 invoked from network); 20 Jun 2006 12:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 12:51:58 -0000
Received: (qmail 67142 invoked by uid 500); 20 Jun 2006 12:51:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67117 invoked by uid 500); 20 Jun 2006 12:51:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67106 invoked by uid 99); 20 Jun 2006 12:51:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:51:51 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 05:51:50 -0700
Received: by nz-out-0102.google.com with SMTP id 13so1275009nzp
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 05:51:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IN4CW0baKhFNCsr2e0NZUyU7jc7FsFa5Ku6TUPp2sNxWkG9KsLADP1MYUmt2I9DQEXjcMxsDWpjNe/FAhKyWl4x2j+Nzyd4Edq1cMPJKCD+eiL6iKlFrG0SbBk0SslY/JieqTK/xYcHq4emeqmYu10RgjZ2vRDaoiaq/L9/IDyk=
Received: by 10.36.251.45 with SMTP id y45mr8933858nzh;
        Tue, 20 Jun 2006 05:51:30 -0700 (PDT)
Received: by 10.37.20.1 with HTTP; Tue, 20 Jun 2006 05:51:29 -0700 (PDT)
Message-ID: <359a92830606200551s15c249ccq31f269486deb7578@mail.gmail.com>
Date: Tue, 20 Jun 2006 08:51:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search within multiple different subfolders
In-Reply-To: <20060620122141.42347.qmail@web50412.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6564_11392428.1150807889959"
References: <20060620122141.42347.qmail@web50412.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6564_11392428.1150807889959
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm a little confused. What does a directory have to do with searching? You
can certainly build the *index* from files in a directory, but Lucene
doesn't search files themselves, it searches the *index* built from the
files.

If I'm interpreting your problem correctly, you'll have to build an index,
perhaps putting some designator in each document about where it came from.
Crudely, you could just store the file path that the file was indexed from,
or even just some designation. For instance, a field "origin", with values
"mother", "father", "son", "daughter". Then your search could restrict
itself to documents with the "origin" field however you choose.

Hope that helps
Erick

------=_Part_6564_11392428.1150807889959--

From java-user-return-21452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 13:04:20 2006
Return-Path: <java-user-return-21452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61644 invoked from network); 20 Jun 2006 13:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 13:04:20 -0000
Received: (qmail 90254 invoked by uid 500); 20 Jun 2006 13:04:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89351 invoked by uid 500); 20 Jun 2006 13:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89339 invoked by uid 99); 20 Jun 2006 13:04:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 06:04:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.210.211 as permitted sender)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 06:04:13 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay2.uni-heidelberg.de (8.12.10/8.12.10) with ESMTP id k5KD5uvj003653
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 15:05:57 +0200 (MET DST)
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 0663A2C05C
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 15:03:50 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id AD4882C05A
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 15:03:48 +0200 (CEST)
Message-ID: <4497F234.8090805@uni-hd.de>
Date: Tue, 20 Jun 2006 15:03:48 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Indexing Dash concatenated words vs SynonymAnalyzer
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,


german words are often dash-concatenated, e.g. West-Berlin or something
like "C*-algebras and W*-algebras".

I tend to write my own analyzer like the SynonymAnalyzer from the
LIA-Book. I want to Index these words like this:

West-Berlin => Westberlin | West | Berlin | "West Berlin"
C*-algebras => c| algebra | calgebra

The difference to the SynonymAnalyzer will be that one word will be
separated in to two words. So that it is not a Synonym like  quick <=>
fast, but something like quick <=> "lightning fast".

Is it possible to get two words as a synonym at the same increment
position during indexing? What will happen with a phrase search?

Does anybody know existing approaches for this?

thanks in advance,

Martin



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 13:22:41 2006
Return-Path: <java-user-return-21453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74514 invoked from network); 20 Jun 2006 13:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 13:22:41 -0000
Received: (qmail 37897 invoked by uid 500); 20 Jun 2006 13:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37873 invoked by uid 500); 20 Jun 2006 13:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37862 invoked by uid 99); 20 Jun 2006 13:22:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 06:22:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 06:22:33 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.154B3047@mailer.syr.edu>; Tue, 20 Jun 2006 9:22:12 -0400
Message-ID: <4497F685.6070203@syr.edu>
Date: Tue, 20 Jun 2006 09:22:13 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to do pagination on fethed result using lucene...
References: <a36516400606192130j68429d35ya96bf914a66e17c1@mail.gmail.com>	 <Pine.LNX.4.58.0606200037160.18630@hal.rescomp.berkeley.edu> <a36516400606200052x14f0a313v3024c529dba81a1a@mail.gmail.com>
In-Reply-To: <a36516400606200052x14f0a313v3024c529dba81a1a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You may want to look into the new lazy field loading (on the trunk), in 
case you have 1 or 2 large fields that you don't necessarily display 
right away (unless a user clicks on a result).

This can speed up document loading significantly.

heritrix.lucene wrote:
> Hi,
> Actually i forgot to write that my application is web based and i am 
> running
> this on tomcat server.
>>> assuming your application is web based, the general concesus is to 
>>> start
> by implimening your app so that each page reexecutes the search,
>
> reexecuting the search is not feasible as every time it goes to look 
> those
> documents in index.
> i am also thinking for session as i told in my mail. I am here looking 
> for
> another option where the number of users are a lot and maintaining 
> session
> for each user is not feasible..
>
> with regards,
>
>
> On 6/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>>
>>
>> : I have built an small application that give some thousand results. I
>> want to
>> : display results as google displays using pagination.
>> : Here my question is, how I'll maintain the sequence of displayed 
>> result.
>> :
>> : Should i associate the "Hits" object along with the session.
>>
>> assuming your application is web based, the general concesus is to start
>> by implimening your app so that each page reexecutes the search, and 
>> then
>> accesses the docs it cares about ... if you find that it's 
>> inefficient for
>> your needs in some way, investigate sessoin caching  -- but it's
>> frequently fast enough as is.
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 13:24:47 2006
Return-Path: <java-user-return-21454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76146 invoked from network); 20 Jun 2006 13:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 13:24:47 -0000
Received: (qmail 43755 invoked by uid 500); 20 Jun 2006 13:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43721 invoked by uid 500); 20 Jun 2006 13:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43710 invoked by uid 99); 20 Jun 2006 13:24:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 06:24:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 06:24:39 -0700
Received: from dev2.mcpps.com ([213.94.211.166] helo=HUGHROSS)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1FsgD3-0000vN-PE
	for java-user@lucene.apache.org; Tue, 20 Jun 2006 14:24:02 +0100
From: "Hugh Ross" <hugh.ross@propylon.com>
To: <java-user@lucene.apache.org>
Date: Tue, 20 Jun 2006 14:24:07 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcaUbM5RA0cGuhjITcmTmvgk01493w==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <E1FsgD3-0000vN-PE@mercury.propylon.com>
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: hugh.ross@propylon.com
Subject: Exact Match Searches and Stop Words
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.0 required=5.0 tests=ALL_TRUSTED,AWL 
	autolearn=failed version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am running an exact match search using an index which was created using
the StandardAnalyzer.

My problem is that when I do an exact match search on this index and look
for a phrase such as

content:"Head of State" using the query parser (StandardAnalyzer again for
searching), the search brings back documents which contain text such as "The
man's head was in a sorry state".

This is not an exact match. The problem is that the standard analyzer
removes the stop word (i.e. "of") before indexing and searching. Is there an
workaround for this?

Many thanks,
Hugh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 14:04:39 2006
Return-Path: <java-user-return-21455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5066 invoked from network); 20 Jun 2006 14:04:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 14:04:39 -0000
Received: (qmail 37993 invoked by uid 500); 20 Jun 2006 14:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37950 invoked by uid 500); 20 Jun 2006 14:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37922 invoked by uid 99); 20 Jun 2006 14:04:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 07:04:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 07:04:30 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.154B35EE@mailer.syr.edu>; Tue, 20 Jun 2006 10:04:09 -0400
Message-ID: <44980059.2030903@syr.edu>
Date: Tue, 20 Jun 2006 10:04:09 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5 (Windows/20060113)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Exact Match Searches and Stop Words
References: <E1FsgD3-0000vN-PE@mercury.propylon.com>
In-Reply-To: <E1FsgD3-0000vN-PE@mercury.propylon.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hugh Ross wrote:
> The problem is that the standard analyzer removes the stop word (i.e.
> "of") before indexing and searching. Is there an
> workaround for this?

See my response to a similar question here:
<http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3c435D44FA.6050702@syr.edu%3e>

In short, an indexing-side workaround was once applied and then 
retracted to the code base, but a query-side fix is also required, and 
has yet to be applied.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 14:38:26 2006
Return-Path: <java-user-return-21456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25641 invoked from network); 20 Jun 2006 14:38:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 14:38:25 -0000
Received: (qmail 34928 invoked by uid 500); 20 Jun 2006 14:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34808 invoked by uid 500); 20 Jun 2006 14:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34780 invoked by uid 99); 20 Jun 2006 14:38:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 07:38:13 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.210] (HELO smtp111.sbc.mail.mud.yahoo.com) (68.142.198.210)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 07:38:13 -0700
Received: (qmail 4569 invoked from network); 20 Jun 2006 14:37:52 -0000
Received: from unknown (HELO sys2) (shelece@sbcglobal.net@69.107.127.159 with login)
  by smtp111.sbc.mail.mud.yahoo.com with SMTP; 20 Jun 2006 14:37:51 -0000
Reply-To: <bedouglas@earthlink.net>
From: "bruce" <bedouglas@earthlink.net>
To: <java-dev@lucene.apache.org>,
	<java-user@lucene.apache.org>
Subject: lucene in combination with pattern recognition...
Date: Tue, 20 Jun 2006 07:41:22 -0700
Message-ID: <07db01c69477$99dcc7c0$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 9.0, Build 9.0.2910.0
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi...

i'm looking at a problem and i can't figure out how to "easily" solve it...

basically, i'm trying to figure out if there's a way to use lucene/nutch
with some form of pattern matching to extract course information from a
College/Registrar's course section...

Assume I can point to a Regiatrar's section of a College site.
Assume I can then crawl through the section, and capture
 all the underlying information, including the Course
 information...
Is there a way to somehow use pattern matching/recognition
 to somehow interpret the DOM to pull out the class schedule
 information. I'm pretty sure there's no vanilla approach,
 so I'd even consider some kind of solution where I might
 have to intially evaluate/analyze the site, to tell it
 what DOM elements are "important"...

anyone done any work/projects like this...
any research/papers/sample apps i could look at...
any thoughts/comments/etc....

i could brute force this by writing a bunch of perl
scripts, with each script tied to a given registrar site,
but i'd like a more generalizable solution if one exists..

thanks

-bruce



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 14:52:57 2006
Return-Path: <java-user-return-21457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32179 invoked from network); 20 Jun 2006 14:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 14:52:57 -0000
Received: (qmail 66656 invoked by uid 500); 20 Jun 2006 14:52:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66615 invoked by uid 500); 20 Jun 2006 14:52:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66595 invoked by uid 99); 20 Jun 2006 14:52:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 07:52:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO mail.spline-software.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 07:52:49 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id ADEFD1CF54B; Tue, 20 Jun 2006 17:52:25 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id E2E1050877
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 17:52:23 +0300 (EEST)
Message-ID: <44980BAB.4030507@i-hypergrid.com>
Date: Tue, 20 Jun 2006 17:52:27 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: addIndexes() is taking infinite time ...
References: <a36516400606200507h2c381597j6d847137a4c3757@mail.gmail.com>
In-Reply-To: <a36516400606200507h2c381597j6d847137a4c3757@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------080507000008050602040204"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.8 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_30_40,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------080507000008050602040204
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I guess that you're adding those indexes one by one..
You should add all indexes at once rather then adding them one by one.
addIndexes() method takes array of directories/readers to add indexes.

IndexWriter performs optimize() after adding indexes, so with your  big 
index it can take long enough time.


heritrix.lucene wrote:
> Hi all,
> I had five different indexes:
> 1 having 15469008 documents
> 2 having 7734504 documents
> 3 having 7734504 documents
> 4 having 7734504 documents
> 5 having 7734504 documents
> Which sums to 46407024.
> The constant values are
> maxMergeFactor = 1000
> maxBufferedDocs = 1000
>
> I wrote a simple program which uses the addIndex method for adding 
> indexes.
> It has been more then 32 hours adding the indexes. My logs say upto 
> now it
> has finished only first two indexes. It is adding the third one.
> I want to know what exactly happens while merging the indexes?? Why this
> time grows exponentially ????
> Can anybody explain this in brief.
>
> Thanks in advance..
> With Regards
>

-- 
regards,
Volodymyr Bychkoviak


--------------080507000008050602040204--

From java-user-return-21458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 15:43:19 2006
Return-Path: <java-user-return-21458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59249 invoked from network); 20 Jun 2006 15:43:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 15:43:19 -0000
Received: (qmail 65045 invoked by uid 500); 20 Jun 2006 15:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64834 invoked by uid 500); 20 Jun 2006 15:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64818 invoked by uid 99); 20 Jun 2006 15:43:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 08:43:13 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 08:43:11 -0700
Received: (qmail 20758 invoked by uid 60001); 20 Jun 2006 15:42:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=J8zm80nPP/G0XPLQQPetU8KMth1DyrKRmUM/74CUmdkD3t/OBt0wGIWIKBoRzL/5fW1wA7YwrPvZKip3jF5YvixXGvl9PabubJqawzzs7BnUayzWH/osf/NzMtyhhYAYBo6rroIvIUmPZnbFBnea3hW9d/pEOgRIvlO6XlGDrWc=  ;
Message-ID: <20060620154249.20756.qmail@web50303.mail.yahoo.com>
Received: from [72.229.167.99] by web50303.mail.yahoo.com via HTTP; Tue, 20 Jun 2006 08:42:49 PDT
Date: Tue, 20 Jun 2006 08:42:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: addIndexes() is taking infinite time ...
To: java-user@lucene.apache.org
In-Reply-To: <a36516400606200507h2c381597j6d847137a4c3757@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you can tell how many indices you've merged, you must be mering them one at a time, and the pre and post merge optimize() calls are costing you.

Also, that maxBufferedDocs looks pretty low.  Unless you are working with very large documents and small heap, you should be able to bump that up much higher.  I've used 10,000+ in some cases.

Otis

----- Original Message ----
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, June 20, 2006 8:07:19 AM
Subject: addIndexes() is taking infinite time ...

Hi all,
I had five different indexes:
1 having 15469008 documents
2 having 7734504 documents
3 having 7734504 documents
4 having 7734504 documents
5 having 7734504 documents
Which sums to 46407024.
The constant values are
maxMergeFactor = 1000
maxBufferedDocs = 1000

I wrote a simple program which uses the addIndex method for adding indexes.
It has been more then 32 hours adding the indexes. My logs say upto now it
has finished only first two indexes. It is adding the third one.
I want to know what exactly happens while merging the indexes?? Why this
time grows exponentially ????
Can anybody explain this in brief.

Thanks in advance..
With Regards




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 15:47:29 2006
Return-Path: <java-user-return-21459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61563 invoked from network); 20 Jun 2006 15:47:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 15:47:29 -0000
Received: (qmail 72045 invoked by uid 500); 20 Jun 2006 15:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71893 invoked by uid 500); 20 Jun 2006 15:47:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71881 invoked by uid 99); 20 Jun 2006 15:47:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 08:47:22 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 08:47:21 -0700
Received: (qmail 443 invoked by uid 60001); 20 Jun 2006 15:47:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=FvexM0NgfjyvcH73LCe5yMjroewwdxFBc7PX2cWgoXjDInm2AR4ijEj2kliWkoCHt50gX4FDOpsMo1sej19v3H5jE3qZRtR174osktg5oubGo1wDtOoz4anCYxCuh/SYEWQkpAhIZ3LEhIZReuuePdHj8v9COl4BsX3kKeObCgo=  ;
Message-ID: <20060620154700.441.qmail@web50304.mail.yahoo.com>
Received: from [72.229.167.99] by web50304.mail.yahoo.com via HTTP; Tue, 20 Jun 2006 08:47:00 PDT
Date: Tue, 20 Jun 2006 08:47:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to search for europian word with and without special characters
To: java-user@lucene.apache.org
In-Reply-To: <4497E56E.3080601@artnology.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think you'll want to write your own Analyzer + Tokenizer, detect tokens w=
ith umlauts, and then emit two tokens at the same position (think of them a=
s synonyms), one being the original one with the umlaut, and the other one =
with the umlaut transformed according to the rules (e.g. =C3=BC -> ue).  Hm=
, I wonder if GermanAnalyzer already does this... maybe, have a look.

Otis

----- Original Message ----
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
To: java-user@lucene.apache.org
Sent: Tuesday, June 20, 2006 8:09:18 AM
Subject: How to search for europian word with and without special character=
s

Hi All,

I have a question regarding the indexing and searching for german=20
characters. For eg. when I search for the word "m=C3=BCller" also I want to=
=20
search for the word "mueller". How to achieve this in lucene.

Thanks,
supriya

--=20
Mit freundlichen Gr=C3=BC=C3=9Fen / Regards
=20
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarel=C3=B6sung f=C3=BCr die Verwaltung der Sammlung zeitgen=C3=B6ss=
ischer
   Kunstwerke zur kulturellen Repr=C3=A4sentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site f=C3=BCr Springer: www.springeronline.=
com
 * E-Detailing-Portal f=C3=BCr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform f=C3=BCr Biogen: www.ms-life.de
 * eCRM-System f=C3=BCr Gr=C3=BCnenthal: www.gruenenthal.com

___________________________________________________________________________=
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 16:01:32 2006
Return-Path: <java-user-return-21460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67700 invoked from network); 20 Jun 2006 16:01:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 16:01:32 -0000
Received: (qmail 95707 invoked by uid 500); 20 Jun 2006 16:01:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95679 invoked by uid 500); 20 Jun 2006 16:01:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95668 invoked by uid 99); 20 Jun 2006 16:01:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 09:01:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 09:01:24 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5KG12BO029157
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 18:01:03 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Modifying the stored norm type
Date: Tue, 20 Jun 2006 18:01:01 +0200
User-Agent: KMail/1.8.2
References: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606201801.01980.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 20 June 2006 12:02, Marcus Falck wrote:
> Hi again,
> 
>  
> 
> After a lot of debugging and some API doc reading I have come to the
> conclusion that the static encodeNorm method of the Similarity class
> will encode my boost value into a single byte decimal number.
> 
> And I will loose a lot of resolution and will get severe rounding
> errors. 
> 
> (please correct me if I'm wrong)
> 
>  
> 
> Since I need the exact float value as boost representation this isn't
> good enough in my case.

An exact float value is a bit of an oxymoron.
How exact do you need it to be? 

The range of values that can be encoded by the existing encodeNorm()
and decodeNorm() is quite big (about 10e-10 to 10e+10 iirc),
and since there are only 255 possible values in there (excluding 0),
the rounding errors can be severe indeed.
However, with a smaller range, the rounding errors would also be smaller.

Are 256 different values enough for your case?

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 17:20:26 2006
Return-Path: <java-user-return-21461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98248 invoked from network); 20 Jun 2006 17:20:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 17:20:25 -0000
Received: (qmail 41368 invoked by uid 500); 20 Jun 2006 17:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41315 invoked by uid 500); 20 Jun 2006 17:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41303 invoked by uid 99); 20 Jun 2006 17:20:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 10:20:19 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 10:20:17 -0700
Received: by ug-out-1314.google.com with SMTP id u2so2963019uge
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 10:19:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JUvBU4DmRqxyBmZvG4Dewy0Wfm/963ESUMgOcr9mSkxJFATE+fQsk6NIHP4bLCB8GgeVBUIBRElAm9vFA+ij7PwnTMIyC6DGBAkrnbAzMne5Q73yvZkWGBTJo2fzfFd2YYlQX/hHszjUWjS4nviXf7Ka0x8aBubsqN4lHGQrCc4=
Received: by 10.67.25.9 with SMTP id c9mr3161711ugj;
        Tue, 20 Jun 2006 10:19:55 -0700 (PDT)
Received: by 10.66.243.19 with HTTP; Tue, 20 Jun 2006 10:19:55 -0700 (PDT)
Message-ID: <f071061b0606201019x3b003d5ck1a80115170281bf@mail.gmail.com>
Date: Tue, 20 Jun 2006 19:19:55 +0200
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: using lucene Lock inter-jvm
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am trying to peruse lucene's Lock for my own purposes, I need to
lock several java processes and I thought I could reuse the Lock
stuff. I understand lucene locks work across jvm.

But I cannot make it work. I tried to reproduce my problem in a small class:

public class SysLock {
    private static final Logger logger = Logger.getLogger(SysLock.class);

    private int id;

    public SysLock(int i) {
        id = i;
    }

//    public static void main(String[] args) throws Exception {
//        System.setProperty("org.apache.lucene.lockDir", "C:\\temp\\todel");
//        SysLock l1 = new SysLock(1);
//        SysLock l2 = new SysLock(2);
//
//        TransferThread t = l1.new TransferThread(l1);
//        t.start();
//        TransferThread t2 = l2.new TransferThread(l2);
//        t2.start();
//
//        logger.info("Finished.");
//    }

    public static void main(String[] args) throws Exception {
        System.setProperty("org.apache.lucene.lockDir", "C:\\temp\\todel");
        SysLock l1 = new SysLock(new Date().getSeconds());

        TransferThread t = l1.new TransferThread(l1);
        t.start();

        logger.info("Finished.");
    }

    private void forever() throws IOException {
        FSDirectory directory = FSDirectory.getDirectory("C:\\temp\\a", true);
        try {
            new Lock.With(directory.makeLock("COMMIT_LOCK_NAME"),
COMMIT_LOCK_TIMEOUT) {
                public Object doBody() throws IOException {
                    while (true) {
                        System.out.println("i'm " + id);
                        try {
                            Thread.sleep(2000);
                        }
                        catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }.run();
        }
        catch (Exception e) {
            System.out.println(id + " could not get lock");
        }
    }

    class TransferThread extends Thread {
        public TransferThread(SysLock sl) {
            this.sl = sl;
        }

        public void run() {
            try {
                sl.forever();
            }
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        private SysLock sl;
    }
}

When I run the main() that is commented (that is, the lock works with
two threads in the same jvm) it works ok, the second TransferThread
cannot get the lock.

But when I run the uncommented main() twice, both processes adquire a
lock, even if only one lock file exists in the lockdir. Something I am
missing probably....

Many thanks
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 17:33:14 2006
Return-Path: <java-user-return-21462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4809 invoked from network); 20 Jun 2006 17:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 17:33:14 -0000
Received: (qmail 68672 invoked by uid 500); 20 Jun 2006 17:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68639 invoked by uid 500); 20 Jun 2006 17:33:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68628 invoked by uid 99); 20 Jun 2006 17:33:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 10:33:07 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.105] (HELO web34107.mail.mud.yahoo.com) (66.163.178.105)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 10:33:06 -0700
Received: (qmail 98031 invoked by uid 60001); 20 Jun 2006 17:32:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=UyLR3hvyOCaUkKijxe83S1ogiNofCiYDWNThe2YEnEUNVkIctd53AdCxaKu2VeTHK1N4PR9KCrbfOAx4unJaHIAWbLLAzG2r1Y6EhK0o/VaC0c+1jsUFq09YfikQi1TlayTvdOVv1U1uOgfmP8J9ld4V46fti6JXLkgm2aZgf7I=  ;
Message-ID: <20060620173245.98029.qmail@web34107.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34107.mail.mud.yahoo.com via HTTP; Tue, 20 Jun 2006 10:32:45 PDT
Date: Tue, 20 Jun 2006 10:32:45 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: Re: faceting and categorizing on color?
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0606190032380.21402@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> First off, let me clear up somethign regarding your
> index field structure,
> you mentioned that you currently have documents that
> look like this...
> 
> : IMAGE	1
> : COLORS	F00000 FF0000 FFF000 FFFF00 FFFFF0 FFFFFF
> : E00000 EE0000 EEE000 EEEE00
> 
> If you are indexing it as Field.Keyword and you can
> query for
> COLORS:FFFFFF and get results, then either you are
> only only getting
> documents that are 100% white, or when you indexed
> the Documents you added
> eeach collor as a seperate field instance 

I thought that having: F00000 FF0000 FFFFFF FFFF00...
in one field and then searching for FFFFFF in it would
match all documents that contain that "word" so I
would be finding documents that could be < 100% white.
In either case, I don't actually have a document
structure yet ;o) It seems though that you are
recommending this document structure:

Field Value
IMAGE 1
COLOR FF0000
COLOR 00FF00 
COLOR 0000FF
COLOR 808080


And then if this image were 50% Red, 25% Green, 12.5%
Blue and 12.5% Grey the document would look like this:

Field Value
IMAGE 1
COLOR FF0000
COLOR FF0000
COLOR FF0000
COLOR FF0000
COLOR 00FF00 
COLOR 00FF00 
COLOR 0000FF
COLOR 808080

Is that correct? I wrote a unit test to compare term
document frequencies while iterating through the
TermEnum object returned by IndexReader.terms() and
the counts were equal. I guess I am still not clear on
what the differences/advantages/disadvantages are
between the above an document and one that like this:

Field Value
IMAGE 1
COLORS FF0000 FF0000 FF0000 FF0000 00FF00 00FF00
0000FF 808080

In fact with all the color values stored in a single
field, if I did some sort of pixel region
mapping/resolution reduction then wouldn't it lend
itself to Span/Fuzzy queries so I could not only
search for images which have both red and green, but
rank them based on how close the colors are to each
other? Would I lose that capability if I stored each
color in its own field? So perhaps a more general
question is when is it better to collapse a bunch of
words into a single field vs. spread them out over
many fields, all of which have the same field name?

> If you index both the full color codes as well as
> just the most
> significant hex characters from the RGB code in
> seperate fields, you can
> do "coarse" faceting on one field, and "refined"
> faceting on the other...
> 
> IMAGE:  1
> COLOR: FFFFFE FFA3B4 2287C3 773442 666BED
> COARSE_COLOR: FFF FAB 28C 734 66E

That's a great idea and seems way more straightforward
than the RGB/HSV etc. distance calculation algorithms
I've been reading about :o) I'll have to run some
tests to see how accurate that reduction appears to
people.

> Usually, you need to do one pass over your values
> and one pass over
> your documents -- with a HitCollector you do a pass
> over your values first
> Alternately, you can do one pass over
> your documents building
> a BitSet of the docs that match, and *then* do a
> pass over the values

Huh, perhaps I don't understand the HitCollector
fully. Are you saying that if I have an index with 100
documents, each of which have a color field (let's say
25 of the documents have FFFFFF in the color field)
and I do a search for FFFFFF...using a HitCollector
I'm iterating over all 100 documents while extracting
values whereas with the regular Hits based search I
would only be iterating over 25?

Thanx again.

JAMES

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 17:48:04 2006
Return-Path: <java-user-return-21463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11670 invoked from network); 20 Jun 2006 17:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 17:48:03 -0000
Received: (qmail 97060 invoked by uid 500); 20 Jun 2006 17:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97033 invoked by uid 500); 20 Jun 2006 17:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97017 invoked by uid 99); 20 Jun 2006 17:47:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 10:47:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 10:47:56 -0700
Received: by py-out-1112.google.com with SMTP id f28so16505pyf
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 10:47:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eLNP0UE4EUfuTqGj8fK2AQdOtUZQmhgMt2lUIKg4Voor37vOplObMMTFsO6uqzs0GhUeRTRkljoOnVYw4c/Wy7H+xFXcBjeBNJ2GwtonH0++EAJhYhD6Uy2useNtDS1f87Q5N39FaRdy1MxLrLV4TO19yusV8ciaMA7uToTtY3o=
Received: by 10.35.21.1 with SMTP id y1mr10031792pyi;
        Tue, 20 Jun 2006 10:47:35 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Tue, 20 Jun 2006 10:47:35 -0700 (PDT)
Message-ID: <c68e39170606201047q512e5154nfc413d3a186be37b@mail.gmail.com>
Date: Tue, 20 Jun 2006 13:47:35 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying the stored norm type
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/20/06, Marcus Falck <marcus.falck@observer.se> wrote:
> So I guess I will have to get lucene to store a 4 byte norm in the form
> of a float instead of the single byte?

Can you store the float in a field instead?  That seems like it might
be a bit easier than modifying how lucene stores norms.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 18:11:00 2006
Return-Path: <java-user-return-21464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24037 invoked from network); 20 Jun 2006 18:10:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 18:10:59 -0000
Received: (qmail 34773 invoked by uid 500); 20 Jun 2006 18:10:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34412 invoked by uid 500); 20 Jun 2006 18:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34401 invoked by uid 99); 20 Jun 2006 18:10:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 11:10:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ziv.gome@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 11:10:50 -0700
Received: by py-out-1112.google.com with SMTP id d80so1523042pyd
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 11:10:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sj58c1rlILlpokyCfEZ2BBmlaOpA3d/DxAIiWYvwQc3c23Lnf5q8DEn0G34bNdZe8wrMRlFX+MXm8wDbkhAxjm1ILom2nFLNAJZAX9ZXmPNdURqn7N5vMBuXJc2Hji7Kfn3sjxROxzTcGTzZ3CjocK1RHLxUDVuG5t5zGjO/BXg=
Received: by 10.35.115.18 with SMTP id s18mr10050093pym;
        Tue, 20 Jun 2006 11:10:29 -0700 (PDT)
Received: by 10.35.116.10 with HTTP; Tue, 20 Jun 2006 11:10:28 -0700 (PDT)
Message-ID: <eafbbc180606201110m652a2fc5vfa9bf50067b59760@mail.gmail.com>
Date: Tue, 20 Jun 2006 21:10:28 +0300
From: "Ziv Gome" <ziv.gome@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SynonymsQuery
In-Reply-To: <eafbbc180606191126m2876bc61xa43dc9ffb34cc11d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9398_13630141.1150827028165"
References: <eafbbc180606191126m2876bc61xa43dc9ffb34cc11d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9398_13630141.1150827028165
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

  Hi All, NG Vinny.



----- Written in response to NG Vinny post from 12-Jun, for some reason I
could not add it to the thread. :-(



The problem lies in versions. The published code for SynonymsQuery was
originally written on Lucene 1.4.3. It did not compile as is with Lucene 2.=
0.
The required changes are very simple really; it includes the addition of
"throws IOException" at:

(Line 102)

    public SynonymsWeight( Searcher searcher ) throws IOException {



and

(line 231)

  protected Weight createWeight( Searcher searcher ) throws IOException {



In order to verify the code in Lucene 2.0, I have written a small unit test
class, written for the 1.4.3 and then verified for 2.0. I'm including it
here, hoping it may simplify the understanding of what the SynonymQuery
actually does. The test performs searches using the SynonymQuery, and then
simulates the same searches directly (finding term frequencies for all
synonyms using the IndexReader and and computes the final score). If you ar=
e
interested in how it works, follow the "simulateSearch" track. Hope it's no=
t
too much of a mess=85

Sorry for the late response.

Thanx,

Ziv G.



---------------------------------------------------------------------------=
----------------------------------------------------


SynonymsQueryTest class, requires junit.jar to be included

---------------------------------------------------------------------------=
----------------------------------------------------






package org.apache.lucene.search.synonyms;



import junit.framework.Assert;

import junit.framework.TestCase;

import org.apache.lucene.index.IndexReader;

import org.apache.lucene.index.Term;

import org.apache.lucene.index.TermDocs;

import org.apache.lucene.index.IndexWriter;

import org.apache.lucene.search.*;

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;



import java.io.IOException;

import java.io.File;

import java.io.StringReader;

import java.util.*;



public class SynonymsQueryTest extends TestCase {

  private static final boolean VERY_VERBOSE =3D true;



  /**

   * Allowed difference between expected and actual scores

   */

  private static final float ALLOWED_DELTA =3D 0.0001f;



  private static final String INDEX_PATH =3D "./testIndex";



  /**

   * Boost (or penalty) factor applied to synonyms

   */

  private static float SYNONYM_TERM_BOOST =3D 0.8f;



  /**

   * Name of contents field

   */

  private static final String CONTENTS_FIELD =3D "contents";



  /**

   * strings to be searched

   */

  private static final String[] simpleQueryStrs =3D {

    "source", // with synonyms

    "direct", // without synonyms

  };



  private static HashMap SYNONYM_MAP =3D new HashMap();





  /**

   * @param name name of this test

   */

  public SynonymsQueryTest(String name) {

    super(name);

  }



  protected void setUp() throws Exception {

    super.setUp();

    ArrayList synForDirect =3D new ArrayList();

    synForDirect.add("beginning");

    synForDirect.add("origin");

    synForDirect.add("root");

    SYNONYM_MAP.put("direct", synForDirect);//With synonyms

    createTestIndex();

  }



  private void createTestIndex() throws Exception {

    File indexDir =3D new File(INDEX_PATH);

    if (indexDir.exists() && !deleteRecuresive(indexDir)){

      throw new Exception("The index path " + indexDir.getAbsolutePath() + =
"
exists and could not be deleted");

    }

    IndexWriter indexWriter =3D new IndexWriter(indexDir, new
StandardAnalyzer(), true);

    for (String s : TEST_FILES) {

      Document doc =3D new Document();

      doc.add(new Field(CONTENTS_FIELD, new StringReader(s)));

      indexWriter.addDocument(doc);

    }

    indexWriter.optimize();

  }



  private boolean deleteRecuresive(File deleteIt) {

    if (!deleteIt.exists())

      return true;

    if (deleteIt.isDirectory()){

      for (File file : deleteIt.listFiles()) {

        if (!deleteRecuresive(file))

          return false;

      }

    }

    return deleteIt.delete();

  }



  /**

   * For running from outside

   */

  public static void main(String[] args) {

    SynonymsQueryTest tester =3D new SynonymsQueryTest("main");

    try {

      tester.setUp();

      tester.testSearchWithSynonyms();

      tester.tearDown();

    } catch (Exception e) {

      e.printStackTrace();

    }

  }



  /**

   * Tests scoring in synonyms/no synonyms scenarios

   */

  public void testSearchWithSynonyms() {

    System.out.println("Starting testSearchWithSynonyms()...");

    try {

      runSearchScoring(simpleQueryStrs);

      System.out.println("...success!");

    } catch (Exception e) {

      System.out.println(e);

      Assert.fail(e.toString());

    }

  }





  /**

   * Tests scoring

   */

  private void runSearchScoring(String[] queryStrs) throws Exception {

    IndexReader reader =3D IndexReader.open(INDEX_PATH);

    IndexSearcher searcher =3D new IndexSearcher(reader);



    for (int i =3D 0, counter =3D 0; i < queryStrs.length; i++) {

      StringBuffer dispStr =3D new StringBuffer();

      dispStr.append(++counter).append(": search for
'").append(queryStrs[i]).append("'");

      Hits searchHits =3D search(searcher, queryStrs[i]);

      Hashtable simulatedHits =3D simulateSearch(searcher, reader,
queryStrs[i]);

      reportResults(dispStr, searchHits, simulatedHits);

      assertEquals("number of actually found hits", simulatedHits.size(),
searchHits.length());

      checkResults(searchHits, simulatedHits);

    }

  }



  private void reportResults(StringBuffer dispStr, Hits searchHits,
Hashtable simulatedHits) throws IOException {

    if (VERY_VERBOSE) {

      System.out.println(dispStr.toString());

      System.out.println("search hits:");

      displayHits(searchHits.length(), searchHits);

      System.out.println("Simulated hits:");

      SearchHit[] hits =3D new SearchHit[simulatedHits.size()];

      simulatedHits.values().toArray(hits);

      Arrays.sort(hits);

      displayHits(hits.length, hits);

    } else {

      System.out.println(dispStr.toString() + " =3D> search hits: " +
searchHits.length () + ", Simulated hits: " + simulatedHits.size());

    }

  }



  protected void displayHits(int totHits, Hits hits) throws IOException {

    if (null =3D=3D hits || hits.length() <=3D 0) {

      System.out.println("  no results\n");

    } else {

      StringBuffer dispBuf=3D new StringBuffer();

      dispBuf.append("\ttotal num hits: "+totHits+"\n");

      dispBuf.append("\tRank\tScore\tID\tKey\n");

      for (int i =3D 0; i < hits.length(); i++) {

        dispBuf.append('\t').

          append(i+1).append('\t').

          append(hits.score(i)).append('\t').

          append(hits.id(i)).append('\t');

      }

      System.out.println(dispBuf.toString());

    }

  }



  protected void displayHits(int totHits, SearchHit[] hits) throws
IOException {

    if (null =3D=3D hits || hits.length <=3D 0) {

      System.out.println("  no results\n");

    } else {

      StringBuffer dispBuf=3D new StringBuffer();

      dispBuf.append("\ttotal num hits: "+totHits+"\n");

      dispBuf.append("\tRank\tScore\tID\tKey\n");

      for (int i =3D 0; i < hits.length; i++) {

        dispBuf.append('\t').

          append(i+1).append('\t').

          append(hits[i].score).append('\t').

          append(hits[i].id).append('\t');

      }

      System.out.println(dispBuf.toString());

    }

  }





  private static void checkResults(Hits searchHits, Hashtable simulatedHits=
)
throws IOException {

    for (int k =3D 0; k < searchHits.length(); ++k) {

      SearchHit hit =3D (SearchHit) simulatedHits.get(new Integer(
searchHits.id(k)));

      assertTrue("Doc ID in position " + k + " is missing", hit !=3D null);

      assertEquals("Score in position " + k, hit.score,
searchHits.score(k), ALLOWED_DELTA);

    }

  }



  /**

   * Perform the search using Lucene queries

   */

  private Hits search(IndexSearcher searcher, String queryStr) throws
Exception {

    SynonymsQuery synQuery =3D new SynonymsQuery();

    for (Iterator iterator =3D getSynonyms(queryStr).iterator();
iterator.hasNext();) {

      String s =3D (String) iterator.next();

      addTerm(synQuery, s, !s.equals(queryStr));

    }

    Hits hits =3D searcher.search(synQuery);

    return hits;

  }



  private void addTerm(SynonymsQuery synQuery, String queryStr, boolean
synonym) {

    synQuery.add(new TermQuery(new Term(CONTENTS_FIELD, queryStr)), synonym
? SYNONYM_TERM_BOOST : 1f, synonym);

  }



  private static ArrayList getSynonyms(String word){

    ArrayList result =3D new ArrayList();

    result.add(word);

    ArrayList synonms =3D (ArrayList)SYNONYM_MAP.get(word);;

    if (synonms !=3D null)

      result.addAll(synonms);

    return result;

  }



  private static Term[] getSynonymTerms(String field, String word) throws
Exception {

    ArrayList words =3D getSynonyms(word);

    if ((words =3D=3D null) || (words.size() <=3D 0))

      return null;

    Term[] ret =3D new Term[words.size()];

    for (int i =3D 0; i < ret.length; ++i) {

      ret[i] =3D new Term(field, (String) words.get(i));

    }

    return ret;

  }



  /**

   * Perform the search using simulation of the calulation

   */

  private Hashtable simulateSearch(IndexSearcher searcher, IndexReader
reader, String queryStr) throws Exception {

    try {

      Similarity sim =3D searcher.getSimilarity();

      Term[] synonymsTerms =3D getSynonymTerms(CONTENTS_FIELD, queryStr);

      // calculate IDF and field weights

      int docCount =3D reader.numDocs();

      int originalDocFreq =3D reader.docFreq(synonymsTerms[0]); // doc
requency of the original word in content

      float originalIdf =3D sim.idf(originalDocFreq, docCount); // idf of t=
he
original word in content

      // get term vectors and calculate the raw scores

      Hashtable rawContentResults =3D new Hashtable();

      for (int i =3D 0; i < synonymsTerms.length; ++i) {

        float boost =3D 1; // for the original word it is 1

        if (i !=3D 0) { // synonym

          int docFreq =3D reader.docFreq(synonymsTerms[i]);

          float idf =3D sim.idf(docFreq, docCount);

          boost *=3D (idf * idf) / (originalIdf * originalIdf);

          boost *=3D SYNONYM_TERM_BOOST;

        }

        Hashtable hits =3D getTermDocScores(reader, synonymsTerms[i], boost=
);

        mergeSynonyms(rawContentResults, hits);

      }

      float contentBoost =3D originalIdf;

      Hashtable contentResults =3D calculateScores(rawContentResults, reade=
r,
sim, contentBoost, Float.MAX_VALUE);

      return contentResults;

    } finally {

    }

  }



  private static class ScoreCollector {

    public int id =3D -1;

    public float scoreSum =3D 0;

    public float scoreMax =3D 0;

    public int count =3D 0;



    public ScoreCollector(int id, float score) {

      this.id =3D id;

      this.scoreSum =3D score;

      this.scoreMax =3D score;

    }



    public void add(float score) {

      this.scoreSum +=3D score;

      if (this.scoreMax < score)

        this.scoreMax =3D score;

    }

  }





  /**

   * Returns documents and their scores for the given term.

   *

   * @param rawResults Hashtable<Integer=3DLucene Doc ID, ScoreCollector>

   * @param reader     IndexReader for searching

   * @param sim        Similarity object

   * @param boost      boost factor for normalization factors

   * @param limit      maximum allowed value for the score

   * @return Hashtable<Integer=3DLucene Doc ID, SearchHit>, where SearchHit=
's
score is zero,

   *         and rawScore contains the calculated document score

   */

  private static Hashtable calculateScores(Hashtable rawResults, IndexReade=
r
reader, Similarity sim,

                                           float boost, float limit) throws
Exception {

    Hashtable results =3D new Hashtable();

    byte[] norms =3D reader.norms(CONTENTS_FIELD);

    Enumeration keys =3D rawResults.keys();

    while (keys.hasMoreElements()) {

      Integer id =3D (Integer) keys.nextElement();

      ScoreCollector rawHit =3D (ScoreCollector) rawResults.get(id);

      float score =3D sim.tf(rawHit.scoreSum) * boost *
Similarity.decodeNorm(norms[
rawHit.id]);

      if (score > limit)

        score =3D limit;

      SearchHit hit =3D new SearchHit(score, id.intValue());

      results.put(id, hit);

    }

    return results;

  }



  private static class SearchHit implements Comparable{



    float score;

    int id;



    public SearchHit(float score, int id) {

      this.score =3D score;

      this.id =3D id;

    }



    public int compareTo(Object o) {

      return (int)(100*(((SearchHit)o).score - this.score));

    }

  }



  /**

   * Appends the new search hits into the search results collection.

   * The scores are simply summarized.

   *

   * @param results Hashtable<Integer=3DLucene Doc ID, ScoreCollector>

   * @param hits    Hashtable<Integer=3DLucene Doc ID, SearchHit>, where
SearchHit's score is zero,

   *                and rawScore contains the term document frequency with
boost (needed for synonyms)

   */

  private static void mergeSynonyms(Hashtable results, Hashtable hits) {

    Enumeration keys =3D hits.keys();

    while (keys.hasMoreElements()) {

      Integer id =3D (Integer) keys.nextElement();

      SearchHit searchHit =3D (SearchHit) hits.get(id);

      ScoreCollector contentHit =3D (ScoreCollector) results.get(id);

      if (contentHit =3D=3D null) {

        results.put(id, new ScoreCollector(searchHit.id, searchHit.score));

      } else {

        contentHit.add(searchHit.score);

      }

    }

  }



  /**

   * Returns documents and their scores for the given term.

   *

   * @param reader IndexReader for searching

   * @param term   term to search

   * @param boost  boost (intended for synonyms, as we want to summarize ra=
w
the term frequences here,

   *               and apply some boost to synonyms)

   * @return Hashtable<Integer=3DLucene Doc ID, SearchHit>, where SearchHit=
's
score is zero,

   *         and rawScore contains the term document frequency with boost
(needed for synonyms)

   */

  private static Hashtable getTermDocScores(IndexReader reader, Term term,
float boost) throws Exception {

    Hashtable results =3D new Hashtable();

    TermDocs docs =3D reader.termDocs(term);

    try {

      while (docs.next()) {

        int docLuceneId =3D docs.doc();

        int freq =3D docs.freq();

        float score =3D freq * boost;

        SearchHit hit =3D new SearchHit(score, docLuceneId);

        results.put(new Integer(docLuceneId), hit);

      }

    } finally {

      docs.close();

    }

    return results;

  }





  private static String[] TEST_FILES =3D {

    "First document is here with both terms, but without synonyms: source
and direct are both here. source appears twice",

    "Second document is here with both terms, and with synonym for the term
source (direct is also here): the terms beginning, root and origin are all
synonyms of the term source (which appears twice)",

    "Third document should never be found. none of therms are here.",

    "4th document is here to illustrate finding a document only by synonym.
there for the term origin is here.",

  };



}

------=_Part_9398_13630141.1150827028165--

From java-user-return-21465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 19:43:20 2006
Return-Path: <java-user-return-21465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64920 invoked from network); 20 Jun 2006 19:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 19:43:20 -0000
Received: (qmail 69405 invoked by uid 500); 20 Jun 2006 19:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69366 invoked by uid 500); 20 Jun 2006 19:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69355 invoked by uid 99); 20 Jun 2006 19:43:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 12:43:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 12:43:12 -0700
Received: by py-out-1112.google.com with SMTP id f25so75pyf
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 12:42:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gujqpZ5kekbXjsGvK8lQtvKaUC+plG+8B64MJcjcro96cG2s1Tgf30c7TqHqZ7wjurxjUtYRNBVECXl56RjzcNbtrz1P8WrwBumQzPaeuDPxWFENjtyhwb9BQ3JJ45TreG/vAjcuRK4oK+NjBMB+DLGoUxpEMZEmKnbXoGP9R+Y=
Received: by 10.35.27.1 with SMTP id e1mr10179313pyj;
        Tue, 20 Jun 2006 12:42:51 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Tue, 20 Jun 2006 12:42:51 -0700 (PDT)
Message-ID: <c68e39170606201242q1e310905lbffac774f4efa58e@mail.gmail.com>
Date: Tue, 20 Jun 2006 15:42:51 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Dash concatenated words vs SynonymAnalyzer
In-Reply-To: <4497F234.8090805@uni-hd.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4497F234.8090805@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/20/06, Martin Braun <mbraun@uni-hd.de> wrote:
> german words are often dash-concatenated, e.g. West-Berlin or something
> like "C*-algebras and W*-algebras".
>
> I tend to write my own analyzer like the SynonymAnalyzer from the
> LIA-Book. I want to Index these words like this:
>
> West-Berlin => Westberlin | West | Berlin | "West Berlin"
> C*-algebras => c| algebra | calgebra

Hi Martin,

Solr's WordDelimiterFilter can index West-Berlin as "West" | "Berlin"
| "WestBerlin".
It currently indexes "Berlin" after "West" and "WestBerlin" at the
same position as "Berlin", so prase matches like "West Berlin" will
still work.

It does this automatically, even if there isn't a "-" inbetween the
words, so "WestBerlin" in the document would be indexed the same as
"West-Berlin" by default.


> The difference to the SynonymAnalyzer will be that one word will be
> separated in to two words. So that it is not a Synonym like  quick <=>
> fast, but something like quick <=> "lightning fast".
>
> Is it possible to get two words as a synonym at the same increment
> position during indexing? What will happen with a phrase search?

I don't know if you would still need it after the WordDelimiterFilter,
but Solr's SynonymFilter handles multi-token synonyms and multiple
synonyms at the same position.

It's all open-source, so you can yank them out and use them for your
own uses, or try using Solr itself :-)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 19:45:26 2006
Return-Path: <java-user-return-21466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65658 invoked from network); 20 Jun 2006 19:45:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 19:45:26 -0000
Received: (qmail 71845 invoked by uid 500); 20 Jun 2006 19:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71818 invoked by uid 500); 20 Jun 2006 19:45:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71807 invoked by uid 99); 20 Jun 2006 19:45:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 12:45:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 12:45:20 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0118F5B763; Tue, 20 Jun 2006 12:44:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F07687F403
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 12:44:59 -0700 (PDT)
Date: Tue, 20 Jun 2006 12:44:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to search for europian word with and without special characters
In-Reply-To: <4497E56E.3080601@artnology.com>
Message-ID: <Pine.LNX.4.58.0606201242340.3561@hal.rescomp.berkeley.edu>
References: <4497E56E.3080601@artnology.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


take a look at the ISOLatin1AccentFilter .. it doesn't seem to do exactly
what you want (replacing "=FC" with "ue" .. it just uses "u") but it should
give you an idea of what you can do.

There was also a discussion recently about how you can use a modified
version of this Filter at index time to get both versions of the word
indexed with the same position...

http://www.nabble.com/Question-about-special-characters-t1676416.html#a4545=
641



: Date: Tue, 20 Jun 2006 14:09:18 +0200
: From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: How to search for europian word with and without special
:     characters
:
: Hi All,
:
: I have a question regarding the indexing and searching for german
: characters. For eg. when I search for the word "m=FCller" also I want to
: search for the word "mueller". How to achieve this in lucene.
:
: Thanks,
: supriya
:
: --
: Mit freundlichen Gr=FC=DFen / Regards
:
: Supriya Kumar Shyamal
:
: Software Developer
: tel +49 (30) 443 50 99 -22
: fax +49 (30) 443 50 99 -99
: email supriya.shyamal@artnology.com
: ___________________________
: artnology GmbH
: Milastr. 4
: 10437 Berlin
: ___________________________
:
: http://www.artnology.com
: _________________________________________________________________________=
_
:
:  News / Aktuelle Projekte:
:  * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
:    Softwarel=F6sung f=FCr die Verwaltung der Sammlung zeitgen=F6ssischer
:    Kunstwerke zur kulturellen Repr=E4sentation des Bundes.
:
:  Projektreferenzen:
:  * Globaler eShop und Corporate-Site f=FCr Springer: www.springeronline.c=
om
:  * E-Detailing-Portal f=FCr Novartis: www.interaktiv.novartis.de
:  * Service-Center-Plattform f=FCr Biogen: www.ms-life.de
:  * eCRM-System f=FCr Gr=FCnenthal: www.gruenenthal.com
:
: _________________________________________________________________________=
__
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 19:55:30 2006
Return-Path: <java-user-return-21467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69294 invoked from network); 20 Jun 2006 19:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 19:55:30 -0000
Received: (qmail 92820 invoked by uid 500); 20 Jun 2006 19:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92797 invoked by uid 500); 20 Jun 2006 19:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92785 invoked by uid 99); 20 Jun 2006 19:55:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 12:55:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 12:55:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B60B95B766; Tue, 20 Jun 2006 12:55:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AD0857F403
	for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 12:55:00 -0700 (PDT)
Date: Tue, 20 Jun 2006 12:55:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Custom ScoreDocComparator and normalized Scores
In-Reply-To: <2829114EEAA49E4899880229DBC4394A07EC35D8@exchback.GRUPOINTERCOM.oficinas>
Message-ID: <Pine.LNX.4.58.0606201250230.3561@hal.rescomp.berkeley.edu>
References: <2829114EEAA49E4899880229DBC4394A07EC35D8@exchback.GRUPOINTERCOM.oficinas>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



First off: why do you need the normalized scores in your equation?  for
the purposes of comparing the calculated values in order to sort them, it
shouldn't matter if they are normalized or not.

Second: I strongly suggest you take a look at FunctionQuery ... it was
created for hte expres purpose of letting you define functions that be
applied to indexed field values of each document to affect the score....

http://incubator.apache.org/solr/docs/api/org/apache/solr/search/function/package-summary.html


: Date: Tue, 20 Jun 2006 11:31:42 +0200
: From: Gustavo Comba <gcomba@emagister.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Custom ScoreDocComparator and normalized Scores
:
: Hi,
:
:     I'm trying to sort the search results by a "combination" of the
: "lucene score" and the value of a document field. The "combination" is
: something like that:
:
:     scoreWeight * i.score + fieldWeight * getFieldValue(i.doc)
:
:     I expect results between 0 and scoreWeight + fieldWeight
:
:     Until version 1.9 this use to works OK, but now Lucene doesn't
: normalize the documents scores before calling
: ScoreDocComparator#compare(ScoreDoc i, ScoreDoc j). I know this is
: necessary when combining several indexes, but it's not our case (we have
: only one index).
:
:     I'm diggin into Lucene's source code to find a way to normalize
: values before sorting the results. The solution I found requires a lot
: of "custom" code, and doing 2 passes over the results, one to calculate
: alll the document's scores, and then a sort using a comparator "who
: knows" the maximum score value (in order to normalize values on the
: fly), so I think there should be a more efficient and elegant way to do
: this.
:
:     Any ideas? Any help will be appreciated! Thanks in advance,
:
:         Gustavo Comba
:         Emagister.com
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 23:39:38 2006
Return-Path: <java-user-return-21468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43916 invoked from network); 20 Jun 2006 23:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 23:39:38 -0000
Received: (qmail 90658 invoked by uid 500); 20 Jun 2006 23:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89715 invoked by uid 500); 20 Jun 2006 23:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 92707 invoked by uid 99); 20 Jun 2006 16:42:54 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dcliman@keepmedia.com designates 63.82.1.162 as permitted sender)
From: "Dan Climan" <dcliman@keepmedia.com>
To: <java-user@lucene.apache.org>
Subject: Re: Modifying the stored norm type
Date: Tue, 20 Jun 2006 09:42:32 -0700
Organization: KeepMedia, Inc.
Message-ID: <000901c69488$8705df90$9401a8c0@corp.keepmedia.int>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Scanned: by amavisd-new at keepmedia.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>Paul Elschot <paul.elschot@xs4all.nl>=20
>>On Tuesday 20 June 2006 12:02, Marcus Falck wrote:
>> After a lot of debugging and some API doc reading I have come to the
> conclusion that the static encodeNorm method of the Similarity class
> will encode my boost value into a single byte decimal number.
>>=20
>> And I will loose a lot of resolution and will get severe rounding
>> errors.=20
>>=20
>> Since I need the exact float value as boost representation this isn't
>> good enough in my case.

>An exact float value is a bit of an oxymoron.
>How exact do you need it to be?=20

>The range of values that can be encoded by the existing encodeNorm()
>and decodeNorm() is quite big (about 10e-10 to 10e+10 iirc),
>and since there are only 255 possible values in there (excluding 0),
>the rounding errors can be severe indeed.
>However, with a smaller range, the rounding errors would also be =
smaller.

>Are 256 different values enough for your case?

>Regards,
>Paul Elschot

I, too, have found that 256 values were not enough. I tried changing the
encodeNorm function to use a narrower range of values, but the 256 limit
makes it degrade quickly if I get any results outside the expected =
range.
This was true when we tried various algorithms for boosting results =
based on
external factors.=20

FunctionQuery(not currently in core lucene) from the SOLR project may be =
be
an alternative. Can it replace all uses of the norm?

Now that omitNorms is part of the core, the impact of allowing a 2 byte =
(or
even 4 byte norm) is not nearly as severe on memory. Any suggestions for =
how
to create a multi-byte norm as an option, but enable the same code to
reading existing 1 byte norms?

Dan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 20 23:39:47 2006
Return-Path: <java-user-return-21469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44009 invoked from network); 20 Jun 2006 23:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2006 23:39:46 -0000
Received: (qmail 91429 invoked by uid 500); 20 Jun 2006 23:39:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91409 invoked by uid 500); 20 Jun 2006 23:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 68084 invoked by uid 99); 20 Jun 2006 19:42:10 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of stv.bstein@gmail.com designates 64.233.162.194 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=lVXNQctreV7vTxW0tHdyNWvgPQwe15W0uDQeAYlOCnBQ9UWeP3kL19YS2cPK5A/oeNZHLgItT9NEMNhKGiigHavfw4oNDD5m+JfY1N+AXqnFcuBEiqQ6wTfanvYb5GwOOgmFb7FC0IECo6bjwfM+ti9E4ljWwCqugzSot3/nLxU=
Message-ID: <5d9c9ef10606201241j486a2122jdb80ca09d4d551ac@mail.gmail.com>
Date: Tue, 20 Jun 2006 15:41:48 -0400
From: "Benjamin Stein" <ben@shadowtv.com>
Sender: stv.bstein@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene as syslog storage
In-Reply-To: <359a92830606181209r7b73be1craf0de4f2963d077d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e740n6$ebk$1@sea.gmane.org>
	 <fb9748c90606181010j6c65b5caw35f05bd0f1d68a9e@mail.gmail.com>
	 <e7426b$hvi$1@sea.gmane.org>
	 <359a92830606181209r7b73be1craf0de4f2963d077d@mail.gmail.com>
X-Google-Sender-Auth: 6b9a77d1ce71f525
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I've personally indexed over 1,000,000 documents and Lucene doesn't even
> breath hard.
>

We are in the hundreds of millions and growing, and Lucene does tend
to sweat a little bit, although it can certainly handle it.

You're going to have to understand a bit of the internals of Lucene a
bit more.  For example, we've had some serious bottlenecks when it
comes to sorting.  Comments like "sorting with strings takes more
memory" really compounds when you have 4 million search results to
sort!

You'll definitely want to use multisearchers and partition your
indexes *intelligently* according to your business logic.  You might
even run into a scenario where you need multiple copies of your index,
each partitioned in a different way depending on the use case.

Finally, be prepared for indexing to take a looong time.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 01:10:43 2006
Return-Path: <java-user-return-21470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66010 invoked from network); 21 Jun 2006 01:10:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 01:10:43 -0000
Received: (qmail 83436 invoked by uid 500); 21 Jun 2006 01:10:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83405 invoked by uid 500); 21 Jun 2006 01:10:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83391 invoked by uid 99); 21 Jun 2006 01:10:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 18:10:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.202] (HELO smtp103.sbc.mail.mud.yahoo.com) (68.142.198.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 18:10:35 -0700
Received: (qmail 40807 invoked from network); 21 Jun 2006 01:10:10 -0000
Received: from unknown (HELO sys2) (shelece@sbcglobal.net@69.107.127.159 with login)
  by smtp103.sbc.mail.mud.yahoo.com with SMTP; 21 Jun 2006 01:10:10 -0000
Reply-To: <bedouglas@earthlink.net>
From: "bruce" <bedouglas@earthlink.net>
To: <java-user@lucene.apache.org>
Subject: use of lucene app..
Date: Tue, 20 Jun 2006 18:13:38 -0700
Message-ID: <0a6001c694cf$eebef170$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 9.0, Build 9.0.2910.0
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi..

is there a way to set lucene so that it only parses/crawls through a given
portion of a website...

i have a college site. i'm looking at simply extracting all the information
for a given section of the site, ie the registrar section... if i can
determine that i want all the pages underneath a given url, can lucene be
used as a possible solution...

also, when lucene returns data, can it be slammed/put into a large file/db
structure so i can extract the requisite information from it.

i'm wondering if i already more or less know the DOM structure of the
information i'm looking for, i could simply crawl the given section of the
college site, if i could figure out a way to limit the amount of information
that's returned.. i could then do a regex kind of search across the returned
pages...

my overall goal is to extract certain pieces of information from the section
of the college site that i crawl...

btw, how does lucene/nutch compare to heritrix?

thanks...

-bruce



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 02:07:33 2006
Return-Path: <java-user-return-21471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97985 invoked from network); 21 Jun 2006 02:07:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 02:07:32 -0000
Received: (qmail 43146 invoked by uid 500); 21 Jun 2006 02:07:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42205 invoked by uid 500); 21 Jun 2006 02:07:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42194 invoked by uid 99); 21 Jun 2006 02:07:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 19:07:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of richmondmike@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 19:07:25 -0700
Received: by ug-out-1314.google.com with SMTP id u2so3143228uge
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 19:07:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Thzr4QVg1RBaEK8Mg+F9Mk5BSRZ9rvZ4/6QWPdhlGsit+1UgGuKVxldxao0BmuheghUPQLcKclHx0fugsRKqkxcVhmQZLjykog0/PfuTcJ7pjzeuMjlY6MOM955gYgfh352lu6HSe2iS9voBYab5n98eWKD6dPPKTuINDI+Y8tA=
Received: by 10.66.252.4 with SMTP id z4mr7197697ugh;
        Tue, 20 Jun 2006 19:07:04 -0700 (PDT)
Received: by 10.66.223.19 with HTTP; Tue, 20 Jun 2006 19:07:04 -0700 (PDT)
Message-ID: <931ca11b0606201907t5f6e45fbnee8767d863917dfa@mail.gmail.com>
Date: Tue, 20 Jun 2006 22:07:04 -0400
From: "Mike Richmond" <richmondmike@gmail.com>
To: java-user@lucene.apache.org, bedouglas@earthlink.net
Subject: Re: use of lucene app..
In-Reply-To: <0a6001c694cf$eebef170$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0a6001c694cf$eebef170$0301a8c0@Mesa.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Bruce,

> is there a way to set lucene so that it only parses/crawls through a given
> portion of a website...

Lucene does not crawl anything on its own.  It is simply a search
engine library.  All indexing and crawling must be done by an
application that you create.


> also, when lucene returns data, can it be slammed/put into a large file/db
> structure so i can extract the requisite information from it.

I know that it is possible to setup lucene to store its data in a SQL database

> btw, how does lucene/nutch compare to heritrix?

I'm not sure, I have never used heritrix.

Hope some of this was helpful.


--Mike




On 6/20/06, bruce <bedouglas@earthlink.net> wrote:
> hi..
>
> is there a way to set lucene so that it only parses/crawls through a given
> portion of a website...
>
> i have a college site. i'm looking at simply extracting all the information
> for a given section of the site, ie the registrar section... if i can
> determine that i want all the pages underneath a given url, can lucene be
> used as a possible solution...
>
> also, when lucene returns data, can it be slammed/put into a large file/db
> structure so i can extract the requisite information from it.
>
> i'm wondering if i already more or less know the DOM structure of the
> information i'm looking for, i could simply crawl the given section of the
> college site, if i could figure out a way to limit the amount of information
> that's returned.. i could then do a regex kind of search across the returned
> pages...
>
> my overall goal is to extract certain pieces of information from the section
> of the college site that i crawl...
>
> btw, how does lucene/nutch compare to heritrix?
>
> thanks...
>
> -bruce
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 04:50:19 2006
Return-Path: <java-user-return-21472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31028 invoked from network); 21 Jun 2006 04:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 04:50:19 -0000
Received: (qmail 61661 invoked by uid 500); 21 Jun 2006 04:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61620 invoked by uid 500); 21 Jun 2006 04:50:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61609 invoked by uid 99); 21 Jun 2006 04:50:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 21:50:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 21:50:12 -0700
Received: by wr-out-0506.google.com with SMTP id 50so66117wri
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 21:49:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cgBiMIAUO/rON6LsRpoYWzJgx0XJROJGIEtdAHNPr4TCYgRBKjletmYlUJa3DzQKcQH6cQKt/VZTwk0uv7Br7KSxC7VrPKb7uSoh6nJB+3dUI1MlVG26shceogxm6Ld4hIcG3Nbu/G3jEWCYvVE23fcwC6xjYfiv03rod5VxfpA=
Received: by 10.64.195.15 with SMTP id s15mr215549qbf;
        Tue, 20 Jun 2006 21:49:52 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Tue, 20 Jun 2006 21:49:52 -0700 (PDT)
Message-ID: <a36516400606202149j66371baha7b8e6100f2d82ff@mail.gmail.com>
Date: Wed, 21 Jun 2006 10:19:52 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: addIndexes() is taking infinite time ...
In-Reply-To: <20060620154249.20756.qmail@web50303.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101626_4590885.1150865392075"
References: <a36516400606200507h2c381597j6d847137a4c3757@mail.gmail.com>
	 <20060620154249.20756.qmail@web50303.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_101626_4590885.1150865392075
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi,
thanks for your reply.
Now i restarted my application with maxBufferedDocs=10,000.
And i am sorry to say that i was adding those indexes one by one. :-)

Anyway Can you please explain me the addIndex ? I want to know what exactly
happens while adding these..

With Regards,


On 6/20/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> If you can tell how many indices you've merged, you must be mering them
> one at a time, and the pre and post merge optimize() calls are costing you.
>
> Also, that maxBufferedDocs looks pretty low.  Unless you are working with
> very large documents and small heap, you should be able to bump that up much
> higher.  I've used 10,000+ in some cases.
>
> Otis
>
> ----- Original Message ----
> From: heritrix.lucene <heritrix.lucene@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 20, 2006 8:07:19 AM
> Subject: addIndexes() is taking infinite time ...
>
> Hi all,
> I had five different indexes:
> 1 having 15469008 documents
> 2 having 7734504 documents
> 3 having 7734504 documents
> 4 having 7734504 documents
> 5 having 7734504 documents
> Which sums to 46407024.
> The constant values are
> maxMergeFactor = 1000
> maxBufferedDocs = 1000
>
> I wrote a simple program which uses the addIndex method for adding
> indexes.
> It has been more then 32 hours adding the indexes. My logs say upto now it
> has finished only first two indexes. It is adding the third one.
> I want to know what exactly happens while merging the indexes?? Why this
> time grows exponentially ????
> Can anybody explain this in brief.
>
> Thanks in advance..
> With Regards
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_101626_4590885.1150865392075--

From java-user-return-21473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 05:40:09 2006
Return-Path: <java-user-return-21473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46785 invoked from network); 21 Jun 2006 05:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 05:40:08 -0000
Received: (qmail 13259 invoked by uid 500); 21 Jun 2006 05:40:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13233 invoked by uid 500); 21 Jun 2006 05:40:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13222 invoked by uid 99); 21 Jun 2006 05:40:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 22:40:02 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 22:40:02 -0700
Received: by nf-out-0910.google.com with SMTP id m18so41290nfc
        for <java-user@lucene.apache.org>; Tue, 20 Jun 2006 22:39:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QRySPTjSFM/+HU7PtozAcOsadU4JwVPgZtDWiGQUqLsI1vZYWtjT+Gnk5mNXoZ9rleNFZA2JRawQfnJJWy16nkiG119ktJ+tIkbRoJrHKLmhXfq4Ns8Z+mvPed4QQH2ayMqk1WQhJUv9gc9CdsiNVssZ4Qjlii10FA9DRhSfEpg=
Received: by 10.48.235.7 with SMTP id i7mr193647nfh;
        Tue, 20 Jun 2006 22:39:41 -0700 (PDT)
Received: by 10.49.39.19 with HTTP; Tue, 20 Jun 2006 22:39:41 -0700 (PDT)
Message-ID: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
Date: Tue, 20 Jun 2006 22:39:41 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: HTML text extraction
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_91436_30993969.1150868381147"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_91436_30993969.1150868381147
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can someone please suggest a HTML text extraction library? In the Lucene
book, it recommends Tidy. Seems jtidy is not really being maintained.

Otis, what do you guys use at Simpy?

Thanks

-john

------=_Part_91436_30993969.1150868381147--

From java-user-return-21474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 05:46:23 2006
Return-Path: <java-user-return-21474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49305 invoked from network); 21 Jun 2006 05:46:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 05:46:23 -0000
Received: (qmail 20088 invoked by uid 500); 21 Jun 2006 05:46:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20050 invoked by uid 500); 21 Jun 2006 05:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20038 invoked by uid 99); 21 Jun 2006 05:46:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 22:46:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 22:46:15 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 65120B7638
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 15:45:38 +1000 (EST)
Message-ID: <4498DE89.1080901@nuix.com.au>
Date: Wed, 21 Jun 2006 15:52:09 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: HTML text extraction
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
In-Reply-To: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Wang wrote:
> Can someone please suggest a HTML text extraction library? In the Lucene
> book, it recommends Tidy. Seems jtidy is not really being maintained.

We use this library to do our HTML parsing work:

http://htmlparser.sourceforge.net/

It's fairly resilient to bad code, including things like false 
assumptions about nesting HTML inside script.  (e.g. 
document.write("</script>");

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 05:55:17 2006
Return-Path: <java-user-return-21475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54378 invoked from network); 21 Jun 2006 05:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 05:55:16 -0000
Received: (qmail 28547 invoked by uid 500); 21 Jun 2006 05:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28508 invoked by uid 500); 21 Jun 2006 05:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28497 invoked by uid 99); 21 Jun 2006 05:55:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 22:55:11 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.244] (HELO web50409.mail.yahoo.com) (206.190.38.244)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 22:55:10 -0700
Received: (qmail 87798 invoked by uid 60001); 21 Jun 2006 05:54:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=pk+bKBD4UWsoAUmoZrirJneQK4I9vkizbuSoRcLNigpmmwizo0q7jt8lP+oTUknyfp8bI4gqCu0YYmUKXahoflrKaZk6LJDFMKgzgjDlitg8X2Qek0QlfgdawB8eX4ldPR9nsgeR3M4yUJ+Rj9yV+/WEB3Afpbqh47x+6SeZkDM=  ;
Message-ID: <20060621055449.87796.qmail@web50409.mail.yahoo.com>
Received: from [82.99.196.156] by web50409.mail.yahoo.com via HTTP; Tue, 20 Jun 2006 22:54:49 PDT
Date: Tue, 20 Jun 2006 22:54:49 -0700 (PDT)
From: Shaghayegh Sahebie <shaghayegh_sahebie@yahoo.com>
Subject: Re: Search within multiple different subfolders
To: java-user@lucene.apache.org
In-Reply-To: <359a92830606200551s15c249ccq31f269486deb7578@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-970609452-1150869289=:86851"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-970609452-1150869289=:86851
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thank you Erick,
You are right! Lucene searches the Index not directories, but in this way we search the whole index and just add a new constraint(e.g. files path) to match proper results. Is there a way to not to search the whole index and just some branches of an index without using constraints?

regards
--Shaghayegh

		
---------------------------------
Ring'em or ping'em. Make  PC-to-phone calls as low as 1¢/min with Yahoo! Messenger with Voice.
--0-970609452-1150869289=:86851--

From java-user-return-21476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 06:37:03 2006
Return-Path: <java-user-return-21476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67625 invoked from network); 21 Jun 2006 06:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 06:37:02 -0000
Received: (qmail 68010 invoked by uid 500); 21 Jun 2006 06:36:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67985 invoked by uid 500); 21 Jun 2006 06:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67974 invoked by uid 99); 21 Jun 2006 06:36:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jun 2006 23:36:56 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jun 2006 23:36:55 -0700
Received: (qmail 57700 invoked by uid 60001); 21 Jun 2006 06:36:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=gRVEjkx3Q8grhp0ADh4yuCw9cc/d4+/uV5yNXq75AKesns2ITODIqZVw4xlrJbelXIHLNFDYd0Ganb731s6OJV7HcDe5qFu3qfxmRvn5vnKVsXlsVsVTXiOyrmgpPoprMES882ikL/oS1vq/Pg/Fu8k+FYxB8giyVYFdXhF/Lg4=  ;
Message-ID: <20060621063634.57698.qmail@web50305.mail.yahoo.com>
Received: from [72.229.167.99] by web50305.mail.yahoo.com via HTTP; Tue, 20 Jun 2006 23:36:34 PDT
Date: Tue, 20 Jun 2006 23:36:34 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: HTML text extraction
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John,

I also wrote about using NekoHTML, I think.  I prefer that to JTidy.  That also tells you what Simpy.com uses.

Otis

----- Original Message ----
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, June 21, 2006 1:39:41 AM
Subject: HTML text extraction

Can someone please suggest a HTML text extraction library? In the Lucene
book, it recommends Tidy. Seems jtidy is not really being maintained.

Otis, what do you guys use at Simpy?

Thanks

-john




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 07:04:41 2006
Return-Path: <java-user-return-21477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77781 invoked from network); 21 Jun 2006 07:04:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 07:04:40 -0000
Received: (qmail 11820 invoked by uid 500); 21 Jun 2006 07:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11790 invoked by uid 500); 21 Jun 2006 07:04:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11771 invoked by uid 99); 21 Jun 2006 07:04:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 00:04:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 00:04:32 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 7ED53187B9; Wed, 21 Jun 2006 07:04:09 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 39FF9187B7
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 07:04:06 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: HTML text extraction
Date: Wed, 21 Jun 2006 08:04:13 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	boundary="----=_NextPart_000_0010_01C69509.47A7EE70";
	micalg=SHA1
Thread-Index: AcaU/SEfLs0iiQaWRWmU0DQJ3edBKQAAyzuw
In-Reply-To: <20060621063634.57698.qmail@web50305.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060621070406.39FF9187B7@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0010_01C69509.47A7EE70
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

I found that CyberNeko left style and script in the text and JTidy produced
better output, but both of them use DOM and were therefore subject to
OutOfMemory errors (JTidy being worse than CyberNeko). I've since then moved
over to TagSoup, which I needed to customise to strip style script (a simple
tweak), but "kept on trucking" with any size document. 

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: 21 June 2006 07:37
To: java-user@lucene.apache.org
Subject: Re: HTML text extraction

John,

I also wrote about using NekoHTML, I think.  I prefer that to JTidy.  That
also tells you what Simpy.com uses.

Otis

----- Original Message ----
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, June 21, 2006 1:39:41 AM
Subject: HTML text extraction

Can someone please suggest a HTML text extraction library? In the Lucene
book, it recommends Tidy. Seems jtidy is not really being maintained.

Otis, what do you guys use at Simpy?

Thanks

-john




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0010_01C69509.47A7EE70
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDYyMTA3
MDQxMVowIwYJKoZIhvcNAQkEMRYEFBqUmMMUq5xZJLUvVO72l5WMU7QGMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAKPVe6jrp6WDYztfjlrzpoHC1ihZjZHiRbOW
pvark5wplg79GHudsS8zbXVdYi2uktmfHhEDZFAF6wQzV0mFJ1x7q/U7vFmMgxVQkBlGQMK6Uisu
kZoA1IG/a9nXZvOIcb9OPiKBI7p0PFkSVZP3/DmfC+D6llL4GgLLz7NaZXEg8GSS3AKS8jfotBpm
ekl4cFgRp6ba2zV9xhggLMgtYHwRs/P7N76Agm5RN4Xe0DUfxqRIWaP3rA3J6O2Lct0o6d3uG6Z9
saawyWi9Dtc4QuQqjecwmOsB9v0sTVT/uMCorygo0k2FtpL3QGbhPkqzdHS/NaMm42Xsh83NAMYu
PwEAAAAAAAA=

------=_NextPart_000_0010_01C69509.47A7EE70--


From java-user-return-21478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 07:14:51 2006
Return-Path: <java-user-return-21478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81326 invoked from network); 21 Jun 2006 07:14:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 07:14:51 -0000
Received: (qmail 32361 invoked by uid 500); 21 Jun 2006 07:14:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32169 invoked by uid 500); 21 Jun 2006 07:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32158 invoked by uid 99); 21 Jun 2006 07:14:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 00:14:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [161.74.14.112] (HELO isls-mx10.wmin.ac.uk) (161.74.14.112)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 00:14:43 -0700
Received: from groucho.wmin.ac.uk ([161.74.160.74])
	by isls-mx10.wmin.ac.uk with esmtp (Exim 4.60)
	(envelope-from <courtes@wmin.ac.uk>)
	id 1Fswus-0003MP-56
	for java-user@lucene.apache.org; Wed, 21 Jun 2006 08:14:22 +0100
Received: from [127.0.0.1] (user-86-116-245-83.euro1net.com [83.245.116.86])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by groucho.wmin.ac.uk (Postfix) with ESMTP id E0469A670C
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 08:14:21 +0100 (BST)
Message-ID: <4498F1C8.4030006@wmin.ac.uk>
Date: Wed, 21 Jun 2006 08:14:16 +0100
From: Simon Courtenage <courtes@westminster.ac.uk>
Organization: University of Westminster
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: HTML text extraction
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com> <4498DE89.1080901@nuix.com.au>
In-Reply-To: <4498DE89.1080901@nuix.com.au>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I also use htmlparser, which is rather good.  I've had to customize it, 
though, to parse strings containing
html source rather than accept urls of resources to fetch etc.  Also it 
crashes on meta tags that don't have
name attributes (something I discovered only a couple of days ago).

Simon

Daniel Noll wrote:
> John Wang wrote:
>> Can someone please suggest a HTML text extraction library? In the Lucene
>> book, it recommends Tidy. Seems jtidy is not really being maintained.
>
> We use this library to do our HTML parsing work:
>
> http://htmlparser.sourceforge.net/
>
> It's fairly resilient to bad code, including things like false 
> assumptions about nesting HTML inside script.  (e.g. 
> document.write("</script>");
>
> Daniel
>


-- 
Dr. Simon Courtenage
Software Systems Engineering Research Group
Dept. of Software Engineering, Cavendish School of Computer Science
University of Westminster, London, UK
Email: courtes@wmin.ac.uk   Web: http://users.cscs.wmin.ac.uk/~courtes | http://www.sse.wmin.ac.uk


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 07:38:02 2006
Return-Path: <java-user-return-21479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93155 invoked from network); 21 Jun 2006 07:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 07:38:02 -0000
Received: (qmail 70342 invoked by uid 500); 21 Jun 2006 07:37:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70317 invoked by uid 500); 21 Jun 2006 07:37:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70306 invoked by uid 99); 21 Jun 2006 07:37:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 00:37:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 00:37:54 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BC13D5B783; Wed, 21 Jun 2006 00:37:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B40B57F403
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 00:37:27 -0700 (PDT)
Date: Wed, 21 Jun 2006 00:37:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: HTML text extraction
In-Reply-To: <4498F1C8.4030006@wmin.ac.uk>
Message-ID: <Pine.LNX.4.58.0606210028420.10002@hal.rescomp.berkeley.edu>
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
 <4498DE89.1080901@nuix.com.au> <4498F1C8.4030006@wmin.ac.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


if you just want something to extract the text from HTML, without trying
to extract structure (ie: you don't care about title vs h1 vs bold vs meta
keywords) then the HTMLStripReader (or
HTMLStripWhitespaceTokenizerFactory) Yonik wrote for Solr might be
usefull.  It wasn't intended to deal with full HTML documents (hence it
doesn't have any mechanism for infering strucutre) but it was intended to
do the best job possible when deling with dirty data that might be plain
text, or it might be a chunk of HTML, or it might be mostly plain text
with a little bit of html sprinkled in.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 08:25:16 2006
Return-Path: <java-user-return-21480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13393 invoked from network); 21 Jun 2006 08:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 08:25:16 -0000
Received: (qmail 33199 invoked by uid 500); 21 Jun 2006 08:25:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32897 invoked by uid 500); 21 Jun 2006 08:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32886 invoked by uid 99); 21 Jun 2006 08:25:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 01:25:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 01:25:08 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3B0D65B780; Wed, 21 Jun 2006 01:24:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2D5317F403
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 01:24:46 -0700 (PDT)
Date: Wed, 21 Jun 2006 01:24:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: faceting and categorizing on color?
In-Reply-To: <20060620173245.98029.qmail@web34107.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0606210044190.10002@hal.rescomp.berkeley.edu>
References: <20060620173245.98029.qmail@web34107.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I thought that having: F00000 FF0000 FFFFFF FFFF00...
: in one field and then searching for FFFFFF in it would
: match all documents that contain that "word" so I
	...
: the counts were equal. I guess I am still not clear on
: what the differences/advantages/disadvantages are
: between the above an document and one that like this:
	...
: color in its own field? So perhaps a more general
: question is when is it better to collapse a bunch of
: words into a single field vs. spread them out over
: many fields, all of which have the same field name?

My point was that (depending on what exactly you were trying to express)
when you try to represent a document's structure in email like that both
examples have the exact same structure in the index.  For any given field
name, there is only one Field in the index, and it has a stream of values
regardless of how you constructed your document object -- technically
there isn't even really a "field" as much as there is an ordered list of
Terms.  Specificly, this...

  IndexWriter w = new IndexWriter(d, new WhitespaceAnalyzer(), true);
  Document doc = new Document();
  doc.add(new Field("color", "red blue green", Store.NO, Index.TOKENIZED));
  w.addDocument(doc);

...is going to produce and index with the exact same terms maped to that
document as this...

  IndexWriter w = new IndexWriter(d, new WhitespaceAnalyzer(), true);
  Document doc = new Document();
  doc.add(new Field("color", "red", Store.NO, Index.TOKENIZED));
  doc.add(new Field("color", "blue", Store.NO, Index.TOKENIZED));
  doc.add(new Field("color", "green", Store.NO, Index.TOKENIZED));
  w.addDocument(doc);

...the only differnece that might pop up, is if you configure your
analyzer to have a positionIncrimentGap greater then 0, in which case
there will be a bigger "gap" between the red and blue and green in the
second case then in the fist (which will affect any sloppy searches that
you might do)

LIA has a lot of gret info on exactly how thisworks, and can relaly help
you "think" in terms of Terms.

: That's a great idea and seems way more straightforward
: than the RGB/HSV etc. distance calculation algorithms
: I've been reading about :o) I'll have to run some
: tests to see how accurate that reduction appears to
: people.

that's just an easy one if you are already representing your colors in RGB
hex codes -- the bottom line is any method you have for simplifying your
pallet will make it easier to do facet counts (because you ar reducing the
number of facets)

: Huh, perhaps I don't understand the HitCollector
: fully. Are you saying that if I have an index with 100
: documents, each of which have a color field (let's say
: 25 of the documents have FFFFFF in the color field)
: and I do a search for FFFFFF...using a HitCollector
: I'm iterating over all 100 documents while extracting
: values whereas with the regular Hits based search I
: would only be iterating over 25?

First off, forget the Hits class exists -- it has no place in a discussion
of facet counts where you need to look at every document that matches a
given query.

Second: my point is that when you are starting with an arbitrary query,
and then you wnat to provide counts for a bunch of facet values (ie:
colors) you have no idea which facet values are the "best" -- you have no
way of knowing that you should start with FFFFFF, you have to try them
all...

Conceptually facets are about set intersections and the cardinality of
those intersections.  You have a main result set of documents which match
your user's query, and you have many hypothetical sets of documents that
each represent all docs that contain some single color that deifines that
set.  You want to intersect each of those sets with your main result set,
and find out which colors product the greatest intersection cardinality.

With the BitSet approach, you can directly implimenting this comceptual
model -- making real sets out of your hypothetical sets.  But if that's
not feasible from a memory usage perspective, then you can traverse the
two dimensions of the problem space (colors and documents) in either
order:
 1) you can use the FieldCache (or some other data structure you build
from TermEnums) to have fast access to the list of colors in each doc, and
then in your HitCollector as you collect each docId matching your primary
query, incriment a counter for the corrisponding colors.
 2) you can start with a HitCollector that just records all of the docIds
that match your primary query -- a BitSet is convinient for this -- and
then use a TermEnum with a TermDocs to iterate over every color in your
index, and count up how many of the documents those colors map to are in
your BitSet

(NOTE: using a FieldCache for this is non-trivial since FieldCache only
works if each doc has at most one value, i wasn't really thinking about
the specifics of your color example when i mentioned it before -- but the
concept is still the same: an array that allows fast lookup by docId, you
could make your own array containing the arrays of values just as easily
as the FieldCache)





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 10:17:05 2006
Return-Path: <java-user-return-21481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56880 invoked from network); 21 Jun 2006 10:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 10:13:50 -0000
Received: (qmail 48568 invoked by uid 500); 21 Jun 2006 10:13:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48530 invoked by uid 500); 21 Jun 2006 10:13:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48517 invoked by uid 99); 21 Jun 2006 10:13:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 03:13:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 03:13:26 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout1-sn2.hy.skanova.net (7.2.072.1)
        id 44980A64000335FC for java-user@lucene.apache.org; Wed, 21 Jun 2006 12:13:05 +0200
Subject: Re: Modifying the stored norm type
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <200606201801.01980.paul.elschot@xs4all.nl>
References:
	 <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
	 <200606201801.01980.paul.elschot@xs4all.nl>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Wed, 21 Jun 2006 12:13:00 +0200
Message-Id: <1150884781.4882.113.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-06-20 at 18:01 +0200, Paul Elschot wrote:
> On Tuesday 20 June 2006 12:02, Marcus Falck wrote:

> encodeNorm method of the Similarity class will encode my boost value
> into a single byte decimal number. And I will loose a lot of
> resolution and will get severe rounding errors.

> Are 256 different values enough for your case?

Marcus is trying to use the norms to enforce results in chronological
order when matching a TB-sized corpus. He can't get any speed by sorting
on a date field.

Here is an idea:

Never delete documents. Use unsafe document number as system clock. Make
sure TermDocs always return references in reversed chronological order
and write a HitCollector that does not re-order.

That should work, right? 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 10:45:54 2006
Return-Path: <java-user-return-21482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64929 invoked from network); 21 Jun 2006 10:42:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 10:42:53 -0000
Received: (qmail 824 invoked by uid 500); 21 Jun 2006 10:42:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 483 invoked by uid 500); 21 Jun 2006 10:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 472 invoked by uid 99); 21 Jun 2006 10:42:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 03:42:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.116.240.69] (HELO exchfront.GRUPOINTERCOM.oficinas) (194.116.240.69)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 03:42:14 -0700
Received: from exchback.GRUPOINTERCOM.oficinas ([10.12.50.50]) by exchfront.GRUPOINTERCOM.oficinas with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 21 Jun 2006 12:41:50 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Custom ScoreDocComparator and normalized Scores
Date: Wed, 21 Jun 2006 12:41:46 +0200
Message-ID: <2829114EEAA49E4899880229DBC4394A07EC3B28@exchback.GRUPOINTERCOM.oficinas>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Custom ScoreDocComparator and normalized Scores
Thread-Index: AcaUo3rGGhoalzyURdmdogUR8vL99gAecUag
From: "Gustavo Comba" <gcomba@emagister.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jun 2006 10:41:50.0004 (UTC) FILETIME=[4D4CC740:01C6951F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Chris, I didn't know the "solr" package, it is not in the release
distribution, isn't? I'm going to read about it to see if it matchs our
needs.

The need for normalization is derived from converting a list of values
in "polynomial" like ranking function. We define our "ranking" in a way
like that:

Our Score =3D x . LuceneScore + y . SomeField + z . SomeOtherField + w .
YetAnotherField

Being x, y, z and w our coeffiecients or "scaling factors" in our
ranking function.

In order to have some sense, all the other values (LuceneScore,
SomeField, SomeOtherField  and YetAnotherField) must be normalized,
being positive (because we want to) values linear scaled to fit some
fixed segment, let say, 0 to 1.

To achive pre-ordering normalization I'm using an "all collector" like:

public class AllCollector extends HitCollector {

	private ArrayList scoreDocs;
=09
	public AllCollector() {
		scoreDocs =3D new ArrayList(10000);
	}

	public void collect(int doc, float score) {
		if (score > 0.0f) {
			maxScore =3D Math.max(maxScore, score);
			scoreDocs.add(new ScoreDoc(doc, score));
		    	totalHits++;
		}
	}
}

And to get the "best-n" we rewrite topDocs() to:=20

	public TopDocs topDocs(IndexReader reader, Sort sort, int
numHits) throws IOException {
	    TopFieldDocCollector collector =3D new
TopFieldDocCollector(reader, sort, numHits);
	    if (maxScore > 0.0f) {
	        for(Iterator it =3D scoreDocs.iterator();it.hasNext();) {
	            ScoreDoc scoreDoc =3D (ScoreDoc) it.next();
	            scoreDoc.score /=3D maxScore;
	            collector.collect(scoreDoc.doc, scoreDoc.score);
	        }
	    }
		collector.totalHits =3D totalHits;
		return collector.topDocs();
	}

This workaround has some evident "cons", like:

	* It makes a big list with all the results
	* It duplicates the work, first a List, then a PriorityQue
	* Could generate problems with "multi indexes".

But it works for us by now. I'm going to look the FunctionQuery to see
if it can do the job.

Thanks a Lot for your help!

	Gustavo


-----Mensaje original-----
De: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Enviado el: martes, 20 de junio de 2006 21:55
Para: java-user@lucene.apache.org
Asunto: Re: Custom ScoreDocComparator and normalized Scores



First off: why do you need the normalized scores in your equation?  for
the purposes of comparing the calculated values in order to sort them,
it shouldn't matter if they are normalized or not.

Second: I strongly suggest you take a look at FunctionQuery ... it was
created for hte expres purpose of letting you define functions that be
applied to indexed field values of each document to affect the score....

http://incubator.apache.org/solr/docs/api/org/apache/solr/search/functio
n/package-summary.html


: Date: Tue, 20 Jun 2006 11:31:42 +0200
: From: Gustavo Comba <gcomba@emagister.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Custom ScoreDocComparator and normalized Scores
:
: Hi,
:
:     I'm trying to sort the search results by a "combination" of the
: "lucene score" and the value of a document field. The "combination" is
: something like that:
:
:     scoreWeight * i.score + fieldWeight * getFieldValue(i.doc)
:
:     I expect results between 0 and scoreWeight + fieldWeight
:
:     Until version 1.9 this use to works OK, but now Lucene doesn't
: normalize the documents scores before calling
: ScoreDocComparator#compare(ScoreDoc i, ScoreDoc j). I know this is
: necessary when combining several indexes, but it's not our case (we
have
: only one index).
:
:     I'm diggin into Lucene's source code to find a way to normalize
: values before sorting the results. The solution I found requires a lot
: of "custom" code, and doing 2 passes over the results, one to
calculate
: alll the document's scores, and then a sort using a comparator "who
: knows" the maximum score value (in order to normalize values on the
: fly), so I think there should be a more efficient and elegant way to
do
: this.
:
:     Any ideas? Any help will be appreciated! Thanks in advance,
:
:         Gustavo Comba
:         Emagister.com
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 12:08:16 2006
Return-Path: <java-user-return-21483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98076 invoked from network); 21 Jun 2006 12:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 12:07:41 -0000
Received: (qmail 42491 invoked by uid 500); 21 Jun 2006 12:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42341 invoked by uid 500); 21 Jun 2006 12:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42329 invoked by uid 99); 21 Jun 2006 12:07:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 05:07:22 -0700
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=RCVD_IN_SBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of askxuefeng@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 05:07:22 -0700
Received: by py-out-1112.google.com with SMTP id d80so1771162pyd
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 05:07:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:in-reply-to:thread-index;
        b=bCtSjsn6ydn8zRtAC6AzDned42NFUmQpAUT6gzDbNJQl4bd1P+rxmiVuJzl58wYfCRZEmwuPYis2fW5/i2oheghQ2GJ7UKBq/QfpKvuh2cREOw2zpoC0uQjFLzPEOfmD2AFNmUd+ssllQb3zY08AjRk42uDlN+1JMqLq7aXtqcA=
Received: by 10.35.18.18 with SMTP id v18mr10934297pyi;
        Wed, 21 Jun 2006 05:07:01 -0700 (PDT)
Received: from lymobile ( [221.220.191.61])
        by mx.gmail.com with ESMTP id f19sm388802pyf.2006.06.21.05.06.59;
        Wed, 21 Jun 2006 05:07:00 -0700 (PDT)
From: "Liao Xuefeng" <askxuefeng@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: HTML text extraction
Date: Wed, 21 Jun 2006 20:06:39 +0800
Message-ID: <000f01c6952b$2f2564f0$6400a8c0@lymobile>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
Thread-Index: AcaU9ShCyMxN0/rlRCGRMFHyr9nddQANa96Q
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi,
i wrote my own html parser to do html2text and it works well. i can send you
my code if it matches your require.

-----Original Message-----
From: John Wang [mailto:john.wang@gmail.com] 
Sent: Wednesday, June 21, 2006 1:40 PM
To: java-user@lucene.apache.org
Subject: HTML text extraction

Can someone please suggest a HTML text extraction library? In the Lucene
book, it recommends Tidy. Seems jtidy is not really being maintained.

Otis, what do you guys use at Simpy?

Thanks

-john


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 13:17:52 2006
Return-Path: <java-user-return-21484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28983 invoked from network); 21 Jun 2006 13:17:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 13:17:51 -0000
Received: (qmail 99138 invoked by uid 500); 21 Jun 2006 13:17:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98831 invoked by uid 500); 21 Jun 2006 13:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98816 invoked by uid 99); 21 Jun 2006 13:17:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 06:17:44 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 06:17:42 -0700
Received: by nz-out-0102.google.com with SMTP id n29so126632nzf
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 06:17:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kgQ41ga/JSY/I4/tPCVc1ZKbiiXKcRmipClGM/g0E2gfUB8p+GJ8O9NzlvKePPGBN29D0h5aaz952FQ+wMKaqbu3cDXVQNhSiClUmEEu3vjY4pR713MdsYGIEvHK/0VNQe1nDTk8r8YdqNWn6aYjbyx4mI82lmpo1FETmYyqXME=
Received: by 10.36.222.11 with SMTP id u11mr468952nzg;
        Wed, 21 Jun 2006 06:17:21 -0700 (PDT)
Received: by 10.37.20.1 with HTTP; Wed, 21 Jun 2006 06:17:16 -0700 (PDT)
Message-ID: <359a92830606210617n1b6b0be3vcf0a28beb2c79c0f@mail.gmail.com>
Date: Wed, 21 Jun 2006 09:17:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search within multiple different subfolders
In-Reply-To: <20060621055449.87796.qmail@web50409.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_261_5471421.1150895838703"
References: <359a92830606200551s15c249ccq31f269486deb7578@mail.gmail.com>
	 <20060621055449.87796.qmail@web50409.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_261_5471421.1150895838703
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Shagheyegh:

I'm hardly the lucene expert, but I don't think you can search just a
portion of the index. But that's effectively what you're doing if you
restrict the search to "son and.....".

However, depending on your problem space, you could build separate indexes.
To continue the example, you could build 4 indexes, "mother", "father",
"son", "daughter" and only search the relevant ones.

You should still be able to aggregate the results. That is, you could search
over all 4 indexes when you needed to and combine the results into a single
response. Then you could only search a subset of them at other times. I
admit that I haven't yet had to use a MultiSearcher, but that sure looks
like what you want if you adopt this approach <G>...

Note: I'm looking at the 2.0 documentation....

But I also have to ask, why are you trying to "search only a portion of the
index"? If you haven't encountered a bottleneck that's forcing you into this
option (or don't have a *very* high expectation that you will encounter such
a bottleneck), this strikes me as work you shouldn't be doing until there's
a demonstrated need. The eXtreme Programming folks look at it this way "make
it work, make it right, make it fast".

>From Tony Hoare and Donald Knuth... "We should forget about small
efficiencies, say about 97% of the time: premature optimization is the root
of all evil."

Best
Erick

------=_Part_261_5471421.1150895838703--

From java-user-return-21485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 13:44:03 2006
Return-Path: <java-user-return-21485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43019 invoked from network); 21 Jun 2006 13:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 13:41:45 -0000
Received: (qmail 53955 invoked by uid 500); 21 Jun 2006 13:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53927 invoked by uid 500); 21 Jun 2006 13:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53916 invoked by uid 99); 21 Jun 2006 13:40:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 06:40:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 06:40:51 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T7903a85bdb88ad3ee41df8@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 21 Jun 2006 15:40:08 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69538.361A5506"
Subject: BooleanQuery
Date: Wed, 21 Jun 2006 15:40:08 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF3BF@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery
Thread-Index: AcaVODYnUdJrJWncRGWC1/YF80lRyQ==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69538.361A5506
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Why I retrive hits with this query :=20

+doccontent:avian +doctype:AM +docdate:[20050331220000000 TO
20060620220000000]

and not with this one=20

+doccontent:avian influenza +doctype:AM +docdate:[20050331220000000 TO
20060620220000000]

????


------_=_NextPart_001_01C69538.361A5506--

From java-user-return-21486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 13:59:05 2006
Return-Path: <java-user-return-21486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50497 invoked from network); 21 Jun 2006 13:59:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 13:59:05 -0000
Received: (qmail 90028 invoked by uid 500); 21 Jun 2006 13:58:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89783 invoked by uid 500); 21 Jun 2006 13:58:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89756 invoked by uid 99); 21 Jun 2006 13:58:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 06:58:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 06:58:56 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id E5BB9A6640
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 16:58:34 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id C13A2A6642; Wed, 21 Jun 2006 16:58:34 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from nemo.level7.local (nemo.intranet [10.0.0.8])
	by mail.datagroup.ro (Postfix) with ESMTP id 5BE4FA6640
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 16:58:27 +0300 (EEST)
Content-class: urn:content-classes:message
Subject: RE: BooleanQuery
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 21 Jun 2006 16:58:26 +0300
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <7688DA376E992B408BEFBF22A9F7F618387F64@nemo.intranet>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF3BF@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery
Thread-Index: AcaVODYnUdJrJWncRGWC1/YF80lRyQAAluXg
From: "Mile Rosu" <mile.rosu@level7.ro>
To: <java-user@lucene.apache.org>
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 21062006 #189735, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.2 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You should specify the field name for influenza as well.

Like this:

+doccontent:avian +doccontent:influenza +doctype:AM
+docdate:[20050331220000000 TO
20060620220000000]

Mile

-----Original Message-----
From: WATHELET Thomas [mailto:thomas.wathelet@europarl.europa.eu]=20
Sent: Wednesday, June 21, 2006 4:40 PM
To: java-user@lucene.apache.org
Subject: BooleanQuery

Why I retrive hits with this query :=20

+doccontent:avian +doctype:AM +docdate:[20050331220000000 TO
20060620220000000]

and not with this one=20

+doccontent:avian influenza +doctype:AM +docdate:[20050331220000000 TO
20060620220000000]

????


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 14:00:02 2006
Return-Path: <java-user-return-21487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51107 invoked from network); 21 Jun 2006 14:00:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 14:00:02 -0000
Received: (qmail 92642 invoked by uid 500); 21 Jun 2006 13:59:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92615 invoked by uid 500); 21 Jun 2006 13:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92604 invoked by uid 99); 21 Jun 2006 13:59:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 06:59:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.116.240.69] (HELO exchfront.GRUPOINTERCOM.oficinas) (194.116.240.69)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 06:59:54 -0700
Received: from exchback.GRUPOINTERCOM.oficinas ([10.12.50.50]) by exchfront.GRUPOINTERCOM.oficinas with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 21 Jun 2006 15:59:32 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: BooleanQuery
Date: Wed, 21 Jun 2006 15:59:31 +0200
Message-ID: <2829114EEAA49E4899880229DBC4394A07EC3CD6@exchback.GRUPOINTERCOM.oficinas>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery
Thread-Index: AcaVODYnUdJrJWncRGWC1/YF80lRyQAAobiA
From: "Gustavo Comba" <gcomba@emagister.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jun 2006 13:59:32.0424 (UTC) FILETIME=[EBDA6C80:01C6953A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

	I don't know how are you parsing your query, but may be the query you =
are looking for is something like:

 +(doccontent:avian doccontent:influenza) +doctype:AM =
+docdate:[20050331220000000 TO 20060620220000000]

	Regards,

		Gustavo

-----Mensaje original-----
De: WATHELET Thomas [mailto:thomas.wathelet@europarl.europa.eu]=20
Enviado el: mi=E9rcoles, 21 de junio de 2006 15:40
Para: java-user@lucene.apache.org
Asunto: BooleanQuery

Why I retrive hits with this query :=20

+doccontent:avian +doctype:AM +docdate:[20050331220000000 TO
20060620220000000]

and not with this one=20

+doccontent:avian influenza +doctype:AM +docdate:[20050331220000000 TO
20060620220000000]

????


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 14:03:17 2006
Return-Path: <java-user-return-21488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53149 invoked from network); 21 Jun 2006 14:03:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 14:03:16 -0000
Received: (qmail 4192 invoked by uid 500); 21 Jun 2006 14:03:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4145 invoked by uid 500); 21 Jun 2006 14:03:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4130 invoked by uid 99); 21 Jun 2006 14:03:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 07:03:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 07:03:09 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T7903bd153788ad3ee41df8@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 21 Jun 2006 16:02:46 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: BooleanQuery
Date: Wed, 21 Jun 2006 16:02:46 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF3C0@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery
Thread-Index: AcaVODYnUdJrJWncRGWC1/YF80lRyQAAobiAAAAa3yA=
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok thanks a lot.
Before I use TermQuery for the filed doccotent now I use Query object =
with QueryParser.parse and it's work perfectly.=20

-----Original Message-----
From: Gustavo Comba [mailto:gcomba@emagister.com]=20
Sent: 21 June 2006 16:00
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery

Hello,

	I don't know how are you parsing your query, but may be the query you =
are looking for is something like:

 +(doccontent:avian doccontent:influenza) +doctype:AM =
+docdate:[20050331220000000 TO 20060620220000000]

	Regards,

		Gustavo

-----Mensaje original-----
De: WATHELET Thomas [mailto:thomas.wathelet@europarl.europa.eu]=20
Enviado el: mi=E9rcoles, 21 de junio de 2006 15:40
Para: java-user@lucene.apache.org
Asunto: BooleanQuery

Why I retrive hits with this query :=20

+doccontent:avian +doctype:AM +docdate:[20050331220000000 TO
20060620220000000]

and not with this one=20

+doccontent:avian influenza +doctype:AM +docdate:[20050331220000000 TO
20060620220000000]

????


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 14:48:00 2006
Return-Path: <java-user-return-21489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71430 invoked from network); 21 Jun 2006 14:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 14:48:00 -0000
Received: (qmail 14824 invoked by uid 500); 21 Jun 2006 14:47:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14797 invoked by uid 500); 21 Jun 2006 14:47:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14786 invoked by uid 99); 21 Jun 2006 14:47:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 07:47:52 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 07:47:51 -0700
Received: by ug-out-1314.google.com with SMTP id u2so3376596uge
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 07:47:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=iUJpHJyrbtqVT2pT094fphXjGPAFnhXG4dQpLTCGx8s2oIrf61hilyB8Ykb5sLwN+NBX837Cxkykq7l0bM/7tsviVhJ/IuYnmzupdXZ8xs/otaTL29fVfMOxXT6Dea3y4SjTREvpaeKWg7RWY7kUbVOB4KvbA7prR8KgFxACs7M=
Received: by 10.67.106.3 with SMTP id i3mr4138850ugm;
        Wed, 21 Jun 2006 07:47:29 -0700 (PDT)
Received: by 10.66.243.19 with HTTP; Wed, 21 Jun 2006 07:47:29 -0700 (PDT)
Message-ID: <f071061b0606210747t3b924b4fm6865aec833887baa@mail.gmail.com>
Date: Wed, 21 Jun 2006 16:47:29 +0200
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: using lucene Lock inter-jvm
In-Reply-To: <f071061b0606201019x3b003d5ck1a80115170281bf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0606201019x3b003d5ck1a80115170281bf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ok, in case somebody has the same problem:
The problem is the true value in
FSDirectory directory = FSDirectory.getDirectory("C:\\temp\\a", true);
it deletes the previous lock file, that belongs to the lock adquired
by the first process. Changing it to false prevents the lock being
deleted and locking works ok

On 6/20/06, jm <jmuguruza@gmail.com> wrote:
> Hi,
>
> I am trying to peruse lucene's Lock for my own purposes, I need to
> lock several java processes and I thought I could reuse the Lock
> stuff. I understand lucene locks work across jvm.
>
> But I cannot make it work. I tried to reproduce my problem in a small class:
>
> public class SysLock {
>     private static final Logger logger = Logger.getLogger(SysLock.class);
>
>     private int id;
>
>     public SysLock(int i) {
>         id = i;
>     }
>
> //    public static void main(String[] args) throws Exception {
> //        System.setProperty("org.apache.lucene.lockDir", "C:\\temp\\todel");
> //        SysLock l1 = new SysLock(1);
> //        SysLock l2 = new SysLock(2);
> //
> //        TransferThread t = l1.new TransferThread(l1);
> //        t.start();
> //        TransferThread t2 = l2.new TransferThread(l2);
> //        t2.start();
> //
> //        logger.info("Finished.");
> //    }
>
>     public static void main(String[] args) throws Exception {
>         System.setProperty("org.apache.lucene.lockDir", "C:\\temp\\todel");
>         SysLock l1 = new SysLock(new Date().getSeconds());
>
>         TransferThread t = l1.new TransferThread(l1);
>         t.start();
>
>         logger.info("Finished.");
>     }
>
>     private void forever() throws IOException {
>         FSDirectory directory = FSDirectory.getDirectory("C:\\temp\\a", true);
>         try {
>             new Lock.With(directory.makeLock("COMMIT_LOCK_NAME"),
> COMMIT_LOCK_TIMEOUT) {
>                 public Object doBody() throws IOException {
>                     while (true) {
>                         System.out.println("i'm " + id);
>                         try {
>                             Thread.sleep(2000);
>                         }
>                         catch (InterruptedException e) {
>                             e.printStackTrace();
>                         }
>                     }
>                 }
>             }.run();
>         }
>         catch (Exception e) {
>             System.out.println(id + " could not get lock");
>         }
>     }
>
>     class TransferThread extends Thread {
>         public TransferThread(SysLock sl) {
>             this.sl = sl;
>         }
>
>         public void run() {
>             try {
>                 sl.forever();
>             }
>             catch (IOException e) {
>                 // TODO Auto-generated catch block
>                 e.printStackTrace();
>             }
>         }
>
>         private SysLock sl;
>     }
> }
>
> When I run the main() that is commented (that is, the lock works with
> two threads in the same jvm) it works ok, the second TransferThread
> cannot get the lock.
>
> But when I run the uncommented main() twice, both processes adquire a
> lock, even if only one lock file exists in the lockdir. Something I am
> missing probably....
>
> Many thanks
> javi
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 14:49:14 2006
Return-Path: <java-user-return-21490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72327 invoked from network); 21 Jun 2006 14:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 14:49:14 -0000
Received: (qmail 19334 invoked by uid 500); 21 Jun 2006 14:49:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19303 invoked by uid 500); 21 Jun 2006 14:49:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19292 invoked by uid 99); 21 Jun 2006 14:49:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 07:49:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 07:49:06 -0700
Received: by nz-out-0102.google.com with SMTP id n29so144548nzf
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 07:48:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=EtPcPoEJRfX+rIwpDZLBR/gj7mBFDzEdqu0PWCaPoEBeqGWuiEnfCUCtTgiRkENyE8rsPdW+shEOJOZj5UB3lanKf0I3q4Csfbx30/LQ1WsPtCmwrW2I/RQ2bdvH/r3JnDazMGJEHn6pewjIlXLNroV5CMQXhrneQMik8h1wjtg=
Received: by 10.37.15.28 with SMTP id s28mr556983nzi;
        Wed, 21 Jun 2006 07:48:45 -0700 (PDT)
Received: by 10.36.183.38 with HTTP; Wed, 21 Jun 2006 07:48:45 -0700 (PDT)
Message-ID: <6c33f9950606210748r6e96ced3sc1bcc65b6a6b169c@mail.gmail.com>
Date: Wed, 21 Jun 2006 22:48:45 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Subject: Giving weight to partial matches
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am performing searches on an index that includes a title field and a
content field, and return results only if either title or content
matches ALL the words searched. So searching for "miracle cure for
cancer" might yield:

(+title:miracle +title:cure +title:for +title:cancer)^5.0
(+content:miracle +content:cure +content:for +content:cancer)

What I like to do now is to give additional weight to a result if the
title field contains some of the words being search, for example the
document:

Title: Miracle Cure
Content: A miracle cure for cancer has been found!

would have higher weight/score because the title contains words that
were searched for (although not fully matched), even tho the content
field is the one that results in the match.

I've seen a few discussions on weighting on the list but they all seem
to revolve around FunctionQuery from Solr. My current application does
not use Solr and is based on Lucene 1.9.

Any suggestions would be great :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 15:00:00 2006
Return-Path: <java-user-return-21491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76412 invoked from network); 21 Jun 2006 14:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 14:59:59 -0000
Received: (qmail 47300 invoked by uid 500); 21 Jun 2006 14:59:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47277 invoked by uid 500); 21 Jun 2006 14:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47266 invoked by uid 99); 21 Jun 2006 14:59:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 07:59:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.116.240.69] (HELO exchfront.GRUPOINTERCOM.oficinas) (194.116.240.69)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 07:59:49 -0700
Received: from exchback.GRUPOINTERCOM.oficinas ([10.12.50.50]) by exchfront.GRUPOINTERCOM.oficinas with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 21 Jun 2006 16:59:25 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Giving weight to partial matches
Date: Wed, 21 Jun 2006 16:59:22 +0200
Message-ID: <2829114EEAA49E4899880229DBC4394A07EC3D54@exchback.GRUPOINTERCOM.oficinas>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Giving weight to partial matches
Thread-Index: AcaVQduGz55nFAPQSsWHMoSYgbAo8QAATS/g
From: "Gustavo Comba" <gcomba@emagister.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jun 2006 14:59:25.0317 (UTC) FILETIME=[49626350:01C69543]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

	You can use something like:

(title:miracle title:cure title:for title:cancer)^5.0 +((+title:miracle =
+title:cure +title:for +title:cancer) (+content:miracle +content:cure =
+content:for +content:cancer))

	Should do the work.

	Regards,

		Gustavo

-----Mensaje original-----
De: Chun Wei Ho [mailto:cwho.work@gmail.com]=20
Enviado el: mi=E9rcoles, 21 de junio de 2006 16:49
Para: java-user@lucene.apache.org
Asunto: Giving weight to partial matches

I am performing searches on an index that includes a title field and a =
content field, and return results only if either title or content =
matches ALL the words searched. So searching for "miracle cure for =
cancer" might yield:

(+title:miracle +title:cure +title:for +title:cancer)^5.0 =
(+content:miracle +content:cure +content:for +content:cancer)

What I like to do now is to give additional weight to a result if the =
title field contains some of the words being search, for example the
document:

Title: Miracle Cure
Content: A miracle cure for cancer has been found!

would have higher weight/score because the title contains words that =
were searched for (although not fully matched), even tho the content =
field is the one that results in the match.

I've seen a few discussions on weighting on the list but they all seem =
to revolve around FunctionQuery from Solr. My current application does =
not use Solr and is based on Lucene 1.9.

Any suggestions would be great :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 15:15:43 2006
Return-Path: <java-user-return-21492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83162 invoked from network); 21 Jun 2006 15:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 15:15:43 -0000
Received: (qmail 90284 invoked by uid 500); 21 Jun 2006 15:15:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89867 invoked by uid 500); 21 Jun 2006 15:15:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89839 invoked by uid 99); 21 Jun 2006 15:15:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:15:33 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mmccand@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:15:32 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e4.ny.us.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k5LFFABm005787
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL);
	Wed, 21 Jun 2006 11:15:11 -0400
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay02.pok.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k5LFFAHE256238
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Wed, 21 Jun 2006 11:15:10 -0400
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k5LFFAtF024058;
	Wed, 21 Jun 2006 11:15:10 -0400
Received: from d01mc064.pok.ibm.com (d01mc064.pok.ibm.com [9.56.227.222])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k5LFF8cU023849;
	Wed, 21 Jun 2006 11:15:10 -0400
In-Reply-To: <f071061b0606201019x3b003d5ck1a80115170281bf@mail.gmail.com>
To: java-user@lucene.apache.org
Cc: java-dev@lucene.apache.org
Subject: Re: using lucene Lock inter-jvm
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
From: Michael McCandless <mmccand@us.ibm.com>
Message-ID: <OF1C00E443.5CB9A498-ON85257194.004456B6-85257194.00526756@us.ibm.com>
Date: Wed, 21 Jun 2006 11:00:04 -0400
X-MIMETrack: Serialize by Router on D01MC064/01/M/IBM(Release 6.5.5HF472 | May 24, 2006) at
 06/21/2006 11:15:09,
	Serialize complete at 06/21/2006 11:15:09
Content-Type: text/plain; charset="US-ASCII"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

CC'ing java-dev to talk about details of locking.

I can reproduce this on Windows XP, Java 1.4.2: two separate JVMs are able 
to get the Lock at the same time.

The code looks correct to me.

Strangely, if I make a separate standalone test that just uses 
java.io.File.createNewFile directly, it works correctly (this is what 
FSDirectory.makeLock uses).  If I hardwire the lock filename inside 
FSDirectory.makeLock, it also fails, unless I use a very short filename, 
then it seems to work.  Something intermittent is going on.

Then in looking at the docs for java.io.File.createNewfile():

 http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html#createNewFile()

There is this spooky comment:

       Note: this method should not be used for file-locking, as the 
resulting protocol cannot be made to work reliably. The FileLock facility 
should be used instead. 

Finally, it looks like Hadoop's LocalFileSystem class is already using 
FileLock's.  One benefit of FileLocks is if JVM crashes, the OS should 
handle removing the lock correctly.  I know this has been an issue in the 
past with "commit lock timeout" errors due to the lock file remaining in 
the filesystem, with the current approach.

Does anyone know of any reasons not to switch Lucene's FSDirectory locking 
to the java.nio.channels.FileLock?  EG, are there any performance issues 
that people are aware of?  It's available since Java 1.4.

Mike




jm <jmuguruza@gmail.com> 
06/20/2006 01:19 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
using lucene Lock inter-jvm






Hi,

I am trying to peruse lucene's Lock for my own purposes, I need to
lock several java processes and I thought I could reuse the Lock
stuff. I understand lucene locks work across jvm.

But I cannot make it work. I tried to reproduce my problem in a small 
class:

public class SysLock {
    private static final Logger logger = Logger.getLogger(SysLock.class);

    private int id;

    public SysLock(int i) {
        id = i;
    }

//    public static void main(String[] args) throws Exception {
//        System.setProperty("org.apache.lucene.lockDir", 
"C:\\temp\\todel");
//        SysLock l1 = new SysLock(1);
//        SysLock l2 = new SysLock(2);
//
//        TransferThread t = l1.new TransferThread(l1);
//        t.start();
//        TransferThread t2 = l2.new TransferThread(l2);
//        t2.start();
//
//        logger.info("Finished.");
//    }

    public static void main(String[] args) throws Exception {
        System.setProperty("org.apache.lucene.lockDir", 
"C:\\temp\\todel");
        SysLock l1 = new SysLock(new Date().getSeconds());

        TransferThread t = l1.new TransferThread(l1);
        t.start();

        logger.info("Finished.");
    }

    private void forever() throws IOException {
        FSDirectory directory = FSDirectory.getDirectory("C:\\temp\\a", 
true);
        try {
            new Lock.With(directory.makeLock("COMMIT_LOCK_NAME"),
COMMIT_LOCK_TIMEOUT) {
                public Object doBody() throws IOException {
                    while (true) {
                        System.out.println("i'm " + id);
                        try {
                            Thread.sleep(2000);
                        }
                        catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }.run();
        }
        catch (Exception e) {
            System.out.println(id + " could not get lock");
        }
    }

    class TransferThread extends Thread {
        public TransferThread(SysLock sl) {
            this.sl = sl;
        }

        public void run() {
            try {
                sl.forever();
            }
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        private SysLock sl;
    }
}

When I run the main() that is commented (that is, the lock works with
two threads in the same jvm) it works ok, the second TransferThread
cannot get the lock.

But when I run the uncommented main() twice, both processes adquire a
lock, even if only one lock file exists in the lockdir. Something I am
missing probably....

Many thanks
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 15:19:35 2006
Return-Path: <java-user-return-21493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84869 invoked from network); 21 Jun 2006 15:19:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 15:19:33 -0000
Received: (qmail 97622 invoked by uid 500); 21 Jun 2006 15:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97020 invoked by uid 500); 21 Jun 2006 15:19:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97009 invoked by uid 99); 21 Jun 2006 15:19:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:19:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:19:24 -0700
Received: by nf-out-0910.google.com with SMTP id m18so38406nfc
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 08:19:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XxImOd6OQMa/XytIJYM2huJYjmLdRTKabkDRcmhdOVERcoXQkRdJbnLkkwFQTdSGMXaVubsE6tkTFiq27UbOckDRU/KY5QgnJSxXVyh65wY1fWa72HyrU3PpOzu8A/C73wCTsHNbyYNnqXLVMk6+3BqRD8OjOG0pUfLWvKVHF0U=
Received: by 10.49.55.18 with SMTP id h18mr669147nfk;
        Wed, 21 Jun 2006 08:19:03 -0700 (PDT)
Received: by 10.49.39.19 with HTTP; Wed, 21 Jun 2006 08:19:03 -0700 (PDT)
Message-ID: <8837fb770606210819m71077935n2b7a4c84aa99abf1@mail.gmail.com>
Date: Wed, 21 Jun 2006 08:19:03 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: HTML text extraction
In-Reply-To: <20060621063634.57698.qmail@web50305.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_98792_7450754.1150903143180"
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
	 <20060621063634.57698.qmail@web50305.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_98792_7450754.1150903143180
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks everyone for your responses!
I will try them out.

-John

On 6/20/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> John,
>
> I also wrote about using NekoHTML, I think.  I prefer that to JTidy.  That
> also tells you what Simpy.com uses.
>
> Otis
>
> ----- Original Message ----
> From: John Wang <john.wang@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 21, 2006 1:39:41 AM
> Subject: HTML text extraction
>
> Can someone please suggest a HTML text extraction library? In the Lucene
> book, it recommends Tidy. Seems jtidy is not really being maintained.
>
> Otis, what do you guys use at Simpy?
>
> Thanks
>
> -john
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_98792_7450754.1150903143180--

From java-user-return-21494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 15:50:03 2006
Return-Path: <java-user-return-21494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97597 invoked from network); 21 Jun 2006 15:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 15:48:57 -0000
Received: (qmail 59065 invoked by uid 500); 21 Jun 2006 15:48:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58980 invoked by uid 500); 21 Jun 2006 15:48:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58969 invoked by uid 99); 21 Jun 2006 15:48:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:48:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:48:43 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.13.6/8.12.7/2.0.kim.desco.357) with ESMTP id k5LFmHfI011271
 for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 21:18:20 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: Possible improvement in BooleanQuery
Date: Wed, 21 Jun 2006 21:18:17 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083107D1C0@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Possible improvement in BooleanQuery
Thread-Index: AcaVSh04suJUYHE4RpaiLF+i4bmy2w==
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The method BooleanQuery.add( Query q, BooleanClause.Occur o) accepts
Query objects that are null for its first parameter i.e. it doesn't
throw any exception. However, when we try to get the string form of the
same BooleanQuery object, it throws a NullPointerException from within
the toString() code of BooleanQuery.

Try this code for example:=20
	  BooleanQuery bq =3D new BooleanQuery();
        bq.add(null, BooleanClause.Occur.SHOULD);
        System.out.println( bq.toString() );

It throws the following exception:
Exception in thread "main" java.lang.NullPointerException
        at
org.apache.lucene.search.BooleanQuery.toString(BooleanQuery.java:421)
        at org.apache.lucene.search.Query.toString(Query.java:79)
        at
deshaw.reccms.search.LuceneGenerator.main(LuceneGenerator.java:751)

It seems to me that an IllegalArgumentException or some other
RuntimeException should be thrown at line no. 2, from the
BooleanQuery.add() method, because clearly BooleanQuery objects don't
handle null Queries.=20

Thoughts?

Thanks,
Venu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 15:54:13 2006
Return-Path: <java-user-return-21495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 245 invoked from network); 21 Jun 2006 15:54:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 15:54:12 -0000
Received: (qmail 67729 invoked by uid 500); 21 Jun 2006 15:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67693 invoked by uid 500); 21 Jun 2006 15:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67671 invoked by uid 99); 21 Jun 2006 15:54:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:54:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:54:02 -0700
Received: by py-out-1112.google.com with SMTP id f28so288051pyf
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 08:53:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dJAvA4Sw4+5fiZmbKXKgPmmIJdFkW7oR+JAic4AA7adV4ppHVW1rQyYWComoM7WQnZXFKeBXdemhPCf06t32GgtpQWUM6ezpT5qvf4CdYCeTLJuG8NnmcogQM/8/6SXYZOWIyySrGXkl9vQMexoYjMelX0xusEhHCN6j3oOr7w0=
Received: by 10.35.18.4 with SMTP id v4mr11174508pyi;
        Wed, 21 Jun 2006 08:53:41 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Wed, 21 Jun 2006 08:53:41 -0700 (PDT)
Message-ID: <c68e39170606210853off6ebe5md15c2a8029ffade4@mail.gmail.com>
Date: Wed, 21 Jun 2006 11:53:41 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-dev@lucene.apache.org
Subject: Re: using lucene Lock inter-jvm
Cc: java-user@lucene.apache.org
In-Reply-To: <OF1C00E443.5CB9A498-ON85257194.004456B6-85257194.00526756@us.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0606201019x3b003d5ck1a80115170281bf@mail.gmail.com>
	 <OF1C00E443.5CB9A498-ON85257194.004456B6-85257194.00526756@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/21/06, Michael McCandless <mmccand@us.ibm.com> wrote:
> Does anyone know of any reasons not to switch Lucene's FSDirectory locking
> to the java.nio.channels.FileLock?  EG, are there any performance issues
> that people are aware of?  It's available since Java 1.4.

Good question Michael, no reason that I know of... I think its
probably just that no one has revisited the issue since Lucene moved
to 1.4

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 15:56:36 2006
Return-Path: <java-user-return-21496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1570 invoked from network); 21 Jun 2006 15:56:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 15:56:36 -0000
Received: (qmail 76533 invoked by uid 500); 21 Jun 2006 15:56:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76398 invoked by uid 500); 21 Jun 2006 15:56:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76376 invoked by uid 99); 21 Jun 2006 15:56:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:56:25 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.204] (HELO smtp105.sbc.mail.mud.yahoo.com) (68.142.198.204)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 08:56:24 -0700
Received: (qmail 6034 invoked from network); 21 Jun 2006 15:56:02 -0000
Received: from unknown (HELO sys2) (shelece@sbcglobal.net@69.107.127.159 with login)
  by smtp105.sbc.mail.mud.yahoo.com with SMTP; 21 Jun 2006 15:56:01 -0000
Reply-To: <bedouglas@earthlink.net>
From: "bruce" <bedouglas@earthlink.net>
To: <java-user@lucene.apache.org>
Subject: hi - testing
Date: Wed, 21 Jun 2006 08:59:28 -0700
Message-ID: <0d3a01c6954b$add08e90$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 9.0, Build 9.0.2910.0
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi..

can someone please respond to this so i can see if i'm getting through..

thanks

-bruce



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 15:59:46 2006
Return-Path: <java-user-return-21497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3063 invoked from network); 21 Jun 2006 15:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 15:59:45 -0000
Received: (qmail 83817 invoked by uid 500); 21 Jun 2006 15:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83763 invoked by uid 500); 21 Jun 2006 15:59:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83732 invoked by uid 99); 21 Jun 2006 15:59:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:59:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 08:59:30 -0700
Received: by wr-out-0506.google.com with SMTP id 50so178544wri
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 08:59:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ldf4bdsgso5tpwoa1S2Y/l7HP5Z5GdzLP5+ZFdD49ZDUvfUOS7/v6kuuAJo+lASXvDKVIrRkhYHAnnlQaNWYv7bkWjawUnr0wladmS1Mccxlgkd2xriqdByaOYfEI8soZmWIqb/eTkX1bzUtYs3cs+lFhcAb5ovoN0TH/8jYvt0=
Received: by 10.65.59.4 with SMTP id m4mr1161304qbk;
        Wed, 21 Jun 2006 08:59:09 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Wed, 21 Jun 2006 08:59:09 -0700 (PDT)
Message-ID: <c68e39170606210859u383f960bhf9590ce9f22950f4@mail.gmail.com>
Date: Wed, 21 Jun 2006 11:59:09 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org, bedouglas@earthlink.net
Subject: Re: hi - testing
In-Reply-To: <0d3a01c6954b$add08e90$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0d3a01c6954b$add08e90$0301a8c0@Mesa.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Normally the way I see if I'm correctly sending something to a list is
to send the first post I really want to send, and go check an archive
of the list a little later.

-Yonik

On 6/21/06, bruce <bedouglas@earthlink.net> wrote:
> hi..
>
> can someone please respond to this so i can see if i'm getting through..
>
> thanks
>
> -bruce


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 16:06:53 2006
Return-Path: <java-user-return-21498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4732 invoked from network); 21 Jun 2006 16:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 16:06:52 -0000
Received: (qmail 334 invoked by uid 500); 21 Jun 2006 16:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 309 invoked by uid 500); 21 Jun 2006 16:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 298 invoked by uid 99); 21 Jun 2006 16:06:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 09:06:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 09:06:45 -0700
Received: by wr-out-0506.google.com with SMTP id i21so180529wra
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 09:06:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jieqP+s5aOQ0VuuPr4VYzO5eXronoahzIuCG4WBPPuNQzSCnWGoLqCyJQYHmuZIStNJEnCuoMlK47krnMGZbWr86RoPiVgh89ZEHf5KbAVYXI1cXkSGIu7kBLkdXFA9DVJvGSPwNOh+E7phqY3vAHjjJiBILCyaWrrJR/EIh18g=
Received: by 10.64.83.10 with SMTP id g10mr2847739qbb;
        Wed, 21 Jun 2006 09:06:24 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Wed, 21 Jun 2006 09:06:24 -0700 (PDT)
Message-ID: <c68e39170606210906i2f1d4666ya684a8df83b660dd@mail.gmail.com>
Date: Wed, 21 Jun 2006 12:06:24 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying the stored norm type
In-Reply-To: <1150884781.4882.113.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
	 <200606201801.01980.paul.elschot@xs4all.nl>
	 <1150884781.4882.113.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/21/06, karl wettin <kalle@snigel.net> wrote:
> Marcus is trying to use the norms to enforce results in chronological
> order when matching a TB-sized corpus. He can't get any speed by sorting
> on a date field.

Once a FieldCache entry is populated, sorting on a DateField should be
about the same speed as sorting by score.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 16:10:14 2006
Return-Path: <java-user-return-21499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5388 invoked from network); 21 Jun 2006 16:10:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 16:10:13 -0000
Received: (qmail 8449 invoked by uid 500); 21 Jun 2006 16:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8419 invoked by uid 500); 21 Jun 2006 16:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8408 invoked by uid 99); 21 Jun 2006 16:10:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 09:10:07 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.201] (HELO smtp102.sbc.mail.mud.yahoo.com) (68.142.198.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 09:10:06 -0700
Received: (qmail 31110 invoked from network); 21 Jun 2006 16:09:45 -0000
Received: from unknown (HELO sys2) (shelece@sbcglobal.net@69.107.127.159 with login)
  by smtp102.sbc.mail.mud.yahoo.com with SMTP; 21 Jun 2006 16:09:45 -0000
Reply-To: <bedouglas@earthlink.net>
From: "bruce" <bedouglas@earthlink.net>
To: <java-user@lucene.apache.org>
Subject: RE: hi - testing
Date: Wed, 21 Jun 2006 09:13:12 -0700
Message-ID: <0d4a01c6954d$98a33110$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 9.0, Build 9.0.2910.0
In-Reply-To: <c68e39170606210859u383f960bhf9590ce9f22950f4@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thanks to all who replied!!!



-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]
Sent: Wednesday, June 21, 2006 8:59 AM
To: java-user@lucene.apache.org; bedouglas@earthlink.net
Subject: Re: hi - testing


Normally the way I see if I'm correctly sending something to a list is
to send the first post I really want to send, and go check an archive
of the list a little later.

-Yonik

On 6/21/06, bruce <bedouglas@earthlink.net> wrote:
> hi..
>
> can someone please respond to this so i can see if i'm getting through..
>
> thanks
>
> -bruce


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 16:18:37 2006
Return-Path: <java-user-return-21500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8316 invoked from network); 21 Jun 2006 16:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 16:18:35 -0000
Received: (qmail 28616 invoked by uid 500); 21 Jun 2006 16:18:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28559 invoked by uid 500); 21 Jun 2006 16:18:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28479 invoked by uid 99); 21 Jun 2006 16:18:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 09:18:26 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.205] (HELO smtp106.sbc.mail.mud.yahoo.com) (68.142.198.205)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 09:18:24 -0700
Received: (qmail 85888 invoked from network); 21 Jun 2006 16:18:02 -0000
Received: from unknown (HELO sys2) (shelece@sbcglobal.net@69.107.127.159 with login)
  by smtp106.sbc.mail.mud.yahoo.com with SMTP; 21 Jun 2006 16:18:02 -0000
Reply-To: <bedouglas@earthlink.net>
From: "bruce" <bedouglas@earthlink.net>
To: <java-user@lucene.apache.org>
Subject: lucene...
Date: Wed, 21 Jun 2006 09:21:28 -0700
Message-ID: <0d4b01c6954e$c19da680$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 9.0, Build 9.0.2910.0
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi...

after reading through the docs for lucene/nutch, i'm trying to straighten
out how it all works...

if i want to crawl through a portion of a web site for the purpose of
extracting information, it appears that this would work. however, i'm not
sure if i need lucene/nutch or both.. i don't need to do indexing, as i'm
not going to be doing any query searching, at least not initially...

i'm also trying to understand just what gets returned when i 'crawl' a
portion of a site.. do i get information back in a series of html files.. do
i get a db of information, just what do i get..??

i'm looking at being able to take a given url www.foo.com, and to be able to
crawl through a portion of the site.. need to figure out how to accomplish
this... and once i have the returned information (if it's in a file/txt
format) i'd like to be able to extract certain information based upon the
DOM of the page... if the returned information from the 'crawler' is of a
textfile format, i can easily create a parsing function to go through the
files and generate the information...

can someone provide me with insight as to whether lucene/nutch is the way to
go with this project..

thanks

-bruce
=


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 16:58:46 2006
Return-Path: <java-user-return-21501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24939 invoked from network); 21 Jun 2006 16:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 16:58:45 -0000
Received: (qmail 13441 invoked by uid 500); 21 Jun 2006 16:58:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13415 invoked by uid 500); 21 Jun 2006 16:58:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13404 invoked by uid 99); 21 Jun 2006 16:58:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 09:58:37 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 09:58:36 -0700
Received: (qmail 88552 invoked by uid 60001); 21 Jun 2006 16:58:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=F08oxuMIHdi8JzrgR6I4NQN+VvDD8vAmBfPCpzY8eNP3rz5YYisfnzTT4UGH7Q/aR+NkN6+5A3KS/MOfklG+PKuV2Gyy2Fg6uFTZPBnFheXnA9yHmgeIFCGkRxcMYQ94/tFw8OtZ4NFi6qNnSTiLG0obRVA24HRR5qzCsU6wg3E=  ;
Message-ID: <20060621165814.88550.qmail@web50307.mail.yahoo.com>
Received: from [72.229.167.99] by web50307.mail.yahoo.com via HTTP; Thu, 22 Jun 2006 00:58:14 CST
Date: Thu, 22 Jun 2006 00:58:14 +0800 (CST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene...
To: java-user@lucene.apache.org
In-Reply-To: <0d4b01c6954e$c19da680$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Bruce,
You want to use Nutch.  Nutch uses Lucene under the hood, and provides all the crawling stuff.
Otis

----- Original Message ----
From: bruce <bedouglas@earthlink.net>
To: java-user@lucene.apache.org
Sent: Wednesday, June 21, 2006 12:21:28 PM
Subject: lucene...

hi...

after reading through the docs for lucene/nutch, i'm trying to straighten
out how it all works...

if i want to crawl through a portion of a web site for the purpose of
extracting information, it appears that this would work. however, i'm not
sure if i need lucene/nutch or both.. i don't need to do indexing, as i'm
not going to be doing any query searching, at least not initially...

i'm also trying to understand just what gets returned when i 'crawl' a
portion of a site.. do i get information back in a series of html files.. do
i get a db of information, just what do i get..??

i'm looking at being able to take a given url www.foo.com, and to be able to
crawl through a portion of the site.. need to figure out how to accomplish
this... and once i have the returned information (if it's in a file/txt
format) i'd like to be able to extract certain information based upon the
DOM of the page... if the returned information from the 'crawler' is of a
textfile format, i can easily create a parsing function to go through the
files and generate the information...

can someone provide me with insight as to whether lucene/nutch is the way to
go with this project..

thanks

-bruce
=


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 17:00:27 2006
Return-Path: <java-user-return-21502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25572 invoked from network); 21 Jun 2006 17:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 17:00:27 -0000
Received: (qmail 20234 invoked by uid 500); 21 Jun 2006 17:00:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20212 invoked by uid 500); 21 Jun 2006 17:00:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20201 invoked by uid 99); 21 Jun 2006 17:00:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 10:00:20 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 10:00:19 -0700
Received: (qmail 1576 invoked by uid 60001); 21 Jun 2006 16:59:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;
  b=TDN2EYH+hryd0I5fetuY/G7bZVv7/qT8LUB7wbekVoKxB5CMzdxw6+PofsiUOS0vB/Eico1jvJw+0rV0qtFAkGJS+GUMh0B4Lp8e1e05jgIVORQYHNn9md7ZsRWwn/87Zq8jBWDGaKZuBXGalNaL1eFit5TR5Ku49f0NsbLCt7M=  ;
Message-ID: <20060621165947.1574.qmail@web50308.mail.yahoo.com>
Received: from [72.229.167.99] by web50308.mail.yahoo.com via HTTP; Wed, 21 Jun 2006 09:59:47 PDT
Date: Wed, 21 Jun 2006 09:59:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene Index search
To: java-user@lucene.apache.org
Cc: "Ngo, Anh \(ISS Southfield\)" <ango@iss.net>
In-Reply-To: <51540A3DDD507D40B6D47030C8C0C19101A3A097@soumaiexcp01.iss.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

You may want to look at the Lucene highligher, if you are after "keyword in context".

Otis
P.S.
Please use java-user list for questions.

----- Original Message ----
From: "Ngo, Anh (ISS Southfield)" <ango@iss.net>
To: java-dev@lucene.apache.org
Sent: Wednesday, June 21, 2006 12:17:38 PM
Subject: lucene Index search


Hello,

I am new to lucene index api.  Please help me with the following:

* Lucene search is returning  documents.  Is there an api that I use to
search content inside a document to return only the line that match the
search query?


Sincerely,


Anh Ngo


-----Original Message-----
From: Chuck Williams (JIRA) [mailto:jira@apache.org] 
Sent: Monday, June 19, 2006 10:24 PM
To: java-dev@lucene.apache.org
Subject: [jira] Commented: (LUCENE-398) ParallelReader crashes when
trying to merge into a new index

    [
http://issues.apache.org/jira/browse/LUCENE-398?page=comments#action_124
16837 ] 

Chuck Williams commented on LUCENE-398:
---------------------------------------

Christian,

I'm going to open a new issue on this in order to rename it, post a
revised patch, and hopefully get the attention of a committer.

Chuck


> ParallelReader crashes when trying to merge into a new index
> ------------------------------------------------------------
>
>          Key: LUCENE-398
>          URL: http://issues.apache.org/jira/browse/LUCENE-398
>      Project: Lucene - Java
>         Type: Bug

>   Components: Index
>     Versions: unspecified
>  Environment: Operating System: All
> Platform: All
>     Reporter: Sebastian Kirsch
>     Assignee: Lucene Developers
>  Attachments: ParallelReader.diff, ParallelReaderTest1.java,
parallelreader.diff, patch-next.diff
>
> ParallelReader causes a NullPointerException in
>
org.apache.lucene.index.ParallelReader$ParallelTermPositions.seek(Parall
elReader.java:318)
> when trying to merge into a new index.
> See test case and sample output:
> $ svn diff
> Index: src/test/org/apache/lucene/index/TestParallelReader.java
> ===================================================================
> --- src/test/org/apache/lucene/index/TestParallelReader.java
(revision 179785)
> +++ src/test/org/apache/lucene/index/TestParallelReader.java
(working copy)
> @@ -57,6 +57,13 @@
>  
>    }
>   
> +  public void testMerge() throws Exception {
> +    Directory dir = new RAMDirectory();
> +    IndexWriter w = new IndexWriter(dir, new StandardAnalyzer(),
true);
> +    w.addIndexes(new IndexReader[] { ((IndexSearcher)
> parallel).getIndexReader() });
> +    w.close();
> +  }
> +
>    private void queryTest(Query query) throws IOException {
>      Hits parallelHits = parallel.search(query);
>      Hits singleHits = single.search(query);
> $ ant -Dtestcase=TestParallelReader test
> Buildfile: build.xml
> [...]
> test:
>     [mkdir] Created dir:
> /Users/skirsch/text/lectures/da/thirdparty/lucene-trunk/build/test
>     [junit] Testsuite: org.apache.lucene.index.TestParallelReader
>     [junit] Tests run: 2, Failures: 0, Errors: 1, Time elapsed: 1.993
sec
>     [junit] Testcase:
testMerge(org.apache.lucene.index.TestParallelReader):  
> Caused an ERROR
>     [junit] null
>     [junit] java.lang.NullPointerException
>     [junit]     at
>
org.apache.lucene.index.ParallelReader$ParallelTermPositions.seek(Parall
elReader.java:318)
>     [junit]     at
>
org.apache.lucene.index.ParallelReader$ParallelTermDocs.seek(ParallelRea
der.java:294)
>     [junit]     at
>
org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:
325)
>     [junit]     at
>
org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:2
96)
>     [junit]     at
>
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:
270)
>     [junit]     at
>
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:234)
>     [junit]     at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:96)
>     [junit]     at
> org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:596)
>     [junit]     at
>
org.apache.lucene.index.TestParallelReader.testMerge(TestParallelReader.
java:63)
>     [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
Method)
>     [junit]     at
>
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav
a:39)
>     [junit]     at
>
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor
Impl.java:25)
>     [junit] Test org.apache.lucene.index.TestParallelReader FAILED
> BUILD FAILED
>
/Users/skirsch/text/lectures/da/thirdparty/lucene-trunk/common-build.xml
:188:
> Tests failed!
> Total time: 16 seconds
> $

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
   http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see:
   http://www.atlassian.com/software/jira


---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 17:33:55 2006
Return-Path: <java-user-return-21503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37096 invoked from network); 21 Jun 2006 17:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 17:32:54 -0000
Received: (qmail 79707 invoked by uid 500); 21 Jun 2006 17:32:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79678 invoked by uid 500); 21 Jun 2006 17:32:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79667 invoked by uid 99); 21 Jun 2006 17:32:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 10:32:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 10:32:27 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5LHW3qL012365
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 19:32:03 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Modifying the stored norm type
Date: Wed, 21 Jun 2006 19:32:02 +0200
User-Agent: KMail/1.8.2
References: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group> <200606201801.01980.paul.elschot@xs4all.nl> <1150884781.4882.113.camel@localhost>
In-Reply-To: <1150884781.4882.113.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606211932.02935.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 21 June 2006 12:13, karl wettin wrote:
> On Tue, 2006-06-20 at 18:01 +0200, Paul Elschot wrote:
> > On Tuesday 20 June 2006 12:02, Marcus Falck wrote:
> 
> > encodeNorm method of the Similarity class will encode my boost value
> > into a single byte decimal number. And I will loose a lot of
> > resolution and will get severe rounding errors.
> 
> > Are 256 different values enough for your case?
> 
> Marcus is trying to use the norms to enforce results in chronological
> order when matching a TB-sized corpus. He can't get any speed by sorting
> on a date field.
> 
> Here is an idea:
> 
> Never delete documents. Use unsafe document number as system clock. Make

Deleting documents does not change the order of the remaining ones.

> sure TermDocs always return references in reversed chronological order

There is no need to write extra code for that, the documents would be
collected oldest first, newest last.

> and write a HitCollector that does not re-order.
> 
> That should work, right? 

In case you need oldest first, yes.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 17:41:11 2006
Return-Path: <java-user-return-21504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39667 invoked from network); 21 Jun 2006 17:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 17:41:11 -0000
Received: (qmail 799 invoked by uid 500); 21 Jun 2006 17:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 772 invoked by uid 500); 21 Jun 2006 17:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 761 invoked by uid 99); 21 Jun 2006 17:41:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 10:41:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 10:41:04 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5LHegND093869
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 19:40:42 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Modifying the stored norm type
Date: Wed, 21 Jun 2006 19:40:41 +0200
User-Agent: KMail/1.8.2
References: <000901c69488$8705df90$9401a8c0@corp.keepmedia.int>
In-Reply-To: <000901c69488$8705df90$9401a8c0@corp.keepmedia.int>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606211940.42044.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 20 June 2006 18:42, Dan Climan wrote:
> >Paul Elschot <paul.elschot@xs4all.nl> 
> >>On Tuesday 20 June 2006 12:02, Marcus Falck wrote:
> >> After a lot of debugging and some API doc reading I have come to the
> > conclusion that the static encodeNorm method of the Similarity class
> > will encode my boost value into a single byte decimal number.
> >> 
> >> And I will loose a lot of resolution and will get severe rounding
> >> errors. 
> >> 
> >> Since I need the exact float value as boost representation this isn't
> >> good enough in my case.
> 
> >An exact float value is a bit of an oxymoron.
> >How exact do you need it to be? 
> 
> >The range of values that can be encoded by the existing encodeNorm()
> >and decodeNorm() is quite big (about 10e-10 to 10e+10 iirc),
> >and since there are only 255 possible values in there (excluding 0),
> >the rounding errors can be severe indeed.
> >However, with a smaller range, the rounding errors would also be smaller.
> 
> >Are 256 different values enough for your case?
> 
> >Regards,
> >Paul Elschot
> 
> I, too, have found that 256 values were not enough. I tried changing the
> encodeNorm function to use a narrower range of values, but the 256 limit
> makes it degrade quickly if I get any results outside the expected range.
> This was true when we tried various algorithms for boosting results based on
> external factors. 
> 
> FunctionQuery(not currently in core lucene) from the SOLR project may be be
> an alternative. Can it replace all uses of the norm?
> 
> Now that omitNorms is part of the core, the impact of allowing a 2 byte (or
> even 4 byte norm) is not nearly as severe on memory. Any suggestions for how
> to create a multi-byte norm as an option, but enable the same code to
> reading existing 1 byte norms?

No more than to add your needs here: 
http://wiki.apache.org/jakarta-lucene/FlexibleIndexing,
and to subscribe to java-dev.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 18:08:23 2006
Return-Path: <java-user-return-21505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50121 invoked from network); 21 Jun 2006 18:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 18:08:22 -0000
Received: (qmail 65612 invoked by uid 500); 21 Jun 2006 18:08:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65588 invoked by uid 500); 21 Jun 2006 18:08:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65577 invoked by uid 99); 21 Jun 2006 18:08:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:08:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.201] (HELO smtp102.sbc.mail.mud.yahoo.com) (68.142.198.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jun 2006 11:08:14 -0700
Received: (qmail 91491 invoked from network); 21 Jun 2006 18:07:52 -0000
Received: from unknown (HELO sys2) (shelece@sbcglobal.net@69.107.127.159 with login)
  by smtp102.sbc.mail.mud.yahoo.com with SMTP; 21 Jun 2006 18:07:52 -0000
Reply-To: <bedouglas@earthlink.net>
From: "bruce" <bedouglas@earthlink.net>
To: <java-user@lucene.apache.org>
Subject: lucene consulting/support/help
Date: Wed, 21 Jun 2006 11:11:20 -0700
Message-ID: <0d9501c6955e$19b562e0$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 9.0, Build 9.0.2910.0
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi...

anybody on the list provide consulting/support for lucene/nutch...

get back to me with your contact info if you do...

thanks

-bruce


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 18:15:30 2006
Return-Path: <java-user-return-21506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54486 invoked from network); 21 Jun 2006 18:15:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 18:15:30 -0000
Received: (qmail 90580 invoked by uid 500); 21 Jun 2006 18:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90452 invoked by uid 500); 21 Jun 2006 18:15:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90441 invoked by uid 99); 21 Jun 2006 18:15:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:15:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:15:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 012C25B76E; Wed, 21 Jun 2006 11:14:55 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id ECD1C7F403
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 11:14:55 -0700 (PDT)
Date: Wed, 21 Jun 2006 11:14:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: RE: Custom ScoreDocComparator and normalized Scores
In-Reply-To: <2829114EEAA49E4899880229DBC4394A07EC3B28@exchback.GRUPOINTERCOM.oficinas>
Message-ID: <Pine.LNX.4.58.0606211110080.18753@hal.rescomp.berkeley.edu>
References: <2829114EEAA49E4899880229DBC4394A07EC3B28@exchback.GRUPOINTERCOM.oficinas>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Thanks Chris, I didn't know the "solr" package, it is not in the release
: distribution, isn't? I'm going to read about it to see if it matchs our
: needs.

Solr is a seperate (incubation) project, that builds on top of Lucene, but
the FunctionQuery classes have no dependencies outside of the Lucene core.

: Our Score = x . LuceneScore + y . SomeField + z . SomeOtherField + w .
: YetAnotherField
:
: Being x, y, z and w our coeffiecients or "scaling factors" in our
: ranking function.

The thing to watch out for is that Normalizing Lucene scores isn't very
"clean" in a mathematical sense, you can asume that a score value of X
when searching for "foo" emans the match is as good as a score of X when
searching for "bar"

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03

The FunctionQuery stuff may make more sense for you, it lets you inject
your function right into the lucene score.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 18:22:56 2006
Return-Path: <java-user-return-21507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57472 invoked from network); 21 Jun 2006 18:22:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 18:22:55 -0000
Received: (qmail 6382 invoked by uid 500); 21 Jun 2006 18:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6353 invoked by uid 500); 21 Jun 2006 18:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6341 invoked by uid 99); 21 Jun 2006 18:22:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:22:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 11:22:49 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 21CD15B76E; Wed, 21 Jun 2006 11:22:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1B22F7F403
	for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 11:22:29 -0700 (PDT)
Date: Wed, 21 Jun 2006 11:22:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Giving weight to partial matches
In-Reply-To: <6c33f9950606210748r6e96ced3sc1bcc65b6a6b169c@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606211119280.18753@hal.rescomp.berkeley.edu>
References: <6c33f9950606210748r6e96ced3sc1bcc65b6a6b169c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: content field, and return results only if either title or content
: matches ALL the words searched. So searching for "miracle cure for
: cancer" might yield:
:
: (+title:miracle +title:cure +title:for +title:cancer)^5.0
: (+content:miracle +content:cure +content:for +content:cancer)

first off, a really sloppy phrase query may serve you better hear .. it
will have the added beenfit of soring docs where these words appear closer
together higher...

   (title:"miracle cure for cancer" content:"miracle cure for cancer")

: What I like to do now is to give additional weight to a result if the
: title field contains some of the words being search, for example the
: document:

just treat your current query as a required clause of a new boolean query,
and add each of the individual words as optional clauses...

   (+(title:"miracle cure for cancer" content:"miracle cure for cancer")
    title:miracle title:cure title:for title:cancer)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 21:39:18 2006
Return-Path: <java-user-return-21508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62423 invoked from network); 21 Jun 2006 21:39:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 21:39:18 -0000
Received: (qmail 97117 invoked by uid 500); 21 Jun 2006 21:39:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97083 invoked by uid 500); 21 Jun 2006 21:39:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97072 invoked by uid 99); 21 Jun 2006 21:39:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 14:39:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Lawrence@theladders.com designates 67.151.144.115 as permitted sender)
Received: from [67.151.144.115] (HELO hermes.laddersoffice.com) (67.151.144.115)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 14:39:10 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: lucene consulting/support/help
Date: Wed, 21 Jun 2006 17:38:49 -0400
Message-ID: <15FC71D155A0F8429C3636B72C2ED52E19BF36@hermes.laddersoffice.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene consulting/support/help
thread-index: AcaVXa/oMIivhu2cS3mu04KQQdkx0AAHV5kw
From: "Larry Ogrodnek" <Lawrence@theladders.com>
To: <java-user@lucene.apache.org>,
	<bedouglas@earthlink.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

http://wiki.apache.org/jakarta-lucene/Support

-----Original Message-----
From: bruce [mailto:bedouglas@earthlink.net]=20
Sent: Wednesday, June 21, 2006 2:11 PM
To: java-user@lucene.apache.org
Subject: lucene consulting/support/help

hi...

anybody on the list provide consulting/support for lucene/nutch...

get back to me with your contact info if you do...

thanks

-bruce


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 23:32:31 2006
Return-Path: <java-user-return-21509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8766 invoked from network); 21 Jun 2006 23:32:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 23:32:31 -0000
Received: (qmail 66701 invoked by uid 500); 21 Jun 2006 23:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66665 invoked by uid 500); 21 Jun 2006 23:32:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66606 invoked by uid 99); 21 Jun 2006 23:32:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:32:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:32:22 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B2356B7362
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 09:31:45 +1000 (EST)
Message-ID: <4499D86B.1000802@nuix.com.au>
Date: Thu, 22 Jun 2006 09:38:19 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: HTML text extraction
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com> <4498DE89.1080901@nuix.com.au> <4498F1C8.4030006@wmin.ac.uk>
In-Reply-To: <4498F1C8.4030006@wmin.ac.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Simon Courtenage wrote:
> I also use htmlparser, which is rather good.  I've had to customize it, 
> though, to parse strings containing
> html source rather than accept urls of resources to fetch etc.  Also it 
> crashes on meta tags that don't have
> name attributes (something I discovered only a couple of days ago).

Actually, it already accepts strings without modifying the library:

    String htmlSource = "<html>...</html>";
    Parser parser = new Parser(new Lexer(htmlSource));

I will have to watch out for those meta tags though.  Time to go test it.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 23:33:57 2006
Return-Path: <java-user-return-21510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9539 invoked from network); 21 Jun 2006 23:33:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 23:33:57 -0000
Received: (qmail 69752 invoked by uid 500); 21 Jun 2006 23:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69398 invoked by uid 500); 21 Jun 2006 23:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69384 invoked by uid 99); 21 Jun 2006 23:33:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:33:52 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of iamnader@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:33:51 -0700
Received: by wr-out-0506.google.com with SMTP id 50so279127wri
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 16:33:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=WzJMxI9x4YKHg8lnGpg6mylNv5Zk3hPaR4hXwqybAXZMvr6y5rLNNjvCYRpzKyzF2UK+/2p9XokaOiATz/n3wRNu6W+am+372o1fm1Q4lgIwf2QPlstlE4xvTeVb2A46k/VRZhB9ZkCpkTMRGW/M+eG8SbhM2TyvH+sMejnt17s=
Received: by 10.64.125.17 with SMTP id x17mr663412qbc;
        Wed, 21 Jun 2006 16:33:30 -0700 (PDT)
Received: by 10.65.84.2 with HTTP; Wed, 21 Jun 2006 16:33:30 -0700 (PDT)
Message-ID: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com>
Date: Wed, 21 Jun 2006 16:33:30 -0700
From: "Nader Akhnoukh" <iamnader@gmail.com>
To: java-user@lucene.apache.org
Subject: Phrase Frequency For Analysis
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_108325_8920912.1150932810380"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_108325_8920912.1150932810380
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, I've looked through the archives and it looks like this question has
been asked in one form or another a few times, but without a satisfactory
solution.

I am trying to get the most frequently occurring phrases in a document and
in the index as a whole.  The goal is compare the two to get something like
Amazon's SIPs.

This is straightforward for individual words.  Get the term frequency of
each term in a doc and compare it to the frequency of that term in the
index.  A high ratio indicates that the term appears in this doc much more
than the other docs on average.

Does anyone have an idea of how to do this with phrases of say 1 to 3 words?

Just to be clear,  in this case I am only using Lucene for it's built in
frequency analysis, I'm not actually using it to search for anything that is
indexed.

Thanks,
NSA

------=_Part_108325_8920912.1150932810380--

From java-user-return-21511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 21 23:43:31 2006
Return-Path: <java-user-return-21511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11790 invoked from network); 21 Jun 2006 23:43:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2006 23:43:31 -0000
Received: (qmail 81257 invoked by uid 500); 21 Jun 2006 23:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81230 invoked by uid 500); 21 Jun 2006 23:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81208 invoked by uid 99); 21 Jun 2006 23:43:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:43:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 16:43:24 -0700
Received: by ug-out-1314.google.com with SMTP id u2so182444uge
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 16:43:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=YDudmG/3uZ6SJG7vCYZyqi+9RJ7zM9aDdlyuB77luySUM8k0nc7zdeLtYKZ9kaSpC8BtUDxnSkS1kBpg+IsFrtXcHmC2G+sc0w2PzXn6MiAzW5oMCAKZkukG5v7qjfTSldDSBr7yHS+tlnOWYRk57TIDL9wwX9wF6B2jWJi+b4s=
Received: by 10.78.139.5 with SMTP id m5mr135689hud;
        Wed, 21 Jun 2006 16:43:03 -0700 (PDT)
Received: by 10.78.68.9 with HTTP; Wed, 21 Jun 2006 16:43:03 -0700 (PDT)
Message-ID: <27bc81750606211643h688c5895g7f7c6636895576f5@mail.gmail.com>
Date: Wed, 21 Jun 2006 20:43:03 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org
Subject: Creating initial index using FSDirectory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11690_19668550.1150933383285"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_11690_19668550.1150933383285
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all. I'm writing a avalon component that wrapps lucene. My problem is
that I can't start the component using FSDirectory unless the index files
are already in place (segment, etc) , or I set the rewrite flag to true.

I my case, I'd like to create the index file structure only the first time I
initialize the component, then reuse the same index for each application
run.

Any help?
-- 
Leandro Rodrigo Saad Cruz
CTO - InterBusiness Technologies
db.apache.org/ojb
guara-framework.sf.net
xingu.sf.net

------=_Part_11690_19668550.1150933383285--

From java-user-return-21512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 00:07:27 2006
Return-Path: <java-user-return-21512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20124 invoked from network); 22 Jun 2006 00:07:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 00:07:26 -0000
Received: (qmail 30809 invoked by uid 500); 22 Jun 2006 00:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30782 invoked by uid 500); 22 Jun 2006 00:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30771 invoked by uid 99); 22 Jun 2006 00:07:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 17:07:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 17:07:19 -0700
Received: by py-out-1112.google.com with SMTP id b29so126732pya
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 17:06:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ok7LSwZxjEzRDaN2o9OnOx3pEuNNdkj5L+w16VY76L20uMJuIqwUssFxGoynyAxfzLpoSYIYr4q+p76w9uXk+ae3+cJOcMqnK95iZjEjQ6eC29gbX3mw539R/xv6iMqUkAi5VCAE7qcSiE45+uRR09y2ISwc9GCiLqBIwIVhPH8=
Received: by 10.35.103.12 with SMTP id f12mr454560pym;
        Wed, 21 Jun 2006 17:06:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 21 Jun 2006 17:06:59 -0700 (PDT)
Message-ID: <359a92830606211706o67f8509bv9af1bc842f828e6f@mail.gmail.com>
Date: Wed, 21 Jun 2006 20:06:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating initial index using FSDirectory
In-Reply-To: <27bc81750606211643h688c5895g7f7c6636895576f5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10738_5888640.1150934819074"
References: <27bc81750606211643h688c5895g7f7c6636895576f5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10738_5888640.1150934819074
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From an e-mail from Kent Fitch in the thread "*Detecting index existance* "

Try IndexReader static method indexExists:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#indexExists(java.lang.String)<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#indexExists%28java.lang.String%29>

Can you condition how you set the rewrite (create!?) flag based upon the
return from this call?

Hope this helps
Erick

------=_Part_10738_5888640.1150934819074--

From java-user-return-21513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 03:43:57 2006
Return-Path: <java-user-return-21513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83499 invoked from network); 22 Jun 2006 03:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 03:43:57 -0000
Received: (qmail 38584 invoked by uid 500); 22 Jun 2006 03:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38547 invoked by uid 500); 22 Jun 2006 03:43:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38536 invoked by uid 99); 22 Jun 2006 03:43:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 20:43:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 20:43:50 -0700
Received: by wr-out-0506.google.com with SMTP id 50so316635wri
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 20:43:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bbhHgdX/3poxW3duYKWbemM5rXX+oUiEEhR0Wy5zYh7exXG8Xuw+arjRb+PQ+elgiWvxsB5nXlHS3hVpYvMyQTXSvNr4qtxTa9RCC5m12bYkeL3ZdbOVc18ScZxI15CgcV84RU4Ww5U/6bT/WVzz7XVomSlEklIpODkOdN4aCSk=
Received: by 10.65.74.11 with SMTP id b11mr1839868qbl;
        Wed, 21 Jun 2006 20:43:28 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Wed, 21 Jun 2006 20:43:28 -0700 (PDT)
Message-ID: <a36516400606212043j744c7b8cq5beff444db9d8b02@mail.gmail.com>
Date: Thu, 22 Jun 2006 09:13:28 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: addIndexes() is taking infinite time ...
In-Reply-To: <a36516400606202149j66371baha7b8e6100f2d82ff@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_913_14442687.1150947808629"
References: <a36516400606200507h2c381597j6d847137a4c3757@mail.gmail.com>
	 <20060620154249.20756.qmail@web50303.mail.yahoo.com>
	 <a36516400606202149j66371baha7b8e6100f2d82ff@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_913_14442687.1150947808629
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi Otis,
Now this time it took 10 Hr 34 Min. to merge the indexes. During merging i
noticed it was not completey using the CPU. I have 512MB RAM. and here i
found it used upto the 256 MB.

Are there some more possibilities to make it more fast ...

With Regards,



On 6/21/06, heritrix. lucene <heritrix.lucene@gmail.com> wrote:
>
> hi,
> thanks for your reply.
> Now i restarted my application with maxBufferedDocs=10,000.
> And i am sorry to say that i was adding those indexes one by one. :-)
>
> Anyway Can you please explain me the addIndex ? I want to know what
> exactly happens while adding these..
>
> With Regards,
>
>
>
> On 6/20/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> > If you can tell how many indices you've merged, you must be mering them
> > one at a time, and the pre and post merge optimize() calls are costing you.
> >
> > Also, that maxBufferedDocs looks pretty low.  Unless you are working
> > with very large documents and small heap, you should be able to bump that up
> > much higher.  I've used 10,000+ in some cases.
> >
> > Otis
> >
> > ----- Original Message ----
> > From: heritrix.lucene <heritrix.lucene@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Tuesday, June 20, 2006 8:07:19 AM
> > Subject: addIndexes() is taking infinite time ...
> >
> > Hi all,
> > I had five different indexes:
> > 1 having 15469008 documents
> > 2 having 7734504 documents
> > 3 having 7734504 documents
> > 4 having 7734504 documents
> > 5 having 7734504 documents
> > Which sums to 46407024.
> > The constant values are
> > maxMergeFactor = 1000
> > maxBufferedDocs = 1000
> >
> > I wrote a simple program which uses the addIndex method for adding
> > indexes.
> > It has been more then 32 hours adding the indexes. My logs say upto now
> > it
> > has finished only first two indexes. It is adding the third one.
> > I want to know what exactly happens while merging the indexes?? Why this
> > time grows exponentially ????
> > Can anybody explain this in brief.
> >
> > Thanks in advance..
> > With Regards
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_913_14442687.1150947808629--

From java-user-return-21514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 03:55:18 2006
Return-Path: <java-user-return-21514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87561 invoked from network); 22 Jun 2006 03:55:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 03:55:11 -0000
Received: (qmail 50778 invoked by uid 500); 22 Jun 2006 03:55:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50743 invoked by uid 500); 22 Jun 2006 03:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50730 invoked by uid 99); 22 Jun 2006 03:55:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 20:55:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 20:55:05 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 08B49B7362
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 13:54:29 +1000 (EST)
Message-ID: <449A1600.80304@nuix.com.au>
Date: Thu, 22 Jun 2006 14:01:04 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: addIndexes() is taking infinite time ...
References: <a36516400606200507h2c381597j6d847137a4c3757@mail.gmail.com>	 <20060620154249.20756.qmail@web50303.mail.yahoo.com>	 <a36516400606202149j66371baha7b8e6100f2d82ff@mail.gmail.com> <a36516400606212043j744c7b8cq5beff444db9d8b02@mail.gmail.com>
In-Reply-To: <a36516400606212043j744c7b8cq5beff444db9d8b02@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

heritrix.lucene wrote:
> hi Otis,
> Now this time it took 10 Hr 34 Min. to merge the indexes. During merging i
> noticed it was not completey using the CPU. I have 512MB RAM. and here i
> found it used upto the 256 MB.
> 
> Are there some more possibilities to make it more fast ...

Have you tested how fast the same process runs on different storage 
devices?  It sounds like you're bound by IO, and perhaps finding ways to 
speed up the storage (RAID striping?) would help speed things up.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 03:57:06 2006
Return-Path: <java-user-return-21515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87743 invoked from network); 22 Jun 2006 03:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 03:57:06 -0000
Received: (qmail 52418 invoked by uid 500); 22 Jun 2006 03:57:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52389 invoked by uid 500); 22 Jun 2006 03:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52378 invoked by uid 99); 22 Jun 2006 03:57:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 20:57:00 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 20:57:00 -0700
Received: by wr-out-0506.google.com with SMTP id 50so318359wri
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 20:56:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PDM7CaDQAOMdh1mZ/FP1j5DmMWMVmBwSBNy3fijwpH1taqVUUeacR6ZIm0xNVogmsJyupmck7DoydqYXJ1azSxih3CvKgB968czt5VIh187xTOpA5yxNOiLbsdJ26CVJq47cgaRcfB/O+2cLhEZPdAMycKfw2YaVSHSLb4GdXsY=
Received: by 10.64.185.9 with SMTP id i9mr2009609qbf;
        Wed, 21 Jun 2006 20:56:36 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Wed, 21 Jun 2006 20:56:36 -0700 (PDT)
Message-ID: <a36516400606212056k7fff509bre4b2499f9a378046@mail.gmail.com>
Date: Thu, 22 Jun 2006 09:26:36 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: What is a "Lazy Field"...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_965_584824.1150948596770"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_965_584824.1150948596770
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Can anybody please tell me what a "Lazy Field" is ???
I noticed several time this term has come in discussion...
With Regards,

------=_Part_965_584824.1150948596770--

From java-user-return-21516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 04:05:46 2006
Return-Path: <java-user-return-21516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92979 invoked from network); 22 Jun 2006 04:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 04:05:46 -0000
Received: (qmail 68876 invoked by uid 500); 22 Jun 2006 04:05:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68850 invoked by uid 500); 22 Jun 2006 04:05:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68839 invoked by uid 99); 22 Jun 2006 04:05:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 21:05:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 21:05:37 -0700
Received: by wr-out-0506.google.com with SMTP id 50so319468wri
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 21:05:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jGVw8/7DezT6YJ8kSAnLEkwDsSOz78Sxt59LeLTfijPR+G3IFnwh70esgQzi0ByO1xpzebYtqFtrKXu+XpgccClbHILmLRaTjzMiZwqJetX4qFang1WWkA9btBZEcgsxgFvQytJvVRHQY6tPkrbbkYTZKvvhlsbizwA+1DnVjTk=
Received: by 10.64.125.17 with SMTP id x17mr881211qbc;
        Wed, 21 Jun 2006 21:05:16 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Wed, 21 Jun 2006 21:05:16 -0700 (PDT)
Message-ID: <a36516400606212105o33884f10qd30439e15134ecc6@mail.gmail.com>
Date: Thu, 22 Jun 2006 09:35:16 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: addIndexes() is taking infinite time ...
In-Reply-To: <449A1600.80304@nuix.com.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1009_14854263.1150949116839"
References: <a36516400606200507h2c381597j6d847137a4c3757@mail.gmail.com>
	 <20060620154249.20756.qmail@web50303.mail.yahoo.com>
	 <a36516400606202149j66371baha7b8e6100f2d82ff@mail.gmail.com>
	 <a36516400606212043j744c7b8cq5beff444db9d8b02@mail.gmail.com>
	 <449A1600.80304@nuix.com.au>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1009_14854263.1150949116839
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. I haven't tried. Today i can try it. One thing that i m thinking is that
what role does the  file system plays here. I mean is there any difference
on if i am doing indexing on FAT32 or i am on EXT3???
i'll have to find it out....
Can anybody put some light on this??

With regards

On 6/22/06, Daniel Noll <daniel@nuix.com.au> wrote:
>
> heritrix.lucene wrote:
> > hi Otis,
> > Now this time it took 10 Hr 34 Min. to merge the indexes. During merging
> i
> > noticed it was not completey using the CPU. I have 512MB RAM. and here i
> > found it used upto the 256 MB.
> >
> > Are there some more possibilities to make it more fast ...
>
> Have you tested how fast the same process runs on different storage
> devices?  It sounds like you're bound by IO, and perhaps finding ways to
> speed up the storage (RAID striping?) would help speed things up.
>
> Daniel
>
> --
> Daniel Noll
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1009_14854263.1150949116839--

From java-user-return-21517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 06:52:08 2006
Return-Path: <java-user-return-21517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39212 invoked from network); 22 Jun 2006 06:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 06:52:08 -0000
Received: (qmail 29095 invoked by uid 500); 22 Jun 2006 06:52:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29064 invoked by uid 500); 22 Jun 2006 06:52:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29053 invoked by uid 99); 22 Jun 2006 06:52:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 23:52:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prettykely@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 23:52:00 -0700
Received: by ug-out-1314.google.com with SMTP id u2so294073uge
        for <java-user@lucene.apache.org>; Wed, 21 Jun 2006 23:51:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=Jct6AYvwG5Syg2B1ZhGKlNhbGTAzTA8nAVAy04M3MG4zmZViSwn+lk9B2eXd/ZbxVGKgibUzfllGtPSYx3SDdF/TSs8gJagZ6QNIoSYkPoe3KkEH3iPVZEqutL8gKAUhuoJ63g/O3AECSQxVJfXl1DvmoT5+AAXOzbCv2axSQ2Q=
Received: by 10.78.122.11 with SMTP id u11mr235630huc;
        Wed, 21 Jun 2006 23:51:38 -0700 (PDT)
Received: by 10.78.70.3 with HTTP; Wed, 21 Jun 2006 23:51:38 -0700 (PDT)
Message-ID: <8fa7a78e0606212351r11b1b7a7i3b2ebe1b15d2ebe7@mail.gmail.com>
Date: Thu, 22 Jun 2006 14:51:38 +0800
From: "=?GB2312?B?1cXoqg==?=" <jimijin@jimijin.com>
Reply-To: jimijin@jimijin.com
Sender: prettykely@gmail.com
To: java-user@lucene.apache.org, john.wang@gmail.com
Subject: Re: HTML text extraction
In-Reply-To: <000f01c6952b$2f2564f0$6400a8c0@lymobile>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5395_21548836.1150959098837"
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
	 <000f01c6952b$2f2564f0$6400a8c0@lymobile>
X-Google-Sender-Auth: 4f5826e53773194d
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5395_21548836.1150959098837
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Please send it to me,thanks very much!

2006/6/21, Liao Xuefeng <askxuefeng@gmail.com>:
>
> hi,
> i wrote my own html parser to do html2text and it works well. i can send
> you
> my code if it matches your require.
>
> -----Original Message-----
> From: John Wang [mailto:john.wang@gmail.com]
> Sent: Wednesday, June 21, 2006 1:40 PM
> To: java-user@lucene.apache.org
> Subject: HTML text extraction
>
> Can someone please suggest a HTML text extraction library? In the Lucene
> book, it recommends Tidy. Seems jtidy is not really being maintained.
>
> Otis, what do you guys use at Simpy?
>
> Thanks
>
> -john
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5395_21548836.1150959098837--

From java-user-return-21518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 06:53:47 2006
Return-Path: <java-user-return-21518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39605 invoked from network); 22 Jun 2006 06:53:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 06:53:47 -0000
Received: (qmail 30965 invoked by uid 500); 22 Jun 2006 06:53:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30936 invoked by uid 500); 22 Jun 2006 06:53:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30922 invoked by uid 99); 22 Jun 2006 06:53:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 23:53:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jun 2006 23:53:39 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: addIndexes() is taking infinite time ...
Date: Thu, 22 Jun 2006 07:53:17 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE7C179F@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: addIndexes() is taking infinite time ...
thread-index: AcaVsSJ+4jSJfUQnTreSty30ZwedhgAF0tzA
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>From memory addIndexes() also does and optimization before hand, this
might be what is taking the time.

Mike

www.ardentia.com the home of NetSearch
-----Original Message-----
From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]=20
Sent: 22 June 2006 05:05
To: java-user@lucene.apache.org
Subject: Re: addIndexes() is taking infinite time ...

No. I haven't tried. Today i can try it. One thing that i m thinking is
that
what role does the  file system plays here. I mean is there any
difference
on if i am doing indexing on FAT32 or i am on EXT3???
i'll have to find it out....
Can anybody put some light on this??

With regards

On 6/22/06, Daniel Noll <daniel@nuix.com.au> wrote:
>
> heritrix.lucene wrote:
> > hi Otis,
> > Now this time it took 10 Hr 34 Min. to merge the indexes. During
merging
> i
> > noticed it was not completey using the CPU. I have 512MB RAM. and
here i
> > found it used upto the 256 MB.
> >
> > Are there some more possibilities to make it more fast ...
>
> Have you tested how fast the same process runs on different storage
> devices?  It sounds like you're bound by IO, and perhaps finding ways
to
> speed up the storage (RAID striping?) would help speed things up.
>
> Daniel
>
> --
> Daniel Noll
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280
0699
> Web: http://www.nuix.com.au/                        Fax: +61 2 9212
6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 07:01:46 2006
Return-Path: <java-user-return-21519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43217 invoked from network); 22 Jun 2006 07:01:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 07:01:46 -0000
Received: (qmail 45394 invoked by uid 500); 22 Jun 2006 07:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45369 invoked by uid 500); 22 Jun 2006 07:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45355 invoked by uid 99); 22 Jun 2006 07:01:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 00:01:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 00:01:34 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5M71C77018179
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 09:01:13 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Phrase Frequency For Analysis
Date: Thu, 22 Jun 2006 09:01:11 +0200
User-Agent: KMail/1.8.2
References: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com>
In-Reply-To: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606220901.11543.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 22 June 2006 01:33, Nader Akhnoukh wrote:
> Hi, I've looked through the archives and it looks like this question has
> been asked in one form or another a few times, but without a satisfactory
> solution.
> 
> I am trying to get the most frequently occurring phrases in a document and
> in the index as a whole.  The goal is compare the two to get something like
> Amazon's SIPs.
> 
> This is straightforward for individual words.  Get the term frequency of
> each term in a doc and compare it to the frequency of that term in the
> index.  A high ratio indicates that the term appears in this doc much more
> than the other docs on average.
> 
> Does anyone have an idea of how to do this with phrases of say 1 to 3 words?
> 
> Just to be clear,  in this case I am only using Lucene for it's built in
> frequency analysis, I'm not actually using it to search for anything that is
> indexed.

Other than indexing the phrases directly, you could use a SpanNearQuery
over the words, use getSpans() on its SpanScorer and count the number
of times next() on this Spans returns true.
This counts the total number of occurrences of the "phrase" in the index.
Eeach time doc() on the Spans returns a given document number,
one can increase the phrase frequency count within the document.
A Spans always iterates by non decreasing document number.
Btw. that is a search.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 07:37:26 2006
Return-Path: <java-user-return-21520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67559 invoked from network); 22 Jun 2006 07:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 07:37:26 -0000
Received: (qmail 93593 invoked by uid 500); 22 Jun 2006 07:37:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93564 invoked by uid 500); 22 Jun 2006 07:37:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93550 invoked by uid 99); 22 Jun 2006 07:37:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 00:37:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.210.211 as permitted sender)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 00:37:18 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay2.uni-heidelberg.de (8.12.10/8.12.10) with ESMTP id k5M7d2vj023518
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 09:39:02 +0200 (MET DST)
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 756EA2C05A
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 09:36:54 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 4B2F62C059
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 09:36:53 +0200 (CEST)
Message-ID: <449A4894.4080808@uni-hd.de>
Date: Thu, 22 Jun 2006 09:36:52 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search within multiple different subfolders
References: <359a92830606200551s15c249ccq31f269486deb7578@mail.gmail.com>	 <20060621055449.87796.qmail@web50409.mail.yahoo.com> <359a92830606210617n1b6b0be3vcf0a28beb2c79c0f@mail.gmail.com>
In-Reply-To: <359a92830606210617n1b6b0be3vcf0a28beb2c79c0f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi,
> 
> I'm hardly the lucene expert, but I don't think you can search just a
> portion of the index. But that's effectively what you're doing if you
> restrict the search to "son and.....".
I think there is also the possibility to write a custom search filter
(org.apache.lucene.search.Filter), and to build a bitset with a special
field providing the information from which dir the file comes from.

But I am wondering which is the better solution according to performance?

> But I also have to ask, why are you trying to "search only a portion of the
> index"? If you haven't encountered a bottleneck that's forcing you into

Perhaps for privacy reasons? that only specific users should be able to
search the whole index.
Is  there a best practice approach to realize this?

thx,
martin


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 08:09:35 2006
Return-Path: <java-user-return-21521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79432 invoked from network); 22 Jun 2006 08:09:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 08:09:35 -0000
Received: (qmail 46751 invoked by uid 500); 22 Jun 2006 08:09:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46533 invoked by uid 500); 22 Jun 2006 08:09:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46522 invoked by uid 99); 22 Jun 2006 08:09:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:09:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:09:27 -0700
Received: by nz-out-0102.google.com with SMTP id i11so323859nzh
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 01:09:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t21M/UT7S0ERq5vFKw21LahmR9sWMdluJzCheZkDPkgmi7lNsYqJ4UymEPdIwoIRuWilfRFBqvWbx881JEdyHo5EUCvD3EEsIjOZyvKxlmvMdrpHJLC3xeGXPjhYQjOcIKskojsiGxZZJs95TKDbEA97+vM0+F2x3WpR/sXDeK4=
Received: by 10.65.155.4 with SMTP id h4mr2198464qbo;
        Thu, 22 Jun 2006 01:09:06 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Thu, 22 Jun 2006 01:09:06 -0700 (PDT)
Message-ID: <a36516400606220109s159ca40fxdffaaf9aeb1d9d5d@mail.gmail.com>
Date: Thu, 22 Jun 2006 13:39:06 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: addIndexes() is taking infinite time ...
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE7C179F@staf-exm-01.ardentia.co.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2056_24299708.1150963746723"
References: <0B1C92228C5C8D45AA7450F78B3FB9DE7C179F@staf-exm-01.ardentia.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2056_24299708.1150963746723
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

so how it can be ignored ??


On 6/22/06, Mike Streeton <mike.streeton@ardentia.co.uk> wrote:
>
> From memory addIndexes() also does and optimization before hand, this
> might be what is taking the time.
>
> Mike
>
> www.ardentia.com the home of NetSearch
> -----Original Message-----
> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
> Sent: 22 June 2006 05:05
> To: java-user@lucene.apache.org
> Subject: Re: addIndexes() is taking infinite time ...
>
> No. I haven't tried. Today i can try it. One thing that i m thinking is
> that
> what role does the  file system plays here. I mean is there any
> difference
> on if i am doing indexing on FAT32 or i am on EXT3???
> i'll have to find it out....
> Can anybody put some light on this??
>
> With regards
>
> On 6/22/06, Daniel Noll <daniel@nuix.com.au> wrote:
> >
> > heritrix.lucene wrote:
> > > hi Otis,
> > > Now this time it took 10 Hr 34 Min. to merge the indexes. During
> merging
> > i
> > > noticed it was not completey using the CPU. I have 512MB RAM. and
> here i
> > > found it used upto the 256 MB.
> > >
> > > Are there some more possibilities to make it more fast ...
> >
> > Have you tested how fast the same process runs on different storage
> > devices?  It sounds like you're bound by IO, and perhaps finding ways
> to
> > speed up the storage (RAID striping?) would help speed things up.
> >
> > Daniel
> >
> > --
> > Daniel Noll
> >
> > Nuix Pty Ltd
> > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280
> 0699
> > Web: http://www.nuix.com.au/                        Fax: +61 2 9212
> 6902
> >
> > This message is intended only for the named recipient. If you are not
> > the intended recipient you are notified that disclosing, copying,
> > distributing or taking any action in reliance on the contents of this
> > message or attachment is strictly prohibited.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2056_24299708.1150963746723--

From java-user-return-21522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 08:11:54 2006
Return-Path: <java-user-return-21522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79894 invoked from network); 22 Jun 2006 08:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 08:11:54 -0000
Received: (qmail 49382 invoked by uid 500); 22 Jun 2006 08:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49360 invoked by uid 500); 22 Jun 2006 08:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49349 invoked by uid 99); 22 Jun 2006 08:11:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:11:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:11:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 44FEA5B77B; Thu, 22 Jun 2006 01:11:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 39E197F403
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 01:11:20 -0700 (PDT)
Date: Thu, 22 Jun 2006 01:11:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Phrase Frequency For Analysis
In-Reply-To: <200606220901.11543.paul.elschot@xs4all.nl>
Message-ID: <Pine.LNX.4.58.0606220108050.30753@hal.rescomp.berkeley.edu>
References: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com>
 <200606220901.11543.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > I am trying to get the most frequently occurring phrases in a document and
: > in the index as a whole.  The goal is compare the two to get something like
: > Amazon's SIPs.

: Other than indexing the phrases directly, you could use a SpanNearQuery
: over the words, use getSpans() on its SpanScorer and count the number
: of times next() on this Spans returns true.

I think either you missunderstood Nader's question or I did: I belive the
goal is to determine what the most frequently occuring phrases are -- not
determine how frequently a particular input phrase appears.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 08:20:33 2006
Return-Path: <java-user-return-21523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84374 invoked from network); 22 Jun 2006 08:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 08:18:21 -0000
Received: (qmail 63683 invoked by uid 500); 22 Jun 2006 08:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63629 invoked by uid 500); 22 Jun 2006 08:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63598 invoked by uid 99); 22 Jun 2006 08:17:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:17:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:17:55 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0B9E65B77B; Thu, 22 Jun 2006 01:17:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 02C187F403
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 01:17:35 -0700 (PDT)
Date: Thu, 22 Jun 2006 01:17:34 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: What is a "Lazy Field"...
In-Reply-To: <a36516400606212056k7fff509bre4b2499f9a378046@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0606220114160.30753@hal.rescomp.berkeley.edu>
References: <a36516400606212056k7fff509bre4b2499f9a378046@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Searching the mailing list archives can be helpful for understanding new
concepts like this; in particular this is something that has been
discussed on java-dev...

http://www.nabble.com/forum/Search.jtp?forum=44&local=y&query=Lazy+Field
http://www.nabble.com/Lazy-Field-Loading-t1362158.html#a3649945



: Date: Thu, 22 Jun 2006 09:26:36 +0530
: From: heritrix.lucene <heritrix.lucene@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: What is a "Lazy Field"...
:
: Hi,
: Can anybody please tell me what a "Lazy Field" is ???
: I noticed several time this term has come in discussion...
: With Regards,
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 08:21:12 2006
Return-Path: <java-user-return-21524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84792 invoked from network); 22 Jun 2006 08:20:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 08:20:34 -0000
Received: (qmail 66740 invoked by uid 500); 22 Jun 2006 08:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66709 invoked by uid 500); 22 Jun 2006 08:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66698 invoked by uid 99); 22 Jun 2006 08:20:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:20:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:20:06 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k5M8Jll05707
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 03:19:47 -0500
Message-ID: <449A52A5.8020805@getopt.org>
Date: Thu, 22 Jun 2006 10:19:49 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Phrase Frequency For Analysis
References: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com> <200606220901.11543.paul.elschot@xs4all.nl> <Pine.LNX.4.58.0606220108050.30753@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0606220108050.30753@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:
> I think either you missunderstood Nader's question or I did: I belive the
> goal is to determine what the most frequently occuring phrases are -- not
> determine how frequently a particular input phrase appears.
>   

Isn't the latter a pre-requisite for the former ? ;)

Regarding the subject: in many cases when I needed this information I 
used a brute-force method (traversing the term positions), and usually 
for moderately-sized indexes this was quick enough, i.e. in the order of 
minutes or hours. Of course, if you need something as quick as a search 
operation, this won't do.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 08:47:53 2006
Return-Path: <java-user-return-21525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93983 invoked from network); 22 Jun 2006 08:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 08:47:52 -0000
Received: (qmail 25189 invoked by uid 500); 22 Jun 2006 08:47:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25165 invoked by uid 500); 22 Jun 2006 08:47:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25154 invoked by uid 99); 22 Jun 2006 08:47:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:47:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:47:45 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn1.fre.skanova.net (7.2.072.1)
        id 4492E9660015FEBF for java-user@lucene.apache.org; Thu, 22 Jun 2006 10:47:23 +0200
Subject: Re: Modifying the stored norm type
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <200606211932.02935.paul.elschot@xs4all.nl>
References:
	 <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
	 <200606201801.01980.paul.elschot@xs4all.nl>
	 <1150884781.4882.113.camel@localhost>
	 <200606211932.02935.paul.elschot@xs4all.nl>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Thu, 22 Jun 2006 10:47:15 +0200
Message-Id: <1150966036.4882.226.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 2006-06-21 at 19:32 +0200, Paul Elschot wrote:
> 
> > TermDocs in reversed chronological order
> 
> There is no need to write extra code for that, the documents would be
> collected oldest first, newest last.
I tried to make a quick and dirty proof of concept, but noticed that no
matter what order TermDocs return the documents, the collector get
ascending document number order.

Just as you write.

What dictates the collected document order?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 08:55:20 2006
Return-Path: <java-user-return-21526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96540 invoked from network); 22 Jun 2006 08:55:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 08:55:19 -0000
Received: (qmail 40186 invoked by uid 500); 22 Jun 2006 08:55:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40112 invoked by uid 500); 22 Jun 2006 08:55:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40059 invoked by uid 99); 22 Jun 2006 08:55:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:55:10 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 01:55:08 -0700
Received: (qmail 12366 invoked by uid 509); 22 Jun 2006 10:54:43 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.094039 secs); 22 Jun 2006 08:54:43 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.094039 secs Process 12360)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 22 Jun 2006 10:54:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C695D9.7FEEF070"
Subject: SV: Modifying the stored norm type
Date: Thu, 22 Jun 2006 10:53:45 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C33B5F7@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <8834A84C87A2C148AD46921BB8BFC97C33B5F7@S1SE1MAIL.emea1.ad.group>
Thread-Topic: Modifying the stored norm type
Thread-Index: AcaVWLcoGv6KjvBlSSaZh7ZHg3qrrQAgKdlr
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C695D9.7FEEF070
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

But that doesn't solve my problem since I can't guarantee that articles =
are added in a special order to the index.
=20
How ever it seems to work nice using a float as norm value.
=20
/
Marcus

________________________________

Fr=E5n: Paul Elschot [mailto:paul.elschot@xs4all.nl]
Skickat: on 2006-06-21 19:32
Till: java-user@lucene.apache.org
=C4mne: Re: Modifying the stored norm type



On Wednesday 21 June 2006 12:13, karl wettin wrote:
> On Tue, 2006-06-20 at 18:01 +0200, Paul Elschot wrote:
> > On Tuesday 20 June 2006 12:02, Marcus Falck wrote:
>
> > encodeNorm method of the Similarity class will encode my boost value
> > into a single byte decimal number. And I will loose a lot of
> > resolution and will get severe rounding errors.
>
> > Are 256 different values enough for your case?
>
> Marcus is trying to use the norms to enforce results in chronological
> order when matching a TB-sized corpus. He can't get any speed by =
sorting
> on a date field.
>
> Here is an idea:
>
> Never delete documents. Use unsafe document number as system clock. =
Make

Deleting documents does not change the order of the remaining ones.

> sure TermDocs always return references in reversed chronological order

There is no need to write extra code for that, the documents would be
collected oldest first, newest last.

> and write a HitCollector that does not re-order.
>
> That should work, right?

In case you need oldest first, yes.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C695D9.7FEEF070
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C695D9.7FEEF070--

From java-user-return-21527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 12:57:43 2006
Return-Path: <java-user-return-21527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90967 invoked from network); 22 Jun 2006 12:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 12:57:42 -0000
Received: (qmail 94220 invoked by uid 500); 22 Jun 2006 12:57:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94192 invoked by uid 500); 22 Jun 2006 12:57:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94181 invoked by uid 99); 22 Jun 2006 12:57:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 05:57:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 05:57:35 -0700
Received: by py-out-1112.google.com with SMTP id 57so231009pya
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 05:57:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tWHtsGX0NlRvp3lZE6Pb62uYLZKuMgKBdwyLt7ATqYR/EviXTsT9xtrhOeRNuEhikr1BjFR7CcExzJ7tNrjcVm6GUrBxuOR6oBqzf9xna9bi0WK1Pbb0f5FN+NTcEW1hXFPnzMhNIzKKM9/+pwXGgIXtQLaUJfqWc8O6Vq4+1EM=
Received: by 10.35.101.9 with SMTP id d9mr1056047pym;
        Thu, 22 Jun 2006 05:57:15 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Thu, 22 Jun 2006 05:57:14 -0700 (PDT)
Message-ID: <359a92830606220557x409bf13eq59722892b26de524@mail.gmail.com>
Date: Thu, 22 Jun 2006 08:57:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: Search within multiple different subfolders
In-Reply-To: <449A4894.4080808@uni-hd.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8960_8695673.1150981034816"
References: <359a92830606200551s15c249ccq31f269486deb7578@mail.gmail.com>
	 <20060621055449.87796.qmail@web50409.mail.yahoo.com>
	 <359a92830606210617n1b6b0be3vcf0a28beb2c79c0f@mail.gmail.com>
	 <449A4894.4080808@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8960_8695673.1150981034816
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
>
>
> Perhaps for privacy reasons? that only specific users should be able to
> search the whole index.
> Is  there a best practice approach to realize this?
>
>
Good point. But I still think you could get the same effect with less
complexity by including a "source" tag (to extend the example) and munging
the query to AND in the source tags the user was authorized to see. Of
course I'm not writing the application and everything seems simpler from the
outside, so.....

The whole permissions thing is "interesting", as in "may you live in
interesting times" <G>... I'm sure the issue has been discussed in the
archive, but since it's not something I have to worry about I didn't track
it. You might try searching on "permissions" or similar in the archive...

------=_Part_8960_8695673.1150981034816--

From java-user-return-21528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 13:01:38 2006
Return-Path: <java-user-return-21528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92557 invoked from network); 22 Jun 2006 13:01:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 13:01:38 -0000
Received: (qmail 569 invoked by uid 500); 22 Jun 2006 13:01:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 439 invoked by uid 500); 22 Jun 2006 13:01:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 428 invoked by uid 99); 22 Jun 2006 13:01:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 06:01:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 06:01:30 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T7908aafb4c88ad3ee425d8@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Thu, 22 Jun 2006 15:01:05 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C695FB.EC3CFDE0"
Subject: Can't open index
Date: Thu, 22 Jun 2006 15:01:05 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A429A67C1@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Can't open index
Thread-Index: AcaV++uOu1QQW9P1R2ixjCY5+zTfBQ==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C695FB.EC3CFDE0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm creating my index file and in the same time I try to do some
searches inside.
Sometimes I retrieve this error message:
"\\tradluxstmp01\JavaIndex\tra\index_FR\_335.fnm (The system cannot find
the file specified)"
What I have to do or what's happen?

------_=_NextPart_001_01C695FB.EC3CFDE0--

From java-user-return-21529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 14:20:42 2006
Return-Path: <java-user-return-21529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25491 invoked from network); 22 Jun 2006 14:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 14:20:42 -0000
Received: (qmail 66904 invoked by uid 500); 22 Jun 2006 14:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66793 invoked by uid 500); 22 Jun 2006 14:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66740 invoked by uid 99); 22 Jun 2006 14:20:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 07:20:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 07:20:31 -0700
Received: by py-out-1112.google.com with SMTP id t32so320445pyc
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 07:20:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=X5dVkFifxFbkO5m210f8X8sQBXsbn0OirLwxJxbypJsonAzw4BXAMnBq6ADjTlqUZUqklyFjFKoIOuf3HL58JIOdrqTaFDWnuagln/botQKUfT6a4DvhpHNeCPRfOEKj8QGX7SNmLYfoUmrLx6OYo3uxkZlk380fiM67SiDUhOI=
Received: by 10.35.88.18 with SMTP id q18mr1143425pyl;
        Thu, 22 Jun 2006 07:20:10 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Thu, 22 Jun 2006 07:20:10 -0700 (PDT)
Message-ID: <c68e39170606220720p174fcc2ev33605368483ff9d9@mail.gmail.com>
Date: Thu, 22 Jun 2006 10:20:10 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying the stored norm type
In-Reply-To: <1150966036.4882.226.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8834A84C87A2C148AD46921BB8BFC97C01E15487@S1SE1MAIL.emea1.ad.group>
	 <200606201801.01980.paul.elschot@xs4all.nl>
	 <1150884781.4882.113.camel@localhost>
	 <200606211932.02935.paul.elschot@xs4all.nl>
	 <1150966036.4882.226.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/22/06, karl wettin <kalle@snigel.net> wrote:
> I tried to make a quick and dirty proof of concept, but noticed that no
> matter what order TermDocs return the documents, the collector get
> ascending document number order.

TermDocs should also always return documents in ascending order for a
single term (that's how they are stored internally).

> What dictates the collected document order?

The scorers, and a general agreement.  The older BooleanScorer did
some document re-arrangement, but still relied on every other Scorer
delivered documents in-order.
The new BooleanScorer2 (default since 1.9) delivers docs in order.
Going in document order makes the whole process of matching/scoring
efficient.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 14:49:40 2006
Return-Path: <java-user-return-21530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36197 invoked from network); 22 Jun 2006 14:49:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 14:49:40 -0000
Received: (qmail 72803 invoked by uid 500); 22 Jun 2006 14:49:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72700 invoked by uid 500); 22 Jun 2006 14:49:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72661 invoked by uid 99); 22 Jun 2006 14:49:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 07:49:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Lawrence@theladders.com designates 67.151.144.115 as permitted sender)
Received: from [67.151.144.115] (HELO hermes.laddersoffice.com) (67.151.144.115)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 07:49:23 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6960B.008AF056"
Subject: RE: Lucene and SIPs
Date: Thu, 22 Jun 2006 10:49:02 -0400
Message-ID: <15FC71D155A0F8429C3636B72C2ED52E19BF39@hermes.laddersoffice.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene and SIPs
thread-index: AcaVkL2nmor4fsAaRiKQdhu/TCSvswAeJFVA
From: "Larry Ogrodnek" <Lawrence@theladders.com>
To: "Nader Akhnoukh" <iamnader@gmail.com>
Cc: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6960B.008AF056
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I didn't make too much progress, and kind of ended up dropping it.

=20

One thing that I played with was creating multiple phrase indexes, one
each for 2, 3, 4, and 5 words.  I wrote a tokenizer that would batch up
the words, so, for the input string:

=20

The quick brown fox jumps over the slow lazy dog.

=20

The tokenizer for 3 words would return:

=20

The quick brown

Quick brown fox

Brown fox jumps

Fox jumps over

...

=20

This seemed like a reasonably start... the problem is resolving the
overlap for display, and figuring out which words are the most
important, e.g. if the above sentence itself was pretty rare, and you're
looking at the phrase-index-3, each one of its sub-phrases would end up
being significant.... Which one do you show?  Or do you combine them
into a longer phrase?  If so, where do you stop?

=20

It seemed like an easy first-approach to try out, but I'm not sure it's
even in the right direction...

=20

=20

=20

=20

________________________________

From: Nader Akhnoukh [mailto:iamnader@gmail.com]=20
Sent: Wednesday, June 21, 2006 8:14 PM
To: Larry Ogrodnek
Subject: Lucene and SIPs

=20

Hi Lawrence, I saw a posting to the Lucene group you made in February
concerning using Lucene to find SIPs.

Did you make any progress with this?  I'm able to find significant
single terms, but am stumped by phrases.=20

Thanks,
Nader


------_=_NextPart_001_01C6960B.008AF056--

From java-user-return-21531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 15:23:14 2006
Return-Path: <java-user-return-21531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55573 invoked from network); 22 Jun 2006 15:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 15:23:14 -0000
Received: (qmail 8762 invoked by uid 500); 22 Jun 2006 15:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8658 invoked by uid 500); 22 Jun 2006 15:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8613 invoked by uid 99); 22 Jun 2006 15:23:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:23:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:22:58 -0700
Received: by nf-out-0910.google.com with SMTP id m18so193498nfc
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 08:22:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nIkmtSz9jmtgZrlWrxI2E7Wf0OTsPYVFA6gNIyu4a0A8iSb2IDaXzqti72B1P8tRoSuAvaU5p5uXWN4un0zATC2H59jCu63+Wsot6QU4rZDSDBZXz8UPabCWbvYTSBp9kLHHWQJ0j13mXM04f9wIKVlG5O0O8lQ0aIblt7TSBmk=
Received: by 10.49.60.17 with SMTP id n17mr1499268nfk;
        Thu, 22 Jun 2006 08:22:37 -0700 (PDT)
Received: by 10.49.39.19 with HTTP; Thu, 22 Jun 2006 08:22:37 -0700 (PDT)
Message-ID: <8837fb770606220822r13e59919i8d4aee11b15ed396@mail.gmail.com>
Date: Thu, 22 Jun 2006 08:22:37 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HTML text extraction
In-Reply-To: <4499D86B.1000802@nuix.com.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9836_21461903.1150989757126"
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>
	 <4498DE89.1080901@nuix.com.au> <4498F1C8.4030006@wmin.ac.uk>
	 <4499D86B.1000802@nuix.com.au>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9836_21461903.1150989757126
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Xuefeng:

     Can you please send me your htmlparser too?

thanks

-John

On 6/21/06, Daniel Noll <daniel@nuix.com.au> wrote:
>
> Simon Courtenage wrote:
> > I also use htmlparser, which is rather good.  I've had to customize it,
> > though, to parse strings containing
> > html source rather than accept urls of resources to fetch etc.  Also it
> > crashes on meta tags that don't have
> > name attributes (something I discovered only a couple of days ago).
>
> Actually, it already accepts strings without modifying the library:
>
>     String htmlSource = "<html>...</html>";
>     Parser parser = new Parser(new Lexer(htmlSource));
>
> I will have to watch out for those meta tags though.  Time to go test it.
>
> Daniel
>
>
> --
> Daniel Noll
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9836_21461903.1150989757126--

From java-user-return-21532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 15:30:06 2006
Return-Path: <java-user-return-21532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59942 invoked from network); 22 Jun 2006 15:30:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 15:30:00 -0000
Received: (qmail 33179 invoked by uid 500); 22 Jun 2006 15:29:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33142 invoked by uid 500); 22 Jun 2006 15:29:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33125 invoked by uid 99); 22 Jun 2006 15:29:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:29:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.wechner@wyona.com designates 195.226.6.68 as permitted sender)
Received: from [195.226.6.68] (HELO mx1.wyona.com) (195.226.6.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:29:50 -0700
Received: from [195.226.6.66] (helo=[192.168.1.55])
	by mx1.wyona.com with asmtp (Exim 3.35 #1 (Debian))
	id 1FtR7X-0001ZK-00
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 17:29:27 +0200
Message-ID: <449AB766.6080207@wyona.com>
Date: Thu, 22 Jun 2006 17:29:42 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Thunderbird 1.5 (X11/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: HTML text extraction
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>	 <4498DE89.1080901@nuix.com.au> <4498F1C8.4030006@wmin.ac.uk>	 <4499D86B.1000802@nuix.com.au> <8837fb770606220822r13e59919i8d4aee11b15ed396@mail.gmail.com>
In-Reply-To: <8837fb770606220822r13e59919i8d4aee11b15ed396@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Wang wrote:
> Hi Xuefeng:
>
>     Can you please send me your htmlparser too?

Xuefeng, would it be possible to open source your parser?

Thanks

Michi
>
> thanks
>
> -John
>
> On 6/21/06, Daniel Noll <daniel@nuix.com.au> wrote:
>>
>> Simon Courtenage wrote:
>> > I also use htmlparser, which is rather good.  I've had to customize 
>> it,
>> > though, to parse strings containing
>> > html source rather than accept urls of resources to fetch etc.  
>> Also it
>> > crashes on meta tags that don't have
>> > name attributes (something I discovered only a couple of days ago).
>>
>> Actually, it already accepts strings without modifying the library:
>>
>>     String htmlSource = "<html>...</html>";
>>     Parser parser = new Parser(new Lexer(htmlSource));
>>
>> I will have to watch out for those meta tags though.  Time to go test 
>> it.
>>
>> Daniel
>>
>>
>> -- 
>> Daniel Noll
>>
>> Nuix Pty Ltd
>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
>> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>>
>> This message is intended only for the named recipient. If you are not
>> the intended recipient you are notified that disclosing, copying,
>> distributing or taking any action in reliance on the contents of this
>> message or attachment is strictly prohibited.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


-- 
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 15:54:18 2006
Return-Path: <java-user-return-21533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69564 invoked from network); 22 Jun 2006 15:54:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 15:54:17 -0000
Received: (qmail 98212 invoked by uid 500); 22 Jun 2006 15:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98185 invoked by uid 500); 22 Jun 2006 15:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98174 invoked by uid 99); 22 Jun 2006 15:54:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:54:10 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.100] (HELO web34102.mail.mud.yahoo.com) (66.163.178.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Jun 2006 08:54:09 -0700
Received: (qmail 590 invoked by uid 60001); 22 Jun 2006 15:53:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=FVNTM/gEFyIzzhzD/xgNXB8JwbwD7GFPjmJtav2Uls/sQVwqlhF+9aFge6L5s4OHVsgZU7bLfmA2UYwsDHCBIGjPP5FT7WzvLIpWkCawiNzrA3PWwFOjmz2ZrLq4G/HPXZN8960T6w0FJG6JkBhd/yvVZDvIH0dLC+YYZDkkEhU=  ;
Message-ID: <20060622155347.588.qmail@web34102.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34102.mail.mud.yahoo.com via HTTP; Thu, 22 Jun 2006 08:53:46 PDT
Date: Thu, 22 Jun 2006 08:53:46 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: Re: Can't open index
To: java-user@lucene.apache.org
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A429A67C1@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Thomas,

It looks like your index file(s) are being stored on a
remote file system. Is it possible that the network
connection fails sometimes during your
indexing/searching operation?

If that's not the issue, you mention that you're
creating your index file at the same time that you're
searching it. That's ok, but you can only have one
IndexWriter and one IndexReader accessing the same
index concurrently.

In addition if you're using an IndexReader to delete
documents from an index, you need to close that
IndexReader before opening a new IndexWriter with that
index. The reverse also holds true i.e. if you have an
IndexWriter that is open you need to close it before
opening up a new IndexReader on the same index.

If you're doing a lot of opening/closing of Readers
and Writers maybe it's possible that some
merge/optimizations are taking place during the
indexing process that cause a file not found error?

JAMES

--- WATHELET Thomas
<thomas.wathelet@europarl.europa.eu> wrote:

> I'm creating my index file and in the same time I
> try to do some
> searches inside.
> Sometimes I retrieve this error message:
> "\\tradluxstmp01\JavaIndex\tra\index_FR\_335.fnm
> (The system cannot find
> the file specified)"
> What I have to do or what's happen?
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 15:54:57 2006
Return-Path: <java-user-return-21534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69722 invoked from network); 22 Jun 2006 15:54:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 15:54:56 -0000
Received: (qmail 2244 invoked by uid 500); 22 Jun 2006 15:54:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2206 invoked by uid 500); 22 Jun 2006 15:54:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2191 invoked by uid 99); 22 Jun 2006 15:54:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:54:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sfryxell@real.com designates 207.188.23.4 as permitted sender)
Received: from [207.188.23.4] (HELO kal-el.real.com) (207.188.23.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 08:54:48 -0700
Received: from [10.0.1.3] ([::ffff:66.92.0.66])
  (AUTH: PLAIN sfryxell, TLS: TLSv1/SSLv3,128bits,RC4-SHA)
  by kal-el.real.com with esmtp; Thu, 22 Jun 2006 08:54:24 -0700
  id 0007C0AE.449ABD30.00001FDB
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <449AB766.6080207@wyona.com>
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>	 <4498DE89.1080901@nuix.com.au> <4498F1C8.4030006@wmin.ac.uk>	 <4499D86B.1000802@nuix.com.au> <8837fb770606220822r13e59919i8d4aee11b15ed396@mail.gmail.com> <449AB766.6080207@wyona.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <836E7946-6AC0-4958-BF6F-FF1F3918BF51@real.com>
Content-Transfer-Encoding: 7bit
From: sfryxell <sfryxell@real.com>
Subject: lucene and maven2
Date: Thu, 22 Jun 2006 08:52:56 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

what up g.

trying to use the lucene-core.2.0.0.jar that is in the maven  
repository at

http://www.ibiblio.org/maven2/org/apache/lucene/lucene-core/2.0.0/

my classes won't compile against this jar as it doesn't contain any  
class files. there is a pom in the manifest directory.

was this intentional? is there some magical way to use an empty jar  
with a pom file in maven? all the other jars i've pulled off there  
have class files in them.

anyway, thought i'd point this out before i assumed this was a  
mistake and  stuck the regular jar  in my local repository.

thanks
Scott.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 16:17:43 2006
Return-Path: <java-user-return-21535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77689 invoked from network); 22 Jun 2006 16:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 16:17:42 -0000
Received: (qmail 55844 invoked by uid 500); 22 Jun 2006 16:17:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55722 invoked by uid 500); 22 Jun 2006 16:17:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55664 invoked by uid 99); 22 Jun 2006 16:17:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 09:17:31 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Jun 2006 09:17:26 -0700
Received: (qmail 79051 invoked by uid 60001); 22 Jun 2006 16:17:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=0BNKgqxyaVO3K1iFB2qiolChDJagOJQDIzzBd+UQqN8RgziM8aT8AgINBxZuoMHA3doPV5TmzrJdzKdUNOGxp9bwpLHeRyti/yQdaWHn0IMmAElmmRU8YbXYO0WLZFTQGY/pEZzVMEs94sAF2r2nbHlGnNxULMRwXqZmsr9+l1M=  ;
Message-ID: <20060622161705.79049.qmail@web50312.mail.yahoo.com>
Received: from [72.229.167.99] by web50312.mail.yahoo.com via HTTP; Thu, 22 Jun 2006 09:17:05 PDT
Date: Thu, 22 Jun 2006 09:17:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: addIndexes() is taking infinite time ...
To: java-user@lucene.apache.org
In-Reply-To: <a36516400606220109s159ca40fxdffaaf9aeb1d9d5d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It can't be ignored.  But look in JIRA, I believe there is a patch there that changes the code so that two optimize() calls are not needed.  If that works for you, please let us know.

Otis

----- Original Message ----
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, June 22, 2006 4:09:06 AM
Subject: Re: addIndexes() is taking infinite time ...

so how it can be ignored ??


On 6/22/06, Mike Streeton <mike.streeton@ardentia.co.uk> wrote:
>
> From memory addIndexes() also does and optimization before hand, this
> might be what is taking the time.
>
> Mike
>
> www.ardentia.com the home of NetSearch
> -----Original Message-----
> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
> Sent: 22 June 2006 05:05
> To: java-user@lucene.apache.org
> Subject: Re: addIndexes() is taking infinite time ...
>
> No. I haven't tried. Today i can try it. One thing that i m thinking is
> that
> what role does the  file system plays here. I mean is there any
> difference
> on if i am doing indexing on FAT32 or i am on EXT3???
> i'll have to find it out....
> Can anybody put some light on this??
>
> With regards
>
> On 6/22/06, Daniel Noll <daniel@nuix.com.au> wrote:
> >
> > heritrix.lucene wrote:
> > > hi Otis,
> > > Now this time it took 10 Hr 34 Min. to merge the indexes. During
> merging
> > i
> > > noticed it was not completey using the CPU. I have 512MB RAM. and
> here i
> > > found it used upto the 256 MB.
> > >
> > > Are there some more possibilities to make it more fast ...
> >
> > Have you tested how fast the same process runs on different storage
> > devices?  It sounds like you're bound by IO, and perhaps finding ways
> to
> > speed up the storage (RAID striping?) would help speed things up.
> >
> > Daniel
> >
> > --
> > Daniel Noll
> >
> > Nuix Pty Ltd
> > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280
> 0699
> > Web: http://www.nuix.com.au/                        Fax: +61 2 9212
> 6902
> >
> > This message is intended only for the named recipient. If you are not
> > the intended recipient you are notified that disclosing, copying,
> > distributing or taking any action in reliance on the contents of this
> > message or attachment is strictly prohibited.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 16:20:48 2006
Return-Path: <java-user-return-21536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78255 invoked from network); 22 Jun 2006 16:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 16:20:48 -0000
Received: (qmail 62899 invoked by uid 500); 22 Jun 2006 16:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62871 invoked by uid 500); 22 Jun 2006 16:20:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62860 invoked by uid 99); 22 Jun 2006 16:20:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 09:20:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 09:20:40 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1FtRuW-0005wl-22
	for java-user@lucene.apache.org; Thu, 22 Jun 2006 18:20:04 +0200
Received: from toronto-hse-ppp4156705.sympatico.ca ([70.51.127.189])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 18:20:04 +0200
Received: from jonathan.taylor by toronto-hse-ppp4156705.sympatico.ca with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 18:20:04 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Jonathan Taylor <jonathan.taylor@utoronto.ca>
Subject:  Restricting search space to a large number of ids
Date:  Thu, 22 Jun 2006 12:14:13 -0400
Lines: 13
Message-ID:  <pan.2006.06.22.16.14.13.531743@utoronto.ca>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: toronto-hse-ppp4156705.sympatico.ca
User-Agent: Pan/0.14.2.91 (As She Crawled Across the Table (Debian GNU/Linux))
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have an index of 3 million documents.  Document id is stored but not
indexed and document contents is indexed but not stored.

Searches are quite slow, but for each document I have a list of 50,000 or
so relevent documents.  I would like lucene to only search in these?  I
can see I can restrict search to a single id using a filter, but it looks
like I will have to use 50,000 filter objects.  Something tells me this
will make things slower, rather than better.

Will this work?... Any ideas?
Jon.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 17:26:28 2006
Return-Path: <java-user-return-21537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7815 invoked from network); 22 Jun 2006 17:26:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 17:26:28 -0000
Received: (qmail 21595 invoked by uid 500); 22 Jun 2006 17:26:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21567 invoked by uid 500); 22 Jun 2006 17:26:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21556 invoked by uid 99); 22 Jun 2006 17:26:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 10:26:20 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of iamnader@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 10:26:20 -0700
Received: by nz-out-0102.google.com with SMTP id i28so497675nzi
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 10:25:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Dp7HzGgr0B5bRt5h5j7G0Cn4PHoMEFn7+nojRRJvmCd5KktYDyWeuTWI4zHbC7TQCIalOpga+LghaEmDxTUbgIJ0xFizIPb/38PeM2IOiVJpPsyfqbaw7TrnXDJdFpYmIbC3kmEktJV+NIBdV9KskVBly3u+iXxmMkL1Gq/ayIo=
Received: by 10.64.47.19 with SMTP id u19mr1690239qbu;
        Thu, 22 Jun 2006 10:25:59 -0700 (PDT)
Received: by 10.65.84.2 with HTTP; Thu, 22 Jun 2006 10:25:59 -0700 (PDT)
Message-ID: <a7f272fa0606221025s3f3b5ef5t3702d5225d7f793a@mail.gmail.com>
Date: Thu, 22 Jun 2006 10:25:59 -0700
From: "Nader Akhnoukh" <iamnader@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase Frequency For Analysis
In-Reply-To: <449A52A5.8020805@getopt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6284_27539512.1150997159400"
References: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com>
	 <200606220901.11543.paul.elschot@xs4all.nl>
	 <Pine.LNX.4.58.0606220108050.30753@hal.rescomp.berkeley.edu>
	 <449A52A5.8020805@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6284_27539512.1150997159400
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, Chris is correct, the goal is to determine the most frequently occuring
phrases in a document compared to the frequency of that phrase in the
index.  So there are only output phrases, no inputs.

Also performance is not really an issue, this would take place on an
irregular basis and could run overnight if need be.

So it sounds like the best approach would be to index all 1, 2, and 3 word
phrases.  Does anyone know of an Analyzer that does this?  And if I can
successfully index the phrases would the term frequency vector contain all
the combination of phrases as terms along with their frequencies?

Andrzej,  can you discuss your approach in a little more detail.  Are you
suggesting manually traversing each document and doing a search on each
phrase?  That seems very intensive as I have tens of thousands of documents.

Thanks.

------=_Part_6284_27539512.1150997159400--

From java-user-return-21538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 17:56:10 2006
Return-Path: <java-user-return-21538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42949 invoked from network); 22 Jun 2006 17:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 17:56:10 -0000
Received: (qmail 13429 invoked by uid 500); 22 Jun 2006 17:56:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13407 invoked by uid 500); 22 Jun 2006 17:56:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13396 invoked by uid 99); 22 Jun 2006 17:56:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 10:56:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.178.22.82] (HELO smtp-newskies.aub.edu.lb) (66.178.22.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 10:56:01 -0700
Received: from [193.188.129.122] (helo=nemo.aub.edu.lb)
	by smtp-newskies.aub.edu.lb with esmtp (Exim 4.51)
	id 1FtTOx-0004JT-Tl
	for java-user@lucene.apache.org; Thu, 22 Jun 2006 20:55:35 +0300
Received: from [127.0.0.1] (helo=localhost)
	by nemo.aub.edu.lb with esmtp (Exim 4.54)
	id 1FtTOx-0005Qk-QR
	for java-user@lucene.apache.org; Thu, 22 Jun 2006 20:55:35 +0300
Received: from 192.168.192.207 ([192.168.192.207]) 
	by imail.aub.edu.lb (IMP) with HTTP 
	for <kaa28@pop.students.aub.edu.lb>; Thu, 22 Jun 2006 20:55:35 +0300
Message-ID: <1150998935.449ad997bdb9e@imail.aub.edu.lb>
Date: Thu, 22 Jun 2006 20:55:35 +0300
From: Kamal Abou Mikhael <kaa28@aub.edu.lb>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Phrase Frequency For Analysis
References: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com>  <200606220901.11543.paul.elschot@xs4all.nl>  <Pine.LNX.4.58.0606220108050.30753@hal.rescomp.berkeley.edu>  <449A52A5.8020805@getopt.org> <a7f272fa0606221025s3f3b5ef5t3702d5225d7f793a@mail.gmail.com>
In-Reply-To: <a7f272fa0606221025s3f3b5ef5t3702d5225d7f793a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="-MOQ1150998935932f2d9ddf1750064f522ffe1c079c93"
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Originating-IP: 192.168.192.207
X-Antivirus-Scanner: Clean mail though you should still use an Antivirus
X-AUBnet-Receipt: nemo.aub.edu.lb at 2006-06-22 20:55:35
X-AUBnet-Osender: kaa28@aub.edu.lb
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

---MOQ1150998935932f2d9ddf1750064f522ffe1c079c93
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

I may be coming into this thread without knowing enough.  I have implemented a
phrase filter, which indexes all token sequences that are 2 to N tokens long.
The n is defined in the constructor.

It takes a stopword Trie for input because the policy I used, based on a publish
work I read, was that a phrase should neither begin nor end with a stopword.
This is immaterial as one can simply provide a trie with nothing in it.

The Trie structure is found at http://www.graphbuilder.com/trie/
The SWPhraseFilter.java file is attached and is self explanatory.

I do believe that if you change the condition on linke 67 of phraseTerms.size()
> 1 to phraseTerms.size() > 0, you may get the result you need.  Sorry, I do
not have the time to test this out.

I have also included TriePhraseFilter.java.  When I indexed all the possible
phrases, I went back and dumped the ones that occured in more than 25 docs into
a file (this turned out to be about 2% of all candidates), then I placed these
in a Trie and reindexed the documents.

So I used this TriePhraseFilter to recognize the phrases I dumped into the file.
 The requirement of them being in 25 documents is also in the paper I that I
read about phrase indexing.

By the way, I am 90 percent certain of the TriePhraseFilter code.

Best Regards,
Kamal Abou Mikhael


Quoting Nader Akhnoukh <iamnader@gmail.com>:

> Yes, Chris is correct, the goal is to determine the most frequently occuring
> phrases in a document compared to the frequency of that phrase in the
> index.  So there are only output phrases, no inputs.
>
> Also performance is not really an issue, this would take place on an
> irregular basis and could run overnight if need be.
>
> So it sounds like the best approach would be to index all 1, 2, and 3 word
> phrases.  Does anyone know of an Analyzer that does this?  And if I can
> successfully index the phrases would the term frequency vector contain all
> the combination of phrases as terms along with their frequencies?
>
> Andrzej,  can you discuss your approach in a little more detail.  Are you
> suggesting manually traversing each document and doing a search on each
> phrase?  That seems very intensive as I have tens of thousands of documents.
>
> Thanks.
>


---MOQ1150998935932f2d9ddf1750064f522ffe1c079c93
Content-Type: text/x-java; name="SWPhraseFilter.java"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="SWPhraseFilter.java"

cGFja2FnZSBhbmFseXNpczsKCmltcG9ydCBzdGVtLio7CmltcG9ydCBqYXZhLnV0aWwuVmVjdG9y
OwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGNvbS5ncmFwaGJ1aWxkZXIuc3Ry
dWMuKjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4Lio7CmltcG9ydCBvcmcuYXBhY2hl
Lmx1Y2VuZS5hbmFseXNpcy4qOwoKcHVibGljIGNsYXNzIFNXUGhyYXNlRmlsdGVyIGV4dGVuZHMg
VG9rZW5GaWx0ZXIgewoKCXByaXZhdGUgZmluYWwgc3RhdGljIFN0cmluZyBTUEFDRSA9ICIgIjsK
CglwdWJsaWMgU1dQaHJhc2VGaWx0ZXIoVG9rZW5TdHJlYW0gdG9rZW5TdHJlYW0sIFRyaWUgc3Rv
cHdvcmRzLCBpbnQgbGVuZ3RoKSB7CgkJc3VwZXIodG9rZW5TdHJlYW0pOwoJCXRoaXMuc3RvcHdv
cmRzID0gc3RvcHdvcmRzOwoJCXRoaXMubGVuZ3RoID0gbGVuZ3RoOwoJCXRoaXMub3V0cHV0TW9k
ZSA9IGZhbHNlOwoJCXRoaXMud2luZG93UG9zaXRpb24gPSAwOwoJCXRoaXMucGhyYXNlVGVybXMg
PSBuZXcgVmVjdG9yKGxlbmd0aCk7CgkJdGhpcy5jYW5kaWRhdGUgPSBuZXcgU3RyaW5nQnVmZmVy
KDMyICogbGVuZ3RoKTsKCX0KCglwdWJsaWMgZmluYWwgVG9rZW4gbmV4dCgpIHRocm93cyBJT0V4
Y2VwdGlvbiB7CgoJCVRva2VuIHQgPSBudWxsOwoJCVRva2VuIHJlc3VsdCA9IG51bGw7CgkJYm9v
bGVhbiBkb25lID0gZmFsc2U7CgoJCXdoaWxlICghZG9uZSkgewoKCQkJLy9TaGlmdCB0aGUgd2lu
ZG93IG92ZXIgaWYgaXQgaGFzIGJlZW4gZnVsbHkgaW5zcGVjdGVkLgoJCQlpZiAod2luZG93UG9z
aXRpb24gPj0gbGVuZ3RoKSB7CgkJCQlwaHJhc2VUZXJtcy5yZW1vdmUoMCk7CgkJCQkvL2NhbmRp
ZGF0ZS5kZWxldGUoMCwgY2FuZGlkYXRlLmluZGV4T2YoU1BBQ0UpKzEpOwoJCQkJd2luZG93UG9z
aXRpb24gPSAwOwoJCQl9CgoJCQkvL0tlZXAgdGhlIHdpbmRvdyBmdWxsLgoJCQlpZiAocGhyYXNl
VGVybXMuc2l6ZSgpIDwgbGVuZ3RoKSB7CgkJCQl0ID0gaW5wdXQubmV4dCgpOyAKCQkJCWlmICh0
ICE9IG51bGwpIHsKCQkJCQlwaHJhc2VUZXJtcy5hZGQodCk7CgkJCQkJU3RyaW5nIHRUZXh0ID0g
dC50ZXJtVGV4dCgpOwoJCQkJCS8vY2FuZGlkYXRlLmFwcGVuZCh0VGV4dCk7CgkJCQkJLy9jYW5k
aWRhdGUuYXBwZW5kKFNQQUNFKTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGxlbmd0aCA9PSAxKSB7
CgkJCQkJCWRvbmUgPSB0cnVlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXdpbmRvd1Bvc2l0aW9uID0g
MDsKCQkJCQkJbGVuZ3RoID0gbGVuZ3RoIC0gMTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCWlmICgh
ZG9uZSkgewoJCQkJaWYgKHBocmFzZVRlcm1zLnNpemUoKSA+IDApIHsKCQkJCQkvL1NoaWZ0IHRo
ZSB3aW5kb3cgb3ZlciBpZiB0aGUgZmlyc3QgdG9rZW4gaXMgYSBzdG9wd29yZC4KCQkJCQlTdHJp
bmcgZmlyc3RUZXJtID0gKChUb2tlbikgcGhyYXNlVGVybXMuZWxlbWVudEF0KDApKS50ZXJtVGV4
dCgpOwoJCQkJCWlmIChzdG9wd29yZHMuY29udGFpbnMoZmlyc3RUZXJtKSkgewoJCQkJCQlwaHJh
c2VUZXJtcy5yZW1vdmUoMCk7CgkJCQkJCS8vY2FuZGlkYXRlLmRlbGV0ZSgwLCBjYW5kaWRhdGUu
aW5kZXhPZihTUEFDRSkrMSk7CgkJCQkJCXdpbmRvd1Bvc2l0aW9uID0gMDsKCQkJCQl9IGVsc2Ug
ewoJCQkJCQkvL0xvb2sgZm9yIGEgcGhyYXNlICh3aW5kb3cgY29uc2lzdGluZyBvZiBtb3JlIHRo
YW4gb25lIHRlcm0pLgoJCQkJCQlpZiAocGhyYXNlVGVybXMuc2l6ZSgpID4gMSAmJiB3aW5kb3dQ
b3NpdGlvbiA+IDApIHsKCQkJCQkJCVN0cmluZyBjdXJyZW50VGVybSA9ICgoVG9rZW4pIHBocmFz
ZVRlcm1zLmVsZW1lbnRBdCh3aW5kb3dQb3NpdGlvbikpLnRlcm1UZXh0KCk7CgkJCQkJCQkvL01h
a2Ugc3VyZSB0aGUgcGhyYXNlIGRvZXMgbm90IGVuZCBpbiBhIHN0b3B3b3JkLgoJCQkJCQkJaWYg
KCFzdG9wd29yZHMuY29udGFpbnMoY3VycmVudFRlcm0pKSB7CgkJCQkJCQkJZG9uZSA9IHRydWU7
CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJd2luZG93UG9zaXRpb24gPSB3aW5kb3dQb3NpdGlvbiAr
IDE7CgkJCQkJfSAKCQkJCX0gZWxzZSB7CgkJCQkJZG9uZSA9IHRydWU7CgkJCQl9CgkJCX0KCQl9
CgoJCWlmIChkb25lKSB7CgkJCWNhbmRpZGF0ZS5kZWxldGUoMCwgY2FuZGlkYXRlLmxlbmd0aCgp
KTsKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCB3aW5kb3dQb3NpdGlvbjsgaSA9IGkgKyAxKSB7CgkJ
CQlUb2tlbiB4ID0gKFRva2VuKSBwaHJhc2VUZXJtcy5lbGVtZW50QXQoaSk7CgkJCQljYW5kaWRh
dGUuYXBwZW5kKHgudGVybVRleHQoKSk7CgkJCQljYW5kaWRhdGUuYXBwZW5kKFNQQUNFKTsKCQkJ
fQoJCQlpZiAoY2FuZGlkYXRlLmxlbmd0aCgpID4gMCkgewoJCQkJU3RyaW5nIHRleHQgPSBjYW5k
aWRhdGUuc3Vic3RyaW5nKDAsIGNhbmRpZGF0ZS5sZW5ndGgoKSAtIDEpOwoJCQkJLy8JCQlTeXN0
ZW0ub3V0LnByaW50bG4od2luZG93UG9zaXRpb24gKyAiICIgKyB0ZXh0KTsKCQkJCWludCBzdGFy
dCA9ICgoVG9rZW4pcGhyYXNlVGVybXMuZWxlbWVudEF0KDApKS5zdGFydE9mZnNldCgpOwoJCQkJ
aW50IGVuZCAgID0gKChUb2tlbilwaHJhc2VUZXJtcy5lbGVtZW50QXQocGhyYXNlVGVybXMuc2l6
ZSgpLTEpKS5lbmRPZmZzZXQoKTsKCQkJCXJlc3VsdCA9IG5ldyBUb2tlbih0ZXh0LHN0YXJ0LGVu
ZCwicGhyYXNlIik7CgkJCX0KCQl9CgoJCXJldHVybiByZXN1bHQ7Cgl9CgoJcHJpdmF0ZSBpbnQg
bGVuZ3RoOwoJcHJpdmF0ZSBmaW5hbCBUcmllIHN0b3B3b3JkczsKCXByaXZhdGUgZmluYWwgU3Ry
aW5nQnVmZmVyIGNhbmRpZGF0ZTsKCglwcml2YXRlIGJvb2xlYW4gb3V0cHV0TW9kZTsKCXByaXZh
dGUgaW50IHdpbmRvd1Bvc2l0aW9uOwoJcHJpdmF0ZSBWZWN0b3IgcGhyYXNlVGVybXM7Cn0K

---MOQ1150998935932f2d9ddf1750064f522ffe1c079c93
Content-Type: text/x-java; name="TriePhraseFilter.java"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="TriePhraseFilter.java"

cGFja2FnZSBhbmFseXNpczsKCmltcG9ydCBzdGVtLio7CmltcG9ydCBqYXZhLnV0aWwuVmVjdG9y
OwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGNvbS5ncmFwaGJ1aWxkZXIuc3Ry
dWMuKjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4Lio7CmltcG9ydCBvcmcuYXBhY2hl
Lmx1Y2VuZS5hbmFseXNpcy4qOwoKcHVibGljIGNsYXNzIFRyaWVQaHJhc2VGaWx0ZXIgZXh0ZW5k
cyBUb2tlbkZpbHRlciB7CgoJcHJpdmF0ZSBmaW5hbCBzdGF0aWMgU3RyaW5nIFNQQUNFID0gIiAi
OwoKCXB1YmxpYyBUcmllUGhyYXNlRmlsdGVyKFRva2VuU3RyZWFtIHRva2VuU3RyZWFtLCBUcmll
IHBocmFzZXMpIHsKCQlzdXBlcih0b2tlblN0cmVhbSk7CgkJdGhpcy5waHJhc2VzID0gcGhyYXNl
czsKCQl0aGlzLmNhbmRpZGF0ZVNCID0gbmV3IFN0cmluZ0J1ZmZlcigyNTYpOwoJCXRoaXMud2Fp
dGluZ1Rva2VucyA9IG5ldyBWZWN0b3IoNyk7CgkJdGhpcy5jYW5kaWRhdGVUb2tlbnMgPSBuZXcg
VmVjdG9yKDcpOwoJfQoKCXB1YmxpYyBmaW5hbCBUb2tlbiBuZXh0KCkgdGhyb3dzIElPRXhjZXB0
aW9uIHsKCgkJVG9rZW4gdCA9IG51bGw7CgkJVG9rZW4gcmVzdWx0ID0gbnVsbDsKCQlib29sZWFu
IGRvbmUgPSBmYWxzZTsKCgkJLy9VbnRpbCBjYW5kaWRhdGUgcGhyYXNlIGlzIG5vdCBpbiB0aGUg
dHJpZQoJCQkvL1Rha2UgYSB0b2tlbiAoZWl0aGVyIGZyb20gaW5wdXQgb3IgZnJvbSB3YWl0aW5n
IGxpc3QpCgkJCS8vQ2hlY2sgaWYgaXQgaXMgaW4gdGhlIHRyaWUgKHVzZSB0aGUgaGFzUHJlZml4
KCkgKQoJCQkvL0lmIHNvLCB0aGVuIGFkZCBpdCB0byB0aGUgY3VycmVudCBwaHJhc2UKCQl3aGls
ZSAoIWRvbmUgJiYgKCh0ID0gZ2V0TmV4dCgpKSAhPSBudWxsKSkgewoJCQljYW5kaWRhdGVTQi5h
cHBlbmQodC50ZXJtVGV4dCgpKTsKCQkJY2FuZGlkYXRlU0IuYXBwZW5kKFNQQUNFKTsKCQkJY2Fu
ZGlkYXRlVG9rZW5zLmFkZCh0KTsKCQkJU3RyaW5nIHRleHQgPSBjYW5kaWRhdGVTQi50b1N0cmlu
ZygpLnN1YnN0cmluZygwLCBjYW5kaWRhdGVTQi5sZW5ndGgoKSk7CgkJCS8vU3lzdGVtLm91dC5w
cmludGxuKCIgYyAiICsgdGV4dCk7CgkJCWRvbmUgPSAhcGhyYXNlcy5oYXNQcmVmaXgodGV4dCk7
CgkJfQoKCQlpbnQgY2FuZGlkYXRlTGVuZ3RoID0gY2FuZGlkYXRlU0IubGVuZ3RoKCk7CgkJaWYg
KGNhbmRpZGF0ZUxlbmd0aCA+IDAgJiYgCgkJCShjYW5kaWRhdGVTQi5sYXN0SW5kZXhPZihTUEFD
RSkgPT0gY2FuZGlkYXRlTGVuZ3RoIC0gMSkpIHsKCQkJY2FuZGlkYXRlU0IuZGVsZXRlQ2hhckF0
KGNhbmRpZGF0ZUxlbmd0aCAtIDEpOwoJCX0KCgkJLy9VbnRpbCBjYW5kaWRhdGUgcGhyYXNlIGVs
ZW1lbnRzIGFyZSBub3QgYSBwaHJhc2UgKHVzaW5nIGNvbnRhaW5zKCkgKQoJCQkvL1B1dCBsYXN0
IHRva2VuIGluIGNhbmRpZGF0ZSBwaHJhc2Ugb24gd2FpdGluZyBsaXN0CgkJCS8vTm90ZTogTW9z
dCBvZiB0aGUgdGltZSwgaXQgbWF5IGJlIHRoYXQgb25seSB0aGUgbGFzdCBlbGVtZW50IAoJCQkv
LyAgICAgIHRoYXQgcHJldmVudHMgaXQgZnJvbSBiZWluZyBhIHBocmFzZS4KCQkJLy8gICAgICBI
b3dldmVyLCBpdCBtYXkgYmUgdGhhdCBjYXNlIHRoYXQgbW9yZSB0aGFuIG9uZSBlbGVtZW50CiAg
ICAgICAgICAgIC8vICAgICAgZm9ybSBhIHByZWZpeCB0aGF0IGRvZXMgbm90IGV4aXN0IGFzIGEg
cGhyYXNlIGluIGl0c2VsZi4KCQlpbnQgaW5zZXJ0aW9uUG9pbnQgPSB3YWl0aW5nVG9rZW5zLnNp
emUoKTsKCQl3aGlsZSAoY2FuZGlkYXRlU0IubGVuZ3RoKCkgPiAwICYmCgkJCQkhcGhyYXNlcy5j
b250YWlucyhjYW5kaWRhdGVTQi50b1N0cmluZygpLnN1YnN0cmluZygwLCBjYW5kaWRhdGVTQi5s
ZW5ndGgoKSkpKSB7CgoJCQlpbnQgZW5kID0gY2FuZGlkYXRlVG9rZW5zLnNpemUoKSAtIDE7CgoJ
CQl3YWl0aW5nVG9rZW5zLmluc2VydEVsZW1lbnRBdChjYW5kaWRhdGVUb2tlbnMucmVtb3ZlKGVu
ZCksIGluc2VydGlvblBvaW50KTsKCgkJCWludCBzcGFjZUluZGV4ID0gY2FuZGlkYXRlU0IubGFz
dEluZGV4T2YoU1BBQ0UpOwoJCQlpZiAoc3BhY2VJbmRleCA9PSAtMSkgewoJCQkJY2FuZGlkYXRl
U0IuZGVsZXRlKDAsIGNhbmRpZGF0ZVNCLmxlbmd0aCgpKTsKCQkJfSBlbHNlIHsKCQkJCWNhbmRp
ZGF0ZVNCLmRlbGV0ZShzcGFjZUluZGV4LCBjYW5kaWRhdGVTQi5sZW5ndGgoKSk7CgkJCX0KCgkJ
CWlmIChjYW5kaWRhdGVTQi5sZW5ndGgoKSA+IDApIHsKCQkJCVN0cmluZyB0ZXh0ID0gY2FuZGlk
YXRlU0IudG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgY2FuZGlkYXRlU0IubGVuZ3RoKCkpOwoJCQkJ
Ly9TeXN0ZW0ub3V0LnByaW50bG4oIm5jICIgKyB0ZXh0KTsKCQkJfQoJCX0KCgkJLy9JZiBjYW5k
aWRhdGUgcGhyYXNlIGhhcyBzdXJ2aXZlZCBwYXNzIGl0IG9uIGFzIHRoZSByZXN1bHQKCQkvL090
aGVyd2lzZSBwYXNzIG9uIGZpcnN0IHRva2VuIG9uIHRoZSB3YWl0aW5nIGxpc3QgYXMgdGhlIHJl
c3VsdAoJCWlmIChjYW5kaWRhdGVTQi5sZW5ndGgoKSA+IDApIHsKCQkJVG9rZW4gZmlyc3QgPSAo
VG9rZW4pIGNhbmRpZGF0ZVRva2Vucy5maXJzdEVsZW1lbnQoKTsKCQkJVG9rZW4gbGFzdCAgPSAo
VG9rZW4pIGNhbmRpZGF0ZVRva2Vucy5sYXN0RWxlbWVudCgpOwoJCQlTdHJpbmcgdGV4dCA9IGNh
bmRpZGF0ZVNCLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsIGNhbmRpZGF0ZVNCLmxlbmd0aCgpKTsK
CQkJcmVzdWx0ID0gbmV3IFRva2VuKHRleHQsIGZpcnN0LnN0YXJ0T2Zmc2V0KCksIGxhc3QuZW5k
T2Zmc2V0KCksICJwaHJhc2UiKTsKCQkJY2FuZGlkYXRlU0IuZGVsZXRlKDAsY2FuZGlkYXRlU0Iu
bGVuZ3RoKCkpOwoJCQljYW5kaWRhdGVUb2tlbnMuY2xlYXIoKTsKCQkJLy9TeXN0ZW0ub3V0LnBy
aW50bG4oInBocmFzZSA6ICIgKyB0ZXh0ICsgIiAiICsgcmVzdWx0LnN0YXJ0T2Zmc2V0KCkgKyAi
ICIgKyByZXN1bHQuZW5kT2Zmc2V0KCkpOwoJCX0gZWxzZSBpZiAoIXdhaXRpbmdUb2tlbnMuaXNF
bXB0eSgpKSB7CgkJCXJlc3VsdCA9IChUb2tlbikgd2FpdGluZ1Rva2Vucy5yZW1vdmUoMCk7CgkJ
CS8vU3lzdGVtLm91dC5wcmludGxuKCJ3b3JkICAgOiAiICsgcmVzdWx0LnRlcm1UZXh0KCkgKyAi
ICIgKyByZXN1bHQuc3RhcnRPZmZzZXQoKSArICIgIiArIHJlc3VsdC5lbmRPZmZzZXQoKSk7CgkJ
fQoKCQlyZXR1cm4gcmVzdWx0OwoJfQoKCXByaXZhdGUgVG9rZW4gZ2V0TmV4dCgpIHRocm93cyBJ
T0V4Y2VwdGlvbiB7CgkJVG9rZW4gbmV4dCA9IG51bGw7CgoJCWlmICghd2FpdGluZ1Rva2Vucy5p
c0VtcHR5KCkpIHsKCQkJbmV4dCA9IChUb2tlbikgd2FpdGluZ1Rva2Vucy5yZW1vdmUoMCk7CgkJ
CS8vU3lzdGVtLm91dC5wcmludCgidyAiKTsKCQl9IGVsc2UgewoJCQluZXh0ID0gaW5wdXQubmV4
dCgpOwoJCQkvL1N5c3RlbS5vdXQucHJpbnQoImkgIik7CgkJfQoKCQlyZXR1cm4gbmV4dDsKCX0K
Cglwcml2YXRlIGZpbmFsIFRyaWUgcGhyYXNlczsKCXByaXZhdGUgZmluYWwgU3RyaW5nQnVmZmVy
IGNhbmRpZGF0ZVNCOwoJcHJpdmF0ZSBWZWN0b3IgY2FuZGlkYXRlVG9rZW5zOwoJcHJpdmF0ZSBW
ZWN0b3Igd2FpdGluZ1Rva2VuczsKfQo=


---MOQ1150998935932f2d9ddf1750064f522ffe1c079c93
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
---MOQ1150998935932f2d9ddf1750064f522ffe1c079c93--


From java-user-return-21539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 18:28:04 2006
Return-Path: <java-user-return-21539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64831 invoked from network); 22 Jun 2006 18:28:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 18:28:04 -0000
Received: (qmail 96931 invoked by uid 500); 22 Jun 2006 18:27:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96749 invoked by uid 500); 22 Jun 2006 18:27:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96738 invoked by uid 99); 22 Jun 2006 18:27:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:27:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:27:55 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k5MIRkE09419
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 13:27:46 -0500
Message-ID: <449AE11B.1080601@getopt.org>
Date: Thu, 22 Jun 2006 20:27:39 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Phrase Frequency For Analysis
References: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com>	 <200606220901.11543.paul.elschot@xs4all.nl>	 <Pine.LNX.4.58.0606220108050.30753@hal.rescomp.berkeley.edu>	 <449A52A5.8020805@getopt.org> <a7f272fa0606221025s3f3b5ef5t3702d5225d7f793a@mail.gmail.com>
In-Reply-To: <a7f272fa0606221025s3f3b5ef5t3702d5225d7f793a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nader Akhnoukh wrote:
> Yes, Chris is correct, the goal is to determine the most frequently 
> occuring
> phrases in a document compared to the frequency of that phrase in the
> index.  So there are only output phrases, no inputs.
>
> Also performance is not really an issue, this would take place on an
> irregular basis and could run overnight if need be.
>
> So it sounds like the best approach would be to index all 1, 2, and 3 
> word
> phrases.  Does anyone know of an Analyzer that does this?  And if I can
> successfully index the phrases would the term frequency vector contain 
> all
> the combination of phrases as terms along with their frequencies?

It's straightforward to implement one that keeps the last three tokens 
in a fifo buffer, and then outputs the whole buffer as a phrase.

You will need to store these phrases as terms, i.e. the stuff you return 
in your TokenStream should be this:

term1: token1 token2
term2: token1 token2 token3
term3: token2 token3
term4: token2 token3 token4
...

>
> Andrzej,  can you discuss your approach in a little more detail.  Are you
> suggesting manually traversing each document and doing a search on each
> phrase?  That seems very intensive as I have tens of thousands of 
> documents.

Ah, if you can afford the reindexing, then indexing word n-grams would 
be indeed a better option. I had to deal with existing indexes, so I 
resorted to a "dirty hack" way. It's not based on searching, but rather 
on traversing the TermPositions, using IndexReader.termPositions(term). 
It is very intensive, but for tens of thousands docs it is still 
feasible within a couple hours time - which may be still quicker than 
reindexing ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 18:44:06 2006
Return-Path: <java-user-return-21540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74237 invoked from network); 22 Jun 2006 18:44:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 18:44:06 -0000
Received: (qmail 34846 invoked by uid 500); 22 Jun 2006 18:44:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34819 invoked by uid 500); 22 Jun 2006 18:43:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34808 invoked by uid 99); 22 Jun 2006 18:43:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:43:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:43:59 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EE0365B778; Thu, 22 Jun 2006 11:43:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E0D8C7F403
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 11:43:31 -0700 (PDT)
Date: Thu, 22 Jun 2006 11:43:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: lucene and maven2
In-Reply-To: <836E7946-6AC0-4958-BF6F-FF1F3918BF51@real.com>
Message-ID: <Pine.LNX.4.58.0606221138330.5951@hal.rescomp.berkeley.edu>
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com> 
 <4498DE89.1080901@nuix.com.au> <4498F1C8.4030006@wmin.ac.uk> 
 <4499D86B.1000802@nuix.com.au> <8837fb770606220822r13e59919i8d4aee11b15ed396@mail.gmail.com>
 <449AB766.6080207@wyona.com> <836E7946-6AC0-4958-BF6F-FF1F3918BF51@real.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: http://www.ibiblio.org/maven2/org/apache/lucene/lucene-core/2.0.0/
:
: my classes won't compile against this jar as it doesn't contain any
: class files. there is a pom in the manifest directory.

I don't know much about maven, but that certainly doesn't look like a
valid lucene-core jar.  Perhaps someone made a mistake when copying the
jar to the magical maven repository that is synced with ibiblio?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 19:20:49 2006
Return-Path: <java-user-return-21541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84571 invoked from network); 22 Jun 2006 19:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:09:33 -0000
Received: (qmail 63395 invoked by uid 500); 22 Jun 2006 19:07:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58154 invoked by uid 500); 22 Jun 2006 19:06:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56794 invoked by uid 99); 22 Jun 2006 19:05:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:05:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sfryxell@real.com designates 207.188.23.4 as permitted sender)
Received: from [207.188.23.4] (HELO kal-el.real.com) (207.188.23.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:05:42 -0700
Received: from [10.0.1.3] ([::ffff:66.92.0.66])
  (AUTH: PLAIN sfryxell, TLS: TLSv1/SSLv3,128bits,RC4-SHA)
  by kal-el.real.com with esmtp; Thu, 22 Jun 2006 12:05:16 -0700
  id 0007C09B.449AE9ED.000040FC
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <Pine.LNX.4.58.0606221138330.5951@hal.rescomp.berkeley.edu>
References: <8837fb770606202239s4f59fa04r91154093daa2c73@mail.gmail.com>  <4498DE89.1080901@nuix.com.au> <4498F1C8.4030006@wmin.ac.uk>  <4499D86B.1000802@nuix.com.au> <8837fb770606220822r13e59919i8d4aee11b15ed396@mail.gmail.com> <449AB766.6080207@wyona.com> <836E7946-6AC0-4958-BF6F-FF1F3918BF51@real.com> <Pine.LNX.4.58.0606221138330.5951@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F6170FC9-2394-4828-A3F4-2DC9A2B49796@real.com>
Content-Transfer-Encoding: 7bit
From: sfryxell <sfryxell@real.com>
Subject: Re: lucene and maven2
Date: Thu, 22 Jun 2006 12:03:49 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thats kinda what i was thinking. i'll just upload the correct jar to  
my companies repository.

thanks.

On Jun 22, 2006, at 11:43 AM, Chris Hostetter wrote:

>
> : http://www.ibiblio.org/maven2/org/apache/lucene/lucene-core/2.0.0/
> :
> : my classes won't compile against this jar as it doesn't contain any
> : class files. there is a pom in the manifest directory.
>
> I don't know much about maven, but that certainly doesn't look like a
> valid lucene-core jar.  Perhaps someone made a mistake when copying  
> the
> jar to the magical maven repository that is synced with ibiblio?
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 19:20:55 2006
Return-Path: <java-user-return-21542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84627 invoked from network); 22 Jun 2006 19:09:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:09:34 -0000
Received: (qmail 63944 invoked by uid 500); 22 Jun 2006 19:07:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58653 invoked by uid 500); 22 Jun 2006 19:07:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56390 invoked by uid 99); 22 Jun 2006 18:57:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:57:40 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 11:57:40 -0700
Received: by py-out-1112.google.com with SMTP id c63so418780pyc
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 11:56:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZRSGvGuoGXCufYCxb9q2iDJ4BnlrU12Bf87KgObh5j7Aj8pDSbz2ETt65LKdvDDU9X/iEiRLnmpFhiLNAiZroVhqA/7uAX5LUXWLzn8YNwHL40X4zdgQhEJS3RyIDn5Xg0g88omBKjx6ha4yxEkezE9zYHwqrGLZ4HaFEeqQ+NQ=
Received: by 10.35.27.1 with SMTP id e1mr1406665pyj;
        Thu, 22 Jun 2006 11:56:45 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Thu, 22 Jun 2006 11:56:45 -0700 (PDT)
Message-ID: <359a92830606221156u2607a889rba1b7bd99d9cbf11@mail.gmail.com>
Date: Thu, 22 Jun 2006 14:56:45 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Restricting search space to a large number of ids
In-Reply-To: <pan.2006.06.22.16.14.13.531743@utoronto.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15920_32561403.1151002605600"
References: <pan.2006.06.22.16.14.13.531743@utoronto.ca>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_15920_32561403.1151002605600
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How many documents are you getting in your result set? And how are you
dealing with those results? If you're looking at more than a hundred or so
using a Hits object, you are acutally re-executing the query every 100
results or so you examine. This has been discussed several times, you might
want to search the mail archive to get the full story.

Why, you may ask? The Hits object is optimized for the "usual" practice of
only being interested in a few of the most relevant documents. If you have
needs to process a large number of results, I believe that a HitCollector
(or TopDocs?) is the way to go...

Best
Erick

------=_Part_15920_32561403.1151002605600--

From java-user-return-21543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 19:21:04 2006
Return-Path: <java-user-return-21543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85324 invoked from network); 22 Jun 2006 19:11:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:11:21 -0000
Received: (qmail 87349 invoked by uid 500); 22 Jun 2006 19:11:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87228 invoked by uid 500); 22 Jun 2006 19:11:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87193 invoked by uid 99); 22 Jun 2006 19:11:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:11:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:11:02 -0700
Received: from [192.168.1.98] (gate.marathonconsulting.com [69.38.225.18])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id k5MJAbJ08222;
	Thu, 22 Jun 2006 15:10:40 -0400
Message-ID: <449AEB60.4070300@alias-i.com>
Date: Thu, 22 Jun 2006 15:11:28 -0400
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene and SIPs
References: <15FC71D155A0F8429C3636B72C2ED52E19BF39@hermes.laddersoffice.com>
In-Reply-To: <15FC71D155A0F8429C3636B72C2ED52E19BF39@hermes.laddersoffice.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Time to pull out the chalkboard. :-)

SIPs, at least in the Amazon sense, are usually found
by means of statistical independence testing.  You
can find more info in Chris Manning's and Hinrich
Schuetze's statistical NLP book (heads-up: they're
now working on an IR book with more of a focus on
search quality than index compression -- draft chapters
are available at:

  http://www-csli.stanford.edu/~schuetze/information-retrieval-book.html


The simplest independence testing formula is:

Z("t1 t2") = count("t1 t2") - expectedCount("t1 t2")
              ---------------------------------------
              sqrt(corpusSize * prob("t1 t2") * (1-prob("t1 t2"))

expectedCount("t1 t2") = corpusSize * prob("t1 t2")
prob("t1 t2") = P("t1") * P("t2")   [assumes independence]
P("t") = count("t")/corpusSize
corpusSize = total number of term instances in the corpus

This basically gives you the number of standard deviations
above the mean the actual count was compared to the expected
count if they were independent.  (It assumes a binomial term
distribution, which isn't quite right, but it's close enough.)

If your corpus is fixed, you can ignore the corpus size
for purposes of ranking.

So all you need to do is iterate over term pairs, look
at the count under a phrase search and compare to the
expected count.  The only real trick is to make that
search efficient.  The usual way to do that is to

1.  only consider phrases that appear a minimum number of times
2.  build a trie-structure to store the phrase counts

Next, you can do something similar if you have two
Lucene document collections, say a background and
foreground collection:

Z("t1 t2") = countFG("t1 t2") - fgCorpusSize * probBG("t1 t2")
              --------------------------------------
              sqrt(fgSize * pBG("t1 t2") * (1 - pBG("t1 t2"))

where countFG is the count in the foreground corpus,
fgCorpusSize is the size of the foreground corpus,
and probBG is the probability in the background
corpus.  Now what's nifty is that probBG("t1 t2") can
either be done with the background phrase count, or by further
factoring it into probBG("t1")*probBG("t2").  The former
gives you a measure of newness and the second a measure
of phrasalness.

Note that the foreground corpus can be as small as
a single document or a small cluster of documents.

Matthew Hurst suggested blending the phrase
probability probBG("t1 t2") with the foreground
independence probability probFG("t1")*probFG("t2")
to both find things that are new and that are
phrase-like.

I'm going to be writing this all up in a bit longer
form in a case study for the revised Lucene in Action,
with explanations of how to find the significant
terms relative to a query, like Scirus.com does.

- Bob Carpenter
   Alias-i

PS:  I also wrote a little longer blog entry with more math,
references, and a comparison to what Matthew Hurst at Nielsen/Buzzemtrics
is doing:

      http://www.alias-i.com/blog/?p=14

(But our blog server appears to be down, and the sysadmin's
out to lunch...)


Larry Ogrodnek wrote:
> One thing that I played with was creating multiple phrase indexes, one
> each for 2, 3, 4, and 5 words.  I wrote a tokenizer that would batch up
> the words, so, for the input string:
> 
> The quick brown fox jumps over the slow lazy dog.
> 
> The tokenizer for 3 words would return:
> 
> The quick brown
> Quick brown fox
> Brown fox jumps
> Fox jumps over
> ...
>
> This seemed like a reasonably start... the problem is resolving the
> overlap for display, and figuring out which words are the most
> important, e.g. if the above sentence itself was pretty rare, and you're
> looking at the phrase-index-3, each one of its sub-phrases would end up
> being significant.... Which one do you show?  Or do you combine them
> into a longer phrase?  If so, where do you stop?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 19:21:22 2006
Return-Path: <java-user-return-21544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86737 invoked from network); 22 Jun 2006 19:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:18:40 -0000
Received: (qmail 8134 invoked by uid 500); 22 Jun 2006 19:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7667 invoked by uid 500); 22 Jun 2006 19:18:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7656 invoked by uid 99); 22 Jun 2006 19:18:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:18:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.41] (HELO mout.perfora.net) (217.160.230.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:18:33 -0700
Received: from [140.244.105.231] (helo=[140.244.105.231])
	by mrelay.perfora.net (node=mrelayus0) with ESMTP (Nemesis),
	id 0MKoyl-1FtUgt3PRw-0002Nm; Thu, 22 Jun 2006 15:18:12 -0400
Message-ID: <449AECF3.4080305@damle.name>
Date: Thu, 22 Jun 2006 15:18:11 -0400
From: Subodh Damle <id1@damle.name>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Searching repeating fields
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: perfora.net abuse@perfora.net login:db2695dbdb486f5acdf2ee2cc049991b
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all.

We've been using Lucene to index our dynamic data structure and so far 
Lucene has been flexible enough to accommodate our requirements.

Now we have this requirement about searching repeating fields, whose 
implementation is not clear.

Our data records have a dynamic tree-like structure :
e.g. a portion of record will look like:
-company-data
--- financial-data
------revenue-info
--------year
--------amount

For above record portion we create Lucene fields 
"/company-data/financial-data/revenue-info/year" and 
"/company-data/financial-data/revenue-info/amount"

Here, the 'revenue-info' is a repeating node, so we can have records like :
Record 1
---financial-data
------revenue-info
--------year = 2000
--------amount = 1000000
------revenue-info
--------year = 2001
--------amount = 2000000

Record 2
---financial-data
------revenue-info
--------year = 2000
--------amount = 2000000


Now, we need to find records where 'year=2000' and 'amount=2000000' -- 
only those **belonging to same revenue-info node**.
So the search should match Record2 above , but NOT Record1.
Here, simple BooleanQuery using two Terms 
(/company-data/financial-data/revenue-info/year:2000 and  
/company-data/financial-data/revenue-info/amount:2000000)  cannot do 
this - since it will also match Record 1.

A couple of clarifications : each of the nodes (company-data, 
financial-data, revenue-info ... etc ) have physical records in DB and 
are individually accessible.
Also, we generate Lucene queries programmatically , we don't use the 
query parser at all.

We thought of a couple of approaches to implement this but both have 
some limitations :

Approach 1. Generate a separate dummy Document for each 'revenue-info' 
node That way, we can ensure that both fields matched belong to same 
revenue-info node. The 'revenue-info' Document can be then linked to 
actual record Document using some other 'id' field.
This approach would however increase index size (one additional Doc per 
repeating node ). [ We would have a few dozen repeating nodes in each 
record. ]

Approach 2 : Merge values of 'year' and 'amount' into a single field. 
e.g. /company-data/financial-data/revenue-info-dummy-field: = 2000#2000000
However, the problem is , we may need to do range queries for some 
fields -- so for queries like year =2000 AND amount>1000000, we can't 
search this composite field value. So this approach may be unusable for us.

Has someone encountered something similar ? Can it be implemented any 
other way ?

Any suggestion would be greatly appreciated.

-Subodh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 19:38:30 2006
Return-Path: <java-user-return-21545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14192 invoked from network); 22 Jun 2006 19:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:38:29 -0000
Received: (qmail 51905 invoked by uid 500); 22 Jun 2006 19:38:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51866 invoked by uid 500); 22 Jun 2006 19:38:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51855 invoked by uid 99); 22 Jun 2006 19:38:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:38:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:38:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C7F545B77F; Thu, 22 Jun 2006 12:38:02 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BFDB87F403
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 12:38:02 -0700 (PDT)
Date: Thu, 22 Jun 2006 12:38:02 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Searching repeating fields
In-Reply-To: <449AECF3.4080305@damle.name>
Message-ID: <Pine.LNX.4.58.0606221231010.8969@hal.rescomp.berkeley.edu>
References: <449AECF3.4080305@damle.name>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Here, the 'revenue-info' is a repeating node, so we can have records like :
: Record 1
: ---financial-data
: ------revenue-info
: --------year = 2000
: --------amount = 1000000
: ------revenue-info
: --------year = 2001
: --------amount = 2000000
:
: Record 2
: ---financial-data
: ------revenue-info
: --------year = 2000
: --------amount = 2000000

: Has someone encountered something similar ? Can it be implemented any
: other way ?

depending on how many financial data blocks you'll have in a given
"record" you can enumerate them in field names, and then search on all of
the possible enumerarations...

Doc#1...
field_revenue-info_1_year = 2000
field_revenue-info_1_amount = 1000000
field_revenue-info_2_year = 2001
field_revenue-info_2_amount = 2000000

Doc#2...
field_revenue-info_1_year = 2000
field_revenue-info_1_amount = 2000000

Query...
  ((+field_revenue-info_1_year:2000 +field_revenue-info_1_amount:[2000000 TO *])
   (+field_revenue-info_2_year:2000 +field_revenue-info_2_amount:[2000000 TO *]))


...but this approach is really only feasible when there is a limited
number of times these "sets' of fields will be repeated, and you know what
the upper bound is at query time.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 19:58:50 2006
Return-Path: <java-user-return-21546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20955 invoked from network); 22 Jun 2006 19:58:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 19:58:50 -0000
Received: (qmail 80686 invoked by uid 500); 22 Jun 2006 19:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80504 invoked by uid 500); 22 Jun 2006 19:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80493 invoked by uid 99); 22 Jun 2006 19:58:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:58:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 12:58:42 -0700
Received: from [192.168.1.98] (gate.marathonconsulting.com [69.38.225.18])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id k5MJwWJ08449
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 15:58:32 -0400
Message-ID: <449AF6A4.9070002@alias-i.com>
Date: Thu, 22 Jun 2006 15:59:32 -0400
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Phrase Frequency For Analysis
References: <a7f272fa0606211633s1c571f68g55bbc10649cff2ea@mail.gmail.com>	 <200606220901.11543.paul.elschot@xs4all.nl>	 <Pine.LNX.4.58.0606220108050.30753@hal.rescomp.berkeley.edu>	 <449A52A5.8020805@getopt.org> <a7f272fa0606221025s3f3b5ef5t3702d5225d7f793a@mail.gmail.com> <449AE11B.1080601@getopt.org>
In-Reply-To: <449AE11B.1080601@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Adding to this growing thread, there's really no reason to
index all the term bigrams, trigrams, etc.  It's not
only slow, it's very memory/disk intensive.  All you need
to do is two passes over the collection.

Pass One
--------
Collect counts of bigrams (or trigrams, or whatever -- if
size is an issue, bigrams can be done in one pass, trigrams
in the next [perhaps restricted to containing a significant
bigram]).

And this doesn't always need to be totally up to date,
depending on how quickly you want to spot new terms
and more importantly, how quickly you want to expire them.

The first pass doesn't need to look at everything.  If you have
a huge collection, just choose a representative sample
(probably just a set of randomly chosen docs unless there's
more structure to exploit).

You may even be able to skip pass one altogether
if you're going for both new terms and significant
phrases relative to the collection -- see my last
post on Lucene and SIPs.  For that, you can just use
the index.

Pass Two
--------
For each document, collect its bigrams, trigrams, etc.
in a counter and do the significance tests vs. the larger
counts.  At this stage, you might want to index the significant
terms in the doc so they're easy to pull out at search time
if that's when you want to return them.

First thing to Try
------------------
Ignore pass one, calculate significance ranking
per term per doc by:

Z("t1 t2",d) = docCount("t1 t2",d) - docSize(d) * collectionProb("t1 t2")
                ---------------------------------------------
                sqrt(docSize(d) * collectionProb("t1 t2") * (1 - collectionProb("t1 t2")))

where:

docCount("t1 t2",d) is the count of "t1 t2" in doc d
docSize(d) is the number of bigrams in d
           (though the number of terms is probably
            a close enough approximation)
collectionProb("t1 t2") = collectionProb("t1") * collectionProb("t2")
collectionProb("t") = collectionCount("t") / collectionSize
collectionCount("t") = count of term "t" in the collection
collectionSize = number of term instances (not types) in the collection

- Bob Carpenter
   Alias-i

Andrzej Bialecki wrote:
> Nader Akhnoukh wrote:
> 
>> Yes, Chris is correct, the goal is to determine the most frequently 
>> occuring
>> phrases in a document compared to the frequency of that phrase in the
>> index.  So there are only output phrases, no inputs.
>>
>> Also performance is not really an issue, this would take place on an
>> irregular basis and could run overnight if need be.
>>
>> So it sounds like the best approach would be to index all 1, 2, and 3 
>> word
>> phrases.  Does anyone know of an Analyzer that does this?  And if I can
>> successfully index the phrases would the term frequency vector contain 
>> all
>> the combination of phrases as terms along with their frequencies?
> 
> 
> It's straightforward to implement one that keeps the last three tokens 
> in a fifo buffer, and then outputs the whole buffer as a phrase.
> 
> You will need to store these phrases as terms, i.e. the stuff you return 
> in your TokenStream should be this:
> 
> term1: token1 token2
> term2: token1 token2 token3
> term3: token2 token3
> term4: token2 token3 token4
> ...
> 
>>
>> Andrzej,  can you discuss your approach in a little more detail.  Are you
>> suggesting manually traversing each document and doing a search on each
>> phrase?  That seems very intensive as I have tens of thousands of 
>> documents.
> 
> 
> Ah, if you can afford the reindexing, then indexing word n-grams would 
> be indeed a better option. I had to deal with existing indexes, so I 
> resorted to a "dirty hack" way. It's not based on searching, but rather 
> on traversing the TermPositions, using IndexReader.termPositions(term). 
> It is very intensive, but for tens of thousands docs it is still 
> feasible within a couple hours time - which may be still quicker than 
> reindexing ...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 20:11:32 2006
Return-Path: <java-user-return-21547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27258 invoked from network); 22 Jun 2006 20:11:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 20:11:32 -0000
Received: (qmail 99901 invoked by uid 500); 22 Jun 2006 20:11:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99872 invoked by uid 500); 22 Jun 2006 20:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99854 invoked by uid 99); 22 Jun 2006 20:11:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:11:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:11:24 -0700
Received: from [192.168.1.98] (gate.marathonconsulting.com [69.38.225.18])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id k5MKB6J08692
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 16:11:07 -0400
Message-ID: <449AF993.2060906@alias-i.com>
Date: Thu, 22 Jun 2006 16:12:03 -0400
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene in combination with pattern recognition...
References: <07db01c69477$99dcc7c0$0301a8c0@Mesa.com>
In-Reply-To: <07db01c69477$99dcc7c0$0301a8c0@Mesa.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Check out Andrew McCallum's paper:

http://www.cs.umass.edu/~mccallum/papers/acm-queue-ie.pdf

It mentions this very problem.  There are
also some more technical presentations around.

He was part of the Whiz-Bang team that took
on the problem.  The fact that the company's
out of business is a testament to how hard
this problem is in general.

- Bob Carpenter
   Alias-i

> 
> i'm looking at a problem and i can't figure out how to "easily" solve it...
> 
> basically, i'm trying to figure out if there's a way to use lucene/nutch
> with some form of pattern matching to extract course information from a
> College/Registrar's course section...
> 
> Assume I can point to a Regiatrar's section of a College site.
> Assume I can then crawl through the section, and capture
>  all the underlying information, including the Course
>  information...
> Is there a way to somehow use pattern matching/recognition
>  to somehow interpret the DOM to pull out the class schedule
>  information. I'm pretty sure there's no vanilla approach,
>  so I'd even consider some kind of solution where I might
>  have to intially evaluate/analyze the site, to tell it
>  what DOM elements are "important"...
> 
> anyone done any work/projects like this...
> any research/papers/sample apps i could look at...
> any thoughts/comments/etc....
> 
> i could brute force this by writing a bunch of perl
> scripts, with each script tied to a given registrar site,
> but i'd like a more generalizable solution if one exists..
> 
> thanks
> 
> -bruce
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 20:44:08 2006
Return-Path: <java-user-return-21548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36307 invoked from network); 22 Jun 2006 20:44:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 20:44:08 -0000
Received: (qmail 41168 invoked by uid 500); 22 Jun 2006 20:44:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40584 invoked by uid 500); 22 Jun 2006 20:44:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40573 invoked by uid 99); 22 Jun 2006 20:44:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 13:44:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: unknown (asf.osuosl.org: error in processing during lookup of knearb@pf-cvl.net)
Received: from [12.167.225.6] (HELO liam.pf-cvl.net) (12.167.225.6)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Jun 2006 13:44:01 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by liam.pf-cvl.net (Postfix) with ESMTP id 580BF8246A6
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 16:36:27 -0400 (EDT)
X-Virus-Scanned: amavisd-new at pf-cvl.net
Received: from liam.pf-cvl.net ([127.0.0.1])
	by localhost (liam.pf-cvl.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id QPjMvq1QQL38 for <java-user@lucene.apache.org>;
	Thu, 22 Jun 2006 16:36:27 -0400 (EDT)
Received: from [192.168.1.170] (dialup103.itgs-presearch.com [12.167.225.103])
	by liam.pf-cvl.net (Postfix) with ESMTP id 3CB468246A5
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 16:36:27 -0400 (EDT)
Message-ID: <449B00FB.9050508@pf-cvl.net>
Date: Thu, 22 Jun 2006 16:43:39 -0400
From: Ben Knear <knearb@pf-cvl.net>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: A Special SpanQuery
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am trying to make a SpanNearQuery that will contain a SpanNotQuery and 
running into a bit of difficulty. Has anyone worked with creating a 
variation of a SpanQuery or using special logic to make this work?
For example - (A B !C) in order with a slop of 1 should return results 
with A and B within 1 slop of each other and not have C after B within 
the slop left over from A to B. With this rule, A B E M F would return 
true, while A B E C J would be false.
Thanks!
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 21:09:01 2006
Return-Path: <java-user-return-21549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44206 invoked from network); 22 Jun 2006 21:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 21:09:01 -0000
Received: (qmail 78071 invoked by uid 500); 22 Jun 2006 21:08:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78044 invoked by uid 500); 22 Jun 2006 21:08:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78033 invoked by uid 99); 22 Jun 2006 21:08:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:08:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [161.74.14.112] (HELO isls-mx10.wmin.ac.uk) (161.74.14.112)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 14:08:53 -0700
Received: from groucho.wmin.ac.uk ([161.74.160.74])
	by isls-mx10.wmin.ac.uk with esmtp (Exim 4.60)
	(envelope-from <courtes@wmin.ac.uk>)
	id 1FtWPe-0003JJ-J0
	for java-user@lucene.apache.org; Thu, 22 Jun 2006 22:08:30 +0100
Received: from [127.0.0.1] (user-86-116-245-83.euro1net.com [83.245.116.86])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by groucho.wmin.ac.uk (Postfix) with ESMTP id 57AEBA5BFC
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 22:08:30 +0100 (BST)
Message-ID: <449B06C9.6020408@wmin.ac.uk>
Date: Thu, 22 Jun 2006 22:08:25 +0100
From: Simon Courtenage <courtes@westminster.ac.uk>
Organization: University of Westminster
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene in combination with pattern recognition...
References: <07db01c69477$99dcc7c0$0301a8c0@Mesa.com> <449AF993.2060906@alias-i.com>
In-Reply-To: <449AF993.2060906@alias-i.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You might also check out an old paper by Kruger, Giles, Lawrence et al. on
a search engine called Deadliner (see here at 
http://clgiles.ist.psu.edu/papers/CIKM-2000-deadliner.pdf).
Deadliner crawled for Calls for Papers for conferences, using Support 
Vector Machines trained to
recognise relevant pages, and then applying sets of regular expressions 
to extract information
from the CFP pages.  Lawrence is now with Google, I believe.

Hope this helps,

Simon


Bob Carpenter wrote:
> Check out Andrew McCallum's paper:
>
> http://www.cs.umass.edu/~mccallum/papers/acm-queue-ie.pdf
>
> It mentions this very problem.  There are
> also some more technical presentations around.
>
> He was part of the Whiz-Bang team that took
> on the problem.  The fact that the company's
> out of business is a testament to how hard
> this problem is in general.
>
> - Bob Carpenter
>   Alias-i
>
>>
>> i'm looking at a problem and i can't figure out how to "easily" solve 
>> it...
>>
>> basically, i'm trying to figure out if there's a way to use lucene/nutch
>> with some form of pattern matching to extract course information from a
>> College/Registrar's course section...
>>
>> Assume I can point to a Regiatrar's section of a College site.
>> Assume I can then crawl through the section, and capture
>>  all the underlying information, including the Course
>>  information...
>> Is there a way to somehow use pattern matching/recognition
>>  to somehow interpret the DOM to pull out the class schedule
>>  information. I'm pretty sure there's no vanilla approach,
>>  so I'd even consider some kind of solution where I might
>>  have to intially evaluate/analyze the site, to tell it
>>  what DOM elements are "important"...
>>
>> anyone done any work/projects like this...
>> any research/papers/sample apps i could look at...
>> any thoughts/comments/etc....
>>
>> i could brute force this by writing a bunch of perl
>> scripts, with each script tied to a given registrar site,
>> but i'd like a more generalizable solution if one exists..
>>
>> thanks
>>
>> -bruce
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Dr. Simon Courtenage
Software Systems Engineering Research Group
Dept. of Software Engineering, Cavendish School of Computer Science
University of Westminster, London, UK
Email: courtes@wmin.ac.uk   Web: http://users.cscs.wmin.ac.uk/~courtes | http://www.sse.wmin.ac.uk


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 22:02:37 2006
Return-Path: <java-user-return-21550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59826 invoked from network); 22 Jun 2006 22:02:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 22:02:37 -0000
Received: (qmail 66849 invoked by uid 500); 22 Jun 2006 22:02:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66811 invoked by uid 500); 22 Jun 2006 22:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66798 invoked by uid 99); 22 Jun 2006 22:02:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 15:02:31 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.205] (HELO smtp106.sbc.mail.mud.yahoo.com) (68.142.198.205)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Jun 2006 15:02:30 -0700
Received: (qmail 67475 invoked from network); 22 Jun 2006 21:20:14 -0000
Received: from unknown (HELO sys2) (shelece@sbcglobal.net@69.107.111.0 with login)
  by smtp106.sbc.mail.mud.yahoo.com with SMTP; 22 Jun 2006 21:20:13 -0000
Reply-To: <bedouglas@earthlink.net>
From: "bruce" <bedouglas@earthlink.net>
To: <java-user@lucene.apache.org>,
	<courtes@westminster.ac.uk>
Subject: RE: lucene in combination with pattern recognition...
Date: Thu, 22 Jun 2006 14:23:39 -0700
Message-ID: <11ac01c69642$22124b30$0301a8c0@Mesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 9.0, Build 9.0.2910.0
In-Reply-To: <449B06C9.6020408@wmin.ac.uk>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi simon....

like a hole in my head!!!!

what i really need is a way to recursively iterate through a site, and to to
be able to selectively iterate through the 'form' elements on a given page.
ie, if i visually analyze a site and determine that the 1st level (page) has
a form, and i need to set the 1st two elements of the form, i'd like to be
able to somehow perform this function when i crawl through the site as
opposed to every potential combination of the form, or as opposed to only
using the default for the form...

i'd also like to be able to handle forms at lower levels in a similar
manner. this would/should allow the app to return all the required pages.

i could then create the parser(s) to extract information from each page.
although it would be better to actually have the ability to somehow manage
the data extraction from the DOM within the crawling application...

-bruce


-----Original Message-----
From: Simon Courtenage [mailto:courtes@westminster.ac.uk]
Sent: Thursday, June 22, 2006 2:08 PM
To: java-user@lucene.apache.org
Subject: Re: lucene in combination with pattern recognition...


You might also check out an old paper by Kruger, Giles, Lawrence et al. on
a search engine called Deadliner (see here at
http://clgiles.ist.psu.edu/papers/CIKM-2000-deadliner.pdf).
Deadliner crawled for Calls for Papers for conferences, using Support
Vector Machines trained to
recognise relevant pages, and then applying sets of regular expressions
to extract information
from the CFP pages.  Lawrence is now with Google, I believe.

Hope this helps,

Simon


Bob Carpenter wrote:
> Check out Andrew McCallum's paper:
>
> http://www.cs.umass.edu/~mccallum/papers/acm-queue-ie.pdf
>
> It mentions this very problem.  There are
> also some more technical presentations around.
>
> He was part of the Whiz-Bang team that took
> on the problem.  The fact that the company's
> out of business is a testament to how hard
> this problem is in general.
>
> - Bob Carpenter
>   Alias-i
>
>>
>> i'm looking at a problem and i can't figure out how to "easily" solve
>> it...
>>
>> basically, i'm trying to figure out if there's a way to use lucene/nutch
>> with some form of pattern matching to extract course information from a
>> College/Registrar's course section...
>>
>> Assume I can point to a Regiatrar's section of a College site.
>> Assume I can then crawl through the section, and capture
>>  all the underlying information, including the Course
>>  information...
>> Is there a way to somehow use pattern matching/recognition
>>  to somehow interpret the DOM to pull out the class schedule
>>  information. I'm pretty sure there's no vanilla approach,
>>  so I'd even consider some kind of solution where I might
>>  have to intially evaluate/analyze the site, to tell it
>>  what DOM elements are "important"...
>>
>> anyone done any work/projects like this...
>> any research/papers/sample apps i could look at...
>> any thoughts/comments/etc....
>>
>> i could brute force this by writing a bunch of perl
>> scripts, with each script tied to a given registrar site,
>> but i'd like a more generalizable solution if one exists..
>>
>> thanks
>>
>> -bruce
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Dr. Simon Courtenage
Software Systems Engineering Research Group
Dept. of Software Engineering, Cavendish School of Computer Science
University of Westminster, London, UK
Email: courtes@wmin.ac.uk   Web: http://users.cscs.wmin.ac.uk/~courtes |
http://www.sse.wmin.ac.uk


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 22:16:26 2006
Return-Path: <java-user-return-21551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62911 invoked from network); 22 Jun 2006 22:16:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 22:16:26 -0000
Received: (qmail 85559 invoked by uid 500); 22 Jun 2006 22:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85522 invoked by uid 500); 22 Jun 2006 22:16:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85511 invoked by uid 99); 22 Jun 2006 22:16:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 15:16:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 15:16:19 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 575BE5B78F; Thu, 22 Jun 2006 15:15:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 47D407F403
	for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 15:15:59 -0700 (PDT)
Date: Thu, 22 Jun 2006 15:15:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: A Special SpanQuery
In-Reply-To: <449B00FB.9050508@pf-cvl.net>
Message-ID: <Pine.LNX.4.58.0606221508210.20873@hal.rescomp.berkeley.edu>
References: <449B00FB.9050508@pf-cvl.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I don't really use Span queries, but this strieks me as being very similar
to past discussions about using Span queries along with "sentinel" terms
to find words in the same sentence or paragraph.

If you had a a special Term indexed at the end of every document, you
could do something like this...

    spanNot(spanNear(spanNear(A,B,slop),END_TERM,Infinity),C)

..which would be close to what you want (except that it would only match
on documents where A and B were close together, and C didnt' come after
them ... it wouldn't match on docuemnts where C came after them but it was
very far after them)

It does suggest however that you could possibly write a new SpanQuery that
took in a sub-SpanQuery, and an uper bound "limit" and generated Spans
that started with the Spans from the sub-query, and reached as far out as the limit
allowed, in which case you could do something like...

    spanNot(spanLimit(spanNear(A,B,slop),slop),C)

..however I've never tried writing a SpanQuery -- and the SpanQuery
internals I've tried to understand have severely frightened me ... so i
you pursue this endever I wish you the best of luck.


: Date: Thu, 22 Jun 2006 16:43:39 -0400
: From: Ben Knear <knearb@pf-cvl.net>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: A Special SpanQuery
:
: I am trying to make a SpanNearQuery that will contain a SpanNotQuery and
: running into a bit of difficulty. Has anyone worked with creating a
: variation of a SpanQuery or using special logic to make this work?
: For example - (A B !C) in order with a slop of 1 should return results
: with A and B within 1 slop of each other and not have C after B within
: the slop left over from A to B. With this rule, A B E M F would return
: true, while A B E C J would be false.
: Thanks!
: Ben
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 22 23:55:15 2006
Return-Path: <java-user-return-21552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88965 invoked from network); 22 Jun 2006 23:55:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2006 23:55:15 -0000
Received: (qmail 6706 invoked by uid 500); 22 Jun 2006 23:55:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6675 invoked by uid 500); 22 Jun 2006 23:55:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6662 invoked by uid 99); 22 Jun 2006 23:55:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 16:55:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of askxuefeng@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jun 2006 16:55:06 -0700
Received: by py-out-1112.google.com with SMTP id z59so475375pyg
        for <java-user@lucene.apache.org>; Thu, 22 Jun 2006 16:54:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:x-mailer:x-mimeole:in-reply-to:thread-index;
        b=WUl0m7ss/q3qLIu1wRpi7ENC3La8sw54laKYuuVUZ1VEidxipEYUkqXFCBpZhKfU2mHshtF7l1zBE2IyFYa0NM/lMy3fqw2Fil2yDvONsY1H7pDa8GcQHtKPQOI1HiwkDM8CbtuggtwYUXhuhYqy+2Qe5koJ5PPCS+utAi7JYic=
Received: by 10.35.134.12 with SMTP id l12mr1639216pyn;
        Thu, 22 Jun 2006 16:54:44 -0700 (PDT)
Received: from lymobile ( [222.35.80.112])
        by mx.gmail.com with ESMTP id q71sm929181pyg.2006.06.22.16.54.40;
        Thu, 22 Jun 2006 16:54:43 -0700 (PDT)
From: "Liao Xuefeng" <askxuefeng@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: HTML text extraction
Date: Fri, 23 Jun 2006 07:54:29 +0800
Message-ID: <002101c69657$36020120$6500a8c0@lymobile>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0022_01C6969A.44254120"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <449AB766.6080207@wyona.com>
Thread-Index: AcaWELlazQiqh5IaTTG4TIgMI+IowgARSyaQ
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0022_01C6969A.44254120
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 hi, all,
  I wrote my own html parser because it just meets my require and do not
depend on 3rd part's lib. and i'd like to share it (in attachment).

  This class provides some static methods to do html <-> text convertion:

  HtmlUtil.html2text(String html);
  HtmlUtil.text2html(String text);

and 
  HtmlUtil.removeScriptTags(String html);
can remove script and activex tags in html, this is use to check user's blog
post before writing into database.

Best regards,
  Xuefeng

http://www.crackj2ee.com

-----Original Message-----
From: Michael Wechner [mailto:michael.wechner@wyona.com] 
Sent: Thursday, June 22, 2006 11:30 PM
To: java-user@lucene.apache.org
Subject: Re: HTML text extraction

John Wang wrote:
> Hi Xuefeng:
>
>     Can you please send me your htmlparser too?

Xuefeng, would it be possible to open source your parser?

Thanks

Michi
>
> thanks
>
> -John
>
> On 6/21/06, Daniel Noll <daniel@nuix.com.au> wrote:
>>
>> Simon Courtenage wrote:
>> > I also use htmlparser, which is rather good.  I've had to customize
>> it,
>> > though, to parse strings containing html source rather than accept 
>> > urls of resources to fetch etc.
>> Also it
>> > crashes on meta tags that don't have name attributes (something I 
>> > discovered only a couple of days ago).
>>
>> Actually, it already accepts strings without modifying the library:
>>
>>     String htmlSource = "<html>...</html>";
>>     Parser parser = new Parser(new Lexer(htmlSource));
>>
>> I will have to watch out for those meta tags though.  Time to go test 
>> it.
>>
>> Daniel
>>
>>
>> --
>> Daniel Noll
>>
>> Nuix Pty Ltd
>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
>> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>>
>> This message is intended only for the named recipient. If you are not 
>> the intended recipient you are notified that disclosing, copying, 
>> distributing or taking any action in reliance on the contents of this 
>> message or attachment is strictly prohibited.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


--
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


------=_NextPart_000_0022_01C6969A.44254120
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPart_000_0022_01C6969A.44254120--


From java-user-return-21553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 23 07:15:46 2006
Return-Path: <java-user-return-21553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78255 invoked from network); 23 Jun 2006 07:15:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 07:15:45 -0000
Received: (qmail 24655 invoked by uid 500); 23 Jun 2006 07:15:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23612 invoked by uid 500); 23 Jun 2006 07:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23601 invoked by uid 99); 23 Jun 2006 07:15:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 00:15:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 00:15:35 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5N7FEWD085588
	for <java-user@lucene.apache.org>; Fri, 23 Jun 2006 09:15:14 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Searching repeating fields
Date: Fri, 23 Jun 2006 09:15:13 +0200
User-Agent: KMail/1.8.2
References: <449AECF3.4080305@damle.name>
In-Reply-To: <449AECF3.4080305@damle.name>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606230915.13386.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 22 June 2006 21:18, Subodh Damle wrote:
> Hi all.
> 
> We've been using Lucene to index our dynamic data structure and so far 
> Lucene has been flexible enough to accommodate our requirements.
> 
> Now we have this requirement about searching repeating fields, whose 
> implementation is not clear.
> 
> Our data records have a dynamic tree-like structure :
> e.g. a portion of record will look like:
> -company-data
> --- financial-data
> ------revenue-info
> --------year
> --------amount
> 
> For above record portion we create Lucene fields 
> "/company-data/financial-data/revenue-info/year" and 
> "/company-data/financial-data/revenue-info/amount"
> 
> Here, the 'revenue-info' is a repeating node, so we can have records like :
> Record 1
> ---financial-data
> ------revenue-info
> --------year = 2000
> --------amount = 1000000
> ------revenue-info
> --------year = 2001
> --------amount = 2000000
> 
> Record 2
> ---financial-data
> ------revenue-info
> --------year = 2000
> --------amount = 2000000
> 
> 
> Now, we need to find records where 'year=2000' and 'amount=2000000' -- 
> only those **belonging to same revenue-info node**.

Other than enumerating field names one can also add a seperator
term between the repeating "fields" and use a search a single "field"
by requiring that the separator does not occur in the match,
roughly like:

SpanNotQuery(SpanNearQuery(term1, term2), separatorterm)

where each term is a SpanTermQuery in the Lucene field,
not the same as the repeating "field" above.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 23 07:31:20 2006
Return-Path: <java-user-return-21554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87078 invoked from network); 23 Jun 2006 07:31:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 07:31:20 -0000
Received: (qmail 41037 invoked by uid 500); 23 Jun 2006 07:31:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41004 invoked by uid 500); 23 Jun 2006 07:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40993 invoked by uid 99); 23 Jun 2006 07:31:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 00:31:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 00:31:12 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5N7UoQG054404
	for <java-user@lucene.apache.org>; Fri, 23 Jun 2006 09:30:51 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: A Special SpanQuery
Date: Fri, 23 Jun 2006 09:30:50 +0200
User-Agent: KMail/1.8.2
References: <449B00FB.9050508@pf-cvl.net> <Pine.LNX.4.58.0606221508210.20873@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0606221508210.20873@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606230930.50265.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 23 June 2006 00:15, Chris Hostetter wrote:
> 
> I don't really use Span queries, but this strieks me as being very similar
> to past discussions about using Span queries along with "sentinel" terms
> to find words in the same sentence or paragraph.
> 
> If you had a a special Term indexed at the end of every document, you
> could do something like this...
> 
>     spanNot(spanNear(spanNear(A,B,slop),END_TERM,Infinity),C)
> 
> ..which would be close to what you want (except that it would only match
> on documents where A and B were close together, and C didnt' come after
> them ... it wouldn't match on docuemnts where C came after them but it was
> very far after them)
> 
> It does suggest however that you could possibly write a new SpanQuery that
> took in a sub-SpanQuery, and an uper bound "limit" and generated Spans
> that started with the Spans from the sub-query, and reached as far out as 
the limit
> allowed, in which case you could do something like...
> 
>     spanNot(spanLimit(spanNear(A,B,slop),slop),C)

See below for a slightly different take on this.

> 
> ..however I've never tried writing a SpanQuery -- and the SpanQuery
> internals I've tried to understand have severely frightened me ... so i
> you pursue this endever I wish you the best of luck.
> 
> 
> : Date: Thu, 22 Jun 2006 16:43:39 -0400
> : From: Ben Knear <knearb@pf-cvl.net>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: A Special SpanQuery
> :
> : I am trying to make a SpanNearQuery that will contain a SpanNotQuery and
> : running into a bit of difficulty. Has anyone worked with creating a
> : variation of a SpanQuery or using special logic to make this work?

Not that I know, but the current SpanQueries indeed can't do this.

> : For example - (A B !C) in order with a slop of 1 should return results
> : with A and B within 1 slop of each other and not have C after B within
> : the slop left over from A to B. With this rule, A B E M F would return
> : true, while A B E C J would be false.

One could also add slop to SpanNotQuery, like this:

SpanNot(SpanNear(A, B, nearSlop), C, notSlop)

It would need a special notSlop value (-1 ?) for the current behaviour
of SpanNotQuery that only inhibits matches when there is some overlap.
Even smaller values for notSlop might be useful to require more embedding
before inhibiting the match.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 23 19:28:06 2006
Return-Path: <java-user-return-21555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24726 invoked from network); 23 Jun 2006 19:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 19:28:05 -0000
Received: (qmail 24879 invoked by uid 500); 23 Jun 2006 19:27:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24619 invoked by uid 500); 23 Jun 2006 19:27:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24608 invoked by uid 99); 23 Jun 2006 19:27:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 12:27:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.253.83.141] (HELO authusersmtp.mail.cornell.edu) (128.253.83.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 12:27:55 -0700
Received: from caruso.mannlib.cornell.edu (caruso.mannlib.cornell.edu [128.253.87.56])
	(authenticated bits=0)
	by authusersmtp.mail.cornell.edu (8.13.1/8.12.10) with ESMTP id k5NJRTJp003328
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Fri, 23 Jun 2006 15:27:34 -0400 (EDT)
From: Brian Caruso <bdc34@cornell.edu>
To: java-user@lucene.apache.org
Subject: Conflicts with Stemming and Wildcard / Prefix Queries
Date: Fri, 23 Jun 2006 15:23:18 -0400
User-Agent: KMail/1.9.1
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606231523.18806.bdc34@cornell.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was having a problem with wildcard and prefix queries not returning hits on
a stemmed field.  To solve this I overrode QueryParser to have a HashMap
of stemmed field name -> unstemmed field name and then used that map
when constructing WildcardQueries and PrefixQueries.  Now I have a Stemmed
version of a field and a unstemmed version and this QueryParser switches
between them exactly when it should.

I hope this helps someone, here is the code:

import java.util.HashMap;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.queryParser.*;

/**
 * This is a QueryParser that will fall back to unstemmed
 * field for WildcardQueries and PrefixQueries. 
 * @author bdc34 a cornell dot edu
 */
public class VitroQueryParser extends QueryParser {
	/** 
	 * Map from stemmed field names to the names of fields with the
	 * same terms but unstemmed.	 
	 */
	HashMap <String,String> stemmedToUnstemmed;
	
	public VitroQueryParser(String f, Analyzer a) {super(f, a);	}
	public VitroQueryParser(CharStream stream) {super(stream);	}
	public VitroQueryParser(QueryParserTokenManager tm) {super(tm);	}
	
	/**
	 * Sets the map of field name to field name where
	 * the key maps to the name of the field with the unstemmed
	 * version of the same terms.  
	 */
	public void setStemmedToUnstemmed(HashMap<String, String> stemmedToUnstemmed{
		this.stemmedToUnstemmed = stemmedToUnstemmed;
	}
	
	/** 
	 * attempts to get a field name for the unstemmed data of
	 * the given stemmedField data.  Returns stemmedField
	 * if there is not mapping in stemmedToUnstemmed. 
	 */
	public String getUnstemmed(String stemmedField){
		if( stemmedField == null || 
			stemmedToUnstemmed == null ||
			!stemmedToUnstemmed.containsKey(stemmedField))
			return stemmedField;
		else
			return stemmedToUnstemmed.get(stemmedField);		
	}
	
	@Override
	protected org.apache.lucene.search.Query getPrefixQuery(String field, String termStr) 
	throws ParseException {		
		return super.getPrefixQuery(getUnstemmed(field), termStr);
	}
	
	@Override
	protected org.apache.lucene.search.Query getWildcardQuery(String field, String termStr) 
	throws ParseException {
		return super.getWildcardQuery(getUnstemmed(field), termStr);
	}	
}

-- 
Brian Caruso
Programmer/Analyst
Albert R. Mann Library
Cornell University 
Ithaca, NY 14853

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 23 19:44:50 2006
Return-Path: <java-user-return-21556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28402 invoked from network); 23 Jun 2006 19:44:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 19:44:49 -0000
Received: (qmail 46591 invoked by uid 500); 23 Jun 2006 19:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46542 invoked by uid 500); 23 Jun 2006 19:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46531 invoked by uid 99); 23 Jun 2006 19:44:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 12:44:42 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.90.187.18] (HELO smtp-gw4.us.gxs.com) (204.90.187.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 12:44:42 -0700
Received: from unknown (HELO bromail01.internal.gxs.com) ([10.160.0.166])
  by smtp-gw4.us.gxs.com with ESMTP; 23 Jun 2006 15:54:32 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Can't open index
Date: Fri, 23 Jun 2006 15:44:14 -0400
Message-ID: <ABF4E02DA33A6F4BAC41122C7086C8990376A857@bromail01.internal.gxs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Can't open index
Thread-Index: AcaV++uOu1QQW9P1R2ixjCY5+zTfBQBAQmvg
From: <Charles.Sanders@gxs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I had this same problem.  I began calling
IndexWriter.setUseCompoundFile(true) when I open an IndexWriter and
before I index.  Since I have used this method call, I have not seen the
problem again.

Hope this helps.



-----Original Message-----
From: WATHELET Thomas [mailto:thomas.wathelet@europarl.europa.eu]=20
Sent: Thursday, June 22, 2006 9:01 AM
To: java-user@lucene.apache.org
Subject: Can't open index

I'm creating my index file and in the same time I try to do some
searches inside.
Sometimes I retrieve this error message:
"\\tradluxstmp01\JavaIndex\tra\index_FR\_335.fnm (The system cannot find
the file specified)"
What I have to do or what's happen?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 23 22:15:27 2006
Return-Path: <java-user-return-21557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63591 invoked from network); 23 Jun 2006 22:15:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 22:15:27 -0000
Received: (qmail 72413 invoked by uid 500); 23 Jun 2006 22:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71419 invoked by uid 500); 23 Jun 2006 22:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71408 invoked by uid 99); 23 Jun 2006 22:15:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 15:15:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_POST,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.207.58.136] (HELO mail2.mailrooter.com) (65.207.58.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 23 Jun 2006 15:15:18 -0700
Received: from fei0018m031.hq.ferg.com ([172.16.105.131])
 by mail2.mailrooter.com (SMSSMTP 4.1.9.35) with SMTP id M2006062318101206890
 for <java-user@lucene.apache.org>; Fri, 23 Jun 2006 18:10:12 -0400
Received: from fei0018m001.hq.ferg.com ([172.16.105.14]) by fei0018m031.hq.ferg.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 23 Jun 2006 18:15:10 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69712.7B820CB3"
Subject: Searching multiple indexes
Date: Fri, 23 Jun 2006 18:15:06 -0400
Message-ID: <8C60F95D154DD34AA3AD319A5A093D8404946B8E@fei0018m001.hq.ferg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching multiple indexes
Thread-Index: AcaXEntoHY5UaL0FTniByZL09EQS4Q==
From: <Rod.Madden@ferguson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Jun 2006 22:15:10.0605 (UTC) FILETIME=[7E043BD0:01C69712]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69712.7B820CB3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have "Tokenized" multiple items into one index directory as
illustrated below.
=20
I can successfully search on any one indexed field ( as illustrated
below )=20
...the question is how would I search on all my indexed fields at one=20
...any ideas ? I have heard of MultiSearch but I am not sure if that=20
is appropriate here .
=20
Thanks,
=20
Rod
=20
// Build Index
=20
Analyzer analyzer =3D new StopAnalyzer(COMBINED_STOP_WORDS);    =20
 =20
IndexWriter writer =3D new IndexWriter(dir, analyzer, true);
.
.
Document doc =3D new Document();
Field field =3D new Field("URI",
                 "/someDir/someFile",=20
                 Field.Store.YES,
                 Field.Index.TOKENIZED);
=20
doc.add(field);
Field field =3D new Field("SUMMARY",
                 "this is a summary",=20
                 Field.Store.YES,
                 Field.Index.TOKENIZED);
doc.add(field);
Field field =3D new Field("STATUS",
                 "Success",=20
                 Field.Store.YES,
                 Field.Index.TOKENIZED);
doc.add(field);
.
.
writer.addDocument(doc);
=20

// Search just URI index
IndexSearcher is =3D new IndexSearcher(directory);
QueryParser qp =3D new QueryParser("contents", new StopAnalyzer());
Query query =3D qp.parse(findMe.toUpperCase());
Hits hits =3D is.search(query);
=20
// Search the URI, SUMMARY and STATUS indexes
??
=20

------_=_NextPart_001_01C69712.7B820CB3--

From java-user-return-21558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 23 22:43:24 2006
Return-Path: <java-user-return-21558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69055 invoked from network); 23 Jun 2006 22:43:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2006 22:43:24 -0000
Received: (qmail 5995 invoked by uid 500); 23 Jun 2006 22:43:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5302 invoked by uid 500); 23 Jun 2006 22:43:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5291 invoked by uid 99); 23 Jun 2006 22:43:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 15:43:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jun 2006 15:43:16 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1FtuMw-00019x-QH
	for java-user@lucene.apache.org; Sat, 24 Jun 2006 00:43:18 +0200
Message-ID: <449C6E5E.4050702@tejnora.cz>
Date: Sat, 24 Jun 2006 00:42:38 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching multiple indexes
References: <8C60F95D154DD34AA3AD319A5A093D8404946B8E@fei0018m001.hq.ferg.com>
In-Reply-To: <8C60F95D154DD34AA3AD319A5A093D8404946B8E@fei0018m001.hq.ferg.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
    there are two ways. The first is to use MultiFieldQueryParser 
http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/MultiFieldQueryParser.html
or do an extra step in indexing to build a new field as join of those 
(e.g. StringBuffer append f1 append f2 ...)

Benefits of the first is better relevance in case f.e. 
title,summary,fulltext. Minus is "performance" degradation.
+- of the second is better performance but lost of norms relevance.

Depends on requests. The first for us has show pity, if any, perf. deg. 
but better relevance results (title occurences are at top, summary and 
than content) and also smaller index.
Following docs lucene before 1.9 had a problem in inrelevant matches 
where the term occurs in more than one field. 1.9 fixed that.

Karel

>I have "Tokenized" multiple items into one index directory as
>illustrated below.
> 
>I can successfully search on any one indexed field ( as illustrated
>below ) 
>...the question is how would I search on all my indexed fields at one 
>...any ideas ? I have heard of MultiSearch but I am not sure if that 
>is appropriate here .
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 24 08:52:20 2006
Return-Path: <java-user-return-21559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60986 invoked from network); 24 Jun 2006 08:52:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2006 08:52:20 -0000
Received: (qmail 4567 invoked by uid 500); 24 Jun 2006 08:52:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4528 invoked by uid 500); 24 Jun 2006 08:52:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4517 invoked by uid 99); 24 Jun 2006 08:52:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jun 2006 01:52:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Gayo.Diallo@imag.fr designates 129.88.30.1 as permitted sender)
Received: from [129.88.30.1] (HELO imag.imag.fr) (129.88.30.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jun 2006 01:52:12 -0700
Received: from localhost (trottinette.imag.fr [129.88.34.202])
	by imag.imag.fr (8.13.6/8.13.6) with ESMTP id k5O8plJJ006819
	for <java-user@lucene.apache.org>; Sat, 24 Jun 2006 10:51:47 +0200 (CEST)
Received: from 82.67.62.72 ( [82.67.62.72])
	as user gdiallo@mail-timc.imag.fr by webmail.imag.fr with HTTP;
	Sat, 24 Jun 2006 10:51:47 +0200
Message-ID: <1151139107.449cfd232095c@webmail.imag.fr>
Date: Sat, 24 Jun 2006 10:51:47 +0200
From: Gayo.Diallo@imag.fr
To: java-user@lucene.apache.org
Subject: Multilangual indexing (in the same index)
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.1
X-Originating-IP: 82.67.62.72
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (imag.imag.fr [129.88.30.1]); Sat, 24 Jun 2006 10:51:47 +0200 (CEST)
X-IMAG-MailScanner-Information: Please contact IMAG DMI for more information
X-IMAG-MailScanner: Found to be clean
X-MailScanner-From: gdiallo@imag.fr
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

I wiss to index different set of multilingual documents in the same index. As
each document may contains several languages (currently English and French)
currently I'm using two Index (with the corresponding Analyzer for each part of
the document). The search is performed in one of the index depending to the
language specifyed in the Query.
I wish to use a single index with two differents Fields, An English field and an
French Field, both stemmed by the corresponding Ananlyzer. SO I need to
instanciate two IndexWriter. 
Is'it possible to do that, as to create and a new Index we need to instaciate
IndexWriter with the option true (lock) ?

Best regards

Gayo



-------------------------------------------------
envoyé via Webmail/IMAG !


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 24 13:57:42 2006
Return-Path: <java-user-return-21560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11028 invoked from network); 24 Jun 2006 13:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2006 13:57:42 -0000
Received: (qmail 99753 invoked by uid 500); 24 Jun 2006 13:57:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99717 invoked by uid 500); 24 Jun 2006 13:57:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99701 invoked by uid 99); 24 Jun 2006 13:57:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jun 2006 06:57:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jun 2006 06:57:35 -0700
Received: by py-out-1112.google.com with SMTP id m51so891207pye
        for <java-user@lucene.apache.org>; Sat, 24 Jun 2006 06:57:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XGzPhKjiZoT92m7QvXpIovRbbyykeVspLn4DJEcPG6ITxZ8FnWyezh4/CfnCWCFKusepVG4k2eL6/Mu/CB+opjJ4OGWBC8209bGajnwz30XzxtkJ5rN1jVy22zJOBAKWCYGUnHwzDuyVMswZWq7/rtpsgJD8kyUoO1yO6V9cQW8=
Received: by 10.35.51.13 with SMTP id d13mr3541289pyk;
        Sat, 24 Jun 2006 06:47:14 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Sat, 24 Jun 2006 06:47:14 -0700 (PDT)
Message-ID: <359a92830606240647h633134eet5abcc4a07bae11aa@mail.gmail.com>
Date: Sat, 24 Jun 2006 09:47:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multilangual indexing (in the same index)
In-Reply-To: <1151139107.449cfd232095c@webmail.imag.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46383_20274657.1151156834870"
References: <1151139107.449cfd232095c@webmail.imag.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_46383_20274657.1151156834870
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why do you need to instantiate two writers (which I'm pretty sure won't work
if they're pointing to the same index)? It's no problem for a single index
to contain multiple fields, and the fields don't even have to all be present
in each document.

Each field can have it's own analyzer (both for indexing and searching). See
PerFieldAnalyzerWrapper....

I have in mind something like (semi-pseudo-code here, the details are left
as an exercise for the reader<G>).


IndexWriter writer....
PerFieldAnalyzerWrapper pfaw...
pfaw.add("french words", new FrenchAnalyzer()))....
pfaw.add("english words", new EnglishAnalyzer()))....


for each document
  Document doc = ...

  doc.add(new FIeld("french words", "values of french words");
  doc.add(new Field("english words", "values of english words");
  writer.addDocument(doc, pfaw);
end for

and something similar for searching.....

Hope this helps
Erick

------=_Part_46383_20274657.1151156834870--

From java-user-return-21561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 25 20:52:30 2006
Return-Path: <java-user-return-21561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62451 invoked from network); 25 Jun 2006 20:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2006 20:52:30 -0000
Received: (qmail 40757 invoked by uid 500); 25 Jun 2006 20:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39747 invoked by uid 500); 25 Jun 2006 20:52:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39735 invoked by uid 99); 25 Jun 2006 20:52:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jun 2006 13:52:24 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.228] (HELO web60820.mail.yahoo.com) (209.73.178.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 25 Jun 2006 13:52:22 -0700
Received: (qmail 29805 invoked by uid 60001); 25 Jun 2006 20:52:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=BoCkz9K/8ydv+sN7JFvYNw+EP+yVNhes0rdXWmlUHblxYeCYJ4NS77hzenN/l75GQicF4EQRLacmrBWaibp1+ux18Af4+tAUgC72uTfvj4xkWL2rufH7DbP+5DwXGXE+hSLUPKICpET7/MIFQEK4n5QVbpFE4X5MaGXbHTvZ0Qk=  ;
Message-ID: <20060625205202.29803.qmail@web60820.mail.yahoo.com>
Received: from [212.179.71.70] by web60820.mail.yahoo.com via HTTP; Sun, 25 Jun 2006 13:52:02 PDT
Date: Sun, 25 Jun 2006 13:52:02 -0700 (PDT)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: termquery beginners question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-308339394-1151268722=:28838"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-308339394-1151268722=:28838
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

i apologize in advance for the question.
   
  i am running lucene 1.4.3 (prefer not to use the keywordanalyzer)
   
  i need to mix a user entered query along with a search on keyword indexed fields
   
  how would i search for an exact phrase using a term query on a keyword field while searching for user entered text on separate 'text' fields
  ideas?
   
  i tried using the mergeBooleanQueries using the query recieved from the queryparser and a new boolean query containing a termquery, but i must be missing something basic in the lucene search syntax.
   
  The termquery contains a phrase, and for some reason passing the following boolean query:
   
  .add(new termquery(new term(myfield,"abc defg")) , true , false) along with the query from the queryparser to the merge function is not returning what i would expect
   
  thanks in advance,
   
   
   
   
   
   

 		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2¢/min or less.
--0-308339394-1151268722=:28838--

From java-user-return-21562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 26 06:03:55 2006
Return-Path: <java-user-return-21562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57180 invoked from network); 26 Jun 2006 06:03:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 06:03:55 -0000
Received: (qmail 83626 invoked by uid 500); 26 Jun 2006 06:03:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83594 invoked by uid 500); 26 Jun 2006 06:03:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83583 invoked by uid 99); 26 Jun 2006 06:03:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jun 2006 23:03:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.17] (HELO smtpout09-04.prod.mesa1.secureserver.net) (64.202.165.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 25 Jun 2006 23:03:47 -0700
Received: (qmail 10464 invoked from network); 26 Jun 2006 06:03:24 -0000
Received: from unknown (202.153.32.162)
  by smtpout09-04.prod.mesa1.secureserver.net (64.202.165.17) with ESMTP; 26 Jun 2006 06:03:23 -0000
Subject: Re: Searching multiple indexes
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: Rod.Madden@ferguson.com, java-user@lucene.apache.org
In-Reply-To: <8C60F95D154DD34AA3AD319A5A093D8404946B8E@fei0018m001.hq.ferg.com>
References:
	 <8C60F95D154DD34AA3AD319A5A093D8404946B8E@fei0018m001.hq.ferg.com>
Content-Type: multipart/alternative; boundary="=-JhoSU5EoY935Zc8WpB5G"
Organization: iptouch
Date: Mon, 26 Jun 2006 11:34:00 +0530
Message-Id: <1151301840.3687.5.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-JhoSU5EoY935Zc8WpB5G
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi,

use MultiFieldQueryParser instead of the Queryparser that you are using.
Like this,   

                                          String fields[]={field1,
field2,....}
					MultiFieldQueryParser parser = new MultiFieldQueryParser(fields,
new StopAnalyzer());
					Query query = parser.parse(.....);
					
QueryParser qp = new QueryParser("contents", new StopAnalyzer());

> Query query = qp.parse(findMe.toUpperCase());



good day......          bye         Ramesh Reddy


On Fri, 2006-06-23 at 18:15 -0400, Rod.Madden@ferguson.com wrote:

> I have "Tokenized" multiple items into one index directory as
> illustrated below.
>  
> I can successfully search on any one indexed field ( as illustrated
> below ) 
> ...the question is how would I search on all my indexed fields at one 
> ...any ideas ? I have heard of MultiSearch but I am not sure if that 
> is appropriate here .
>  
> Thanks,
>  
> Rod
>  
> // Build Index
>  
> Analyzer analyzer = new StopAnalyzer(COMBINED_STOP_WORDS);     
>   
> IndexWriter writer = new IndexWriter(dir, analyzer, true);
> .
> .
> Document doc = new Document();
> Field field = new Field("URI",
>                  "/someDir/someFile", 
>                  Field.Store.YES,
>                  Field.Index.TOKENIZED);
>  
> doc.add(field);
> Field field = new Field("SUMMARY",
>                  "this is a summary", 
>                  Field.Store.YES,
>                  Field.Index.TOKENIZED);
> doc.add(field);
> Field field = new Field("STATUS",
>                  "Success", 
>                  Field.Store.YES,
>                  Field.Index.TOKENIZED);
> doc.add(field);
> .
> .
> writer.addDocument(doc);
>  
> 
> // Search just URI index
> IndexSearcher is = new IndexSearcher(directory);
> QueryParser qp = new QueryParser("contents", new StopAnalyzer());
> Query query = qp.parse(findMe.toUpperCase());
> Hits hits = is.search(query);
>  
> // Search the URI, SUMMARY and STATUS indexes
> ??
>  

--=-JhoSU5EoY935Zc8WpB5G--


From java-user-return-21563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 26 13:58:38 2006
Return-Path: <java-user-return-21563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37436 invoked from network); 26 Jun 2006 13:58:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 13:58:38 -0000
Received: (qmail 35900 invoked by uid 500); 26 Jun 2006 13:58:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35871 invoked by uid 500); 26 Jun 2006 13:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35860 invoked by uid 99); 26 Jun 2006 13:58:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 06:58:30 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 06:58:29 -0700
Received: by nz-out-0102.google.com with SMTP id 34so1487233nzf
        for <java-user@lucene.apache.org>; Mon, 26 Jun 2006 06:58:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=mffzMpOC2VFchpKQsI8W2iH3XQ7FiZTeK/7QoJg2XSYRpGZSFKL2cmj5Q2YqKyZ158FawLloFQSiHNIPRsVfa95qzTG5SyoHUOyPIq2usLWrX7eMylp2iUtSUd4hPkH//2yXXu2/1sf+QlAoZKvaHP9BlNtUUxjlijYMBO/iPCI=
Received: by 10.65.252.16 with SMTP id e16mr4186081qbs;
        Mon, 26 Jun 2006 06:58:09 -0700 (PDT)
Received: by 10.65.183.15 with HTTP; Mon, 26 Jun 2006 06:58:09 -0700 (PDT)
Message-ID: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
Date: Mon, 26 Jun 2006 19:28:09 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching is taking a lot...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31799_20854737.1151330289264"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_31799_20854737.1151330289264
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I have created an index of 47 Million documents.
I have 1.28GB RAM.
When i am doing a search over this index it is taking on average 25 sec. Is
there a way so that i can get results in part of a second...
I hope there must be some ways..

Thanks and regards..

------=_Part_31799_20854737.1151330289264--

From java-user-return-21564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 26 14:15:30 2006
Return-Path: <java-user-return-21564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42852 invoked from network); 26 Jun 2006 14:15:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 14:15:29 -0000
Received: (qmail 71238 invoked by uid 500); 26 Jun 2006 14:15:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71202 invoked by uid 500); 26 Jun 2006 14:15:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71189 invoked by uid 99); 26 Jun 2006 14:15:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 07:15:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 07:15:21 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.154E47B9@mailer.syr.edu>; Mon, 26 Jun 2006 10:15:00 -0400
Message-ID: <449FEBE4.6050502@syr.edu>
Date: Mon, 26 Jun 2006 10:15:00 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
In-Reply-To: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can you provide some information on your setup?  How are you indexing 
and searching?  Do you have a lot of terms in your query, etc?  Have you 
done any profiling of your setup to determine where the bottlenecks 
are?   Are you sure they are in Lucene? 

-Grant

heritrix.lucene wrote:
> Hi,
> I have created an index of 47 Million documents.
> I have 1.28GB RAM.
> When i am doing a search over this index it is taking on average 25 
> sec. Is
> there a way so that i can get results in part of a second...
> I hope there must be some ways..
>
> Thanks and regards..
>

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 26 14:57:58 2006
Return-Path: <java-user-return-21565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56370 invoked from network); 26 Jun 2006 14:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 14:57:57 -0000
Received: (qmail 47730 invoked by uid 500); 26 Jun 2006 14:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47694 invoked by uid 500); 26 Jun 2006 14:57:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47683 invoked by uid 99); 26 Jun 2006 14:57:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 07:57:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 07:57:50 -0700
Received: from (10.64.1.106) by webshield.cihi.ca via smtp
	 id 4ea2_b40740da_0524_11db_852d_003048245df9;
	Mon, 26 Jun 2006 11:01:54 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69930.9BB5126A"
Subject: search performance benchmarks
Date: Mon, 26 Jun 2006 10:55:47 -0400
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F06513DE4@tormail01.cihi.ca>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search performance benchmarks
thread-index: AcaZMJtmFkPLstYqTnqFzLUSh8lHeg==
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69930.9BB5126A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I'm evaluating Lucene right now to use as a base for one open source
project. I found some _indexing_ benchmarks on the lucene website
(http://lucene.apache.org/java/docs/benchmarks.html), but, after a short
browsing, couldn't find any 'runtime' performance benchmarks (Query
speed). Only one of the benchmarks contained some reference to the query
execution... Is there any other source of benchmarks I can refer to? Or
probably some heruistic rule that can help to estimate query execution
time?
=20
Thanks.
=20
Vlad
=20
PS: let me know if details of the searched data will help in evaluation
- I'll be able to provide what I know at this point...

------_=_NextPart_001_01C69930.9BB5126A--

From java-user-return-21566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 26 17:15:10 2006
Return-Path: <java-user-return-21566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1840 invoked from network); 26 Jun 2006 17:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 17:15:10 -0000
Received: (qmail 84055 invoked by uid 500); 26 Jun 2006 17:15:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83213 invoked by uid 500); 26 Jun 2006 17:15:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83202 invoked by uid 99); 26 Jun 2006 17:15:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:15:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 10:15:04 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3E2885B784; Mon, 26 Jun 2006 10:14:34 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2873A7F403
	for <java-user@lucene.apache.org>; Mon, 26 Jun 2006 10:14:34 -0700 (PDT)
Date: Mon, 26 Jun 2006 10:14:34 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
In-Reply-To: <449FEBE4.6050502@syr.edu>
Message-ID: <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu>
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
 <449FEBE4.6050502@syr.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Can you provide some information on your setup?  How are you indexing
: and searching?  Do you have a lot of terms in your query, etc?  Have you
: done any profiling of your setup to determine where the bottlenecks
: are?   Are you sure they are in Lucene?

what methods are you using for doing the search? (Hits, HitCollector,
TopDocs)  are you sorting?   are you opening a new IndexSearcher for each
searcher?  what exactly are you timing (a single "search" method call, an
iteration over every matching doc id? an iteration over every matching doc
to get a stored field?)

:
: -Grant
:
: heritrix.lucene wrote:
: > Hi,
: > I have created an index of 47 Million documents.
: > I have 1.28GB RAM.
: > When i am doing a search over this index it is taking on average 25
: > sec. Is
: > there a way so that i can get results in part of a second...
: > I hope there must be some ways..
: >
: > Thanks and regards..
: >
:
: --
:
: Grant Ingersoll
: Sr. Software Engineer
: Center for Natural Language Processing
: Syracuse University
: School of Information Studies
: 335 Hinds Hall
: Syracuse, NY 13244
:
: http://www.cnlp.org
: Voice:  315-443-5484
: Fax: 315-443-6886
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 26 18:33:37 2006
Return-Path: <java-user-return-21567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27381 invoked from network); 26 Jun 2006 18:33:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 18:33:36 -0000
Received: (qmail 11163 invoked by uid 500); 26 Jun 2006 18:33:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11118 invoked by uid 500); 26 Jun 2006 18:33:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11107 invoked by uid 99); 26 Jun 2006 18:33:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:33:28 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.107] (HELO web34109.mail.mud.yahoo.com) (66.163.178.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 26 Jun 2006 11:33:27 -0700
Received: (qmail 73311 invoked by uid 60001); 26 Jun 2006 18:33:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=vBzIaTkcbML8zA34xSZ/Uq34kt6tmIXsWsP8jn6PaOnTX8FwJyVOyh6CyDWIQkzGEL7pNr1XB+25RpH46lXA3HjhstgrJF3PXagC+x3iAWYzisEu2ZyKEnDCLNTtUkZkYsu9I+PdbTXLIPQkfS6khMAzHrbIrTdIVED6xbdZgkU=  ;
Message-ID: <20060626183306.73309.qmail@web34109.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34109.mail.mud.yahoo.com via HTTP; Mon, 26 Jun 2006 11:33:06 PDT
Date: Mon, 26 Jun 2006 11:33:06 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: Re: termquery beginners question
To: java-user@lucene.apache.org
In-Reply-To: <20060625205202.29803.qmail@web60820.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey,

I do not think mergeBooleanQueries is necessary. It
sounds like what you want to do is this:

Query userEntered = QueryParser.parse("foo bar");
Query otherQuery = new TermQuery(new
Term("myfield","abc defg"));

BooleanQuery completeQuery = new BooleanQuery();
completeQuery.add(userEntered,true,false);
completeQuery.add(otherQuery,true,false);

Then just use completeQuery in your search. Hope I
understood your issue correctly. Also as a note, the
syntax above will work in Lucene 1.4.3, but it looks
like BooleanQuery.add() has changed in 2.0.0.

JAMES

--- zzzzz shalev <zzzzz_shalev@yahoo.com> wrote:

> i apologize in advance for the question.
>    
>   i am running lucene 1.4.3 (prefer not to use the
> keywordanalyzer)
>    
>   i need to mix a user entered query along with a
> search on keyword indexed fields
>    
>   how would i search for an exact phrase using a
> term query on a keyword field while searching for
> user entered text on separate 'text' fields
>   ideas?
>    
>   i tried using the mergeBooleanQueries using the
> query recieved from the queryparser and a new
> boolean query containing a termquery, but i must be
> missing something basic in the lucene search syntax.
>    
>   The termquery contains a phrase, and for some
> reason passing the following boolean query:
>    
>   .add(new termquery(new term(myfield,"abc defg")) ,
> true , false) along with the query from the
> queryparser to the merge function is not returning
> what i would expect
>    
>   thanks in advance,
>    
>    
>    
>    
>    
>    
> 
>  		
> ---------------------------------
> Yahoo! Messenger with Voice. Make PC-to-Phone Calls
> to the US (and 30+ countries) for 2ï¿½/min or less.


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 26 18:50:48 2006
Return-Path: <java-user-return-21568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30893 invoked from network); 26 Jun 2006 18:50:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2006 18:50:48 -0000
Received: (qmail 38452 invoked by uid 500); 26 Jun 2006 18:50:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38412 invoked by uid 500); 26 Jun 2006 18:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38401 invoked by uid 99); 26 Jun 2006 18:50:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:50:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.111.224.171] (HELO empburmail20.Burlington.Emptoris.com) (63.111.224.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 11:50:40 -0700
Received: from empburmail.Burlington.Emptoris.com ([10.10.50.14]) by empburmail20.Burlington.Emptoris.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 26 Jun 2006 14:50:19 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: search performance benchmarks
Date: Mon, 26 Jun 2006 14:50:17 -0400
Message-ID: <9F47FE95F43B1D41B9063D0271B2D7FF01123CAA@empburmail.Burlington.Emptoris.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search performance benchmarks
Thread-Index: AcaZMJtmFkPLstYqTnqFzLUSh8lHegAICwMw
From: "Wang, Jeff" <jwang@emptoris.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Jun 2006 18:50:19.0565 (UTC) FILETIME=[5F399DD0:01C69951]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Performance varies a lot, and depends upon the number of indexes, the
number of fields, and the CPU/memory configuration.  For myself, a 65Gb
source indexed to 1Gb (or so) returns single term queries (oh yeah, the
query makeup also matters a lot) in sub seconds on a Intel dual
processor (each is 3.6Ghz I think.)  I frankly haven't tested out
scalability yet.

Jeff
Emptoris, Inc.

-----Original Message-----
From: Vladimir Olenin [mailto:VOlenin@cihi.ca]=20
Sent: Monday, June 26, 2006 7:56 AM
To: java-user@lucene.apache.org
Subject: search performance benchmarks

Hi,
=20
I'm evaluating Lucene right now to use as a base for one open source
project. I found some _indexing_ benchmarks on the lucene website
(http://lucene.apache.org/java/docs/benchmarks.html), but, after a short
browsing, couldn't find any 'runtime' performance benchmarks (Query
speed). Only one of the benchmarks contained some reference to the query
execution... Is there any other source of benchmarks I can refer to? Or
probably some heruistic rule that can help to estimate query execution
time?
=20
Thanks.
=20
Vlad
=20
PS: let me know if details of the searched data will help in evaluation
- I'll be able to provide what I know at this point...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 06:56:26 2006
Return-Path: <java-user-return-21569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85128 invoked from network); 27 Jun 2006 06:56:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:56:26 -0000
Received: (qmail 71267 invoked by uid 500); 27 Jun 2006 06:56:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70893 invoked by uid 500); 27 Jun 2006 06:56:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70882 invoked by uid 99); 27 Jun 2006 06:56:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:56:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:56:18 -0700
Received: from melkor-lap [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A2880860; Tue, 27 Jun 2006 08:39:04 +0200
Date: Tue, 27 Jun 2006 08:55:48 +0200
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Index confusion and organization
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tbsljawsoftp72@melkor-lap>
User-Agent: Opera Mail(BETA2)/9.00 (Win32)
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: Dd288019100008fc3.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I tried sending this message yesterday, but I think i wasn't registered =
 =

until now, so i'll post again. (Sorry if this gets doubled up).

I have recently started using Lucene and I must say i love it:)

But, i have a few questions (probably stupid ones), but still, here goes=
:

I have created one project that reads information from a database, then =
 =

indexes this information in a Lucene Index. This process runs about 4  =

times a day (the database has constant input flow).

In the beginning of my development i created a search engine project to =
 =

search this engine (web-based) using lucene and spring. (i have yet to  =

investigate Compass Framework)

I have recently found an increasing need to restructure my code-base and=
  =

make the search logic available to other projects aswell. I therefore  =

created a search-API and a search-luceneimpl project.

I then created another project, a web service offering the basic search =
 =

feature, with a list of information beans as a return object.

the problem is this, (and the whole confusion regarding indexsearchers, =
 =

writers and stuff:) ):
i noticed today that the webservice only access a "snapshot" of the inde=
x,  =

 from the actual moment the webservice was loaded. If i then reload the =
 =

webservice context, the results will be "up-to-date" again. So it seems =
 =

that i have done something wrong in my logic. (doh)

In the webservice, i load my searcher-class from the spring-context,  =

setting it in the constructor.

The searcher-class have the following logic in its constructor:
   searcher =3D new IndexSearcher(indexPath);

then i have specified a close-method in the spring-context, which will  =

call the close method containing the
   searcher.close();

I have read that one should only open one searcher object and use this f=
or  =

all searches, then close it when done... Well, that is a bit tricky i  =

think. As for now i have to projects "reading" from the index (the old  =

search-engine project) and this new web service. In addition the  =

indexer-project is the only project writing to the index...

Any ideas or input to a mere beginner on how to organize this mess?

Sincerely yours,
Aleksander M. Stensby

-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 06:59:11 2006
Return-Path: <java-user-return-21570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85783 invoked from network); 27 Jun 2006 06:59:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 06:59:11 -0000
Received: (qmail 76915 invoked by uid 500); 27 Jun 2006 06:59:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76879 invoked by uid 500); 27 Jun 2006 06:59:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76868 invoked by uid 99); 27 Jun 2006 06:59:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:59:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jun 2006 23:59:04 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: search performance benchmarks
Date: Tue, 27 Jun 2006 07:58:57 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE7C1BDF@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search performance benchmarks
thread-index: AcaZMJtmFkPLstYqTnqFzLUSh8lHegAICwMwABlbKiA=
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We recently ran some benchmarks on Linux with 4 xeon cpus and 2gb of
heap (not that this was needed). We managed to easily get 1000 term
based queries a second, this including the query execution time and
retrieving the top 10 documents from the index. We did notice some
contention as adding more clients (threads) kept the same average
execution time but increased the max processing time for some queries.
So the addition of clients caused a queue to build up, but the results
were still sub second with 100 clients, simultaneously executing queries
and using the times 10 rule, this would represent 1000 connected users.

Mike

www.ardentia.com the home of NetSearch
-----Original Message-----
From: Wang, Jeff [mailto:jwang@emptoris.com]=20
Sent: 26 June 2006 19:50
To: java-user@lucene.apache.org
Subject: RE: search performance benchmarks

Performance varies a lot, and depends upon the number of indexes, the
number of fields, and the CPU/memory configuration.  For myself, a 65Gb
source indexed to 1Gb (or so) returns single term queries (oh yeah, the
query makeup also matters a lot) in sub seconds on a Intel dual
processor (each is 3.6Ghz I think.)  I frankly haven't tested out
scalability yet.

Jeff
Emptoris, Inc.

-----Original Message-----
From: Vladimir Olenin [mailto:VOlenin@cihi.ca]=20
Sent: Monday, June 26, 2006 7:56 AM
To: java-user@lucene.apache.org
Subject: search performance benchmarks

Hi,
=20
I'm evaluating Lucene right now to use as a base for one open source
project. I found some _indexing_ benchmarks on the lucene website
(http://lucene.apache.org/java/docs/benchmarks.html), but, after a short
browsing, couldn't find any 'runtime' performance benchmarks (Query
speed). Only one of the benchmarks contained some reference to the query
execution... Is there any other source of benchmarks I can refer to? Or
probably some heruistic rule that can help to estimate query execution
time?
=20
Thanks.
=20
Vlad
=20
PS: let me know if details of the searched data will help in evaluation
- I'll be able to provide what I know at this point...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 07:23:58 2006
Return-Path: <java-user-return-21571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97462 invoked from network); 27 Jun 2006 07:23:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 07:23:57 -0000
Received: (qmail 11673 invoked by uid 500); 27 Jun 2006 07:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11553 invoked by uid 500); 27 Jun 2006 07:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11508 invoked by uid 99); 27 Jun 2006 07:23:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 00:23:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 00:23:48 -0700
Received: by py-out-1112.google.com with SMTP id f25so1731595pyf
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 00:23:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OAv5zLBWCCg/QYI6x5KpBkQPWIEhpK//Cyy0aKIxHQ3tJ9z1NeKx5z5PqokvT3B52IC2hIc4q3FmMdgRhkk6cK7C4K1nLZA79DJMDQk6O+KeWUOmiXvVEW3M6u/Ps/NaxFepJPgdQHDa8nwmGBLPgR7//AFaZumBGB1sh7NQF9s=
Received: by 10.35.41.14 with SMTP id t14mr6896249pyj;
        Tue, 27 Jun 2006 00:23:27 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Tue, 27 Jun 2006 00:23:27 -0700 (PDT)
Message-ID: <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
Date: Tue, 27 Jun 2006 12:53:27 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
In-Reply-To: <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26578_4274352.1151393007312"
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
	 <449FEBE4.6050502@syr.edu>
	 <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26578_4274352.1151393007312
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
First of all, thanks for your attention...
I think i've got the solution.
Actually earlier, everytime for each query i was creating a different
searcher object. Creating searcher object was not taking a lot. But
searching everytime using a new searcher was taking time. So For testing, i
made it a static one and reused the same. This gave me a lot of improvement.
Previously my query was taking approx 25 sec. But now most of the queries
are taking time between the 100 and 800 ms.
Here also i noticed that the query is taking time only first time. If you
fire the same query again it takes very very less.
Can anybody tell me the story behibd this.

With Regards.........

On 6/26/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Can you provide some information on your setup?  How are you indexing
> : and searching?  Do you have a lot of terms in your query, etc?  Have you
> : done any profiling of your setup to determine where the bottlenecks
> : are?   Are you sure they are in Lucene?
>
> what methods are you using for doing the search? (Hits, HitCollector,
> TopDocs)  are you sorting?   are you opening a new IndexSearcher for each
> searcher?  what exactly are you timing (a single "search" method call, an
> iteration over every matching doc id? an iteration over every matching doc
> to get a stored field?)
>
> :
> : -Grant
> :
> : heritrix.lucene wrote:
> : > Hi,
> : > I have created an index of 47 Million documents.
> : > I have 1.28GB RAM.
> : > When i am doing a search over this index it is taking on average 25
> : > sec. Is
> : > there a way so that i can get results in part of a second...
> : > I hope there must be some ways..
> : >
> : > Thanks and regards..
> : >
> :
> : --
> :
> : Grant Ingersoll
> : Sr. Software Engineer
> : Center for Natural Language Processing
> : Syracuse University
> : School of Information Studies
> : 335 Hinds Hall
> : Syracuse, NY 13244
> :
> : http://www.cnlp.org
> : Voice:  315-443-5484
> : Fax: 315-443-6886
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26578_4274352.1151393007312--

From java-user-return-21572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 07:32:26 2006
Return-Path: <java-user-return-21572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99789 invoked from network); 27 Jun 2006 07:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 07:32:26 -0000
Received: (qmail 28182 invoked by uid 500); 27 Jun 2006 07:32:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28146 invoked by uid 500); 27 Jun 2006 07:32:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28113 invoked by uid 99); 27 Jun 2006 07:32:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 00:32:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 00:32:17 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5R7Vu0E070774
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 09:31:56 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
Date: Tue, 27 Jun 2006 09:31:55 +0200
User-Agent: KMail/1.8.2
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com> <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu> <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
In-Reply-To: <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606270931.55489.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 27 June 2006 09:23, heritrix.lucene wrote:
> Hi,
> First of all, thanks for your attention...
> I think i've got the solution.
> Actually earlier, everytime for each query i was creating a different
> searcher object. Creating searcher object was not taking a lot. But
> searching everytime using a new searcher was taking time. So For testing, i
> made it a static one and reused the same. This gave me a lot of improvement.
> Previously my query was taking approx 25 sec. But now most of the queries
> are taking time between the 100 and 800 ms.
> Here also i noticed that the query is taking time only first time. If you
> fire the same query again it takes very very less.
> Can anybody tell me the story behibd this.

That is most likely your operating system's disk cache.

Regards,
Paul Elschot.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 07:47:40 2006
Return-Path: <java-user-return-21573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3956 invoked from network); 27 Jun 2006 07:47:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 07:47:40 -0000
Received: (qmail 53284 invoked by uid 500); 27 Jun 2006 07:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53244 invoked by uid 500); 27 Jun 2006 07:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53233 invoked by uid 99); 27 Jun 2006 07:47:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 00:47:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.210.211 as permitted sender)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 00:47:33 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay2.uni-heidelberg.de (8.12.10/8.12.10) with ESMTP id k5R7nLvj019071
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 09:49:21 +0200 (MET DST)
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 6F4662C05E
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 09:47:08 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 257052C05C
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 09:47:07 +0200 (CEST)
Message-ID: <44A0E27A.2000406@uni-hd.de>
Date: Tue, 27 Jun 2006 09:47:06 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>	 <449FEBE4.6050502@syr.edu>	 <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu> <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
In-Reply-To: <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi chris,
> searching everytime using a new searcher was taking time. So For testing, i
> made it a static one and reused the same. This gave me a lot of
> improvement.
> Previously my query was taking approx 25 sec. But now most of the queries
> are taking time between the 100 and 800 ms.

Do you use a kind of sorting? I had this issue with SortField.STRING, it
takes a lot of time and memory to build the sort cache of all terms in
the field (of type String). So if the searcher needs to rebuild this
with each query it takes a while...

hth,
martin

> Here also i noticed that the query is taking time only first time. If you
> fire the same query again it takes very very less.
> Can anybody tell me the story behibd this.
> 
> With Regards.........
> 
> On 6/26/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>>
>>
>> : Can you provide some information on your setup?  How are you indexing
>> : and searching?  Do you have a lot of terms in your query, etc?  Have
>> you
>> : done any profiling of your setup to determine where the bottlenecks
>> : are?   Are you sure they are in Lucene?
>>
>> what methods are you using for doing the search? (Hits, HitCollector,
>> TopDocs)  are you sorting?   are you opening a new IndexSearcher for each
>> searcher?  what exactly are you timing (a single "search" method call, an
>> iteration over every matching doc id? an iteration over every matching
>> doc
>> to get a stored field?)
>>
>> :
>> : -Grant
>> :
>> : heritrix.lucene wrote:
>> : > Hi,
>> : > I have created an index of 47 Million documents.
>> : > I have 1.28GB RAM.
>> : > When i am doing a search over this index it is taking on average 25
>> : > sec. Is
>> : > there a way so that i can get results in part of a second...
>> : > I hope there must be some ways..
>> : >
>> : > Thanks and regards..
>> : >
>> :
>> : --
>> :
>> : Grant Ingersoll
>> : Sr. Software Engineer
>> : Center for Natural Language Processing
>> : Syracuse University
>> : School of Information Studies
>> : 335 Hinds Hall
>> : Syracuse, NY 13244
>> :
>> : http://www.cnlp.org
>> : Voice:  315-443-5484
>> : Fax: 315-443-6886
>> :
>> :
>> : ---------------------------------------------------------------------
>> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> : For additional commands, e-mail: java-user-help@lucene.apache.org
>> :
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 08:25:17 2006
Return-Path: <java-user-return-21574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22204 invoked from network); 27 Jun 2006 08:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 08:25:16 -0000
Received: (qmail 9472 invoked by uid 500); 27 Jun 2006 08:25:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9191 invoked by uid 500); 27 Jun 2006 08:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9180 invoked by uid 99); 27 Jun 2006 08:25:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 01:25:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.41.78.208] (HELO smtp-ft4.fr.colt.net) (213.41.78.208)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 01:25:08 -0700
Received: from octofro (host.245.109.41.213.rev.coltfrance.com [213.41.109.245])
	by smtp-ft4.fr.colt.net (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id k5R8OiWd018308
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 10:24:44 +0200
Message-Id: <200606270824.k5R8OiWd018308@smtp-ft4.fr.colt.net>
From: "Fabrice Robini" <frobini@octo.com>
To: <java-user@lucene.apache.org>
Subject: IndexSearcher in Servlet 
Date: Tue, 27 Jun 2006 10:24:35 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0003_01C699D3.E684CD50"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaZwx+m80qWRIE0QtOcdkHw13PNNw==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0003_01C699D3.E684CD50
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable

Hello,

=20

I have a question about the IndexSearcher().

I have a Servlet that has a searchDocument(String theQuery) method.

These method instantiate a new IndexSearcher at each query:

=20

searchDocument(String theQuery)

{

            Searcher searcher =3D new IndexSearcher(indexPath);

            =85

}

=20

Is it a good way ? Or Is it better to use a static searcher, and use the
same for each query (and for each user)=85

Is it thread safe ? Will results not be mixed to users ? (if user A =
searchs
car and user B searchs boats, is it sure that user A will get car and B =
will
get boats, even if the IndexSearcher is static and is the same ?)

=20

Thanks a lot,

=20

Fab


--=20
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: =
26/06/2006
=20

------=_NextPart_000_0003_01C699D3.E684CD50--


From java-user-return-21575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 08:50:51 2006
Return-Path: <java-user-return-21575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35483 invoked from network); 27 Jun 2006 08:50:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 08:50:51 -0000
Received: (qmail 59695 invoked by uid 500); 27 Jun 2006 08:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59547 invoked by uid 500); 27 Jun 2006 08:50:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59536 invoked by uid 99); 27 Jun 2006 08:50:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 01:50:44 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 01:50:44 -0700
Received: by py-out-1112.google.com with SMTP id m51so1663317pye
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 01:50:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=LG3TF3sA1UZrxTK/fwF4HGMm5ODldqlTw3sz1TGd4r1n+9CFkgV5ij0yFXGwr2GCjhWSXGi9puLSQ/2vzXjZv2a6LVURZhf8SniQEG3ZQmIsP7JZLVK/YLrYfyX5Mxt1DB847Pwy8XciY/ToM4Wu57EG99GAhUrPC3Pi85cSPzg=
Received: by 10.35.41.14 with SMTP id t14mr6963688pyj;
        Tue, 27 Jun 2006 01:50:23 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Tue, 27 Jun 2006 01:50:23 -0700 (PDT)
Message-ID: <a36516400606270150q32d6edddp25e95fc4d42bdeab@mail.gmail.com>
Date: Tue, 27 Jun 2006 14:20:23 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Understanding Boolean Queries..
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27590_12797845.1151398223201"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27590_12797845.1151398223201
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi i am using lucene 1.9.1.

My query is :

(subject:cs OR author:ritchie)
I am creating one Boolean query for two TermQueries.
t1 = new Term("subject", "cs")
t2 = new Term("author","ritchie")

for this the BooleanQuery i created is:
BooleanQuery mergedQuery = new BooleanQuery();
mergedQuery.add(new TermQuery(t1),BooleanClause.Occur.MUST);
mergedQuery.add(new TermQuery(t2),BooleanClause.Occur.SHOULD);


When i saw the final query using i found
+subject:cs author:ritchie

Now when i go for search using this query it gave me all "subject:cs"
results. But i was expecting that it will give me the union of two.
What's wrong with this???


With Regards....

------=_Part_27590_12797845.1151398223201--

From java-user-return-21576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 08:52:06 2006
Return-Path: <java-user-return-21576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35771 invoked from network); 27 Jun 2006 08:52:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 08:52:05 -0000
Received: (qmail 64429 invoked by uid 500); 27 Jun 2006 08:51:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64184 invoked by uid 500); 27 Jun 2006 08:51:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64173 invoked by uid 99); 27 Jun 2006 08:51:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 01:51:58 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 01:51:57 -0700
Received: by py-out-1112.google.com with SMTP id c59so1846130pyc
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 01:51:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IqKwartfqHf+TjQTPE1/AZWm+4OoLCkX9W7UbLQVrGtthxJo2jf7UGqJLLcig1snLMUMEj2Y7oO8ZupOpr1ZWcpo0xmfVV2a0Hz88DN0YfuM61LWQXBJYbCsjZ6/3sG1fSwiUTAUcA/rRwqg8XzCEPBMUc7WZFRhE4kSXKyzIuY=
Received: by 10.35.85.1 with SMTP id n1mr6955698pyl;
        Tue, 27 Jun 2006 01:51:36 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Tue, 27 Jun 2006 01:51:36 -0700 (PDT)
Message-ID: <a36516400606270151k1e57b23cgbe6f4020ba18a5a4@mail.gmail.com>
Date: Tue, 27 Jun 2006 14:21:36 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: Searching is taking a lot...
In-Reply-To: <44A0E27A.2000406@uni-hd.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27610_17811322.1151398296802"
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
	 <449FEBE4.6050502@syr.edu>
	 <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu>
	 <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
	 <44A0E27A.2000406@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27610_17811322.1151398296802
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. I am not sorting the data...



On 6/27/06, Martin Braun <mbraun@uni-hd.de> wrote:
>
> Hi chris,
> > searching everytime using a new searcher was taking time. So For
> testing, i
> > made it a static one and reused the same. This gave me a lot of
> > improvement.
> > Previously my query was taking approx 25 sec. But now most of the
> queries
> > are taking time between the 100 and 800 ms.
>
> Do you use a kind of sorting? I had this issue with SortField.STRING, it
> takes a lot of time and memory to build the sort cache of all terms in
> the field (of type String). So if the searcher needs to rebuild this
> with each query it takes a while...
>
> hth,
> martin
>
> > Here also i noticed that the query is taking time only first time. If
> you
> > fire the same query again it takes very very less.
> > Can anybody tell me the story behibd this.
> >
> > With Regards.........
> >
> > On 6/26/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >>
> >>
> >> : Can you provide some information on your setup?  How are you indexing
> >> : and searching?  Do you have a lot of terms in your query, etc?  Have
> >> you
> >> : done any profiling of your setup to determine where the bottlenecks
> >> : are?   Are you sure they are in Lucene?
> >>
> >> what methods are you using for doing the search? (Hits, HitCollector,
> >> TopDocs)  are you sorting?   are you opening a new IndexSearcher for
> each
> >> searcher?  what exactly are you timing (a single "search" method call,
> an
> >> iteration over every matching doc id? an iteration over every matching
> >> doc
> >> to get a stored field?)
> >>
> >> :
> >> : -Grant
> >> :
> >> : heritrix.lucene wrote:
> >> : > Hi,
> >> : > I have created an index of 47 Million documents.
> >> : > I have 1.28GB RAM.
> >> : > When i am doing a search over this index it is taking on average 25
> >> : > sec. Is
> >> : > there a way so that i can get results in part of a second...
> >> : > I hope there must be some ways..
> >> : >
> >> : > Thanks and regards..
> >> : >
> >> :
> >> : --
> >> :
> >> : Grant Ingersoll
> >> : Sr. Software Engineer
> >> : Center for Natural Language Processing
> >> : Syracuse University
> >> : School of Information Studies
> >> : 335 Hinds Hall
> >> : Syracuse, NY 13244
> >> :
> >> : http://www.cnlp.org
> >> : Voice:  315-443-5484
> >> : Fax: 315-443-6886
> >> :
> >> :
> >> : ---------------------------------------------------------------------
> >> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> : For additional commands, e-mail: java-user-help@lucene.apache.org
> >> :
> >>
> >>
> >>
> >> -Hoss
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> --
> Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
> Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27610_17811322.1151398296802--

From java-user-return-21577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 08:58:03 2006
Return-Path: <java-user-return-21577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38158 invoked from network); 27 Jun 2006 08:58:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 08:58:03 -0000
Received: (qmail 73791 invoked by uid 500); 27 Jun 2006 08:57:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73748 invoked by uid 500); 27 Jun 2006 08:57:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73736 invoked by uid 99); 27 Jun 2006 08:57:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 01:57:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 01:57:54 -0700
Received: by py-out-1112.google.com with SMTP id m51so1665249pye
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 01:57:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=X+PIybOSEKa+BfiQyfHonY0al9SKnL4Ve6edQ01bYwD6ZhuLWpVix7a1aBVSO3AbsRvt0GPUnFmKP2/37vCeviCJ5vMFvacAS7KS28LkZr7UnhOCdFjTdx5RiGW6/opq1+KvUs2Yug6eOrFlO4tEwQcPc3u1BJcCwxwyZwIfVTQ=
Received: by 10.35.129.19 with SMTP id g19mr6963097pyn;
        Tue, 27 Jun 2006 01:57:34 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Tue, 27 Jun 2006 01:57:34 -0700 (PDT)
Message-ID: <a36516400606270157x15d6bbbar429dcf550008a15d@mail.gmail.com>
Date: Tue, 27 Jun 2006 14:27:34 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet
In-Reply-To: <200606270824.k5R8OiWd018308@smtp-ft4.fr.colt.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27670_20213077.1151398654181"
References: <200606270824.k5R8OiWd018308@smtp-ft4.fr.colt.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27670_20213077.1151398654181
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,
The same question i asked yesterday. :-)
And now i know the answer :0

Creating a new searcher for each query will make your application very very
slow....... (leave this idea)
U can not have a static indexsearcher object. It will merge all results and
the user will get the result of their query alongwith the others :-)


The method that i am adopting is, i'll create a pool of static searchers.
and on every request the servlet will request a free searcher object from
the pool. When he is done with that pool. it'll return back the searcher
object to that pool. This way i'll reuse my searcher objects.


On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>
> Hello,
>
>
>
> I have a question about the IndexSearcher().
>
> I have a Servlet that has a searchDocument(String theQuery) method.
>
> These method instantiate a new IndexSearcher at each query:
>
>
>
> searchDocument(String theQuery)
>
> {
>
>             Searcher searcher =3D new IndexSearcher(indexPath);
>
>             =85
>
> }
>
>
>
> Is it a good way ? Or Is it better to use a static searcher, and use the
> same for each query (and for each user)=85
>
> Is it thread safe ? Will results not be mixed to users ? (if user A
> searchs
> car and user B searchs boats, is it sure that user A will get car and B
> will
> get boats, even if the IndexSearcher is static and is the same ?)
>
>
>
> Thanks a lot,
>
>
>
> Fab
>
>
> --
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
>
>
>

------=_Part_27670_20213077.1151398654181--

From java-user-return-21578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 09:02:45 2006
Return-Path: <java-user-return-21578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39527 invoked from network); 27 Jun 2006 09:02:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 09:02:45 -0000
Received: (qmail 84937 invoked by uid 500); 27 Jun 2006 09:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84907 invoked by uid 500); 27 Jun 2006 09:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84892 invoked by uid 99); 27 Jun 2006 09:02:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:02:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.41.78.197] (HELO smtp-ft5.fr.colt.net) (213.41.78.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:02:37 -0700
Received: from octofro (host.245.109.41.213.rev.coltfrance.com [213.41.109.245])
	by smtp-ft5.fr.colt.net (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id k5R92EGg009286
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 11:02:14 +0200
Message-Id: <200606270902.k5R92EGg009286@smtp-ft5.fr.colt.net>
From: "Fabrice Robini" <frobini@octo.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 11:02:05 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <a36516400606270157x15d6bbbar429dcf550008a15d@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaZx8wxKN4AxTpeQk+EWmYpH+D3FwAACstA
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thanks a lot for your reply :-)
I totally agree with you, I'm going to use a pool.
Are there "design-patterns" in a Lucene Sandbox about InsexSearcher =
pool?
What are the best practices ?=20

Thanks a lot,

Fab

-----Original Message-----
From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]=20
Sent: mardi 27 juin 2006 10:58
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet

Hi,
The same question i asked yesterday. :-)
And now i know the answer :0

Creating a new searcher for each query will make your application very =
very
slow....... (leave this idea)
U can not have a static indexsearcher object. It will merge all results =
and
the user will get the result of their query alongwith the others :-)


The method that i am adopting is, i'll create a pool of static =
searchers.
and on every request the servlet will request a free searcher object =
from
the pool. When he is done with that pool. it'll return back the searcher
object to that pool. This way i'll reuse my searcher objects.


On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>
> Hello,
>
>
>
> I have a question about the IndexSearcher().
>
> I have a Servlet that has a searchDocument(String theQuery) method.
>
> These method instantiate a new IndexSearcher at each query:
>
>
>
> searchDocument(String theQuery)
>
> {
>
>             Searcher searcher =3D new IndexSearcher(indexPath);
>
>             =85
>
> }
>
>
>
> Is it a good way ? Or Is it better to use a static searcher, and use =
the
> same for each query (and for each user)=85
>
> Is it thread safe ? Will results not be mixed to users ? (if user A
> searchs
> car and user B searchs boats, is it sure that user A will get car and =
B
> will
> get boats, even if the IndexSearcher is static and is the same ?)
>
>
>
> Thanks a lot,
>
>
>
> Fab
>
>
> --
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: =
26/06/2006
>
>
>

--=20
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: =
26/06/2006
=20

--=20
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: =
26/06/2006
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 09:03:50 2006
Return-Path: <java-user-return-21579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40051 invoked from network); 27 Jun 2006 09:03:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 09:03:50 -0000
Received: (qmail 88132 invoked by uid 500); 27 Jun 2006 09:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88103 invoked by uid 500); 27 Jun 2006 09:03:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88086 invoked by uid 99); 27 Jun 2006 09:03:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:03:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:03:42 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id k5R93DJV079233
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 11:03:13 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200606270903.k5R93DJV079233@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 11:03:07 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <a36516400606270157x15d6bbbar429dcf550008a15d@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
thread-index: AcaZx8zKgFGwrkFFQQ+iBmqozb2J8gAAHi2Q
X-Scanned-By: MIMEDefang 2.56 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
You are wrong.

In ur case (If I ignore any updates to index) , One IndexSearcher object is
enough.
IndexSearcher is thread safe.

Jelda

> -----Original Message-----
> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com] 
> Sent: Tuesday, June 27, 2006 10:58 AM
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher in Servlet
> 
> Hi,
> The same question i asked yesterday. :-) And now i know the answer :0
> 
> Creating a new searcher for each query will make your 
> application very very slow....... (leave this idea) U can not 
> have a static indexsearcher object. It will merge all results 
> and the user will get the result of their query alongwith the 
> others :-)
> 
> 
> The method that i am adopting is, i'll create a pool of 
> static searchers.
> and on every request the servlet will request a free searcher 
> object from the pool. When he is done with that pool. it'll 
> return back the searcher object to that pool. This way i'll 
> reuse my searcher objects.
> 
> 
> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
> >
> > Hello,
> >
> >
> >
> > I have a question about the IndexSearcher().
> >
> > I have a Servlet that has a searchDocument(String theQuery) method.
> >
> > These method instantiate a new IndexSearcher at each query:
> >
> >
> >
> > searchDocument(String theQuery)
> >
> > {
> >
> >             Searcher searcher = new IndexSearcher(indexPath);
> >
> >             .
> >
> > }
> >
> >
> >
> > Is it a good way ? Or Is it better to use a static 
> searcher, and use 
> > the same for each query (and for each user).
> >
> > Is it thread safe ? Will results not be mixed to users ? (if user A 
> > searchs car and user B searchs boats, is it sure that user 
> A will get 
> > car and B will get boats, even if the IndexSearcher is 
> static and is 
> > the same ?)
> >
> >
> >
> > Thanks a lot,
> >
> >
> >
> > Fab
> >
> >
> > --
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 
> > 26/06/2006
> >
> >
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 09:11:59 2006
Return-Path: <java-user-return-21580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42448 invoked from network); 27 Jun 2006 09:11:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 09:11:58 -0000
Received: (qmail 2371 invoked by uid 500); 27 Jun 2006 09:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2325 invoked by uid 500); 27 Jun 2006 09:11:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2309 invoked by uid 99); 27 Jun 2006 09:11:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:11:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:11:49 -0700
Received: by py-out-1112.google.com with SMTP id d42so1836773pyd
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 02:11:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KCZOAAlBsp6Sf+qi8Ecml2kaC8KEj+EDSvlH4onIEHG0mJMB6lrr/kqX9kWHmlQ7+/3jXlJyev7xqdaP50rnp7URWNmQtYJ+ELmArCwolAf1T+SpmuNGUY97CbvO7JG1dtu2SVc9HB1rFE8EEnqzH66F5Zlw1QB5rlHs4oHK0i8=
Received: by 10.35.82.15 with SMTP id j15mr6980541pyl;
        Tue, 27 Jun 2006 02:11:28 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Tue, 27 Jun 2006 02:11:28 -0700 (PDT)
Message-ID: <a36516400606270211n2fbb6e29i972eddf65ae2365@mail.gmail.com>
Date: Tue, 27 Jun 2006 14:41:28 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet
In-Reply-To: <200606270903.k5R93DJV079233@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27734_26860597.1151399488018"
References: <a36516400606270157x15d6bbbar429dcf550008a15d@mail.gmail.com>
	 <200606270903.k5R93DJV079233@pigeon.ciao.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27734_26860597.1151399488018
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I also had the same confusion. But today when i did the testing i found that
it will merge your results. Therefore i believe that indexSearcher is not
thread safe. I tried this on 10,000 requests per second.

With Regards

On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>
> Hi,
> You are wrong.
>
> In ur case (If I ignore any updates to index) , One IndexSearcher object
> is
> enough.
> IndexSearcher is thread safe.
>
> Jelda
>
> > -----Original Message-----
> > From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
> > Sent: Tuesday, June 27, 2006 10:58 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: IndexSearcher in Servlet
> >
> > Hi,
> > The same question i asked yesterday. :-) And now i know the answer :0
> >
> > Creating a new searcher for each query will make your
> > application very very slow....... (leave this idea) U can not
> > have a static indexsearcher object. It will merge all results
> > and the user will get the result of their query alongwith the
> > others :-)
> >
> >
> > The method that i am adopting is, i'll create a pool of
> > static searchers.
> > and on every request the servlet will request a free searcher
> > object from the pool. When he is done with that pool. it'll
> > return back the searcher object to that pool. This way i'll
> > reuse my searcher objects.
> >
> >
> > On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
> > >
> > > Hello,
> > >
> > >
> > >
> > > I have a question about the IndexSearcher().
> > >
> > > I have a Servlet that has a searchDocument(String theQuery) method.
> > >
> > > These method instantiate a new IndexSearcher at each query:
> > >
> > >
> > >
> > > searchDocument(String theQuery)
> > >
> > > {
> > >
> > >             Searcher searcher = new IndexSearcher(indexPath);
> > >
> > >             .
> > >
> > > }
> > >
> > >
> > >
> > > Is it a good way ? Or Is it better to use a static
> > searcher, and use
> > > the same for each query (and for each user).
> > >
> > > Is it thread safe ? Will results not be mixed to users ? (if user A
> > > searchs car and user B searchs boats, is it sure that user
> > A will get
> > > car and B will get boats, even if the IndexSearcher is
> > static and is
> > > the same ?)
> > >
> > >
> > >
> > > Thanks a lot,
> > >
> > >
> > >
> > > Fab
> > >
> > >
> > > --
> > > No virus found in this outgoing message.
> > > Checked by AVG Free Edition.
> > > Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
> > > 26/06/2006
> > >
> > >
> > >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27734_26860597.1151399488018--

From java-user-return-21581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 09:41:10 2006
Return-Path: <java-user-return-21581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55865 invoked from network); 27 Jun 2006 09:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 09:41:09 -0000
Received: (qmail 55753 invoked by uid 500); 27 Jun 2006 09:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55728 invoked by uid 500); 27 Jun 2006 09:41:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55709 invoked by uid 99); 27 Jun 2006 09:41:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:41:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:41:02 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AC92830EFCD4; Tue, 27 Jun 2006 05:40:41 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id D770530EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 05:40:39 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <a36516400606270211n2fbb6e29i972eddf65ae2365@mail.gmail.com>
References: <a36516400606270157x15d6bbbar429dcf550008a15d@mail.gmail.com> <200606270903.k5R93DJV079233@pigeon.ciao.com> <a36516400606270211n2fbb6e29i972eddf65ae2365@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8DF57F78-1114-4CB8-A238-3863CD1C141C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 05:40:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
> Hi,
> I also had the same confusion. But today when i did the testing i  
> found that
> it will merge your results. Therefore i believe that indexSearcher  
> is not
> thread safe. I tried this on 10,000 requests per second.

You must have something else wrong in your system if you're seeing  
results merged (or please provide us a test case that demonstrates  
this).

A static IndexSearcher works just fine, though is not really the  
right design for a web application as you'd want to put it into  
application scope instead.  Statics can be trouble in web  
applications that end up getting distributed.

	Erik




>
> With Regards
>
> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>
>> Hi,
>> You are wrong.
>>
>> In ur case (If I ignore any updates to index) , One IndexSearcher  
>> object
>> is
>> enough.
>> IndexSearcher is thread safe.
>>
>> Jelda
>>
>> > -----Original Message-----
>> > From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>> > Sent: Tuesday, June 27, 2006 10:58 AM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: IndexSearcher in Servlet
>> >
>> > Hi,
>> > The same question i asked yesterday. :-) And now i know the  
>> answer :0
>> >
>> > Creating a new searcher for each query will make your
>> > application very very slow....... (leave this idea) U can not
>> > have a static indexsearcher object. It will merge all results
>> > and the user will get the result of their query alongwith the
>> > others :-)
>> >
>> >
>> > The method that i am adopting is, i'll create a pool of
>> > static searchers.
>> > and on every request the servlet will request a free searcher
>> > object from the pool. When he is done with that pool. it'll
>> > return back the searcher object to that pool. This way i'll
>> > reuse my searcher objects.
>> >
>> >
>> > On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>> > >
>> > > Hello,
>> > >
>> > >
>> > >
>> > > I have a question about the IndexSearcher().
>> > >
>> > > I have a Servlet that has a searchDocument(String theQuery)  
>> method.
>> > >
>> > > These method instantiate a new IndexSearcher at each query:
>> > >
>> > >
>> > >
>> > > searchDocument(String theQuery)
>> > >
>> > > {
>> > >
>> > >             Searcher searcher = new IndexSearcher(indexPath);
>> > >
>> > >             .
>> > >
>> > > }
>> > >
>> > >
>> > >
>> > > Is it a good way ? Or Is it better to use a static
>> > searcher, and use
>> > > the same for each query (and for each user).
>> > >
>> > > Is it thread safe ? Will results not be mixed to users ? (if  
>> user A
>> > > searchs car and user B searchs boats, is it sure that user
>> > A will get
>> > > car and B will get boats, even if the IndexSearcher is
>> > static and is
>> > > the same ?)
>> > >
>> > >
>> > >
>> > > Thanks a lot,
>> > >
>> > >
>> > >
>> > > Fab
>> > >
>> > >
>> > > --
>> > > No virus found in this outgoing message.
>> > > Checked by AVG Free Edition.
>> > > Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>> > > 26/06/2006
>> > >
>> > >
>> > >
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 09:47:42 2006
Return-Path: <java-user-return-21582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58101 invoked from network); 27 Jun 2006 09:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 09:47:42 -0000
Received: (qmail 66550 invoked by uid 500); 27 Jun 2006 09:47:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66514 invoked by uid 500); 27 Jun 2006 09:47:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66503 invoked by uid 99); 27 Jun 2006 09:47:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:47:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.41.78.197] (HELO smtp-ft5.fr.colt.net) (213.41.78.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 02:47:35 -0700
Received: from octofro (host.245.109.41.213.rev.coltfrance.com [213.41.109.245])
	by smtp-ft5.fr.colt.net (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id k5R9lCeh026626
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 11:47:12 +0200
Message-Id: <200606270947.k5R9lCeh026626@smtp-ft5.fr.colt.net>
From: "Fabrice Robini" <frobini@octo.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 11:47:03 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <8DF57F78-1114-4CB8-A238-3863CD1C141C@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaZzdIq8qzXjlCCQKqkpuNYc+FsbQAAKS/Q
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

What is your advice for webApplication ?

- IndexSearcher pool ?
- New IndexSearcher for each query ?
- Something else ?

Thanks a lot,

Fab

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: mardi 27 juin 2006 11:41
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet


On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
> Hi,
> I also had the same confusion. But today when i did the testing i  
> found that
> it will merge your results. Therefore i believe that indexSearcher  
> is not
> thread safe. I tried this on 10,000 requests per second.

You must have something else wrong in your system if you're seeing  
results merged (or please provide us a test case that demonstrates  
this).

A static IndexSearcher works just fine, though is not really the  
right design for a web application as you'd want to put it into  
application scope instead.  Statics can be trouble in web  
applications that end up getting distributed.

	Erik




>
> With Regards
>
> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>
>> Hi,
>> You are wrong.
>>
>> In ur case (If I ignore any updates to index) , One IndexSearcher  
>> object
>> is
>> enough.
>> IndexSearcher is thread safe.
>>
>> Jelda
>>
>> > -----Original Message-----
>> > From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>> > Sent: Tuesday, June 27, 2006 10:58 AM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: IndexSearcher in Servlet
>> >
>> > Hi,
>> > The same question i asked yesterday. :-) And now i know the  
>> answer :0
>> >
>> > Creating a new searcher for each query will make your
>> > application very very slow....... (leave this idea) U can not
>> > have a static indexsearcher object. It will merge all results
>> > and the user will get the result of their query alongwith the
>> > others :-)
>> >
>> >
>> > The method that i am adopting is, i'll create a pool of
>> > static searchers.
>> > and on every request the servlet will request a free searcher
>> > object from the pool. When he is done with that pool. it'll
>> > return back the searcher object to that pool. This way i'll
>> > reuse my searcher objects.
>> >
>> >
>> > On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>> > >
>> > > Hello,
>> > >
>> > >
>> > >
>> > > I have a question about the IndexSearcher().
>> > >
>> > > I have a Servlet that has a searchDocument(String theQuery)  
>> method.
>> > >
>> > > These method instantiate a new IndexSearcher at each query:
>> > >
>> > >
>> > >
>> > > searchDocument(String theQuery)
>> > >
>> > > {
>> > >
>> > >             Searcher searcher = new IndexSearcher(indexPath);
>> > >
>> > >             .
>> > >
>> > > }
>> > >
>> > >
>> > >
>> > > Is it a good way ? Or Is it better to use a static
>> > searcher, and use
>> > > the same for each query (and for each user).
>> > >
>> > > Is it thread safe ? Will results not be mixed to users ? (if  
>> user A
>> > > searchs car and user B searchs boats, is it sure that user
>> > A will get
>> > > car and B will get boats, even if the IndexSearcher is
>> > static and is
>> > > the same ?)
>> > >
>> > >
>> > >
>> > > Thanks a lot,
>> > >
>> > >
>> > >
>> > > Fab
>> > >
>> > >
>> > > --
>> > > No virus found in this outgoing message.
>> > > Checked by AVG Free Edition.
>> > > Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>> > > 26/06/2006
>> > >
>> > >
>> > >
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 10:07:06 2006
Return-Path: <java-user-return-21583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64074 invoked from network); 27 Jun 2006 10:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 10:07:06 -0000
Received: (qmail 1495 invoked by uid 500); 27 Jun 2006 10:06:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1470 invoked by uid 500); 27 Jun 2006 10:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1459 invoked by uid 99); 27 Jun 2006 10:06:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:06:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:06:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8845330EFCD4; Tue, 27 Jun 2006 06:06:33 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id DD6F530EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 06:06:30 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <op.tbsljawsoftp72@melkor-lap>
References: <op.tbsljawsoftp72@melkor-lap>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1CB4819A-6F4C-4E18-8DCB-D4F45BC97424@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Index confusion and organization
Date: Tue, 27 Jun 2006 06:06:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Aleksander - if you're wrapping Lucene with a web service, you'd do  
well to investigate Solr - http://incubator.apache.org/solr - as it  
handles all of the index management in a very elegant fashion.  It  
currently does not support a SOAP interface, but rather a RESTful  
light-weight custom XML format, but I'm sure a SOAP interface would  
be a welcome contribution if that is what you're using.

And yes, you're right it is tricky to manage and it often varies per- 
project on the needs of IndexSearcher management.

	Erik


On Jun 27, 2006, at 2:55 AM, Aleksander M. Stensby wrote:

> Hello,
>
> I tried sending this message yesterday, but I think i wasn't  
> registered until now, so i'll post again. (Sorry if this gets  
> doubled up).
>
> I have recently started using Lucene and I must say i love it:)
>
> But, i have a few questions (probably stupid ones), but still, here  
> goes:
>
> I have created one project that reads information from a database,  
> then indexes this information in a Lucene Index. This process runs  
> about 4 times a day (the database has constant input flow).
>
> In the beginning of my development i created a search engine  
> project to search this engine (web-based) using lucene and spring.  
> (i have yet to investigate Compass Framework)
>
> I have recently found an increasing need to restructure my code- 
> base and make the search logic available to other projects aswell.  
> I therefore created a search-API and a search-luceneimpl project.
>
> I then created another project, a web service offering the basic  
> search feature, with a list of information beans as a return object.
>
> the problem is this, (and the whole confusion regarding  
> indexsearchers, writers and stuff:) ):
> i noticed today that the webservice only access a "snapshot" of the  
> index, from the actual moment the webservice was loaded. If i then  
> reload the webservice context, the results will be "up-to-date"  
> again. So it seems that i have done something wrong in my logic. (doh)
>
> In the webservice, i load my searcher-class from the spring- 
> context, setting it in the constructor.
>
> The searcher-class have the following logic in its constructor:
>   searcher = new IndexSearcher(indexPath);
>
> then i have specified a close-method in the spring-context, which  
> will call the close method containing the
>   searcher.close();
>
> I have read that one should only open one searcher object and use  
> this for all searches, then close it when done... Well, that is a  
> bit tricky i think. As for now i have to projects "reading" from  
> the index (the old search-engine project) and this new web service.  
> In addition the indexer-project is the only project writing to the  
> index...
>
> Any ideas or input to a mere beginner on how to organize this mess?
>
> Sincerely yours,
> Aleksander M. Stensby
>
> -- 
> Aleksander M. Stensby
> Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
> Tlf.: +47 41 22 82 72
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 10:25:40 2006
Return-Path: <java-user-return-21584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70167 invoked from network); 27 Jun 2006 10:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 10:25:40 -0000
Received: (qmail 26486 invoked by uid 500); 27 Jun 2006 10:25:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26450 invoked by uid 500); 27 Jun 2006 10:25:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26434 invoked by uid 99); 27 Jun 2006 10:25:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:25:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:25:31 -0700
Received: from melkor-lap [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A38E0474; Tue, 27 Jun 2006 12:08:14 +0200
Date: Tue, 27 Jun 2006 12:24:58 +0200
To: java-user@lucene.apache.org
Subject: Re: Index confusion and organization
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <op.tbsljawsoftp72@melkor-lap> <1CB4819A-6F4C-4E18-8DCB-D4F45BC97424@ehatchersolutions.com>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tbsu7wjloftp72@melkor-lap>
In-Reply-To: <1CB4819A-6F4C-4E18-8DCB-D4F45BC97424@ehatchersolutions.com>
User-Agent: Opera Mail(BETA2)/9.00 (Win32)
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: D038e097e0000a248.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you very much Erik!
I will definatly check into this. I'm currently using xfire in my  =

implementation. I guess to big issue was/is that the indexing is done by=
  =

one application, and the searching from several different applications. =
 =

(obviously)

I have been bitten by the lucene-virus;) Heh, so I tend to think, hmm,  =

maybe i should use an lucene index here instead!? :)

Trying to sort things out now, and recently moved most of my codebase to=
  =

lucene 2.0.0. (some minor problem since i skipped the whole 1.9.0 step, =
 =

and then in terms jumped past all the deprecation-warnings (doh!). :) Bu=
t  =

now it seems to be working just fine:) (well, apart from the  =

searcher/writer/reader-mess :(

On Tue, 27 Jun 2006 12:06:27 +0200, Erik Hatcher  =

<erik@ehatchersolutions.com> wrote:

> Aleksander - if you're wrapping Lucene with a web service, you'd do we=
ll  =

> to investigate Solr - http://incubator.apache.org/solr - as it handles=
  =

> all of the index management in a very elegant fashion.  It currently  =

> does not support a SOAP interface, but rather a RESTful light-weight  =

> custom XML format, but I'm sure a SOAP interface would be a welcome  =

> contribution if that is what you're using.
>
> And yes, you're right it is tricky to manage and it often varies per- =

> project on the needs of IndexSearcher management.
>
> 	Erik
>
>
> On Jun 27, 2006, at 2:55 AM, Aleksander M. Stensby wrote:
>
>> Hello,
>>
>> I tried sending this message yesterday, but I think i wasn't register=
ed  =

>> until now, so i'll post again. (Sorry if this gets doubled up).
>>
>> I have recently started using Lucene and I must say i love it:)
>>
>> But, i have a few questions (probably stupid ones), but still, here  =

>> goes:
>>
>> I have created one project that reads information from a database, th=
en  =

>> indexes this information in a Lucene Index. This process runs about 4=
  =

>> times a day (the database has constant input flow).
>>
>> In the beginning of my development i created a search engine project =
to  =

>> search this engine (web-based) using lucene and spring. (i have yet t=
o  =

>> investigate Compass Framework)
>>
>> I have recently found an increasing need to restructure my code-base =
 =

>> and make the search logic available to other projects aswell. I  =

>> therefore created a search-API and a search-luceneimpl project.
>>
>> I then created another project, a web service offering the basic sear=
ch  =

>> feature, with a list of information beans as a return object.
>>
>> the problem is this, (and the whole confusion regarding indexsearcher=
s,  =

>> writers and stuff:) ):
>> i noticed today that the webservice only access a "snapshot" of the  =

>> index, from the actual moment the webservice was loaded. If i then  =

>> reload the webservice context, the results will be "up-to-date" again=
.  =

>> So it seems that i have done something wrong in my logic. (doh)
>>
>> In the webservice, i load my searcher-class from the spring-context, =
 =

>> setting it in the constructor.
>>
>> The searcher-class have the following logic in its constructor:
>>   searcher =3D new IndexSearcher(indexPath);
>>
>> then i have specified a close-method in the spring-context, which wil=
l  =

>> call the close method containing the
>>   searcher.close();
>>
>> I have read that one should only open one searcher object and use thi=
s  =

>> for all searches, then close it when done... Well, that is a bit tric=
ky  =

>> i think. As for now i have to projects "reading" from the index (the =
 =

>> old search-engine project) and this new web service. In addition the =
 =

>> indexer-project is the only project writing to the index...
>>
>> Any ideas or input to a mere beginner on how to organize this mess?
>>
>> Sincerely yours,
>> Aleksander M. Stensby
>>
>> --Aleksander M. Stensby
>> Software Developer
>> Integrasco A/S
>> aleksander.stensby@integrasco.no
>> Tlf.: +47 41 22 82 72
>>
>> ---------------------------------------------------------------------=

>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 10:50:03 2006
Return-Path: <java-user-return-21585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77490 invoked from network); 27 Jun 2006 10:50:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 10:50:02 -0000
Received: (qmail 57611 invoked by uid 500); 27 Jun 2006 10:49:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57586 invoked by uid 500); 27 Jun 2006 10:49:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57575 invoked by uid 99); 27 Jun 2006 10:49:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:49:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:49:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0919930EFCD4; Tue, 27 Jun 2006 06:49:34 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id B8CC530EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 06:49:23 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <200606270947.k5R9lCeh026626@smtp-ft5.fr.colt.net>
References: <200606270947.k5R9lCeh026626@smtp-ft5.fr.colt.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AEB9B733-E9D3-42C6-87F7-F690CBD207D9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 06:49:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 27, 2006, at 5:47 AM, Fabrice Robini wrote:
> What is your advice for webApplication ?

It all depends :)

> - IndexSearcher pool ?

No point in that.  A single IndexSearcher for searches is all that is  
ever needed.  Having a warming IndexSearcher, as Solr implements,  
makes sense in some cases.

> - New IndexSearcher for each query ?

Never!

> - Something else ?

Again, it all depends on your Lucene usage.  If the index is static  
only a single IndexSearcher is needed.  If you you need to manage  
updates you have to decide how quickly those updates are visible  
(everyone will always say "immediately" to that question, but  
pragmatically there are lots of things to consider in this regard).

Sorry there isn't a single best answer.   But I am quite happy with  
Solr's mechanism, but I'm using a Ruby on Rails front-end so a web  
service makes sense in my current project.

	Erik



>
> Thanks a lot,
>
> Fab
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: mardi 27 juin 2006 11:41
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher in Servlet
>
>
> On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
>> Hi,
>> I also had the same confusion. But today when i did the testing i
>> found that
>> it will merge your results. Therefore i believe that indexSearcher
>> is not
>> thread safe. I tried this on 10,000 requests per second.
>
> You must have something else wrong in your system if you're seeing
> results merged (or please provide us a test case that demonstrates
> this).
>
> A static IndexSearcher works just fine, though is not really the
> right design for a web application as you'd want to put it into
> application scope instead.  Statics can be trouble in web
> applications that end up getting distributed.
>
> 	Erik
>
>
>
>
>>
>> With Regards
>>
>> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>>
>>> Hi,
>>> You are wrong.
>>>
>>> In ur case (If I ignore any updates to index) , One IndexSearcher
>>> object
>>> is
>>> enough.
>>> IndexSearcher is thread safe.
>>>
>>> Jelda
>>>
>>>> -----Original Message-----
>>>> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>>>> Sent: Tuesday, June 27, 2006 10:58 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: IndexSearcher in Servlet
>>>>
>>>> Hi,
>>>> The same question i asked yesterday. :-) And now i know the
>>> answer :0
>>>>
>>>> Creating a new searcher for each query will make your
>>>> application very very slow....... (leave this idea) U can not
>>>> have a static indexsearcher object. It will merge all results
>>>> and the user will get the result of their query alongwith the
>>>> others :-)
>>>>
>>>>
>>>> The method that i am adopting is, i'll create a pool of
>>>> static searchers.
>>>> and on every request the servlet will request a free searcher
>>>> object from the pool. When he is done with that pool. it'll
>>>> return back the searcher object to that pool. This way i'll
>>>> reuse my searcher objects.
>>>>
>>>>
>>>> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>>>>>
>>>>> Hello,
>>>>>
>>>>>
>>>>>
>>>>> I have a question about the IndexSearcher().
>>>>>
>>>>> I have a Servlet that has a searchDocument(String theQuery)
>>> method.
>>>>>
>>>>> These method instantiate a new IndexSearcher at each query:
>>>>>
>>>>>
>>>>>
>>>>> searchDocument(String theQuery)
>>>>>
>>>>> {
>>>>>
>>>>>             Searcher searcher = new IndexSearcher(indexPath);
>>>>>
>>>>>             .
>>>>>
>>>>> }
>>>>>
>>>>>
>>>>>
>>>>> Is it a good way ? Or Is it better to use a static
>>>> searcher, and use
>>>>> the same for each query (and for each user).
>>>>>
>>>>> Is it thread safe ? Will results not be mixed to users ? (if
>>> user A
>>>>> searchs car and user B searchs boats, is it sure that user
>>>> A will get
>>>>> car and B will get boats, even if the IndexSearcher is
>>>> static and is
>>>>> the same ?)
>>>>>
>>>>>
>>>>>
>>>>> Thanks a lot,
>>>>>
>>>>>
>>>>>
>>>>> Fab
>>>>>
>>>>>
>>>>> --
>>>>> No virus found in this outgoing message.
>>>>> Checked by AVG Free Edition.
>>>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>>>>> 26/06/2006
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> -- 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:  
> 26/06/2006
>
>
> -- 
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:  
> 26/06/2006
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 10:50:25 2006
Return-Path: <java-user-return-21586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77663 invoked from network); 27 Jun 2006 10:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 10:50:25 -0000
Received: (qmail 59388 invoked by uid 500); 27 Jun 2006 10:50:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59364 invoked by uid 500); 27 Jun 2006 10:50:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59349 invoked by uid 99); 27 Jun 2006 10:50:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:50:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:50:18 -0700
Received: by py-out-1112.google.com with SMTP id f25so1784568pyf
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 03:49:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cmzNaPSsGXS5eQtw35Ufw8vcAUG0PRsss+VZiEs5kbF4zDkOUrRnGlG7yRn6SyovfEkhkInjy0ZgVHrapP6Qd8z5+PLnV2aPxXDGqyk4YOnH4HjfZT2k/kZCyQoXXwOniahD6Mgq7EK+c/2vsiArOzAGaFO3mkxd0xwb+1J8TqI=
Received: by 10.35.129.19 with SMTP id g19mr7052899pyn;
        Tue, 27 Jun 2006 03:49:57 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Tue, 27 Jun 2006 03:49:56 -0700 (PDT)
Message-ID: <a36516400606270349y5718b257qaa313f2ea54520b8@mail.gmail.com>
Date: Tue, 27 Jun 2006 16:19:56 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet
In-Reply-To: <200606270947.k5R9lCeh026626@smtp-ft5.fr.colt.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_835_32810175.1151405396982"
References: <8DF57F78-1114-4CB8-A238-3863CD1C141C@ehatchersolutions.com>
	 <200606270947.k5R9lCeh026626@smtp-ft5.fr.colt.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_835_32810175.1151405396982
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,
I am sorry on my mistake. Now i am agree with you.
I had some mistake in my code, I was sharing the hits object in servlet and
that was my foolish mistake. Now since i changed it and when i again ran the
testcase, there was no problem.
i am using single static IndexSearcher now :)

Thanks to Erik and Ramana...


On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>
> Hi Erik,
>
> What is your advice for webApplication ?
>
> - IndexSearcher pool ?
> - New IndexSearcher for each query ?
> - Something else ?
>
> Thanks a lot,
>
> Fab
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: mardi 27 juin 2006 11:41
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher in Servlet
>
>
> On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
> > Hi,
> > I also had the same confusion. But today when i did the testing i
> > found that
> > it will merge your results. Therefore i believe that indexSearcher
> > is not
> > thread safe. I tried this on 10,000 requests per second.
>
> You must have something else wrong in your system if you're seeing
> results merged (or please provide us a test case that demonstrates
> this).
>
> A static IndexSearcher works just fine, though is not really the
> right design for a web application as you'd want to put it into
> application scope instead.  Statics can be trouble in web
> applications that end up getting distributed.
>
>         Erik
>
>
>
>
> >
> > With Regards
> >
> > On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> >>
> >> Hi,
> >> You are wrong.
> >>
> >> In ur case (If I ignore any updates to index) , One IndexSearcher
> >> object
> >> is
> >> enough.
> >> IndexSearcher is thread safe.
> >>
> >> Jelda
> >>
> >> > -----Original Message-----
> >> > From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
> >> > Sent: Tuesday, June 27, 2006 10:58 AM
> >> > To: java-user@lucene.apache.org
> >> > Subject: Re: IndexSearcher in Servlet
> >> >
> >> > Hi,
> >> > The same question i asked yesterday. :-) And now i know the
> >> answer :0
> >> >
> >> > Creating a new searcher for each query will make your
> >> > application very very slow....... (leave this idea) U can not
> >> > have a static indexsearcher object. It will merge all results
> >> > and the user will get the result of their query alongwith the
> >> > others :-)
> >> >
> >> >
> >> > The method that i am adopting is, i'll create a pool of
> >> > static searchers.
> >> > and on every request the servlet will request a free searcher
> >> > object from the pool. When he is done with that pool. it'll
> >> > return back the searcher object to that pool. This way i'll
> >> > reuse my searcher objects.
> >> >
> >> >
> >> > On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
> >> > >
> >> > > Hello,
> >> > >
> >> > >
> >> > >
> >> > > I have a question about the IndexSearcher().
> >> > >
> >> > > I have a Servlet that has a searchDocument(String theQuery)
> >> method.
> >> > >
> >> > > These method instantiate a new IndexSearcher at each query:
> >> > >
> >> > >
> >> > >
> >> > > searchDocument(String theQuery)
> >> > >
> >> > > {
> >> > >
> >> > >             Searcher searcher = new IndexSearcher(indexPath);
> >> > >
> >> > >             .
> >> > >
> >> > > }
> >> > >
> >> > >
> >> > >
> >> > > Is it a good way ? Or Is it better to use a static
> >> > searcher, and use
> >> > > the same for each query (and for each user).
> >> > >
> >> > > Is it thread safe ? Will results not be mixed to users ? (if
> >> user A
> >> > > searchs car and user B searchs boats, is it sure that user
> >> > A will get
> >> > > car and B will get boats, even if the IndexSearcher is
> >> > static and is
> >> > > the same ?)
> >> > >
> >> > >
> >> > >
> >> > > Thanks a lot,
> >> > >
> >> > >
> >> > >
> >> > > Fab
> >> > >
> >> > >
> >> > > --
> >> > > No virus found in this outgoing message.
> >> > > Checked by AVG Free Edition.
> >> > > Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
> >> > > 26/06/2006
> >> > >
> >> > >
> >> > >
> >> >
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> --
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
>
>
> --
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_835_32810175.1151405396982--

From java-user-return-21587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 10:55:02 2006
Return-Path: <java-user-return-21587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78324 invoked from network); 27 Jun 2006 10:55:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 10:55:02 -0000
Received: (qmail 65188 invoked by uid 500); 27 Jun 2006 10:54:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64521 invoked by uid 500); 27 Jun 2006 10:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64510 invoked by uid 99); 27 Jun 2006 10:54:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:54:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 03:54:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BD41030EFCD3; Tue, 27 Jun 2006 06:54:34 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id E8D4330EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 06:54:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <a36516400606270150q32d6edddp25e95fc4d42bdeab@mail.gmail.com>
References: <a36516400606270150q32d6edddp25e95fc4d42bdeab@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9B750AB4-B580-404E-BA5C-B20BD274ED63@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Understanding Boolean Queries..
Date: Tue, 27 Jun 2006 06:54:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you want OR, you need to make all clauses SHOULD, no MUSTs.

	Erik


On Jun 27, 2006, at 4:50 AM, heritrix.lucene wrote:

> Hi i am using lucene 1.9.1.
>
> My query is :
>
> (subject:cs OR author:ritchie)
> I am creating one Boolean query for two TermQueries.
> t1 = new Term("subject", "cs")
> t2 = new Term("author","ritchie")
>
> for this the BooleanQuery i created is:
> BooleanQuery mergedQuery = new BooleanQuery();
> mergedQuery.add(new TermQuery(t1),BooleanClause.Occur.MUST);
> mergedQuery.add(new TermQuery(t2),BooleanClause.Occur.SHOULD);
>
>
> When i saw the final query using i found
> +subject:cs author:ritchie
>
> Now when i go for search using this query it gave me all "subject:cs"
> results. But i was expecting that it will give me the union of two.
> What's wrong with this???
>
>
> With Regards....


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 12:01:44 2006
Return-Path: <java-user-return-21588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9964 invoked from network); 27 Jun 2006 12:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 12:01:43 -0000
Received: (qmail 82403 invoked by uid 500); 27 Jun 2006 12:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82328 invoked by uid 500); 27 Jun 2006 12:01:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82316 invoked by uid 99); 27 Jun 2006 12:01:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 05:01:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.41.78.210] (HELO smtp-ft1.fr.colt.net) (213.41.78.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 05:01:35 -0700
Received: from octofro (host.245.109.41.213.rev.coltfrance.com [213.41.109.245])
	by smtp-ft1.fr.colt.net (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id k5RC1BCs002501
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 14:01:11 +0200
Message-Id: <200606271201.k5RC1BCs002501@smtp-ft1.fr.colt.net>
From: "Fabrice Robini" <frobini@octo.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 14:01:02 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <AEB9B733-E9D3-42C6-87F7-F690CBD207D9@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaZ13Gg6l7dV6txStyjvDNrK22CpQACb3Ag
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik,

Thank you for your reply.
I'm goingto use the static IndexSearcher in my Servlet (my index is static).

Thanks :-)

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: mardi 27 juin 2006 12:49
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet


On Jun 27, 2006, at 5:47 AM, Fabrice Robini wrote:
> What is your advice for webApplication ?

It all depends :)

> - IndexSearcher pool ?

No point in that.  A single IndexSearcher for searches is all that is  
ever needed.  Having a warming IndexSearcher, as Solr implements,  
makes sense in some cases.

> - New IndexSearcher for each query ?

Never!

> - Something else ?

Again, it all depends on your Lucene usage.  If the index is static  
only a single IndexSearcher is needed.  If you you need to manage  
updates you have to decide how quickly those updates are visible  
(everyone will always say "immediately" to that question, but  
pragmatically there are lots of things to consider in this regard).

Sorry there isn't a single best answer.   But I am quite happy with  
Solr's mechanism, but I'm using a Ruby on Rails front-end so a web  
service makes sense in my current project.

	Erik



>
> Thanks a lot,
>
> Fab
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: mardi 27 juin 2006 11:41
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher in Servlet
>
>
> On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
>> Hi,
>> I also had the same confusion. But today when i did the testing i
>> found that
>> it will merge your results. Therefore i believe that indexSearcher
>> is not
>> thread safe. I tried this on 10,000 requests per second.
>
> You must have something else wrong in your system if you're seeing
> results merged (or please provide us a test case that demonstrates
> this).
>
> A static IndexSearcher works just fine, though is not really the
> right design for a web application as you'd want to put it into
> application scope instead.  Statics can be trouble in web
> applications that end up getting distributed.
>
> 	Erik
>
>
>
>
>>
>> With Regards
>>
>> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>>
>>> Hi,
>>> You are wrong.
>>>
>>> In ur case (If I ignore any updates to index) , One IndexSearcher
>>> object
>>> is
>>> enough.
>>> IndexSearcher is thread safe.
>>>
>>> Jelda
>>>
>>>> -----Original Message-----
>>>> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>>>> Sent: Tuesday, June 27, 2006 10:58 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: IndexSearcher in Servlet
>>>>
>>>> Hi,
>>>> The same question i asked yesterday. :-) And now i know the
>>> answer :0
>>>>
>>>> Creating a new searcher for each query will make your
>>>> application very very slow....... (leave this idea) U can not
>>>> have a static indexsearcher object. It will merge all results
>>>> and the user will get the result of their query alongwith the
>>>> others :-)
>>>>
>>>>
>>>> The method that i am adopting is, i'll create a pool of
>>>> static searchers.
>>>> and on every request the servlet will request a free searcher
>>>> object from the pool. When he is done with that pool. it'll
>>>> return back the searcher object to that pool. This way i'll
>>>> reuse my searcher objects.
>>>>
>>>>
>>>> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>>>>>
>>>>> Hello,
>>>>>
>>>>>
>>>>>
>>>>> I have a question about the IndexSearcher().
>>>>>
>>>>> I have a Servlet that has a searchDocument(String theQuery)
>>> method.
>>>>>
>>>>> These method instantiate a new IndexSearcher at each query:
>>>>>
>>>>>
>>>>>
>>>>> searchDocument(String theQuery)
>>>>>
>>>>> {
>>>>>
>>>>>             Searcher searcher = new IndexSearcher(indexPath);
>>>>>
>>>>>             .
>>>>>
>>>>> }
>>>>>
>>>>>
>>>>>
>>>>> Is it a good way ? Or Is it better to use a static
>>>> searcher, and use
>>>>> the same for each query (and for each user).
>>>>>
>>>>> Is it thread safe ? Will results not be mixed to users ? (if
>>> user A
>>>>> searchs car and user B searchs boats, is it sure that user
>>>> A will get
>>>>> car and B will get boats, even if the IndexSearcher is
>>>> static and is
>>>>> the same ?)
>>>>>
>>>>>
>>>>>
>>>>> Thanks a lot,
>>>>>
>>>>>
>>>>>
>>>>> Fab
>>>>>
>>>>>
>>>>> --
>>>>> No virus found in this outgoing message.
>>>>> Checked by AVG Free Edition.
>>>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>>>>> 26/06/2006
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> -- 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:  
> 26/06/2006
>
>
> -- 
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:  
> 26/06/2006
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 13:00:52 2006
Return-Path: <java-user-return-21589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30589 invoked from network); 27 Jun 2006 13:00:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 13:00:52 -0000
Received: (qmail 85280 invoked by uid 500); 27 Jun 2006 13:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85253 invoked by uid 500); 27 Jun 2006 13:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85242 invoked by uid 99); 27 Jun 2006 13:00:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 06:00:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 06:00:44 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 09:00:22 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA0255FAD2@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher in Servlet
Thread-Index: AcaZ13Gg6l7dV6txStyjvDNrK22CpQACb3AgAAIOP0A=
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

you can initiliaze your IndexSearcher in a Servlet Listner, and even =
warm it up with few queries. that way when the user sends the first =
query it won't take a long time to load the index in RAM.

> -----Original Message-----
> From: Fabrice Robini [mailto:frobini@octo.com]
> Sent: Tuesday, June 27, 2006 8:01 AM
> To: java-user@lucene.apache.org
> Subject: RE: IndexSearcher in Servlet
>=20
>=20
> Erik,
>=20
> Thank you for your reply.
> I'm goingto use the static IndexSearcher in my Servlet (my=20
> index is static).
>=20
> Thanks :-)
>=20
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
> Sent: mardi 27 juin 2006 12:49
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher in Servlet
>=20
>=20
> On Jun 27, 2006, at 5:47 AM, Fabrice Robini wrote:
> > What is your advice for webApplication ?
>=20
> It all depends :)
>=20
> > - IndexSearcher pool ?
>=20
> No point in that.  A single IndexSearcher for searches is all=20
> that is =20
> ever needed.  Having a warming IndexSearcher, as Solr implements, =20
> makes sense in some cases.
>=20
> > - New IndexSearcher for each query ?
>=20
> Never!
>=20
> > - Something else ?
>=20
> Again, it all depends on your Lucene usage.  If the index is static =20
> only a single IndexSearcher is needed.  If you you need to manage =20
> updates you have to decide how quickly those updates are visible =20
> (everyone will always say "immediately" to that question, but =20
> pragmatically there are lots of things to consider in this regard).
>=20
> Sorry there isn't a single best answer.   But I am quite happy with =20
> Solr's mechanism, but I'm using a Ruby on Rails front-end so a web =20
> service makes sense in my current project.
>=20
> 	Erik
>=20
>=20
>=20
> >
> > Thanks a lot,
> >
> > Fab
> >
> > -----Original Message-----
> > From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> > Sent: mardi 27 juin 2006 11:41
> > To: java-user@lucene.apache.org
> > Subject: Re: IndexSearcher in Servlet
> >
> >
> > On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
> >> Hi,
> >> I also had the same confusion. But today when i did the testing i
> >> found that
> >> it will merge your results. Therefore i believe that indexSearcher
> >> is not
> >> thread safe. I tried this on 10,000 requests per second.
> >
> > You must have something else wrong in your system if you're seeing
> > results merged (or please provide us a test case that demonstrates
> > this).
> >
> > A static IndexSearcher works just fine, though is not really the
> > right design for a web application as you'd want to put it into
> > application scope instead.  Statics can be trouble in web
> > applications that end up getting distributed.
> >
> > 	Erik
> >
> >
> >
> >
> >>
> >> With Regards
> >>
> >> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> >>>
> >>> Hi,
> >>> You are wrong.
> >>>
> >>> In ur case (If I ignore any updates to index) , One IndexSearcher
> >>> object
> >>> is
> >>> enough.
> >>> IndexSearcher is thread safe.
> >>>
> >>> Jelda
> >>>
> >>>> -----Original Message-----
> >>>> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
> >>>> Sent: Tuesday, June 27, 2006 10:58 AM
> >>>> To: java-user@lucene.apache.org
> >>>> Subject: Re: IndexSearcher in Servlet
> >>>>
> >>>> Hi,
> >>>> The same question i asked yesterday. :-) And now i know the
> >>> answer :0
> >>>>
> >>>> Creating a new searcher for each query will make your
> >>>> application very very slow....... (leave this idea) U can not
> >>>> have a static indexsearcher object. It will merge all results
> >>>> and the user will get the result of their query alongwith the
> >>>> others :-)
> >>>>
> >>>>
> >>>> The method that i am adopting is, i'll create a pool of
> >>>> static searchers.
> >>>> and on every request the servlet will request a free searcher
> >>>> object from the pool. When he is done with that pool. it'll
> >>>> return back the searcher object to that pool. This way i'll
> >>>> reuse my searcher objects.
> >>>>
> >>>>
> >>>> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
> >>>>>
> >>>>> Hello,
> >>>>>
> >>>>>
> >>>>>
> >>>>> I have a question about the IndexSearcher().
> >>>>>
> >>>>> I have a Servlet that has a searchDocument(String theQuery)
> >>> method.
> >>>>>
> >>>>> These method instantiate a new IndexSearcher at each query:
> >>>>>
> >>>>>
> >>>>>
> >>>>> searchDocument(String theQuery)
> >>>>>
> >>>>> {
> >>>>>
> >>>>>             Searcher searcher =3D new IndexSearcher(indexPath);
> >>>>>
> >>>>>             .
> >>>>>
> >>>>> }
> >>>>>
> >>>>>
> >>>>>
> >>>>> Is it a good way ? Or Is it better to use a static
> >>>> searcher, and use
> >>>>> the same for each query (and for each user).
> >>>>>
> >>>>> Is it thread safe ? Will results not be mixed to users ? (if
> >>> user A
> >>>>> searchs car and user B searchs boats, is it sure that user
> >>>> A will get
> >>>>> car and B will get boats, even if the IndexSearcher is
> >>>> static and is
> >>>>> the same ?)
> >>>>>
> >>>>>
> >>>>>
> >>>>> Thanks a lot,
> >>>>>
> >>>>>
> >>>>>
> >>>>> Fab
> >>>>>
> >>>>>
> >>>>> --
> >>>>> No virus found in this outgoing message.
> >>>>> Checked by AVG Free Edition.
> >>>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
> >>>>> 26/06/2006
> >>>>>
> >>>>>
> >>>>>
> >>>>
> >>>
> >>>
> >>>=20
> --------------------------------------------------------------------=20
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > --=20
> > No virus found in this incoming message.
> > Checked by AVG Free Edition.
> > Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: =20
> > 26/06/2006
> >
> >
> > --=20
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: =20
> > 26/06/2006
> >
> >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> --=20
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release=20
> Date: 26/06/2006
> =20
>=20
> --=20
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release=20
> Date: 26/06/2006
> =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 14:04:39 2006
Return-Path: <java-user-return-21590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73653 invoked from network); 27 Jun 2006 14:04:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 14:04:38 -0000
Received: (qmail 37061 invoked by uid 500); 27 Jun 2006 14:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37032 invoked by uid 500); 27 Jun 2006 14:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37021 invoked by uid 99); 27 Jun 2006 14:04:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:04:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.104.155.162] (HELO exch1.leadscope.com) (67.104.155.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:04:29 -0700
Received: from ASSP-nospam ([192.168.1.204]) by exch1.leadscope.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 27 Jun 2006 10:04:08 -0400
Received: from 192.168.1.205 ([192.168.1.205] helo=exch1.leadscope.com) by ASSP-nospam ; 27 Jun 06 14:04:08 -0000
content-class: urn:content-classes:message
Subject: RE: IndexSearcher in Servlet
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 27 Jun 2006 10:04:08 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Message-ID: <349E22F852C07A4DA7623A81DEE61304017C61@exch1.leadscope.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher in Servlet
Thread-Index: AcaZ12785E9WVAcbRluvUMqiyo3mogAGjH4Q
From: "Crump, Michael" <mcrump@leadscope.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2006 14:04:08.0403 (UTC) FILETIME=[8ED3FA30:01C699F2]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I have another question along this line.  One of the points made in this
thread was to never create a new IndexSearcher for each query.  Is this
true even in the case that an IndexSearcher is being created with a
static or cached IndexReader using the IndexSearcher(IndexReader reader)
constructor?  Obviously creating an object is more expensive than
reusing one but it looks like creating a new IndexSearcher from an
existing IndexReader really isn't that expensive and does get around
some of the complication of managing the static searcher.  Of course you
still have to manage the static reader.  Am I wrong in my thinking here?

Thanks,

Michael Crump

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Tuesday, June 27, 2006 6:49 AM
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet


On Jun 27, 2006, at 5:47 AM, Fabrice Robini wrote:
> What is your advice for webApplication ?

It all depends :)

> - IndexSearcher pool ?

No point in that.  A single IndexSearcher for searches is all that is =20
ever needed.  Having a warming IndexSearcher, as Solr implements, =20
makes sense in some cases.

> - New IndexSearcher for each query ?

Never!

> - Something else ?

Again, it all depends on your Lucene usage.  If the index is static =20
only a single IndexSearcher is needed.  If you you need to manage =20
updates you have to decide how quickly those updates are visible =20
(everyone will always say "immediately" to that question, but =20
pragmatically there are lots of things to consider in this regard).

Sorry there isn't a single best answer.   But I am quite happy with =20
Solr's mechanism, but I'm using a Ruby on Rails front-end so a web =20
service makes sense in my current project.

	Erik



>
> Thanks a lot,
>
> Fab
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: mardi 27 juin 2006 11:41
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher in Servlet
>
>
> On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
>> Hi,
>> I also had the same confusion. But today when i did the testing i
>> found that
>> it will merge your results. Therefore i believe that indexSearcher
>> is not
>> thread safe. I tried this on 10,000 requests per second.
>
> You must have something else wrong in your system if you're seeing
> results merged (or please provide us a test case that demonstrates
> this).
>
> A static IndexSearcher works just fine, though is not really the
> right design for a web application as you'd want to put it into
> application scope instead.  Statics can be trouble in web
> applications that end up getting distributed.
>
> 	Erik
>
>
>
>
>>
>> With Regards
>>
>> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>>
>>> Hi,
>>> You are wrong.
>>>
>>> In ur case (If I ignore any updates to index) , One IndexSearcher
>>> object
>>> is
>>> enough.
>>> IndexSearcher is thread safe.
>>>
>>> Jelda
>>>
>>>> -----Original Message-----
>>>> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>>>> Sent: Tuesday, June 27, 2006 10:58 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: IndexSearcher in Servlet
>>>>
>>>> Hi,
>>>> The same question i asked yesterday. :-) And now i know the
>>> answer :0
>>>>
>>>> Creating a new searcher for each query will make your
>>>> application very very slow....... (leave this idea) U can not
>>>> have a static indexsearcher object. It will merge all results
>>>> and the user will get the result of their query alongwith the
>>>> others :-)
>>>>
>>>>
>>>> The method that i am adopting is, i'll create a pool of
>>>> static searchers.
>>>> and on every request the servlet will request a free searcher
>>>> object from the pool. When he is done with that pool. it'll
>>>> return back the searcher object to that pool. This way i'll
>>>> reuse my searcher objects.
>>>>
>>>>
>>>> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>>>>>
>>>>> Hello,
>>>>>
>>>>>
>>>>>
>>>>> I have a question about the IndexSearcher().
>>>>>
>>>>> I have a Servlet that has a searchDocument(String theQuery)
>>> method.
>>>>>
>>>>> These method instantiate a new IndexSearcher at each query:
>>>>>
>>>>>
>>>>>
>>>>> searchDocument(String theQuery)
>>>>>
>>>>> {
>>>>>
>>>>>             Searcher searcher =3D new IndexSearcher(indexPath);
>>>>>
>>>>>             .
>>>>>
>>>>> }
>>>>>
>>>>>
>>>>>
>>>>> Is it a good way ? Or Is it better to use a static
>>>> searcher, and use
>>>>> the same for each query (and for each user).
>>>>>
>>>>> Is it thread safe ? Will results not be mixed to users ? (if
>>> user A
>>>>> searchs car and user B searchs boats, is it sure that user
>>>> A will get
>>>>> car and B will get boats, even if the IndexSearcher is
>>>> static and is
>>>>> the same ?)
>>>>>
>>>>>
>>>>>
>>>>> Thanks a lot,
>>>>>
>>>>>
>>>>>
>>>>> Fab
>>>>>
>>>>>
>>>>> --
>>>>> No virus found in this outgoing message.
>>>>> Checked by AVG Free Edition.
>>>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>>>>> 26/06/2006
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>> --------------------------------------------------------------------

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> --=20
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: =20
> 26/06/2006
>
>
> --=20
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: =20
> 26/06/2006
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 14:18:18 2006
Return-Path: <java-user-return-21591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79868 invoked from network); 27 Jun 2006 14:18:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 14:18:17 -0000
Received: (qmail 67160 invoked by uid 500); 27 Jun 2006 14:18:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67031 invoked by uid 500); 27 Jun 2006 14:18:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66995 invoked by uid 99); 27 Jun 2006 14:18:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:18:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:18:05 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1FvEOV-00046k-IO
	for java-user@lucene.apache.org; Tue, 27 Jun 2006 16:18:23 +0200
Message-ID: <44A13DED.9020708@tejnora.cz>
Date: Tue, 27 Jun 2006 16:17:17 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet
References: <349E22F852C07A4DA7623A81DEE61304017C61@exch1.leadscope.com>
In-Reply-To: <349E22F852C07A4DA7623A81DEE61304017C61@exch1.leadscope.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Singleton pattern is better. Than you can extend it to proxy pattern.

>existing IndexReader really isn't that expensive and does get around
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 14:32:47 2006
Return-Path: <java-user-return-21592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85999 invoked from network); 27 Jun 2006 14:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 14:32:46 -0000
Received: (qmail 4135 invoked by uid 500); 27 Jun 2006 14:32:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4101 invoked by uid 500); 27 Jun 2006 14:32:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4090 invoked by uid 99); 27 Jun 2006 14:32:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:32:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.41.78.205] (HELO smtp-ft3.fr.colt.net) (213.41.78.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:32:37 -0700
Received: from octofro (host.245.109.41.213.rev.coltfrance.com [213.41.109.245])
	by smtp-ft3.fr.colt.net (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id k5REWFAp009750
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 16:32:16 +0200
Message-Id: <200606271432.k5REWFAp009750@smtp-ft3.fr.colt.net>
From: "Fabrice Robini" <frobini@octo.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 16:32:04 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <349E22F852C07A4DA7623A81DEE61304017C61@exch1.leadscope.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaZ12785E9WVAcbRluvUMqiyo3mogAGjH4QAAEkaSA=
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That's also my case... 
I create a new IndexSearcher at each query, but with a static and
instanciated Directory.

New IndexSearcher(myDirectory)

It seems to be OK... am I wrong ?

-----Original Message-----
From: Crump, Michael [mailto:mcrump@leadscope.com] 
Sent: mardi 27 juin 2006 16:04
To: java-user@lucene.apache.org
Subject: RE: IndexSearcher in Servlet

Hello,

I have another question along this line.  One of the points made in this
thread was to never create a new IndexSearcher for each query.  Is this
true even in the case that an IndexSearcher is being created with a
static or cached IndexReader using the IndexSearcher(IndexReader reader)
constructor?  Obviously creating an object is more expensive than
reusing one but it looks like creating a new IndexSearcher from an
existing IndexReader really isn't that expensive and does get around
some of the complication of managing the static searcher.  Of course you
still have to manage the static reader.  Am I wrong in my thinking here?

Thanks,

Michael Crump

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Tuesday, June 27, 2006 6:49 AM
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet


On Jun 27, 2006, at 5:47 AM, Fabrice Robini wrote:
> What is your advice for webApplication ?

It all depends :)

> - IndexSearcher pool ?

No point in that.  A single IndexSearcher for searches is all that is  
ever needed.  Having a warming IndexSearcher, as Solr implements,  
makes sense in some cases.

> - New IndexSearcher for each query ?

Never!

> - Something else ?

Again, it all depends on your Lucene usage.  If the index is static  
only a single IndexSearcher is needed.  If you you need to manage  
updates you have to decide how quickly those updates are visible  
(everyone will always say "immediately" to that question, but  
pragmatically there are lots of things to consider in this regard).

Sorry there isn't a single best answer.   But I am quite happy with  
Solr's mechanism, but I'm using a Ruby on Rails front-end so a web  
service makes sense in my current project.

	Erik



>
> Thanks a lot,
>
> Fab
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: mardi 27 juin 2006 11:41
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher in Servlet
>
>
> On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
>> Hi,
>> I also had the same confusion. But today when i did the testing i
>> found that
>> it will merge your results. Therefore i believe that indexSearcher
>> is not
>> thread safe. I tried this on 10,000 requests per second.
>
> You must have something else wrong in your system if you're seeing
> results merged (or please provide us a test case that demonstrates
> this).
>
> A static IndexSearcher works just fine, though is not really the
> right design for a web application as you'd want to put it into
> application scope instead.  Statics can be trouble in web
> applications that end up getting distributed.
>
> 	Erik
>
>
>
>
>>
>> With Regards
>>
>> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>>
>>> Hi,
>>> You are wrong.
>>>
>>> In ur case (If I ignore any updates to index) , One IndexSearcher
>>> object
>>> is
>>> enough.
>>> IndexSearcher is thread safe.
>>>
>>> Jelda
>>>
>>>> -----Original Message-----
>>>> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>>>> Sent: Tuesday, June 27, 2006 10:58 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: IndexSearcher in Servlet
>>>>
>>>> Hi,
>>>> The same question i asked yesterday. :-) And now i know the
>>> answer :0
>>>>
>>>> Creating a new searcher for each query will make your
>>>> application very very slow....... (leave this idea) U can not
>>>> have a static indexsearcher object. It will merge all results
>>>> and the user will get the result of their query alongwith the
>>>> others :-)
>>>>
>>>>
>>>> The method that i am adopting is, i'll create a pool of
>>>> static searchers.
>>>> and on every request the servlet will request a free searcher
>>>> object from the pool. When he is done with that pool. it'll
>>>> return back the searcher object to that pool. This way i'll
>>>> reuse my searcher objects.
>>>>
>>>>
>>>> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>>>>>
>>>>> Hello,
>>>>>
>>>>>
>>>>>
>>>>> I have a question about the IndexSearcher().
>>>>>
>>>>> I have a Servlet that has a searchDocument(String theQuery)
>>> method.
>>>>>
>>>>> These method instantiate a new IndexSearcher at each query:
>>>>>
>>>>>
>>>>>
>>>>> searchDocument(String theQuery)
>>>>>
>>>>> {
>>>>>
>>>>>             Searcher searcher = new IndexSearcher(indexPath);
>>>>>
>>>>>             .
>>>>>
>>>>> }
>>>>>
>>>>>
>>>>>
>>>>> Is it a good way ? Or Is it better to use a static
>>>> searcher, and use
>>>>> the same for each query (and for each user).
>>>>>
>>>>> Is it thread safe ? Will results not be mixed to users ? (if
>>> user A
>>>>> searchs car and user B searchs boats, is it sure that user
>>>> A will get
>>>>> car and B will get boats, even if the IndexSearcher is
>>>> static and is
>>>>> the same ?)
>>>>>
>>>>>
>>>>>
>>>>> Thanks a lot,
>>>>>
>>>>>
>>>>>
>>>>> Fab
>>>>>
>>>>>
>>>>> --
>>>>> No virus found in this outgoing message.
>>>>> Checked by AVG Free Edition.
>>>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>>>>> 26/06/2006
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>> --------------------------------------------------------------------

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> -- 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:  
> 26/06/2006
>
>
> -- 
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:  
> 26/06/2006
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 26/06/2006
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 14:47:33 2006
Return-Path: <java-user-return-21593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90445 invoked from network); 27 Jun 2006 14:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 14:47:32 -0000
Received: (qmail 34002 invoked by uid 500); 27 Jun 2006 14:47:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33974 invoked by uid 500); 27 Jun 2006 14:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33963 invoked by uid 99); 27 Jun 2006 14:47:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:47:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:47:24 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C9A6D30EFCD4; Tue, 27 Jun 2006 10:47:02 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 068D030EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 10:46:59 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <349E22F852C07A4DA7623A81DEE61304017C61@exch1.leadscope.com>
References: <349E22F852C07A4DA7623A81DEE61304017C61@exch1.leadscope.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <70CE335A-68E8-48E3-AE6A-B146ECD3D0C9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 10:46:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael - you're absolutely right in your thinking.  As long as  
IndexReader is long-lived you'll be fine.  All caches internal to  
Lucene are based off the IndexReader, which is implicitly constructed  
under the covers of IndexSearcher if not specified directly.

	Erik


On Jun 27, 2006, at 10:04 AM, Crump, Michael wrote:

> Hello,
>
> I have another question along this line.  One of the points made in  
> this
> thread was to never create a new IndexSearcher for each query.  Is  
> this
> true even in the case that an IndexSearcher is being created with a
> static or cached IndexReader using the IndexSearcher(IndexReader  
> reader)
> constructor?  Obviously creating an object is more expensive than
> reusing one but it looks like creating a new IndexSearcher from an
> existing IndexReader really isn't that expensive and does get around
> some of the complication of managing the static searcher.  Of  
> course you
> still have to manage the static reader.  Am I wrong in my thinking  
> here?
>
> Thanks,
>
> Michael Crump
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tuesday, June 27, 2006 6:49 AM
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher in Servlet
>
>
> On Jun 27, 2006, at 5:47 AM, Fabrice Robini wrote:
>> What is your advice for webApplication ?
>
> It all depends :)
>
>> - IndexSearcher pool ?
>
> No point in that.  A single IndexSearcher for searches is all that is
> ever needed.  Having a warming IndexSearcher, as Solr implements,
> makes sense in some cases.
>
>> - New IndexSearcher for each query ?
>
> Never!
>
>> - Something else ?
>
> Again, it all depends on your Lucene usage.  If the index is static
> only a single IndexSearcher is needed.  If you you need to manage
> updates you have to decide how quickly those updates are visible
> (everyone will always say "immediately" to that question, but
> pragmatically there are lots of things to consider in this regard).
>
> Sorry there isn't a single best answer.   But I am quite happy with
> Solr's mechanism, but I'm using a Ruby on Rails front-end so a web
> service makes sense in my current project.
>
> 	Erik
>
>
>
>>
>> Thanks a lot,
>>
>> Fab
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: mardi 27 juin 2006 11:41
>> To: java-user@lucene.apache.org
>> Subject: Re: IndexSearcher in Servlet
>>
>>
>> On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
>>> Hi,
>>> I also had the same confusion. But today when i did the testing i
>>> found that
>>> it will merge your results. Therefore i believe that indexSearcher
>>> is not
>>> thread safe. I tried this on 10,000 requests per second.
>>
>> You must have something else wrong in your system if you're seeing
>> results merged (or please provide us a test case that demonstrates
>> this).
>>
>> A static IndexSearcher works just fine, though is not really the
>> right design for a web application as you'd want to put it into
>> application scope instead.  Statics can be trouble in web
>> applications that end up getting distributed.
>>
>> 	Erik
>>
>>
>>
>>
>>>
>>> With Regards
>>>
>>> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>>>
>>>> Hi,
>>>> You are wrong.
>>>>
>>>> In ur case (If I ignore any updates to index) , One IndexSearcher
>>>> object
>>>> is
>>>> enough.
>>>> IndexSearcher is thread safe.
>>>>
>>>> Jelda
>>>>
>>>>> -----Original Message-----
>>>>> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>>>>> Sent: Tuesday, June 27, 2006 10:58 AM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: IndexSearcher in Servlet
>>>>>
>>>>> Hi,
>>>>> The same question i asked yesterday. :-) And now i know the
>>>> answer :0
>>>>>
>>>>> Creating a new searcher for each query will make your
>>>>> application very very slow....... (leave this idea) U can not
>>>>> have a static indexsearcher object. It will merge all results
>>>>> and the user will get the result of their query alongwith the
>>>>> others :-)
>>>>>
>>>>>
>>>>> The method that i am adopting is, i'll create a pool of
>>>>> static searchers.
>>>>> and on every request the servlet will request a free searcher
>>>>> object from the pool. When he is done with that pool. it'll
>>>>> return back the searcher object to that pool. This way i'll
>>>>> reuse my searcher objects.
>>>>>
>>>>>
>>>>> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>>>>>>
>>>>>> Hello,
>>>>>>
>>>>>>
>>>>>>
>>>>>> I have a question about the IndexSearcher().
>>>>>>
>>>>>> I have a Servlet that has a searchDocument(String theQuery)
>>>> method.
>>>>>>
>>>>>> These method instantiate a new IndexSearcher at each query:
>>>>>>
>>>>>>
>>>>>>
>>>>>> searchDocument(String theQuery)
>>>>>>
>>>>>> {
>>>>>>
>>>>>>             Searcher searcher = new IndexSearcher(indexPath);
>>>>>>
>>>>>>             .
>>>>>>
>>>>>> }
>>>>>>
>>>>>>
>>>>>>
>>>>>> Is it a good way ? Or Is it better to use a static
>>>>> searcher, and use
>>>>>> the same for each query (and for each user).
>>>>>>
>>>>>> Is it thread safe ? Will results not be mixed to users ? (if
>>>> user A
>>>>>> searchs car and user B searchs boats, is it sure that user
>>>>> A will get
>>>>>> car and B will get boats, even if the IndexSearcher is
>>>>> static and is
>>>>>> the same ?)
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks a lot,
>>>>>>
>>>>>>
>>>>>>
>>>>>> Fab
>>>>>>
>>>>>>
>>>>>> --
>>>>>> No virus found in this outgoing message.
>>>>>> Checked by AVG Free Edition.
>>>>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>>>>>> 26/06/2006
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> -
>
>>>> -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> -- 
>> No virus found in this incoming message.
>> Checked by AVG Free Edition.
>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>> 26/06/2006
>>
>>
>> -- 
>> No virus found in this outgoing message.
>> Checked by AVG Free Edition.
>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>> 26/06/2006
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 14:49:04 2006
Return-Path: <java-user-return-21594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91118 invoked from network); 27 Jun 2006 14:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 14:49:04 -0000
Received: (qmail 40224 invoked by uid 500); 27 Jun 2006 14:48:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40195 invoked by uid 500); 27 Jun 2006 14:48:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40184 invoked by uid 99); 27 Jun 2006 14:48:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:48:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 07:48:56 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1F01430EFCD3; Tue, 27 Jun 2006 10:48:36 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 4C45930EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 10:48:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <200606271432.k5REWFAp009750@smtp-ft3.fr.colt.net>
References: <200606271432.k5REWFAp009750@smtp-ft3.fr.colt.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BAE7BAF7-1D3A-48E8-BE0E-0BC531B94E8E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 10:48:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 27, 2006, at 10:32 AM, Fabrice Robini wrote:
> That's also my case...
> I create a new IndexSearcher at each query, but with a static and
> instanciated Directory.
>
> New IndexSearcher(myDirectory)
>
> It seems to be OK... am I wrong ?

You may be "ok" given your query patterns, but you won't benefit from  
Lucene internal caching unless you use a single IndexSearcher (or  
IndexReader, as just pointed out).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 15:00:32 2006
Return-Path: <java-user-return-21595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97136 invoked from network); 27 Jun 2006 15:00:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 15:00:31 -0000
Received: (qmail 69975 invoked by uid 500); 27 Jun 2006 15:00:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69945 invoked by uid 500); 27 Jun 2006 15:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69934 invoked by uid 99); 27 Jun 2006 15:00:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:00:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wouter@2at.nl designates 213.154.233.61 as permitted sender)
Received: from [213.154.233.61] (HELO kronos.2at.net) (213.154.233.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:00:23 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Scoring purely on term frequencies
Date: Tue, 27 Jun 2006 16:59:59 +0200
Message-ID: <B50FE8BF4F9CF24FB800E28DBB1A2FE026D5BB@gaia.2at.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring purely on term frequencies
Thread-Index: AcZ7wqFdxW2gVEA0SAWo+JwdHF4M5AA8gEBwB1Ey52A=
From: "W.H. van Atteveldt" <wouter@2at.nl>
To: <java-user@lucene.apache.org>,
	<zgome@entopia.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear Ziv, List,

I am probably doing something stupid... I was trying to create a
Similarity that simply returns the number of matched terms per document
as the score. I tried making one that returns freq as tf and 1.0f as
anything else, but that gives strange results; same for something that
really returns 1.0f whatever.=20

The code is listed below, if anybody can help me out I would be very
grateful! (and this is the first time I'm using Lucene at all so forgive
me if I am getting something totally wrong...)=20

-- Wouter

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D HitCountSimilarity.java =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

import  org.apache.lucene.search.*;
import java.util.*;

public class HitCountSimilarity extends Similarity {

    public float coord(int overlap, int maxOverlap)
    {
        // Computes a score factor based on the fraction of all query
terms that a document contains.
        return 1.0f;
    }


    public float idf(Collection terms, Searcher searcher)
    {
        // Computes a score factor for a phrase.
        return 1.0f;
    }

    public float idf(int docFreq, int numDocs)
    {
        // Computes a score factor based on a term's document frequency
(the number of documents which contain the term).
        return 1.0f;
    }

    public float idf(org.apache.lucene.index.Term term, Searcher
searcher)
    {
        // Computes a score factor for a simple term.
        return 1.0f;
    }

    public float lengthNorm(String fieldName, int numTokens)
    {
        // Computes the normalization value for a field given the total
number of terms contained in a field.
        return 1.0f;
    }

    public float queryNorm(float sumOfSquaredWeights)
    {
        // Computes the normalization value for a query given the sum of
the squared weights of each of the query terms.
        return 1.0f;
    }

    public float sloppyFreq(int distance)
    {
        return 0.0f;
    }

    public float tf(float freq)
    {
        // Computes a score factor based on a term or phrase's frequency
in a document.
        return 1.0f; // was return freq;
    }

    public float tf(int freq)
    {
        // Computes a score factor based on a term or phrase's frequency
in a document.
        return 1.0f;  // was return freq;
    }
}


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D SearchFiles.java =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

<snip imports>

public class SearchFiles {

  public static void main(String[] args) throws Exception {

    Similarity.setDefault(new HitCountSimilarity());

    String index =3D "index";
    String field =3D "body";
    String q =3D "dit";


    IndexReader reader =3D IndexReader.open(index);
    Term t =3D new Term(field, q);
    TermDocs td =3D reader.termDocs(t);

    System.out.println("Searching query "+q);

    Searcher searcher =3D new IndexSearcher(reader);
    Analyzer analyzer =3D new StandardAnalyzer();

    org.apache.lucene.search.Query query =3D new QueryParser(field,
analyzer).parse(q);

    Hits hits =3D searcher.search(query);

    System.out.println(hits.length() + " total matching documents");

    for(int i=3D0; i<hits.length(); i++) {
        System.out.println("doc=3D"+hits.id(i)+" =
score=3D"+hits.score(i));
        Document doc =3D hits.doc(i);
        System.out.println(doc.get("id"));
        }
    reader.close();
  }
}

=3D=3D=3D=3D=3D=3D=3D=3D=3D session: =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

[wva@swpc450 lucenetest]$ java SearchFiles
Searching query dit
2 total matching documents
doc=3D1 score=3D0.65625 (should be 4)
2
doc=3D0 score=3D0.5  (should be 3)
123
[wva@swpc450 lucenetest]$ javac *.java  # (after changing return freq to
return 1.0f)
[wva@swpc450 lucenetest]$ java SearchFiles
Searching query dit
2 total matching documents
doc=3D0 score=3D0.25 (should be 1?)
123
doc=3D1 score=3D0.21875 (should be 1?)
2
[wva@swpc450 lucenetest]$





> -----Original Message-----
> From: Ziv Gome [mailto:zgome@entopia.com]
> Sent: 21 May 2006 11:19
> To: java-user@lucene.apache.org
> Subject: RE: Scoring purely on term frequencies
>=20
> Hi Wouter,
>=20
> My thought would be to go for plan (b) (have not tested it though).
This
> would produce simply the sum of frequencies of the different terms
(I'm
> referring to a real multi-term query, not a phrase as you mentioned -
> "the man" - which should work).
> The problem I see is that it you loose the ability to use boosts (I
> assume this is fine by you).
>=20
> I don't see a problem here, (referring to "doesn't feel right"...) -
you
> simply want a different scoring - "just give me the damn frequency",
> right? In that situation, you should disable all the idf, coord, norm
> and sqrt manipulations that Lucene did in order to produce "smarter"
> scores, which takes into account and balance other properties of the
> query (different terms and their IDFs); the document (lengthNorm); the
> index (IDF's); and behavior of frequencies (tf implementation as
sqrt).
> The frameworks makes these smarter adjustments possible, it does not
> mean you need it in your case.
>=20
> Ziv
>=20
>=20
>=20
> -----Original Message-----
> From: W.H. van Atteveldt [mailto:wouter@2at.nl]
> Sent: Saturday, May 20, 2006 7:05 AM
> To: java-user@lucene.apache.org
> Subject: Scoring purely on term frequencies
>=20
> Dear list,
>=20
> I am interested in using Lucene for analyzing documents based on
> occurrence of certain keywords. As such, I am not interested in the
> 'top' or 'best' documents, but I do want to know exactly how many
words
> in the query matched.
>=20
> Thus, instead of the complicated formula used by default, I really
just
> want to use Score(q,d) =3D Sum_{t in q} freq(q,d).
>=20
> [Of course, if the query is "the man", I do not want to count 'the'
> before man; since 'the' I think is a Term (right?), this does not
quite
> hold. I want to count every occurrence of the combination 'the man']
>=20
> (a)
> I tried extending a SimilarityDelegator(DefaultSimilarity) and make tf
> return freq and coord,idf,*Norm return 1.0f. This worked but produced
> scores like 0.61 (approx) and 0.5 where it should have returned 3 and
2
> (on a simple test)
>=20
> (b)
> I suppose I could extend Similarity itself but the documentation is
> quite sketchy on which methods are actually used, and something like
> coord or idf is simply meaningless in my case. I could return 1.0 like
> above but somehow it doesn't feel right. That said, I haven't tried it
> yet :-)
>=20
> (c)
> I could skip the Searcher and directly use the IndexReader. With
simple
> term queries this is trivial and works as expected, but I would like
to
> be able to use "the man" and "the article"~3 style queries. I could go
> ahead and look at the positions, but it seems like someone should
> already have implemented this before. Can anyone point me in the
> direction of something that gives me a frequency if I give it a query
> (rather than a term).
>=20
> Any help greatly appreciated!
>=20
> Wouter
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 15:23:49 2006
Return-Path: <java-user-return-21596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6688 invoked from network); 27 Jun 2006 15:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 15:23:49 -0000
Received: (qmail 22276 invoked by uid 500); 27 Jun 2006 15:23:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22241 invoked by uid 500); 27 Jun 2006 15:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22228 invoked by uid 99); 27 Jun 2006 15:23:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:23:42 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 72.14.214.194 as permitted sender)
Received: from [72.14.214.194] (HELO hu-out-0102.google.com) (72.14.214.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:23:41 -0700
Received: by hu-out-0102.google.com with SMTP id 28so960215hub
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 08:23:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QRxepxwrX277oVw/gGbUxqhgFkKrAtWYhyn+r/Q/ZRqIgq4HRvsa63r3nLanwc5j0hOl0CDM7O+jEl4htVzeWsvIWeeq91fU+cEuYVAfF+DSA76b5PkeQ+JtpKoAG95I0hEcAiGexf5bcaLuKcqBYVmp7GzWmqGmqyuQvXFnOV4=
Received: by 10.78.151.15 with SMTP id y15mr2555074hud;
        Tue, 27 Jun 2006 08:23:19 -0700 (PDT)
Received: by 10.78.115.12 with HTTP; Tue, 27 Jun 2006 08:23:19 -0700 (PDT)
Message-ID: <b487c1370606270823i28b00898td1a14ff787cfa549@mail.gmail.com>
Date: Tue, 27 Jun 2006 11:23:19 -0400
From: "Beady Geraghty" <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: merge index from different platform
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3960_25132410.1151421799773"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3960_25132410.1151421799773
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am trying to merge in index from a different node and probably different
platform.

I tried some simple cases by copying an index created from a windows
machine,
and bring to a linux server.  I seem to be able to search from this index
that
is copied over.  I would therefore assume that I can merge.

I don't see anywhere that says that this cannot and should not be done.

I tried to look at the segments file, thinking that it points to the various
other
files in the index directory, but I don't seem to know how to read it. It
doesn't
contains the file names of the file in the index directory.

Could someone please let me know if I am going down the wrong path, and
if there is something else I can do if I am on the wrong track.

Thank you in advance.

------=_Part_3960_25132410.1151421799773--

From java-user-return-21597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 15:29:49 2006
Return-Path: <java-user-return-21597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9276 invoked from network); 27 Jun 2006 15:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 15:29:48 -0000
Received: (qmail 42227 invoked by uid 500); 27 Jun 2006 15:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42186 invoked by uid 500); 27 Jun 2006 15:29:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42174 invoked by uid 99); 27 Jun 2006 15:29:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:29:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:29:40 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id B06DDA7D03; Tue, 27 Jun 2006 17:31:22 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id 3AC28A7D02
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 17:31:22 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id 3FEDBC0BB
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 17:29:37 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: Lucene indexing pdf 
Date: Tue, 27 Jun 2006 17:29:08 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <b487c1370606270823i28b00898td1a14ff787cfa549@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaZ/cIq2VWq1tLxT0O8xkY6wt/VUgAACoiw
Message-Id: <20060627152937.3FEDBC0BB@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.4 required=5.0 tests=ALL_TRUSTED autolearn=ham 
	version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I=B4m new with Lucene and I=B4m trying to index a pdf but when I query
everything it returns nothing. Can anyone help me?
Thans a lot
Teresa


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 15:36:51 2006
Return-Path: <java-user-return-21598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12753 invoked from network); 27 Jun 2006 15:36:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 15:36:51 -0000
Received: (qmail 66796 invoked by uid 500); 27 Jun 2006 15:36:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66609 invoked by uid 500); 27 Jun 2006 15:36:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66598 invoked by uid 99); 27 Jun 2006 15:36:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:36:44 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mailing.patrick.kimber@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:36:42 -0700
Received: by ug-out-1314.google.com with SMTP id u2so2466218uge
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 08:36:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IMII/gYb5afTdKEmDTVP5sBzPcGIhJcN+R5L3w70n27vr5P6Z6eT1b9gUbKze2doCRmtyA9OcywrHAYkQ3hG/k1G2YDmnLbihRceW5lFKBx3MXpUypV2MtsPqJVjxK2eBegi5c9SQOjopdXPICdirdtmVch8okNLbpE3l6yK8t8=
Received: by 10.66.243.2 with SMTP id q2mr6185116ugh;
        Tue, 27 Jun 2006 08:36:21 -0700 (PDT)
Received: by 10.67.98.19 with HTTP; Tue, 27 Jun 2006 08:36:21 -0700 (PDT)
Message-ID: <4f9b23800606270836u6c1e4633mca2e9840a3229e16@mail.gmail.com>
Date: Tue, 27 Jun 2006 16:36:21 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene indexing pdf
In-Reply-To: <20060627152937.3FEDBC0BB@mad.isoco.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <b487c1370606270823i28b00898td1a14ff787cfa549@mail.gmail.com>
	 <20060627152937.3FEDBC0BB@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Teresa

You need to convert the pdf file into text format before adding the
text to the Lucene index.

You may like to look at http://www.pdfbox.org/ for a library to
convert pdf files to text format.

Patrick

On 27/06/06, mcarcelen <mcarcelen@isoco.com> wrote:
> Hi,
> I=B4m new with Lucene and I=B4m trying to index a pdf but when I query
> everything it returns nothing. Can anyone help me?
> Thans a lot
> Teresa
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 15:38:23 2006
Return-Path: <java-user-return-21599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14207 invoked from network); 27 Jun 2006 15:38:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 15:38:23 -0000
Received: (qmail 69329 invoked by uid 500); 27 Jun 2006 15:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69304 invoked by uid 500); 27 Jun 2006 15:38:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69293 invoked by uid 99); 27 Jun 2006 15:38:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:38:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 08:38:16 -0700
Received: from [10.10.150.44] ([10.10.150.44])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.6/8.13.4) with ESMTP id k5RFc6Mg012521
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 10:38:07 -0500
Message-ID: <44A150C2.7020705@wolfram.com>
Date: Tue, 27 Jun 2006 11:37:38 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene indexing pdf
References: <20060627152937.3FEDBC0BB@mad.isoco.net>
In-Reply-To: <20060627152937.3FEDBC0BB@mad.isoco.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I used PDFBox library as mentioned in Lucene in Action. It works for me. 
You can access it from www.pdfbox.org

suba suresh

mcarcelen wrote:
> Hi,
> I´m new with Lucene and I´m trying to index a pdf but when I query
> everything it returns nothing. Can anyone help me?
> Thans a lot
> Teresa
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 16:00:57 2006
Return-Path: <java-user-return-21600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28119 invoked from network); 27 Jun 2006 16:00:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 16:00:57 -0000
Received: (qmail 38744 invoked by uid 500); 27 Jun 2006 16:00:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38704 invoked by uid 500); 27 Jun 2006 16:00:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38665 invoked by uid 99); 27 Jun 2006 16:00:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 09:00:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 09:00:39 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id 24D6BA7D02; Tue, 27 Jun 2006 18:02:29 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id 83ACCA7CBE
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 18:02:28 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id 909B8C0BB
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 18:00:43 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: Lucene indexing RDF
Date: Tue, 27 Jun 2006 18:00:15 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <44A150C2.7020705@wolfram.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaZ/8u1oGGMitviTGmfGw0wvL17TwAAssng
Message-Id: <20060627160043.909B8C0BB@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.4 required=5.0 tests=ALL_TRUSTED autolearn=ham 
	version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
Do you know another library for indexing RDF?
Thanks a lot for your help
Teresa


-----Mensaje original-----
De: Suba Suresh [mailto:subas@wolfram.com]=20
Enviado el: martes, 27 de junio de 2006 17:38
Para: java-user@lucene.apache.org
Asunto: Re: Lucene indexing pdf

I used PDFBox library as mentioned in Lucene in Action. It works for me. =

You can access it from www.pdfbox.org

suba suresh

mcarcelen wrote:
> Hi,
> I=B4m new with Lucene and I=B4m trying to index a pdf but when I query
> everything it returns nothing. Can anyone help me?
> Thans a lot
> Teresa
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 16:18:40 2006
Return-Path: <java-user-return-21601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37285 invoked from network); 27 Jun 2006 16:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 16:18:40 -0000
Received: (qmail 84171 invoked by uid 500); 27 Jun 2006 16:18:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84129 invoked by uid 500); 27 Jun 2006 16:18:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84114 invoked by uid 99); 27 Jun 2006 16:18:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 09:18:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 09:18:31 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1FvGH4-0004AI-OF
	for java-user@lucene.apache.org; Tue, 27 Jun 2006 18:18:50 +0200
Message-ID: <44A15A28.1020907@tejnora.cz>
Date: Tue, 27 Jun 2006 18:17:44 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexWriter.addIndexes & optimizatio
References: <858CC94E9BA8CF42BE18C3BCB82511B501E8A087@sgimsg01.ad.infosys.com>	 <a36516400606120520i61703cb6r1b088603b003927f@mail.gmail.com>	 <359a92830606121650s50b810a3v83ce03f68aecacbe@mail.gmail.com> <a36516400606122035n19b8b72dm6ba2955f6ad2db@mail.gmail.com>
In-Reply-To: <a36516400606122035n19b8b72dm6ba2955f6ad2db@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

depends of the document type, look at method setOmitNorms in Field class.

heritrix.lucene wrote:

> Hi,
> Aprrox 50 Million i have processed upto now. I kept maxMergeFactor and
> maxBufferedDoc's value 1000. This value i got after several round of test
> runs.
> Indexing rate for each document in 50 M, is 1 Document per 4.85 ms.
>
> I am only using fsdirectory. Is there any other way to reduce this time??
>
> with regards,
>
>
> On 6/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
>>
>> a billion? Wow! First, I really, really, really doubt you can use a 
>> RAMdir
>> to index a billion documents. I'd be interested in the parameters of 
>> your
>> problem if you could. I'd be especially interested in providing a 
>> home for
>> any of your old hardware, since I bet it beats mine all to hell <G>.
>>
>> Second, you'll just have to play with the MergeFactor and 
>> MaxBufferedDocs
>> to
>> see how high you can set them on your particular machine (using an 
>> FSDir).
>> Then reduce those factors by a pretty major amount (I'd recommend maybe
>> 1/4
>> the size that runs out memory on your test data set). The last thing you
>> want to do is cruise through 900,000,000 documents and find the 
>> particular
>> set of data that causes an exception...
>>
>> Actually, I'd guess you're better off indexing the documents in smaller
>> groups and combining the indexes afterwards. That way, you place an 
>> upper
>> limit on how much work is lost if you have any problems, as well as
>> parallelize the index creation process. Assuming you have the hardware.
>>
>> Best
>> Erick
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 16:34:57 2006
Return-Path: <java-user-return-21602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42065 invoked from network); 27 Jun 2006 16:34:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 16:34:57 -0000
Received: (qmail 13923 invoked by uid 500); 27 Jun 2006 16:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13072 invoked by uid 500); 27 Jun 2006 16:34:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13053 invoked by uid 99); 27 Jun 2006 16:34:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 09:34:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [63.240.77.83] (HELO sccrmhc13.comcast.net) (63.240.77.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 09:34:49 -0700
Received: from ebola.biohz.net ([67.188.109.88])
          by comcast.net (sccrmhc13) with SMTP
          id <2006062716340701300b35jre>; Tue, 27 Jun 2006 16:34:07 +0000
Received: from CKMPC08 (localhost [127.0.0.1])
	by ebola.biohz.net (Postfix) with SMTP id 2463B1152B8
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 09:32:41 -0700 (PDT)
Message-ID: <009001c69a07$821a0630$970fda80@libraria.ucsf.edu>
From: "Renaud Waldura" <renaud+lucene@waldura.com>
To: <java-user@lucene.apache.org>
References: <200606270947.k5R9lCeh026626@smtp-ft5.fr.colt.net> <AEB9B733-E9D3-42C6-87F7-F690CBD207D9@ehatchersolutions.com>
Subject: Re: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 09:34:06 -0700
Organization: The Waldura Foundation
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik:

I commend you for giving all the information that's relevant. For the sake 
of simplicity, and because it is the vast majority of use cases, could you 
endorse the following as the simplest, most correct way (i.e. a best 
practice) to implement Lucene for Web applications.

1- create an IndexSearcher instance in the servlet's init() method, and 
cache it in the web application context,

2- in the doGet or doPost() methods, lookup the index searcher instance in 
the web application context and use it to run queries,

3- close the IndexSearcher in the destroy() method.

This is *simple*, and *correct*. It doesn't create a new IndexSearcher per 
query, doesn't use a static field, nor a singleton, nor a pool. All ideas 
that have been suggested but have issues, or are more difficult to 
implement.

--Renaud




----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, June 27, 2006 3:49 AM
Subject: Re: IndexSearcher in Servlet


>
> On Jun 27, 2006, at 5:47 AM, Fabrice Robini wrote:
>> What is your advice for webApplication ?
>
> It all depends :)
>
>> - IndexSearcher pool ?
>
> No point in that.  A single IndexSearcher for searches is all that is 
> ever needed.  Having a warming IndexSearcher, as Solr implements,  makes 
> sense in some cases.
>
>> - New IndexSearcher for each query ?
>
> Never!
>
>> - Something else ?
>
> Again, it all depends on your Lucene usage.  If the index is static  only 
> a single IndexSearcher is needed.  If you you need to manage  updates you 
> have to decide how quickly those updates are visible  (everyone will 
> always say "immediately" to that question, but  pragmatically there are 
> lots of things to consider in this regard).
>
> Sorry there isn't a single best answer.   But I am quite happy with 
> Solr's mechanism, but I'm using a Ruby on Rails front-end so a web 
> service makes sense in my current project.
>
> Erik
>
>
>
>>
>> Thanks a lot,
>>
>> Fab
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: mardi 27 juin 2006 11:41
>> To: java-user@lucene.apache.org
>> Subject: Re: IndexSearcher in Servlet
>>
>>
>> On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
>>> Hi,
>>> I also had the same confusion. But today when i did the testing i
>>> found that
>>> it will merge your results. Therefore i believe that indexSearcher
>>> is not
>>> thread safe. I tried this on 10,000 requests per second.
>>
>> You must have something else wrong in your system if you're seeing
>> results merged (or please provide us a test case that demonstrates
>> this).
>>
>> A static IndexSearcher works just fine, though is not really the
>> right design for a web application as you'd want to put it into
>> application scope instead.  Statics can be trouble in web
>> applications that end up getting distributed.
>>
>> Erik
>>
>>
>>
>>
>>>
>>> With Regards
>>>
>>> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>>>
>>>> Hi,
>>>> You are wrong.
>>>>
>>>> In ur case (If I ignore any updates to index) , One IndexSearcher
>>>> object
>>>> is
>>>> enough.
>>>> IndexSearcher is thread safe.
>>>>
>>>> Jelda
>>>>
>>>>> -----Original Message-----
>>>>> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>>>>> Sent: Tuesday, June 27, 2006 10:58 AM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: IndexSearcher in Servlet
>>>>>
>>>>> Hi,
>>>>> The same question i asked yesterday. :-) And now i know the
>>>> answer :0
>>>>>
>>>>> Creating a new searcher for each query will make your
>>>>> application very very slow....... (leave this idea) U can not
>>>>> have a static indexsearcher object. It will merge all results
>>>>> and the user will get the result of their query alongwith the
>>>>> others :-)
>>>>>
>>>>>
>>>>> The method that i am adopting is, i'll create a pool of
>>>>> static searchers.
>>>>> and on every request the servlet will request a free searcher
>>>>> object from the pool. When he is done with that pool. it'll
>>>>> return back the searcher object to that pool. This way i'll
>>>>> reuse my searcher objects.
>>>>>
>>>>>
>>>>> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>>>>>>
>>>>>> Hello,
>>>>>>
>>>>>>
>>>>>>
>>>>>> I have a question about the IndexSearcher().
>>>>>>
>>>>>> I have a Servlet that has a searchDocument(String theQuery)
>>>> method.
>>>>>>
>>>>>> These method instantiate a new IndexSearcher at each query:
>>>>>>
>>>>>>
>>>>>>
>>>>>> searchDocument(String theQuery)
>>>>>>
>>>>>> {
>>>>>>
>>>>>>             Searcher searcher = new IndexSearcher(indexPath);
>>>>>>
>>>>>>             .
>>>>>>
>>>>>> }
>>>>>>
>>>>>>
>>>>>>
>>>>>> Is it a good way ? Or Is it better to use a static
>>>>> searcher, and use
>>>>>> the same for each query (and for each user).
>>>>>>
>>>>>> Is it thread safe ? Will results not be mixed to users ? (if
>>>> user A
>>>>>> searchs car and user B searchs boats, is it sure that user
>>>>> A will get
>>>>>> car and B will get boats, even if the IndexSearcher is
>>>>> static and is
>>>>>> the same ?)
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks a lot,
>>>>>>
>>>>>>
>>>>>>
>>>>>> Fab
>>>>>>
>>>>>>
>>>>>> --
>>>>>> No virus found in this outgoing message.
>>>>>> Checked by AVG Free Edition.
>>>>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>>>>>> 26/06/2006
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> -- 
>> No virus found in this incoming message.
>> Checked by AVG Free Edition.
>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 
>> 26/06/2006
>>
>>
>> -- 
>> No virus found in this outgoing message.
>> Checked by AVG Free Edition.
>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date: 
>> 26/06/2006
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 17:23:46 2006
Return-Path: <java-user-return-21603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60878 invoked from network); 27 Jun 2006 17:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 17:23:46 -0000
Received: (qmail 17404 invoked by uid 500); 27 Jun 2006 17:23:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17372 invoked by uid 500); 27 Jun 2006 17:23:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17361 invoked by uid 99); 27 Jun 2006 17:23:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 10:23:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 10:23:36 -0700
Received: from [192.168.0.103] (c-24-63-81-15.hsd1.ma.comcast.net [24.63.81.15])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.6/8.13.4) with ESMTP id k5RHNKWJ014444
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 12:23:27 -0500
Message-ID: <44A1696B.5060103@wolfram.com>
Date: Tue, 27 Jun 2006 13:22:51 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene indexing RDF
References: <20060627160043.909B8C0BB@mad.isoco.net>
In-Reply-To: <20060627160043.909B8C0BB@mad.isoco.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I used java libraries for rtf file formats. Refer to Mannning's Lucene 
In Action book. It is helpful and gives pointers where you can access 
differentlibraries.

suba suresh.

mcarcelen wrote:
> Hi,
> Do you know another library for indexing RDF?
> Thanks a lot for your help
> Teresa
> 
> 
> -----Mensaje original-----
> De: Suba Suresh [mailto:subas@wolfram.com] 
> Enviado el: martes, 27 de junio de 2006 17:38
> Para: java-user@lucene.apache.org
> Asunto: Re: Lucene indexing pdf
> 
> I used PDFBox library as mentioned in Lucene in Action. It works for me. 
> You can access it from www.pdfbox.org
> 
> suba suresh
> 
> mcarcelen wrote:
> 
>>Hi,
>>I´m new with Lucene and I´m trying to index a pdf but when I query
>>everything it returns nothing. Can anyone help me?
>>Thans a lot
>>Teresa
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:02:28 2006
Return-Path: <java-user-return-21604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75075 invoked from network); 27 Jun 2006 18:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:02:28 -0000
Received: (qmail 98310 invoked by uid 500); 27 Jun 2006 18:02:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98276 invoked by uid 500); 27 Jun 2006 18:02:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98262 invoked by uid 99); 27 Jun 2006 18:02:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:02:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:02:19 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 756A630EFCD3; Tue, 27 Jun 2006 14:01:57 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 4481B30EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 14:01:50 -0400 (EDT)
In-Reply-To: <009001c69a07$821a0630$970fda80@libraria.ucsf.edu>
References: <200606270947.k5R9lCeh026626@smtp-ft5.fr.colt.net> <AEB9B733-E9D3-42C6-87F7-F690CBD207D9@ehatchersolutions.com> <009001c69a07$821a0630$970fda80@libraria.ucsf.edu>
Mime-Version: 1.0 (Apple Message framework v750)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <73224CAA-572E-41F7-BFC8-3EB23B7D6AC4@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: IndexSearcher in Servlet
Date: Tue, 27 Jun 2006 14:01:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yup, this is pretty much how I do it for lucenebook.com (though quite  
admittedly it's got a miniscule amount of data behind it, which  
rarely changes).  I don't use a servlet initialization to put the  
searcher into application scope, though, as I'm using blojsom for the  
blogging system and it already has a startup hook that I needed to  
use for other purposes so I stuck it in there.   This is why it's  
hard to be precise about these things.  Everyone is duct taping their  
applications their own way.

Personally I think the best practice in web application development  
these days is RoR+Solr :) - where almost all of the issues we're  
talking about are taken care of by Solr's features.  I'm working on a  
couple of similar applications using this architecture, and one of  
these days soon they'll see the light of day.

	Erik


On Jun 27, 2006, at 12:34 PM, Renaud Waldura wrote:

> Erik:
>
> I commend you for giving all the information that's relevant. For  
> the sake of simplicity, and because it is the vast majority of use  
> cases, could you endorse the following as the simplest, most  
> correct way (i.e. a best practice) to implement Lucene for Web  
> applications.
>
> 1- create an IndexSearcher instance in the servlet's init() method,  
> and cache it in the web application context,
>
> 2- in the doGet or doPost() methods, lookup the index searcher  
> instance in the web application context and use it to run queries,
>
> 3- close the IndexSearcher in the destroy() method.
>
> This is *simple*, and *correct*. It doesn't create a new  
> IndexSearcher per query, doesn't use a static field, nor a  
> singleton, nor a pool. All ideas that have been suggested but have  
> issues, or are more difficult to implement.
>
> --Renaud
>
>
>
>
> ----- Original Message ----- From: "Erik Hatcher"  
> <erik@ehatchersolutions.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, June 27, 2006 3:49 AM
> Subject: Re: IndexSearcher in Servlet
>
>
>>
>> On Jun 27, 2006, at 5:47 AM, Fabrice Robini wrote:
>>> What is your advice for webApplication ?
>>
>> It all depends :)
>>
>>> - IndexSearcher pool ?
>>
>> No point in that.  A single IndexSearcher for searches is all that  
>> is ever needed.  Having a warming IndexSearcher, as Solr  
>> implements,  makes sense in some cases.
>>
>>> - New IndexSearcher for each query ?
>>
>> Never!
>>
>>> - Something else ?
>>
>> Again, it all depends on your Lucene usage.  If the index is  
>> static  only a single IndexSearcher is needed.  If you you need to  
>> manage  updates you have to decide how quickly those updates are  
>> visible  (everyone will always say "immediately" to that question,  
>> but  pragmatically there are lots of things to consider in this  
>> regard).
>>
>> Sorry there isn't a single best answer.   But I am quite happy  
>> with Solr's mechanism, but I'm using a Ruby on Rails front-end so  
>> a web service makes sense in my current project.
>>
>> Erik
>>
>>
>>
>>>
>>> Thanks a lot,
>>>
>>> Fab
>>>
>>> -----Original Message-----
>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>> Sent: mardi 27 juin 2006 11:41
>>> To: java-user@lucene.apache.org
>>> Subject: Re: IndexSearcher in Servlet
>>>
>>>
>>> On Jun 27, 2006, at 5:11 AM, heritrix.lucene wrote:
>>>> Hi,
>>>> I also had the same confusion. But today when i did the testing i
>>>> found that
>>>> it will merge your results. Therefore i believe that indexSearcher
>>>> is not
>>>> thread safe. I tried this on 10,000 requests per second.
>>>
>>> You must have something else wrong in your system if you're seeing
>>> results merged (or please provide us a test case that demonstrates
>>> this).
>>>
>>> A static IndexSearcher works just fine, though is not really the
>>> right design for a web application as you'd want to put it into
>>> application scope instead.  Statics can be trouble in web
>>> applications that end up getting distributed.
>>>
>>> Erik
>>>
>>>
>>>
>>>
>>>>
>>>> With Regards
>>>>
>>>> On 6/27/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>>>>>
>>>>> Hi,
>>>>> You are wrong.
>>>>>
>>>>> In ur case (If I ignore any updates to index) , One IndexSearcher
>>>>> object
>>>>> is
>>>>> enough.
>>>>> IndexSearcher is thread safe.
>>>>>
>>>>> Jelda
>>>>>
>>>>>> -----Original Message-----
>>>>>> From: heritrix.lucene [mailto:heritrix.lucene@gmail.com]
>>>>>> Sent: Tuesday, June 27, 2006 10:58 AM
>>>>>> To: java-user@lucene.apache.org
>>>>>> Subject: Re: IndexSearcher in Servlet
>>>>>>
>>>>>> Hi,
>>>>>> The same question i asked yesterday. :-) And now i know the
>>>>> answer :0
>>>>>>
>>>>>> Creating a new searcher for each query will make your
>>>>>> application very very slow....... (leave this idea) U can not
>>>>>> have a static indexsearcher object. It will merge all results
>>>>>> and the user will get the result of their query alongwith the
>>>>>> others :-)
>>>>>>
>>>>>>
>>>>>> The method that i am adopting is, i'll create a pool of
>>>>>> static searchers.
>>>>>> and on every request the servlet will request a free searcher
>>>>>> object from the pool. When he is done with that pool. it'll
>>>>>> return back the searcher object to that pool. This way i'll
>>>>>> reuse my searcher objects.
>>>>>>
>>>>>>
>>>>>> On 6/27/06, Fabrice Robini <frobini@octo.com> wrote:
>>>>>>>
>>>>>>> Hello,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> I have a question about the IndexSearcher().
>>>>>>>
>>>>>>> I have a Servlet that has a searchDocument(String theQuery)
>>>>> method.
>>>>>>>
>>>>>>> These method instantiate a new IndexSearcher at each query:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> searchDocument(String theQuery)
>>>>>>>
>>>>>>> {
>>>>>>>
>>>>>>>             Searcher searcher = new IndexSearcher(indexPath);
>>>>>>>
>>>>>>>             .
>>>>>>>
>>>>>>> }
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Is it a good way ? Or Is it better to use a static
>>>>>> searcher, and use
>>>>>>> the same for each query (and for each user).
>>>>>>>
>>>>>>> Is it thread safe ? Will results not be mixed to users ? (if
>>>>> user A
>>>>>>> searchs car and user B searchs boats, is it sure that user
>>>>>> A will get
>>>>>>> car and B will get boats, even if the IndexSearcher is
>>>>>> static and is
>>>>>>> the same ?)
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Thanks a lot,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Fab
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> No virus found in this outgoing message.
>>>>>>> Checked by AVG Free Edition.
>>>>>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:
>>>>>>> 26/06/2006
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> -- -
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> -- 
>>> No virus found in this incoming message.
>>> Checked by AVG Free Edition.
>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:  
>>> 26/06/2006
>>>
>>>
>>> -- 
>>> No virus found in this outgoing message.
>>> Checked by AVG Free Edition.
>>> Version: 7.1.394 / Virus Database: 268.9.5/376 - Release Date:  
>>> 26/06/2006
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:03:42 2006
Return-Path: <java-user-return-21605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75790 invoked from network); 27 Jun 2006 18:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:03:42 -0000
Received: (qmail 2431 invoked by uid 500); 27 Jun 2006 18:03:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2312 invoked by uid 500); 27 Jun 2006 18:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2240 invoked by uid 99); 27 Jun 2006 18:03:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:03:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:03:29 -0700
Received: (qmail 21726 invoked from network); 27 Jun 2006 18:03:06 -0000
Received: from unknown (HELO p5496db64.dip.t-dialin.net) ([pbs]695637@[84.150.219.100])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 27 Jun 2006 18:03:06 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: merge index from different platform
Date: Tue, 27 Jun 2006 20:02:59 +0200
User-Agent: KMail/1.8.2
References: <b487c1370606270823i28b00898td1a14ff787cfa549@mail.gmail.com>
In-Reply-To: <b487c1370606270823i28b00898td1a14ff787cfa549@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606272002.59852@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Dienstag 27 Juni 2006 17:23, Beady Geraghty wrote:

> I tried to look at the segments file, thinking that it points to the
> various other
> files in the index directory,

Use IndexWriter.addIndexes() to merge two or more indexes.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:04:13 2006
Return-Path: <java-user-return-21606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75997 invoked from network); 27 Jun 2006 18:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:04:12 -0000
Received: (qmail 6249 invoked by uid 500); 27 Jun 2006 18:04:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6216 invoked by uid 500); 27 Jun 2006 18:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6205 invoked by uid 99); 27 Jun 2006 18:04:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:04:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [72.29.74.74] (HELO sh58.surpasshosting.com) (72.29.74.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:04:04 -0700
Received: from [81.25.39.212] (helo=localhost)
	by sh58.surpasshosting.com with esmtp (Exim 4.52)
	id 1FvHuf-0004Ty-On
	for java-user@lucene.apache.org; Tue, 27 Jun 2006 14:03:50 -0400
Date: Tue, 27 Jun 2006 20:00:20 +0300
From: Yura Smolsky <info@altervisionmedia.com>
X-Mailer: The Bat! (v3.64.01 Christmas Edition) Professional
Reply-To: Yura Smolsky <info@altervisionmedia.com>
X-Priority: 3 (Normal)
Message-ID: <871937711.20060627200020@altervisionmedia.com>
To: java-user@lucene.apache.org
Subject: weird error with SVN of Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - sh58.surpasshosting.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - altervisionmedia.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello.

I have encountered weird error with CO of Lucene, when I try to build
PyLucene:

thorn@thornserver /cygdrive/d/workshop/PyLucene
$ make
svn co -r 417135 http://svn.apache.org/repos/asf/lucene/java/trunk lucene-java-2.0.0-417135
svn: REPORT request failed on '/repos/asf/!svn/bc/417505/lucene/java/trunk'
svn: REPORT of '/repos/asf/!svn/bc/417505/lucene/java/trunk': 400 Bad Request (http://svn.apache.org
)
make: *** [lucene-java-2.0.0-417135] Error 1

I can CO PyLucene, but I can't Lucene. Can you?

Thanks for answering such foolish question. :)

--
Yura Smolsky,
http://altervisionmedia.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:05:39 2006
Return-Path: <java-user-return-21607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76758 invoked from network); 27 Jun 2006 18:05:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:05:39 -0000
Received: (qmail 10025 invoked by uid 500); 27 Jun 2006 18:05:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10003 invoked by uid 500); 27 Jun 2006 18:05:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9989 invoked by uid 99); 27 Jun 2006 18:05:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:05:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:05:31 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C40B55B77B; Tue, 27 Jun 2006 11:05:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BAE1C7F403;
	Tue, 27 Jun 2006 11:05:03 -0700 (PDT)
Date: Tue, 27 Jun 2006 11:05:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Cc: zgome@entopia.com
Subject: RE: Scoring purely on term frequencies
In-Reply-To: <B50FE8BF4F9CF24FB800E28DBB1A2FE026D5BB@gaia.2at.local>
Message-ID: <Pine.LNX.4.58.0606271056240.19719@hal.rescomp.berkeley.edu>
References: <B50FE8BF4F9CF24FB800E28DBB1A2FE026D5BB@gaia.2at.local>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: Similarity that simply returns the number of matched terms per document
: as the score. I tried making one that returns freq as tf and 1.0f as
: anything else, but that gives strange results; same for something that
: really returns 1.0f whatever.

That's because when your tf function always returns 1.0, your Similarity
is telling the Scorers that certains docs should "match" even when the
term doesn't appear in them -- it's a vicious cycle, Scorers distinguish
the concept of "matching" and "scoring" so it's possible to have a
document "match" a query with a negative score -- but the Scorers
themselves look at the value returned from tf to determine wether or not
it should be considered a match (that way you can have a similarity that
says there must be at least two occurances of each term to count as a
match)

as for why you might get strange results when your tf function returns
the frequency ... it depends on what you mean by strange ...
Searcher.explain is your friend, and with the recent bugs i fixed, it
should be an honest friend.



:
: The code is listed below, if anybody can help me out I would be very
: grateful! (and this is the first time I'm using Lucene at all so forgive
: me if I am getting something totally wrong...)
:
: -- Wouter
:
: ============ HitCountSimilarity.java ===============
:
: import  org.apache.lucene.search.*;
: import java.util.*;
:
: public class HitCountSimilarity extends Similarity {
:
:     public float coord(int overlap, int maxOverlap)
:     {
:         // Computes a score factor based on the fraction of all query
: terms that a document contains.
:         return 1.0f;
:     }
:
:
:     public float idf(Collection terms, Searcher searcher)
:     {
:         // Computes a score factor for a phrase.
:         return 1.0f;
:     }
:
:     public float idf(int docFreq, int numDocs)
:     {
:         // Computes a score factor based on a term's document frequency
: (the number of documents which contain the term).
:         return 1.0f;
:     }
:
:     public float idf(org.apache.lucene.index.Term term, Searcher
: searcher)
:     {
:         // Computes a score factor for a simple term.
:         return 1.0f;
:     }
:
:     public float lengthNorm(String fieldName, int numTokens)
:     {
:         // Computes the normalization value for a field given the total
: number of terms contained in a field.
:         return 1.0f;
:     }
:
:     public float queryNorm(float sumOfSquaredWeights)
:     {
:         // Computes the normalization value for a query given the sum of
: the squared weights of each of the query terms.
:         return 1.0f;
:     }
:
:     public float sloppyFreq(int distance)
:     {
:         return 0.0f;
:     }
:
:     public float tf(float freq)
:     {
:         // Computes a score factor based on a term or phrase's frequency
: in a document.
:         return 1.0f; // was return freq;
:     }
:
:     public float tf(int freq)
:     {
:         // Computes a score factor based on a term or phrase's frequency
: in a document.
:         return 1.0f;  // was return freq;
:     }
: }
:
:
: ============ SearchFiles.java =================
:
: <snip imports>
:
: public class SearchFiles {
:
:   public static void main(String[] args) throws Exception {
:
:     Similarity.setDefault(new HitCountSimilarity());
:
:     String index = "index";
:     String field = "body";
:     String q = "dit";
:
:
:     IndexReader reader = IndexReader.open(index);
:     Term t = new Term(field, q);
:     TermDocs td = reader.termDocs(t);
:
:     System.out.println("Searching query "+q);
:
:     Searcher searcher = new IndexSearcher(reader);
:     Analyzer analyzer = new StandardAnalyzer();
:
:     org.apache.lucene.search.Query query = new QueryParser(field,
: analyzer).parse(q);
:
:     Hits hits = searcher.search(query);
:
:     System.out.println(hits.length() + " total matching documents");
:
:     for(int i=0; i<hits.length(); i++) {
:         System.out.println("doc="+hits.id(i)+" score="+hits.score(i));
:         Document doc = hits.doc(i);
:         System.out.println(doc.get("id"));
:         }
:     reader.close();
:   }
: }
:
: ========= session: ===========
:
: [wva@swpc450 lucenetest]$ java SearchFiles
: Searching query dit
: 2 total matching documents
: doc=1 score=0.65625 (should be 4)
: 2
: doc=0 score=0.5  (should be 3)
: 123
: [wva@swpc450 lucenetest]$ javac *.java  # (after changing return freq to
: return 1.0f)
: [wva@swpc450 lucenetest]$ java SearchFiles
: Searching query dit
: 2 total matching documents
: doc=0 score=0.25 (should be 1?)
: 123
: doc=1 score=0.21875 (should be 1?)
: 2
: [wva@swpc450 lucenetest]$
:
:
:
:
:
: > -----Original Message-----
: > From: Ziv Gome [mailto:zgome@entopia.com]
: > Sent: 21 May 2006 11:19
: > To: java-user@lucene.apache.org
: > Subject: RE: Scoring purely on term frequencies
: >
: > Hi Wouter,
: >
: > My thought would be to go for plan (b) (have not tested it though).
: This
: > would produce simply the sum of frequencies of the different terms
: (I'm
: > referring to a real multi-term query, not a phrase as you mentioned -
: > "the man" - which should work).
: > The problem I see is that it you loose the ability to use boosts (I
: > assume this is fine by you).
: >
: > I don't see a problem here, (referring to "doesn't feel right"...) -
: you
: > simply want a different scoring - "just give me the damn frequency",
: > right? In that situation, you should disable all the idf, coord, norm
: > and sqrt manipulations that Lucene did in order to produce "smarter"
: > scores, which takes into account and balance other properties of the
: > query (different terms and their IDFs); the document (lengthNorm); the
: > index (IDF's); and behavior of frequencies (tf implementation as
: sqrt).
: > The frameworks makes these smarter adjustments possible, it does not
: > mean you need it in your case.
: >
: > Ziv
: >
: >
: >
: > -----Original Message-----
: > From: W.H. van Atteveldt [mailto:wouter@2at.nl]
: > Sent: Saturday, May 20, 2006 7:05 AM
: > To: java-user@lucene.apache.org
: > Subject: Scoring purely on term frequencies
: >
: > Dear list,
: >
: > I am interested in using Lucene for analyzing documents based on
: > occurrence of certain keywords. As such, I am not interested in the
: > 'top' or 'best' documents, but I do want to know exactly how many
: words
: > in the query matched.
: >
: > Thus, instead of the complicated formula used by default, I really
: just
: > want to use Score(q,d) = Sum_{t in q} freq(q,d).
: >
: > [Of course, if the query is "the man", I do not want to count 'the'
: > before man; since 'the' I think is a Term (right?), this does not
: quite
: > hold. I want to count every occurrence of the combination 'the man']
: >
: > (a)
: > I tried extending a SimilarityDelegator(DefaultSimilarity) and make tf
: > return freq and coord,idf,*Norm return 1.0f. This worked but produced
: > scores like 0.61 (approx) and 0.5 where it should have returned 3 and
: 2
: > (on a simple test)
: >
: > (b)
: > I suppose I could extend Similarity itself but the documentation is
: > quite sketchy on which methods are actually used, and something like
: > coord or idf is simply meaningless in my case. I could return 1.0 like
: > above but somehow it doesn't feel right. That said, I haven't tried it
: > yet :-)
: >
: > (c)
: > I could skip the Searcher and directly use the IndexReader. With
: simple
: > term queries this is trivial and works as expected, but I would like
: to
: > be able to use "the man" and "the article"~3 style queries. I could go
: > ahead and look at the positions, but it seems like someone should
: > already have implemented this before. Can anyone point me in the
: > direction of something that gives me a frequency if I give it a query
: > (rather than a term).
: >
: > Any help greatly appreciated!
: >
: > Wouter
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:08:51 2006
Return-Path: <java-user-return-21608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77706 invoked from network); 27 Jun 2006 18:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:08:51 -0000
Received: (qmail 16049 invoked by uid 500); 27 Jun 2006 18:08:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15960 invoked by uid 500); 27 Jun 2006 18:08:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15946 invoked by uid 99); 27 Jun 2006 18:08:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:08:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:08:43 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 814C45B781; Tue, 27 Jun 2006 11:08:23 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7C86E7F403;
	Tue, 27 Jun 2006 11:08:23 -0700 (PDT)
Date: Tue, 27 Jun 2006 11:08:23 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org,
	Yura Smolsky <info@altervisionmedia.com>
Subject: Re: weird error with SVN of Lucene
In-Reply-To: <871937711.20060627200020@altervisionmedia.com>
Message-ID: <Pine.LNX.4.58.0606271107270.19719@hal.rescomp.berkeley.edu>
References: <871937711.20060627200020@altervisionmedia.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: svn co -r 417135 http://svn.apache.org/repos/asf/lucene/java/trunk lucene-java-2.0.0-417135
: svn: REPORT request failed on '/repos/asf/!svn/bc/417505/lucene/java/trunk'
: svn: REPORT of '/repos/asf/!svn/bc/417505/lucene/java/trunk': 400 Bad Request (http://svn.apache.org
: )
: make: *** [lucene-java-2.0.0-417135] Error 1
:
: I can CO PyLucene, but I can't Lucene. Can you?

yep, perhaps just a temporary glitch on the server? .. can you reproduce?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:09:01 2006
Return-Path: <java-user-return-21609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77771 invoked from network); 27 Jun 2006 18:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:09:00 -0000
Received: (qmail 17366 invoked by uid 500); 27 Jun 2006 18:08:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17330 invoked by uid 500); 27 Jun 2006 18:08:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17315 invoked by uid 99); 27 Jun 2006 18:08:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:08:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:08:53 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F275B30EFCD4; Tue, 27 Jun 2006 14:08:32 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 2E26130EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 14:08:30 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <200606272002.59852@danielnaber.de>
References: <b487c1370606270823i28b00898td1a14ff787cfa549@mail.gmail.com> <200606272002.59852@danielnaber.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8842D6AF-FE7C-4F7D-A7BC-72C55350CCA6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: merge index from different platform
Date: Tue, 27 Jun 2006 14:08:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 27, 2006, at 2:02 PM, Daniel Naber wrote:

> On Dienstag 27 Juni 2006 17:23, Beady Geraghty wrote:
>
>> I tried to look at the segments file, thinking that it points to the
>> various other
>> files in the index directory,
>
> Use IndexWriter.addIndexes() to merge two or more indexes.

Or use the IndexMergeTool as a command-line tool:

	http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/ 
miscellaneous/src/java/org/apache/lucene/misc/IndexMergeTool.java

It's in the lucene-misc-*.jar file, so you should be able to do this  
(off the top of my head):

	java -cp lucene-misc.jar:lucene-core.jar IndexMergeTool  
<mergedIndex> <index1> <index2> ....

Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:12:31 2006
Return-Path: <java-user-return-21610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78836 invoked from network); 27 Jun 2006 18:12:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:12:30 -0000
Received: (qmail 25639 invoked by uid 500); 27 Jun 2006 18:12:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25611 invoked by uid 500); 27 Jun 2006 18:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25600 invoked by uid 99); 27 Jun 2006 18:12:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:12:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [72.29.74.74] (HELO sh58.surpasshosting.com) (72.29.74.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:12:20 -0700
Received: from [81.25.39.212] (helo=localhost)
	by sh58.surpasshosting.com with esmtp (Exim 4.52)
	id 1FvI2b-00069p-Sf; Tue, 27 Jun 2006 14:12:02 -0400
Date: Tue, 27 Jun 2006 21:11:44 +0300
From: Yura Smolsky <info@altervisionmedia.com>
X-Mailer: The Bat! (v3.64.01 Christmas Edition) Professional
Reply-To: Yura Smolsky <info@altervisionmedia.com>
X-Priority: 3 (Normal)
Message-ID: <1613076535.20060627211144@altervisionmedia.com>
To: Chris Hostetter <hossman_lucene@fucit.org>
CC: java-user@lucene.apache.org
Subject: Re[2]: weird error with SVN of Lucene
In-Reply-To: <Pine.LNX.4.58.0606271107270.19719@hal.rescomp.berkeley.edu>
References: <871937711.20060627200020@altervisionmedia.com> <Pine.LNX.4.58.0606271107270.19719@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - sh58.surpasshosting.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - altervisionmedia.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, Chris.

CH> : svn co -r 417135
CH> http://svn.apache.org/repos/asf/lucene/java/trunk lucene-java-2.0.0-417135
CH> : svn: REPORT request failed on
CH> '/repos/asf/!svn/bc/417505/lucene/java/trunk'
CH> : svn: REPORT of '/repos/asf/!svn/bc/417505/lucene/java/trunk':
CH> 400 Bad Request (http://svn.apache.org
CH> : )
CH> : make: *** [lucene-java-2.0.0-417135] Error 1
CH> :
CH> : I can CO PyLucene, but I can't Lucene. Can you?

CH> yep, perhaps just a temporary glitch on the server? .. can you reproduce?

i am trying to CO or update it for 2 hours... can you perform updates or COs?

--
Yura Smolsky,
http://altervisionmedia.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:26:22 2006
Return-Path: <java-user-return-21611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83787 invoked from network); 27 Jun 2006 18:26:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:26:21 -0000
Received: (qmail 56559 invoked by uid 500); 27 Jun 2006 18:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56527 invoked by uid 500); 27 Jun 2006 18:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56515 invoked by uid 99); 27 Jun 2006 18:26:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:26:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:26:13 -0700
Received: from (10.64.1.106) by webshield.cihi.ca via smtp
	 id 6c41_fd9db92c_060a_11db_9431_003048245df9;
	Tue, 27 Jun 2006 14:30:21 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: search performance benchmarks
Date: Tue, 27 Jun 2006 14:24:08 -0400
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F065F29A2@tormail01.cihi.ca>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search performance benchmarks
thread-index: AcaZMJtmFkPLstYqTnqFzLUSh8lHegAICwMwABlbKiAAF7YS8A==
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, Mike. This info is actually quite helpful. What is 'times 10
rule' you are refering to?

Also, I wonder how Lucene is handling the growth of the result set
returned by the query? In the various search engine implementations I
did myself for several projects that was one of the things which made
reponse time to grow with the size of the result set. Eg, does this
happen with Lucene or not?:

- query 1, returns 1000 ranked results, exec. time is 0.5s
- query 2, returns 10000 ranked results, exec. time is 0.7s
- query 3, returns 100000 ranked results, exec. time is 1.0s
- query 4, returns 1000000 ranked results, exec. time is 3.0s
- query 5, returns 10000000 ranked results, exec. time is 10.0s

By 'ranked results' I mean you can retrieve 'top X' 'best matched'
documents.

Or Lucene is more like Google in this sense, meaning that the time
doesn't depend on the size of the matched result set and the
implementation can statistically (or somehow else) deduce approximate
size of the full result set, while not actually counting every single
document in the set (eg, 'search query returned _approximately_ 54
million documents').

Yet another question would be what is the best book (if there are more
than one), that can be recommended as an introduction as well as
'in-depth' coverage of the latest version of Lucene?

Thanks everyone for answering this post - your feedback is very helpful!

Vlad

-----Original Message-----
From: Mike Streeton [mailto:mike.streeton@ardentia.co.uk]=20
Sent: Tuesday, June 27, 2006 2:59 AM
To: java-user@lucene.apache.org
Subject: RE: search performance benchmarks

We recently ran some benchmarks on Linux with 4 xeon cpus and 2gb of
heap (not that this was needed). We managed to easily get 1000 term
based queries a second, this including the query execution time and
retrieving the top 10 documents from the index. We did notice some
contention as adding more clients (threads) kept the same average
execution time but increased the max processing time for some queries.
So the addition of clients caused a queue to build up, but the results
were still sub second with 100 clients, simultaneously executing queries
and using the times 10 rule, this would represent 1000 connected users.

Mike

www.ardentia.com the home of NetSearch
-----Original Message-----
From: Wang, Jeff [mailto:jwang@emptoris.com]
Sent: 26 June 2006 19:50
To: java-user@lucene.apache.org
Subject: RE: search performance benchmarks

Performance varies a lot, and depends upon the number of indexes, the
number of fields, and the CPU/memory configuration.  For myself, a 65Gb
source indexed to 1Gb (or so) returns single term queries (oh yeah, the
query makeup also matters a lot) in sub seconds on a Intel dual
processor (each is 3.6Ghz I think.)  I frankly haven't tested out
scalability yet.

Jeff
Emptoris, Inc.

-----Original Message-----
From: Vladimir Olenin [mailto:VOlenin@cihi.ca]
Sent: Monday, June 26, 2006 7:56 AM
To: java-user@lucene.apache.org
Subject: search performance benchmarks

Hi,
=20
I'm evaluating Lucene right now to use as a base for one open source
project. I found some _indexing_ benchmarks on the lucene website
(http://lucene.apache.org/java/docs/benchmarks.html), but, after a short
browsing, couldn't find any 'runtime' performance benchmarks (Query
speed). Only one of the benchmarks contained some reference to the query
execution... Is there any other source of benchmarks I can refer to? Or
probably some heruistic rule that can help to estimate query execution
time?
=20
Thanks.
=20
Vlad
=20
PS: let me know if details of the searched data will help in evaluation
- I'll be able to provide what I know at this point...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:26:29 2006
Return-Path: <java-user-return-21612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83851 invoked from network); 27 Jun 2006 18:26:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:26:29 -0000
Received: (qmail 57177 invoked by uid 500); 27 Jun 2006 18:26:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57116 invoked by uid 500); 27 Jun 2006 18:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57097 invoked by uid 99); 27 Jun 2006 18:26:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:26:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: unknown (asf.osuosl.org: error in processing during lookup of knearb@pf-cvl.net)
Received: from [12.167.225.6] (HELO liam.pf-cvl.net) (12.167.225.6)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 27 Jun 2006 11:26:15 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by liam.pf-cvl.net (Postfix) with ESMTP id 55E028246B6
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 14:17:39 -0400 (EDT)
X-Virus-Scanned: amavisd-new at pf-cvl.net
Received: from liam.pf-cvl.net ([127.0.0.1])
	by localhost (liam.pf-cvl.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4qd4wfMo1crM for <java-user@lucene.apache.org>;
	Tue, 27 Jun 2006 14:17:39 -0400 (EDT)
Received: from [192.168.1.170] (dialup103.itgs-presearch.com [12.167.225.103])
	by liam.pf-cvl.net (Postfix) with ESMTP id 38B1D824674
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 14:17:39 -0400 (EDT)
Message-ID: <44A17832.1050307@pf-cvl.net>
Date: Tue, 27 Jun 2006 14:25:54 -0400
From: Ben Knear <knearb@pf-cvl.net>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: weird error with SVN of Lucene
References: <871937711.20060627200020@altervisionmedia.com> <Pine.LNX.4.58.0606271107270.19719@hal.rescomp.berkeley.edu> <1613076535.20060627211144@altervisionmedia.com>
In-Reply-To: <1613076535.20060627211144@altervisionmedia.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yura Smolsky wrote:
> Hello, Chris.
>
> CH> : svn co -r 417135
> CH> http://svn.apache.org/repos/asf/lucene/java/trunk lucene-java-2.0.0-417135
> CH> : svn: REPORT request failed on
> CH> '/repos/asf/!svn/bc/417505/lucene/java/trunk'
> CH> : svn: REPORT of '/repos/asf/!svn/bc/417505/lucene/java/trunk':
> CH> 400 Bad Request (http://svn.apache.org
> CH> : )
> CH> : make: *** [lucene-java-2.0.0-417135] Error 1
> CH> :
> CH> : I can CO PyLucene, but I can't Lucene. Can you?
>
> CH> yep, perhaps just a temporary glitch on the server? .. can you reproduce?
>
> i am trying to CO or update it for 2 hours... can you perform updates or COs?
>
> --
> Yura Smolsky,
> http://altervisionmedia.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
I just checked it out about 20 minutes ago.

Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:38:55 2006
Return-Path: <java-user-return-21613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87339 invoked from network); 27 Jun 2006 18:38:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:38:54 -0000
Received: (qmail 86632 invoked by uid 500); 27 Jun 2006 18:38:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86610 invoked by uid 500); 27 Jun 2006 18:38:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86599 invoked by uid 99); 27 Jun 2006 18:38:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:38:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:38:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 918615B781; Tue, 27 Jun 2006 11:38:26 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 89A1E7F403;
	Tue, 27 Jun 2006 11:38:26 -0700 (PDT)
Date: Tue, 27 Jun 2006 11:38:26 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org,
	Yura Smolsky <info@altervisionmedia.com>
Subject: Re[2]: weird error with SVN of Lucene
In-Reply-To: <1613076535.20060627211144@altervisionmedia.com>
Message-ID: <Pine.LNX.4.58.0606271137200.21987@hal.rescomp.berkeley.edu>
References: <871937711.20060627200020@altervisionmedia.com>
 <Pine.LNX.4.58.0606271107270.19719@hal.rescomp.berkeley.edu>
 <1613076535.20060627211144@altervisionmedia.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: i am trying to CO or update it for 2 hours... can you perform updates or COs?

both.  I tried the exact revision checkout you specified in your orriginal
email...

svn co -r 417135 http://svn.apache.org/repos/asf/lucene/java/trunk lucene-java-2.0.0-417135

...and had no problems.

perhaps there is something odd about your SVN client?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 18:47:14 2006
Return-Path: <java-user-return-21614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88686 invoked from network); 27 Jun 2006 18:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 18:47:14 -0000
Received: (qmail 95153 invoked by uid 500); 27 Jun 2006 18:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95117 invoked by uid 500); 27 Jun 2006 18:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95106 invoked by uid 99); 27 Jun 2006 18:47:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:47:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.248.57] (HELO gwia202.syr.edu) (128.230.248.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 11:47:07 -0700
Received: from MTA2-MTA by gwia202.syr.edu
	with Novell_GroupWise; Tue, 27 Jun 2006 14:46:46 -0400
Message-Id: <s4a144d6.019@gwia202.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.5.5 
Date: Tue, 27 Jun 2006 14:46:36 -0400
From: "Steven Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
Subject: Re: weird error with SVN of Lucene
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 06/27/06 at 1:00 PM, Yura Smolsky wrote:
> svn co -r 417135 
> http://svn.apache.org/repos/asf/lucene/java/trunk
> lucene-java-2.0.0-417135

I successfully ran this exact command line just now -- no errors.

It is strange that the revision number given with the checkout command
(417135) does not correspond with the one embedded in the paths given
with the Subversion error message (417505):

>svn: REPORT request failed on
> '/repos/asf/!svn/bc/417505/lucene/java/trunk'
> svn: REPORT of '/repos/asf/!svn/bc/417505/lucene/java/trunk':
> 400 Bad Request

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 19:18:13 2006
Return-Path: <java-user-return-21615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98630 invoked from network); 27 Jun 2006 19:18:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 19:18:12 -0000
Received: (qmail 43511 invoked by uid 500); 27 Jun 2006 19:18:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42533 invoked by uid 500); 27 Jun 2006 19:18:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42522 invoked by uid 99); 27 Jun 2006 19:18:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:18:06 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:18:05 -0700
Received: by ug-out-1314.google.com with SMTP id u2so2575603uge
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 12:17:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HP4uTtxXkBIrIeRRTiidQ9LsMD/8sg7tekhfChs8+DT4/Bq04AvQ+SyOP9dA7zqKv6nHE2qQwTXDrNnuqeWA3/EeMVjxx4+yAiC0AxHim1+xgrEL0PaaN0ss2tGXqysuVKfM7xEmFDkKXd0rsx199sH67duEZukFuUoG1G2j2OQ=
Received: by 10.78.177.11 with SMTP id z11mr2635674hue;
        Tue, 27 Jun 2006 12:17:44 -0700 (PDT)
Received: by 10.78.115.12 with HTTP; Tue, 27 Jun 2006 12:17:44 -0700 (PDT)
Message-ID: <b487c1370606271217p10603df6s7abaf67d3d6eaa58@mail.gmail.com>
Date: Tue, 27 Jun 2006 15:17:44 -0400
From: "Beady Geraghty" <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: merge index from different platform
In-Reply-To: <8842D6AF-FE7C-4F7D-A7BC-72C55350CCA6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8551_13135335.1151435864451"
References: <b487c1370606270823i28b00898td1a14ff787cfa549@mail.gmail.com>
	 <200606272002.59852@danielnaber.de>
	 <8842D6AF-FE7C-4F7D-A7BC-72C55350CCA6@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8551_13135335.1151435864451
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you for the response.

I wasn't very clear in my original note. I just want to make sure that I
can merge indexes created  from differerent platforms/different OSes without
problem.  So I understand from the respond that this can be done.

Thanks





On 6/27/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Jun 27, 2006, at 2:02 PM, Daniel Naber wrote:
>
> > On Dienstag 27 Juni 2006 17:23, Beady Geraghty wrote:
> >
> >> I tried to look at the segments file, thinking that it points to the
> >> various other
> >> files in the index directory,
> >
> > Use IndexWriter.addIndexes() to merge two or more indexes.
>
> Or use the IndexMergeTool as a command-line tool:
>
>        http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/
> miscellaneous/src/java/org/apache/lucene/misc/IndexMergeTool.java
>
> It's in the lucene-misc-*.jar file, so you should be able to do this
> (off the top of my head):
>
>        java -cp lucene-misc.jar:lucene-core.jar IndexMergeTool
> <mergedIndex> <index1> <index2> ....
>
> Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8551_13135335.1151435864451--

From java-user-return-21616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 19:23:59 2006
Return-Path: <java-user-return-21616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7713 invoked from network); 27 Jun 2006 19:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 19:23:58 -0000
Received: (qmail 60129 invoked by uid 500); 27 Jun 2006 19:23:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60104 invoked by uid 500); 27 Jun 2006 19:23:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60093 invoked by uid 99); 27 Jun 2006 19:23:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:23:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 12:23:50 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5106530EFCD4; Tue, 27 Jun 2006 15:23:29 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id AB82230EFCD3
	for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 15:23:27 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <b487c1370606271217p10603df6s7abaf67d3d6eaa58@mail.gmail.com>
References: <b487c1370606270823i28b00898td1a14ff787cfa549@mail.gmail.com> <200606272002.59852@danielnaber.de> <8842D6AF-FE7C-4F7D-A7BC-72C55350CCA6@ehatchersolutions.com> <b487c1370606271217p10603df6s7abaf67d3d6eaa58@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <56B89D94-E2EB-446C-B099-3E77C3FE4704@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: merge index from different platform
Date: Tue, 27 Jun 2006 15:23:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 27, 2006, at 3:17 PM, Beady Geraghty wrote:
> I wasn't very clear in my original note. I just want to make sure  
> that I
> can merge indexes created  from differerent platforms/different  
> OSes without
> problem.  So I understand from the respond that this can be done.

Yes, this can be done.  At least there shouldn't be any problems with  
it.   If you run into any, let us know.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 20:49:28 2006
Return-Path: <java-user-return-21617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32222 invoked from network); 27 Jun 2006 20:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 20:49:27 -0000
Received: (qmail 36098 invoked by uid 500); 27 Jun 2006 20:49:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36065 invoked by uid 500); 27 Jun 2006 20:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36053 invoked by uid 99); 27 Jun 2006 20:49:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 13:49:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [72.29.74.74] (HELO sh58.surpasshosting.com) (72.29.74.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 13:49:19 -0700
Received: from [81.25.37.158] (helo=localhost)
	by sh58.surpasshosting.com with esmtpa (Exim 4.52)
	id 1FvKUc-0004RU-Cn; Tue, 27 Jun 2006 16:49:06 -0400
Date: Tue, 27 Jun 2006 23:48:46 +0300
From: Yura Smolsky <info@altervisionmedia.com>
X-Mailer: The Bat! (v3.64.01 Christmas Edition) Professional
Reply-To: Yura Smolsky <info@altervisionmedia.com>
X-Priority: 3 (Normal)
Message-ID: <448643511.20060627234846@altervisionmedia.com>
To: Chris Hostetter <java-user@lucene.apache.org>
CC: java-user@lucene.apache.org
Subject: Re[3]: weird error with SVN of Lucene
In-Reply-To: <Pine.LNX.4.58.0606271137200.21987@hal.rescomp.berkeley.edu>
References: <871937711.20060627200020@altervisionmedia.com> <Pine.LNX.4.58.0606271107270.19719@hal.rescomp.berkeley.edu> <1613076535.20060627211144@altervisionmedia.com> <Pine.LNX.4.58.0606271137200.21987@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - sh58.surpasshosting.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - altervisionmedia.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, Chris.

i have tried CO it with httpS. and it works. very weird... i dont use
any proxies or other firewalls. also CO from other sites work fine...
can anyone explain this weird behavior of TortoiseSVN 1.3.3, Build
6219 ? :)

CH> : i am trying to CO or update it for 2 hours... can you perform updates or COs?

CH> both.  I tried the exact revision checkout you specified in your orriginal
CH> email...

CH> svn co -r 417135
CH> http://svn.apache.org/repos/asf/lucene/java/trunk lucene-java-2.0.0-417135

CH> ...and had no problems.

CH> perhaps there is something odd about your SVN client?


CH> -Hoss


CH> ---------------------------------------------------------------------
CH> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
CH> For additional commands, e-mail: java-user-help@lucene.apache.org





--
Yura Smolsky,
http://altervisionmedia.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 27 22:54:51 2006
Return-Path: <java-user-return-21618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74373 invoked from network); 27 Jun 2006 22:54:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2006 22:54:51 -0000
Received: (qmail 30252 invoked by uid 500); 27 Jun 2006 22:54:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30154 invoked by uid 500); 27 Jun 2006 22:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30114 invoked by uid 99); 27 Jun 2006 22:54:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 15:54:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wouter@2at.nl designates 213.154.233.61 as permitted sender)
Received: from [213.154.233.61] (HELO kronos.2at.net) (213.154.233.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 15:54:40 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Scoring purely on term frequencies
Date: Wed, 28 Jun 2006 00:54:04 +0200
Message-ID: <B50FE8BF4F9CF24FB800E28DBB1A2FE026D5D2@gaia.2at.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring purely on term frequencies
Thread-Index: AcaaFE1BFg1KYjreRbe3JMejjWujzQAJ4+nQ
From: "W.H. van Atteveldt" <wouter@2at.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear Chris,

Thanks for your reply, explain is a good friend indeed :-)

Actually, the problem was that the documents were weighted in the
indexing phase using the default similarity, and this was cached (as
documented). So swithching the indexing to the HitCountSimilarity solves
the problem of 'strange' results. I need to get rid of score
normalization (ie I want to get 3 hits rather than a float between 0 and
1) but if I use my own HitsCollector this should be solved.

Thanks again for the help, and I'm sure I'll be back here with more
silly questions at some point!

-- Wouter

> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: 27 June 2006 20:05
> To: java-user@lucene.apache.org
> Cc: zgome@entopia.com
> Subject: RE: Scoring purely on term frequencies
>=20
> : Similarity that simply returns the number of matched terms per
document
> : as the score. I tried making one that returns freq as tf and 1.0f as
> : anything else, but that gives strange results; same for something
that
> : really returns 1.0f whatever.
>=20
> That's because when your tf function always returns 1.0, your
Similarity
> is telling the Scorers that certains docs should "match" even when the
> term doesn't appear in them -- it's a vicious cycle, Scorers
distinguish
> the concept of "matching" and "scoring" so it's possible to have a
> document "match" a query with a negative score -- but the Scorers
> themselves look at the value returned from tf to determine wether or
not
> it should be considered a match (that way you can have a similarity
that
> says there must be at least two occurances of each term to count as a
> match)
>=20
> as for why you might get strange results when your tf function returns
> the frequency ... it depends on what you mean by strange ...
> Searcher.explain is your friend, and with the recent bugs i fixed, it
> should be an honest friend.
>=20
>=20
>=20
> :
> : The code is listed below, if anybody can help me out I would be very
> : grateful! (and this is the first time I'm using Lucene at all so
forgive
> : me if I am getting something totally wrong...)
> :
> : -- Wouter
> :
> : =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D HitCountSimilarity.java =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> :
> : import  org.apache.lucene.search.*;
> : import java.util.*;
> :
> : public class HitCountSimilarity extends Similarity {
> :
> :     public float coord(int overlap, int maxOverlap)
> :     {
> :         // Computes a score factor based on the fraction of all
query
> : terms that a document contains.
> :         return 1.0f;
> :     }
> :
> :
> :     public float idf(Collection terms, Searcher searcher)
> :     {
> :         // Computes a score factor for a phrase.
> :         return 1.0f;
> :     }
> :
> :     public float idf(int docFreq, int numDocs)
> :     {
> :         // Computes a score factor based on a term's document
frequency
> : (the number of documents which contain the term).
> :         return 1.0f;
> :     }
> :
> :     public float idf(org.apache.lucene.index.Term term, Searcher
> : searcher)
> :     {
> :         // Computes a score factor for a simple term.
> :         return 1.0f;
> :     }
> :
> :     public float lengthNorm(String fieldName, int numTokens)
> :     {
> :         // Computes the normalization value for a field given the
total
> : number of terms contained in a field.
> :         return 1.0f;
> :     }
> :
> :     public float queryNorm(float sumOfSquaredWeights)
> :     {
> :         // Computes the normalization value for a query given the
sum of
> : the squared weights of each of the query terms.
> :         return 1.0f;
> :     }
> :
> :     public float sloppyFreq(int distance)
> :     {
> :         return 0.0f;
> :     }
> :
> :     public float tf(float freq)
> :     {
> :         // Computes a score factor based on a term or phrase's
frequency
> : in a document.
> :         return 1.0f; // was return freq;
> :     }
> :
> :     public float tf(int freq)
> :     {
> :         // Computes a score factor based on a term or phrase's
frequency
> : in a document.
> :         return 1.0f;  // was return freq;
> :     }
> : }
> :
> :
> : =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D SearchFiles.java =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> :
> : <snip imports>
> :
> : public class SearchFiles {
> :
> :   public static void main(String[] args) throws Exception {
> :
> :     Similarity.setDefault(new HitCountSimilarity());
> :
> :     String index =3D "index";
> :     String field =3D "body";
> :     String q =3D "dit";
> :
> :
> :     IndexReader reader =3D IndexReader.open(index);
> :     Term t =3D new Term(field, q);
> :     TermDocs td =3D reader.termDocs(t);
> :
> :     System.out.println("Searching query "+q);
> :
> :     Searcher searcher =3D new IndexSearcher(reader);
> :     Analyzer analyzer =3D new StandardAnalyzer();
> :
> :     org.apache.lucene.search.Query query =3D new QueryParser(field,
> : analyzer).parse(q);
> :
> :     Hits hits =3D searcher.search(query);
> :
> :     System.out.println(hits.length() + " total matching documents");
> :
> :     for(int i=3D0; i<hits.length(); i++) {
> :         System.out.println("doc=3D"+hits.id(i)+"
score=3D"+hits.score(i));
> :         Document doc =3D hits.doc(i);
> :         System.out.println(doc.get("id"));
> :         }
> :     reader.close();
> :   }
> : }
> :
> : =3D=3D=3D=3D=3D=3D=3D=3D=3D session: =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> :
> : [wva@swpc450 lucenetest]$ java SearchFiles
> : Searching query dit
> : 2 total matching documents
> : doc=3D1 score=3D0.65625 (should be 4)
> : 2
> : doc=3D0 score=3D0.5  (should be 3)
> : 123
> : [wva@swpc450 lucenetest]$ javac *.java  # (after changing return
freq to
> : return 1.0f)
> : [wva@swpc450 lucenetest]$ java SearchFiles
> : Searching query dit
> : 2 total matching documents
> : doc=3D0 score=3D0.25 (should be 1?)
> : 123
> : doc=3D1 score=3D0.21875 (should be 1?)
> : 2
> : [wva@swpc450 lucenetest]$
> :
> :
> :
> :
> :
> : > -----Original Message-----
> : > From: Ziv Gome [mailto:zgome@entopia.com]
> : > Sent: 21 May 2006 11:19
> : > To: java-user@lucene.apache.org
> : > Subject: RE: Scoring purely on term frequencies
> : >
> : > Hi Wouter,
> : >
> : > My thought would be to go for plan (b) (have not tested it
though).
> : This
> : > would produce simply the sum of frequencies of the different terms
> : (I'm
> : > referring to a real multi-term query, not a phrase as you
mentioned -
> : > "the man" - which should work).
> : > The problem I see is that it you loose the ability to use boosts
(I
> : > assume this is fine by you).
> : >
> : > I don't see a problem here, (referring to "doesn't feel right"...)
-
> : you
> : > simply want a different scoring - "just give me the damn
frequency",
> : > right? In that situation, you should disable all the idf, coord,
norm
> : > and sqrt manipulations that Lucene did in order to produce
"smarter"
> : > scores, which takes into account and balance other properties of
the
> : > query (different terms and their IDFs); the document (lengthNorm);
the
> : > index (IDF's); and behavior of frequencies (tf implementation as
> : sqrt).
> : > The frameworks makes these smarter adjustments possible, it does
not
> : > mean you need it in your case.
> : >
> : > Ziv
> : >
> : >
> : >
> : > -----Original Message-----
> : > From: W.H. van Atteveldt [mailto:wouter@2at.nl]
> : > Sent: Saturday, May 20, 2006 7:05 AM
> : > To: java-user@lucene.apache.org
> : > Subject: Scoring purely on term frequencies
> : >
> : > Dear list,
> : >
> : > I am interested in using Lucene for analyzing documents based on
> : > occurrence of certain keywords. As such, I am not interested in
the
> : > 'top' or 'best' documents, but I do want to know exactly how many
> : words
> : > in the query matched.
> : >
> : > Thus, instead of the complicated formula used by default, I really
> : just
> : > want to use Score(q,d) =3D Sum_{t in q} freq(q,d).
> : >
> : > [Of course, if the query is "the man", I do not want to count
'the'
> : > before man; since 'the' I think is a Term (right?), this does not
> : quite
> : > hold. I want to count every occurrence of the combination 'the
man']
> : >
> : > (a)
> : > I tried extending a SimilarityDelegator(DefaultSimilarity) and
make tf
> : > return freq and coord,idf,*Norm return 1.0f. This worked but
produced
> : > scores like 0.61 (approx) and 0.5 where it should have returned 3
and
> : 2
> : > (on a simple test)
> : >
> : > (b)
> : > I suppose I could extend Similarity itself but the documentation
is
> : > quite sketchy on which methods are actually used, and something
like
> : > coord or idf is simply meaningless in my case. I could return 1.0
like
> : > above but somehow it doesn't feel right. That said, I haven't
tried it
> : > yet :-)
> : >
> : > (c)
> : > I could skip the Searcher and directly use the IndexReader. With
> : simple
> : > term queries this is trivial and works as expected, but I would
like
> : to
> : > be able to use "the man" and "the article"~3 style queries. I
could go
> : > ahead and look at the positions, but it seems like someone should
> : > already have implemented this before. Can anyone point me in the
> : > direction of something that gives me a frequency if I give it a
query
> : > (rather than a term).
> : >
> : > Any help greatly appreciated!
> : >
> : > Wouter
> : >
> : >
---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> : >
> : >
> : >
---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> :
> :
---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 04:16:14 2006
Return-Path: <java-user-return-21619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34428 invoked from network); 28 Jun 2006 04:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 04:16:13 -0000
Received: (qmail 47181 invoked by uid 500); 28 Jun 2006 04:16:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47113 invoked by uid 500); 28 Jun 2006 04:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47102 invoked by uid 99); 28 Jun 2006 04:16:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 21:16:07 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jun 2006 21:16:06 -0700
Received: by py-out-1112.google.com with SMTP id m51so2008767pye
        for <java-user@lucene.apache.org>; Tue, 27 Jun 2006 21:15:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mSuNmBdtEr28ZMLcR3Z244WE0FhQHZM1PziLFWnJHjTHWmvkQwUBKflXGWhawMLR2zjnuL9SM2mYYzrxIvFh3Ifz+gMyYEhIV3owKsxbjh0PGDeiodnTZAMLdYt0k6QKgh1d9SgYL7eudURlTZiSnOw1jOGVt6/NkMMjipDlsHU=
Received: by 10.35.93.15 with SMTP id v15mr307781pyl;
        Tue, 27 Jun 2006 21:15:45 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Tue, 27 Jun 2006 21:15:44 -0700 (PDT)
Message-ID: <a36516400606272115w7b957557i4f1e65b5428e6805@mail.gmail.com>
Date: Wed, 28 Jun 2006 09:45:44 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search performance benchmarks
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F065F29A2@tormail01.cihi.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18788_31537464.1151468144705"
References: <373399D6389D8C42B4EAD9BE2B6B5C5F065F29A2@tormail01.cihi.ca>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18788_31537464.1151468144705
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
>>Or Lucene is more like Google in this sense, meaning that the time
doesn't depend on the size of the matched result

i found that it takes long time if the result set is bigger(upto 25 sec for
29 M results). But for smaller resultset of size approx 10,000 it takes
approx. 200 ms.





On 6/27/06, Vladimir Olenin <VOlenin@cihi.ca> wrote:
>
> Thanks, Mike. This info is actually quite helpful. What is 'times 10
> rule' you are refering to?
>
> Also, I wonder how Lucene is handling the growth of the result set
> returned by the query? In the various search engine implementations I
> did myself for several projects that was one of the things which made
> reponse time to grow with the size of the result set. Eg, does this
> happen with Lucene or not?:
>
> - query 1, returns 1000 ranked results, exec. time is 0.5s
> - query 2, returns 10000 ranked results, exec. time is 0.7s
> - query 3, returns 100000 ranked results, exec. time is 1.0s
> - query 4, returns 1000000 ranked results, exec. time is 3.0s
> - query 5, returns 10000000 ranked results, exec. time is 10.0s
>
> By 'ranked results' I mean you can retrieve 'top X' 'best matched'
> documents.
>
> Or Lucene is more like Google in this sense, meaning that the time
> doesn't depend on the size of the matched result set and the
> implementation can statistically (or somehow else) deduce approximate
> size of the full result set, while not actually counting every single
> document in the set (eg, 'search query returned _approximately_ 54
> million documents').
>
> Yet another question would be what is the best book (if there are more
> than one), that can be recommended as an introduction as well as
> 'in-depth' coverage of the latest version of Lucene?
>
> Thanks everyone for answering this post - your feedback is very helpful!
>
> Vlad
>
> -----Original Message-----
> From: Mike Streeton [mailto:mike.streeton@ardentia.co.uk]
> Sent: Tuesday, June 27, 2006 2:59 AM
> To: java-user@lucene.apache.org
> Subject: RE: search performance benchmarks
>
> We recently ran some benchmarks on Linux with 4 xeon cpus and 2gb of
> heap (not that this was needed). We managed to easily get 1000 term
> based queries a second, this including the query execution time and
> retrieving the top 10 documents from the index. We did notice some
> contention as adding more clients (threads) kept the same average
> execution time but increased the max processing time for some queries.
> So the addition of clients caused a queue to build up, but the results
> were still sub second with 100 clients, simultaneously executing queries
> and using the times 10 rule, this would represent 1000 connected users.
>
> Mike
>
> www.ardentia.com the home of NetSearch
> -----Original Message-----
> From: Wang, Jeff [mailto:jwang@emptoris.com]
> Sent: 26 June 2006 19:50
> To: java-user@lucene.apache.org
> Subject: RE: search performance benchmarks
>
> Performance varies a lot, and depends upon the number of indexes, the
> number of fields, and the CPU/memory configuration.  For myself, a 65Gb
> source indexed to 1Gb (or so) returns single term queries (oh yeah, the
> query makeup also matters a lot) in sub seconds on a Intel dual
> processor (each is 3.6Ghz I think.)  I frankly haven't tested out
> scalability yet.
>
> Jeff
> Emptoris, Inc.
>
> -----Original Message-----
> From: Vladimir Olenin [mailto:VOlenin@cihi.ca]
> Sent: Monday, June 26, 2006 7:56 AM
> To: java-user@lucene.apache.org
> Subject: search performance benchmarks
>
> Hi,
>
> I'm evaluating Lucene right now to use as a base for one open source
> project. I found some _indexing_ benchmarks on the lucene website
> (http://lucene.apache.org/java/docs/benchmarks.html), but, after a short
> browsing, couldn't find any 'runtime' performance benchmarks (Query
> speed). Only one of the benchmarks contained some reference to the query
> execution... Is there any other source of benchmarks I can refer to? Or
> probably some heruistic rule that can help to estimate query execution
> time?
>
> Thanks.
>
> Vlad
>
> PS: let me know if details of the searched data will help in evaluation
> - I'll be able to provide what I know at this point...
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18788_31537464.1151468144705--

From java-user-return-21620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 09:31:46 2006
Return-Path: <java-user-return-21620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27564 invoked from network); 28 Jun 2006 09:31:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 09:31:46 -0000
Received: (qmail 71489 invoked by uid 500); 28 Jun 2006 09:31:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71463 invoked by uid 500); 28 Jun 2006 09:31:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71452 invoked by uid 99); 28 Jun 2006 09:31:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 02:31:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of adam.saltiel@gmail.com designates 66.249.82.192 as permitted sender)
Received: from [66.249.82.192] (HELO wx-out-0102.google.com) (66.249.82.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 02:31:35 -0700
Received: by wx-out-0102.google.com with SMTP id t16so1196261wxc
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 02:31:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lOEkpRXuGs8c4BL+Yhr5gUScySJYEcPGuFuJ5HVx5DjnR1TxgM4Q+Po4jVtBj5qxhNU/FnGGgEF0+909sDAQPVA4O5LrUCi8NPD8/pXRxLxlxFva9WKa87wS5noGC89T1Fgwf1Yv+6yaahw83CxeHQaKJR9hWl9OrGTx8whLrEk=
Received: by 10.70.126.12 with SMTP id y12mr453808wxc;
        Wed, 28 Jun 2006 02:31:14 -0700 (PDT)
Received: by 10.70.70.9 with HTTP; Wed, 28 Jun 2006 02:31:14 -0700 (PDT)
Message-ID: <e8aa138c0606280231h13b0ffebq274d3b3664c09421@mail.gmail.com>
Date: Wed, 28 Jun 2006 10:31:14 +0100
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene indexing RDF
In-Reply-To: <44A1696B.5060103@wolfram.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68682_24309467.1151487074071"
References: <20060627160043.909B8C0BB@mad.isoco.net>
	 <44A1696B.5060103@wolfram.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_68682_24309467.1151487074071
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

V2hhdCBhcmUgdGhlIGlzc3VlcyBpbiBpbmRleGluZyByZGY/IEkgd291bGQgYmUgaW50ZXJlc3Rl
ZCB0byBzZWUgYQpkaXNjdXNpb24gb2YgdGhpcy4KT2ZmIHRoZSB0b3Agb2YgbXkgaGVhZCBpdCB3
b3VsZCBiZSBvbmUgdGhpbmcgdG8gaW5kZXggdGhlIGRhdGEsIHJlZ2FyZGxlc3MKb2YgZW5jbG9z
aW5nIHRhZ3MsIGJ1dCBzb21ldGhpbmcgZWxzZSB0byBlbXBsb3kgdGhlIHRhZ3MgYXMgYWRqdW5j
dCB0byB0aGUKaW5kZXguIEhhcyB0aGlzIGJlZW4gYXBwcm9hY2hlZCBhbnl3aGVyZT8KQSB0aGly
ZCBwYXJ0IHdvdWxkIGJlIHB1cmUgaW5kZXhpbmcgb2YgdGhlIHRhZ3Mgb25seSAtIEkgd29uZGVy
IGlmIHRoZXJlCndvdWxkIGJlIGFueSB1c2UgZm9yIHRoaXMsIGJ1dCBzdXNwZWN0IHRoZXJlIHdv
dWxkIGZvciBvcHRpbWlzYXRpb24gYW5kIHRvCmhlbHAgZ3VpZGUgcXVlcnJpZXMsIGZvciBpbnN0
YW5jZSB0aGVyZSB3b3VsZCBiZSBubyBzZW5zZSBpbiBzZWFyY2hpbmcgZm9yCmNvbnRlbnQgdGhh
dCB3b3VsZCBvbmx5IGJlIHN1cnJvdW5kZWQgYnkgdGFncyB0aGF0IGRvbid0IGV4aXN0IGluIHRo
ZQpkb2N1bWVudCBpbnN0YW5jZXMgYmVpbmcgaW5zcGVjdGVkIGFuZCwgY29udmVyc2VseSwgdGhl
cmUgbWF5YmUgYSBsb3Qgb2YKc2Vuc2UgaW4gc2VhcmNoaW5nIHdoZXJlIHRoZSB0YWcgYXBwZWFy
cyBmcmVxdWVudGx5LCBvciBiZWNhdXNlIG9mIHNvbWUKb3RoZXIgbG9naWNhbCBvciBzdGF0aXN0
aWNhbCBwcm9wZXJ0eSBvZiB0aGUgdGFnLgpBcyBmYXIgYXMgaSBoYXZlIHJlc2VhcmNoZWQgdGhp
cyBJIGtub3cgdGhhdCB0aGUgZ25vd3NpcyBwcm9qZWN0IHVzZXMgYm90aApyZGYgYW5kIGx1Y2Vu
ZSwgYnV0IEkgaGF2ZSBub3QgaGFkIHRpbWUgdG8gZGV0ZXJtaW5lIHRoZWlyIHJlbGF0aW9uc2hp
cC4Kd3d3Lmdub3dzaXMub3JnLwpEU3BhY2UgPGh0dHA6Ly93d3cuZHNwYWNlLm9yZy8+IGFsc28g
c3VwcG9ydHMgYSBsdWNlbmUgaW50ZXJmYWNlIGJ1dCwgYWdhaW4sCkkgZG9uJ3Qga25vdyBob3cg
aXQgaXMgdXNlZC4KQWRhbQoKT24gMjcvMDYvMDYsIFN1YmEgU3VyZXNoIDxzdWJhc0B3b2xmcmFt
LmNvbT4gd3JvdGU6Cj4KPiBJIHVzZWQgamF2YSBsaWJyYXJpZXMgZm9yIHJ0ZiBmaWxlIGZvcm1h
dHMuIFJlZmVyIHRvIE1hbm5uaW5nJ3MgTHVjZW5lCj4gSW4gQWN0aW9uIGJvb2suIEl0IGlzIGhl
bHBmdWwgYW5kIGdpdmVzIHBvaW50ZXJzIHdoZXJlIHlvdSBjYW4gYWNjZXNzCj4gZGlmZmVyZW50
bGlicmFyaWVzLgo+Cj4gc3ViYSBzdXJlc2guCj4KPiBtY2FyY2VsZW4gd3JvdGU6Cj4gPiBIaSwK
PiA+IERvIHlvdSBrbm93IGFub3RoZXIgbGlicmFyeSBmb3IgaW5kZXhpbmcgUkRGPwo+ID4gVGhh
bmtzIGEgbG90IGZvciB5b3VyIGhlbHAKPiA+IFRlcmVzYQo+ID4KPiA+Cj4gPiAtLS0tLU1lbnNh
amUgb3JpZ2luYWwtLS0tLQo+ID4gRGU6IFN1YmEgU3VyZXNoIFttYWlsdG86c3ViYXNAd29sZnJh
bS5jb21dCj4gPiBFbnZpYWRvIGVsOiBtYXJ0ZXMsIDI3IGRlIGp1bmlvIGRlIDIwMDYgMTc6MzgK
PiA+IFBhcmE6IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gQXN1bnRvOiBSZTogTHVj
ZW5lIGluZGV4aW5nIHBkZgo+ID4KPiA+IEkgdXNlZCBQREZCb3ggbGlicmFyeSBhcyBtZW50aW9u
ZWQgaW4gTHVjZW5lIGluIEFjdGlvbi4gSXQgd29ya3MgZm9yIG1lLgo+ID4gWW91IGNhbiBhY2Nl
c3MgaXQgZnJvbSB3d3cucGRmYm94Lm9yZwo+ID4KPiA+IHN1YmEgc3VyZXNoCj4gPgo+ID4gbWNh
cmNlbGVuIHdyb3RlOgo+ID4KPiA+PkhpLAo+ID4+ScK0bSBuZXcgd2l0aCBMdWNlbmUgYW5kIEnC
tG0gdHJ5aW5nIHRvIGluZGV4IGEgcGRmIGJ1dCB3aGVuIEkgcXVlcnkKPiA+PmV2ZXJ5dGhpbmcg
aXQgcmV0dXJucyBub3RoaW5nLiBDYW4gYW55b25lIGhlbHAgbWU/Cj4gPj5UaGFucyBhIGxvdAo+
ID4+VGVyZXNhCj4gPj4KPiA+Pgo+ID4+LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPj5UbyB1bnN1YnNjcmliZSwg
ZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+PkZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUu
b3JnCj4gPj4KPiA+Cj4gPgo+ID4KPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gVG8gdW5zdWJzY3JpYmUs
IGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiBGb3Ig
YWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZwo+ID4KPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+
Cj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=
------=_Part_68682_24309467.1151487074071--

From java-user-return-21621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 09:46:20 2006
Return-Path: <java-user-return-21621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34269 invoked from network); 28 Jun 2006 09:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 09:46:20 -0000
Received: (qmail 96406 invoked by uid 500); 28 Jun 2006 09:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96332 invoked by uid 500); 28 Jun 2006 09:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96287 invoked by uid 99); 28 Jun 2006 09:46:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 02:46:12 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 02:46:08 -0700
Received: (qmail 25797 invoked by uid 509); 28 Jun 2006 11:45:41 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.106362 secs); 28 Jun 2006 09:45:41 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.106362 secs Process 25791)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 28 Jun 2006 11:45:41 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69A97.9E0D53D9"
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Subject: Flushing RAMDir into FSDir
Date: Wed, 28 Jun 2006 11:45:40 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C01EE8598@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Flushing RAMDir into FSDir
Thread-Index: Acaal53YyPnFdSmRTq6oUknCBXdRcQ==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69A97.9E0D53D9
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I got a lucene based host application that retrieves content for
indexing from fetcher applications.

=20

Since I get fresh content all the time I wanted to have full control
over the disc write process.

=20

So I ended up using a RAMDirectory and a FSDirectory.=20

=20

When the content arrives to the application a representation of the
content is written to the disc and the content itself are added as a
Lucene document into the RAMDirectory. When the amount of documents in
the RAMDirectory exceeds my limit I flush the RAMDirectory into the
FSDirectory (using the same limit as minMergeDocs).=20

=20

This works fine as long as I use the=20

fsIndexWriter.AddIndexes(new Directory[] { myRamDir } );=20

approach. However this approach seems to add the newly content to a new
large file  (as long as maxMergeDocs hasn't been exceed).=20

=20

For example if I got 5000 as minMergeDocs and 15000 as maxMergeDocs  and
I flush the interval 5001-10000 from the ramdir to disc I will end up
with 1 file containing docs 1 - 10000 rather than 2 files ( 1 - 5000 and
5001 - 10000 ).

=20

Is there any way to get it to add the new indexes as a new file instead?

Since this severely affects my indexing in a negative way.

=20

=20

/

Regards=20

Marcus Falck

=20


------_=_NextPart_001_01C69A97.9E0D53D9--

From java-user-return-21622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 10:54:25 2006
Return-Path: <java-user-return-21622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57188 invoked from network); 28 Jun 2006 10:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 10:54:24 -0000
Received: (qmail 94432 invoked by uid 500); 28 Jun 2006 10:54:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94400 invoked by uid 500); 28 Jun 2006 10:54:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94389 invoked by uid 99); 28 Jun 2006 10:54:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 03:54:17 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 72.14.214.202 as permitted sender)
Received: from [72.14.214.202] (HELO hu-out-0102.google.com) (72.14.214.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 03:54:16 -0700
Received: by hu-out-0102.google.com with SMTP id 28so1190016hub
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 03:53:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rr8slA8tLHsXf7uELy7v/PGI6xmVa/OGnhiBTXLlTO3HE8Qr85MgTkemghlQfGh7UvvWOFqvQYIIoo+OMby7az3zLqnqfPRZRwCpKFtqpx2evabsVHdg7lgh3WefNJxv/s/xmimT1e4lO3GnzUqi9qT+gLRYzFmiITNT/7mhqFw=
Received: by 10.35.83.6 with SMTP id k6mr359747pyl;
        Wed, 28 Jun 2006 03:53:54 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Wed, 28 Jun 2006 03:53:54 -0700 (PDT)
Message-ID: <a36516400606280353q4610f994xd18d524198dbd15d@mail.gmail.com>
Date: Wed, 28 Jun 2006 16:23:54 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet
In-Reply-To: <BAE7BAF7-1D3A-48E8-BE0E-0BC531B94E8E@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24119_10267729.1151492034241"
References: <200606271432.k5REWFAp009750@smtp-ft3.fr.colt.net>
	 <BAE7BAF7-1D3A-48E8-BE0E-0BC531B94E8E@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_24119_10267729.1151492034241
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there any difference in terms of speed between IndexReader and
IndexSearcher??



On 6/27/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Jun 27, 2006, at 10:32 AM, Fabrice Robini wrote:
> > That's also my case...
> > I create a new IndexSearcher at each query, but with a static and
> > instanciated Directory.
> >
> > New IndexSearcher(myDirectory)
> >
> > It seems to be OK... am I wrong ?
>
> You may be "ok" given your query patterns, but you won't benefit from
> Lucene internal caching unless you use a single IndexSearcher (or
> IndexReader, as just pointed out).
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24119_10267729.1151492034241--

From java-user-return-21623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 11:15:39 2006
Return-Path: <java-user-return-21623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67217 invoked from network); 28 Jun 2006 11:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 11:15:38 -0000
Received: (qmail 36457 invoked by uid 500); 28 Jun 2006 11:15:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35825 invoked by uid 500); 28 Jun 2006 11:15:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35814 invoked by uid 99); 28 Jun 2006 11:15:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:15:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:15:30 -0700
Received: from lettmelk [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A0BE0414; Wed, 28 Jun 2006 12:58:06 +0200
Date: Wed, 28 Jun 2006 13:14:54 +0200
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <200606271432.k5REWFAp009750@smtp-ft3.fr.colt.net> <BAE7BAF7-1D3A-48E8-BE0E-0BC531B94E8E@ehatchersolutions.com> <a36516400606280353q4610f994xd18d524198dbd15d@mail.gmail.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tbur640roftp72@lettmelk>
In-Reply-To: <a36516400606280353q4610f994xd18d524198dbd15d@mail.gmail.com>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-1, 27.06.2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: D60be0a3400000249.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As far as i know, an IndexSearcher use an IndexReader.. Hence you can do  
searcher.getIndexReader().. even tho you instanciated the searcher with a  
string path or a directory. So, i would guess that by creating a searcher  
with an indexreader as parameter, the constructor will be faster.

But, what do I know:)

On Wed, 28 Jun 2006 12:53:54 +0200, heritrix.lucene  
<heritrix.lucene@gmail.com> wrote:

> Is there any difference in terms of speed between IndexReader and
> IndexSearcher??
>
>
>
> On 6/27/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>>
>> On Jun 27, 2006, at 10:32 AM, Fabrice Robini wrote:
>> > That's also my case...
>> > I create a new IndexSearcher at each query, but with a static and
>> > instanciated Directory.
>> >
>> > New IndexSearcher(myDirectory)
>> >
>> > It seems to be OK... am I wrong ?
>>
>> You may be "ok" given your query patterns, but you won't benefit from
>> Lucene internal caching unless you use a single IndexSearcher (or
>> IndexReader, as just pointed out).
>>
>>         Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 11:37:08 2006
Return-Path: <java-user-return-21624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74521 invoked from network); 28 Jun 2006 11:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 11:37:08 -0000
Received: (qmail 64463 invoked by uid 500); 28 Jun 2006 11:37:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64429 invoked by uid 500); 28 Jun 2006 11:37:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64418 invoked by uid 99); 28 Jun 2006 11:37:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:37:02 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DATE_IN_PAST_96_XX
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:37:01 -0700
Received: from dev2.mcpps.com ([213.94.211.166] helo=HUGHROSS)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1FvYLE-0001hl-Au
	for java-user@lucene.apache.org; Wed, 28 Jun 2006 12:36:21 +0100
From: "Hugh Ross" <hugh.ross@propylon.com>
To: <java-user@lucene.apache.org>
Date: Fri, 28 Apr 2006 12:36:32 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcZqt/800q6ouE0XRge9cbiFha1S3g==
Message-Id: <E1FvYLE-0001hl-Au@mercury.propylon.com>
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: hugh.ross@propylon.com
Subject: Exact match on a single term / word
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.5 required=5.0 tests=ALL_TRUSTED,AWL,
	DATE_IN_PAST_96_XX autolearn=failed version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am trying to get Lucene to perform an exact match on a single term or word
using the default query parser. It works fine whenever I have more than one
word / term in the search string (it parses the string into a PhraseQuery
with a slop of 0 which is correct). However when the search string just
contains a single word ie "state", the query parser parses this into a
TermQuery despite the quotes when I would have expected a phrase query.
Is there any easy way around this?

Many thanks,
Hugh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 11:39:14 2006
Return-Path: <java-user-return-21625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74849 invoked from network); 28 Jun 2006 11:39:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 11:39:13 -0000
Received: (qmail 67477 invoked by uid 500); 28 Jun 2006 11:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67447 invoked by uid 500); 28 Jun 2006 11:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67435 invoked by uid 99); 28 Jun 2006 11:39:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:39:07 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:39:06 -0700
Received: (qmail 10606 invoked by uid 509); 28 Jun 2006 13:38:34 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.073464 secs); 28 Jun 2006 11:38:34 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.073464 secs Process 10600)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 28 Jun 2006 13:38:34 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Subject: SV: Flushing RAMDir into FSDir
Date: Wed, 28 Jun 2006 13:38:33 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C01EE86FE@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Flushing RAMDir into FSDir
Thread-Index: Acaal53YyPnFdSmRTq6oUknCBXdRcQAD5pOA
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Did a clone of the AddIndexes method.
See code below. Anybody seeing any problems with using the =
AddIndexesWithoutOptimize method ?


// Original
		public virtual void  AddIndexes(Directory[] dirs)
		{
			lock (this)
			{
				Optimize(); // start with zero or 1 seg
				for (int i =3D 0; i < dirs.Length; i++)
				{
					SegmentInfos sis =3D new SegmentInfos(); // read infos from dir
					sis.Read(dirs[i]);
					for (int j =3D 0; j < sis.Count; j++)
					{
						segmentInfos.Add(sis.Info(j)); // add each info
					}
				}
				Optimize(); // final cleanup
			}
		}
// new without optimize calls
        public virtual void AddIndexesWithoutOptimize(Directory[] dirs)
        {
            lock (this)
            {
                for (int i =3D 0; i < dirs.Length; i++)
                {
                    SegmentInfos sis =3D new SegmentInfos(); // read =
infos from dir
                    sis.Read(dirs[i]);
                    for (int j =3D 0; j < sis.Count; j++)
                    {
                        segmentInfos.Add(sis.Info(j)); // add each info
                    }
                }
                MaybeMergeSegments();
            }
        }

-----Ursprungligt meddelande-----
Fr=E5n: Marcus Falck [mailto:marcus.falck@observer.se]=20
Skickat: den 28 juni 2006 11:46
Till: java-user@lucene.apache.org
=C4mne: Flushing RAMDir into FSDir

Hi,

=20

I got a lucene based host application that retrieves content for
indexing from fetcher applications.

=20

Since I get fresh content all the time I wanted to have full control
over the disc write process.

=20

So I ended up using a RAMDirectory and a FSDirectory.=20

=20

When the content arrives to the application a representation of the
content is written to the disc and the content itself are added as a
Lucene document into the RAMDirectory. When the amount of documents in
the RAMDirectory exceeds my limit I flush the RAMDirectory into the
FSDirectory (using the same limit as minMergeDocs).=20

=20

This works fine as long as I use the=20

fsIndexWriter.AddIndexes(new Directory[] { myRamDir } );=20

approach. However this approach seems to add the newly content to a new
large file  (as long as maxMergeDocs hasn't been exceed).=20

=20

For example if I got 5000 as minMergeDocs and 15000 as maxMergeDocs  and
I flush the interval 5001-10000 from the ramdir to disc I will end up
with 1 file containing docs 1 - 10000 rather than 2 files ( 1 - 5000 and
5001 - 10000 ).

=20

Is there any way to get it to add the new indexes as a new file instead?

Since this severely affects my indexing in a negative way.

=20

=20

/

Regards=20

Marcus Falck

=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 11:54:46 2006
Return-Path: <java-user-return-21626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79318 invoked from network); 28 Jun 2006 11:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 11:54:45 -0000
Received: (qmail 88162 invoked by uid 500); 28 Jun 2006 11:54:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87411 invoked by uid 500); 28 Jun 2006 11:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87400 invoked by uid 99); 28 Jun 2006 11:54:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:54:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:54:38 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5450F30EFCD4; Wed, 28 Jun 2006 07:54:17 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 1350C30EFCD3
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 07:54:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <a36516400606280353q4610f994xd18d524198dbd15d@mail.gmail.com>
References: <200606271432.k5REWFAp009750@smtp-ft3.fr.colt.net> <BAE7BAF7-1D3A-48E8-BE0E-0BC531B94E8E@ehatchersolutions.com> <a36516400606280353q4610f994xd18d524198dbd15d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <64A04AB5-682B-47C7-A70B-E735A3C85D2C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: IndexSearcher in Servlet
Date: Wed, 28 Jun 2006 07:54:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 28, 2006, at 6:53 AM, heritrix.lucene wrote:
> Is there any difference in terms of speed between IndexReader and
> IndexSearcher??

I'm assuming you mean is there any difference in speed in how you  
construct an IndexSearcher.... no.

	Erik


>
>
>
> On 6/27/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>>
>> On Jun 27, 2006, at 10:32 AM, Fabrice Robini wrote:
>> > That's also my case...
>> > I create a new IndexSearcher at each query, but with a static and
>> > instanciated Directory.
>> >
>> > New IndexSearcher(myDirectory)
>> >
>> > It seems to be OK... am I wrong ?
>>
>> You may be "ok" given your query patterns, but you won't benefit from
>> Lucene internal caching unless you use a single IndexSearcher (or
>> IndexReader, as just pointed out).
>>
>>         Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 11:56:15 2006
Return-Path: <java-user-return-21627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79719 invoked from network); 28 Jun 2006 11:56:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 11:56:14 -0000
Received: (qmail 90607 invoked by uid 500); 28 Jun 2006 11:56:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90574 invoked by uid 500); 28 Jun 2006 11:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90558 invoked by uid 99); 28 Jun 2006 11:56:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:56:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 04:56:06 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 317FD30EFCD3; Wed, 28 Jun 2006 07:55:45 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9821E30EFCD3
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 07:55:42 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <E1FvYLE-0001hl-Au@mercury.propylon.com>
References: <E1FvYLE-0001hl-Au@mercury.propylon.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B10A4C16-238D-4BAB-8C29-4270A5A9C9B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Exact match on a single term / word
Date: Wed, 28 Jun 2006 07:55:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What is the problem with using a TermQuery in this case?  Please  
provide some more details on the analyzer you're using (both for  
indexing and with QueryParser) and a sample of text you indexed.

	Erik


On Apr 28, 2006, at 7:36 AM, Hugh Ross wrote:

> I am trying to get Lucene to perform an exact match on a single  
> term or word
> using the default query parser. It works fine whenever I have more  
> than one
> word / term in the search string (it parses the string into a  
> PhraseQuery
> with a slop of 0 which is correct). However when the search string  
> just
> contains a single word ie "state", the query parser parses this into a
> TermQuery despite the quotes when I would have expected a phrase  
> query.
> Is there any easy way around this?
>
> Many thanks,
> Hugh
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 12:23:52 2006
Return-Path: <java-user-return-21628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89841 invoked from network); 28 Jun 2006 12:23:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 12:23:51 -0000
Received: (qmail 36994 invoked by uid 500); 28 Jun 2006 12:23:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36971 invoked by uid 500); 28 Jun 2006 12:23:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36949 invoked by uid 99); 28 Jun 2006 12:23:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:23:44 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 72.14.214.203 as permitted sender)
Received: from [72.14.214.203] (HELO hu-out-0102.google.com) (72.14.214.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:23:42 -0700
Received: by hu-out-0102.google.com with SMTP id 28so1241169hub
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 05:23:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sq6LR37jps3KNk8AdDR1dgBjeOI4BZ3AI2TBlJ9YHA/djyn7Wxpe9DK9L5bRGqWWC/HakHZ0q4KqqUmf7L61uPPrMcBYUBPbcg4qEmdlTmtV0zNglCPl+sUBK0VjqGmlHnr/87f8nZk1kcolNgBCx8xhFeL6M/RhS8GeghSPuLM=
Received: by 10.35.78.13 with SMTP id f13mr97480pyl;
        Wed, 28 Jun 2006 05:23:21 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Wed, 28 Jun 2006 05:23:21 -0700 (PDT)
Message-ID: <a36516400606280523y604d7b49mc456c7dbc3872048@mail.gmail.com>
Date: Wed, 28 Jun 2006 17:53:21 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet
In-Reply-To: <64A04AB5-682B-47C7-A70B-E735A3C85D2C@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25272_17947815.1151497401087"
References: <200606271432.k5REWFAp009750@smtp-ft3.fr.colt.net>
	 <BAE7BAF7-1D3A-48E8-BE0E-0BC531B94E8E@ehatchersolutions.com>
	 <a36516400606280353q4610f994xd18d524198dbd15d@mail.gmail.com>
	 <64A04AB5-682B-47C7-A70B-E735A3C85D2C@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25272_17947815.1151497401087
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

o o no
I mean the searching would be fast or not... But now i have tested. The
result that i found reveals that there would be no difference in terms of
searching speed.
But there is another thing that i want to ask. What if the index is changed
in between.

Will the indexReader give the results with updated index ???
OR
Will the IndexSearcher give the results with updated index ???
OR
no matter what we are using we'll have to re-initialize either ??

Thanks and Regards,

On 6/28/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Jun 28, 2006, at 6:53 AM, heritrix.lucene wrote:
> > Is there any difference in terms of speed between IndexReader and
> > IndexSearcher??
>
> I'm assuming you mean is there any difference in speed in how you
> construct an IndexSearcher.... no.
>
>         Erik
>
>
> >
> >
> >
> > On 6/27/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >>
> >>
> >> On Jun 27, 2006, at 10:32 AM, Fabrice Robini wrote:
> >> > That's also my case...
> >> > I create a new IndexSearcher at each query, but with a static and
> >> > instanciated Directory.
> >> >
> >> > New IndexSearcher(myDirectory)
> >> >
> >> > It seems to be OK... am I wrong ?
> >>
> >> You may be "ok" given your query patterns, but you won't benefit from
> >> Lucene internal caching unless you use a single IndexSearcher (or
> >> IndexReader, as just pointed out).
> >>
> >>         Erik
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25272_17947815.1151497401087--

From java-user-return-21629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 12:24:09 2006
Return-Path: <java-user-return-21629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90015 invoked from network); 28 Jun 2006 12:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 12:24:08 -0000
Received: (qmail 39161 invoked by uid 500); 28 Jun 2006 12:24:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39035 invoked by uid 500); 28 Jun 2006 12:24:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39009 invoked by uid 99); 28 Jun 2006 12:23:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:23:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of thomas.kroehling@coremedia.com designates 217.79.216.190 as permitted sender)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:23:59 -0700
Received: from mail.coremedia.com (mail.coremedia.com [217.111.0.10])
	by rly31e.srv.mailcontrol.com (MailControl) with ESMTP id k5SCNbDV013567
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 13:23:37 +0100
Received: from mars.coremedia.com (smtp.coremedia.com [10.1.2.8])
	by mail.coremedia.com (Postfix) with ESMTP id 0389D58D920
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 14:23:36 +0200 (CEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69AAD.ADD6FC49"
Subject: MemoryUsage of sorting
Date: Wed, 28 Jun 2006 14:23:36 +0200
Message-ID: <F34C8A704C489B46B9E9FBDBD1B91D5F01665FAD@MARS.coremedia.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MemoryUsage of sorting
Thread-Index: Acaara3RdXqkXLvhR3SGXVE17fRF/A==
From: "Kroehling, Thomas" <thomas.kroehling@coremedia.com>
To: <java-user@lucene.apache.org>
X-Scanned-By: MailControl A-07-00-10 (www.mailcontrol.com) on 10.69.0.141
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69AAD.ADD6FC49
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
I have a question about using sorting in Lucene, because we experienced
some OutOfMemory errors. If I understand it correctly, each unique term
in a field is read into a cache, when I use Searcher.search(Query query,
Sort sort) with one SortField. So even if my query only finds 5
documents, Lucene would start to build a cache of maybe a few millionen
unique field entries, which would then be re-used for a further queries.
Is this correct? It would probably be best practice, to do sorting
yourself, if many unique terms are concerned for only a few search
results, especially since we have lots of index updates, which makes
reusing IndexSearcher a little lot harder.
=20
Thanks in advance,
Tom=20
=20

------_=_NextPart_001_01C69AAD.ADD6FC49--

From java-user-return-21630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 12:33:02 2006
Return-Path: <java-user-return-21630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93213 invoked from network); 28 Jun 2006 12:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 12:33:01 -0000
Received: (qmail 61497 invoked by uid 500); 28 Jun 2006 12:32:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61341 invoked by uid 500); 28 Jun 2006 12:32:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61330 invoked by uid 99); 28 Jun 2006 12:32:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:32:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:32:56 -0700
Received: from lettmelk [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A2E904F4; Wed, 28 Jun 2006 14:15:37 +0200
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher in Servlet
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <200606271432.k5REWFAp009750@smtp-ft3.fr.colt.net> <BAE7BAF7-1D3A-48E8-BE0E-0BC531B94E8E@ehatchersolutions.com> <a36516400606280353q4610f994xd18d524198dbd15d@mail.gmail.com> <64A04AB5-682B-47C7-A70B-E735A3C85D2C@ehatchersolutions.com> <a36516400606280523y604d7b49mc456c7dbc3872048@mail.gmail.com>
Content-Transfer-Encoding: 7bit
Date: Wed, 28 Jun 2006 14:32:26 +0200
Message-ID: <op.tbuvsck4oftp72@lettmelk>
In-Reply-To: <a36516400606280523y604d7b49mc456c7dbc3872048@mail.gmail.com>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-1, 27.06.2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: D72e9003d000008cd.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You have to re-init the searcher / reader object. You can re-init the  
reader object that the searcher uses, without re-initing the searcher  
object itself, as stated earlier here

On Wed, 28 Jun 2006 14:23:21 +0200, heritrix.lucene  
<heritrix.lucene@gmail.com> wrote:

> o o no
> I mean the searching would be fast or not... But now i have tested. The
> result that i found reveals that there would be no difference in terms of
> searching speed.
> But there is another thing that i want to ask. What if the index is  
> changed
> in between.
>
> Will the indexReader give the results with updated index ???
> OR
> Will the IndexSearcher give the results with updated index ???
> OR
> no matter what we are using we'll have to re-initialize either ??
>
> Thanks and Regards,
>
> On 6/28/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>>
>> On Jun 28, 2006, at 6:53 AM, heritrix.lucene wrote:
>> > Is there any difference in terms of speed between IndexReader and
>> > IndexSearcher??
>>
>> I'm assuming you mean is there any difference in speed in how you
>> construct an IndexSearcher.... no.
>>
>>         Erik
>>
>>
>> >
>> >
>> >
>> > On 6/27/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>> >>
>> >>
>> >> On Jun 27, 2006, at 10:32 AM, Fabrice Robini wrote:
>> >> > That's also my case...
>> >> > I create a new IndexSearcher at each query, but with a static and
>> >> > instanciated Directory.
>> >> >
>> >> > New IndexSearcher(myDirectory)
>> >> >
>> >> > It seems to be OK... am I wrong ?
>> >>
>> >> You may be "ok" given your query patterns, but you won't benefit from
>> >> Lucene internal caching unless you use a single IndexSearcher (or
>> >> IndexReader, as just pointed out).
>> >>
>> >>         Erik
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 12:34:04 2006
Return-Path: <java-user-return-21631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93612 invoked from network); 28 Jun 2006 12:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 12:34:04 -0000
Received: (qmail 66476 invoked by uid 500); 28 Jun 2006 12:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66452 invoked by uid 500); 28 Jun 2006 12:33:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66441 invoked by uid 99); 28 Jun 2006 12:33:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:33:56 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 72.14.214.196 as permitted sender)
Received: from [72.14.214.196] (HELO hu-out-0102.google.com) (72.14.214.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:33:55 -0700
Received: by hu-out-0102.google.com with SMTP id 28so1247925hub
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 05:33:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=py+8CIoDiP1lKOU9Q5+1VFdcboWBzHOZirG2iFWbU5evZXlAwcg1lRD81Xt2GFciFCUmLLswDYeXCJQl3mwPrert6ukq1yEOCueEMC1PqLpDt4dQsTjMaxyEFer3m4EunzkUZjAg+1EIvwjOpPljECjdmlzYwljkgpeknadA/2o=
Received: by 10.35.129.19 with SMTP id g19mr376300pyn;
        Wed, 28 Jun 2006 05:33:33 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Wed, 28 Jun 2006 05:33:33 -0700 (PDT)
Message-ID: <a36516400606280533h3374cd89qc43b031061c9f97f@mail.gmail.com>
Date: Wed, 28 Jun 2006 18:03:33 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: Searching is taking a lot...
In-Reply-To: <a36516400606270151k1e57b23cgbe6f4020ba18a5a4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25372_12603542.1151498013193"
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
	 <449FEBE4.6050502@syr.edu>
	 <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu>
	 <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
	 <44A0E27A.2000406@uni-hd.de>
	 <a36516400606270151k1e57b23cgbe6f4020ba18a5a4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25372_12603542.1151498013193
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I think i have posted this question in some other thread...
When the resultSet is very big, Searching is taking a lot of time.
For returning responce of a query that finds approx 14 M results, first time
it is taking approx 17Sec.
But next time for the same query it is taking almost 2 seconds.
I am using Hits for getiing the results searching the result using
Searcher.search().
Is there anyother way of improving its speed.

Thanks and regards,


On 6/27/06, heritrix. lucene <heritrix.lucene@gmail.com> wrote:
>
> No. I am not sorting the data...
>
>
>
>
> On 6/27/06, Martin Braun <mbraun@uni-hd.de> wrote:
> >
> > Hi chris,
> > > searching everytime using a new searcher was taking time. So For
> > testing, i
> > > made it a static one and reused the same. This gave me a lot of
> > > improvement.
> > > Previously my query was taking approx 25 sec. But now most of the
> > queries
> > > are taking time between the 100 and 800 ms.
> >
> > Do you use a kind of sorting? I had this issue with SortField.STRING, it
> > takes a lot of time and memory to build the sort cache of all terms in
> > the field (of type String). So if the searcher needs to rebuild this
> > with each query it takes a while...
> >
> > hth,
> > martin
> >
> > > Here also i noticed that the query is taking time only first time. If
> > you
> > > fire the same query again it takes very very less.
> > > Can anybody tell me the story behibd this.
> > >
> > > With Regards.........
> > >
> > > On 6/26/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > >>
> > >>
> > >> : Can you provide some information on your setup?  How are you
> > indexing
> > >> : and searching?  Do you have a lot of terms in your query,
> > etc?  Have
> > >> you
> > >> : done any profiling of your setup to determine where the bottlenecks
> > >> : are?   Are you sure they are in Lucene?
> > >>
> > >> what methods are you using for doing the search? (Hits, HitCollector,
> > >> TopDocs)  are you sorting?   are you opening a new IndexSearcher for
> > each
> > >> searcher?  what exactly are you timing (a single "search" method
> > call, an
> > >> iteration over every matching doc id? an iteration over every
> > matching
> > >> doc
> > >> to get a stored field?)
> > >>
> > >> :
> > >> : -Grant
> > >> :
> > >> : heritrix.lucene wrote:
> > >> : > Hi,
> > >> : > I have created an index of 47 Million documents.
> > >> : > I have 1.28GB RAM.
> > >> : > When i am doing a search over this index it is taking on average
> > 25
> > >> : > sec. Is
> > >> : > there a way so that i can get results in part of a second...
> > >> : > I hope there must be some ways..
> > >> : >
> > >> : > Thanks and regards..
> > >> : >
> > >> :
> > >> : --
> > >> :
> > >> : Grant Ingersoll
> > >> : Sr. Software Engineer
> > >> : Center for Natural Language Processing
> > >> : Syracuse University
> > >> : School of Information Studies
> > >> : 335 Hinds Hall
> > >> : Syracuse, NY 13244
> > >> :
> > >> : http://www.cnlp.org
> > >> : Voice:  315-443-5484
> > >> : Fax: 315-443-6886
> > >> :
> > >> :
> > >> :
> > ---------------------------------------------------------------------
> > >> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> : For additional commands, e-mail: java-user-help@lucene.apache.org
> > >> :
> > >>
> > >>
> > >>
> > >> -Hoss
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> >
> >
> > --
> > Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
> > Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_25372_12603542.1151498013193--

From java-user-return-21632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 12:52:43 2006
Return-Path: <java-user-return-21632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1338 invoked from network); 28 Jun 2006 12:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 12:52:43 -0000
Received: (qmail 1293 invoked by uid 500); 28 Jun 2006 12:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1270 invoked by uid 500); 28 Jun 2006 12:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1258 invoked by uid 99); 28 Jun 2006 12:52:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:52:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.28] (HELO godard.uk.mediasurface.com) (193.123.241.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 05:52:35 -0700
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by godard.uk.mediasurface.com (8.13.4+Sun/8.13.4) with ESMTP id k5SCq9fX011970
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 12:52:09 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Adding stem AND original term
Date: Wed, 28 Jun 2006 13:52:09 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DB8@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Adding stem AND original term
Thread-Index: AcaV++uOu1QQW9P1R2ixjCY5+zTfBQBAQmvgAOzY/FA=
From: "Robert Haycock" <Robert.Haycock@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Scanned-By: MIMEDefang 2.54 on 10.0.5.28
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I started using the EnglishStemmer and noticed that only the stem gets
added to the index.  I would like to be able to add both to give me a
stem search and an exact search capability.

My first attempt has been to write my own stemming filter.  The idea
being that the first pass would get the next token and return it then
the second pass would retrieve the same token and stem it.  I wasn't
sure if setPositionIncrement() was the right tool for the job as I don't
really know what it does!!  I was assuming setting it to 0 would cause
the token to come around again.  Problem I get with this is this
exception:

java.lang.NullPointerException
	at
org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
	at
org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
	at
org.apache.lucene.index.DocumentWriter.invertDocument(DocumentWriter.jav
a:185)
	at
org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:9
3)
	at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:450)
	at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)
	at
com.mediasurface.search.RobsTest$WriteThread.run(RobsTest.java:126)


If someone could let me know If I'm going off at a complete tangent.

Here's my edited next method.

public Token next()
{
  try
  {
    if (unStemmedToken =3D=3D null)
    {
      if ((unStemmedToken =3D in.next()) =3D=3D null)
      {
        return null;
      }
      unStemmedToken.setPositionIncrement(0);
      return unStemmedToken;
    }
    else
    {
      // Stem the text
      ...

      Token stemmedToken =3D new Token(stem, startOffset, endOffset);
      stemmedToken.setPositionIncrement(1);

      unStemmedToken =3D null;
      return stemmedToken;
    }
  }
  catch (Exception e)
  {
    e.printStackTrace();
    return null;
  }
}


Thanks,=20

Rob.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 13:37:29 2006
Return-Path: <java-user-return-21633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29312 invoked from network); 28 Jun 2006 13:37:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 13:37:29 -0000
Received: (qmail 11619 invoked by uid 500); 28 Jun 2006 13:37:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11596 invoked by uid 500); 28 Jun 2006 13:37:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 32682 invoked by uid 99); 28 Jun 2006 12:19:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Message-ID: <44A2739B.2000003@aduna-software.com>
Date: Wed, 28 Jun 2006 14:18:35 +0200
From: Christiaan Fluit <christiaan.fluit@aduna-software.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene indexing RDF
References: <20060627160043.909B8C0BB@mad.isoco.net>	 <44A1696B.5060103@wolfram.com> <e8aa138c0606280231h13b0ffebq274d3b3664c09421@mail.gmail.com>
In-Reply-To: <e8aa138c0606280231h13b0ffebq274d3b3664c09421@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

adasal wrote:
> As far as i have researched this I know that the gnowsis project uses both
> rdf and lucene, but I have not had time to determine their relationship.
> www.gnowsis.org/

I can tell you a bit about Gnowsis, as we (Aduna) are cooperating with 
the Gnowsis people on RDF creation, storage and querying in the Aperture 
project (aperture.sourceforge.net).

Both the latest Gnowsis beta version and various Aduna products use the 
Sesame framework (openrdf.org) to store and query RDF.

One of Sesame's core interfaces is the Sail (Storage And Inference 
Layer), which provides an abstraction on a specific type of RDF store, 
e.g. in-memory, file-based, RDBMS-based, ...

We have developed a Sail implementation that combines a file-based RDF 
storage with a Lucene index. The purpose of this Sail is to provide a 
means to query both document full-text and metadata using an RDF model.

The way we realized this is that document metadata is stored in the RDF 
store, the full-text and other text-like documents are indexed in 
Lucene, and the RDF model is extended with a virtual property connecting 
a Document resource to a query literal that can be used to query the 
full-text. The dedicated Sail knows that that property should not be 
looked up in the RDF store but should instead be evaluated as a Lucene 
query. If you want, I can send you example code that shows how we did this.

We have some ideas on generalizing this approach, as ideally you would 
like to be able to query all RDF literals using Lucene's query 
facilities while making use of the logical RDF structure (which is what 
you want, if I understand you correctly), even when the structure of the 
stored models is not known at development time. However, little work has 
been done on this. I guess that when we would start working on this, the 
code for it would end up in either the Sesame or Aperture code base.


Chris
--


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 13:44:59 2006
Return-Path: <java-user-return-21634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32144 invoked from network); 28 Jun 2006 13:44:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 13:44:59 -0000
Received: (qmail 26475 invoked by uid 500); 28 Jun 2006 13:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26444 invoked by uid 500); 28 Jun 2006 13:44:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26433 invoked by uid 99); 28 Jun 2006 13:44:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:44:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:44:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 10AC530EFCD4; Wed, 28 Jun 2006 09:44:29 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 964BE30EFCD3
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 09:44:27 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DB8@neptune.int.mediasurface.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DB8@neptune.int.mediasurface.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A12668B5-E06B-4A02-9BF4-554D417C2AF1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Adding stem AND original term
Date: Wed, 28 Jun 2006 09:44:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Returning null is reserved for the end of the tokens.   You'll need  
to implement some kind of buffering mechanism - check out the custom  
analyzers (like the SynonymAnalyzer) in the Lucene in Action code -  
http://www.lucenebook.com - for examples.

	Erik


On Jun 28, 2006, at 8:52 AM, Robert Haycock wrote:

> Hi,
>
> I started using the EnglishStemmer and noticed that only the stem gets
> added to the index.  I would like to be able to add both to give me a
> stem search and an exact search capability.
>
> My first attempt has been to write my own stemming filter.  The idea
> being that the first pass would get the next token and return it then
> the second pass would retrieve the same token and stem it.  I wasn't
> sure if setPositionIncrement() was the right tool for the job as I  
> don't
> really know what it does!!  I was assuming setting it to 0 would cause
> the token to come around again.  Problem I get with this is this
> exception:
>
> java.lang.NullPointerException
> 	at
> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
> 	at
> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
> 	at
> org.apache.lucene.index.DocumentWriter.invertDocument 
> (DocumentWriter.jav
> a:185)
> 	at
> org.apache.lucene.index.DocumentWriter.addDocument 
> (DocumentWriter.java:9
> 3)
> 	at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:450)
> 	at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)
> 	at
> com.mediasurface.search.RobsTest$WriteThread.run(RobsTest.java:126)
>
>
> If someone could let me know If I'm going off at a complete tangent.
>
> Here's my edited next method.
>
> public Token next()
> {
>   try
>   {
>     if (unStemmedToken == null)
>     {
>       if ((unStemmedToken = in.next()) == null)
>       {
>         return null;
>       }
>       unStemmedToken.setPositionIncrement(0);
>       return unStemmedToken;
>     }
>     else
>     {
>       // Stem the text
>       ...
>
>       Token stemmedToken = new Token(stem, startOffset, endOffset);
>       stemmedToken.setPositionIncrement(1);
>
>       unStemmedToken = null;
>       return stemmedToken;
>     }
>   }
>   catch (Exception e)
>   {
>     e.printStackTrace();
>     return null;
>   }
> }
>
>
> Thanks,
>
> Rob.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 13:48:57 2006
Return-Path: <java-user-return-21635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33237 invoked from network); 28 Jun 2006 13:48:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 13:48:57 -0000
Received: (qmail 35235 invoked by uid 500); 28 Jun 2006 13:48:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35119 invoked by uid 500); 28 Jun 2006 13:48:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35108 invoked by uid 99); 28 Jun 2006 13:48:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:48:49 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 72.14.214.205 as permitted sender)
Received: from [72.14.214.205] (HELO hu-out-0102.google.com) (72.14.214.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:48:48 -0700
Received: by hu-out-0102.google.com with SMTP id 28so1304143hub
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 06:48:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B9qQtpHVHMeU5C7T6gSfhsaiPzfx+Fj8jU0b+T4svYVFHfS24A1hj7xDhbMIt7MX4fQ8Bu1qzE0U+76l1JmRjC3T4X9msUO6iUXa37cnX8ilc37RdqNV5YWEyJPHtwB3oB671xQBYFKQErUWCfPHrMLySqNalG/p2FVL6hb5jSY=
Received: by 10.35.98.6 with SMTP id a6mr362047pym;
        Wed, 28 Jun 2006 06:48:26 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 28 Jun 2006 06:48:26 -0700 (PDT)
Message-ID: <359a92830606280648i73e876ffu40d59e5b65610e45@mail.gmail.com>
Date: Wed, 28 Jun 2006 09:48:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
In-Reply-To: <a36516400606280533h3374cd89qc43b031061c9f97f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17045_7487468.1151502506703"
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
	 <449FEBE4.6050502@syr.edu>
	 <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu>
	 <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
	 <44A0E27A.2000406@uni-hd.de>
	 <a36516400606270151k1e57b23cgbe6f4020ba18a5a4@mail.gmail.com>
	 <a36516400606280533h3374cd89qc43b031061c9f97f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17045_7487468.1151502506703
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I hope you're not using the Hits object to assemble all 14M results. A
recurring theme is that a Hits object should NOT be used for collection more
than a few (100 I think) objects since it re-executes the query every 100 or
so terms it returns. It's intent is to efficiently return the first few
hits.

Look at HitCollector of you want to examine lots of results.

Of course this doesn't apply if you are just using the Hits object to see
how many documents matched and NOT looping through all them.

Why does the second query take so little time? Two things suggest
themselves.
1> if your first query is the first query after opening the index, there's
significant overhead involved that you pay when opening the index, and the
second time you won't pay it.
2> If you're issuing the same query twice, there is probably some cache
involved.

It would probably be instructive to issue a second query that is NOT the
same as the first (using the same searcher) and see the response time. That
way you could gain some insight into whether the time differential is due to
opening the index.

Best
Erick

------=_Part_17045_7487468.1151502506703--

From java-user-return-21636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 13:51:56 2006
Return-Path: <java-user-return-21636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36025 invoked from network); 28 Jun 2006 13:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 13:51:55 -0000
Received: (qmail 46978 invoked by uid 500); 28 Jun 2006 13:51:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46916 invoked by uid 500); 28 Jun 2006 13:51:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46882 invoked by uid 99); 28 Jun 2006 13:51:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:51:46 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 72.14.214.192 as permitted sender)
Received: from [72.14.214.192] (HELO hu-out-0102.google.com) (72.14.214.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:51:46 -0700
Received: by hu-out-0102.google.com with SMTP id 28so1306645hub
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 06:51:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C8VVm1bI7OuLM3FLgP8qMigyRT25pkhA1SXqaC+sTrTBdR7CLOC279OvJ4kNYUpacdJAMcNq5qxEjlHccddxXUVLmLo+qV93Ie7R+yFRCTFRtGfJclpqSbf7YA7v1jbMqWgU+Dn9TNj3iV3wnKyRO9hc5qZQxJSTDipJx9bTdlA=
Received: by 10.35.85.1 with SMTP id n1mr373612pyl;
        Wed, 28 Jun 2006 06:51:24 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 28 Jun 2006 06:51:24 -0700 (PDT)
Message-ID: <359a92830606280651h125c954aq8b3eeed67edbe3f2@mail.gmail.com>
Date: Wed, 28 Jun 2006 09:51:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Adding stem AND original term
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DB8@neptune.int.mediasurface.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17117_9312853.1151502684382"
References: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DB8@neptune.int.mediasurface.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17117_9312853.1151502684382
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'll leave it to others to analyze the code, and ask something completely
different <G>...

In the Lucene in Action book, there is an example of indexing synonyms. The
idea is that they get indexed in the exact same position. So, would it be
easier if you indexed the stemmed and unstemmed terms in different fields
(or even indexes)? Then your query could do whatever you wanted...

Best
Erick

------=_Part_17117_9312853.1151502684382--

From java-user-return-21637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 13:54:09 2006
Return-Path: <java-user-return-21637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37199 invoked from network); 28 Jun 2006 13:54:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 13:54:09 -0000
Received: (qmail 56565 invoked by uid 500); 28 Jun 2006 13:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56532 invoked by uid 500); 28 Jun 2006 13:54:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56521 invoked by uid 99); 28 Jun 2006 13:54:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:54:01 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 72.14.214.199 as permitted sender)
Received: from [72.14.214.199] (HELO hu-out-0102.google.com) (72.14.214.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:54:00 -0700
Received: by hu-out-0102.google.com with SMTP id 28so1308607hub
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 06:53:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=HDjLWlpXNhfoI+mBkjZ/YqPkJ8YSpjNaAHBbbkWJzjr1ObSoPxGMrhSfp4nClqkx0KhGsU46pq4QVQg9ZfeMNzHNFrGiiiYJIQpmMLOyYROnHaUiUfpxrGO/otBHx6eO/kg+8rrGOHIU4T46iwl8aUWmyusuyHHjF450csI1Br4=
Received: by 10.78.160.2 with SMTP id i2mr332154hue;
        Wed, 28 Jun 2006 06:53:39 -0700 (PDT)
Received: by 10.78.68.9 with HTTP; Wed, 28 Jun 2006 06:53:38 -0700 (PDT)
Message-ID: <27bc81750606280653y38904bb8m5a0960ded184a910@mail.gmail.com>
Date: Wed, 28 Jun 2006 10:53:38 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org
Subject: Removing document from index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_593_11401756.1151502818928"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_593_11401756.1151502818928
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all. I can remove a documents from the index using IndexReader.delete
(Term) but the search still returns this document.
What am I doing wrong?

-- 
Leandro Rodrigo Saad Cruz
CTO - InterBusiness Technologies
db.apache.org/ojb
guara-framework.sf.net
xingu.sf.net

------=_Part_593_11401756.1151502818928--

From java-user-return-21638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 13:58:56 2006
Return-Path: <java-user-return-21638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39134 invoked from network); 28 Jun 2006 13:58:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 13:58:56 -0000
Received: (qmail 76239 invoked by uid 500); 28 Jun 2006 13:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76208 invoked by uid 500); 28 Jun 2006 13:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76197 invoked by uid 99); 28 Jun 2006 13:58:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:58:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 06:58:47 -0700
Received: from lettmelk [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A70808BC; Wed, 28 Jun 2006 15:41:28 +0200
Date: Wed, 28 Jun 2006 15:58:17 +0200
To: java-user@lucene.apache.org
Subject: Re: Removing document from index
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <27bc81750606280653y38904bb8m5a0960ded184a910@mail.gmail.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tbuzrfmfoftp72@lettmelk>
In-Reply-To: <27bc81750606280653y38904bb8m5a0960ded184a910@mail.gmail.com>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-2, 28.06.2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: D8708009300001094.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My bet is that after updating /appending to an index, the searcher object  
used also need to be updated, so that it will work agains the new snapshot  
of the index.

See http://wiki.apache.org/jakarta-lucene/UpdatingAnIndex

1. keep a single open IndexReader used by all searches

2. Every few minutes, process updates as follows:

   a. open a second IndexReader

   b. delete all documents that will be updated

   c. close this IndexReader, to flush deletions

   d. open an IndexWriter

   e. add all documents that are updated

   f. close the IndexWriter

   g. replace the IndexReader used for searches (1, above)



'
On Wed, 28 Jun 2006 15:53:38 +0200, Leandro Saad <leandro.saad@gmail.com>  
wrote:

> Hi all. I can remove a documents from the index using IndexReader.delete
> (Term) but the search still returns this document.
> What am I doing wrong?
>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 14:04:56 2006
Return-Path: <java-user-return-21639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42395 invoked from network); 28 Jun 2006 14:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:04:55 -0000
Received: (qmail 91945 invoked by uid 500); 28 Jun 2006 14:04:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91916 invoked by uid 500); 28 Jun 2006 14:04:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91904 invoked by uid 99); 28 Jun 2006 14:04:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:04:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.28] (HELO godard.uk.mediasurface.com) (193.123.241.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:04:47 -0700
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by godard.uk.mediasurface.com (8.13.4+Sun/8.13.4) with ESMTP id k5SE4HOj021530
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 14:04:17 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Adding stem AND original term
Date: Wed, 28 Jun 2006 15:04:17 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DEB@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Adding stem AND original term
Thread-Index: AcaauQ8OHX2lxxptQz+F0u6eh1xfFQAAi8RQ
From: "Robert Haycock" <Robert.Haycock@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Scanned-By: MIMEDefang 2.54 on 10.0.5.28
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

Isn't buffering what I'm doing?  The first time next() is called it
reads the next token from the stream into 'unStemmedToken'.  The next
call uses the same token, and nulls it after use.  Third call will get
the next one from the stream and so on.  I effectively have a 'one token
buffer' which gets filled then emptied each call to next().

Rob.

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 28 June 2006 14:44
To: java-user@lucene.apache.org
Subject: Re: Adding stem AND original term

Returning null is reserved for the end of the tokens.   You'll need =20
to implement some kind of buffering mechanism - check out the custom =20
analyzers (like the SynonymAnalyzer) in the Lucene in Action code - =20
http://www.lucenebook.com - for examples.

	Erik


On Jun 28, 2006, at 8:52 AM, Robert Haycock wrote:

> Hi,
>
> I started using the EnglishStemmer and noticed that only the stem gets
> added to the index.  I would like to be able to add both to give me a
> stem search and an exact search capability.
>
> My first attempt has been to write my own stemming filter.  The idea
> being that the first pass would get the next token and return it then
> the second pass would retrieve the same token and stem it.  I wasn't
> sure if setPositionIncrement() was the right tool for the job as I =20
> don't
> really know what it does!!  I was assuming setting it to 0 would cause
> the token to come around again.  Problem I get with this is this
> exception:
>
> java.lang.NullPointerException
> 	at
> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
> 	at
> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
> 	at
> org.apache.lucene.index.DocumentWriter.invertDocument=20
> (DocumentWriter.jav
> a:185)
> 	at
> org.apache.lucene.index.DocumentWriter.addDocument=20
> (DocumentWriter.java:9
> 3)
> 	at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:450)
> 	at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)
> 	at
> com.mediasurface.search.RobsTest$WriteThread.run(RobsTest.java:126)
>
>
> If someone could let me know If I'm going off at a complete tangent.
>
> Here's my edited next method.
>
> public Token next()
> {
>   try
>   {
>     if (unStemmedToken =3D=3D null)
>     {
>       if ((unStemmedToken =3D in.next()) =3D=3D null)
>       {
>         return null;
>       }
>       unStemmedToken.setPositionIncrement(0);
>       return unStemmedToken;
>     }
>     else
>     {
>       // Stem the text
>       ...
>
>       Token stemmedToken =3D new Token(stem, startOffset, endOffset);
>       stemmedToken.setPositionIncrement(1);
>
>       unStemmedToken =3D null;
>       return stemmedToken;
>     }
>   }
>   catch (Exception e)
>   {
>     e.printStackTrace();
>     return null;
>   }
> }
>
>
> Thanks,
>
> Rob.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 14:10:30 2006
Return-Path: <java-user-return-21640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45535 invoked from network); 28 Jun 2006 14:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:10:30 -0000
Received: (qmail 4487 invoked by uid 500); 28 Jun 2006 14:10:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4153 invoked by uid 500); 28 Jun 2006 14:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4142 invoked by uid 99); 28 Jun 2006 14:10:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:10:23 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 72.14.214.204 as permitted sender)
Received: from [72.14.214.204] (HELO hu-out-0102.google.com) (72.14.214.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:10:22 -0700
Received: by hu-out-0102.google.com with SMTP id 28so1322691hub
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 07:10:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T++6i7TNRWfTq9UzUE+GnNVhft3y5xFcPqpoA1roq8IZV56FHHVNp9WXT7en11Mnh3zwBCxvV4+ZNrx8ENa9sQk1N1pWon6KBH7bsY8SIJwo8b1tEWRxed3GVPGdyDBT9wZXWG76nStVKg+fv0wTNSZo8pL52HLYRFvtsDYTNI0=
Received: by 10.35.91.15 with SMTP id t15mr107061pyl;
        Wed, 28 Jun 2006 06:40:56 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 28 Jun 2006 06:40:56 -0700 (PDT)
Message-ID: <359a92830606280640j43ef0309u40f1f48ae313accc@mail.gmail.com>
Date: Wed, 28 Jun 2006 09:40:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Flushing RAMDir into FSDir
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C01EE86FE@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16801_10391144.1151502056708"
References: <8834A84C87A2C148AD46921BB8BFC97C01EE86FE@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_16801_10391144.1151502056708
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Kind of a tangential response, but there was a discussion a while back about
RAMdir .vs. FSDir that you probably want to search for and look over. As I
remember (and I only glanced at it) the statement was made that the FSDir
*is* a RAMdir, at least for a while. This implies that there es little to be
gained by what you are doing. Here's a quote from Yonik

"For indexing, even if you open IndexWriter with a FSDirectory, it
internally uses RAMDirectory to buffer until it reaches
maxBufferedDocs."

See the thread IndexWriter.addIndexes & optimization

Of course I don't fully understand your problem space, so your judgement has
to control. But do you have any metrics indicating that what you are doing
actually helps?

Best
Erick

------=_Part_16801_10391144.1151502056708--

From java-user-return-21641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 14:32:40 2006
Return-Path: <java-user-return-21641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66201 invoked from network); 28 Jun 2006 14:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:32:40 -0000
Received: (qmail 65497 invoked by uid 500); 28 Jun 2006 14:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65469 invoked by uid 500); 28 Jun 2006 14:32:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65458 invoked by uid 99); 28 Jun 2006 14:32:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:32:32 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:32:31 -0700
Received: (qmail 8083 invoked by uid 509); 28 Jun 2006 16:32:08 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.068265 secs); 28 Jun 2006 14:32:08 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.068265 secs Process 8077)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 28 Jun 2006 16:32:07 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Flushing RAMDir into FSDir
Date: Wed, 28 Jun 2006 16:32:07 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C01F1C15E@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Flushing RAMDir into FSDir
Thread-Index: AcaavKT10dZr8hwgRV+jx0v39uBxMQAApfyQ
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm aware of that the FSDirectory actually stores documents in a RAMDir =
until merge time. But the thing is that I also want to store the =
documents in the RAMDir as snapshots on the harddrive until they have =
been flushed down to the FSDir. So I won't loose any documents in a =
crash.

Does anybody have any proper solution for this?

Maybe it's better to refactor the Lucene code so it fires an event when =
the merge occurs?

/
Marcus



-----Ursprungligt meddelande-----
Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]=20
Skickat: den 28 juni 2006 15:41
Till: java-user@lucene.apache.org
=C4mne: Re: Flushing RAMDir into FSDir

Kind of a tangential response, but there was a discussion a while back =
about
RAMdir .vs. FSDir that you probably want to search for and look over. As =
I
remember (and I only glanced at it) the statement was made that the =
FSDir
*is* a RAMdir, at least for a while. This implies that there es little =
to be
gained by what you are doing. Here's a quote from Yonik

"For indexing, even if you open IndexWriter with a FSDirectory, it
internally uses RAMDirectory to buffer until it reaches
maxBufferedDocs."

See the thread IndexWriter.addIndexes & optimization

Of course I don't fully understand your problem space, so your judgement =
has
to control. But do you have any metrics indicating that what you are =
doing
actually helps?

Best
Erick



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 14:32:48 2006
Return-Path: <java-user-return-21642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66271 invoked from network); 28 Jun 2006 14:32:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:32:47 -0000
Received: (qmail 65963 invoked by uid 500); 28 Jun 2006 14:32:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65909 invoked by uid 500); 28 Jun 2006 14:32:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65880 invoked by uid 99); 28 Jun 2006 14:32:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:32:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.28] (HELO godard.uk.mediasurface.com) (193.123.241.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:32:31 -0700
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by godard.uk.mediasurface.com (8.13.4+Sun/8.13.4) with ESMTP id k5SEViTN025345
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 14:32:04 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Adding stem AND original term
Date: Wed, 28 Jun 2006 15:31:58 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A017D4E0A@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Adding stem AND original term
Thread-Index: AcaauQ8OHX2lxxptQz+F0u6eh1xfFQAAi8RQAAELj0A=
From: "Robert Haycock" <Robert.Haycock@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Scanned-By: MIMEDefang 2.54 on 10.0.5.28
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stupid me.  It was working fine.  I hadn't called super(in) so the call
to stream.close() in DocumentWriter was obviously failing!!!

Rob.

-----Original Message-----
From: Robert Haycock [mailto:Robert.Haycock@mediasurface.com]=20
Sent: 28 June 2006 15:04
To: java-user@lucene.apache.org
Subject: RE: Adding stem AND original term

Hi Erik,

Isn't buffering what I'm doing?  The first time next() is called it
reads the next token from the stream into 'unStemmedToken'.  The next
call uses the same token, and nulls it after use.  Third call will get
the next one from the stream and so on.  I effectively have a 'one token
buffer' which gets filled then emptied each call to next().

Rob.

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 28 June 2006 14:44
To: java-user@lucene.apache.org
Subject: Re: Adding stem AND original term

Returning null is reserved for the end of the tokens.   You'll need =20
to implement some kind of buffering mechanism - check out the custom =20
analyzers (like the SynonymAnalyzer) in the Lucene in Action code - =20
http://www.lucenebook.com - for examples.

	Erik


On Jun 28, 2006, at 8:52 AM, Robert Haycock wrote:

> Hi,
>
> I started using the EnglishStemmer and noticed that only the stem gets
> added to the index.  I would like to be able to add both to give me a
> stem search and an exact search capability.
>
> My first attempt has been to write my own stemming filter.  The idea
> being that the first pass would get the next token and return it then
> the second pass would retrieve the same token and stem it.  I wasn't
> sure if setPositionIncrement() was the right tool for the job as I =20
> don't
> really know what it does!!  I was assuming setting it to 0 would cause
> the token to come around again.  Problem I get with this is this
> exception:
>
> java.lang.NullPointerException
> 	at
> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
> 	at
> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
> 	at
> org.apache.lucene.index.DocumentWriter.invertDocument=20
> (DocumentWriter.jav
> a:185)
> 	at
> org.apache.lucene.index.DocumentWriter.addDocument=20
> (DocumentWriter.java:9
> 3)
> 	at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:450)
> 	at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)
> 	at
> com.mediasurface.search.RobsTest$WriteThread.run(RobsTest.java:126)
>
>
> If someone could let me know If I'm going off at a complete tangent.
>
> Here's my edited next method.
>
> public Token next()
> {
>   try
>   {
>     if (unStemmedToken =3D=3D null)
>     {
>       if ((unStemmedToken =3D in.next()) =3D=3D null)
>       {
>         return null;
>       }
>       unStemmedToken.setPositionIncrement(0);
>       return unStemmedToken;
>     }
>     else
>     {
>       // Stem the text
>       ...
>
>       Token stemmedToken =3D new Token(stem, startOffset, endOffset);
>       stemmedToken.setPositionIncrement(1);
>
>       unStemmedToken =3D null;
>       return stemmedToken;
>     }
>   }
>   catch (Exception e)
>   {
>     e.printStackTrace();
>     return null;
>   }
> }
>
>
> Thanks,
>
> Rob.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 14:50:07 2006
Return-Path: <java-user-return-21643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75624 invoked from network); 28 Jun 2006 14:50:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 14:50:07 -0000
Received: (qmail 13283 invoked by uid 500); 28 Jun 2006 14:50:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13251 invoked by uid 500); 28 Jun 2006 14:49:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13240 invoked by uid 99); 28 Jun 2006 14:49:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 07:49:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: unknown (asf.osuosl.org: error in processing during lookup of knearb@pf-cvl.net)
Received: from [12.167.225.6] (HELO liam.pf-cvl.net) (12.167.225.6)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Jun 2006 07:49:57 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by liam.pf-cvl.net (Postfix) with ESMTP id 68D098246B7
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 10:41:10 -0400 (EDT)
X-Virus-Scanned: amavisd-new at pf-cvl.net
Received: from liam.pf-cvl.net ([127.0.0.1])
	by localhost (liam.pf-cvl.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Vymz0dPAm4MA for <java-user@lucene.apache.org>;
	Wed, 28 Jun 2006 10:41:10 -0400 (EDT)
Received: from [192.168.1.170] (dialup103.itgs-presearch.com [12.167.225.103])
	by liam.pf-cvl.net (Postfix) with ESMTP id 4F8978246A6
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 10:41:10 -0400 (EDT)
Message-ID: <44A296FF.5060000@pf-cvl.net>
Date: Wed, 28 Jun 2006 10:49:35 -0400
From: Ben Knear <knearb@pf-cvl.net>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flushing RAMDir into FSDir
References: <8834A84C87A2C148AD46921BB8BFC97C01EE86FE@S1SE1MAIL.emea1.ad.group> <359a92830606280640j43ef0309u40f1f48ae313accc@mail.gmail.com>
In-Reply-To: <359a92830606280640j43ef0309u40f1f48ae313accc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick Erickson wrote:
> Kind of a tangential response, but there was a discussion a while back 
> about
> RAMdir .vs. FSDir that you probably want to search for and look over. 
> As I
> remember (and I only glanced at it) the statement was made that the FSDir
> *is* a RAMdir, at least for a while. This implies that there es little 
> to be
> gained by what you are doing. Here's a quote from Yonik
>
> "For indexing, even if you open IndexWriter with a FSDirectory, it
> internally uses RAMDirectory to buffer until it reaches
> maxBufferedDocs."
>
> See the thread IndexWriter.addIndexes & optimization
>
> Of course I don't fully understand your problem space, so your 
> judgement has
> to control. But do you have any metrics indicating that what you are 
> doing
> actually helps?
>
> Best
> Erick
>
Perhaps you could lower the maxBufferedDocs to a more suitable number. 
This would probably lower the speed of the indexing, but minimize damage 
in case of a crash.

Ben Knear

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 15:01:52 2006
Return-Path: <java-user-return-21644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80524 invoked from network); 28 Jun 2006 15:01:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 15:01:51 -0000
Received: (qmail 69406 invoked by uid 500); 28 Jun 2006 15:01:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69380 invoked by uid 500); 28 Jun 2006 15:01:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69334 invoked by uid 99); 28 Jun 2006 15:01:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 08:01:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 08:01:42 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id ACAB130EFCD4; Wed, 28 Jun 2006 11:01:21 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.27.72.174] (unknown [128.143.245.64])
	by ehatchersolutions.com (Postfix) with ESMTP id 9C0D730EFCD3
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 11:01:20 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DEB@neptune.int.mediasurface.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DEB@neptune.int.mediasurface.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F258B9C9-6141-44D4-A301-6DE369857BB8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Adding stem AND original term
Date: Wed, 28 Jun 2006 11:01:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah yes, sorry my bad.   I only quickly glanced at the code.

	Erik


On Jun 28, 2006, at 10:04 AM, Robert Haycock wrote:

> Hi Erik,
>
> Isn't buffering what I'm doing?  The first time next() is called it
> reads the next token from the stream into 'unStemmedToken'.  The next
> call uses the same token, and nulls it after use.  Third call will get
> the next one from the stream and so on.  I effectively have a 'one  
> token
> buffer' which gets filled then emptied each call to next().
>
> Rob.
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 28 June 2006 14:44
> To: java-user@lucene.apache.org
> Subject: Re: Adding stem AND original term
>
> Returning null is reserved for the end of the tokens.   You'll need
> to implement some kind of buffering mechanism - check out the custom
> analyzers (like the SynonymAnalyzer) in the Lucene in Action code -
> http://www.lucenebook.com - for examples.
>
> 	Erik
>
>
> On Jun 28, 2006, at 8:52 AM, Robert Haycock wrote:
>
>> Hi,
>>
>> I started using the EnglishStemmer and noticed that only the stem  
>> gets
>> added to the index.  I would like to be able to add both to give me a
>> stem search and an exact search capability.
>>
>> My first attempt has been to write my own stemming filter.  The idea
>> being that the first pass would get the next token and return it then
>> the second pass would retrieve the same token and stem it.  I wasn't
>> sure if setPositionIncrement() was the right tool for the job as I
>> don't
>> really know what it does!!  I was assuming setting it to 0 would  
>> cause
>> the token to come around again.  Problem I get with this is this
>> exception:
>>
>> java.lang.NullPointerException
>> 	at
>> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
>> 	at
>> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
>> 	at
>> org.apache.lucene.index.DocumentWriter.invertDocument
>> (DocumentWriter.jav
>> a:185)
>> 	at
>> org.apache.lucene.index.DocumentWriter.addDocument
>> (DocumentWriter.java:9
>> 3)
>> 	at
>> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:450)
>> 	at
>> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)
>> 	at
>> com.mediasurface.search.RobsTest$WriteThread.run(RobsTest.java:126)
>>
>>
>> If someone could let me know If I'm going off at a complete tangent.
>>
>> Here's my edited next method.
>>
>> public Token next()
>> {
>>   try
>>   {
>>     if (unStemmedToken == null)
>>     {
>>       if ((unStemmedToken = in.next()) == null)
>>       {
>>         return null;
>>       }
>>       unStemmedToken.setPositionIncrement(0);
>>       return unStemmedToken;
>>     }
>>     else
>>     {
>>       // Stem the text
>>       ...
>>
>>       Token stemmedToken = new Token(stem, startOffset, endOffset);
>>       stemmedToken.setPositionIncrement(1);
>>
>>       unStemmedToken = null;
>>       return stemmedToken;
>>     }
>>   }
>>   catch (Exception e)
>>   {
>>     e.printStackTrace();
>>     return null;
>>   }
>> }
>>
>>
>> Thanks,
>>
>> Rob.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 17:26:23 2006
Return-Path: <java-user-return-21645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50875 invoked from network); 28 Jun 2006 17:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 17:26:23 -0000
Received: (qmail 56913 invoked by uid 500); 28 Jun 2006 17:26:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56360 invoked by uid 500); 28 Jun 2006 17:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56349 invoked by uid 99); 28 Jun 2006 17:26:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:26:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:26:15 -0700
Received: from (10.64.1.106) by webshield.cihi.ca via smtp
	 id 6a3b_ca79a094_06cb_11db_9464_003048245df9;
	Wed, 28 Jun 2006 13:30:28 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69AD7.AA963E4E"
Subject: What is a good book on Lucene?
Date: Wed, 28 Jun 2006 13:24:09 -0400
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F065F2E2B@tormail01.cihi.ca>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What is a good book on Lucene?
Thread-Index: Acaa16pZ7AHp9yvOQZiuf7tJhHNqdg==
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69AD7.AA963E4E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I wonder what is the best book, that can be recommended as an
introduction as well as 'in-depth' coverage of the latest version of
Lucene? There are a few in the Internet, but I was wondering which has
the most comprehensive coverage of all features, etc.

Thanks!

Vlad

------_=_NextPart_001_01C69AD7.AA963E4E--

From java-user-return-21646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 17:33:12 2006
Return-Path: <java-user-return-21646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52607 invoked from network); 28 Jun 2006 17:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 17:33:12 -0000
Received: (qmail 67717 invoked by uid 500); 28 Jun 2006 17:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67227 invoked by uid 500); 28 Jun 2006 17:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67216 invoked by uid 99); 28 Jun 2006 17:33:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:33:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:33:04 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.154F53C9@mailer.syr.edu>; Wed, 28 Jun 2006 13:32:43 -0400
Message-ID: <44A2BD3B.1090506@syr.edu>
Date: Wed, 28 Jun 2006 13:32:43 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: What is a good book on Lucene?
References: <373399D6389D8C42B4EAD9BE2B6B5C5F065F2E2B@tormail01.cihi.ca>
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F065F2E2B@tormail01.cihi.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene In Action is well done.  It doesn't cover all the latest features 
per se (as in 2.0 version), but hits on most of them.  Haven't read the 
others.  There are also a lot of free resources available that you could 
use to piecemeal together.  Check the wiki.for these

Vladimir Olenin wrote:
> I wonder what is the best book, that can be recommended as an
> introduction as well as 'in-depth' coverage of the latest version of
> Lucene? There are a few in the Internet, but I was wondering which has
> the most comprehensive coverage of all features, etc.
>
> Thanks!
>
> Vlad
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 17:58:43 2006
Return-Path: <java-user-return-21647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64189 invoked from network); 28 Jun 2006 17:58:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 17:58:42 -0000
Received: (qmail 22987 invoked by uid 500); 28 Jun 2006 17:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22945 invoked by uid 500); 28 Jun 2006 17:58:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22934 invoked by uid 99); 28 Jun 2006 17:58:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 10:58:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: unknown (asf.osuosl.org: error in processing during lookup of knearb@pf-cvl.net)
Received: from [12.167.225.6] (HELO liam.pf-cvl.net) (12.167.225.6)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Jun 2006 10:58:35 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by liam.pf-cvl.net (Postfix) with ESMTP id 497648246B6
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 13:49:46 -0400 (EDT)
X-Virus-Scanned: amavisd-new at pf-cvl.net
Received: from liam.pf-cvl.net ([127.0.0.1])
	by localhost (liam.pf-cvl.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LiOk3qWAV13l for <java-user@lucene.apache.org>;
	Wed, 28 Jun 2006 13:49:46 -0400 (EDT)
Received: from [192.168.1.170] (dialup103.itgs-presearch.com [12.167.225.103])
	by liam.pf-cvl.net (Postfix) with ESMTP id 33D138246A6
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 13:49:46 -0400 (EDT)
Message-ID: <44A2C335.7020709@pf-cvl.net>
Date: Wed, 28 Jun 2006 13:58:13 -0400
From: Ben Knear <knearb@pf-cvl.net>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: What is a good book on Lucene?
References: <373399D6389D8C42B4EAD9BE2B6B5C5F065F2E2B@tormail01.cihi.ca> <44A2BD3B.1090506@syr.edu>
In-Reply-To: <44A2BD3B.1090506@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Grant Ingersoll wrote:
> Lucene In Action is well done.  It doesn't cover all the latest 
> features per se (as in 2.0 version), but hits on most of them.  
> Haven't read the others.  There are also a lot of free resources 
> available that you could use to piecemeal together.  Check the 
> wiki.for these
>
> Vladimir Olenin wrote:
>> I wonder what is the best book, that can be recommended as an
>> introduction as well as 'in-depth' coverage of the latest version of
>> Lucene? There are a few in the Internet, but I was wondering which has
>> the most comprehensive coverage of all features, etc.
>>
>> Thanks!
>>
>> Vlad
>>
>>   
>
Lucene in Action was very helpful for this beginner!

Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 18:30:47 2006
Return-Path: <java-user-return-21648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73796 invoked from network); 28 Jun 2006 18:30:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 18:30:47 -0000
Received: (qmail 87347 invoked by uid 500); 28 Jun 2006 18:30:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87321 invoked by uid 500); 28 Jun 2006 18:30:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87310 invoked by uid 99); 28 Jun 2006 18:30:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 11:30:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 11:30:39 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 112FB5B778; Wed, 28 Jun 2006 11:30:09 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0BF2C7F403
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 11:30:09 -0700 (PDT)
Date: Wed, 28 Jun 2006 11:30:09 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Exact match on a single term / word
In-Reply-To: <E1FvYLE-0001hl-Au@mercury.propylon.com>
Message-ID: <Pine.LNX.4.58.0606281123520.11582@hal.rescomp.berkeley.edu>
References: <E1FvYLE-0001hl-Au@mercury.propylon.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I am trying to get Lucene to perform an exact match on a single term or word
: using the default query parser. It works fine whenever I have more than one
: word / term in the search string (it parses the string into a PhraseQuery
: with a slop of 0 which is correct). However when the search string just
: contains a single word ie "state", the query parser parses this into a
: TermQuery despite the quotes when I would have expected a phrase query.
: Is there any easy way around this?

the quotes tell the query parser to send the entire contents of the string
to the analyzer -- even if it has spaces (which query parser would
normally split on) and if your analyzer returns one token query parser
makes a TermQuery and if it returns more then one toke query parser makes
a PhraseQuery.

the real question is: why do you feel TermQuery is the wrong thing to use
in this case? ... if you're searching for a single Term, it's what makes
the most sense.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 18:34:01 2006
Return-Path: <java-user-return-21649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74874 invoked from network); 28 Jun 2006 18:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 18:34:01 -0000
Received: (qmail 97598 invoked by uid 500); 28 Jun 2006 18:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97576 invoked by uid 500); 28 Jun 2006 18:33:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97565 invoked by uid 99); 28 Jun 2006 18:33:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 11:33:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.61.29.3] (HELO hydra.dcs.bbk.ac.uk) (193.61.29.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 11:33:53 -0700
Received: from pczz (pc-zz.dcs.bbk.ac.uk [193.61.44.18] (may be forged))
	by hydra.dcs.bbk.ac.uk (8.13.6+Sun/8.13.6) with ESMTP id k5SIXK73018001
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 19:33:20 +0100 (BST)
From: "zheng" <zheng@dcs.bbk.ac.uk>
To: <java-user@lucene.apache.org>
Subject: batch indexing using RAMDirectory
Date: Wed, 28 Jun 2006 19:33:12 +0100
Message-ID: <002801c69ae1$5174dc50$122c3dc1@dcs.bbk.ac.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0029_01C69AE9.B3394450"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Acaa4T8tdaes7nOAS065PWKtMAbZ/g==
X-Scanned-By: MIMEDefang 2.56
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0029_01C69AE9.B3394450
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I am a novice in lucene. I write some code to do batch indexing using
RAMDirectory according to the code provided in lucene in action, which is
something like FSDirectory fsDir = FSDirectory.getDirectory("/tmp/index",

true);

RAMDirectory ramDir = new RAMDirectory();

IndexWriter fsWriter = IndexWriter(fsDir,

new SimpleAnalyzer(), true);

IndexWriter ramWriter = new IndexWriter(ramDir,

new SimpleAnalyzer(), true);

while (there are documents to index) {

... create Document ...

ramWriter.addDocument(doc);

if (condition for flushing memory to disk has been met) {

fsWriter.addIndexes(Directory[] {ramDir});

ramWriter.close();

ramWriter = new IndexWriter(ramDir, new SimpleAnalyzer(),

true);

}

}

But it cannot compile correctly on fsWriter.addIndexes(Directory[]
{ramDir}); It seems some problem with ramDir. Is there something changed at
lucene 2.0? How can I implement batch indexing correctly? Any simple code. 

Thanks!

 

Eric

 

 


------=_NextPart_000_0029_01C69AE9.B3394450--


From java-user-return-21650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 18:34:31 2006
Return-Path: <java-user-return-21650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75302 invoked from network); 28 Jun 2006 18:34:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 18:34:31 -0000
Received: (qmail 1100 invoked by uid 500); 28 Jun 2006 18:34:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1068 invoked by uid 500); 28 Jun 2006 18:34:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1056 invoked by uid 99); 28 Jun 2006 18:34:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 11:34:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jpump@healthline.com designates 64.142.35.101 as permitted sender)
Received: from [64.142.35.101] (HELO mail.healthline.com) (64.142.35.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 11:34:23 -0700
Received: from [10.1.1.99] ([64.142.35.98]) by mail.healthline.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 28 Jun 2006 11:33:41 -0700
Message-ID: <44A2CB9A.7010803@healthline.com>
Date: Wed, 28 Jun 2006 11:34:02 -0700
From: Jason Pump <jason@healthline.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Adding stem AND original term
References: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DB8@neptune.int.mediasurface.com>
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A017D4DB8@neptune.int.mediasurface.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Jun 2006 18:33:41.0875 (UTC) FILETIME=[6161B430:01C69AE1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would think what you want to do is index on the stem, and rank on the 
stem and the original form. After all, if you match exactly, then you 
better match for the stem.

Robert Haycock wrote:
> Hi,
>
> I started using the EnglishStemmer and noticed that only the stem gets
> added to the index.  I would like to be able to add both to give me a
> stem search and an exact search capability.
>
> My first attempt has been to write my own stemming filter.  The idea
> being that the first pass would get the next token and return it then
> the second pass would retrieve the same token and stem it.  I wasn't
> sure if setPositionIncrement() was the right tool for the job as I don't
> really know what it does!!  I was assuming setting it to 0 would cause
> the token to come around again.  Problem I get with this is this
> exception:
>
> java.lang.NullPointerException
> 	at
> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
> 	at
> org.apache.lucene.analysis.TokenFilter.close(TokenFilter.java:41)
> 	at
> org.apache.lucene.index.DocumentWriter.invertDocument(DocumentWriter.jav
> a:185)
> 	at
> org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:9
> 3)
> 	at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:450)
> 	at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)
> 	at
> com.mediasurface.search.RobsTest$WriteThread.run(RobsTest.java:126)
>
>
> If someone could let me know If I'm going off at a complete tangent.
>
> Here's my edited next method.
>
> public Token next()
> {
>   try
>   {
>     if (unStemmedToken == null)
>     {
>       if ((unStemmedToken = in.next()) == null)
>       {
>         return null;
>       }
>       unStemmedToken.setPositionIncrement(0);
>       return unStemmedToken;
>     }
>     else
>     {
>       // Stem the text
>       ...
>
>       Token stemmedToken = new Token(stem, startOffset, endOffset);
>       stemmedToken.setPositionIncrement(1);
>
>       unStemmedToken = null;
>       return stemmedToken;
>     }
>   }
>   catch (Exception e)
>   {
>     e.printStackTrace();
>     return null;
>   }
> }
>
>
> Thanks, 
>
> Rob.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 19:40:39 2006
Return-Path: <java-user-return-21651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3990 invoked from network); 28 Jun 2006 19:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:40:38 -0000
Received: (qmail 42817 invoked by uid 500); 28 Jun 2006 19:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42787 invoked by uid 500); 28 Jun 2006 19:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42776 invoked by uid 99); 28 Jun 2006 19:40:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:40:31 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:40:30 -0700
Received: by py-out-1112.google.com with SMTP id m51so2232815pye
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 12:40:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nGd0pvfcsoICIch9csPcE14G33+aVY24ZBEP5YLcqQ0qZAcFwwfFGdCSVFTPNVTvL+m6PqUxpu5oYgy96AE5N1TEhVtStK8v+xtY4An9+2lhET9SiWHao0B+vGBtrOQOYnVCzTiydCXTQe/ZkufiXF5Qh1UxMyaCrAXX5pfJjzA=
Received: by 10.35.84.16 with SMTP id m16mr542378pyl;
        Wed, 28 Jun 2006 12:40:10 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 28 Jun 2006 12:40:09 -0700 (PDT)
Message-ID: <359a92830606281240r46bed1anfeb846390e6438ca@mail.gmail.com>
Date: Wed, 28 Jun 2006 15:40:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Flushing RAMDir into FSDir
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C01F1C15E@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25393_24288184.1151523609949"
References: <8834A84C87A2C148AD46921BB8BFC97C01F1C15E@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25393_24288184.1151523609949
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, now I understand what you're trying to accomplish. Unfortunately, I
haven't a clue about any better solution than you're already using. I've
also seen the optimize step take a really long time.....

Does it make any sense at all to write a bunch of separate indexes (a new
one each time you would flush your RAMdir) and then use a MultiSearcher on
them? Perhaps with some offline merger/optimizer that ran periodically so
you don't end up with a bazillion indexes? It adds ugly complexity to
managing your indexes, but...

Best
Erick

------=_Part_25393_24288184.1151523609949--

From java-user-return-21652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 19:43:06 2006
Return-Path: <java-user-return-21652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5061 invoked from network); 28 Jun 2006 19:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:43:06 -0000
Received: (qmail 50021 invoked by uid 500); 28 Jun 2006 19:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49814 invoked by uid 500); 28 Jun 2006 19:42:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49801 invoked by uid 99); 28 Jun 2006 19:42:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:42:59 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.112] (HELO web34114.mail.mud.yahoo.com) (66.163.178.112)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Jun 2006 12:42:58 -0700
Received: (qmail 80954 invoked by uid 60001); 28 Jun 2006 19:42:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=IzSPQ4ClgtuZbbD0xF2qL7RbvpuaJWREW+fXs8HK+QVrsjeg2N7h/tyC06mjDFxF7IrOfjSKtyoYTSqebW2IAuPHD6TfUZG/61Aquyd0KOg3zbjbU+0mS79gQEQ6pnG6gf+7/d3qO5JncUl3/bLvmF+aSqWNmFC94hLoDkGHcPE=  ;
Message-ID: <20060628194237.80952.qmail@web34114.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34114.mail.mud.yahoo.com via HTTP; Wed, 28 Jun 2006 12:42:37 PDT
Date: Wed, 28 Jun 2006 12:42:37 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: Re: batch indexing using RAMDirectory
To: java-user@lucene.apache.org
In-Reply-To: <002801c69ae1$5174dc50$122c3dc1@dcs.bbk.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Eric,

I think you want:

fsWriter.addIndexes(Directory[] {ramDir});

to be:

fsWriter.addIndexes(new Directory[]{ramDir});

JAMES


--- zheng <zheng@dcs.bbk.ac.uk> wrote:

> I am a novice in lucene. I write some code to do
> batch indexing using
> RAMDirectory according to the code provided in
> lucene in action, which is
> something like FSDirectory fsDir =
> FSDirectory.getDirectory("/tmp/index",
> 
> true);
> 
> RAMDirectory ramDir = new RAMDirectory();
> 
> IndexWriter fsWriter = IndexWriter(fsDir,
> 
> new SimpleAnalyzer(), true);
> 
> IndexWriter ramWriter = new IndexWriter(ramDir,
> 
> new SimpleAnalyzer(), true);
> 
> while (there are documents to index) {
> 
> ... create Document ...
> 
> ramWriter.addDocument(doc);
> 
> if (condition for flushing memory to disk has been
> met) {
> 
> fsWriter.addIndexes(Directory[] {ramDir});
> 
> ramWriter.close();
> 
> ramWriter = new IndexWriter(ramDir, new
> SimpleAnalyzer(),
> 
> true);
> 
> }
> 
> }
> 
> But it cannot compile correctly on
> fsWriter.addIndexes(Directory[]
> {ramDir}); It seems some problem with ramDir. Is
> there something changed at
> lucene 2.0? How can I implement batch indexing
> correctly? Any simple code. 
> 
> Thanks!
> 
>  
> 
> Eric
> 
>  
> 
>  
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 19:46:20 2006
Return-Path: <java-user-return-21653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6017 invoked from network); 28 Jun 2006 19:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 19:46:19 -0000
Received: (qmail 57744 invoked by uid 500); 28 Jun 2006 19:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57534 invoked by uid 500); 28 Jun 2006 19:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57523 invoked by uid 99); 28 Jun 2006 19:46:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:46:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 12:46:11 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 10374D8880F
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 15:45:49 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Wed, 28 Jun 2006 15:45:50 -0400
X-Sasl-enc: kZxFQ2fJ28Fk5LJkEr/Ew5Pks3UgJ3DT8z+xTIa4BQ+0 1151523949
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 6E40BCDEA
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 15:45:49 -0400 (EDT)
Message-ID: <44A2DC6C.2080705@mikemccandless.com>
Date: Wed, 28 Jun 2006 15:45:48 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: What is a good book on Lucene?
References: <373399D6389D8C42B4EAD9BE2B6B5C5F065F2E2B@tormail01.cihi.ca> <44A2BD3B.1090506@syr.edu> <44A2C335.7020709@pf-cvl.net>
In-Reply-To: <44A2C335.7020709@pf-cvl.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Lucene in Action was very helpful for this beginner!

... and I would second that!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 20:01:16 2006
Return-Path: <java-user-return-21654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9708 invoked from network); 28 Jun 2006 20:01:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 20:01:16 -0000
Received: (qmail 86914 invoked by uid 500); 28 Jun 2006 20:01:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86844 invoked by uid 500); 28 Jun 2006 20:01:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86762 invoked by uid 99); 28 Jun 2006 20:01:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 13:01:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.111.91.238] (HELO leasing.marketingbrokers.com) (206.111.91.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Jun 2006 13:01:06 -0700
Received: from w226.z206111091.lax-ca.dsl.cnc.net ([206.111.91.226])
          by leasing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 673
          for <java-user@lucene.apache.org>;
          Wed, 28 Jun 2006 13:01:02 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <2c854e4c6333f7fd80297f64a2e49fd4@marketingbrokers.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Peter W. <peter@marketingbrokers.com>
Subject: search with RangeFilter.Less
Date: Wed, 28 Jun 2006 13:00:29 -0700
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I'm trying to do a numerical search for a property in Lucene using  
RangeFilter.Less
without using both RangeQuery and test cases.

Here's the code that I expect would return one hit :
(adapted from Youngho)

import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.*;
import org.apache.lucene.index.*;
import org.apache.lucene.search.*;
import org.apache.lucene.store.*;
import java.io.IOException;
import java.io.Serializable;
import java.util.*;

public class doesRFLwork
    {
    private static Directory ramdir;
    public static void main(String[] args)
       {
       try
          {
          setdocs();
          runfilterquery();
          }
       catch(Exception e)
          {
          System.out.println(e);
          }
       } // main

    protected static void setdocs() throws Exception
       {
       ramdir=new RAMDirectory();
       adddocs();
       }

    public static void runfilterquery() throws Exception
       {
       IndexSearcher searcher=new IndexSearcher(ramdir);
       Filter  
filter=RangeFilter.Less("num",NumberTools.longToString(10L));

       Term term=new Term("id","property");
       Query query=new TermQuery(term);

       FilteredQuery fq = new FilteredQuery(query,filter);

       Hits hits = searcher.search(fq);
       System.out.println("property found,less than 10: "  
+hits.length());
       }

    private static void adddocs() throws IOException
       {
       IndexWriter writer=new IndexWriter(ramdir,new SimpleAnalyzer(),  
true);
       Document doc=new Document();
       doc.add( new  
Field("id","property",Field.Store.YES,Field.Index.TOKENIZED) );
       doc.add( new  
Field("num",NumberTools.longToString(5L),Field.Store.YES,Field.Index.TOK 
ENIZED) );

       writer.addDocument(doc);
       writer.optimize();
       writer.close();
       }
    }

Since five is less than ten, why doesn't it work?

Thanks.

Peter W.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 28 21:08:00 2006
Return-Path: <java-user-return-21655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29057 invoked from network); 28 Jun 2006 21:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2006 21:07:59 -0000
Received: (qmail 10756 invoked by uid 500); 28 Jun 2006 21:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10726 invoked by uid 500); 28 Jun 2006 21:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10714 invoked by uid 99); 28 Jun 2006 21:07:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:07:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 14:07:51 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.6/8.13.6) with ESMTP id k5SL7USk161332
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 21:07:30 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k5SLA2wI105148
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 23:10:02 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k5SL7Txf024879
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 23:07:29 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k5SL7TlR024872
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 23:07:29 +0200
In-Reply-To: <359a92830606281240r46bed1anfeb846390e6438ca@mail.gmail.com>
Subject: Re: Flushing RAMDir into FSDir
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFF3B11EBC.5D49F6C2-ON8825719B.006D4221-8825719B.0073F0AC@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 28 Jun 2006 14:06:22 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 29/06/2006 00:10:01
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just a thought: using IndexModifier, you could call flush() in intervals,
say every <s> seconds or every <d> documents. If not using IndexModifier,
closing and re-opening IndexWriter should have similar effect.

Pros: (1) simple managing code, (2) content of previous docs
can be removed from disk once flush returns.

Cons: (1) few last added docs might be still stored on disk
although Lucene already saved them, (2) forced IO, so slower
indexing, (3) flush can take long (well, so can some calls to add-doc).

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 00:22:05 2006
Return-Path: <java-user-return-21656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79046 invoked from network); 29 Jun 2006 00:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 00:22:05 -0000
Received: (qmail 69310 invoked by uid 500); 29 Jun 2006 00:21:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69020 invoked by uid 500); 29 Jun 2006 00:21:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69009 invoked by uid 99); 29 Jun 2006 00:21:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 17:21:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jpump@healthline.com designates 64.142.35.101 as permitted sender)
Received: from [64.142.35.101] (HELO mail.healthline.com) (64.142.35.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 17:21:57 -0700
Received: from [10.1.1.99] ([64.142.35.98]) by mail.healthline.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 28 Jun 2006 17:21:16 -0700
Message-ID: <44A31D10.4070106@healthline.com>
Date: Wed, 28 Jun 2006 17:21:36 -0700
From: Jason Pump <jason@healthline.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: search with RangeFilter.Less
References: <2c854e4c6333f7fd80297f64a2e49fd4@marketingbrokers.com>
In-Reply-To: <2c854e4c6333f7fd80297f64a2e49fd4@marketingbrokers.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 29 Jun 2006 00:21:16.0221 (UTC) FILETIME=[EF8A5ED0:01C69B11]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's a string comparison. Make the "5" a "05" would be a simple workaround.

Jason

Peter W. wrote:
> Hello,
>
> I'm trying to do a numerical search for a property in Lucene using 
> RangeFilter.Less
> without using both RangeQuery and test cases.
>
> Here's the code that I expect would return one hit :
> (adapted from Youngho)
>
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.*;
> import org.apache.lucene.index.*;
> import org.apache.lucene.search.*;
> import org.apache.lucene.store.*;
> import java.io.IOException;
> import java.io.Serializable;
> import java.util.*;
>
> public class doesRFLwork
>    {
>    private static Directory ramdir;
>    public static void main(String[] args)
>       {
>       try
>          {
>          setdocs();
>          runfilterquery();
>          }
>       catch(Exception e)
>          {
>          System.out.println(e);
>          }
>       } // main
>
>    protected static void setdocs() throws Exception
>       {
>       ramdir=new RAMDirectory();
>       adddocs();
>       }
>
>    public static void runfilterquery() throws Exception
>       {
>       IndexSearcher searcher=new IndexSearcher(ramdir);
>       Filter 
> filter=RangeFilter.Less("num",NumberTools.longToString(10L));
>
>       Term term=new Term("id","property");
>       Query query=new TermQuery(term);
>
>       FilteredQuery fq = new FilteredQuery(query,filter);
>
>       Hits hits = searcher.search(fq);
>       System.out.println("property found,less than 10: " +hits.length());
>       }
>
>    private static void adddocs() throws IOException
>       {
>       IndexWriter writer=new IndexWriter(ramdir,new SimpleAnalyzer(), 
> true);
>       Document doc=new Document();
>       doc.add( new 
> Field("id","property",Field.Store.YES,Field.Index.TOKENIZED) );
>       doc.add( new 
> Field("num",NumberTools.longToString(5L),Field.Store.YES,Field.Index.TOKENIZED) 
> );
>
>       writer.addDocument(doc);
>       writer.optimize();
>       writer.close();
>       }
>    }
>
> Since five is less than ten, why doesn't it work?
>
> Thanks.
>
> Peter W.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 01:39:47 2006
Return-Path: <java-user-return-21657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4876 invoked from network); 29 Jun 2006 01:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 01:39:46 -0000
Received: (qmail 66145 invoked by uid 500); 29 Jun 2006 01:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65082 invoked by uid 500); 29 Jun 2006 01:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65069 invoked by uid 99); 29 Jun 2006 01:39:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 18:39:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.111.91.238] (HELO leasing.marketingbrokers.com) (206.111.91.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Jun 2006 18:39:39 -0700
Received: from w226.z206111091.lax-ca.dsl.cnc.net ([206.111.91.226])
          by leasing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 705
          for <java-user@lucene.apache.org>;
          Wed, 28 Jun 2006 18:39:38 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <44A31D10.4070106@healthline.com>
References: <2c854e4c6333f7fd80297f64a2e49fd4@marketingbrokers.com> <44A31D10.4070106@healthline.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b081ab10e91282bad50e70e04242205b@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: Peter W. <peter@marketingbrokers.com>
Subject: Re: search with RangeFilter.Less
Date: Wed, 28 Jun 2006 18:39:15 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jason,

Thanks, but changing it to '05' or '05L' in the code didn't seem to 
work,
hits.length() still returns 0 when the document should be found.

If you make just one change in the example:

       Hits hits = searcher.search(query);
       //Hits hits = searcher.search(fq);

IndexSearcher finds a match and populates the hits object. The issue 
seems to be in the
filter (which is built using RangeFilter.Less) and the FilteredQuery.

In the RangeFilter class, using 'Less' or 'More' gives you matches 
lower or higher than a set boundary:

Filter filter=RangeFilter.Less("num",NumberTools.longToString(10L));   
// field num < 10
...
FilteredQuery fq = new FilteredQuery(query,filter);

The NumberTools.longToString() method is supposed to replace padding 
leading 0's eliminating string comparison issues.

Hopefully, someone can help.

Peter W.



On Jun 28, 2006, at 5:21 PM, Jason Pump wrote:

> It's a string comparison. Make the "5" a "05" would be a simple 
> workaround.
>
> Jason


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 03:50:02 2006
Return-Path: <java-user-return-21658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27658 invoked from network); 29 Jun 2006 03:50:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 03:50:01 -0000
Received: (qmail 86442 invoked by uid 500); 29 Jun 2006 03:49:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86404 invoked by uid 500); 29 Jun 2006 03:49:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86393 invoked by uid 99); 29 Jun 2006 03:49:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 20:49:54 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 72.14.214.199 as permitted sender)
Received: from [72.14.214.199] (HELO hu-out-0102.google.com) (72.14.214.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 20:49:52 -0700
Received: by hu-out-0102.google.com with SMTP id 28so9390hub
        for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 20:49:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Zu4zar+m5P9pSRhSBLcy71eREal9xfcS8K6riKHx4bbVMn9r9Am247pU9dU1Tpz3B+Ognp7RuMJ2cAZkBgZRDJMI7mOO1SMIogGFPzWdP6bYA4ZSqccy+gLybeSpNhg68aB+tnpHItUB6HdcwkBlrsERBACj1PKaT6xwdx2FG9o=
Received: by 10.35.127.15 with SMTP id e15mr981193pyn;
        Wed, 28 Jun 2006 20:49:30 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Wed, 28 Jun 2006 20:49:30 -0700 (PDT)
Message-ID: <a36516400606282049w2e787849v6f5e4b8878e0590f@mail.gmail.com>
Date: Thu, 29 Jun 2006 09:19:30 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
In-Reply-To: <359a92830606280648i73e876ffu40d59e5b65610e45@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1344_32359275.1151552970597"
References: <a36516400606260658l6cef64d5y42f3923c1baca1df@mail.gmail.com>
	 <449FEBE4.6050502@syr.edu>
	 <Pine.LNX.4.58.0606261012220.27064@hal.rescomp.berkeley.edu>
	 <a36516400606270023m6781edbbh24fa01e4e3604a01@mail.gmail.com>
	 <44A0E27A.2000406@uni-hd.de>
	 <a36516400606270151k1e57b23cgbe6f4020ba18a5a4@mail.gmail.com>
	 <a36516400606280533h3374cd89qc43b031061c9f97f@mail.gmail.com>
	 <359a92830606280648i73e876ffu40d59e5b65610e45@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1344_32359275.1151552970597
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am using Hits object to collect all documents.
Let me tell you my problem. I am creating a web application. Every time when
a user looks for something it goes and search the index and return the
results. Results may be in millions. So for displaying results, i am doing
pagination.
Here the problem is that, i can not keep the hits with the session. So if a
user is looking for say 500th page and per page there are 20 results, it
again goes to look into the index, finds result and  simply gets the id of
500*20th document and displays 20 results after that.

I don't know, how can i solve this problem with HitCollector....

Thanks & Regards


On 6/28/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I hope you're not using the Hits object to assemble all 14M results. A
> recurring theme is that a Hits object should NOT be used for collection
> more
> than a few (100 I think) objects since it re-executes the query every 100
> or
> so terms it returns. It's intent is to efficiently return the first few
> hits.
>
> Look at HitCollector of you want to examine lots of results.
>
> Of course this doesn't apply if you are just using the Hits object to see
> how many documents matched and NOT looping through all them.
>
> Why does the second query take so little time? Two things suggest
> themselves.
> 1> if your first query is the first query after opening the index, there's
> significant overhead involved that you pay when opening the index, and the
> second time you won't pay it.
> 2> If you're issuing the same query twice, there is probably some cache
> involved.
>
> It would probably be instructive to issue a second query that is NOT the
> same as the first (using the same searcher) and see the response time.
> That
> way you could gain some insight into whether the time differential is due
> to
> opening the index.
>
> Best
> Erick
>
>

------=_Part_1344_32359275.1151552970597--

From java-user-return-21659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 04:20:48 2006
Return-Path: <java-user-return-21659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35173 invoked from network); 29 Jun 2006 04:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 04:20:48 -0000
Received: (qmail 12543 invoked by uid 500); 29 Jun 2006 04:20:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12505 invoked by uid 500); 29 Jun 2006 04:20:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12492 invoked by uid 99); 29 Jun 2006 04:20:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:20:41 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.99] (HELO web34101.mail.mud.yahoo.com) (66.163.178.99)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Jun 2006 21:20:40 -0700
Received: (qmail 18475 invoked by uid 60001); 29 Jun 2006 04:19:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=WBsAEVvdnRcC2UNPIVtalgNRERJe8CCDgs/QvWt5j+8kAhhoCljAnqTt+BX77Vgpi219WiaOhHwLzJiPKiH6qThSdyEvVaJt9FyVoEaXFOQuftqdbfGotmxn6Z+3EjEtp+KCaswDcg9dO7dezCpKpNmaWlGPbPS6oeEl6EnXzH0=  ;
Message-ID: <20060629041907.18431.qmail@web34101.mail.mud.yahoo.com>
Received: from [66.166.72.28] by web34101.mail.mud.yahoo.com via HTTP; Wed, 28 Jun 2006 21:17:16 PDT
Date: Wed, 28 Jun 2006 21:17:16 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: Re: Searching is taking a lot...
To: java-user@lucene.apache.org
In-Reply-To: <a36516400606282049w2e787849v6f5e4b8878e0590f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A HitCollector object invokes its collect method on
every document which matches the query/filter
submitted to the Searcher.search method. I think all
you would need to do is pass in the page number and
results per page to your HitCollector constructor and
then in the collect method do the bookeeping to keep
track of where you are in the result set. A simple
version of your HitCollector might look like this:

public class MyHitCollector extends HitCollector {

  private int docCount = 0;
  private List documents = new ArrayList();
  private int startDoc;
  private int endDoc;
  private Searcher searcher;

  public MyHitCollector(Searcher searcher, int
requestedPageNumber, int resultsPerPage) {
    startDoc = (requestedPageNumber - 1) *
resultsPerPage;
    endDoc = requestedPageNumber * resultsPerPage;
    this.searcher = searcher;
  }

  public void collect(int id, float score) {
    if(docCount >= startDoc && docCount < endDoc) {
      documents.add(searcher.doc(id));
    }
    docCount++;
  }

  public List getDocuments() {
    return documents;
  }

}  

Then in your application, wherever you're executing
your search you just need:

HitCollector hc = new
MyHitCollector(yourSearcher,500,20);
yourSearcher.search(yourQuery,hc);
List results = hc.getDocuments();

Now results should contain the 1001st-1020th results.

JAMES

--- "heritrix.lucene" <heritrix.lucene@gmail.com>
wrote:

> I am using Hits object to collect all documents.
> Let me tell you my problem. I am creating a web
> application. Every time when
> a user looks for something it goes and search the
> index and return the
> results. Results may be in millions. So for
> displaying results, i am doing
> pagination.
> Here the problem is that, i can not keep the hits
> with the session. So if a
> user is looking for say 500th page and per page
> there are 20 results, it
> again goes to look into the index, finds result and 
> simply gets the id of
> 500*20th document and displays 20 results after
> that.
> 
> I don't know, how can i solve this problem with
> HitCollector....
> 
> Thanks & Regards
> 
> 
> On 6/28/06, Erick Erickson <erickerickson@gmail.com>
> wrote:
> >
> > I hope you're not using the Hits object to
> assemble all 14M results. A
> > recurring theme is that a Hits object should NOT
> be used for collection
> > more
> > than a few (100 I think) objects since it
> re-executes the query every 100
> > or
> > so terms it returns. It's intent is to efficiently
> return the first few
> > hits.
> >
> > Look at HitCollector of you want to examine lots
> of results.
> >
> > Of course this doesn't apply if you are just using
> the Hits object to see
> > how many documents matched and NOT looping through
> all them.
> >
> > Why does the second query take so little time? Two
> things suggest
> > themselves.
> > 1> if your first query is the first query after
> opening the index, there's
> > significant overhead involved that you pay when
> opening the index, and the
> > second time you won't pay it.
> > 2> If you're issuing the same query twice, there
> is probably some cache
> > involved.
> >
> > It would probably be instructive to issue a second
> query that is NOT the
> > same as the first (using the same searcher) and
> see the response time.
> > That
> > way you could gain some insight into whether the
> time differential is due
> > to
> > opening the index.
> >
> > Best
> > Erick
> >
> >
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 04:31:29 2006
Return-Path: <java-user-return-21660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36726 invoked from network); 29 Jun 2006 04:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 04:31:29 -0000
Received: (qmail 21693 invoked by uid 500); 29 Jun 2006 04:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21643 invoked by uid 500); 29 Jun 2006 04:31:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21619 invoked by uid 99); 29 Jun 2006 04:31:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:31:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:31:14 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0D7BD5B784; Wed, 28 Jun 2006 21:30:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F32D97F403
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 21:30:46 -0700 (PDT)
Date: Wed, 28 Jun 2006 21:30:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
In-Reply-To: <20060629041907.18431.qmail@web34101.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0606282124550.8527@hal.rescomp.berkeley.edu>
References: <20060629041907.18431.qmail@web34101.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Just to clarify: If you are doing paginated results, then the Hits API is
probably fast enough for you ... it's designed to work well in the first
100 results, and most people don't go that deep when looking at search
results.

if you look back earier in this thread, the "I hope you're not using the
Hits object" comment was in direct response to this...

: When the resultSet is very big, Searching is taking a lot of time.
: For returning responce of a query that finds approx 14 M results, first time
: it is taking approx 17Sec.

the comment was addressing the fact that if you are trying to iterate over
all 14 M results Hits is a very bad way to go.

perhaps that's not what you ment, perhaps you aren't iterating over any
results, in which case using a HitCOllector instead isn't neccessary going
to bring that 17sec down.

a better question is what exactly are you doing? .. what kinds of queries
are you executing?  what method calls are you timing?  how many iterations
are you testing to give the JVM a chance to warm up -- to give the disk
cache a chance to load all the pages for your index?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 04:40:48 2006
Return-Path: <java-user-return-21661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38480 invoked from network); 29 Jun 2006 04:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 04:40:47 -0000
Received: (qmail 33901 invoked by uid 500); 29 Jun 2006 04:40:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33866 invoked by uid 500); 29 Jun 2006 04:40:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33855 invoked by uid 99); 29 Jun 2006 04:40:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:40:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 21:40:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E7E2F5B77E; Wed, 28 Jun 2006 21:40:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CEABE7F403
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 21:40:20 -0700 (PDT)
Date: Wed, 28 Jun 2006 21:40:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: MemoryUsage of sorting
In-Reply-To: <F34C8A704C489B46B9E9FBDBD1B91D5F01665FAD@MARS.coremedia.com>
Message-ID: <Pine.LNX.4.58.0606282131150.8527@hal.rescomp.berkeley.edu>
References: <F34C8A704C489B46B9E9FBDBD1B91D5F01665FAD@MARS.coremedia.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: some OutOfMemory errors. If I understand it correctly, each unique term
: in a field is read into a cache, when I use Searcher.search(Query query,
: Sort sort) with one SortField. So even if my query only finds 5

Minor clarification: if the sort type is one of the numeric types, then an
array of that type is created of the same size as the number of docs in
your index -- regardless of how many unique terms there are.  if the sort
type is String, then a String[] of all the unique Term values is created,
*and* and array of ints (one per document) is created to use as an index
into that String[]

: documents, Lucene would start to build a cache of maybe a few millionen
: unique field entries, which would then be re-used for a further queries.

correct - the assumption is that if you are sorting on field "foo" in this
query, there will probably be another query you want to sort on field
"foo" in the near future.

: Is this correct? It would probably be best practice, to do sorting
: yourself, if many unique terms are concerned for only a few search
: results, especially since we have lots of index updates, which makes
: reusing IndexSearcher a little lot harder.

it might make sense to do that ... but it you would have to use "STORED"
fields to do that -- typically searching is done on INDEXED fields,
because it's very easy/fast to build up the FieldCache for every document
by walking the TermEnum of the indexed fields; but if you don't want to
build the FieldCache for every document you'll need some way to get a
value for each of hte matching documents -- STORED fields seem like the
most logical.

You could probably write a pretty generic SortComparatorSource that would
do this.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 05:21:29 2006
Return-Path: <java-user-return-21662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44800 invoked from network); 29 Jun 2006 05:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 05:21:29 -0000
Received: (qmail 65315 invoked by uid 500); 29 Jun 2006 05:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65278 invoked by uid 500); 29 Jun 2006 05:21:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65266 invoked by uid 99); 29 Jun 2006 05:21:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:21:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jun 2006 22:21:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 12AD65B784; Wed, 28 Jun 2006 22:20:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 07FB37F403
	for <java-user@lucene.apache.org>; Wed, 28 Jun 2006 22:20:54 -0700 (PDT)
Date: Wed, 28 Jun 2006 22:20:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: search with RangeFilter.Less
In-Reply-To: <2c854e4c6333f7fd80297f64a2e49fd4@marketingbrokers.com>
Message-ID: <Pine.LNX.4.58.0606282220230.10011@hal.rescomp.berkeley.edu>
References: <2c854e4c6333f7fd80297f64a2e49fd4@marketingbrokers.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm trying to do a numerical search for a property in Lucene using
: RangeFilter.Less

: Field("id","property",Field.Store.YES,Field.Index.TOKENIZED) );
:        doc.add( new
: Field("num",NumberTools.longToString(5L),Field.Store.YES,Field.Index.TOK
: ENIZED) );


: Since five is less than ten, why doesn't it work?

becuase you've tokenized the "num" field.   Your Analyzer has mucked with
the value so that it won't look right when RangeFilter tries to compare it
with the value for 10 later.






-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 07:01:07 2006
Return-Path: <java-user-return-21663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65706 invoked from network); 29 Jun 2006 07:01:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 07:01:07 -0000
Received: (qmail 47771 invoked by uid 500); 29 Jun 2006 07:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47741 invoked by uid 500); 29 Jun 2006 07:00:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47730 invoked by uid 99); 29 Jun 2006 07:00:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 00:00:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 00:00:50 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5T70TUU074561
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 09:00:29 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
Date: Thu, 29 Jun 2006 09:00:28 +0200
User-Agent: KMail/1.8.2
References: <20060629041907.18431.qmail@web34101.mail.mud.yahoo.com>
In-Reply-To: <20060629041907.18431.qmail@web34101.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606290900.28711.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 29 June 2006 06:17, James Pine wrote:
> A HitCollector object invokes its collect method on
> every document which matches the query/filter
> submitted to the Searcher.search method. I think all
> you would need to do is pass in the page number and
> results per page to your HitCollector constructor and
> then in the collect method do the bookeeping to keep
> track of where you are in the result set. A simple
> version of your HitCollector might look like this:
> 
> public class MyHitCollector extends HitCollector {
> 
>   private int docCount = 0;
>   private List documents = new ArrayList();
>   private int startDoc;
>   private int endDoc;
>   private Searcher searcher;
> 
>   public MyHitCollector(Searcher searcher, int
> requestedPageNumber, int resultsPerPage) {
>     startDoc = (requestedPageNumber - 1) *
> resultsPerPage;
>     endDoc = requestedPageNumber * resultsPerPage;
>     this.searcher = searcher;
>   }
> 
>   public void collect(int id, float score) {
>     if(docCount >= startDoc && docCount < endDoc) {
>       documents.add(searcher.doc(id));

This will break performance. It is better to first collect all the document
numbers (code without the proper declarations):

 public void collect(int id, float score) {
     if(docCount >= startDoc && docCount < endDoc) {
         docNrs.add(id); // or use int[] docNrs when possible.
  ....

and later retrieve them after collecting (pseudo code):

        for docNr in docNrs {
          documents.add(searcher.doc(docNr));
        }

Doing things this way avoids the disk head moving up and down between
different parts of the index during the collection.
Also, make sure to call searcher.doc(docNr) with sorted docNrs, i.e.
there is normally no need to change the order of the collected docNrs.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 07:20:06 2006
Return-Path: <java-user-return-21664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72024 invoked from network); 29 Jun 2006 07:20:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 07:20:06 -0000
Received: (qmail 71329 invoked by uid 500); 29 Jun 2006 07:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71113 invoked by uid 500); 29 Jun 2006 07:19:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71096 invoked by uid 99); 29 Jun 2006 07:19:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 00:19:58 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 72.14.214.194 as permitted sender)
Received: from [72.14.214.194] (HELO hu-out-0102.google.com) (72.14.214.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 00:19:57 -0700
Received: by hu-out-0102.google.com with SMTP id 28so36001hub
        for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 00:19:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Nk7lswTYRzdhV7cp3x515JT9uwJKxSrc6or1/u6SJD5104jlTwEQMVuqFLeWQDOpn6cSqWCEDBCCg1wvkyGRLvp87DX+pHHxhwnz87oPfuNWx4UNDu4N4ioVMA0kqJ3GNpoJlQ18iE4jKu7SpID6ANgsbiAj8jQx8MG+067lK3w=
Received: by 10.35.20.14 with SMTP id x14mr1165108pyi;
        Thu, 29 Jun 2006 00:19:36 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Thu, 29 Jun 2006 00:19:36 -0700 (PDT)
Message-ID: <a36516400606290019s2919686ra3b8d0dfcfe584af@mail.gmail.com>
Date: Thu, 29 Jun 2006 12:49:36 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
In-Reply-To: <200606290900.28711.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2893_17958631.1151565576188"
References: <20060629041907.18431.qmail@web34101.mail.mud.yahoo.com>
	 <200606290900.28711.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2893_17958631.1151565576188
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This will break performance. It is better to first collect all the document
> numbers (code without the proper declarations):
>
> public void collect(int id, float score) {
>      if(docCount >= startDoc && docCount < endDoc) {
>          docNrs.add(id); // or use int[] docNrs when possible.
>   ....


Why
public void collect(int id, float score) {
     if(docCount >= startDoc && docCount < endDoc) {
is requiered.

i think the bertter thing is
public void collect(int id, float score) {
    docNrs.add(id); // or use int[] docNrs when possible.
because anyhow the collect metod will be called total number of matched
documents times.
why should we introfuce one more condition....

------=_Part_2893_17958631.1151565576188--

From java-user-return-21665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 07:28:42 2006
Return-Path: <java-user-return-21665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79798 invoked from network); 29 Jun 2006 07:28:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 07:28:41 -0000
Received: (qmail 77494 invoked by uid 500); 29 Jun 2006 07:28:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77457 invoked by uid 500); 29 Jun 2006 07:28:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77445 invoked by uid 99); 29 Jun 2006 07:28:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 00:28:33 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 72.14.214.207 as permitted sender)
Received: from [72.14.214.207] (HELO hu-out-0102.google.com) (72.14.214.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 00:28:33 -0700
Received: by hu-out-0102.google.com with SMTP id 28so37187hub
        for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 00:28:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QRjwZ1Pwt9/OqMfQyoL+XtvQojO/EwfxV0aRG0hhr+Zdwj/FniddLt/k3Gd5TC+j7EOsJ0EDlN52KfAmJyQum6zBoBUAreqtUekeDyahdl3QyS7OOBBYeaeVUNxgefR8HC+KPHp49HlTmzrpdslhVnnhkgwgiwaBmaxfQqG61Mo=
Received: by 10.35.135.12 with SMTP id m12mr1187306pyn;
        Thu, 29 Jun 2006 00:28:11 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Thu, 29 Jun 2006 00:28:11 -0700 (PDT)
Message-ID: <a36516400606290028s11ca2de1ydaca18416865b302@mail.gmail.com>
Date: Thu, 29 Jun 2006 12:58:11 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
In-Reply-To: <Pine.LNX.4.58.0606282124550.8527@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3025_7579322.1151566091365"
References: <20060629041907.18431.qmail@web34101.mail.mud.yahoo.com>
	 <Pine.LNX.4.58.0606282124550.8527@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3025_7579322.1151566091365
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> perhaps that's not what you ment, perhaps you aren't iterating over any
> results, in which case using a HitCOllector instead isn't neccessary going
> to bring that 17sec down.

As i told earlier that for the same query minimum time is 2-3 sec and this
time is after several attempt(so i think upto that time jvm should become so
hot...). How can i reduce this time further..

Then only for searching with
a better question is what exactly are you doing? .. what kinds of queries

> are you executing?


my queries are like
+subject:cs

 what method calls are you timing?


simply searcher.search(query) ;
my tomcat is running on -Xmx512M.

how many iterations
> are you testing to give the JVM a chance to warm up -- to give the disk
> cache a chance to load all the pages for your index?


i tried approx 10 times....


Thanks and regards...

------=_Part_3025_7579322.1151566091365--

From java-user-return-21666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 07:44:02 2006
Return-Path: <java-user-return-21666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85774 invoked from network); 29 Jun 2006 07:44:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 07:44:01 -0000
Received: (qmail 5920 invoked by uid 500); 29 Jun 2006 07:43:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5870 invoked by uid 500); 29 Jun 2006 07:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5843 invoked by uid 99); 29 Jun 2006 07:43:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 00:43:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of thomas.kroehling@coremedia.com designates 217.111.0.10 as permitted sender)
Received: from [217.111.0.10] (HELO mail.coremedia.com) (217.111.0.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 00:43:46 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.coremedia.com (Postfix) with ESMTP id 79B2058ECD8
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 09:43:24 +0200 (CEST)
Received: from mail.coremedia.com ([127.0.0.1])
 by localhost (masq [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 13970-02 for <java-user@lucene.apache.org>;
 Thu, 29 Jun 2006 09:43:23 +0200 (CEST)
Received: from mars.coremedia.com (smtp.coremedia.com [10.1.2.8])
	by mail.coremedia.com (Postfix) with ESMTP id A4ADF52607A
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 09:43:23 +0200 (CEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: MemoryUsage of sorting
Date: Thu, 29 Jun 2006 09:43:23 +0200
Message-ID: <F34C8A704C489B46B9E9FBDBD1B91D5F01665FAE@MARS.coremedia.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MemoryUsage of sorting
Thread-Index: AcabNjoqe7Sf+Fw0RVaTAAteTqsKtgAFjr3w
From: "Kroehling, Thomas" <thomas.kroehling@coremedia.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That is exactly what I did when I started to realize the effects of =
using Lucene sorting with millions of documents in the index. I used =
STORED fields and sorted the results with a generic Comparator, which is =
configured for a field and a search order. I only do this if the query =
did not return too many search results.

Thanks a lot,
Tom

-----Urspr=FCngliche Nachricht-----
Von: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Gesendet: Thursday, June 29, 2006 6:40 AM
An: java-user@lucene.apache.org
Betreff: Re: MemoryUsage of sorting


: some OutOfMemory errors. If I understand it correctly, each unique =
term
: in a field is read into a cache, when I use Searcher.search(Query =
query,
: Sort sort) with one SortField. So even if my query only finds 5

Minor clarification: if the sort type is one of the numeric types, then =
an array of that type is created of the same size as the number of docs =
in your index -- regardless of how many unique terms there are.  if the =
sort type is String, then a String[] of all the unique Term values is =
created,
*and* and array of ints (one per document) is created to use as an index =
into that String[]

: documents, Lucene would start to build a cache of maybe a few =
millionen
: unique field entries, which would then be re-used for a further =
queries.

correct - the assumption is that if you are sorting on field "foo" in =
this query, there will probably be another query you want to sort on =
field "foo" in the near future.

: Is this correct? It would probably be best practice, to do sorting
: yourself, if many unique terms are concerned for only a few search
: results, especially since we have lots of index updates, which makes
: reusing IndexSearcher a little lot harder.

it might make sense to do that ... but it you would have to use "STORED"
fields to do that -- typically searching is done on INDEXED fields, =
because it's very easy/fast to build up the FieldCache for every =
document by walking the TermEnum of the indexed fields; but if you don't =
want to build the FieldCache for every document you'll need some way to =
get a value for each of hte matching documents -- STORED fields seem =
like the most logical.

You could probably write a pretty generic SortComparatorSource that =
would do this.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 09:09:59 2006
Return-Path: <java-user-return-21667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36549 invoked from network); 29 Jun 2006 09:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 09:09:59 -0000
Received: (qmail 55136 invoked by uid 500); 29 Jun 2006 09:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54864 invoked by uid 500); 29 Jun 2006 09:09:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54853 invoked by uid 99); 29 Jun 2006 09:09:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 02:09:51 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.54.11.87] (HELO bmapps.persistent.co.in) (202.54.11.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 02:09:51 -0700
Received: from mail.persistent.co.in (unknown [10.12.0.1])
	by bmapps.persistent.co.in (Symantec Mail Security) with ESMTP id A9DFFE9C
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 14:39:10 +0530 (IST)
Received: (from mail6.persistent.co.in [10.77.36.24])
	by mail6.persistent.co.in (MOS 3.7.5-GA)
	with HTTPS/1.1 id AMB89480 (AUTH amit_kkumar);
	Thu, 29 Jun 2006 14:39:09 +0530 (IST)
From: <amit_kkumar@persistent.co.in>
Subject: question
To: java-user@lucene.apache.org
X-Mailer: Mirapoint Webmail Direct 3.7.5-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding:7bit
Message-Id: <20060629143909.AMB89480@mail6.persistent.co.in>
Date: Thu, 29 Jun 2006 14:39:09 +0530 (IST)
X-Junkmail-Whitelist: YES (by domain whitelist at mail6.persistent.co.in)
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi,

my problem is that i am using mysql db in which one table is
present and i want index each row in the table and then search

plz reply

how this can be done?

amit kumar

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Pvt. Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Pvt. Ltd. does not accept any liability for virus infected mails.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 11:35:52 2006
Return-Path: <java-user-return-21668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87627 invoked from network); 29 Jun 2006 11:35:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 11:35:52 -0000
Received: (qmail 93764 invoked by uid 500); 29 Jun 2006 11:35:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93726 invoked by uid 500); 29 Jun 2006 11:35:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93715 invoked by uid 99); 29 Jun 2006 11:35:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 04:35:43 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of adam.saltiel@gmail.com designates 66.249.82.199 as permitted sender)
Received: from [66.249.82.199] (HELO wx-out-0102.google.com) (66.249.82.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 04:35:42 -0700
Received: by wx-out-0102.google.com with SMTP id s16so66113wxc
        for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 04:35:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TiA9Tnjttd68A11kqdvQJlgQMaIQQ/wwJ38nNqHqxnEqhifJlWc8fJwtNfMzAn5ZVsftrZ/q4d5c1Z2xUbSFxAzJYxasftGWHCA/F+VZ21wXNX2vuE8FaLCt0c1OM/5eu6i1B7sp9LrWmmobtBrIZfy95ZT21c4kbOc28WHCXmI=
Received: by 10.70.68.2 with SMTP id q2mr2863543wxa;
        Thu, 29 Jun 2006 04:35:20 -0700 (PDT)
Received: by 10.70.70.9 with HTTP; Thu, 29 Jun 2006 04:35:19 -0700 (PDT)
Message-ID: <e8aa138c0606290435rccaf1cj71136833c6aaf53a@mail.gmail.com>
Date: Thu, 29 Jun 2006 12:35:19 +0100
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene indexing RDF
In-Reply-To: <44A2739B.2000003@aduna-software.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81809_26992738.1151580919859"
References: <20060627160043.909B8C0BB@mad.isoco.net>
	 <44A1696B.5060103@wolfram.com>
	 <e8aa138c0606280231h13b0ffebq274d3b3664c09421@mail.gmail.com>
	 <44A2739B.2000003@aduna-software.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_81809_26992738.1151580919859
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Chris,
I find this incredibly interesting!
Thank you for your full explanation. I was aware of the components, but not
the implementation.

> ... to provide a means to query both document full-text and metadata using
> an RDF model
>
Is there any thing I can read about how you have some to this approach?
The meta data here is simply the RDF elements?
But there is a distinction between the name given to an element, that has a
semantic, and the type of element, which I guess has a semantic implication?
Either or both of these could influence a text search or feedback to the
user (to refine their query, perhaps)?

> ... query all RDF literals using Lucene's query facilities while making
> use of the logical RDF structure (which is what you want, if I understand
> you correctly), even when the structure of the stored models is not known at
> development time.


Yes, that is what I am thinking. Well, we know that we can import a model
into a class, Henry Story and others are working on this. This is a
convenience to the developer, but such things shouldn't be underestimated.
So the issue is that we can use an arbitrary data structure in code (that
happens to be RDF), and what we need to do is find what is generic in RDF
that will allow us to meaningfully manipulate it. Perhaps an approach would
be to have a series of handlers that would facilitate this, e.g. an obvious
one would be a list handler. But less obvious would be the implication of
the presence or absence of elements, i.e. optional in the XSD.
I am very uncertain where this is going. It may be impossible to draw many
logical conclusions from RDF that are explicit in RDF/OWL, and trying to do
that would be like trying to recast the RDF as OWL?
The investigations into OWL must be relevant here anyway. Turning to the
Lucene side of it, I think there must be something extra that Lucene can add
to how that structure is used, e.g. it is an arbitrary structure with
arbitrary data encapsulated, but the data can inform the approach in logic
to the structure?
Adam



On 28/06/06, Christiaan Fluit <christiaan.fluit@aduna-software.com> wrote:
>
> adasal wrote:
> > As far as i have researched this I know that the gnowsis project uses
> both
> > rdf and lucene, but I have not had time to determine their relationship.
> > www.gnowsis.org/
>
> I can tell you a bit about Gnowsis, as we (Aduna) are cooperating with
> the Gnowsis people on RDF creation, storage and querying in the Aperture
> project (aperture.sourceforge.net).
>
> Both the latest Gnowsis beta version and various Aduna products use the
> Sesame framework (openrdf.org) to store and query RDF.
>
> One of Sesame's core interfaces is the Sail (Storage And Inference
> Layer), which provides an abstraction on a specific type of RDF store,
> e.g. in-memory, file-based, RDBMS-based, ...
>
> We have developed a Sail implementation that combines a file-based RDF
> storage with a Lucene index. The purpose of this Sail is to provide a
> means to query both document full-text and metadata using an RDF model.
>
> The way we realized this is that document metadata is stored in the RDF
> store, the full-text and other text-like documents are indexed in
> Lucene, and the RDF model is extended with a virtual property connecting
> a Document resource to a query literal that can be used to query the
> full-text. The dedicated Sail knows that that property should not be
> looked up in the RDF store but should instead be evaluated as a Lucene
> query. If you want, I can send you example code that shows how we did
> this.
>
> We have some ideas on generalizing this approach, as ideally you would
> like to be able to query all RDF literals using Lucene's query
> facilities while making use of the logical RDF structure (which is what
> you want, if I understand you correctly), even when the structure of the
> stored models is not known at development time. However, little work has
> been done on this. I guess that when we would start working on this, the
> code for it would end up in either the Sesame or Aperture code base.
>
>
> Chris
> --
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_81809_26992738.1151580919859--

From java-user-return-21669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 12:22:07 2006
Return-Path: <java-user-return-21669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97037 invoked from network); 29 Jun 2006 12:22:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 12:22:06 -0000
Received: (qmail 55472 invoked by uid 500); 29 Jun 2006 12:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55322 invoked by uid 500); 29 Jun 2006 12:21:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55304 invoked by uid 99); 29 Jun 2006 12:21:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 05:21:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.210.211 as permitted sender)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 05:21:58 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay2.uni-heidelberg.de (8.12.10/8.12.10) with ESMTP id k5TCNmvj003100
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 14:23:49 +0200 (MET DST)
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 4A5162C05A
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 14:21:35 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 0A32D2C059
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 14:21:34 +0200 (CEST)
Message-ID: <44A3C5CD.7040701@uni-hd.de>
Date: Thu, 29 Jun 2006 14:21:33 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: question
References: <20060629143909.AMB89480@mail6.persistent.co.in>
In-Reply-To: <20060629143909.AMB89480@mail6.persistent.co.in>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

amit_kkumar@persistent.co.in schrieb:
> hi,
> 
> my problem is that i am using mysql db in which one table is
> present and i want index each row in the table and then search
> 
> plz reply
> 
> how this can be done?
http://wiki.apache.org/jakarta-lucene/LuceneFAQ
How can I use Lucene to index a database?

Connect to the database using JDBC and use an SQL "SELECT" statement to
query the database. Then create one Lucene Document object per row and
add it to the index. You will probably want to store the ID column so
you can later access the matching items. For other (text) columns it
might make more sense to only index (not store) them, as the original
data is still available in your database.


> 
> amit kumar
> 
> DISCLAIMER
> ==========
> This e-mail may contain privileged and confidential information which is the property of Persistent Systems Pvt. Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Pvt. Ltd. does not accept any liability for virus infected mails.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 12:40:48 2006
Return-Path: <java-user-return-21670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1690 invoked from network); 29 Jun 2006 12:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 12:40:46 -0000
Received: (qmail 87423 invoked by uid 500); 29 Jun 2006 12:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87386 invoked by uid 500); 29 Jun 2006 12:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87373 invoked by uid 99); 29 Jun 2006 12:40:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 05:40:40 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.54.11.87] (HELO bmapps.persistent.co.in) (202.54.11.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 05:40:38 -0700
Received: from mail.persistent.co.in (unknown [10.12.0.1])
	by bmapps.persistent.co.in (Symantec Mail Security) with ESMTP id F0348F8E;
	Thu, 29 Jun 2006 18:10:06 +0530 (IST)
Received: (from mail6.persistent.co.in [10.77.36.24])
	by mail6.persistent.co.in (MOS 3.7.5-GA)
	with HTTPS/1.1 id AMC04675 (AUTH amit_kkumar);
	Thu, 29 Jun 2006 18:10:05 +0530 (IST)
From: <amit_kkumar@persistent.co.in>
Subject: Re: question
To: java-user@lucene.apache.org, mbraun@uni-hd.de
X-Mailer: Mirapoint Webmail Direct 3.7.5-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding:7bit
Message-Id: <20060629181005.AMC04675@mail6.persistent.co.in>
Date: Thu, 29 Jun 2006 18:10:05 +0530 (IST)
X-Junkmail-Whitelist: YES (by domain whitelist at mail6.persistent.co.in)
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi martin,

thing is that i am new to lucene and
i am not sure how to use it

the cnnection through jdbc and select stmt. are all done

i just want to know that how can i create lucene document per
row? if u provide some pseudo code kind of thing..

as in demo the indexing is done on files

amit kumar 

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Pvt. Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Pvt. Ltd. does not accept any liability for virus infected mails.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 12:49:11 2006
Return-Path: <java-user-return-21671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3481 invoked from network); 29 Jun 2006 12:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 12:49:11 -0000
Received: (qmail 97535 invoked by uid 500); 29 Jun 2006 12:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97214 invoked by uid 500); 29 Jun 2006 12:48:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97203 invoked by uid 99); 29 Jun 2006 12:48:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 05:48:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 05:48:51 -0700
Received: from lettmelk [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A8250220; Thu, 29 Jun 2006 14:31:33 +0200
Date: Thu, 29 Jun 2006 14:48:23 +0200
To: java-user@lucene.apache.org
Subject: Re: question
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <20060629181005.AMC04675@mail6.persistent.co.in>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tbwq6xiioftp72@lettmelk>
In-Reply-To: <20060629181005.AMC04675@mail6.persistent.co.in>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-2, 28.06.2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: Dc82409d20000595d.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If your database table looks like this:

ID - Content - Subject - Author

you get the fields from you db and assumably store them in some bean, or=
  =

directly in strings like this;
String id, content, subject, author.

you can create a lucene document in this fashion:

final Document doc =3D new Document();

doc.add(new Field("id", id, Store.YES, Index.UN_TOKENIZED));
doc.add(new Field("content", content, Store.NO, Index.TOKENIZED));
... and so on

Store.* and Index.* choices depend on your need.

then store the document to you index using

writer.addDocument(doc);

Of course it is a bit dirty to name the fields in the code and you could=
  =

for instance declare the field-names

like:
public static final String SIGNATUREURI =3D "signatureuri";

Hope this helps. If you read a bit in the wiki, you will find a nice dea=
l  =

of pointers there aswell.


On Thu, 29 Jun 2006 14:40:05 +0200, <amit_kkumar@persistent.co.in> wrote=
:

> hi martin,
>
> thing is that i am new to lucene and
> i am not sure how to use it
>
> the cnnection through jdbc and select stmt. are all done
>
> i just want to know that how can i create lucene document per
> row? if u provide some pseudo code kind of thing..
>
> as in demo the indexing is done on files
>
> amit kumar
>
> DISCLAIMER
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> This e-mail may contain privileged and confidential information which =
is  =

> the property of Persistent Systems Pvt. Ltd. It is intended only for t=
he  =

> use of the individual or entity to which it is addressed. If you are n=
ot  =

> the intended recipient, you are not authorized to read, retain, copy, =
 =

> print, distribute or use this message. If you have received this  =

> communication in error, please notify the sender and delete all copies=
  =

> of this message. Persistent Systems Pvt. Ltd. does not accept any  =

> liability for virus infected mails.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 13:55:59 2006
Return-Path: <java-user-return-21672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32009 invoked from network); 29 Jun 2006 13:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 13:55:59 -0000
Received: (qmail 48569 invoked by uid 500); 29 Jun 2006 13:55:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48523 invoked by uid 500); 29 Jun 2006 13:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48512 invoked by uid 99); 29 Jun 2006 13:55:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 06:55:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.221] (HELO smtpout05-04.prod.mesa1.secureserver.net) (64.202.165.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 06:55:51 -0700
Received: (qmail 14568 invoked from network); 29 Jun 2006 13:55:30 -0000
Received: from unknown (202.153.32.162)
  by smtpout05-04.prod.mesa1.secureserver.net (64.202.165.221) with ESMTP; 29 Jun 2006 13:55:29 -0000
Subject: How to Integrate the WordNet Synonym Index with my Index
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary="=-3NGcTgExXO8Scwg4fpwu"
Organization: iptouch
Date: Thu, 29 Jun 2006 19:26:03 +0530
Message-Id: <1151589363.3671.30.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-3NGcTgExXO8Scwg4fpwu
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi,

seems like am awe struck. 

My Index is working fine.

Now,  have got the WordNet synonym-index.

How do I make use of this index to get synonym support search results.?

Do I have to Merge these 2 indexes using the Merge class?  will that
work?

or

Do I have to inject the field "word" values into my Index at the time of
creating my index?

or

Is there a way of making use of the synonym-index directly at the time
of searching?

Please get back as soon as possible.

Thanks in Advance.              Ramesh.S

--=-3NGcTgExXO8Scwg4fpwu--


From java-user-return-21673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 14:08:09 2006
Return-Path: <java-user-return-21673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37640 invoked from network); 29 Jun 2006 14:08:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 14:08:08 -0000
Received: (qmail 84545 invoked by uid 500); 29 Jun 2006 14:08:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84510 invoked by uid 500); 29 Jun 2006 14:08:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84499 invoked by uid 99); 29 Jun 2006 14:08:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 07:08:00 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.191.87.124] (HELO web37811.mail.mud.yahoo.com) (209.191.87.124)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 07:07:58 -0700
Received: (qmail 45678 invoked by uid 60001); 29 Jun 2006 14:07:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.vn;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Rt6FpXaLXN0H0k8ALZoDgyxrzzLlckzWuq5XEKka5oscC/hDiDJJGKbXb8l4pTwZebBwVv0V7kmGGk6NX3+C4TFKospyU1RTld4pEyQX7XzRIgw53EhBEPV/owr+DZCw6PoWZ3f4RejOntO7Gl73EgHOoFZwCX0s8f28B/+bdK4=  ;
Message-ID: <20060629140737.45676.qmail@web37811.mail.mud.yahoo.com>
Received: from [193.49.172.146] by web37811.mail.mud.yahoo.com via HTTP; Thu, 29 Jun 2006 21:07:37 ICT
Date: Thu, 29 Jun 2006 21:07:37 +0700 (ICT)
From: Trung <ngay01032006@yahoo.com.vn>
Subject: Test collection for digital libraries with Lucene
To: java-user@lucene.apache.org
In-Reply-To: <op.tbwq6xiioftp72@lettmelk>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everybody,

I'm searching a test collection for an academic
digital library (with relevant/judgement file like
TREC collections). Requirement:  documents are
scientific articles, with full references. 

I've heard about collection of INEX with scientific
articles from IEEE journals. Are there another
collections?

Thank you in advance,
Trung.


	

	
		
________________________________________________________ 
HÃ£y ghÃ© qua trang chá»§ Yahoo! Viá»t Nam! 
http://vn.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 14:11:03 2006
Return-Path: <java-user-return-21674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38360 invoked from network); 29 Jun 2006 14:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 14:11:02 -0000
Received: (qmail 93229 invoked by uid 500); 29 Jun 2006 14:10:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93125 invoked by uid 500); 29 Jun 2006 14:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93112 invoked by uid 99); 29 Jun 2006 14:10:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 07:10:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 07:10:49 -0700
Received: from lettmelk [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id AB5B09F8; Thu, 29 Jun 2006 15:53:31 +0200
Date: Thu, 29 Jun 2006 16:10:22 +0200
To: java-user@lucene.apache.org
Subject: Re: How to Integrate the WordNet Synonym Index with my Index
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <1151589363.3671.30.camel@localhost.localdomain>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tbwuzkaaoftp72@lettmelk>
In-Reply-To: <1151589363.3671.30.camel@localhost.localdomain>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-2, 28.06.2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: Ddb5b0098000060ee.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No... Don't think thats the idea.

I think that u would make use of the wordnet index after a user have  
inputted a search. U take each term of the search, look up those terms in  
the wordnet index, then use the results you get to search your index for  
all those aggregated terms along with the users initial search.

Then you return the matches.

But, I may be wrong..

On Thu, 29 Jun 2006 15:56:03 +0200, Ramesh Salla  
<ramesh.salla@iptouch.com> wrote:

> Hi,
>
> seems like am awe struck.
>
> My Index is working fine.
>
> Now,  have got the WordNet synonym-index.
>
> How do I make use of this index to get synonym support search results.?
>
> Do I have to Merge these 2 indexes using the Merge class?  will that
> work?
>
> or
>
> Do I have to inject the field "word" values into my Index at the time of
> creating my index?
>
> or
>
> Is there a way of making use of the synonym-index directly at the time
> of searching?
>
> Please get back as soon as possible.
>
> Thanks in Advance.              Ramesh.S



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 14:23:06 2006
Return-Path: <java-user-return-21675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41932 invoked from network); 29 Jun 2006 14:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 14:23:05 -0000
Received: (qmail 21343 invoked by uid 500); 29 Jun 2006 14:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21319 invoked by uid 500); 29 Jun 2006 14:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21308 invoked by uid 99); 29 Jun 2006 14:22:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 07:22:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.12] (HELO smtpout08-04.prod.mesa1.secureserver.net) (64.202.165.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 07:22:57 -0700
Received: (qmail 9047 invoked from network); 29 Jun 2006 14:22:35 -0000
Received: from unknown (202.153.32.162)
  by smtpout08-04.prod.mesa1.secureserver.net (64.202.165.12) with ESMTP; 29 Jun 2006 14:22:35 -0000
Subject: Re: How to Integrate the WordNet Synonym Index with my Index
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: java-user@lucene.apache.org, aleksander.stensby@integrasco.no
In-Reply-To: <op.tbwuzkaaoftp72@lettmelk>
References: <1151589363.3671.30.camel@localhost.localdomain>
	 <op.tbwuzkaaoftp72@lettmelk>
Content-Type: multipart/alternative; boundary="=-NzitANHZvvQ3h7KFW/MP"
Organization: iptouch
Date: Thu, 29 Jun 2006 19:53:07 +0530
Message-Id: <1151590987.3671.33.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-NzitANHZvvQ3h7KFW/MP
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Yes, That is a good idea and thanks for the suggestion.

But isn't that painful?

Then the scoring really worries us. Hence, will have to prefer boosting
the original content?

Can find or suggest a better solution?

Thanks...   Ramesh.S



On Thu, 2006-06-29 at 16:10 +0200, Aleksander M. Stensby wrote:

> No... Don't think thats the idea.
> 
> I think that u would make use of the wordnet index after a user have  
> inputted a search. U take each term of the search, look up those terms in  
> the wordnet index, then use the results you get to search your index for  
> all those aggregated terms along with the users initial search.
> 
> Then you return the matches.
> 
> But, I may be wrong..
> 
> On Thu, 29 Jun 2006 15:56:03 +0200, Ramesh Salla  
> <ramesh.salla@iptouch.com> wrote:
> 
> > Hi,
> >
> > seems like am awe struck.
> >
> > My Index is working fine.
> >
> > Now,  have got the WordNet synonym-index.
> >
> > How do I make use of this index to get synonym support search results.?
> >
> > Do I have to Merge these 2 indexes using the Merge class?  will that
> > work?
> >
> > or
> >
> > Do I have to inject the field "word" values into my Index at the time of
> > creating my index?
> >
> > or
> >
> > Is there a way of making use of the synonym-index directly at the time
> > of searching?
> >
> > Please get back as soon as possible.
> >
> > Thanks in Advance.              Ramesh.S
> 
> 
> 

--=-NzitANHZvvQ3h7KFW/MP--


From java-user-return-21676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 14:30:24 2006
Return-Path: <java-user-return-21676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43485 invoked from network); 29 Jun 2006 14:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 14:30:24 -0000
Received: (qmail 35193 invoked by uid 500); 29 Jun 2006 14:30:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35166 invoked by uid 500); 29 Jun 2006 14:30:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35155 invoked by uid 99); 29 Jun 2006 14:30:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 07:30:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 07:30:15 -0700
Received: from lettmelk [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id AFE7037C; Thu, 29 Jun 2006 16:12:55 +0200
Date: Thu, 29 Jun 2006 16:29:46 +0200
To: java-user@lucene.apache.org
Subject: Re: How to Integrate the WordNet Synonym Index with my Index
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <1151589363.3671.30.camel@localhost.localdomain> <op.tbwuzkaaoftp72@lettmelk> <1151590987.3671.33.camel@localhost.localdomain>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tbwvvwjeoftp72@lettmelk>
In-Reply-To: <1151590987.3671.33.camel@localhost.localdomain>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-2, 28.06.2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: Ddfe7003b0000623e.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What about the scoring worries you?

I would say this is the best approach, and also the suggest approach over  
at the lucene wordnet page:
http://www.tropo.com/techno/java/lucene/wordnet.html

Of course, you could say that matches on the original search should return  
with a higher score. You could individually boost the original terms  
searched for.
That would in general be like searching for

"car^2 automobile bmw" ... or something like that.

But, as I said, i have not yet implemented wordnet myself, but that would  
be my initial ideas on an approach.

On Thu, 29 Jun 2006 16:23:07 +0200, Ramesh Salla  
<ramesh.salla@iptouch.com> wrote:

> Yes, That is a good idea and thanks for the suggestion.
>
> But isn't that painful?
>
> Then the scoring really worries us. Hence, will have to prefer boosting
> the original content?
>
> Can find or suggest a better solution?
>
> Thanks...   Ramesh.S
>
>
>
> On Thu, 2006-06-29 at 16:10 +0200, Aleksander M. Stensby wrote:
>
>> No... Don't think thats the idea.
>>
>> I think that u would make use of the wordnet index after a user have
>> inputted a search. U take each term of the search, look up those terms  
>> in
>> the wordnet index, then use the results you get to search your index for
>> all those aggregated terms along with the users initial search.
>>
>> Then you return the matches.
>>
>> But, I may be wrong..
>>
>> On Thu, 29 Jun 2006 15:56:03 +0200, Ramesh Salla
>> <ramesh.salla@iptouch.com> wrote:
>>
>> > Hi,
>> >
>> > seems like am awe struck.
>> >
>> > My Index is working fine.
>> >
>> > Now,  have got the WordNet synonym-index.
>> >
>> > How do I make use of this index to get synonym support search  
>> results.?
>> >
>> > Do I have to Merge these 2 indexes using the Merge class?  will that
>> > work?
>> >
>> > or
>> >
>> > Do I have to inject the field "word" values into my Index at the time  
>> of
>> > creating my index?
>> >
>> > or
>> >
>> > Is there a way of making use of the synonym-index directly at the time
>> > of searching?
>> >
>> > Please get back as soon as possible.
>> >
>> > Thanks in Advance.              Ramesh.S
>>
>>
>>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 15:31:37 2006
Return-Path: <java-user-return-21677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68435 invoked from network); 29 Jun 2006 15:31:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 15:31:37 -0000
Received: (qmail 54106 invoked by uid 500); 29 Jun 2006 15:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53754 invoked by uid 500); 29 Jun 2006 15:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53732 invoked by uid 99); 29 Jun 2006 15:31:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 08:31:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 08:31:27 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FvyTz-0003jw-Av
	for java-user@lucene.apache.org; Thu, 29 Jun 2006 08:31:07 -0700
Message-ID: <5104457.post@talk.nabble.com>
Date: Thu, 29 Jun 2006 08:06:40 -0700 (PDT)
From: "Clive." <clive.lancaster@bestwestern.co.uk>
To: java-user@lucene.apache.org
Subject: Lucene Dynamic http Web Page Search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1793_16381856.1151595067317"
X-Nabble-Sender: clive.lancaster@bestwestern.co.uk
X-Nabble-From: "Clive." <clive.lancaster@bestwestern.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1793_16381856.1151595067317
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi, 

I am working on adding a search feature to a web site that uses single
database driven aspx pages and would like to know if Lucene can search using
the http url address or database to index from. 
As current I can only see Lucene being able to search physical files in a
windows folder.

Any ideas?

-- 
View this message in context: http://www.nabble.com/Lucene-Dynamic-http-Web-Page-Search-tf1867987.html#a5104457
Sent from the Lucene - Java Users forum at Nabble.com.

------=_Part_1793_16381856.1151595067317--


From java-user-return-21678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 15:33:13 2006
Return-Path: <java-user-return-21678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69133 invoked from network); 29 Jun 2006 15:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 15:33:12 -0000
Received: (qmail 59341 invoked by uid 500); 29 Jun 2006 15:33:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59320 invoked by uid 500); 29 Jun 2006 15:33:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59308 invoked by uid 99); 29 Jun 2006 15:33:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 08:33:06 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.106] (HELO web34108.mail.mud.yahoo.com) (66.163.178.106)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 08:33:05 -0700
Received: (qmail 57878 invoked by uid 60001); 29 Jun 2006 15:32:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=eIhT/FXdkbxGV3rdG5SlhaD+fwqQs3WAEqujSqtp6zmQuTrH+66MFTT01Ki7PcDWL8X0zJiEFbVjtu/cJiWPan82uihBmd1w9UyoTlhkC48q7bEfcI6iIUe1e+N/TrXahJoc06njE5KjrmEVm40O8lbXQXOuTzJ1gIvL7XsyTng=  ;
Message-ID: <20060629153244.57876.qmail@web34108.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34108.mail.mud.yahoo.com via HTTP; Thu, 29 Jun 2006 08:32:44 PDT
Date: Thu, 29 Jun 2006 08:32:44 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: Re: Searching is taking a lot...
To: java-user@lucene.apache.org
In-Reply-To: <a36516400606290019s2919686ra3b8d0dfcfe584af@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey,

I'm not a performance guru, but it seems to me that if
you've got millions of results coming back then you
probably don't want to call ArrayList.add() each time,
as it will have to grow itself a bunch of times. Also,
even ints take up space in memory, so if you only need
20 of them, then storing millions is pretty wasteful.
As Paul suggested, using an int[] would be better, and
pretty easy since you know the size it needs to be in
advance i.e. resultsPerPage. If you're worried about
the conditional taking up cpu cycles you could use the
ternay operator which I believe is slightly more
efficient.

JAMES

--- "heritrix.lucene" <heritrix.lucene@gmail.com>
wrote:

> This will break performance. It is better to first
> collect all the document
> > numbers (code without the proper declarations):
> >
> > public void collect(int id, float score) {
> >      if(docCount >= startDoc && docCount < endDoc)
> {
> >          docNrs.add(id); // or use int[] docNrs
> when possible.
> >   ....
> 
> 
> Why
> public void collect(int id, float score) {
>      if(docCount >= startDoc && docCount < endDoc) {
> is requiered.
> 
> i think the bertter thing is
> public void collect(int id, float score) {
>     docNrs.add(id); // or use int[] docNrs when
> possible.
> because anyhow the collect metod will be called
> total number of matched
> documents times.
> why should we introfuce one more condition....
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 17:20:01 2006
Return-Path: <java-user-return-21679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4972 invoked from network); 29 Jun 2006 17:20:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 17:20:01 -0000
Received: (qmail 56732 invoked by uid 500); 29 Jun 2006 17:19:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56699 invoked by uid 500); 29 Jun 2006 17:19:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56687 invoked by uid 99); 29 Jun 2006 17:19:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:19:53 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE,PLING_PLING
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.226] (HELO web30213.mail.mud.yahoo.com) (68.142.201.226)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 10:19:53 -0700
Received: (qmail 73307 invoked by uid 60001); 29 Jun 2006 17:18:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=EwoDdRE1Mi5OEoYoj68V9EZuKYaL++EqLilj9j7OVsf0kf66BmxZelXnJbNJrpVCmKzaWdwA36TpEc3FOqMn9C3f0jZ72nS5uuVRAd2K0ekvJPxxzDRUZw9QxB/Uv8DUSZTASN8LOGk3LrSKc4yfdowZdA0V3qE4R79tEpQ3vII=  ;
Message-ID: <20060629171811.73305.qmail@web30213.mail.mud.yahoo.com>
Received: from [198.241.156.7] by web30213.mail.mud.yahoo.com via HTTP; Thu, 29 Jun 2006 10:18:11 PDT
Date: Thu, 29 Jun 2006 10:18:11 -0700 (PDT)
From: "arun sharma\(rinku\)" <arunadc@yahoo.com>
Subject: Carrot 2 with lucene prototype!!!
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-972922640-1151601491=:70201"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-972922640-1151601491=:70201
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello gentlemen,
   
  I am novice to lucene and carrot 2 but I have urgent requirement for building a prototype using lucene and carrot2. Please help me with working web application demo along with code.
   
  Thanks 
   
  Arun

 			
---------------------------------
Sneak preview the  all-new Yahoo.com. It's not radically different. Just radically better. 
--0-972922640-1151601491=:70201--

From java-user-return-21680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 17:30:12 2006
Return-Path: <java-user-return-21680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9597 invoked from network); 29 Jun 2006 17:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 17:30:12 -0000
Received: (qmail 87371 invoked by uid 500); 29 Jun 2006 17:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87266 invoked by uid 500); 29 Jun 2006 17:30:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87255 invoked by uid 99); 29 Jun 2006 17:30:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:30:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dominik@dbruhn.de designates 213.239.217.207 as permitted sender)
Received: from [213.239.217.207] (HELO flacons.org) (213.239.217.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 10:30:04 -0700
Received: from localhost (localhost [127.0.0.1])
	by flacons.org (flacons.org) with ESMTP id C8A4A36803F
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 19:29:42 +0200 (CEST)
Received: from flacons.org ([127.0.0.1])
	by localhost (debian [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 05704-02 for <java-user@lucene.apache.org>;
	Thu, 29 Jun 2006 19:29:33 +0200 (CEST)
Received: from localhost (dslb-084-057-177-090.pools.arcor-ip.net [84.57.177.90])
	by flacons.org (flacons.org) with ESMTP id AC3D136802A
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 19:29:32 +0200 (CEST)
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Limiting Result-Count
Date: Thu, 29 Jun 2006 19:29:31 +0200
User-Agent: KMail/1.9.3
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606291929.31267.dominik@dbruhn.de>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at flacons.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy,
how can I limit the result-count of a query in order to save time? I searched 
the web but didn't find a solution.

Thanks
Dominik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 18:01:18 2006
Return-Path: <java-user-return-21681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18404 invoked from network); 29 Jun 2006 18:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 18:01:17 -0000
Received: (qmail 73270 invoked by uid 500); 29 Jun 2006 18:01:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73239 invoked by uid 500); 29 Jun 2006 18:01:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73228 invoked by uid 99); 29 Jun 2006 18:01:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 11:01:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 11:01:09 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T792dc9d4be88ad3ee4500@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Thu, 29 Jun 2006 20:00:44 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69BA5.F1751754"
Subject: Lock File
Date: Thu, 29 Jun 2006 20:00:44 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A429A67C5@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lock File
Thread-Index: AcabpfEAJGo4sxI/SXqwLtmIwtMUjA==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69BA5.F1751754
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

V2hlbiBJIGNyZWF0ZSBhbiBpbmRleCB3aXRoZSB0aGUgY2xhc3MgSW5kZXhNb2RpZmllciBpbiBM
dWNlbmUgMS45LjF0aGVyZSBpcyBhIGxvY2sgZmlsZSBjcmVhdGVkIG9uIGEgdGVtcCBmb2xkZXIu
DQpNeSBxdWVzdGlvbiBpczogSXMgaXQgcG9zc2libGUgdG8gZGlzYWJsZSB0aGlzIG9wdGlvbj8N
CklmIHllcyBob3cgdG8gcHJvY2VkZT8NCg==

------_=_NextPart_001_01C69BA5.F1751754--

From java-user-return-21682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 19:21:52 2006
Return-Path: <java-user-return-21682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47348 invoked from network); 29 Jun 2006 19:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 19:21:52 -0000
Received: (qmail 22278 invoked by uid 500); 29 Jun 2006 19:21:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22251 invoked by uid 500); 29 Jun 2006 19:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22240 invoked by uid 99); 29 Jun 2006 19:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 12:21:45 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of joe.kim@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 12:21:45 -0700
Received: by ug-out-1314.google.com with SMTP id u2so496502uge
        for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 12:21:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YjaqLawW5ojNPqx8NX+pb5eMKHcSjtaADkVFmrr98/HTxNHKDN3jsm6riMhloOb9cwSGslT/Q9ec+SiCduIZ/rFlWW4BlFdsCNXg8OX5ofbLg82LtbJvWryAqvQE6vVy0/RFKE9EaE7vER7pJb0FsKHyWW/ysHX1RNc+0b/6uXs=
Received: by 10.78.157.15 with SMTP id f15mr1176665hue;
        Thu, 29 Jun 2006 12:21:23 -0700 (PDT)
Received: by 10.78.20.7 with HTTP; Thu, 29 Jun 2006 12:21:23 -0700 (PDT)
Message-ID: <35379c520606291221j6f1c0341nb69726caac5da262@mail.gmail.com>
Date: Thu, 29 Jun 2006 12:21:23 -0700
From: "joe kim" <joe.kim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Dynamic http Web Page Search
In-Reply-To: <5104457.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5104457.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Clive,

Lucene is a general purpose search engine.  If you need crawling
capabilities on top of Lucene take a look at Nutch:

http://lucene.apache.org/nutch/

On 6/29/06, Clive. <clive.lancaster@bestwestern.co.uk> wrote:
>
> Hi,
>
> I am working on adding a search feature to a web site that uses single
> database driven aspx pages and would like to know if Lucene can search using
> the http url address or database to index from.
> As current I can only see Lucene being able to search physical files in a
> windows folder.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 20:03:15 2006
Return-Path: <java-user-return-21683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57045 invoked from network); 29 Jun 2006 20:03:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 20:03:15 -0000
Received: (qmail 72472 invoked by uid 500); 29 Jun 2006 20:03:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72441 invoked by uid 500); 29 Jun 2006 20:03:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72430 invoked by uid 99); 29 Jun 2006 20:03:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 13:03:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [217.146.188.17] (HELO web86211.mail.ird.yahoo.com) (217.146.188.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 13:03:07 -0700
Received: (qmail 36376 invoked by uid 60001); 29 Jun 2006 20:02:43 -0000
Message-ID: <20060629200243.36374.qmail@web86211.mail.ird.yahoo.com>
Received: from [193.63.235.72] by web86211.mail.ird.yahoo.com via HTTP; Thu, 29 Jun 2006 20:02:43 GMT
Date: Thu, 29 Jun 2006 20:02:43 +0000 (GMT)
From: MALCOLM CLARK <malcyclark@btinternet.com>
Reply-To: MALCOLM CLARK <malcyclark@btinternet.com>
Subject: Re: HTML text extraction
To: java-user@lucene.apache.org
In-Reply-To: <002101c69657$36020120$6500a8c0@lymobile>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-962792171-1151611363=:55199"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-962792171-1151611363=:55199
Content-Type: text/plain; charset=us-ascii

Hi,
Would you please send me your parser too?
Thanks!
Malcolm


----- Original Message ----
From: Liao Xuefeng <askxuefeng@gmail.com>
To: java-user@lucene.apache.org
Sent: Friday, June 23, 2006 12:54:29 AM
Subject: RE: HTML text extraction


hi, all,
  I wrote my own html parser because it just meets my require and do not
depend on 3rd part's lib. and i'd like to share it (in attachment).

  This class provides some static methods to do html <-> text convertion:

  HtmlUtil.html2text(String html);
  HtmlUtil.text2html(String text);

and 
  HtmlUtil.removeScriptTags(String html);
can remove script and activex tags in html, this is use to check user's blog
post before writing into database.

Best regards,
  Xuefeng

http://www.crackj2ee.com

-----Original Message-----
From: Michael Wechner [mailto:michael.wechner@wyona.com] 
Sent: Thursday, June 22, 2006 11:30 PM
To: java-user@lucene.apache.org
Subject: Re: HTML text extraction

John Wang wrote:
> Hi Xuefeng:
>
>     Can you please send me your htmlparser too?

Xuefeng, would it be possible to open source your parser?

Thanks

Michi
>
> thanks
>
> -John
>
> On 6/21/06, Daniel Noll <daniel@nuix.com.au> wrote:
>>
>> Simon Courtenage wrote:
>> > I also use htmlparser, which is rather good.  I've had to customize
>> it,
>> > though, to parse strings containing html source rather than accept 
>> > urls of resources to fetch etc.
>> Also it
>> > crashes on meta tags that don't have name attributes (something I 
>> > discovered only a couple of days ago).
>>
>> Actually, it already accepts strings without modifying the library:
>>
>>     String htmlSource = "<html>...</html>";
>>     Parser parser = new Parser(new Lexer(htmlSource));
>>
>> I will have to watch out for those meta tags though.  Time to go test 
>> it.
>>
>> Daniel
>>
>>
>> --
>> Daniel Noll
>>
>> Nuix Pty Ltd
>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
>> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>>
>> This message is intended only for the named recipient. If you are not 
>> the intended recipient you are notified that disclosing, copying, 
>> distributing or taking any action in reliance on the contents of this 
>> message or attachment is strictly prohibited.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


--
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-962792171-1151611363=:55199--

From java-user-return-21684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 20:26:30 2006
Return-Path: <java-user-return-21684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61992 invoked from network); 29 Jun 2006 20:26:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 20:26:30 -0000
Received: (qmail 91593 invoked by uid 500); 29 Jun 2006 20:26:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91559 invoked by uid 500); 29 Jun 2006 20:26:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91548 invoked by uid 99); 29 Jun 2006 20:26:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 13:26:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 13:26:23 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 4BF7FD8AD4B
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 16:26:01 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Thu, 29 Jun 2006 16:26:02 -0400
X-Sasl-enc: 3yrke9JYI3JLhO7DY4r2d3+tvBL6m5GXr9d/qhPpiM4C 1151612761
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 73260CE25
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 16:26:01 -0400 (EDT)
Message-ID: <44A43757.1070200@mikemccandless.com>
Date: Thu, 29 Jun 2006 16:25:59 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock File
References: <AD97D5F23B201C448EAB13B4F6DA6A429A67C5@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A429A67C5@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


 > When I create an index withe the class IndexModifier in Lucene 
1.9.1there is a lock file created on a temp folder.
 > My question is: Is it possible to disable this option?
 > If yes how to procede?

Yes, there is.

You can call the static FSDirectory.setDisabledLocks() to disable 
locking entirely.  But you need to be certain this is safe for your 
application.  Lucene uses this lock to ensure the index does not become 
corrupt when IndexReaders and IndexWriters are working on the same index.

Or, if you want to change which directory the lock file is stored in you 
can set this Java property:

    org.apache.lucene.lockDir

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 21:13:28 2006
Return-Path: <java-user-return-21685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74258 invoked from network); 29 Jun 2006 21:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 21:13:27 -0000
Received: (qmail 57240 invoked by uid 500); 29 Jun 2006 21:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57208 invoked by uid 500); 29 Jun 2006 21:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57197 invoked by uid 99); 29 Jun 2006 21:13:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:13:21 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 14:13:19 -0700
Received: (qmail 49580 invoked by uid 60001); 29 Jun 2006 21:12:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=CKK68x1ZzByGRy4KFkya8cq73daU3JwyHmAJrfPfPi0uHccgT5fGyxpJnohs7FKbHmrjuyEzuoqDiQX6J6fIzqKu35plIDQLiVn8Ely0tOJOLISOs/fsw6w61zXsz/9x9abnVNcYd/r73m7y/dFblP1ddeBNHXVBcXXqpfFmgPY=  ;
Message-ID: <20060629211258.49578.qmail@web50310.mail.yahoo.com>
Received: from [72.229.167.99] by web50310.mail.yahoo.com via HTTP; Thu, 29 Jun 2006 14:12:58 PDT
Date: Thu, 29 Jun 2006 14:12:58 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Limiting Result-Count
To: java-user@lucene.apache.org
In-Reply-To: <200606291929.31267.dominik@dbruhn.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Try using HitCollector and break out of it when you collect enough documents.  My guess is that if you are not doing anything crazy with Hits (like looping through the all) this won't be that much faster than using Hits.

Otis

----- Original Message ----
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Sent: Thursday, June 29, 2006 1:29:31 PM
Subject: Limiting Result-Count

Hy,
how can I limit the result-count of a query in order to save time? I searched 
the web but didn't find a solution.

Thanks
Dominik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 21:25:45 2006
Return-Path: <java-user-return-21686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76427 invoked from network); 29 Jun 2006 21:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 21:25:45 -0000
Received: (qmail 73488 invoked by uid 500); 29 Jun 2006 21:25:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73467 invoked by uid 500); 29 Jun 2006 21:25:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73456 invoked by uid 99); 29 Jun 2006 21:25:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:25:39 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of joe.kim@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:25:39 -0700
Received: by ug-out-1314.google.com with SMTP id u2so555758uge
        for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 14:25:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kzEhxOdV1mPcQY89n0LXEokCOru05OxL/IW6uybuizu13u9HU9grrnHW9iARwRzbdPf6s4khSByvkKkPjPX5IjnHg/2IGwC59MDweQ7xbitTdoQpEb2c/pKG96ek7Etd3X48YeI78zs4qYApd5ly57eX4dMMj9PgaltbccfF1Bk=
Received: by 10.78.185.7 with SMTP id i7mr1335958huf;
        Thu, 29 Jun 2006 14:25:17 -0700 (PDT)
Received: by 10.78.20.7 with HTTP; Thu, 29 Jun 2006 14:25:17 -0700 (PDT)
Message-ID: <35379c520606291425j425ab65bncc34be0ae2b3a6d6@mail.gmail.com>
Date: Thu, 29 Jun 2006 14:25:17 -0700
From: "joe kim" <joe.kim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lock File
In-Reply-To: <44A43757.1070200@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <AD97D5F23B201C448EAB13B4F6DA6A429A67C5@EPLUXSEX01.ep.parl.union.eu>
	 <44A43757.1070200@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>Lucene uses this lock to ensure the index does not become
> corrupt when IndexReaders and IndexWriters are working on the same index.

What are the conditions that cause corruption?  If there is just one
writer and multiple readers, is that safe?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 21:32:52 2006
Return-Path: <java-user-return-21687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78699 invoked from network); 29 Jun 2006 21:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 21:32:52 -0000
Received: (qmail 91057 invoked by uid 500); 29 Jun 2006 21:32:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91021 invoked by uid 500); 29 Jun 2006 21:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91010 invoked by uid 99); 29 Jun 2006 21:32:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:32:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:32:45 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k5TLWdH29924
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 16:32:39 -0500
Message-ID: <44A446F5.8000505@getopt.org>
Date: Thu, 29 Jun 2006 23:32:37 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Limiting Result-Count
References: <20060629211258.49578.qmail@web50310.mail.yahoo.com>
In-Reply-To: <20060629211258.49578.qmail@web50310.mail.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:
> Try using HitCollector and break out of it when you collect enough documents.  My guess is that if you are not doing anything crazy with Hits (like looping through the all) this won't be that much faster than using Hits.
>   

Well, in practice it does help - see the way this is done in Nutch 
(src/java/org/apache/nutch/searcher/LuceneQueryOptimizer$LimitedCollector). 
Performance-wise, with large indexes this makes a big difference.

The problem that you need to address, though, is how usable are partial 
results, i.e. if you are reasonably sure that by collecting only partial 
results you are not missing important hits, which would have been found 
had you let the search collect all results ... This facility in Nutch is 
used only if posting lists are sorted by decreasing document importance 
(see IndexSorter for details), so that we collect first the most highly 
ranking hits, and skip low ranking ones.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 21:46:06 2006
Return-Path: <java-user-return-21688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83153 invoked from network); 29 Jun 2006 21:46:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 21:46:06 -0000
Received: (qmail 14561 invoked by uid 500); 29 Jun 2006 21:46:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14532 invoked by uid 500); 29 Jun 2006 21:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14521 invoked by uid 99); 29 Jun 2006 21:45:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:45:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:45:59 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 941AAD8A340
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 17:45:36 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Thu, 29 Jun 2006 17:45:37 -0400
X-Sasl-enc: r/uMO7gmgwr7TossOVSWT+lBMx3r9n1yv3sshfwqsE7x 1151617537
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 613C7130A
	for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 17:45:37 -0400 (EDT)
Message-ID: <44A449FF.2010903@mikemccandless.com>
Date: Thu, 29 Jun 2006 17:45:35 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock File
References: <AD97D5F23B201C448EAB13B4F6DA6A429A67C5@EPLUXSEX01.ep.parl.union.eu>	 <44A43757.1070200@mikemccandless.com> <35379c520606291425j425ab65bncc34be0ae2b3a6d6@mail.gmail.com>
In-Reply-To: <35379c520606291425j425ab65bncc34be0ae2b3a6d6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> What are the conditions that cause corruption?  If there is just one
> writer and multiple readers, is that safe?

The cases are well spelled out in Lucene in Action, section 2.9.

Generally, one writer and multiple readers is not safe for disabling 
locking.

For example, the IndexReader, when it is first instantiated, needs to 
read segment data structures from the index.  If an IndexWriter happens 
to be committing at the same time, this will cause corruption.  Also, if 
an IndexReader is doing deletes, an IndexWriter is adding new docs, that 
could also cause corruption (if you turn off locking).

Unless you have your own locking layer over Lucene it's generally 
dangerous to turn off its default  locking.

Also: you should generally try to have a single IndexReader (and 
IndexSearcher using it) that's shared across all "things" that need to 
run searches.

One question: why do you want / need to disable Lucene's default 
locking?  I'm trying to work through refactoring how Lucene does locking 
(see LUCENE-305 in Jira) so details on your use case can help guide 
these fixes.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 21:52:09 2006
Return-Path: <java-user-return-21689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84570 invoked from network); 29 Jun 2006 21:52:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 21:52:09 -0000
Received: (qmail 25535 invoked by uid 500); 29 Jun 2006 21:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25501 invoked by uid 500); 29 Jun 2006 21:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25490 invoked by uid 99); 29 Jun 2006 21:52:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:52:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 14:52:02 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Fw4QH-00065X-I2
	for java-user@lucene.apache.org; Thu, 29 Jun 2006 14:51:41 -0700
Message-ID: <5111083.post@talk.nabble.com>
Date: Thu, 29 Jun 2006 14:51:41 -0700 (PDT)
From: "Clive." <clive.lancaster@bestwestern.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Lucene Dynamic http Web Page Search
In-Reply-To: <35379c520606291221j6f1c0341nb69726caac5da262@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: clive.lancaster@bestwestern.co.uk
X-Nabble-From: "Clive." <clive.lancaster@bestwestern.co.uk>
References: <5104457.post@talk.nabble.com> <35379c520606291221j6f1c0341nb69726caac5da262@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Thanks' for the promped reply I will look for something similar for the dot
net version, I posted in this group as it is more active.
-- 
View this message in context: http://www.nabble.com/Lucene-Dynamic-http-Web-Page-Search-tf1867987.html#a5111083
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 22:54:02 2006
Return-Path: <java-user-return-21690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95276 invoked from network); 29 Jun 2006 22:54:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 22:54:01 -0000
Received: (qmail 94815 invoked by uid 500); 29 Jun 2006 22:53:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94790 invoked by uid 500); 29 Jun 2006 22:53:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94779 invoked by uid 99); 29 Jun 2006 22:53:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 15:53:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.111.224.171] (HELO empburmail20.Burlington.Emptoris.com) (63.111.224.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 15:53:55 -0700
Received: from empburmail.Burlington.Emptoris.com ([10.10.50.14]) by empburmail20.Burlington.Emptoris.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 29 Jun 2006 18:53:33 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lock File
Date: Thu, 29 Jun 2006 18:53:32 -0400
Message-ID: <9F47FE95F43B1D41B9063D0271B2D7FF012E4508@empburmail.Burlington.Emptoris.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lock File
Thread-Index: AcabxWqiTg80nJxeQgSDgEzpE8qT6gACSzyw
From: "Wang, Jeff" <jwang@emptoris.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Jun 2006 22:53:33.0775 (UTC) FILETIME=[D94A95F0:01C69BCE]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a clustered environment, with a load-balancer in the front
assigning connections.  Is it better to have one of the cluster running
a searcher as a webservice (to be accessed by the other machines in the
cluster) or to have a IndexReader/Searcher for each machine in the
cluster?

Jeff

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Thursday, June 29, 2006 2:46 PM
To: java-user@lucene.apache.org
Subject: Re: Lock File

Also: you should generally try to have a single IndexReader (and=20
IndexSearcher using it) that's shared across all "things" that need to=20
run searches.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 29 23:54:20 2006
Return-Path: <java-user-return-21691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7302 invoked from network); 29 Jun 2006 23:54:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2006 23:54:20 -0000
Received: (qmail 58878 invoked by uid 500); 29 Jun 2006 23:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58585 invoked by uid 500); 29 Jun 2006 23:54:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58574 invoked by uid 99); 29 Jun 2006 23:54:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 16:54:14 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.103] (HELO web34105.mail.mud.yahoo.com) (66.163.178.103)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 16:54:13 -0700
Received: (qmail 11622 invoked by uid 60001); 29 Jun 2006 23:53:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=j8mO2gLtkJWlC3OopuaLeoI0BrF/bmKJjXRpN8fNF4vFeKNoqq92AJaRGPwKDXQg/NK4NUwSReV9H9G4463aW1Ji/z6NXG4Q+kA1Bgjw82krVCC/aovUmUetH4V6qvmLoHB4Eg7ONw2D8jG3aRRqiW4KIbVHVuGDV/W7KbMsyX4=  ;
Message-ID: <20060629235351.11620.qmail@web34105.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34105.mail.mud.yahoo.com via HTTP; Thu, 29 Jun 2006 16:53:51 PDT
Date: Thu, 29 Jun 2006 16:53:51 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: HitCollector and Sort Objects
To: java-user@lucene.apache.org
In-Reply-To: <44A446F5.8000505@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey,

I've looked at the documentation for:

org.apache.lucene.search.Searchable
org.apache.lucene.search.Searcher
org.apache.lucene.search.IndexSearcher

and it struck me that there are no search methods with
these signatures:

void search(Query query, Filter filter, HitCollector
results, Sort sort)

void search(Query query, HitCollector results, Sort
sort)

I have one type of search where I pass in a Query and
a Sort (built with a SortField and Decompresses) and
deal with the Hits object, and another which takes a
Query and a HitCollector, which I then run my own
sorting on the results.

I'd like to combine both into one call so that I can
get the results sorted and have the collected data
available. Is that crazy talk? Does the way document
ids stream through the HitCollector prevent sorting
them first?

Would it be best for me to convert my Decompresses
logic into a Comparator to pass into Arrays.sort() or
something like that and just forget about using the
built in Lucene functionality?

I currently use the HitCollector to count occurrences
of words in the result set, basically trying compute
the TermFrequencies in the result of a search vs.
across the entire index. I've tried using bitsets but
because I can't constrain the number of unique words
people use (currently in the millions in our data),
and the number of document (also currently in the
millions), keeping a cache of bitsets is not feasible
on our hardware (I can save about 10,000 but the cache
hit ratio is very low). If someone thinks my use of
HitCollector is flawed, I'm certainly open to
suggestions. Thanx.

JAMES


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 02:18:22 2006
Return-Path: <java-user-return-21692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40876 invoked from network); 30 Jun 2006 02:18:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 02:18:22 -0000
Received: (qmail 6316 invoked by uid 500); 30 Jun 2006 02:18:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6288 invoked by uid 500); 30 Jun 2006 02:18:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6275 invoked by uid 99); 30 Jun 2006 02:18:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 19:18:16 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,URI_NO_WWW_ANY_CGI
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.165.103.64] (HELO web15007.mail.cnb.yahoo.com) (202.165.103.64)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 19:18:13 -0700
Received: (qmail 54158 invoked by uid 60001); 30 Jun 2006 02:17:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=uCDkneMV2EN+iUqMy3B6dhhul9GlgNy7FptLTHx2uLnL6q7pW+Pe9L0XnaYFmGAvwHg0yIy1jz/Vnl+67MNDMgKixkzAfxsrK4vFlMzcFeSHXAyasCdmwH1j7XL6wZQnbkmw7rMb5pYI/R6e1jwJ47jGBBZUD9rCM6yktNCS+u8=  ;
Message-ID: <20060630021750.54156.qmail@web15007.mail.cnb.yahoo.com>
Received: from [219.238.185.157] by web15007.mail.cnb.yahoo.com via HTTP; Fri, 30 Jun 2006 10:17:50 CST
Date: Fri, 30 Jun 2006 10:17:50 +0800 (CST)
From: =?gb2312?q?=CC=EF=B4=BA=B7=E5?= <tcf960@yahoo.com.cn>
Reply-To: tcf960@yahoo.com.cn
Subject: =?gb2312?q?=BB=D8=B8=B4=A3=BA=20RE:=20HTML=20text=20extraction?=
To: java-user@lucene.apache.org
In-Reply-To: <002101c69657$36020120$6500a8c0@lymobile>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-336878028-1151633870=:53833"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-336878028-1151633870=:53833
Content-Type: text/plain; charset=gb2312
Content-Transfer-Encoding: 8bit

hi
 
your attachement is empty, have no java source code in it.

Liao Xuefeng <askxuefeng@gmail.com> Ð´µÀ£º  hi, all,
  I wrote my own html parser because it just meets my require and do not
depend on 3rd part's lib. and i'd like to share it (in attachment).

  This class provides some static methods to do html <-> text convertion:

  HtmlUtil.html2text(String html);
  HtmlUtil.text2html(String text);

and 
  HtmlUtil.removeScriptTags(String html);
can remove script and activex tags in html, this is use to check user's blog
post before writing into database.

Best regards,
  Xuefeng

http://www.crackj2ee.com

-----Original Message-----
From: Michael Wechner [mailto:michael.wechner@wyona.com] 
Sent: Thursday, June 22, 2006 11:30 PM
To: java-user@lucene.apache.org
Subject: Re: HTML text extraction

John Wang wrote:
> Hi Xuefeng:
>
>     Can you please send me your htmlparser too?

Xuefeng, would it be possible to open source your parser?

Thanks

Michi
>
> thanks
>
> -John
>
> On 6/21/06, Daniel Noll  wrote:
>>
>> Simon Courtenage wrote:
>> > I also use htmlparser, which is rather good.  I've had to customize
>> it,
>> > though, to parse strings containing html source rather than accept 
>> > urls of resources to fetch etc.
>> Also it
>> > crashes on meta tags that don't have name attributes (something I 
>> > discovered only a couple of days ago).
>>
>> Actually, it already accepts strings without modifying the library:
>>
>>     String htmlSource = "...";
>>     Parser parser = new Parser(new Lexer(htmlSource));
>>
>> I will have to watch out for those meta tags though.  Time to go test 
>> it.
>>
>> Daniel
>>
>>
>> --
>> Daniel Noll
>>
>> Nuix Pty Ltd
>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
>> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>>
>> This message is intended only for the named recipient. If you are not 
>> the intended recipient you are notified that disclosing, copying, 
>> distributing or taking any action in reliance on the contents of this 
>> message or attachment is strictly prohibited.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


--
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



×Ô¶¯Ç©Ãû£º
ÇëÊ¹ÓÃ»úÆ÷ÈË·þÎñ:
msn»úÆ÷ÈË: xiaodingdong21@hotmail.com
qq»úÆ÷ÈË: 443803193
blog: http://blog.csdn.net/accesine960
¶àÃ´ÀÖÖ÷Ò³£ºhomepage: http://www.domolo.com
 









 		
---------------------------------
 Mp3·è¿ñËÑ-ÐÂ¸èÈÈ¸è¸ßËÙÏÂ   
--0-336878028-1151633870=:53833--

From java-user-return-21693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 03:06:21 2006
Return-Path: <java-user-return-21693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50257 invoked from network); 30 Jun 2006 03:06:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 03:06:20 -0000
Received: (qmail 44507 invoked by uid 500); 30 Jun 2006 03:06:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44481 invoked by uid 500); 30 Jun 2006 03:06:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44470 invoked by uid 99); 30 Jun 2006 03:06:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 20:06:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 20:06:14 -0700
Received: by py-out-1112.google.com with SMTP id f25so573702pyf
        for <java-user@lucene.apache.org>; Thu, 29 Jun 2006 20:05:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r7kYnWNNS0VrlK7IgamKNY8WDXRY0CUMwSftvJ/sPYVFco2CEGvOZUX9hkfWi+PyeUNAiZtnfoaNDu/PmzSRto1AWvPtEk0eVIxO1JsW6474Q1swllsn+FWbA4fvxM9s+xeHGc84U/AG5C2zaVOZuT74PN/ZrVcUeC0l9oGDisI=
Received: by 10.35.82.15 with SMTP id j15mr183217pyl;
        Thu, 29 Jun 2006 20:05:53 -0700 (PDT)
Received: by 10.35.62.17 with HTTP; Thu, 29 Jun 2006 20:05:53 -0700 (PDT)
Message-ID: <a36516400606292005v6942c860u4a698b412cb3fcc3@mail.gmail.com>
Date: Fri, 30 Jun 2006 08:35:53 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching is taking a lot...
In-Reply-To: <20060629153244.57876.qmail@web34108.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23070_6703970.1151636753509"
References: <a36516400606290019s2919686ra3b8d0dfcfe584af@mail.gmail.com>
	 <20060629153244.57876.qmail@web34108.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_23070_6703970.1151636753509
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ya you are correct. My idea will not work when there are lots of documents
in the index and also there are lots of hits for that page.
I am going with you.... :-)

Thanx...

On 6/29/06, James Pine <general_nogi@yahoo.com> wrote:
>
> Hey,
>
> I'm not a performance guru, but it seems to me that if
> you've got millions of results coming back then you
> probably don't want to call ArrayList.add() each time,
> as it will have to grow itself a bunch of times. Also,
> even ints take up space in memory, so if you only need
> 20 of them, then storing millions is pretty wasteful.
> As Paul suggested, using an int[] would be better, and
> pretty easy since you know the size it needs to be in
> advance i.e. resultsPerPage. If you're worried about
> the conditional taking up cpu cycles you could use the
> ternay operator which I believe is slightly more
> efficient.
>
> JAMES
>
> --- "heritrix.lucene" <heritrix.lucene@gmail.com>
> wrote:
>
> > This will break performance. It is better to first
> > collect all the document
> > > numbers (code without the proper declarations):
> > >
> > > public void collect(int id, float score) {
> > >      if(docCount >= startDoc && docCount < endDoc)
> > {
> > >          docNrs.add(id); // or use int[] docNrs
> > when possible.
> > >   ....
> >
> >
> > Why
> > public void collect(int id, float score) {
> >      if(docCount >= startDoc && docCount < endDoc) {
> > is requiered.
> >
> > i think the bertter thing is
> > public void collect(int id, float score) {
> >     docNrs.add(id); // or use int[] docNrs when
> > possible.
> > because anyhow the collect metod will be called
> > total number of matched
> > documents times.
> > why should we introfuce one more condition....
> >
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23070_6703970.1151636753509--

From java-user-return-21694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 05:47:03 2006
Return-Path: <java-user-return-21694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75312 invoked from network); 30 Jun 2006 05:47:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 05:47:02 -0000
Received: (qmail 69588 invoked by uid 500); 30 Jun 2006 05:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69547 invoked by uid 500); 30 Jun 2006 05:46:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69535 invoked by uid 99); 30 Jun 2006 05:46:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jun 2006 22:46:57 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jun 2006 22:46:55 -0700
Received: (qmail 75203 invoked by uid 60001); 30 Jun 2006 05:46:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=iz9OTQZAltGzhBGlppSERflP8FbNCtLnYXUai1eKhE4ekPkQHp8u0YLp/ONZ8dr+zUeHsftHyz72AyLi5JJpIe1e+utTs7gQE/88Xftixh3lDVNdOaHpv3vTW0+K62eKW5b0mGJRxdZZp3lae/4WvLOfmkNOHKCpePF6X2BLN6M=  ;
Message-ID: <20060630054634.75201.qmail@web50313.mail.yahoo.com>
Received: from [72.229.167.99] by web50313.mail.yahoo.com via HTTP; Thu, 29 Jun 2006 22:46:34 PDT
Date: Thu, 29 Jun 2006 22:46:34 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene and maven2
To: java-user@lucene.apache.org
In-Reply-To: <836E7946-6AC0-4958-BF6F-FF1F3918BF51@real.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I put a new Jar there.  Plese send email if things still don't work with Maven.

-bash-2.05b$ ls -al
total 434
drwxrwxr-x  2 martinc  apcvs     512 Jun 29 22:43 .
drwxrwxr-x  4 martinc  apcvs     512 Jun 11 09:01 ..
-rw-rw-r--  1 martinc  apcvs    2336 Jun 11 09:01 lucene-core-2.0.0.jar
-rw-r--r--  1 otis     apcvs  403597 May 26 10:01 lucene-core-2.0.0.jar.1
-rw-rw-r--  1 martinc  apcvs      32 Jun 11 09:01 lucene-core-2.0.0.jar.md5
-rw-rw-r--  1 martinc  apcvs      40 Jun 11 09:01 lucene-core-2.0.0.jar.sha1
-rw-rw-r--  1 martinc  apcvs    1690 Jun 11 09:01 lucene-core-2.0.0.pom
-rw-rw-r--  1 martinc  apcvs      32 Jun 11 09:01 lucene-core-2.0.0.pom.md5
-rw-rw-r--  1 martinc  apcvs      40 Jun 11 09:01 lucene-core-2.0.0.pom.sha1
-bash-2.05b$ mv lucene-core-2.0.0.jar.1 lucene-core-2.0.0.jar
-bash-2.05b$ chmod g+w lucene-core-2.0.0.jar

Otis

----- Original Message ----
From: sfryxell <sfryxell@real.com>
To: java-user@lucene.apache.org
Sent: Thursday, June 22, 2006 11:52:56 AM
Subject: lucene and maven2

what up g.

trying to use the lucene-core.2.0.0.jar that is in the maven  
repository at

http://www.ibiblio.org/maven2/org/apache/lucene/lucene-core/2.0.0/

my classes won't compile against this jar as it doesn't contain any  
class files. there is a pom in the manifest directory.

was this intentional? is there some magical way to use an empty jar  
with a pom file in maven? all the other jars i've pulled off there  
have class files in them.

anyway, thought i'd point this out before i assumed this was a  
mistake and  stuck the regular jar  in my local repository.

thanks
Scott.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 08:01:12 2006
Return-Path: <java-user-return-21695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11124 invoked from network); 30 Jun 2006 08:01:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 08:01:12 -0000
Received: (qmail 23277 invoked by uid 500); 30 Jun 2006 08:01:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23236 invoked by uid 500); 30 Jun 2006 08:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23225 invoked by uid 99); 30 Jun 2006 08:01:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 01:01:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 01:01:03 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id k5U80Y79040118
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 10:00:35 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200606300800.k5U80Y79040118@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: HitCollector and Sort Objects
Date: Fri, 30 Jun 2006 10:00:46 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <20060629235351.11620.qmail@web34105.mail.mud.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Acab11hmXFpfbfKkRoqedGKTb9JB8QAQoq1w
X-Scanned-By: MIMEDefang 2.56 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yeah!! There are no methods that you mentioned. But there are some ways to
do this.

TopFieldDocs:search(Query query, Filter filter, int n, Sort sort) 

If above method does not solve your purpose, then

My suggestion is to use method search(Query query, Filter filter,
HitCollector results)  and pass your HitCollector which extends
TopFieldDocCollector .

Jelda


> -----Original Message-----
> From: James Pine [mailto:general_nogi@yahoo.com] 
> Sent: Friday, June 30, 2006 1:54 AM
> To: java-user@lucene.apache.org
> Subject: HitCollector and Sort Objects
> 
> Hey,
> 
> I've looked at the documentation for:
> 
> org.apache.lucene.search.Searchable
> org.apache.lucene.search.Searcher
> org.apache.lucene.search.IndexSearcher
> 
> and it struck me that there are no search methods with these 
> signatures:
> 
> void search(Query query, Filter filter, HitCollector results, 
> Sort sort)
> 
> void search(Query query, HitCollector results, Sort
> sort)
> 
> I have one type of search where I pass in a Query and a Sort 
> (built with a SortField and Decompresses) and deal with the 
> Hits object, and another which takes a Query and a 
> HitCollector, which I then run my own sorting on the results.
> 
> I'd like to combine both into one call so that I can get the 
> results sorted and have the collected data available. Is that 
> crazy talk? Does the way document ids stream through the 
> HitCollector prevent sorting them first?
> 
> Would it be best for me to convert my Decompresses logic into 
> a Comparator to pass into Arrays.sort() or something like 
> that and just forget about using the built in Lucene functionality?
> 
> I currently use the HitCollector to count occurrences of 
> words in the result set, basically trying compute the 
> TermFrequencies in the result of a search vs.
> across the entire index. I've tried using bitsets but because 
> I can't constrain the number of unique words people use 
> (currently in the millions in our data), and the number of 
> document (also currently in the millions), keeping a cache of 
> bitsets is not feasible on our hardware (I can save about 
> 10,000 but the cache hit ratio is very low). If someone 
> thinks my use of HitCollector is flawed, I'm certainly open 
> to suggestions. Thanx.
> 
> JAMES
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection 
> around http://mail.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 09:12:00 2006
Return-Path: <java-user-return-21696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34503 invoked from network); 30 Jun 2006 09:11:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 09:11:59 -0000
Received: (qmail 31527 invoked by uid 500); 30 Jun 2006 09:11:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31471 invoked by uid 500); 30 Jun 2006 09:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31459 invoked by uid 99); 30 Jun 2006 09:11:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 02:11:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 02:11:40 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id 45908A7CC3; Fri, 30 Jun 2006 11:13:35 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id 7C734A7CAB
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 11:13:34 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id AD6AAC0B2
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 11:11:55 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: Lucene indexing PPT
Date: Fri, 30 Jun 2006 11:11:17 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcaaDoIgo9VWnU67SYKbPea8yIN6+wCFLA8A
In-Reply-To: <44A1696B.5060103@wolfram.com>
Message-Id: <20060630091155.AD6AAC0B2@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everybody!
I=B4m trying to build a index with PPT files. I have downloaded the api =
POI,
"poi.bin.3.0" and "poi.src.3.0", but I don=B4t know where may I have to =
unzip
them. I=B4d like to build the index by the command line, the same way as =


> java -cp lucene-core-2.0.0.jar;lucene-demos-2.0.0.jar
org.apache.lucene.demo.IndexFiles docs

And also i=B4d like to search index=20

May anyone help me?
Thanks a lot
Cheers
Teresa


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 10:20:07 2006
Return-Path: <java-user-return-21697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61921 invoked from network); 30 Jun 2006 10:20:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 10:20:07 -0000
Received: (qmail 69467 invoked by uid 500); 30 Jun 2006 10:19:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69393 invoked by uid 500); 30 Jun 2006 10:19:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69331 invoked by uid 99); 30 Jun 2006 10:19:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 03:19:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 03:19:48 -0700
Received: from fluffy.internal.torchbox.com ([192.168.1.20])
	by fluffy.torchbox.com with esmtp (Exim 4.50)
	id 1FwG5v-000762-65
	for java-user@lucene.apache.org; Fri, 30 Jun 2006 11:19:27 +0100
Date: Fri, 30 Jun 2006 11:19:27 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@fluffy.internal.torchbox.com
To: java-user@lucene.apache.org
Subject: Re: Lucene indexing PPT
In-Reply-To: <20060630091155.AD6AAC0B2@mad.isoco.net>
Message-ID: <Pine.LNX.4.58.0606301109110.22721@fluffy.internal.torchbox.com>
References: <20060630091155.AD6AAC0B2@mad.isoco.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Spam-Score: -104.4 (---------------------------------------------------)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, 30 Jun 2006, mcarcelen wrote:
> I=B4m trying to build a index with PPT files. I have downloaded the api
> POI, "poi.bin.3.0" and "poi.src.3.0", but I don=B4t know where may I have
> to unzip them. I=B4d like to build the index by the command line, the sam=
e
> way as

I don't know about the lucene demo, but I can help with your POI issue.
You only need the poi bin package, but you do need to unpack it. In there
you'll find three jar files - for PowerPoint stuff, you'll just need to
put the poi-3.0 and poi-scratchpad-3.0 jars on your classpath.

You can then use org.apache.poi.hslf.extractor.PowerPointExtractor to do
your text extraction.


Perhaps someone can advise you on how to integrate this into the demo.

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 11:37:36 2006
Return-Path: <java-user-return-21698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89363 invoked from network); 30 Jun 2006 11:37:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 11:37:36 -0000
Received: (qmail 71360 invoked by uid 500); 30 Jun 2006 11:37:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71252 invoked by uid 500); 30 Jun 2006 11:37:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71167 invoked by uid 99); 30 Jun 2006 11:37:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 04:37:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.210.211 as permitted sender)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 04:37:18 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay2.uni-heidelberg.de (8.12.10/8.12.10) with ESMTP id k5UBd8vj013775
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 13:39:09 +0200 (MET DST)
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 6FE572C05A
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 13:36:54 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 3F1A52C059
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 13:36:53 +0200 (CEST)
Message-ID: <44A50CD5.7020000@uni-hd.de>
Date: Fri, 30 Jun 2006 13:36:53 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Spellchecker Download at lucene wiki outdated
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
I don't know who can update the Wiki Pages so I am just mailing here.

The download of spellchecker1.1.zip
contribution does not work with Lucene-2.0 anymore.

http://wiki.apache.org/jakarta-lucene/SpellChecker?highlight=spellchecker1.1.zip

So I wanted to build _only_ the spellcheck-contrib from the
SVN-repository,   but it seems to me that there are no ant-targets for that?

thanks,
martin





-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 12:03:59 2006
Return-Path: <java-user-return-21699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96024 invoked from network); 30 Jun 2006 12:03:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 12:03:59 -0000
Received: (qmail 7566 invoked by uid 500); 30 Jun 2006 12:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7539 invoked by uid 500); 30 Jun 2006 12:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7528 invoked by uid 99); 30 Jun 2006 12:03:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:03:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:03:51 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id 9949DA7CCA; Fri, 30 Jun 2006 14:05:46 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id C8B82A7CAB
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 14:05:45 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id 94949C069
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 14:03:58 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene indexing PPT
Date: Fri, 30 Jun 2006 14:03:20 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcacLtc6RZfVV9DuQwCxqVkm3bvIdgADfevw
In-Reply-To: <Pine.LNX.4.58.0606301109110.22721@fluffy.internal.torchbox.com>
Message-Id: <20060630120358.94949C069@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Nick!
Thanks for your help, it=B4s useful for me
Bye


-----Mensaje original-----
De: Nick Burch [mailto:nick@torchbox.com]=20
Enviado el: viernes, 30 de junio de 2006 12:19
Para: java-user@lucene.apache.org
Asunto: Re: Lucene indexing PPT

On Fri, 30 Jun 2006, mcarcelen wrote:
> I=B4m trying to build a index with PPT files. I have downloaded the =
api
> POI, "poi.bin.3.0" and "poi.src.3.0", but I don=B4t know where may I =
have
> to unzip them. I=B4d like to build the index by the command line, the =
same
> way as

I don't know about the lucene demo, but I can help with your POI issue.
You only need the poi bin package, but you do need to unpack it. In =
there
you'll find three jar files - for PowerPoint stuff, you'll just need to
put the poi-3.0 and poi-scratchpad-3.0 jars on your classpath.

You can then use org.apache.poi.hslf.extractor.PowerPointExtractor to do
your text extraction.


Perhaps someone can advise you on how to integrate this into the demo.

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 12:23:18 2006
Return-Path: <java-user-return-21700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1516 invoked from network); 30 Jun 2006 12:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 12:23:16 -0000
Received: (qmail 31045 invoked by uid 500); 30 Jun 2006 12:23:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31013 invoked by uid 500); 30 Jun 2006 12:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31002 invoked by uid 99); 30 Jun 2006 12:23:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:23:09 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:23:08 -0700
Received: (qmail 17161 invoked by uid 509); 30 Jun 2006 14:22:42 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.098973 secs); 30 Jun 2006 12:22:42 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.098973 secs Process 17155)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 30 Jun 2006 14:22:41 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69C3F.E1C425D1"
Subject: Are there any problems with the hits.length() in luc 1.4?
Date: Fri, 30 Jun 2006 14:22:40 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C01F1CF8C@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Are there any problems with the hits.length() in luc 1.4?
Thread-Index: AcacP+FaBDatOqBySkOuGTMVYx1Eng==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69C3F.E1C425D1
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I'm indexing around 200 million articles in lucene. I have for the
moment added around 600000 articles.=20

=20

Using this technique:

5000 docs in RAMDir

Flush RAMDir to FSDir to create segmentfile with 5000.

Mergefactor 10.

=20

I'm searching using the multisearcher.

=20

When I had around 490 000 docs all new documents appeared to be in the
index but the count for the word "kan" was just around 8000 hits.

When the large merge occurred at 500.000 docs the "kan" count increased
to 65000 hits.

=20

Any ideas`?

=20

/

Regards

Marcus=20

=20


------_=_NextPart_001_01C69C3F.E1C425D1--

From java-user-return-21701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 12:30:11 2006
Return-Path: <java-user-return-21701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2813 invoked from network); 30 Jun 2006 12:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 12:30:11 -0000
Received: (qmail 38338 invoked by uid 500); 30 Jun 2006 12:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37307 invoked by uid 500); 30 Jun 2006 12:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37296 invoked by uid 99); 30 Jun 2006 12:30:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:30:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.15.245.75] (HELO post01.avanza.se) (217.15.245.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:30:05 -0700
Received: from azaexch02.aza.se (unknown [172.22.30.9])
	by post01.avanza.se (Postfix) with ESMTP id F0B9B7472B
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 14:29:43 +0200 (MET DST)
Received: by azaexch02.aza.se with Internet Mail Service (5.5.2653.19)
	id <K4LDQ735>; Fri, 30 Jun 2006 14:29:51 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BD58@ad01.aza.se>
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: java-user@lucene.apache.org
Subject: Lexical error when asterisk quantifier is first in query string
Date: Fri, 30 Jun 2006 14:29:49 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69C40.E0F30220"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69C40.E0F30220
Content-Type: text/plain;
	charset="iso-8859-1"

queryParser.ParseException: Lexical error at line 1, column 2.  Encountered:
after : ""
I get this when i enter a query with a asterisk (or questionmark) first in
the query ( "*cene" ). 
Is this a bug or am I doing something wrong ?
/B

------_=_NextPart_001_01C69C40.E0F30220--

From java-user-return-21702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 12:34:49 2006
Return-Path: <java-user-return-21702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4061 invoked from network); 30 Jun 2006 12:34:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 12:34:49 -0000
Received: (qmail 47259 invoked by uid 500); 30 Jun 2006 12:34:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47225 invoked by uid 500); 30 Jun 2006 12:34:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47214 invoked by uid 99); 30 Jun 2006 12:34:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:34:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:34:42 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id C1BDBD89AE6
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 08:34:20 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Fri, 30 Jun 2006 08:34:22 -0400
X-Sasl-enc: rZVOuRoVn3ZBibH8GabjvnvdgIvvvfXvyrdKSqj37ao1 1151670860
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id B3C8770D9
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 08:34:20 -0400 (EDT)
Message-ID: <44A51A4B.5070200@mikemccandless.com>
Date: Fri, 30 Jun 2006 08:34:19 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock File
References: <9F47FE95F43B1D41B9063D0271B2D7FF012E4508@empburmail.Burlington.Emptoris.com>
In-Reply-To: <9F47FE95F43B1D41B9063D0271B2D7FF012E4508@empburmail.Burlington.Emptoris.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I have a clustered environment, with a load-balancer in the front
> assigning connections.  Is it better to have one of the cluster running
> a searcher as a webservice (to be accessed by the other machines in the
> cluster) or to have a IndexReader/Searcher for each machine in the
> cluster?

Ahh, OK I see.  For this it's better to use one IndexReader/Searcher per 
machine in your cluster.  Multiple threads hitting a single machine 
should then share that one IndexReader/Searcher.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 12:35:37 2006
Return-Path: <java-user-return-21703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4447 invoked from network); 30 Jun 2006 12:35:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 12:35:36 -0000
Received: (qmail 50826 invoked by uid 500); 30 Jun 2006 12:35:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50802 invoked by uid 500); 30 Jun 2006 12:35:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50791 invoked by uid 99); 30 Jun 2006 12:35:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:35:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.22.3.98] (HELO mail.insiders.de) (193.22.3.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:35:25 -0700
Received: from insiders.de (unknown [193.22.3.33])
	by mail.insiders.de (Postfix) with ESMTP id AF7F44D5A15
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 14:35:03 +0200 (CEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Lexical error when asterisk quantifier is first in query string
Date: Fri, 30 Jun 2006 14:33:04 +0200
Message-ID: <D4E368C6FE4C57499CBCE2A0B476C8B05CE550@nebukadnezar.insiders.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lexical error when asterisk quantifier is first in query string
thread-index: AcacQMpPGgqqgKK6S4iskPIEzQCKLQAAD+Qg
From: "Johannes Christen" <j.christen@insiders.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Leading wildcards (*) are not allowed by the query parser.
See FAQ: =
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-4d62118417eaef0dcb87=
f4370583f809848ea695

	Jo=20

-----Urspr=FCngliche Nachricht-----
Von: Bj=F6rn Ekengren [mailto:bjorn.ekengren@avanza.se]=20
Gesendet: Freitag, 30. Juni 2006 14:30
An: java-user@lucene.apache.org
Betreff: Lexical error when asterisk quantifier is first in query string

queryParser.ParseException: Lexical error at line 1, column 2.  =
Encountered:
after : ""
I get this when i enter a query with a asterisk (or questionmark) first =
in the query ( "*cene" ).=20
Is this a bug or am I doing something wrong ?
/B


____________
Virus checked by G DATA AntiVirusKit
Version: AVK 16.8222 from 30.06.2006
Virus news: www.antiviruslab.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 12:36:58 2006
Return-Path: <java-user-return-21704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5337 invoked from network); 30 Jun 2006 12:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 12:36:57 -0000
Received: (qmail 54704 invoked by uid 500); 30 Jun 2006 12:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54677 invoked by uid 500); 30 Jun 2006 12:36:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54666 invoked by uid 99); 30 Jun 2006 12:36:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:36:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 05:36:49 -0700
Received: from lettmelk [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A6CE04D8; Fri, 30 Jun 2006 14:19:26 +0200
Date: Fri, 30 Jun 2006 14:36:17 +0200
To: java-user@lucene.apache.org
Subject: Re: Are there any problems with the hits.length() in luc 1.4?
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <8834A84C87A2C148AD46921BB8BFC97C01F1CF8C@S1SE1MAIL.emea1.ad.group>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tbylarmfoftp72@lettmelk>
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C01F1CF8C@S1SE1MAIL.emea1.ad.group>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-3, 29.06.2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: D16ce01a90000a56c.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe you didn't close / open your writer/reader and that you where  
searching with a snapshot of the old index. And that after you had closed  
the writer and opened a new reader you got the correct result..?

On Fri, 30 Jun 2006 14:22:40 +0200, Marcus Falck  
<marcus.falck@observer.se> wrote:

> Hi,
>
>
> I'm indexing around 200 million articles in lucene. I have for the
> moment added around 600000 articles.
>
>
> Using this technique:
>
> 5000 docs in RAMDir
>
> Flush RAMDir to FSDir to create segmentfile with 5000.
>
> Mergefactor 10.
>
>
> I'm searching using the multisearcher.
>
>
> When I had around 490 000 docs all new documents appeared to be in the
> index but the count for the word "kan" was just around 8000 hits.
>
> When the large merge occurred at 500.000 docs the "kan" count increased
> to 65000 hits.
>
>
> Any ideas`?
>
>
> /
>
> Regards
>
> Marcus
>
>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 13:01:00 2006
Return-Path: <java-user-return-21705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12903 invoked from network); 30 Jun 2006 13:01:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 13:01:00 -0000
Received: (qmail 90011 invoked by uid 500); 30 Jun 2006 13:00:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89979 invoked by uid 500); 30 Jun 2006 13:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89967 invoked by uid 99); 30 Jun 2006 13:00:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 06:00:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 06:00:52 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E671B30EFCD4; Fri, 30 Jun 2006 09:00:31 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 1994E30EFCD3
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 09:00:27 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <6F4F5B8F19AA954DB9002305E4D6D14901BD58@ad01.aza.se>
References: <6F4F5B8F19AA954DB9002305E4D6D14901BD58@ad01.aza.se>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <8D1C9D22-8C3D-4BB2-9FF3-59CE1997B938@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lexical error when asterisk quantifier is first in query string
Date: Fri, 30 Jun 2006 09:00:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.9 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 30, 2006, at 8:29 AM, Bj=F6rn Ekengren wrote:

> queryParser.ParseException: Lexical error at line 1, column 2.  =20
> Encountered:
> after : ""
> I get this when i enter a query with a asterisk (or questionmark) =20
> first in
> the query ( "*cene" ).
> Is this a bug or am I doing something wrong ?

Wildcard characters are prohibited at the start of strings in =20
QueryParser.  WildcardQuery itself supports it, but the parser =20
prohibits it for general purpose performance reasons.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 13:44:31 2006
Return-Path: <java-user-return-21706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34543 invoked from network); 30 Jun 2006 13:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 13:44:31 -0000
Received: (qmail 80023 invoked by uid 500); 30 Jun 2006 13:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79988 invoked by uid 500); 30 Jun 2006 13:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79969 invoked by uid 99); 30 Jun 2006 13:44:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 06:44:24 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.54.11.87] (HELO bmapps.persistent.co.in) (202.54.11.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 06:44:23 -0700
Received: from mail.persistent.co.in (unknown [10.12.0.1])
	by bmapps.persistent.co.in (Symantec Mail Security) with ESMTP id 18EC74E0014;
	Fri, 30 Jun 2006 19:09:38 +0530 (IST)
Received: (from mail6.persistent.co.in [59.163.69.2])
	by mail6.persistent.co.in (MOS 3.7.5-GA)
	with HTTPS/1.1 id AMC63412 (AUTH amit_kkumar);
	Fri, 30 Jun 2006 19:09:24 +0530 (IST)
From: <amit_kkumar@persistent.co.in>
Subject: Re: question
To: java-user@lucene.apache.org, aleksander.stensby@integrasco.no
X-Mailer: Mirapoint Webmail Direct 3.7.5-GA
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="-----187743630f75cdffa860c8e4a1fbc3f2"
Message-Id: <20060630190924.AMC63412@mail6.persistent.co.in>
Date: Fri, 30 Jun 2006 19:09:24 +0530 (IST)
X-Junkmail-Whitelist: YES (by domain whitelist at mail6.persistent.co.in)
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

-------187743630f75cdffa860c8e4a1fbc3f2
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding:7bit

hi,

i am able to index the database but while searching
it does'nt
show any result

i am sending u part of my code just chk and tell me
where is error

code---

class DBReader
{
static final File INDEX_DIR = new File("index");
public static void main(String args[])
{
try {
// The newInstance() call is a work
around for some
// broken Java implementations

Class.forName("com.mysql.jdbc.Driver").newInstance();
System.out.println("driver loaded
successfully");
} catch (Exception ex) {
System.out.println("DBError:"+ex);
}

try {
Connection conn =
DriverManager.getConnection("jdbc:mysql://localhost/experience?user=root&password=");
System.out.println("connection success");

// Do something with the Connection ....
Statement stmt = conn.createStatement();
String select_query = "SELECT
resume_name,years,months,details FROM info";
ResultSet rs =
stmt.executeQuery(select_query);

IndexWriter writer = new
IndexWriter(INDEX_DIR, new StandardAnalyzer(),
true);

while (rs.next()) {
String resume_name =
rs.getString("resume_name");
float years = rs.getFloat("years");
float months = rs.getFloat("months");
String details =
rs.getString("details");

//System.out.println(resume_name+"\t"+years+"\t"+months+"\t"+details);
//try {
//Thread.sleep(1000);
//}
//catch(InterruptedException e) {
// probably fine to ignore
this exception
//}
writer.setMaxFieldLength(25000);

final Document doc = new Document();
doc.add(new Field("resume_name",
resume_name, Store.YES, Index.UN_TOKENIZED));
doc.add(new Field("details", details,
Store.YES, Index.UN_TOKENIZED));
writer.addDocument(doc);
}
writer.optimize();
writer.close();

IndexReader reader =
IndexReader.open("index");
Searcher searcher = new
IndexSearcher(reader);
Analyzer analyzer = new
StandardAnalyzer();
BufferedReader in = new
BufferedReader(new InputStreamReader(System.in,
"UTF-8"));
String field = "contents";
QueryParser parser = new
QueryParser(field, analyzer);

while (true)
{
System.out.print("Query: ");

String line = in.readLine();

if (line == null ||
line.length() == -1)
break;

Query query = parser.parse(line);
System.out.println("Searching
for: " + query.toString(field));

Hits hits =
searcher.search(query);

System.out.println(hits.length() + " total matching
documents");

final int HITS_PER_PAGE = 10;
for (int start = 0; start <
hits.length(); start += HITS_PER_PAGE)
{
int end =
Math.min(hits.length(), start + HITS_PER_PAGE);
for (int i = start; i
< end; i++)
{
Document docs
= hits.doc(i);
String path =
docs.get("path");
if (path != null)
{

System.out.println((i+1) + ". " + path);
String
title = docs.get("title");
if
(title != null)
{

System.out.println(" Title: " + docs.get("title"));
}
}else{

System.out.println((i+1) + ". " + "No path for this
document");
}
}

if (hits.length() > end)
{

System.out.print("more (y/n) ? ");
line =
in.readLine();
if
(line.length() == 0 || line.charAt(0) == 'n')
break;
}
}//end of for(int start = 0;
start < hits.length(); start += HITS_PER_PAGE)
}//end of while(true)

} catch (SQLException ex) {
// handle any errors
System.out.println("SQLException: " +
ex.getMessage());
System.out.println("SQLState: " +
ex.getSQLState());
System.out.println("VendorError: " +
ex.getErrorCode());
}
catch(IOException ex)
{
}
catch(Exception e)
{
}
}
}

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Pvt. Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Pvt. Ltd. does not accept any liability for virus infected mails.

-------187743630f75cdffa860c8e4a1fbc3f2--


From java-user-return-21707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 13:52:44 2006
Return-Path: <java-user-return-21707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39258 invoked from network); 30 Jun 2006 13:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 13:52:44 -0000
Received: (qmail 6593 invoked by uid 500); 30 Jun 2006 13:52:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6566 invoked by uid 500); 30 Jun 2006 13:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6555 invoked by uid 99); 30 Jun 2006 13:52:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 06:52:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 06:52:35 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79320ca1c288ad3ee4500@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Fri, 30 Jun 2006 15:52:11 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lock File
Date: Fri, 30 Jun 2006 15:52:10 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF3D5@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lock File
Thread-Index: AcabulF0QysuJJf9SsKAlvUvSX5fDAAkd6kg
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's not possible to change lockDir because it's a final static
varriables?
Is it possible to change the lockDir?

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 29 June 2006 22:26
To: java-user@lucene.apache.org
Subject: Re: Lock File


 > When I create an index withe the class IndexModifier in Lucene=20
1.9.1there is a lock file created on a temp folder.
 > My question is: Is it possible to disable this option?
 > If yes how to procede?

Yes, there is.

You can call the static FSDirectory.setDisabledLocks() to disable=20
locking entirely.  But you need to be certain this is safe for your=20
application.  Lucene uses this lock to ensure the index does not become=20
corrupt when IndexReaders and IndexWriters are working on the same
index.

Or, if you want to change which directory the lock file is stored in you

can set this Java property:

    org.apache.lucene.lockDir

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 13:55:13 2006
Return-Path: <java-user-return-21708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40607 invoked from network); 30 Jun 2006 13:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 13:55:13 -0000
Received: (qmail 11561 invoked by uid 500); 30 Jun 2006 13:55:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11536 invoked by uid 500); 30 Jun 2006 13:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11525 invoked by uid 99); 30 Jun 2006 13:55:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 06:55:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 06:55:03 -0700
Received: from lettmelk [212.4.54.130] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A92505AC; Fri, 30 Jun 2006 15:37:41 +0200
Date: Fri, 30 Jun 2006 15:54:31 +0200
To: java-user@lucene.apache.org
Subject: Re: question
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <20060630190924.AMC63412@mail6.persistent.co.in>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tbyow5y0oftp72@lettmelk>
In-Reply-To: <20060630190924.AMC63412@mail6.persistent.co.in>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-3, 29.06.2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.130]
X-Declude-Spoolname: D292500980000ab68.smd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dont have time for a big answer, but you are searching in a field called=
  =

"contents", and from my quick glance, there is no such field?

As i can see, you have two fields called "resume_name" and "details"

So, you would have to search in the field details. Also remember that  =

field-names are case-sensitive.

Hope this helps, Aleksander


On Fri, 30 Jun 2006 15:39:24 +0200, <amit_kkumar@persistent.co.in> wrote=
:

> hi,
>
> i am able to index the database but while searching
> it does'nt
> show any result
>
> i am sending u part of my code just chk and tell me
> where is error
>
> code---
>
> class DBReader
> {
> static final File INDEX_DIR =3D new File("index");
> public static void main(String args[])
> {
> try {
> // The newInstance() call is a work
> around for some
> // broken Java implementations
>
> Class.forName("com.mysql.jdbc.Driver").newInstance();
> System.out.println("driver loaded
> successfully");
> } catch (Exception ex) {
> System.out.println("DBError:"+ex);
> }
>
> try {
> Connection conn =3D
> DriverManager.getConnection("jdbc:mysql://localhost/experience?user=3D=
root&password=3D");
> System.out.println("connection success");
>
> // Do something with the Connection ....
> Statement stmt =3D conn.createStatement();
> String select_query =3D "SELECT
> resume_name,years,months,details FROM info";
> ResultSet rs =3D
> stmt.executeQuery(select_query);
>
> IndexWriter writer =3D new
> IndexWriter(INDEX_DIR, new StandardAnalyzer(),
> true);
>
> while (rs.next()) {
> String resume_name =3D
> rs.getString("resume_name");
> float years =3D rs.getFloat("years");
> float months =3D rs.getFloat("months");
> String details =3D
> rs.getString("details");
>
> //System.out.println(resume_name+"\t"+years+"\t"+months+"\t"+details);=

> //try {
> //Thread.sleep(1000);
> //}
> //catch(InterruptedException e) {
> // probably fine to ignore
> this exception
> //}
> writer.setMaxFieldLength(25000);
>
> final Document doc =3D new Document();
> doc.add(new Field("resume_name",
> resume_name, Store.YES, Index.UN_TOKENIZED));
> doc.add(new Field("details", details,
> Store.YES, Index.UN_TOKENIZED));
> writer.addDocument(doc);
> }
> writer.optimize();
> writer.close();
>
> IndexReader reader =3D
> IndexReader.open("index");
> Searcher searcher =3D new
> IndexSearcher(reader);
> Analyzer analyzer =3D new
> StandardAnalyzer();
> BufferedReader in =3D new
> BufferedReader(new InputStreamReader(System.in,
> "UTF-8"));
> String field =3D "contents";
> QueryParser parser =3D new
> QueryParser(field, analyzer);
>
> while (true)
> {
> System.out.print("Query: ");
>
> String line =3D in.readLine();
>
> if (line =3D=3D null ||
> line.length() =3D=3D -1)
> break;
>
> Query query =3D parser.parse(line);
> System.out.println("Searching
> for: " + query.toString(field));
>
> Hits hits =3D
> searcher.search(query);
>
> System.out.println(hits.length() + " total matching
> documents");
>
> final int HITS_PER_PAGE =3D 10;
> for (int start =3D 0; start <
> hits.length(); start +=3D HITS_PER_PAGE)
> {
> int end =3D
> Math.min(hits.length(), start + HITS_PER_PAGE);
> for (int i =3D start; i
> < end; i++)
> {
> Document docs
> =3D hits.doc(i);
> String path =3D
> docs.get("path");
> if (path !=3D null)
> {
>
> System.out.println((i+1) + ". " + path);
> String
> title =3D docs.get("title");
> if
> (title !=3D null)
> {
>
> System.out.println(" Title: " + docs.get("title"));
> }
> }else{
>
> System.out.println((i+1) + ". " + "No path for this
> document");
> }
> }
>
> if (hits.length() > end)
> {
>
> System.out.print("more (y/n) ? ");
> line =3D
> in.readLine();
> if
> (line.length() =3D=3D 0 || line.charAt(0) =3D=3D 'n')
> break;
> }
> }//end of for(int start =3D 0;
> start < hits.length(); start +=3D HITS_PER_PAGE)
> }//end of while(true)
>
> } catch (SQLException ex) {
> // handle any errors
> System.out.println("SQLException: " +
> ex.getMessage());
> System.out.println("SQLState: " +
> ex.getSQLState());
> System.out.println("VendorError: " +
> ex.getErrorCode());
> }
> catch(IOException ex)
> {
> }
> catch(Exception e)
> {
> }
> }
> }
>
> DISCLAIMER
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> This e-mail may contain privileged and confidential information which =
is  =

> the property of Persistent Systems Pvt. Ltd. It is intended only for t=
he  =

> use of the individual or entity to which it is addressed. If you are n=
ot  =

> the intended recipient, you are not authorized to read, retain, copy, =
 =

> print, distribute or use this message. If you have received this  =

> communication in error, please notify the sender and delete all copies=
  =

> of this message. Persistent Systems Pvt. Ltd. does not accept any  =

> liability for virus infected mails.



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 14:03:17 2006
Return-Path: <java-user-return-21709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43593 invoked from network); 30 Jun 2006 14:03:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 14:03:16 -0000
Received: (qmail 31526 invoked by uid 500); 30 Jun 2006 14:03:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31471 invoked by uid 500); 30 Jun 2006 14:03:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31438 invoked by uid 99); 30 Jun 2006 14:03:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 07:03:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 07:03:08 -0700
Received: by py-out-1112.google.com with SMTP id d80so669107pyd
        for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 07:02:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rc+v/Ozqz7Sykti+WUUAvcG28R9bVkFs+Cjqbuzqpe2DMFTbpaovgebThy/Ip64JKh0H0/F3ZE1J1y1tlJutPwuCZqM78l/a5h9ekHDj774sEYUvChtBhJPfWAAhxlNVIefUCM17Bie53DeffgHor6snVYuukkkBw6Hfj4q0g+U=
Received: by 10.35.111.14 with SMTP id o14mr516773pym;
        Fri, 30 Jun 2006 07:02:47 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Fri, 30 Jun 2006 07:02:47 -0700 (PDT)
Message-ID: <359a92830606300702j61f9b60o3412b6545a504c68@mail.gmail.com>
Date: Fri, 30 Jun 2006 10:02:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question
In-Reply-To: <20060630190924.AMC63412@mail6.persistent.co.in>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30692_19069068.1151676167352"
References: <20060630190924.AMC63412@mail6.persistent.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_30692_19069068.1151676167352
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Several things (on a "quick look" basis).

I don't see where you are retrieving the document fields you index. You're
indexing "resume_name" and "details" fields. But your search code is trying
to get the "path" and "title" fields out of the document. They won't be
there. Of course, you may not have posted all the code....

It's not clear from the code whether you're writing to and reading from the
same index. In INDEX_DIR defined somewhere to be "index"? And do both
programs run from the same directory? This may be a silly question, but I've
spent waaaay too much time chasing down this kind of junk <G>.

The first thing I'd actually advise is getting a copy of Luke. Use it to
examine the index you built to see if it looks like what you expect. It
looked like the code you wrote printed out the query, so you might try using
Luke to search with that and see how many hits you get.

Hope this helps. Really, really, really get a copy of Luke. That's the first
place I turn to when I don't get the results I expect. See.

http://www.getopt.org/luke/

Best
Erick

------=_Part_30692_19069068.1151676167352--

From java-user-return-21710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 14:10:57 2006
Return-Path: <java-user-return-21710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47236 invoked from network); 30 Jun 2006 14:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 14:10:56 -0000
Received: (qmail 55926 invoked by uid 500); 30 Jun 2006 14:10:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55711 invoked by uid 500); 30 Jun 2006 14:10:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55612 invoked by uid 99); 30 Jun 2006 14:10:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 07:10:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 07:10:43 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 5B41ED896D2
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 10:10:15 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Fri, 30 Jun 2006 10:10:17 -0400
X-Sasl-enc: LQ23tVSnPLFxCJ6xgaZEFf0YO48xf2NlFpXGx0xJFiVP 1151676615
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 3AB5D63C2
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 10:10:14 -0400 (EDT)
Message-ID: <44A530C5.7040002@mikemccandless.com>
Date: Fri, 30 Jun 2006 10:10:13 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock File
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF3D5@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF3D5@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> It's not possible to change lockDir because it's a final static
> varriables?
> Is it possible to change the lockDir?

Correct, because it's final you cannot change it directly.

But, you can set the Java system property org.apache.lucene.lockDir. 
This will change the lock directory, because the final lockDir is 
initialized by looking up that property, and if it's unset, looking up 
java.io.tmpdir instead.  Finally if java.io.tmpdir is still unset, the 
directory of your index will be used.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 14:12:48 2006
Return-Path: <java-user-return-21711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47720 invoked from network); 30 Jun 2006 14:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 14:12:47 -0000
Received: (qmail 58825 invoked by uid 500); 30 Jun 2006 14:12:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58778 invoked by uid 500); 30 Jun 2006 14:12:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58765 invoked by uid 99); 30 Jun 2006 14:12:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 07:12:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 07:12:40 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79321f0b7188ad3ee4500@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Fri, 30 Jun 2006 16:12:18 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lock File
Date: Fri, 30 Jun 2006 16:12:17 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF3D6@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lock File
Thread-Index: AcacTv/rRUizHgVzTAWNdBjqzK5yRgAACNrw
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok thanks I understand now.
Thanks a lot.=20

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 30 June 2006 16:10
To: java-user@lucene.apache.org
Subject: Re: Lock File


> It's not possible to change lockDir because it's a final static
> varriables?
> Is it possible to change the lockDir?

Correct, because it's final you cannot change it directly.

But, you can set the Java system property org.apache.lucene.lockDir.=20
This will change the lock directory, because the final lockDir is=20
initialized by looking up that property, and if it's unset, looking up=20
java.io.tmpdir instead.  Finally if java.io.tmpdir is still unset, the=20
directory of your index will be used.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 15:31:25 2006
Return-Path: <java-user-return-21712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68968 invoked from network); 30 Jun 2006 15:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 15:31:25 -0000
Received: (qmail 5334 invoked by uid 500); 30 Jun 2006 15:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5308 invoked by uid 500); 30 Jun 2006 15:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5297 invoked by uid 99); 30 Jun 2006 15:31:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 08:31:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [158.36.80.149] (HELO pat.hia.no) (158.36.80.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 08:31:14 -0700
Received: from [158.36.80.151] (helo=mail-mx2.hia.no)
	by pat.hia.no with esmtp (Exim 4.44)
	id 1FwKxF-0007Ko-QA
	for java-user@lucene.apache.org; Fri, 30 Jun 2006 17:30:50 +0200
Received: from localhost ([127.0.0.1] helo=mail-mx2.hia.no)
	by mail-mx2.hia.no with esmtp (Exim 4.44)
	id 1FwKpK-0001Fw-HL
	for java-user@lucene.apache.org; Fri, 30 Jun 2006 17:22:38 +0200
Received: from ghybel239.grm.hia.no ([128.39.146.239] helo=lettmelk)
	by mail-mx2.hia.no with esmtp (Exim 4.44)
	id 1FwKpJ-0001Ff-Jv
	for java-user@lucene.apache.org; Fri, 30 Jun 2006 17:22:38 +0200
Date: Fri, 30 Jun 2006 17:22:29 +0200
To: java-user@lucene.apache.org
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <20060630190924.AMC63412@mail6.persistent.co.in>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tbyszrd6oftp72@lettmelk>
In-Reply-To: <20060630190924.AMC63412@mail6.persistent.co.in>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-3, 29.06.2006), Outbound message
X-Antivirus-Status: Clean
Subject: Re: question
X-Spam-Checker-Version: SpamAssassin 3.0.6 (2005-12-07) on pat.hia.no
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Mon, 31 Jan 2005 16:42:16 +0100)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.4 required=5.0 tests=GREYLIST_ISWHITE,TW_TM 
	autolearn=failed version=3.0.6
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dammit, i just wrote a long mail, and opera found out that it should jus=
t  =

delete it before i got to send it:( grrrrr..

well,

A short version. You are misunderstanding the field functions I think.

final Document doc =3D new Document();
doc.add(new Field("resume_name", resume_name, Store.YES,  =

Index.UN_TOKENIZED));
doc.add(new Field("details", details, Store.YES, Index.UN_TOKENIZED));
writer.addDocument(doc);

Stores a document with TWO fields, one is called "resume_name", with the=
  =

value of your variable resume_name, and the other field is called  =

"details", with the value of your variable named details.

You should consider storing these documents in the index using  =

Index.TOKENIZED. Please check the API.

The problem lies in the searching.
:

I would do it like this: (im not catching any exceptions, thats up to  =

you!):

	Analyzer analyzer =3D new StandardAnalyzer();
	//the first argument is the fieldname to search in, in your case either=
  =

"resume_name" or "details".
	QueryParser parser =3D new QueryParser("details", analyzer);

	//this takes the indexpath as an argument, in your case it is "index"
	IndexSearcher searcher =3D new IndexSearcher("index");

	String querystring =3D "whats new pussycat";
	Query query =3D parser.parse(querystring);
	Hits hits =3D searcher.search(query);

//Instead of Hits, you can use HitsCollector, see the wiki or the API.
You now have the hits object, wich you can use to iterate over your  =

results and access them in this way:

	Document doc =3D hits.doc(i); // where i is the iterator

THen you can access your stored fields by doing this:

	String resume_name =3D doc.get("resume_name");
	String details =3D doc.get("details");

Hopefully this helps you a bit.


On Fri, 30 Jun 2006 15:39:24 +0200, <amit_kkumar@persistent.co.in> wrote=
:

> hi,
>
> i am able to index the database but while searching
> it does'nt
> show any result
>
> i am sending u part of my code just chk and tell me
> where is error
>
> code---
>
> class DBReader
> {
> static final File INDEX_DIR =3D new File("index");
> public static void main(String args[])
> {
> try {
> // The newInstance() call is a work
> around for some
> // broken Java implementations
>
> Class.forName("com.mysql.jdbc.Driver").newInstance();
> System.out.println("driver loaded
> successfully");
> } catch (Exception ex) {
> System.out.println("DBError:"+ex);
> }
>
> try {
> Connection conn =3D
> DriverManager.getConnection("jdbc:mysql://localhost/experience?user=3D=
root&password=3D");
> System.out.println("connection success");
>
> // Do something with the Connection ....
> Statement stmt =3D conn.createStatement();
> String select_query =3D "SELECT
> resume_name,years,months,details FROM info";
> ResultSet rs =3D
> stmt.executeQuery(select_query);
>
> IndexWriter writer =3D new
> IndexWriter(INDEX_DIR, new StandardAnalyzer(),
> true);
>
> while (rs.next()) {
> String resume_name =3D
> rs.getString("resume_name");
> float years =3D rs.getFloat("years");
> float months =3D rs.getFloat("months");
> String details =3D
> rs.getString("details");
>
> //System.out.println(resume_name+"\t"+years+"\t"+months+"\t"+details);=

> //try {
> //Thread.sleep(1000);
> //}
> //catch(InterruptedException e) {
> // probably fine to ignore
> this exception
> //}
> writer.setMaxFieldLength(25000);
>
> final Document doc =3D new Document();
> doc.add(new Field("resume_name",
> resume_name, Store.YES, Index.UN_TOKENIZED));
> doc.add(new Field("details", details,
> Store.YES, Index.UN_TOKENIZED));
> writer.addDocument(doc);
> }
> writer.optimize();
> writer.close();
>
> IndexReader reader =3D
> IndexReader.open("index");
> Searcher searcher =3D new
> IndexSearcher(reader);
> Analyzer analyzer =3D new
> StandardAnalyzer();
> BufferedReader in =3D new
> BufferedReader(new InputStreamReader(System.in,
> "UTF-8"));
> String field =3D "contents";
> QueryParser parser =3D new
> QueryParser(field, analyzer);
>
> while (true)
> {
> System.out.print("Query: ");
>
> String line =3D in.readLine();
>
> if (line =3D=3D null ||
> line.length() =3D=3D -1)
> break;
>
> Query query =3D parser.parse(line);
> System.out.println("Searching
> for: " + query.toString(field));
>
> Hits hits =3D
> searcher.search(query);
>
> System.out.println(hits.length() + " total matching
> documents");
>
> final int HITS_PER_PAGE =3D 10;
> for (int start =3D 0; start <
> hits.length(); start +=3D HITS_PER_PAGE)
> {
> int end =3D
> Math.min(hits.length(), start + HITS_PER_PAGE);
> for (int i =3D start; i
> < end; i++)
> {
> Document docs
> =3D hits.doc(i);
> String path =3D
> docs.get("path");
> if (path !=3D null)
> {
>
> System.out.println((i+1) + ". " + path);
> String
> title =3D docs.get("title");
> if
> (title !=3D null)
> {
>
> System.out.println(" Title: " + docs.get("title"));
> }
> }else{
>
> System.out.println((i+1) + ". " + "No path for this
> document");
> }
> }
>
> if (hits.length() > end)
> {
>
> System.out.print("more (y/n) ? ");
> line =3D
> in.readLine();
> if
> (line.length() =3D=3D 0 || line.charAt(0) =3D=3D 'n')
> break;
> }
> }//end of for(int start =3D 0;
> start < hits.length(); start +=3D HITS_PER_PAGE)
> }//end of while(true)
>
> } catch (SQLException ex) {
> // handle any errors
> System.out.println("SQLException: " +
> ex.getMessage());
> System.out.println("SQLState: " +
> ex.getSQLState());
> System.out.println("VendorError: " +
> ex.getErrorCode());
> }
> catch(IOException ex)
> {
> }
> catch(Exception e)
> {
> }
> }
> }
>
> DISCLAIMER
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> This e-mail may contain privileged and confidential information which =
is  =

> the property of Persistent Systems Pvt. Ltd. It is intended only for t=
he  =

> use of the individual or entity to which it is addressed. If you are n=
ot  =

> the intended recipient, you are not authorized to read, retain, copy, =
 =

> print, distribute or use this message. If you have received this  =

> communication in error, please notify the sender and delete all copies=
  =

> of this message. Persistent Systems Pvt. Ltd. does not accept any  =

> liability for virus infected mails.



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 15:47:56 2006
Return-Path: <java-user-return-21713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73962 invoked from network); 30 Jun 2006 15:47:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 15:47:56 -0000
Received: (qmail 29640 invoked by uid 500); 30 Jun 2006 15:47:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29613 invoked by uid 500); 30 Jun 2006 15:47:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29602 invoked by uid 99); 30 Jun 2006 15:47:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 08:47:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.220] (HELO web26009.mail.ukl.yahoo.com) (217.12.10.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jun 2006 08:47:48 -0700
Received: (qmail 22286 invoked by uid 60001); 30 Jun 2006 15:47:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=BNfqgZ5KavDJWVX3Z0PBAIJ9+oE0Vmz6h7KmBaV/Buwve0+StRLfr9H7lRei/TgwT0sH0iKQKgayfcEH93NWUHv9+I5Oy8YwAMCUalv7lWOJhvAu8dLjMlnjPvSs9mrgLsdIl5P42R63ST0hz1/jSaHCn1WCiapfn+yaap1EKwY=  ;
Message-ID: <20060630154726.22284.qmail@web26009.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26009.mail.ukl.yahoo.com via HTTP; Fri, 30 Jun 2006 15:47:26 GMT
Date: Fri, 30 Jun 2006 15:47:26 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Any existing query types that support equivalent of  "-not interested" ?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As an example - I want to search for the word "interested" without finding docs that have "not" immediately preceding it.

I couldn't see anything in SpanQuerys that would help and you can't construct phrase queries like "-not interested".

If something doesn't exist I'll probably look into writing a new Query class of some sort to support this using the position info in the index but I thought I'd check here for ideas first.

Cheers
Mark



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 15:56:15 2006
Return-Path: <java-user-return-21714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75813 invoked from network); 30 Jun 2006 15:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 15:56:15 -0000
Received: (qmail 42200 invoked by uid 500); 30 Jun 2006 15:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42167 invoked by uid 500); 30 Jun 2006 15:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42155 invoked by uid 99); 30 Jun 2006 15:56:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 08:56:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 08:56:08 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A66A830EFCD4; Fri, 30 Jun 2006 11:55:47 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 1CFD930EFCD3
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 11:55:44 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <20060630154726.22284.qmail@web26009.mail.ukl.yahoo.com>
References: <20060630154726.22284.qmail@web26009.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FC0953D4-7330-4D2F-8E98-18BCD7EA0095@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Any existing query types that support equivalent of  "-not interested" ?
Date: Fri, 30 Jun 2006 11:55:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

wouldn't this work?   +interested -"not interested"


On Jun 30, 2006, at 11:47 AM, mark harwood wrote:

> As an example - I want to search for the word "interested" without  
> finding docs that have "not" immediately preceding it.
>
> I couldn't see anything in SpanQuerys that would help and you can't  
> construct phrase queries like "-not interested".
>
> If something doesn't exist I'll probably look into writing a new  
> Query class of some sort to support this using the position info in  
> the index but I thought I'd check here for ideas first.
>
> Cheers
> Mark
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 17:10:27 2006
Return-Path: <java-user-return-21715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89625 invoked from network); 30 Jun 2006 17:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 17:10:27 -0000
Received: (qmail 26776 invoked by uid 500); 30 Jun 2006 17:10:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26749 invoked by uid 500); 30 Jun 2006 17:10:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26738 invoked by uid 99); 30 Jun 2006 17:10:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 10:10:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.95] (HELO smtp006.mail.ukl.yahoo.com) (217.12.11.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jun 2006 10:10:16 -0700
Received: (qmail 19670 invoked from network); 30 Jun 2006 17:09:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=gh2Skqh/4T+ZtSB7jrsFswBLeTOdUmHd3F3b9WBKkRP3qSUSuxg+0M6b/k+//jkSibTS/XM4Th3WTHb7f5egPLSqLRL/jiy1vdCS7owBeuQMQTnQLF1hL3piWdpi/vX24SEPONbc2ba0kJvQqXR3oy8rBYrxSwqUMsjEHUcgxsM=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp006.mail.ukl.yahoo.com with SMTP; 30 Jun 2006 17:09:54 -0000
Message-ID: <44A55AE0.6030607@yahoo.co.uk>
Date: Fri, 30 Jun 2006 18:09:52 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Any existing query types that support equivalent of  "-not interested"
 ?
References: <20060630154726.22284.qmail@web26009.mail.ukl.yahoo.com> <FC0953D4-7330-4D2F-8E98-18BCD7EA0095@ehatchersolutions.com>
In-Reply-To: <FC0953D4-7330-4D2F-8E98-18BCD7EA0095@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> wouldn't this work?   +interested -"not interested"

Hi Erik.
Yes, sorry brain is disengaged with all the heat here -  my example 
wasn't great and my scenario may be more complex than I originally 
outlined. I may have 20 different ways of saying "interested" and want 
to query for these words - but only if they aren't immediately preceded 
by "not", "isn't" or a choice of other negatives. I was looking for 
something efficient and succint in SpanQuerys to help.

Thanks for the help
Mark


	
	
		
___________________________________________________________ 
All new Yahoo! Mail "The new Interface is stunning in its simplicity and ease of use." - PC Magazine 
http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 17:22:32 2006
Return-Path: <java-user-return-21716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91924 invoked from network); 30 Jun 2006 17:22:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 17:22:32 -0000
Received: (qmail 39426 invoked by uid 500); 30 Jun 2006 17:22:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39385 invoked by uid 500); 30 Jun 2006 17:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39374 invoked by uid 99); 30 Jun 2006 17:22:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 10:22:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 10:22:25 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.6/8.13.6) with ESMTP id k5UHM4um087299
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 19:22:04 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Any existing query types that support equivalent of  "-not interested" ?
Date: Fri, 30 Jun 2006 19:22:02 +0200
User-Agent: KMail/1.8.2
References: <20060630154726.22284.qmail@web26009.mail.ukl.yahoo.com> <FC0953D4-7330-4D2F-8E98-18BCD7EA0095@ehatchersolutions.com> <44A55AE0.6030607@yahoo.co.uk>
In-Reply-To: <44A55AE0.6030607@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606301922.03113.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 30 June 2006 19:09, markharw00d wrote:
> Erik Hatcher wrote:
> 
> > wouldn't this work?   +interested -"not interested"
> 
> Hi Erik.
> Yes, sorry brain is disengaged with all the heat here -  my example 
> wasn't great and my scenario may be more complex than I originally 
> outlined. I may have 20 different ways of saying "interested" and want 
> to query for these words - but only if they aren't immediately preceded 
> by "not", "isn't" or a choice of other negatives. I was looking for 
> something efficient and succint in SpanQuerys to help.

Maybe this:

SpanNotQuery(interested, SpanNearQuery(not,interested))

with a SpanTermQuery for each term?

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 18:13:14 2006
Return-Path: <java-user-return-21717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9901 invoked from network); 30 Jun 2006 18:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 18:13:14 -0000
Received: (qmail 8034 invoked by uid 500); 30 Jun 2006 18:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8011 invoked by uid 500); 30 Jun 2006 18:13:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8000 invoked by uid 99); 30 Jun 2006 18:13:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 11:13:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.207.119.238] (HELO mail.netsweeper.com) (66.207.119.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 11:13:07 -0700
Received: from kobele.netsweeper.com ([192.168.1.181])
	by mail.netsweeper.com (8.12.11/8.12.11) with ESMTP id k5UICSYu028005
	for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 14:12:28 -0400
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: martin.kobele@netsweeper.com
Organization: Netsweeper Inc
To: java-user@lucene.apache.org
Subject: many many boolean queries
Date: Fri, 30 Jun 2006 14:14:58 -0400
User-Agent: KMail/1.9.3
X-Face: 'Hg*nnc?-\\wB.#~W"O5hQ,b%:&[TGXGb4s<t+.W~W!/_mV@xzrS=pN0(=?utf-8?q?ETzKvX3=5E=25eqTj=0A=09=2E=23=7BUNfQz=5EhwgOKc=2Es=23rw!?=,7^!mGYLwvK
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606301414.58512.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

since I use many wildcards, I get the exception, that the number of boolean 
queries exceeds the default value (1024).
I could simply increase the value to like 10,000 or something....
What would be the trade-off of using a high max value?

Thanks!

Martin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 18:22:00 2006
Return-Path: <java-user-return-21718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12095 invoked from network); 30 Jun 2006 18:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 18:22:00 -0000
Received: (qmail 23782 invoked by uid 500); 30 Jun 2006 18:21:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23007 invoked by uid 500); 30 Jun 2006 18:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22996 invoked by uid 99); 30 Jun 2006 18:21:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 11:21:54 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 11:21:53 -0700
Received: by py-out-1112.google.com with SMTP id d80so771233pyd
        for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 11:21:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sE8rKGIug9G4L4F8PRsLQpdK5H52qqkJ72M0Yh1+6iu6kh6xdW3ZK25FG+I6YVHMHsnawKOhNq1laQ95Yhx+47dRW/4KxbPC+HVQoJsHV9U0iNnVNXKoNz9asI4IHERu6T3s1CFfzcBZhxJQtcb6UmThTenucozSAufqv9YTIrc=
Received: by 10.35.57.5 with SMTP id j5mr740384pyk;
        Fri, 30 Jun 2006 11:21:33 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Fri, 30 Jun 2006 11:21:32 -0700 (PDT)
Message-ID: <359a92830606301121pe8280c9sac122a672c908c28@mail.gmail.com>
Date: Fri, 30 Jun 2006 14:21:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, martin.kobele@netsweeper.com
Subject: Re: many many boolean queries
In-Reply-To: <200606301414.58512.martin.kobele@netsweeper.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35500_20534747.1151691692781"
References: <200606301414.58512.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_35500_20534747.1151691692781
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The tradeoff is that it'll blow up eventually <G>. I have a really hard time
trusting increasing the clause count, since eventually, more
data/terms/something will blow my limit again.

You probably want to think seriously about using a filter, perhaps with a
RegexTermEnum. The folks who really know what they are talking about helped
me out a bunch a while ago, look for the thread "I just don't get wildcards
at all" in the archive.

Note that filters lose ranking information when you use them, as indicated
by the ConstanScoreQuery that you can use filters with.

Best
Erick

------=_Part_35500_20534747.1151691692781--

From java-user-return-21719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 19:05:35 2006
Return-Path: <java-user-return-21719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25286 invoked from network); 30 Jun 2006 19:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 19:05:34 -0000
Received: (qmail 1636 invoked by uid 500); 30 Jun 2006 19:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1455 invoked by uid 500); 30 Jun 2006 19:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1444 invoked by uid 99); 30 Jun 2006 19:05:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:05:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:05:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5A1F65B774; Fri, 30 Jun 2006 12:05:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 51AF57F403;
	Fri, 30 Jun 2006 12:05:00 -0700 (PDT)
Date: Fri, 30 Jun 2006 12:05:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: Spellchecker Download at lucene wiki outdated
In-Reply-To: <44A50CD5.7020000@uni-hd.de>
Message-ID: <Pine.LNX.4.58.0606301156500.4579@hal.rescomp.berkeley.edu>
References: <44A50CD5.7020000@uni-hd.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I don't know who can update the Wiki Pages so I am just mailing here.

anyone can edit the wiki, just create an account (click "Login" and it
will give you that option)

: So I wanted to build _only_ the spellcheck-contrib from the
: SVN-repository,   but it seems to me that there are no ant-targets for that?

All Contrib packages are built automatically when you buidld Lucene, so
just use "ant package-tgz" (or package-zip if you prefer) and you'll find
all the contrib jars in build/contrib/*/ as well as in the
dist/lucene-*.tgz file



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 19:39:55 2006
Return-Path: <java-user-return-21720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40601 invoked from network); 30 Jun 2006 19:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 19:39:55 -0000
Received: (qmail 52403 invoked by uid 500); 30 Jun 2006 19:39:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52366 invoked by uid 500); 30 Jun 2006 19:39:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52350 invoked by uid 99); 30 Jun 2006 19:39:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:39:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of monsurh@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:39:48 -0700
Received: by nz-out-0102.google.com with SMTP id k1so25096nzf
        for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 12:39:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JTZTXzxczq0lTANEdnWZOqBnYrdU59jYfefAOIB0TAIHil9Va9U233TNZm1t4onVcuFo/cJ0HN0vApr3kBX2RrsKeZJInLej71pR6i/gqwj9l6L2XTPB34rvcs2tcEY5+ZKqHYMPrL+peGP8bifuD6m8Vjszt4jq/I93YhJxRLk=
Received: by 10.36.18.3 with SMTP id 3mr1153849nzr;
        Fri, 30 Jun 2006 12:39:27 -0700 (PDT)
Received: by 10.36.5.16 with HTTP; Fri, 30 Jun 2006 12:39:27 -0700 (PDT)
Message-ID: <de98de150606301239y4ea8ba57p39621c478e41d67d@mail.gmail.com>
Date: Fri, 30 Jun 2006 15:39:27 -0400
From: "Monsur Hossain" <monsurh@gmail.com>
To: java-user@lucene.apache.org
Subject: Changing the MergeFactor - should I reindex?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a system of 2 servers, one to index and one to search.  The
index server updates the Lucene index and then copies the 200 meg
index over to the search server.  Originally, the index server would
optimize the index before copying.  To improve performance, I stopped
optimizing, dropped the mergefactor down to 2, and then copied only
the changed segments to the search server (most of the runtime was
taken up optimizing and copying the index; this change dropped the
runtime from 2 minutes down to 2 seconds!).

After switching to this system, I've noticed that the .del file for
the original 200 meg segment is growing pretty large (I'm updating
every 2 minutes, and there are always some deletions/additions).

My question is this: Am I fine letting this .del file grow, or should
I reindex the entire index with a mergefactor of 2 (to better
distribute the deletions)?

Monsur

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 19:42:23 2006
Return-Path: <java-user-return-21721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40863 invoked from network); 30 Jun 2006 19:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 19:42:23 -0000
Received: (qmail 54490 invoked by uid 500); 30 Jun 2006 19:42:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54464 invoked by uid 500); 30 Jun 2006 19:42:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54451 invoked by uid 99); 30 Jun 2006 19:42:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:42:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.207.119.238] (HELO mail.netsweeper.com) (66.207.119.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 12:42:17 -0700
Received: from kobele.netsweeper.com ([192.168.1.181])
	by mail.netsweeper.com (8.12.11/8.12.11) with ESMTP id k5UJffQ9003694;
	Fri, 30 Jun 2006 15:41:41 -0400
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: martin.kobele@netsweeper.com
Organization: Netsweeper Inc
To: java-user@lucene.apache.org
Subject: Re: many many boolean queries
Date: Fri, 30 Jun 2006 15:41:40 -0400
User-Agent: KMail/1.9.3
Cc: "Erick Erickson" <erickerickson@gmail.com>
References: <200606301414.58512.martin.kobele@netsweeper.com> <359a92830606301121pe8280c9sac122a672c908c28@mail.gmail.com>
In-Reply-To: <359a92830606301121pe8280c9sac122a672c908c28@mail.gmail.com>
X-Face: 'Hg*nnc?-\\wB.#~W"O5hQ,b%:&[TGXGb4s<t+.W~W!/_mV@xzrS=pN0(=?utf-8?q?ETzKvX3=5E=25eqTj=0A=09=2E=23=7BUNfQz=5EhwgOKc=2Es=23rw!?=,7^!mGYLwvK
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200606301541.40745.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


thank you!

Martin

On Friday 30 June 2006 14:21, Erick Erickson wrote:
> The tradeoff is that it'll blow up eventually <G>. I have a really hard
> time trusting increasing the clause count, since eventually, more
> data/terms/something will blow my limit again.
>
> You probably want to think seriously about using a filter, perhaps with a
> RegexTermEnum. The folks who really know what they are talking about helped
> me out a bunch a while ago, look for the thread "I just don't get wildcards
> at all" in the archive.
>
> Note that filters lose ranking information when you use them, as indicated
> by the ConstanScoreQuery that you can use filters with.
>
> Best
> Erick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 20:02:59 2006
Return-Path: <java-user-return-21722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43641 invoked from network); 30 Jun 2006 20:02:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 20:02:59 -0000
Received: (qmail 81338 invoked by uid 500); 30 Jun 2006 20:02:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81314 invoked by uid 500); 30 Jun 2006 20:02:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81303 invoked by uid 99); 30 Jun 2006 20:02:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 13:02:53 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jun 2006 13:02:52 -0700
Received: (qmail 25598 invoked by uid 60001); 30 Jun 2006 20:02:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Aqv45vTejt3V/nWEHUzR3E5Y8LAhTDBotakoEaMlpZh4djod3oZNJaMplwvtQMML3zKB+JVvu4Fy80H7gu+f2z7cSJEVbIGR1JhPDVOwY+jecWnc93VmgAok4niJiLQSJc+9MX2jwkn+Jkt+P6++nfWgmijC5Jt8to1Nd9wlmQw=  ;
Message-ID: <20060630200231.25596.qmail@web50303.mail.yahoo.com>
Received: from [72.229.167.99] by web50303.mail.yahoo.com via HTTP; Fri, 30 Jun 2006 13:02:31 PDT
Date: Fri, 30 Jun 2006 13:02:31 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Changing the MergeFactor - should I reindex?
To: java-user@lucene.apache.org
In-Reply-To: <de98de150606301239y4ea8ba57p39621c478e41d67d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Monsur,

You don't need to reindex everything after changing merge factor.  As for growing the .del file, I believe the .del file simply keeps track of documents that have been deleted (and should thus not show up in search results).  Thus, I think you can let the file grow, although at some point it may make sense to optimize everything - I'm not sure how much reader.isDeleted(docNum) calls affect performance when the number of documents gets large.... but you'll find out :)  And when you do, all you'll need to do is optimize the index on the indexing server and push it to the search server.

Otis

----- Original Message ----
From: Monsur Hossain <monsurh@gmail.com>
To: java-user@lucene.apache.org
Sent: Friday, June 30, 2006 3:39:27 PM
Subject: Changing the MergeFactor - should I reindex?

I have a system of 2 servers, one to index and one to search.  The
index server updates the Lucene index and then copies the 200 meg
index over to the search server.  Originally, the index server would
optimize the index before copying.  To improve performance, I stopped
optimizing, dropped the mergefactor down to 2, and then copied only
the changed segments to the search server (most of the runtime was
taken up optimizing and copying the index; this change dropped the
runtime from 2 minutes down to 2 seconds!).

After switching to this system, I've noticed that the .del file for
the original 200 meg segment is growing pretty large (I'm updating
every 2 minutes, and there are always some deletions/additions).

My question is this: Am I fine letting this .del file grow, or should
I reindex the entire index with a mergefactor of 2 (to better
distribute the deletions)?

Monsur

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 20:07:49 2006
Return-Path: <java-user-return-21723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45004 invoked from network); 30 Jun 2006 20:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 20:07:48 -0000
Received: (qmail 94746 invoked by uid 500); 30 Jun 2006 20:07:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94523 invoked by uid 500); 30 Jun 2006 20:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94512 invoked by uid 99); 30 Jun 2006 20:07:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 13:07:42 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jun 2006 13:07:41 -0700
Received: (qmail 77804 invoked by uid 60001); 30 Jun 2006 20:07:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Au/82RWQpbFag+P7L/uvMMtpKzwiR0FbL9kjzJasNxk4icqkbjg/drb5ruOlskKfpJffys+4mBRofmBs2ANDltGPKXgGRvVXrKT4nxjx9wQ02lPCCrq7LUUih/+O4GLYg+HNUsQW565734GhjoIwAKGu+Ekxq9t2XihPuVtCJ6w=  ;
Message-ID: <20060630200720.77802.qmail@web50311.mail.yahoo.com>
Received: from [72.229.167.99] by web50311.mail.yahoo.com via HTTP; Fri, 30 Jun 2006 13:07:20 PDT
Date: Fri, 30 Jun 2006 13:07:20 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Spellchecker Download at lucene wiki outdated
To: java-user@lucene.apache.org
In-Reply-To: <44A50CD5.7020000@uni-hd.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Martin, I removed the attachment and the link to it.
In the future, please feel free to edit Wiki pages yourself, that's the main idea behind Wikis. :)

Otis

----- Original Message ----
From: Martin Braun <mbraun@uni-hd.de>
To: java-user@lucene.apache.org
Sent: Friday, June 30, 2006 7:36:53 AM
Subject: Spellchecker Download at lucene wiki outdated

Hi all,
I don't know who can update the Wiki Pages so I am just mailing here.

The download of spellchecker1.1.zip
contribution does not work with Lucene-2.0 anymore.

http://wiki.apache.org/jakarta-lucene/SpellChecker?highlight=spellchecker1.1.zip

So I wanted to build _only_ the spellcheck-contrib from the
SVN-repository,   but it seems to me that there are no ant-targets for that?

thanks,
martin





-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 21:26:54 2006
Return-Path: <java-user-return-21724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55511 invoked from network); 30 Jun 2006 21:26:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 21:26:54 -0000
Received: (qmail 86732 invoked by uid 500); 30 Jun 2006 21:26:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86609 invoked by uid 500); 30 Jun 2006 21:26:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86591 invoked by uid 99); 30 Jun 2006 21:26:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:26:46 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of monsurh@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO nz-out-0102.google.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 14:26:46 -0700
Received: by nz-out-0102.google.com with SMTP id k1so39557nzf
        for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 14:26:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=m51zPdRMNkQ2marsmJvdP3Sgh91cmq6gQgaRSM+sTgJqtoi4wiEoF4NFMMl2D+TebxRulKi+xJ8ZZZnTYEpCTFO0NHtrJ/H6bQ1ria2PnTIETXYFp5DiPkuYoitDnke74INbzawGPILAR9MjJuhRTTkr/Qkiq863XoPzxd5INSs=
Received: by 10.36.18.16 with SMTP id 16mr1246076nzr;
        Fri, 30 Jun 2006 14:26:25 -0700 (PDT)
Received: by 10.36.5.16 with HTTP; Fri, 30 Jun 2006 14:26:25 -0700 (PDT)
Message-ID: <de98de150606301426m4a27157dmc32881fad2d5f1dc@mail.gmail.com>
Date: Fri, 30 Jun 2006 17:26:25 -0400
From: "Monsur Hossain" <monsurh@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Changing the MergeFactor - should I reindex?
In-Reply-To: <20060630200231.25596.qmail@web50303.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <de98de150606301239y4ea8ba57p39621c478e41d67d@mail.gmail.com>
	 <20060630200231.25596.qmail@web50303.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Otis.

When two segments are merged into one, are they merged contiguously,
so that the individual .del files for the individual segments will no
longer be needed?  Or are the .del files merged into a single larger
.del file for the new segment?

Monsur



On 6/30/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Monsur,
>
> You don't need to reindex everything after changing merge factor.  As for growing the .del file, I believe the .del file simply keeps track of documents that have been deleted (and should thus not show up in search results).  Thus, I think you can let the file grow, although at some point it may make sense to optimize everything - I'm not sure how much reader.isDeleted(docNum) calls affect performance when the number of documents gets large.... but you'll find out :)  And when you do, all you'll need to do is optimize the index on the indexing server and push it to the search server.
>
> Otis
>
> ----- Original Message ----
> From: Monsur Hossain <monsurh@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 30, 2006 3:39:27 PM
> Subject: Changing the MergeFactor - should I reindex?
>
> I have a system of 2 servers, one to index and one to search.  The
> index server updates the Lucene index and then copies the 200 meg
> index over to the search server.  Originally, the index server would
> optimize the index before copying.  To improve performance, I stopped
> optimizing, dropped the mergefactor down to 2, and then copied only
> the changed segments to the search server (most of the runtime was
> taken up optimizing and copying the index; this change dropped the
> runtime from 2 minutes down to 2 seconds!).
>
> After switching to this system, I've noticed that the .del file for
> the original 200 meg segment is growing pretty large (I'm updating
> every 2 minutes, and there are always some deletions/additions).
>
> My question is this: Am I fine letting this .del file grow, or should
> I reindex the entire index with a mergefactor of 2 (to better
> distribute the deletions)?
>
> Monsur
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 22:36:59 2006
Return-Path: <java-user-return-21725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65648 invoked from network); 30 Jun 2006 22:36:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 22:36:59 -0000
Received: (qmail 62045 invoked by uid 500); 30 Jun 2006 22:36:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62013 invoked by uid 500); 30 Jun 2006 22:36:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62002 invoked by uid 99); 30 Jun 2006 22:36:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 15:36:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.164.102.196] (HELO mail.gotuit.com) (216.164.102.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 15:36:50 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69C95.A115FE1D"
Subject: Null field values
Date: Fri, 30 Jun 2006 18:36:29 -0400
Message-ID: <586B46B62C73C44AA8F4302E01A84A84611E@exchange.gotuit.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Null field values
Thread-Index: AcaclaDt1ukuFkhLRVSji6a7Rke5Aw==
From: "Seeta Somagani" <seeta@gotuit.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69C95.A115FE1D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I indexed some XML files using Lucene. When I open up the index using
Luke, I can see that all the fields are stored correctly in the index.
But, when I try to grab the fields from the hits, after searching, some
of the values are being returned as null. Any suggestions about what
might be going wrong?

=20

Thanks,

Seeta=20

=20


------_=_NextPart_001_01C69C95.A115FE1D--

From java-user-return-21726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 22:55:22 2006
Return-Path: <java-user-return-21726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68539 invoked from network); 30 Jun 2006 22:55:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 22:55:21 -0000
Received: (qmail 88525 invoked by uid 500); 30 Jun 2006 22:55:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88482 invoked by uid 500); 30 Jun 2006 22:55:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88471 invoked by uid 99); 30 Jun 2006 22:55:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 15:55:16 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 15:55:15 -0700
Received: by py-out-1112.google.com with SMTP id d80so841732pyd
        for <java-user@lucene.apache.org>; Fri, 30 Jun 2006 15:54:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OE5x5TQ+qUG1iRFSG1s/PadaSZ9eFr4McY7JMDDhDYxU0AHVdhEqj12hP0FQyuVwC7pIC1GrBcHixbir3GJrq36UTOIXRYeDE3PpUby7DKq1k5YnzAzXSLj53+w83Cb7viC84f5eBDan/m6F9tKZftuYe+8R/kkkAIsOeasIjqE=
Received: by 10.35.123.10 with SMTP id a10mr929702pyn;
        Fri, 30 Jun 2006 15:54:55 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Fri, 30 Jun 2006 15:54:55 -0700 (PDT)
Message-ID: <359a92830606301554p41c2f007n60125fa47e816241@mail.gmail.com>
Date: Fri, 30 Jun 2006 18:54:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Null field values
In-Reply-To: <586B46B62C73C44AA8F4302E01A84A84611E@exchange.gotuit.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39005_22786081.1151708095245"
References: <586B46B62C73C44AA8F4302E01A84A84611E@exchange.gotuit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_39005_22786081.1151708095245
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There is no requirement that every document contain values for every field.
Doc A could have fields z, y, x, and Doc B could have fields x, w, v. So,
when you say "some of the values are being returned as null", do you mean
that you *never* get any values for some field or you get values for a field
for some, but not all documents?

You might try using Luke to look at the specific document that's giving you
problems and see if it has values for all fields. You can enter the document
ID (i.e. Lucene's internal doc.id()) in the search field and examine the
actual doc (sorry if you know that already <G>). I think it's the second
tab, titled "document..."

If you never get values for some field that Luke shows is in the index, the
first place I'd look is whether have the field name correctly entere
(including case).

Hope this helps
Erick

------=_Part_39005_22786081.1151708095245--

From java-user-return-21727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 23:07:28 2006
Return-Path: <java-user-return-21727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71446 invoked from network); 30 Jun 2006 23:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 23:07:27 -0000
Received: (qmail 10399 invoked by uid 500); 30 Jun 2006 23:07:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10225 invoked by uid 500); 30 Jun 2006 23:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10214 invoked by uid 99); 30 Jun 2006 23:07:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:07:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.164.102.196] (HELO mail.gotuit.com) (216.164.102.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:07:20 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Null field values
Date: Fri, 30 Jun 2006 19:06:59 -0400
Message-ID: <586B46B62C73C44AA8F4302E01A84A84611F@exchange.gotuit.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Null field values
Thread-Index: AcacmEM7hbRvCTPBSaqaQRAB/aug8AAAP4Ag
From: "Seeta Somagani" <seeta@gotuit.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erick,

The fields that are missing are sort of primary keys and they exist in
all the documents (including those that were returned in my search
results) when I browsed through the index using Luke. And the field
names are exactly the same all in the same case. I never get the three
field values no matter what I'm searching for.

Thanks,
Seeta

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Friday, June 30, 2006 6:55 PM
To: java-user@lucene.apache.org
Subject: Re: Null field values

There is no requirement that every document contain values for every
field.
Doc A could have fields z, y, x, and Doc B could have fields x, w, v.
So,
when you say "some of the values are being returned as null", do you
mean
that you *never* get any values for some field or you get values for a
field
for some, but not all documents?

You might try using Luke to look at the specific document that's giving
you
problems and see if it has values for all fields. You can enter the
document
ID (i.e. Lucene's internal doc.id()) in the search field and examine the
actual doc (sorry if you know that already <G>). I think it's the second
tab, titled "document..."

If you never get values for some field that Luke shows is in the index,
the
first place I'd look is whether have the field name correctly entere
(including case).

Hope this helps
Erick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 23:10:43 2006
Return-Path: <java-user-return-21728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72380 invoked from network); 30 Jun 2006 23:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 23:10:42 -0000
Received: (qmail 16443 invoked by uid 500); 30 Jun 2006 23:10:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16419 invoked by uid 500); 30 Jun 2006 23:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16408 invoked by uid 99); 30 Jun 2006 23:10:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:10:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.96] (HELO smtp007.mail.ukl.yahoo.com) (217.12.11.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jun 2006 16:10:34 -0700
Received: (qmail 82049 invoked from network); 30 Jun 2006 23:10:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=LjH4pUnktceUvnRdLyNpF5fyV/yEP+jBCYJAPtcO6O+dUBL53qmDsg9pzQFTsp5ybHFhZmFGLvH29vxxQ0/7EzwUv2s8KYyJeGZbIcX5ftw9htB4DErHzJDDxBbbH7C8sGQuKURVwkFP9iKeFZrBSX2nnD4JSKgX3PMAG9pzi8s=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp007.mail.ukl.yahoo.com with SMTP; 30 Jun 2006 23:10:12 -0000
Message-ID: <44A5AF52.1040604@yahoo.co.uk>
Date: Sat, 01 Jul 2006 00:10:10 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Any existing query types that support equivalent of  "-not interested"
 ?
References: <20060630154726.22284.qmail@web26009.mail.ukl.yahoo.com> <FC0953D4-7330-4D2F-8E98-18BCD7EA0095@ehatchersolutions.com> <44A55AE0.6030607@yahoo.co.uk> <200606301922.03113.paul.elschot@xs4all.nl>
In-Reply-To: <200606301922.03113.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>Maybe this:
>
>SpanNotQuery(interested, SpanNearQuery(not,interested))
>
>with a SpanTermQuery for each term?
>  
>

Thanks, Paul. This is working well for me and I can happily use multiple 
SpanTermQueries embedded in a SpanOrQuery in place of each of the single 
words in your example.

SpanNotQuery(
	SpanOrQuery(interested,curious...) 
	SpanNearQuery(
		SpanOrQuery(not,wasnt,isnt,...)
		SpanOrQuery(interested,curious...)
		)
	)




	
	
		
___________________________________________________________ 
All new Yahoo! Mail "The new Interface is stunning in its simplicity and ease of use." - PC Magazine 
http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 30 23:11:25 2006
Return-Path: <java-user-return-21729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72699 invoked from network); 30 Jun 2006 23:11:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2006 23:11:25 -0000
Received: (qmail 20623 invoked by uid 500); 30 Jun 2006 23:11:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20565 invoked by uid 500); 30 Jun 2006 23:11:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20533 invoked by uid 99); 30 Jun 2006 23:11:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:11:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dominik@dbruhn.de designates 213.239.217.207 as permitted sender)
Received: from [213.239.217.207] (HELO flacons.org) (213.239.217.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jun 2006 16:11:17 -0700
Received: from localhost (localhost [127.0.0.1])
	by flacons.org (flacons.org) with ESMTP id 4CFE936804E
	for <java-user@lucene.apache.org>; Sat,  1 Jul 2006 01:10:55 +0200 (CEST)
Received: from flacons.org ([127.0.0.1])
	by localhost (debian [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 21600-05 for <java-user@lucene.apache.org>;
	Sat, 1 Jul 2006 01:10:51 +0200 (CEST)
Received: from localhost (dslb-084-057-169-213.pools.arcor-ip.net [84.57.169.213])
	by flacons.org (flacons.org) with ESMTP id 18162368024
	for <java-user@lucene.apache.org>; Sat,  1 Jul 2006 01:10:51 +0200 (CEST)
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Sorting & SQL-Database
Date: Sat, 1 Jul 2006 01:10:50 +0200
User-Agent: KMail/1.9.3
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607010110.50154.dominik@dbruhn.de>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at flacons.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy,
i use Lucene to index a SQL-Table which contains three fields: a index-field, 
the text to search in and another field. When adding a lucene document I let 
Lucene index the search-field and also save the id along with it in the 
lucene index.

Uppon searching I collect all ids and add them to a java-string with commas in 
between to issue a SQL-Query like this one:

SELECT id,addfield FROM table WHERE id IN ([LUCENERESULT]);

Where LUCENERESULT is like 2,3,19,3,5.

This works fine but got one problem: The Search-Result of Lucene is order by 
relevance and so the id-list is also sorted by relevance. But the result of 
the SQL-Query is sorted by the id which destroys the relevance-sorting.

Does anybody know a work-arround?


Thanks
-- 
Dominik Bruhn
mailto: dominik@dbruhn.de
http://www.dbruhn.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


