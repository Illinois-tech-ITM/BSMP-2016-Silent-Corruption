From java-user-return-47179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 01 12:45:40 2010
Return-Path: <java-user-return-47179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72396 invoked from network); 1 Sep 2010 12:45:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Sep 2010 12:45:40 -0000
Received: (qmail 72598 invoked by uid 500); 1 Sep 2010 12:45:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72262 invoked by uid 500); 1 Sep 2010 12:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72254 invoked by uid 99); 1 Sep 2010 12:45:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Sep 2010 12:45:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.53] (HELO smtp2.bedag.ch) (192.112.254.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Sep 2010 12:45:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp2.bedag.ch (Postfix) with ESMTP id 446AA73E42
	for <java-user@lucene.apache.org>; Wed,  1 Sep 2010 14:45:03 +0200 (CEST)
X-Quarantine-ID: <0lbOG8W+1rIS>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB49D3.7CCDC032"
Subject: Combine data from index and db before sorting and pagination
Date: Wed, 1 Sep 2010 14:43:07 +0200
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Combine data from index and db before sorting and pagination
Thread-Index: ActJ03z9eW3W4uhUTA2Kh0OEOvVfkg==
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Sep 2010 12:44:59.0523 (UTC) FILETIME=[7D0EA530:01CB49D3]

------_=_NextPart_001_01CB49D3.7CCDC032
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi

=20

I need to implement sorting and pagination of lucene search results.
This is quite easy, but I have to combine Data from the index with data
from a database. The index has the fulltext data plus a unique
identifier for a record from the database. The database stores
additional data. Fulltext search is only done on the index. I need to
combine the search results from the index and the additional data from
the database before sorting and pagination.

=20

Is the IndexReader.document() Method the right place to enrich the data
from the index with data from the db? How should I implement this
functionality with lucene?

=20

Thanks in advance

Mirko

=20


------_=_NextPart_001_01CB49D3.7CCDC032--

From java-user-return-47180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 01 13:18:19 2010
Return-Path: <java-user-return-47180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82460 invoked from network); 1 Sep 2010 13:18:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Sep 2010 13:18:19 -0000
Received: (qmail 12665 invoked by uid 500); 1 Sep 2010 13:18:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12351 invoked by uid 500); 1 Sep 2010 13:18:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12343 invoked by uid 99); 1 Sep 2010 13:18:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Sep 2010 13:18:12 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Sep 2010 13:18:06 +0000
Received: by qyk2 with SMTP id 2so9333273qyk.14
        for <java-user@lucene.apache.org>; Wed, 01 Sep 2010 06:17:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=UKYOMTp1qlROJV1gIH2rZAsyAg2f/ug5v9iFKNpXrW0=;
        b=WHz3Q111x/f7ocs7LoIo9ybSPzy69dyP1noF3YmsFZ1Qn/XbYdKGV/z7v/GmqFwlM5
         7puD/bz19zhTY1n2b6tjCsddtoRzJJE3qkIHcO24PM6Sj7Sx7gGWnt/UbBlMfjTDQQyK
         JbpSpy7PoCh1frIa88uDMGg0eOZ5LsYwy6LNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=L/Z/xF3G1No9pT18R3NVtdI7JemT/Ntu1nx0J3awA/uftRHmWBjuZmn5TkWHhBY88d
         IXN9f0u9HTAM9Fa2xDoPoMTBKyyDvIkpul0NRZlzNgEmA1LbTzwDWhW+D5mjTxEQD7vl
         b4S2kmdsBbwV1llGoNDob14FLK1NNHwgiJAo0=
Received: by 10.229.234.4 with SMTP id ka4mr5263466qcb.12.1283347056200; Wed,
 01 Sep 2010 06:17:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.223.132 with HTTP; Wed, 1 Sep 2010 06:16:46 -0700 (PDT)
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
References: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 1 Sep 2010 14:16:46 +0100
Message-ID: <AANLkTinzUgWFm+-ocXGaYYkqVNfwx59v+2ocREyN3E1z@mail.gmail.com>
Subject: Re: Combine data from index and db before sorting and pagination
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

If the sorting and pagination doesn't require data from the database,
just do db lookups for the hits on a page, page by page as required.
But if the db data is required I'd suggest storing it in the index.


--
Ian.

On Wed, Sep 1, 2010 at 1:43 PM, Sertic Mirko, Bedag
<Mirko.Sertic@bedag.ch> wrote:
> Hi
>
>
>
> I need to implement sorting and pagination of lucene search results.
> This is quite easy, but I have to combine Data from the index with data
> from a database. The index has the fulltext data plus a unique
> identifier for a record from the database. The database stores
> additional data. Fulltext search is only done on the index. I need to
> combine the search results from the index and the additional data from
> the database before sorting and pagination.
>
>
>
> Is the IndexReader.document() Method the right place to enrich the data
> from the index with data from the db? How should I implement this
> functionality with lucene?
>
>
>
> Thanks in advance
>
> Mirko
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 01 13:20:14 2010
Return-Path: <java-user-return-47181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83417 invoked from network); 1 Sep 2010 13:20:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Sep 2010 13:20:14 -0000
Received: (qmail 16598 invoked by uid 500); 1 Sep 2010 13:20:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16257 invoked by uid 500); 1 Sep 2010 13:20:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16244 invoked by uid 99); 1 Sep 2010 13:20:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Sep 2010 13:20:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Sep 2010 13:20:01 +0000
Received: by qwk3 with SMTP id 3so7862911qwk.35
        for <java-user@lucene.apache.org>; Wed, 01 Sep 2010 06:19:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=UKYOMTp1qlROJV1gIH2rZAsyAg2f/ug5v9iFKNpXrW0=;
        b=lN4ke7Vtj0kzoKQmdx0a+6IcFCMI3D1cPaFkXM7nqCvIBUTflIn1OdEBRpTn7ZBt1t
         gzOqDYAiVDZnLXv5S7S568FwSJhXnW5koVSssCA+v7kJHux0cAy3aRi2RyNgt1DubiAk
         wTEvvzhmlcXPvMPoJkoU8Qz+eK/cw9pB5ItbA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=L/Z/xF3G1No9pT18R3NVtdI7JemT/Ntu1nx0J3awA/uftRHmWBjuZmn5TkWHhBY88d
         IXN9f0u9HTAM9Fa2xDoPoMTBKyyDvIkpul0NRZlzNgEmA1LbTzwDWhW+D5mjTxEQD7vl
         b4S2kmdsBbwV1llGoNDob14FLK1NNHwgiJAo0=
Received: by 10.229.52.20 with SMTP id f20mr5147687qcg.243.1283347026185; Wed,
 01 Sep 2010 06:17:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.223.132 with HTTP; Wed, 1 Sep 2010 06:16:46 -0700 (PDT)
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
References: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 1 Sep 2010 14:16:46 +0100
Message-ID: <AANLkTinzUgWFm+-ocXGaYYkqVNfwx59v+2ocREyN3E1z@mail.gmail.com>
Subject: Re: Combine data from index and db before sorting and pagination
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

If the sorting and pagination doesn't require data from the database,
just do db lookups for the hits on a page, page by page as required.
But if the db data is required I'd suggest storing it in the index.


--
Ian.

On Wed, Sep 1, 2010 at 1:43 PM, Sertic Mirko, Bedag
<Mirko.Sertic@bedag.ch> wrote:
> Hi
>
>
>
> I need to implement sorting and pagination of lucene search results.
> This is quite easy, but I have to combine Data from the index with data
> from a database. The index has the fulltext data plus a unique
> identifier for a record from the database. The database stores
> additional data. Fulltext search is only done on the index. I need to
> combine the search results from the index and the additional data from
> the database before sorting and pagination.
>
>
>
> Is the IndexReader.document() Method the right place to enrich the data
> from the index with data from the db? How should I implement this
> functionality with lucene?
>
>
>
> Thanks in advance
>
> Mirko
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 01 13:31:32 2010
Return-Path: <java-user-return-47182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85833 invoked from network); 1 Sep 2010 13:31:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Sep 2010 13:31:32 -0000
Received: (qmail 34782 invoked by uid 500); 1 Sep 2010 13:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34443 invoked by uid 500); 1 Sep 2010 13:31:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34435 invoked by uid 99); 1 Sep 2010 13:31:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Sep 2010 13:31:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [192.112.254.53] (HELO smtp2.bedag.ch) (192.112.254.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Sep 2010 13:31:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp2.bedag.ch (Postfix) with ESMTP id 25C3A73EFA
	for <java-user@lucene.apache.org>; Wed,  1 Sep 2010 15:30:59 +0200 (CEST)
X-Quarantine-ID: <c+msYBsgAuHO>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Combine data from index and db before sorting and pagination
Date: Wed, 1 Sep 2010 15:30:54 +0200
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB04AE2B71@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Combine data from index and db before sorting and pagination
Thread-Index: ActJ2CWU5EOObPHYRl6QHBoWd5agKQAAY5Zw
References: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch> <AANLkTinzUgWFm+-ocXGaYYkqVNfwx59v+2ocREyN3E1z@mail.gmail.com>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Sep 2010 13:30:55.0304 (UTC) FILETIME=[E7A17480:01CB49D9]
X-Virus-Checked: Checked by ClamAV on apache.org

The data from db is required for sorting, and one db entry matches to =
many index entries, so storing it in the index would be redundant. Also =
there would be the challenge to keep index and db in sync. Any ideas?

Mirko

-----Urspr=FCngliche Nachricht-----
Von: Ian Lea [mailto:ian.lea@gmail.com]=20
Gesendet: Mittwoch, 1. September 2010 15:17
An: java-user@lucene.apache.org
Betreff: Re: Combine data from index and db before sorting and =
pagination

If the sorting and pagination doesn't require data from the database,
just do db lookups for the hits on a page, page by page as required.
But if the db data is required I'd suggest storing it in the index.


--
Ian.

On Wed, Sep 1, 2010 at 1:43 PM, Sertic Mirko, Bedag
<Mirko.Sertic@bedag.ch> wrote:
> Hi
>
>
>
> I need to implement sorting and pagination of lucene search results.
> This is quite easy, but I have to combine Data from the index with =
data
> from a database. The index has the fulltext data plus a unique
> identifier for a record from the database. The database stores
> additional data. Fulltext search is only done on the index. I need to
> combine the search results from the index and the additional data from
> the database before sorting and pagination.
>
>
>
> Is the IndexReader.document() Method the right place to enrich the =
data
> from the index with data from the db? How should I implement this
> functionality with lucene?
>
>
>
> Thanks in advance
>
> Mirko
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 01 23:29:57 2010
Return-Path: <java-user-return-47183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72216 invoked from network); 1 Sep 2010 23:29:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Sep 2010 23:29:56 -0000
Received: (qmail 26200 invoked by uid 500); 1 Sep 2010 23:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26137 invoked by uid 500); 1 Sep 2010 23:29:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26129 invoked by uid 99); 1 Sep 2010 23:29:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Sep 2010 23:29:54 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Sep 2010 23:29:48 +0000
Received: by qyk12 with SMTP id 12so1509493qyk.14
        for <java-user@lucene.apache.org>; Wed, 01 Sep 2010 16:29:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=2J0f2q+90DL4a5IP7k9vNiPmtDFVY1zKvYISgyUL5ts=;
        b=knAqmDbiX9pmWz0W9BK2jjEKrhfugkLK8yp8EPVsfZz57solAqFwi1ghb5eBXCcXTE
         ViXRAIrIin6StIB+tFXHWK+Dg/51OPKCIALb9XvzWbOcWrR+RJEU1BJMDsfLDMa82vQ5
         C4KTO0S5TgvAvROwKi9aQnuP+oMje1hiRmBNE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=e9ZoiCvvvZ/6XBc+j/mLHXhA17aY1vUX2Q/8cLFDA/WisI/UE5UiOwDachaD+D2QK0
         f2BaCBD5Pl0qRlNpw1kE29szUsB3s+TQ5D2vDPqj423/QyIEtL/ibT8DZBdwpgHRFfpQ
         fpviYOiUBe0guJ8gsmf/f9XesS9Ppj7AQIfNE=
MIME-Version: 1.0
Received: by 10.224.67.73 with SMTP id q9mr5622021qai.188.1283383766624; Wed,
 01 Sep 2010 16:29:26 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Wed, 1 Sep 2010 16:29:26 -0700 (PDT)
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB04AE2B71@A99A-EMS-01VS2.ad.bedag.ch>
References: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
	<AANLkTinzUgWFm+-ocXGaYYkqVNfwx59v+2ocREyN3E1z@mail.gmail.com>
	<1D3D7943573BD14FB024A9654EB43CCB04AE2B71@A99A-EMS-01VS2.ad.bedag.ch>
Date: Wed, 1 Sep 2010 19:29:26 -0400
Message-ID: <AANLkTi=65b0RPcOJM3PbqTSbeZ+UTWh8X5LFA_UWUHKS@mail.gmail.com>
Subject: Re: Combine data from index and db before sorting and pagination
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cdd26854527048f3b11ac

--0015175cdd26854527048f3b11ac
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

The usual first choice when using Lucene to search database data is to
denormalize the db data into the index. Yes, it's redundant, but it's often
a better solution than trying to use both. Synchronization can be an issue,
but you have to deal with that anyway since you're indexing from the db
anyway.

 But you haven't given us any indication of how much data you're talking
about here. Without some such detail, it's really hard to make a
recommendation.

Best
Erick

On Wed, Sep 1, 2010 at 9:30 AM, Sertic Mirko, Bedag
<Mirko.Sertic@bedag.ch>wrote:

> The data from db is required for sorting, and one db entry matches to man=
y
> index entries, so storing it in the index would be redundant. Also there
> would be the challenge to keep index and db in sync. Any ideas?
>
> Mirko
>
> -----Urspr=FCngliche Nachricht-----
> Von: Ian Lea [mailto:ian.lea@gmail.com]
> Gesendet: Mittwoch, 1. September 2010 15:17
> An: java-user@lucene.apache.org
> Betreff: Re: Combine data from index and db before sorting and pagination
>
> If the sorting and pagination doesn't require data from the database,
> just do db lookups for the hits on a page, page by page as required.
> But if the db data is required I'd suggest storing it in the index.
>
>
> --
> Ian.
>
> On Wed, Sep 1, 2010 at 1:43 PM, Sertic Mirko, Bedag
> <Mirko.Sertic@bedag.ch> wrote:
> > Hi
> >
> >
> >
> > I need to implement sorting and pagination of lucene search results.
> > This is quite easy, but I have to combine Data from the index with data
> > from a database. The index has the fulltext data plus a unique
> > identifier for a record from the database. The database stores
> > additional data. Fulltext search is only done on the index. I need to
> > combine the search results from the index and the additional data from
> > the database before sorting and pagination.
> >
> >
> >
> > Is the IndexReader.document() Method the right place to enrich the data
> > from the index with data from the db? How should I implement this
> > functionality with lucene?
> >
> >
> >
> > Thanks in advance
> >
> > Mirko
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cdd26854527048f3b11ac--

From java-user-return-47184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 02 01:07:51 2010
Return-Path: <java-user-return-47184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7578 invoked from network); 2 Sep 2010 01:07:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Sep 2010 01:07:50 -0000
Received: (qmail 12372 invoked by uid 500); 2 Sep 2010 01:07:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12320 invoked by uid 500); 2 Sep 2010 01:07:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12311 invoked by uid 99); 2 Sep 2010 01:07:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Sep 2010 01:07:47 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Sep 2010 01:07:43 +0000
Received: by wyf23 with SMTP id 23so12653796wyf.35
        for <java-user@lucene.apache.org>; Wed, 01 Sep 2010 18:07:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=GlOUBIrbRbIffY6jBTyGq3sSinCB0ZCg/AcmMr6mWj4=;
        b=lqZlFd2EaIDZMG8EULb8uTicROB/vyWY6JI9vuiIHvEujk33t7sKtinZ4iM2D/2p4x
         GNDRXbrcBPJQsi0E/WXjuIyavmWIBzVmas3zty9u5PUKwNrD2QJlEgSS8ajbwCy1MnE0
         V4f4+6jDalRrSrt8nIE+mGA/tiyQt6qkw3s2k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WDZh+yfkFirdShSgeKAwO3QvnjtrZE6I0pgExVXPmyxO3yCNtK07JRrHOpeqOhpRYT
         rnl4g7dZwpuQyuG663zjzm1UYs2k3vPOBGxe36dBbDHll4wInNMHpk58UE08CcG7XwAL
         gFUj0mOMtOARW1tvogGNGatRuVd/+hEijmqk0=
MIME-Version: 1.0
Received: by 10.227.135.71 with SMTP id m7mr8916039wbt.11.1283389641351; Wed,
 01 Sep 2010 18:07:21 -0700 (PDT)
Received: by 10.216.167.203 with HTTP; Wed, 1 Sep 2010 18:07:21 -0700 (PDT)
In-Reply-To: <AANLkTi=65b0RPcOJM3PbqTSbeZ+UTWh8X5LFA_UWUHKS@mail.gmail.com>
References: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
	<AANLkTinzUgWFm+-ocXGaYYkqVNfwx59v+2ocREyN3E1z@mail.gmail.com>
	<1D3D7943573BD14FB024A9654EB43CCB04AE2B71@A99A-EMS-01VS2.ad.bedag.ch>
	<AANLkTi=65b0RPcOJM3PbqTSbeZ+UTWh8X5LFA_UWUHKS@mail.gmail.com>
Date: Wed, 1 Sep 2010 18:07:21 -0700
Message-ID: <AANLkTik5niWBV+7wKUkFrctd4=A+r51yrRiz_+C875g-@mail.gmail.com>
Subject: Re: Combine data from index and db before sorting and pagination
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636832f32ae62cb048f3c6f04

--001636832f32ae62cb048f3c6f04
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

If there is an API to adjust the inverted index directly, it would be much
efficient.

I guess Mirko's problem is similar to this: There could be a "main_record"
table and "category" table. Each "main_record" has a "category".
When one "category" is changed, quite some "main_record" are affected.

If we denormalize the data, which is the only way currently for good sortin=
g
performance, we would need to re-index all the affected documents.
However, all the re-indexing work is quite inefficient.

Let's suppose the "category" is using Field.Index.NOT_ANALYZED and
Field.Store.YES.

So in the inverted index is conceptually like this:
 "category_1": doc1,doc2,doc5,doc10.
 "category_2": doc3,doc4,doc7,doc8.
If the only change is that several "category_1" records are changed to
"category_2", take doc5 and doc10 for example, after all the reindexing
effort, the only changes is:
 "category_1": doc1,doc2.
 "category_2": doc3,doc4,doc5,doc7,doc8,doc10.

Of course, to support this efficiently could be a big change, affecting all
the nice efficient DocDelta storage.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Wed, Sep 1, 2010 at 4:29 PM, Erick Erickson <erickerickson@gmail.com>wro=
te:

> The usual first choice when using Lucene to search database data is to
> denormalize the db data into the index. Yes, it's redundant, but it's oft=
en
> a better solution than trying to use both. Synchronization can be an issu=
e,
> but you have to deal with that anyway since you're indexing from the db
> anyway.
>
>  But you haven't given us any indication of how much data you're talking
> about here. Without some such detail, it's really hard to make a
> recommendation.
>
> Best
> Erick
>
> On Wed, Sep 1, 2010 at 9:30 AM, Sertic Mirko, Bedag
> <Mirko.Sertic@bedag.ch>wrote:
>
> > The data from db is required for sorting, and one db entry matches to
> many
> > index entries, so storing it in the index would be redundant. Also ther=
e
> > would be the challenge to keep index and db in sync. Any ideas?
> >
> > Mirko
> >
> > -----Urspr=FCngliche Nachricht-----
> > Von: Ian Lea [mailto:ian.lea@gmail.com]
> > Gesendet: Mittwoch, 1. September 2010 15:17
> > An: java-user@lucene.apache.org
> > Betreff: Re: Combine data from index and db before sorting and paginati=
on
> >
> > If the sorting and pagination doesn't require data from the database,
> > just do db lookups for the hits on a page, page by page as required.
> > But if the db data is required I'd suggest storing it in the index.
> >
> >
> > --
> > Ian.
> >
> > On Wed, Sep 1, 2010 at 1:43 PM, Sertic Mirko, Bedag
> > <Mirko.Sertic@bedag.ch> wrote:
> > > Hi
> > >
> > >
> > >
> > > I need to implement sorting and pagination of lucene search results.
> > > This is quite easy, but I have to combine Data from the index with da=
ta
> > > from a database. The index has the fulltext data plus a unique
> > > identifier for a record from the database. The database stores
> > > additional data. Fulltext search is only done on the index. I need to
> > > combine the search results from the index and the additional data fro=
m
> > > the database before sorting and pagination.
> > >
> > >
> > >
> > > Is the IndexReader.document() Method the right place to enrich the da=
ta
> > > from the index with data from the db? How should I implement this
> > > functionality with lucene?
> > >
> > >
> > >
> > > Thanks in advance
> > >
> > > Mirko
> > >
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--001636832f32ae62cb048f3c6f04--

From java-user-return-47185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 02 19:21:06 2010
Return-Path: <java-user-return-47185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27809 invoked from network); 2 Sep 2010 19:21:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Sep 2010 19:21:06 -0000
Received: (qmail 38090 invoked by uid 500); 2 Sep 2010 19:21:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38032 invoked by uid 500); 2 Sep 2010 19:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38023 invoked by uid 99); 2 Sep 2010 19:21:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Sep 2010 19:21:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Sep 2010 19:20:56 +0000
Received: by pzk4 with SMTP id 4so476833pzk.35
        for <java-user@lucene.apache.org>; Thu, 02 Sep 2010 12:20:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=233QD5RgZno6d+6HlTW/x6LygYBJiPY8QPDlkPuYxUo=;
        b=c3dG/yGNinsX4DASX2HTm3BWn3qsJ/olk+Ri4ZfT2QAQ55tOEyYfsQXWrVPHB9wvyg
         XNrHMm6/QEaDYmchIWzWYbz30qK9bWLti/O/vYI0if3dgONQJWo7zikudIuSNF/pYng7
         d94FSgLo+3dqVsmbQ+kYXUPeWDVrXaB9EcI5I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=wiDfkFgxQQL47bDqfIb0BHUU9UpZtf0Xeh35/+IoCVfTlk1XfMgRhnAUpx45dqdBYA
         /rvTRjcXAp1jOJgByXYP5GKmyNV6qmSls1JlHg2+BBf8r2/gp/8lVdTBIQ0MdO+6fGui
         hYFNynQUU2+QC6V5nzEUXVglNFISPlmCIk0bo=
Received: by 10.114.39.4 with SMTP id m4mr223952wam.98.1283455236131; Thu, 02
 Sep 2010 12:20:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.187.73 with HTTP; Thu, 2 Sep 2010 12:20:15 -0700 (PDT)
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
Date: Thu, 2 Sep 2010 21:20:15 +0200
Message-ID: <AANLkTikcgs137kQjW4-LrQ-qpKwoT5fq4-5BB5tZ9axC@mail.gmail.com>
Subject: Federated search with opensearch or proprietary APIs for Atlassian
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364175256f4b8e048f4bb5ba

--0016364175256f4b8e048f4bb5ba
Content-Type: text/plain; charset=UTF-8

Hi,

Does anybody have any experience with building federated search using
opensearch and/or proprietary APIs of Atlassian's products?

Many Atlassian's products have built in full-text search modules (running on
top of Lucene I think) that provide interesting and sometimes quite advanced
search features (including recommendations and identification of similar or
"the-like" documents). However, there does not seem to be any easy way how
to allow users search across multiple CMSs in useful way (or is there?) -
aka federated search. Atlassian seems to provide opensearch API in some
products (1.1 version still in draft since 2005!) or proprietary API (REST
based for example) that is subject to change with every product update. As
far as I understand opensearch is quite limited as well as the mentioned
REST API is. The later is bit more advanced but documentation for their
search API seems to be quite brief and learning how to do sorting, phrase
querying, boosting or anything more advanced then simple term query sounds
like spending time experimenting.

I believe the only reasonable and efficient way how to allow federated
search is to pull the content from individual CMSs into new search server
(like Solr for example). However, this may sound like reinventing the wheel
to the customers ("Atlassian product owns the data and their developers
invested a lot of resources into all the fancy search features, right? Why
to build it again?"). So, I would like to hear from anybody who can prove me
wrong on my opinion that unless I can grab, pull (steal if you will) and
index the data again then there is no way how to build something really
useful. By "more useful" I mean something more then just sending term
queries into individual CMSs and merging individual search results (which
does not allow building facets in efficient way, does not allow good sorting
and filtering, does not allow scoring control... etc... not to mention spell
checking, search suggestions, did you mean ...).

Regards,
Lukas

--0016364175256f4b8e048f4bb5ba--

From java-user-return-47186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 02 23:29:59 2010
Return-Path: <java-user-return-47186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 987 invoked from network); 2 Sep 2010 23:29:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Sep 2010 23:29:59 -0000
Received: (qmail 66500 invoked by uid 500); 2 Sep 2010 23:29:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66399 invoked by uid 500); 2 Sep 2010 23:29:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66391 invoked by uid 99); 2 Sep 2010 23:29:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Sep 2010 23:29:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Sep 2010 23:29:51 +0000
Received: by wyf23 with SMTP id 23so1121419wyf.35
        for <java-user@lucene.apache.org>; Thu, 02 Sep 2010 16:29:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=xj3bdEgx3C3kuOf9xhWfCqufVstoweCVfKF7KB1RKgE=;
        b=XbLcf4Mdjby4tSTpfJNObZ2ryWBv2N3PxGI40cG2tabk5I8wctZdIXuf55b6bivTYq
         7OSTrTxW6HFgX7XoZPpt7XxmXE2OorSlgfCJP/PZW+zM376L+j6yt0Br4O/mTzS8UqO3
         fGgEfJTHXjqKhKxar7X8inItqeNUsbYKqsMgA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XGRzmcajEDP+Br8XYw4vIRSo9g7m88j6fQ2uwKtKWv53a14emxryXezSR8YgOB7K3f
         /V1r/HPpiTkDh/8/tCdXN3dXGLR7SX0hIOY1uXECv6XRdun/nZnuX8NqBENvk0bRrsoc
         6R3z02aE8pkdG2R376l1Sz3FeWODZIeyvL72s=
MIME-Version: 1.0
Received: by 10.216.86.15 with SMTP id v15mr10083513wee.9.1283470146797; Thu,
 02 Sep 2010 16:29:06 -0700 (PDT)
Received: by 10.216.167.203 with HTTP; Thu, 2 Sep 2010 16:29:06 -0700 (PDT)
In-Reply-To: <AANLkTikcgs137kQjW4-LrQ-qpKwoT5fq4-5BB5tZ9axC@mail.gmail.com>
References: <AANLkTikcgs137kQjW4-LrQ-qpKwoT5fq4-5BB5tZ9axC@mail.gmail.com>
Date: Thu, 2 Sep 2010 16:29:06 -0700
Message-ID: <AANLkTi=m55dVsWM6f_A5GrHihqMim4vuSLgbAGDqgqJf@mail.gmail.com>
Subject: Re: Federated search with opensearch or proprietary APIs for Atlassian
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d999042e011a048f4f2ea8

--0016e6d999042e011a048f4f2ea8
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I understand your point. But Atlassian does not have a stable search API an=
d
you can not do too much with it.

It's better to have a separate search engine, where you can have most of th=
e
features, like facet search, ranking, pagination, etc, done for you(see my
signature). And you will be more flexible with the structure, even dealing
with data beyond Atlassian products.

I guess that's the reason Google did not rely on each website's own search
mechanism.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Thu, Sep 2, 2010 at 12:20 PM, Luk=C3=A1=C5=A1 Vl=C4=8Dek <lukas.vlcek@gm=
ail.com> wrote:

> Hi,
>
> Does anybody have any experience with building federated search using
> opensearch and/or proprietary APIs of Atlassian's products?
>
> Many Atlassian's products have built in full-text search modules (running
> on
> top of Lucene I think) that provide interesting and sometimes quite
> advanced
> search features (including recommendations and identification of similar =
or
> "the-like" documents). However, there does not seem to be any easy way ho=
w
> to allow users search across multiple CMSs in useful way (or is there?) -
> aka federated search. Atlassian seems to provide opensearch API in some
> products (1.1 version still in draft since 2005!) or proprietary API (RES=
T
> based for example) that is subject to change with every product update. A=
s
> far as I understand opensearch is quite limited as well as the mentioned
> REST API is. The later is bit more advanced but documentation for their
> search API seems to be quite brief and learning how to do sorting, phrase
> querying, boosting or anything more advanced then simple term query sound=
s
> like spending time experimenting.
>
> I believe the only reasonable and efficient way how to allow federated
> search is to pull the content from individual CMSs into new search server
> (like Solr for example). However, this may sound like reinventing the whe=
el
> to the customers ("Atlassian product owns the data and their developers
> invested a lot of resources into all the fancy search features, right? Wh=
y
> to build it again?"). So, I would like to hear from anybody who can prove
> me
> wrong on my opinion that unless I can grab, pull (steal if you will) and
> index the data again then there is no way how to build something really
> useful. By "more useful" I mean something more then just sending term
> queries into individual CMSs and merging individual search results (which
> does not allow building facets in efficient way, does not allow good
> sorting
> and filtering, does not allow scoring control... etc... not to mention
> spell
> checking, search suggestions, did you mean ...).
>
> Regards,
> Lukas
>

--0016e6d999042e011a048f4f2ea8--

From java-user-return-47187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 04:49:45 2010
Return-Path: <java-user-return-47187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83025 invoked from network); 3 Sep 2010 04:49:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 04:49:45 -0000
Received: (qmail 40821 invoked by uid 500); 3 Sep 2010 04:49:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40320 invoked by uid 500); 3 Sep 2010 04:49:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40312 invoked by uid 99); 3 Sep 2010 04:49:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 04:49:39 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.82.110.157] (HELO web29014.mail.ird.yahoo.com) (212.82.110.157)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Sep 2010 04:49:32 +0000
Received: (qmail 67168 invoked by uid 60001); 3 Sep 2010 04:49:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1283489351; bh=+P/PUPLac4wV1tA9XPHf7b5M62TMaw+2YQJiAIVD9KU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=If0i5Bx120RukOVuIQm+haU4+c+lna0vcKfpHXYS3ENii4ItQIq8CH3l8LrzIekJRZtZ7iDDdGNo2KqR19+glCpnZzNNeYewhFlSLS9YKPqoiYudg543fI9eJ2cFC4jMlbx319L3P01rb+gwtKb1nVWNQXUGsGp+TzPUxzDnvNc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Joey6pal0FEZn7ghWraI1fU0/7cN5Kicn4eu4sOxbZnSJVf725u/+API4CV7mzBnV3IfF5wFc+VRnHmaN2wJW6oxp5vS9DPOnvKijdaj60rmbeowC2dpQ8blfI9SzndENc55DBP7h/ZwY1qg32WBqclDjP7J8irYAUG2CWxO0uY=;
Message-ID: <80185.67115.qm@web29014.mail.ird.yahoo.com>
X-YMail-OSG: NiBPKdYVM1niu1n5L2.XjNRa2wdINNGF.SkOUmBibnfdGAh
 V1H5KphbblqgTPHbe.IbpTXH2.nhDoErMqCFDyyYxynigO9TPsPNkGvVpgNG
 fRhNY.wqElDXFdbH2l5KxHh9HTsOdyno43yxlDTR37tmp8g.oG5Mc.j8dGqD
 1zaw8WmDKlyGAOYVMGywFtU7UBO_2.qKaJK8FCmpWI33T5YUEwFmkM6FsrJg
 tfs1yq_IG2r1ybiPiYwJL5GEeiARcvYrAvrjvUs.60VxfTW4yUMf4DFmDuHQ
 XCP2K5WUj2pGtXMUgBdIsk1GYdrfgAUSBUQ--
Received: from [150.101.230.50] by web29014.mail.ird.yahoo.com via HTTP; Fri, 03 Sep 2010 04:49:10 GMT
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.105.279950
References: <AANLkTikcgs137kQjW4-LrQ-qpKwoT5fq4-5BB5tZ9axC@mail.gmail.com>
Date: Fri, 3 Sep 2010 04:49:10 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Federated search with opensearch or proprietary APIs for Atlassian
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTikcgs137kQjW4-LrQ-qpKwoT5fq4-5BB5tZ9axC@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

A pretty thorough exploration of the issues in federated search here:  =0Ah=
ttp://ilpubs.stanford.edu:8090/271/=0AI'd add "security" i.e. authenticatio=
n and authorisation to the list of issues =0Ato be considered (key in some =
environments).=0A=0AIf you consolidate content in a centralised Solr/Lucene=
 indexing facility by =0Aproviding batch data feeds from source systems I d=
on't think that can be =0Adescribed as "federated search". The issues of su=
ch consolidation become:=0A* Establishing connectivity/feeds that pass only=
 deltas from data sources=0A* Latency of updates =0A* Respecting any securi=
ty around source material (authentication, authorisation =0Aand auditing)=
=0A* Tackling concerns around overheads in "duplicating data" for large =0A=
installations=0A=0A=0ACheers,=0AMark=0A=0A=0A=0A=0A----- Original Message -=
---=0AFrom: Luk=C3=A1=C5=A1 Vl=C4=8Dek <lukas.vlcek@gmail.com>=0ATo: java-u=
ser@lucene.apache.org=0ASent: Fri, 3 September, 2010 4:50:15=0ASubject: Fed=
erated search with opensearch or proprietary APIs for Atlassian=0A=0AHi,=0A=
=0ADoes anybody have any experience with building federated search using=0A=
opensearch and/or proprietary APIs of Atlassian's products?=0A=0AMany Atlas=
sian's products have built in full-text search modules (running on=0Atop of=
 Lucene I think) that provide interesting and sometimes quite advanced=0Ase=
arch features (including recommendations and identification of similar or=
=0A"the-like" documents). However, there does not seem to be any easy way h=
ow=0Ato allow users search across multiple CMSs in useful way (or is there?=
) -=0Aaka federated search. Atlassian seems to provide opensearch API in so=
me=0Aproducts (1.1 version still in draft since 2005!) or proprietary API (=
REST=0Abased for example) that is subject to change with every product upda=
te. As=0Afar as I understand opensearch is quite limited as well as the men=
tioned=0AREST API is. The later is bit more advanced but documentation for =
their=0Asearch API seems to be quite brief and learning how to do sorting, =
phrase=0Aquerying, boosting or anything more advanced then simple term quer=
y sounds=0Alike spending time experimenting.=0A=0AI believe the only reason=
able and efficient way how to allow federated=0Asearch is to pull the conte=
nt from individual CMSs into new search server=0A(like Solr for example). H=
owever, this may sound like reinventing the wheel=0Ato the customers ("Atla=
ssian product owns the data and their developers=0Ainvested a lot of resour=
ces into all the fancy search features, right? Why=0Ato build it again?"). =
So, I would like to hear from anybody who can prove me=0Awrong on my opinio=
n that unless I can grab, pull (steal if you will) and=0Aindex the data aga=
in then there is no way how to build something really=0Auseful. By "more us=
eful" I mean something more then just sending term=0Aqueries into individua=
l CMSs and merging individual search results (which=0Adoes not allow buildi=
ng facets in efficient way, does not allow good sorting=0Aand filtering, do=
es not allow scoring control... etc... not to mention spell=0Achecking, sea=
rch suggestions, did you mean ...).=0A=0ARegards,=0ALukas=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 09:24:12 2010
Return-Path: <java-user-return-47188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60834 invoked from network); 3 Sep 2010 09:24:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 09:24:12 -0000
Received: (qmail 73535 invoked by uid 500); 3 Sep 2010 09:24:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73025 invoked by uid 500); 3 Sep 2010 09:24:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73017 invoked by uid 99); 3 Sep 2010 09:24:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 09:24:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.158.180.102] (HELO server721-han.de-nserver.de) (85.158.180.102)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 09:23:58 +0000
Received: (qmail 19872 invoked from network); 3 Sep 2010 11:23:42 +0200
Received: from 88-117-100-95.adsl.highway.telekom.at (HELO [192.168.10.20]) (88.117.100.95)
  (smtp-auth username gregi@hundsdreck.at, mechanism plain)
  by server721-han.de-nserver.de (qpsmtpd/0.82) with (AES256-SHA encrypted) ESMTPSA; Fri, 03 Sep 2010 11:23:42 +0200
Message-ID: <4C80BE96.9030108@lagentz.at>
Date: Fri, 03 Sep 2010 11:23:34 +0200
From: Gregor Dorfbauer <gregor.dorfbauer@lagentz.at>
User-Agent: Thunderbird 2.0.0.24 (X11/20100623)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Index Field feeded from Reader that also stores cleartext
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature"; micalg=sha1; boundary="------------ms060308010607070102090506"
X-User-Auth: Auth by gregi@hundsdreck.at through 88.117.100.95

--------------ms060308010607070102090506
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

 Hi!

I'm working on an indexer that should process documents on hard-disk 
which are of arbitrary size and type. I use Apache Tika for plain text 
extraction which offers the feature to stream the parsers output through 
a reader.

My problem is following:
Is there a possibility to generate a document field that gets its data 
from an Reader-instance and where the plain text is also stored into the 
index (like the Store.YES field denotes)?
If I can't stream the data, memory usage is exceeding the limits of my 
machine.


Thanks for your help,
Gregor

--------------ms060308010607070102090506
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"
Content-Description: S/MIME Cryptographic Signature

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIINJTCC
BjQwggQcoAMCAQICASAwDQYJKoZIhvcNAQEFBQAwfTELMAkGA1UEBhMCSUwxFjAUBgNVBAoT
DVN0YXJ0Q29tIEx0ZC4xKzApBgNVBAsTIlNlY3VyZSBEaWdpdGFsIENlcnRpZmljYXRlIFNp
Z25pbmcxKTAnBgNVBAMTIFN0YXJ0Q29tIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTA3
MTAyNDIxMDI1NVoXDTE3MTAyNDIxMDI1NVowgYwxCzAJBgNVBAYTAklMMRYwFAYDVQQKEw1T
dGFydENvbSBMdGQuMSswKQYDVQQLEyJTZWN1cmUgRGlnaXRhbCBDZXJ0aWZpY2F0ZSBTaWdu
aW5nMTgwNgYDVQQDEy9TdGFydENvbSBDbGFzcyAyIFByaW1hcnkgSW50ZXJtZWRpYXRlIENs
aWVudCBDQTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMsohUWcASz7GfKrpTOM
KqANy9BV7V0igWdGxA8IU77L3aTxErQ+fcxtDYZ36Z6GH0YFn7fq5RADteP0AYzrCA+EQTfi
8q1+kA3m0nwtwXG94M5sIqsvs7lRP1aycBke/s5g9hJHryZ2acScnzczjBCAo7X1v5G3yw8M
DP2m2RCye0KfgZ4nODerZJVzhAlOD9YejvAXZqHksw56HzElVIoYSZ3q4+RJuPXXfIoyby+Y
2m1E+YzX5iCZXBx05gk6MKAW1vaw4/v2OOLy6FZH3XHHtOkzUreG//CsFnB9+uaYSlR65cdG
zTsmoIK8WH1ygoXhRBm98SD7Hf/r3FELNvUCAwEAAaOCAa0wggGpMA8GA1UdEwEB/wQFMAMB
Af8wDgYDVR0PAQH/BAQDAgEGMB0GA1UdDgQWBBSuVYNv7DHKufcd+q9rMfPIHeOsuzAfBgNV
HSMEGDAWgBROC+8apEBbpRdphzDKNGhD0EGu8jBmBggrBgEFBQcBAQRaMFgwJwYIKwYBBQUH
MAGGG2h0dHA6Ly9vY3NwLnN0YXJ0c3NsLmNvbS9jYTAtBggrBgEFBQcwAoYhaHR0cDovL3d3
dy5zdGFydHNzbC5jb20vc2ZzY2EuY3J0MFsGA1UdHwRUMFIwJ6AloCOGIWh0dHA6Ly93d3cu
c3RhcnRzc2wuY29tL3Nmc2NhLmNybDAnoCWgI4YhaHR0cDovL2NybC5zdGFydHNzbC5jb20v
c2ZzY2EuY3JsMIGABgNVHSAEeTB3MHUGCysGAQQBgbU3AQIBMGYwLgYIKwYBBQUHAgEWImh0
dHA6Ly93d3cuc3RhcnRzc2wuY29tL3BvbGljeS5wZGYwNAYIKwYBBQUHAgEWKGh0dHA6Ly93
d3cuc3RhcnRzc2wuY29tL2ludGVybWVkaWF0ZS5wZGYwDQYJKoZIhvcNAQEFBQADggIBADqp
Jw3I07QWke9plNBpxUxcffc7nUrIQpJHDci91DFG7fVhHRkMZ1J+BKg5UNUxIFJ2Z9B90Mic
c/NXcs7kPBRdn6XGO/vPc87Y6R+cWS9Nc9+fp3Enmsm94OxOwI9wn8qnr/6o3mD4noP9Jphw
UPTXwHovjavRnhUQHLfo/i2NG0XXgTHXS2Xm0kVUozXqpYpAdumMiB/vezj1QHQJDmUdPYMc
p+reg9901zkyT3fDW/ivJVv6pWtkh6Pw2ytZT7mvg7YhX3V50Nv860cV11mocUVcqBLv0gcT
+HBDYtbuvexNftwNQKD5193A7zN4vG7CTYkXxytSjKuXrpEatEiFPxWgb84nVj25SU5q/r1X
hwby6mLhkbaXslkVtwEWT3Van49rKjlK4XrUKYYWtnfzq6aSak5u0Vpxd1rY79tWhD3EdCvO
hNz/QplNa+VkIsrcp7+8ZhP1l1b2U6MaxIVteuVMD3X0vziIwr7jxYae9FZjbxlpUemqXjcC
0QaFfN7qI0JsQMALL7iGRBg7K0CoOBzECdD3fuZil5kU/LP9cr1BK31U0Uy651bFnAMMMkqh
AChIbn0ei72VnbpSsrrSdF0BAGYQ8vyHae5aCg+H75dVCV33K6FuxZrf09yTz+Vx/PkdRUYk
XmZz/OTfyJXsUOUXrym6KvI2rYpccSk5MIIG6TCCBdGgAwIBAgICCaowDQYJKoZIhvcNAQEF
BQAwgYwxCzAJBgNVBAYTAklMMRYwFAYDVQQKEw1TdGFydENvbSBMdGQuMSswKQYDVQQLEyJT
ZWN1cmUgRGlnaXRhbCBDZXJ0aWZpY2F0ZSBTaWduaW5nMTgwNgYDVQQDEy9TdGFydENvbSBD
bGFzcyAyIFByaW1hcnkgSW50ZXJtZWRpYXRlIENsaWVudCBDQTAeFw0xMDA3MjUxOTIxMDVa
Fw0xMjA3MjYwMzEzMDdaMIHZMSAwHgYDVQQNExcyMzE0NTYtR1VmR25peTYwM0Q1MGNjVTEL
MAkGA1UEBhMCQVQxDTALBgNVBAgTBFdpZW4xDTALBgNVBAcTBFdpZW4xFDASBgNVBAoTC0xh
IEdlbnR6IEtHMS0wKwYDVQQLEyRTdGFydENvbSBWZXJpZmllZCBDZXJ0aWZpY2F0ZSBNZW1i
ZXIxGTAXBgNVBAMTEEdyZWdvciBEb3JmYmF1ZXIxKjAoBgkqhkiG9w0BCQEWG2dyZWdvci5k
b3JmYmF1ZXJAbGFnZW50ei5hdDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMrZ
jFXPJ6YzxWbOVjrOwqvuRWbnzgkXcH3dbgeq8+dqLTvlsAz2+PhJy/r5US5UIP54+krlXJRF
iwW7dBhtbFW4uxLA64CpzNZ9llXz4ldhENIAyILSy/73rOWqPrsdWFtwhL1VsEPlTNtqKFSl
64aVN2eTH42oNKMBUPdEu1p4YVhEEPqDvI4ityqVH1wyHLCIZoJa+3C1mvG89e7D1xtefREc
v4BWmriYxPhYIowCqZtQJtVrubFrd7oNFNwIL9jkLqCWFs0bEpdTvSt1ZW+ddgO6x1fWPn5D
4BEkNRnzGoKf9eh0Mwn12R/j0JxNHW/tMbeupTnH2IfFMR1JVLECAwEAAaOCAwQwggMAMAkG
A1UdEwQCMAAwCwYDVR0PBAQDAgSwMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDBDAd
BgNVHQ4EFgQUMd9qgRvjzBaLgGcZhbqJMqAlGrwwHwYDVR0jBBgwFoAUrlWDb+wxyrn3Hfqv
azHzyB3jrLswJgYDVR0RBB8wHYEbZ3JlZ29yLmRvcmZiYXVlckBsYWdlbnR6LmF0MIIBQgYD
VR0gBIIBOTCCATUwggExBgsrBgEEAYG1NwECAjCCASAwLgYIKwYBBQUHAgEWImh0dHA6Ly93
d3cuc3RhcnRzc2wuY29tL3BvbGljeS5wZGYwNAYIKwYBBQUHAgEWKGh0dHA6Ly93d3cuc3Rh
cnRzc2wuY29tL2ludGVybWVkaWF0ZS5wZGYwgbcGCCsGAQUFBwICMIGqMBQWDVN0YXJ0Q29t
IEx0ZC4wAwIBARqBkUxpbWl0ZWQgTGlhYmlsaXR5LCBzZWUgc2VjdGlvbiAqTGVnYWwgTGlt
aXRhdGlvbnMqIG9mIHRoZSBTdGFydENvbSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSBQb2xp
Y3kgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuc3RhcnRzc2wuY29tL3BvbGljeS5wZGYwYwYD
VR0fBFwwWjAroCmgJ4YlaHR0cDovL3d3dy5zdGFydHNzbC5jb20vY3J0dTItY3JsLmNybDAr
oCmgJ4YlaHR0cDovL2NybC5zdGFydHNzbC5jb20vY3J0dTItY3JsLmNybDCBjgYIKwYBBQUH
AQEEgYEwfzA5BggrBgEFBQcwAYYtaHR0cDovL29jc3Auc3RhcnRzc2wuY29tL3N1Yi9jbGFz
czIvY2xpZW50L2NhMEIGCCsGAQUFBzAChjZodHRwOi8vd3d3LnN0YXJ0c3NsLmNvbS9jZXJ0
cy9zdWIuY2xhc3MyLmNsaWVudC5jYS5jcnQwIwYDVR0SBBwwGoYYaHR0cDovL3d3dy5zdGFy
dHNzbC5jb20vMA0GCSqGSIb3DQEBBQUAA4IBAQAJAXn+Dkd8tMu+Xeo7KsJubI123q6iUOdj
C9d+az2GnMVQmqOy/YTAZJJ8HyepBUe6Muut0/IJEXf/qi9aZ2gS0bQeihEluFTgEEXptFLC
ntD6E8Loryk1VcT3Wf1GvYE0zRsFmJDdsm7kzMIgtaA6N/M+sKZ98pnTM5xStSKL/dgskqPp
X+6UK1kd4L86B37gMBsm89frWwIzzc4mHFtspge5EQJM1C+D9VA6wf2KOBhEgk//BKIYxt0l
vBVkOpdFSxW+UiYb4cm58vPxiSHAAL/bJs67U8YNIkNoZpoISRxeslGnWp3F5Fa553WHjZyc
FEKJmbEkhG0EcEfLT+S8MYICfDCCAngCAQEwgZMwgYwxCzAJBgNVBAYTAklMMRYwFAYDVQQK
Ew1TdGFydENvbSBMdGQuMSswKQYDVQQLEyJTZWN1cmUgRGlnaXRhbCBDZXJ0aWZpY2F0ZSBT
aWduaW5nMTgwNgYDVQQDEy9TdGFydENvbSBDbGFzcyAyIFByaW1hcnkgSW50ZXJtZWRpYXRl
IENsaWVudCBDQQICCaowCQYFKw4DAhoFAKCBvjAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0xMDA5MDMwOTIzMzRaMCMGCSqGSIb3DQEJBDEWBBSy1AglEpZz
hJPlm9PshdYXN9xdOTBfBgkqhkiG9w0BCQ8xUjBQMAsGCWCGSAFlAwQBAjAKBggqhkiG9w0D
BzAOBggqhkiG9w0DAgICAIAwDQYIKoZIhvcNAwICAUAwBwYFKw4DAgcwDQYIKoZIhvcNAwIC
ASgwDQYJKoZIhvcNAQEBBQAEggEARlfmPyWNk41xjimaKOZHkJh0+HeK7k776aMydhC9XQRU
ogyLzdwVx0cBZ7wCRye9LCEPt5U2HkDlqy8qDtds4PBaEIJCPRwu5NSdGWXhekdSChIDHuDV
GFKQfUYUz4Pr9lp1WlD5mglh2FgACw0dantK5qXhlXYG1fhY+X1jusnUCQi7rNY6UL6vikT/
EHQa20vEm9Y57K5ElfyGCnLtOj8aEWIZvbRBMsQ39jxdBYnxncvKOZNNaNmeAGFc0vXGL07f
gaJcOSPvVDYy1C8LKIyAzru4D/lje4iLdLSuzYVFs4yivUdnSKdu7nXOc7GsGDM3GnnpP2bQ
DHMq2A9n7wAAAAAAAA==
--------------ms060308010607070102090506--

From java-user-return-47189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 12:06:48 2010
Return-Path: <java-user-return-47189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3898 invoked from network); 3 Sep 2010 12:06:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 12:06:48 -0000
Received: (qmail 63086 invoked by uid 500); 3 Sep 2010 12:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62826 invoked by uid 500); 3 Sep 2010 12:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62818 invoked by uid 99); 3 Sep 2010 12:06:42 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 12:06:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 12:06:17 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 48554312C3
	for <java-user@lucene.apache.org>; Fri,  3 Sep 2010 14:05:54 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 30F17312BC
	for <java-user@lucene.apache.org>; Fri,  3 Sep 2010 14:05:54 +0200 (CEST)
Received: from bledsoe.dfki.uni-sb.de (bledsoe.dfki.uni-sb.de [134.96.184.151])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 18B42310E7
	for <java-user@lucene.apache.org>; Fri,  3 Sep 2010 14:05:54 +0200 (CEST)
From: Paul Libbrecht <paul@activemath.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: trying to use the highlighter
Date: Fri, 3 Sep 2010 14:05:53 +0200
Message-Id: <725AEC83-D03D-41D2-B3B7-5CF670809994@activemath.org>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org


Hello list,

I'm strugging again with the highlighter. I don't understand why I =
obtain sporadically InvalidTokenOffsetsException.

The mission: given a query, detect which field was matched, among the =
names of the concepts: there can be several names for a given concept, =
also in one language. Concepts are documents and names are in fields =
name-xx where xx is the two-letter-language.

Here's the method I'm using:

    public String computeMatchedField(int docNum, Document doc, Analyzer =
analyzer, Query query) throws IOException {
        //System.out.println("----- computing matched field for query " =
+ query + " on document " + doc.get("uri"));
        query =3D query.rewrite(this.reader);
        String found =3D null;
        float maxScore =3D 0;
        try {
            for(Field f: (List<Field>) doc.getFields()) {
                QueryScorer scorer =3D new =
QueryScorer(query,reader,f.name());
                if(!f.name().startsWith("name-")) continue;
                //System.out.println("Measuring field " + f.name() + ": =
" + f.stringValue());
                String text =3D f.stringValue();
                TokenStream tokenStream =3D =
TokenSources.getAnyTokenStream(reader,docNum, f.name(), doc, analyzer);
                SimpleHTMLFormatter htmlFormatter =3D new =
SimpleHTMLFormatter();
                Highlighter highlighter =3D new =
Highlighter(htmlFormatter, scorer);
                TextFragment[] frags =3D =
highlighter.getBestTextFragments(tokenStream, text, false, 1);
                if(frags=3D=3Dnull || frags.length=3D=3D0) continue;
                float score =3D frags[0].getScore();
                //System.out.println("Score: " + score);
                if(score > maxScore) {
                    maxScore =3D score;
                    found =3D frags[0].toString();
                }
            }
        } catch(Exception ex) {ex.printStackTrace();}
        return found;
    }

Unfortunately, I have to catch InvalidTokenOffsetsException which does =
happen sometimes, not always.
When it occurs, it stops the highlighting (the detected field is "null") =
and also costs quite some time.

What am I doing wrong?
I tried making my own tokenStream with no difference.

thanks in advance

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 12:45:16 2010
Return-Path: <java-user-return-47190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17250 invoked from network); 3 Sep 2010 12:45:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 12:45:16 -0000
Received: (qmail 95291 invoked by uid 500); 3 Sep 2010 12:45:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94821 invoked by uid 500); 3 Sep 2010 12:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94804 invoked by uid 99); 3 Sep 2010 12:45:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 12:45:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 12:45:03 +0000
Received: by eydd26 with SMTP id d26so1346827eyd.35
        for <java-user@lucene.apache.org>; Fri, 03 Sep 2010 05:44:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=mR6eJdWn3xso4GpRzl0puqmYw2UbzSUrSpTMPWKYaTQ=;
        b=qiI6dW7V7OgM82547Pd1XSF496uGFy6Im7yTqVUDTVFnnFtBVPSDfBcoF6exryy5oR
         fvW2Y3gQ9aDyQAI1EQ3k0JKYH1HH5Uv9eh8R0husTNM3H9uPoWezgEHLsgtM9kCjBTz/
         vXyjHMh8bSRjwq6oVFI7Yu8aL1UWJzUUK9A6I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=deWPUfSPcIi0023kYDoVmi0xbhIenXJdKH2xITnZAyJwITz4xZaQYQBXXYL6bgbT9X
         JWnrgWRhrKXv5UTdQxszIcwD0u9GyKSuzUixD9nnhRsnQ1K22JsacTqOJ2l7tfrMwB9M
         1l411RxcidyQm2M8nMaOJVolMQA8LN4nAip1M=
Received: by 10.213.75.139 with SMTP id y11mr605241ebj.99.1283517882270; Fri,
 03 Sep 2010 05:44:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.47.7 with HTTP; Fri, 3 Sep 2010 05:44:22 -0700 (PDT)
In-Reply-To: <304C5ED9-30EF-4912-94FB-04A475418D37@go2.com>
References: <AANLkTim6BHmkopsbPOj8VBpe3VgWa6+axtL0sRTvaNjg@mail.gmail.com> <304C5ED9-30EF-4912-94FB-04A475418D37@go2.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Fri, 3 Sep 2010 08:44:22 -0400
Message-ID: <AANLkTinEy52qK+s0FNV4AVSGFDSpSB4vz8SZMJbByfPf@mail.gmail.com>
Subject: Re: Lucandra - Any experiences?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f8fe9d86f8598048f5a4bde

--00c09f8fe9d86f8598048f5a4bde
Content-Type: text/plain; charset=ISO-8859-1

Anyone?

- Mike
akaris@gmail.com


On Mon, Aug 23, 2010 at 4:01 PM, Jordon Saardchit <jsaardchit@go2.com>wrote:

> I also would be thoroughly interested in hearing the viewpoints from any
> lucandra users.  Its a model we've been considering for some time now.  Our
> only reluctance is the lack of point of views from the community.  Good or
> bad, i'd love to hear experiences with it.
>
> Jordon
>
> On Aug 23, 2010, at 12:21 PM, Michel Nadeau wrote:
>
> > Hi,
> >
> > we are currently considering to switch from Lucene + Cassandra to
> *Lucandra*,
> > mainly for the following reasons:
> >
> > * Ability to have many threads writing in the same index at the same
> time;
> > * Live results without the need to close/re-open the index reader;
> > * Easy scaling to many nodes thanks to Cassandra's scaling abilities;
> > * Possibility to boost Lucene's sorting abilities by using many Cassandra
> > ColumnFamilies;
> > * No mismatch between data in Lucene and Cassandra (when used
> separately).
> >
> > We were told that Lucandra is ready to be used in a production system and
> > that we would have access to all the Lucene features we're currently
> using
> > (wildcard searches, ranges, pagination, sort, filters); but we couldn't
> find
> > any big success stories about Lucandra - that's why I'm writing here
> today!
> >
> > So if you or someone you know worked on a project using Lucandra
> (especially
> > systems involving a lot of data because we have millions and millions and
> > millions of documents to deal with), please let me know: I'm very
> interested
> > to get feedback about your experiences.
> >
> > Thanks,
> >
> > Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f8fe9d86f8598048f5a4bde--

From java-user-return-47191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 13:02:45 2010
Return-Path: <java-user-return-47191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20068 invoked from network); 3 Sep 2010 13:02:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 13:02:45 -0000
Received: (qmail 21116 invoked by uid 500); 3 Sep 2010 13:02:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20573 invoked by uid 500); 3 Sep 2010 13:02:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20554 invoked by uid 99); 3 Sep 2010 13:02:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 13:02:38 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 13:02:33 +0000
Received: by qwk3 with SMTP id 3so2163845qwk.35
        for <java-user@lucene.apache.org>; Fri, 03 Sep 2010 06:02:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=BWR0clIFwZTUxhpblHtCAZseRbyjSQwKc8kmd+XsGz4=;
        b=V75bi3DyE9LtltmYDRs+pc49d0QGcP+sIxH4hWCU5rBtUQLK9aFlsoBaX3HNQg8HzT
         4WLsVhGU78yK5GaL97ez8we3UM+EyJ+qMqGo9JBH/CEEL0n6dqCU8KYn5pVMr5aOEBLt
         WSqevcHP+B3CXjtAhUzx7lIvXEfVoYZIL2bp0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=E4mwmscp3mE9lNBLJt34SCVNdpOzf3hYLjiOKyeatZZklXJFMXIsRzGEcWtFun3FOS
         V/ookA6w5kIqv/VPOKUxajpshD2Ls/qB24qk0IY1duSEImzWMqD7bFLSJgsIrbnSxviW
         NF0acTy1hqHXQ6pDNdLWYHulwXhfwq3t1Gp8M=
Received: by 10.224.28.144 with SMTP id m16mr971261qac.339.1283518932227; Fri,
 03 Sep 2010 06:02:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.223.132 with HTTP; Fri, 3 Sep 2010 06:01:51 -0700 (PDT)
In-Reply-To: <4C80BE96.9030108@lagentz.at>
References: <4C80BE96.9030108@lagentz.at>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 3 Sep 2010 14:01:51 +0100
Message-ID: <AANLkTik8uC+VmGpF9a+X8Wb84SEA=OX=G_KmM2__D2Bo@mail.gmail.com>
Subject: Re: Index Field feeded from Reader that also stores cleartext
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

If you can't use one of the Reader based Field methods then no.
You'll have to convert the data to a string.  If you do it a doc at a
time and you still don't have enough memory then I don't know what you
can do.


--
Ian.


On Fri, Sep 3, 2010 at 10:23 AM, Gregor Dorfbauer
<gregor.dorfbauer@lagentz.at> wrote:
> Hi!
>
> I'm working on an indexer that should process documents on hard-disk which
> are of arbitrary size and type. I use Apache Tika for plain text extraction
> which offers the feature to stream the parsers output through a reader.
>
> My problem is following:
> Is there a possibility to generate a document field that gets its data from
> an Reader-instance and where the plain text is also stored into the index
> (like the Store.YES field denotes)?
> If I can't stream the data, memory usage is exceeding the limits of my
> machine.
>
>
> Thanks for your help,
> Gregor
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 13:09:57 2010
Return-Path: <java-user-return-47192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25786 invoked from network); 3 Sep 2010 13:09:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 13:09:57 -0000
Received: (qmail 29541 invoked by uid 500); 3 Sep 2010 13:09:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29144 invoked by uid 500); 3 Sep 2010 13:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29136 invoked by uid 99); 3 Sep 2010 13:09:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 13:09:51 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.65.145.81] (HELO p02c12o148.mxlogic.net) (208.65.145.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 13:09:43 +0000
Received: from unknown [67.132.206.99] (EHLO donkey.hmsonline.com)
	by p02c12o148.mxlogic.net(mxl_mta-6.7.0-0)
	with ESMTP id 283f08c4.0.121703.00-395.232020.p02c12o148.mxlogic.net (envelope-from <nkolev@healthmarketscience.com>);
	Fri, 03 Sep 2010 07:09:23 -0600 (MDT)
X-MXL-Hash: 4c80f3832f30a91a-5718dce30f62ca4186aa3965acd1af2856699700
Received: from pwex01.zoo.hmsonline.com (pwex01.hmsonline.com [10.67.88.109])
	by donkey.hmsonline.com (8.13.1/8.13.1) with ESMTP id o83D9FF0022834
	for <java-user@lucene.apache.org>; Fri, 3 Sep 2010 09:09:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to do facet search in lucene, NOT solr ?
Date: Fri, 3 Sep 2010 08:59:52 -0400
Message-ID: <67B9FB634299E5469D36BF5B3537F024C2D6B3@pwex01.zoo.hmsonline.com>
In-Reply-To: <AANLkTinpxhRNruN2tWhgQFageY=f4Yf2A=Y5b0U5dQPP@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to do facet search in lucene, NOT solr ?
Thread-Index: ActIKwQ33oNx5+YuS0W0G/AHqCiuNgDPMdTQ
References: <AANLkTi=_wHfoBcM+mHKZJu31Q4juSNOAAigbUg7pqaua@mail.gmail.com> <AANLkTinpxhRNruN2tWhgQFageY=f4Yf2A=Y5b0U5dQPP@mail.gmail.com>
From: "Nik Kolev" <nkolev@healthmarketscience.com>
To: <java-user@lucene.apache.org>
X-Spam: [F=0.2000000000; CM=0.500; S=0.200(2010073001)]
X-MAIL-FROM: <nkolev@healthmarketscience.com>
X-SOURCE-IP: [67.132.206.99]
X-AnalysisOut: [v=1.0 c=1 a=YLUzdI8Pwk4A:10 a=VphdPIyG4kEA:10 a=kj9zAlcOel]
X-AnalysisOut: [0A:10 a=xdWuvbPJTlx+8X/s3BW2YQ==:17 a=1XWaLZrsAAAA:8 a=pGL]
X-AnalysisOut: [kceISAAAA:8 a=mV9VRH-2AAAA:8 a=m8otYfozewvOb60kzFcA:9 a=ps]
X-AnalysisOut: [ZQYY5cb0KGEBCQFacA:7 a=En9IUkdJU8z70yXDyqWNkNlJe2YA:4 a=Cj]
X-AnalysisOut: [uIK1q_8ugA:10 a=MSl-tDqOz04A:10]

You can also take a look at this:
http://code.google.com/p/bobo-browse/

-----Original Message-----
From: Li Li [mailto:fancyerii@gmail.com]=20
Sent: Monday, August 30, 2010 6:06 AM
To: java-user@lucene.apache.org
Subject: Re: How to do facet search in lucene, NOT solr ?

I think you can read the codes of solr.
I guess you can implement a collect to get all hit docs into a
DocSet(bitset). Also getting facet fields into memory(doc id->field
value) then loop the DocSet to count it.

2010/8/30 fulin tang <tangfulin@gmail.com>:
> we are building a search system on top of lucene, and we are now
> looking for a facet feature
>
> So it there a easy way to do this ?
>
> btw, we do not want to switch to solr just for this!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 14:04:07 2010
Return-Path: <java-user-return-47193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39039 invoked from network); 3 Sep 2010 14:04:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 14:04:06 -0000
Received: (qmail 28671 invoked by uid 500); 3 Sep 2010 14:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28304 invoked by uid 500); 3 Sep 2010 14:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 10353 invoked by uid 99); 3 Sep 2010 13:47:37 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Message-ID: <4C80FC5B.3000805@orbita1.ru>
Date: Fri, 03 Sep 2010 17:47:07 +0400
From: Gennadiy Kozlenko <pipll@orbita1.ru>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; ru; rv:1.9.2.8) Gecko/20100802 Thunderbird/3.1.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Too many open files
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

To make a search by lucene we use Web application that is working in the 
servlet-container tomcat.

Periodically we update the search index by adding and removing some of 
the documents. To update the index we make the following actions:

1. Open the index
2. Add/delete documents
3. In case it is needed we optimize the index
4. Close the index

After the updates of search index were done we report the Web 
application that there are changes in the index. Web application does 
the following:

1. Close old index search object (before closing the application waits 
until all steams finish up the work with search index):
searcher.close()

2. Create new index search object - searcher:
File file = new File(pathToIndex);
IndexSearcher searcher = new IndexSearcher(NIOFSDirectory.open(file), true);

After a while, the Web application stops operating because of the error 
"Too many open files". If you look at a list of files that were opened 
by tomcat process (using the command "ls -la /proc/$PID/fd"),  you can 
see that there are a lot of deleted ".cfs" files.

There are no errors in the tomcat logs.

Can you help us to figure out why this situation is occurred and how to 
solve it up?


Thanks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 14:23:34 2010
Return-Path: <java-user-return-47194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47648 invoked from network); 3 Sep 2010 14:23:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 14:23:34 -0000
Received: (qmail 62055 invoked by uid 500); 3 Sep 2010 14:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61619 invoked by uid 500); 3 Sep 2010 14:23:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61610 invoked by uid 99); 3 Sep 2010 14:23:27 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 14:23:27 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 14:23:05 +0000
Received: by qyk2 with SMTP id 2so2352862qyk.14
        for <java-user@lucene.apache.org>; Fri, 03 Sep 2010 07:22:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=pEEV1oXqPEdUJh1WgmxzIAvIfnwTKezSnFMqeQn6uZ8=;
        b=X8zXk/jO46XfWGAUshbyY3VVxlYkn9+kQZWbyR1o8fyRepzOL8/3oKFg3ZZufKzVh+
         DtwAayevYZnbvdloKfgSWgdhulu7UoIOh7QdYnknl3qbxuyiuh53rR2HbtnYnxg2zDyd
         GyIe0bnxrSxtf6V1Mt5CcAaO9KTF8dOz+I3Hc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=JRkHkUYAFFF5JF4iqimmKrAXeFTMYBLbdQM/XsZOYWyKAKjfgs0Qh6/ms7J4hMNyr9
         LM/kctQOdx+fMjx+WCPJiQtmWZNLAATd28PpNsltJhYnc7rH5vIwPTs34FWaC7QEdG8/
         F6+yJ/dZDZhxfB7SilwNnwOY65Yb+F61dUhkE=
Received: by 10.224.66.165 with SMTP id n37mr51469qai.10.1283523764756; Fri,
 03 Sep 2010 07:22:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.223.132 with HTTP; Fri, 3 Sep 2010 07:22:23 -0700 (PDT)
In-Reply-To: <4C80FC5B.3000805@orbita1.ru>
References: <4C80FC5B.3000805@orbita1.ru>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 3 Sep 2010 15:22:23 +0100
Message-ID: <AANLkTikiUprd4hMuTE2eT5+eYxezu5_3QmqjX54_JOq_@mail.gmail.com>
Subject: Re: Too many open files
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOExceptio=
n_that_says_.22Too_many_open_files.22.3F

You are probably not closing all your searchers properly.  What
version of lucene are you using?  I think that something changed in
recent releases and old searchers that used to get garbage collected
had their files automatically closed, and that no longer happens.
Something along those lines anyway.  Maybe you need to store a
reference to the underlying Directory and call close() on that.

I expect that if you search and dig around in the list archives you'll
find a better explanation - or wait for someone else to explain it
properly.  But I'm pretty sure that the underlying message is correct
- make sure you close everything related to your old searchers.

As an aside, the problem might be less if you skipped the optimize
step.  In general you don't need to call optimize.



--
Ian.


On Fri, Sep 3, 2010 at 2:47 PM, Gennadiy Kozlenko <pipll@orbita1.ru> wrote:
> To make a search by lucene we use Web application that is working in the
> servlet-container tomcat.
>
> Periodically we update the search index by adding and removing some of th=
e
> documents. To update the index we make the following actions:
>
> 1. Open the index
> 2. Add/delete documents
> 3. In case it is needed we optimize the index
> 4. Close the index
>
> After the updates of search index were done we report the Web application
> that there are changes in the index. Web application does the following:
>
> 1. Close old index search object (before closing the application waits un=
til
> all steams finish up the work with search index):
> searcher.close()
>
> 2. Create new index search object - searcher:
> File file =3D new File(pathToIndex);
> IndexSearcher searcher =3D new IndexSearcher(NIOFSDirectory.open(file), t=
rue);
>
> After a while, the Web application stops operating because of the error "=
Too
> many open files". If you look at a list of files that were opened by tomc=
at
> process (using the command "ls -la /proc/$PID/fd"), =A0you can see that t=
here
> are a lot of deleted ".cfs" files.
>
> There are no errors in the tomcat logs.
>
> Can you help us to figure out why this situation is occurred and how to
> solve it up?
>
>
> Thanks in advance.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 15:06:50 2010
Return-Path: <java-user-return-47195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65028 invoked from network); 3 Sep 2010 15:06:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 15:06:50 -0000
Received: (qmail 33607 invoked by uid 500); 3 Sep 2010 15:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33344 invoked by uid 500); 3 Sep 2010 15:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33336 invoked by uid 99); 3 Sep 2010 15:06:45 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 15:06:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jsaardchit@go2.com designates 38.97.64.35 as permitted sender)
Received: from [38.97.64.35] (HELO mail.go2.com) (38.97.64.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 15:06:22 +0000
Received: from [10.0.1.4] ([75.82.49.1]) by mail.go2.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 3 Sep 2010 11:06:01 -0400
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Lucandra - Any experiences?
From: Jordon Saardchit <jsaardchit@go2.com>
In-Reply-To: <AANLkTinEy52qK+s0FNV4AVSGFDSpSB4vz8SZMJbByfPf@mail.gmail.com>
Date: Fri, 3 Sep 2010 08:06:00 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <0706463F-3D1D-45CE-B73C-89862A780E9E@go2.com>
References: <AANLkTim6BHmkopsbPOj8VBpe3VgWa6+axtL0sRTvaNjg@mail.gmail.com> <304C5ED9-30EF-4912-94FB-04A475418D37@go2.com> <AANLkTinEy52qK+s0FNV4AVSGFDSpSB4vz8SZMJbByfPf@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-OriginalArrivalTime: 03 Sep 2010 15:06:01.0717 (UTC) FILETIME=[85BE7A50:01CB4B79]
X-Virus-Checked: Checked by ClamAV on apache.org

Hence my reluctance :)

Jordon

On Sep 3, 2010, at 5:44 AM, Michel Nadeau wrote:

> Anyone?
>=20
> - Mike
> akaris@gmail.com
>=20
>=20
> On Mon, Aug 23, 2010 at 4:01 PM, Jordon Saardchit =
<jsaardchit@go2.com>wrote:
>=20
>> I also would be thoroughly interested in hearing the viewpoints from =
any
>> lucandra users.  Its a model we've been considering for some time =
now.  Our
>> only reluctance is the lack of point of views from the community.  =
Good or
>> bad, i'd love to hear experiences with it.
>>=20
>> Jordon
>>=20
>> On Aug 23, 2010, at 12:21 PM, Michel Nadeau wrote:
>>=20
>>> Hi,
>>>=20
>>> we are currently considering to switch from Lucene + Cassandra to
>> *Lucandra*,
>>> mainly for the following reasons:
>>>=20
>>> * Ability to have many threads writing in the same index at the same
>> time;
>>> * Live results without the need to close/re-open the index reader;
>>> * Easy scaling to many nodes thanks to Cassandra's scaling =
abilities;
>>> * Possibility to boost Lucene's sorting abilities by using many =
Cassandra
>>> ColumnFamilies;
>>> * No mismatch between data in Lucene and Cassandra (when used
>> separately).
>>>=20
>>> We were told that Lucandra is ready to be used in a production =
system and
>>> that we would have access to all the Lucene features we're currently
>> using
>>> (wildcard searches, ranges, pagination, sort, filters); but we =
couldn't
>> find
>>> any big success stories about Lucandra - that's why I'm writing here
>> today!
>>>=20
>>> So if you or someone you know worked on a project using Lucandra
>> (especially
>>> systems involving a lot of data because we have millions and =
millions and
>>> millions of documents to deal with), please let me know: I'm very
>> interested
>>> to get feedback about your experiences.
>>>=20
>>> Thanks,
>>>=20
>>> Mike
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 16:05:52 2010
Return-Path: <java-user-return-47196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81255 invoked from network); 3 Sep 2010 16:05:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 16:05:51 -0000
Received: (qmail 24436 invoked by uid 500); 3 Sep 2010 16:05:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24310 invoked by uid 500); 3 Sep 2010 16:05:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24301 invoked by uid 99); 3 Sep 2010 16:05:48 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 16:05:48 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 16:05:27 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <mail@avomberg.de>)
	id 1OrYlE-0003J3-Mn
	for java-user@lucene.apache.org; Fri, 03 Sep 2010 09:05:04 -0700
Date: Fri, 3 Sep 2010 09:05:04 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1283529904697-1413062.post@n3.nabble.com>
Subject: Detailed file handling on hard disk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hello everybody,

I read the paper  http://www2008.org/papers/pdf/p387-zhangA.pdf Performance
of Compresses Inverted List Caching in Search Engines  and now I am unsure
how Lucene implements its structure on the hard disk. I am using Windos as
OS and therefore I implemented FSDirectory based on
Java.io.RandomAccessFile. 

How is the skipping in the .tis file realized? Do I use metadata at the
beginning of each block too like in the mentioned paper above on page 388
(in the paper the metadata stores informations about how many inverted lists
are in the block and where they start)? 

http://lucene.472066.n3.nabble.com/file/n1413062/Block_assignment.jpg 

Because I read in another article that I can seek to the correct position on
the hard drive with the byte address using java.io.RandomAccessFile (which I
can read from .tii-file in "IndexDelta"?).

How do I find the correct position/location for my PostingList/Document?
Do I need information/metadata about the blocks from the underlying file
system?
Or where can I find further informations about this stuff? :)

Best regards
Alex
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Detailed-file-handling-on-hard-disk-tp1413062p1413062.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 03 16:56:07 2010
Return-Path: <java-user-return-47197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92207 invoked from network); 3 Sep 2010 16:56:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Sep 2010 16:56:07 -0000
Received: (qmail 96634 invoked by uid 500); 3 Sep 2010 16:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96579 invoked by uid 500); 3 Sep 2010 16:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96571 invoked by uid 99); 3 Sep 2010 16:56:04 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 16:56:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Sep 2010 16:55:42 +0000
Received: by ewy10 with SMTP id 10so1679929ewy.35
        for <java-user@lucene.apache.org>; Fri, 03 Sep 2010 09:55:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=8LxiqFXOuVPuLrZrffJACSL87WXv9FRrCM/pcPj+oVw=;
        b=SDUQyUOKZBdHA+WD4pVs3Au6ICY3jbKfbwwWxGkY8I9/wUPig6GwFymM1UhzEasthN
         KCpNt26RaijlyRHNIOP2Bv2+buL2iSJ83YiVNPW5gkZrdZ6KbAE9GGqAVBR2wwwZs6hP
         E48/INkMAjbzvSEhv4aCIRcVplohJMRV0TlYU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=QI6x3AGF7mSg8XTVcCJ04WVaJz+KMp8DMBpgtnUBu63hDc6niBoJac1tBSqFgNuRTO
         8T3t9hC99D+YGFrSAoMBq4oqR0CF21Q2iwThnd/Ryr14rKYnCVMUrBDtOa0nrKw/xHko
         bqzfZaBVTHCkHQLZDncsRTvRIya1NBg1Wa8fk=
Received: by 10.213.19.211 with SMTP id c19mr55868ebb.93.1283532921513; Fri,
 03 Sep 2010 09:55:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.47.7 with HTTP; Fri, 3 Sep 2010 09:48:57 -0700 (PDT)
In-Reply-To: <0706463F-3D1D-45CE-B73C-89862A780E9E@go2.com>
References: <AANLkTim6BHmkopsbPOj8VBpe3VgWa6+axtL0sRTvaNjg@mail.gmail.com>
 <304C5ED9-30EF-4912-94FB-04A475418D37@go2.com> <AANLkTinEy52qK+s0FNV4AVSGFDSpSB4vz8SZMJbByfPf@mail.gmail.com>
 <0706463F-3D1D-45CE-B73C-89862A780E9E@go2.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Fri, 3 Sep 2010 12:48:57 -0400
Message-ID: <AANLkTik=_Q0AHm1SEb49uPac4-uTTq-9y9vK+YC0rtwX@mail.gmail.com>
Subject: Re: Lucandra - Any experiences?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c45f4d86197048f5dcb79
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c45f4d86197048f5dcb79
Content-Type: text/plain; charset=ISO-8859-1

Yeah, exactly... it seems absolutely no one know Lucandra.

- Mike
akaris@gmail.com


On Fri, Sep 3, 2010 at 11:06 AM, Jordon Saardchit <jsaardchit@go2.com>wrote:

> Hence my reluctance :)
>
> Jordon
>
> On Sep 3, 2010, at 5:44 AM, Michel Nadeau wrote:
>
> > Anyone?
> >
> > - Mike
> > akaris@gmail.com
> >
> >
> > On Mon, Aug 23, 2010 at 4:01 PM, Jordon Saardchit <jsaardchit@go2.com
> >wrote:
> >
> >> I also would be thoroughly interested in hearing the viewpoints from any
> >> lucandra users.  Its a model we've been considering for some time now.
>  Our
> >> only reluctance is the lack of point of views from the community.  Good
> or
> >> bad, i'd love to hear experiences with it.
> >>
> >> Jordon
> >>
> >> On Aug 23, 2010, at 12:21 PM, Michel Nadeau wrote:
> >>
> >>> Hi,
> >>>
> >>> we are currently considering to switch from Lucene + Cassandra to
> >> *Lucandra*,
> >>> mainly for the following reasons:
> >>>
> >>> * Ability to have many threads writing in the same index at the same
> >> time;
> >>> * Live results without the need to close/re-open the index reader;
> >>> * Easy scaling to many nodes thanks to Cassandra's scaling abilities;
> >>> * Possibility to boost Lucene's sorting abilities by using many
> Cassandra
> >>> ColumnFamilies;
> >>> * No mismatch between data in Lucene and Cassandra (when used
> >> separately).
> >>>
> >>> We were told that Lucandra is ready to be used in a production system
> and
> >>> that we would have access to all the Lucene features we're currently
> >> using
> >>> (wildcard searches, ranges, pagination, sort, filters); but we couldn't
> >> find
> >>> any big success stories about Lucandra - that's why I'm writing here
> >> today!
> >>>
> >>> So if you or someone you know worked on a project using Lucandra
> >> (especially
> >>> systems involving a lot of data because we have millions and millions
> and
> >>> millions of documents to deal with), please let me know: I'm very
> >> interested
> >>> to get feedback about your experiences.
> >>>
> >>> Thanks,
> >>>
> >>> Mike
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174c45f4d86197048f5dcb79--

From java-user-return-47198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 04 06:21:58 2010
Return-Path: <java-user-return-47198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79146 invoked from network); 4 Sep 2010 06:21:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Sep 2010 06:21:58 -0000
Received: (qmail 35890 invoked by uid 500); 4 Sep 2010 06:21:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35521 invoked by uid 500); 4 Sep 2010 06:21:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35511 invoked by uid 99); 4 Sep 2010 06:21:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Sep 2010 06:21:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of visual.logic@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Sep 2010 06:21:41 +0000
Received: by iwn9 with SMTP id 9so2949222iwn.35
        for <java-user@lucene.apache.org>; Fri, 03 Sep 2010 23:21:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:content-type
         :content-transfer-encoding:subject:date:message-id:to:mime-version
         :x-mailer;
        bh=xSkYcHg3YD5BehzwVgaQpAhrK14WIJeJCpLkcCBdZMc=;
        b=dYleMPwX3PqN7mxB/3Jh7TIklwbSFC+JD0OY5d1LaVpePYXnZfrZZ8LIhIMq9CHaEe
         Mu4kDoaL4rog2LuxwKbRu8L7IMGeOjoVwwOzKe9hLd2RWb+o+1+MeNQsRQZRryO3HBoy
         TDWnsJXbKU7fOAWaAJfl+yw6kuuyb4MiiHi34=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        b=xEJIK/VWnYcrFV3tizwL5pPAwvYUuwMLvl+hQwfdT3dSbBHv551XyJz/qnxmNNA0hm
         QTwHqX7JLo8zUQR75MD6XRofaFCi7e2PaLwIMHTl9Lg7Gz4oaJ4dyGnttOKjR2EdWE+z
         bVNNqdGbuurkNooe4VbltTdkJX8fU1VhD0Zv0=
Received: by 10.231.161.80 with SMTP id q16mr2056090ibx.142.1283581278142;
        Fri, 03 Sep 2010 23:21:18 -0700 (PDT)
Received: from [10.0.1.3] (S010690840de80f07.wp.shawcable.net [24.79.83.181])
        by mx.google.com with ESMTPS id z6sm2898835ibc.12.2010.09.03.23.21.15
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 03 Sep 2010 23:21:16 -0700 (PDT)
From: Visual Logic <visual.logic@gmail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: What are the best realtime options?
Date: Sat, 4 Sep 2010 01:21:13 -0500
Message-Id: <70947897-D5B0-40C5-B4F8-AE45194801C8@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Until recently, I always thought it was necessary to have Lucene on the =
local client, then along came Solr. Then I thought that having Solr =
embedded in the local client was necessary. Now, I'm not as sure.

A major use of Lucene/Solr in my application is as a dependancy =
injection system for many configurations that are encoded as JSON and =
then analysed and indexed as documents. Different application objects =
will look to document fields for their runtime parameters. At anytime a =
query can be made that loads in (activates) a different set of documents =
causing the objects to behave according to alternate parameters (rules).

One of my main concerns has been the need for speed. The objects need to =
access the parameters they need in realtime. I have learnt that queries =
on an index will never be as fast as accessing a map in memory. This =
means I need to have my own memory structure that documents would be =
converted to.

Toward this end there is the JSONObject from the org.json API that seems =
suitable for the task. If Solr is used on a remote server and returns =
document results in the JSON format then it is easy to build/deserialize =
JSONObjects from documents. The JSONObject is essentially a map in =
memory, providing fast access to the parameters objects require.

Are there fast index solutions available? What about InstantiatedIndex, =
a Lucene contrib module?

Maybe it is best to keep the client lightweight. It could be that Solr =
on a remote server is all I need and local access/parameter search can =
be done using maps? Any advice is appreciated, thanks.

Thom



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 05 21:10:10 2010
Return-Path: <java-user-return-47199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53676 invoked from network); 5 Sep 2010 21:10:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Sep 2010 21:10:10 -0000
Received: (qmail 90719 invoked by uid 500); 5 Sep 2010 21:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90554 invoked by uid 500); 5 Sep 2010 21:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90546 invoked by uid 99); 5 Sep 2010 21:10:07 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Sep 2010 21:10:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lev_bronshtein@hotmail.com designates 65.55.34.82 as permitted sender)
Received: from [65.55.34.82] (HELO col0-omc2-s8.col0.hotmail.com) (65.55.34.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Sep 2010 21:09:42 +0000
Received: from COL118-W13 ([65.55.34.72]) by col0-omc2-s8.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Sun, 5 Sep 2010 14:09:21 -0700
Message-ID: <COL118-W13364397C396B01377F7FAF38F0@phx.gbl>
X-Originating-IP: [96.224.227.191]
From: Lev Bronshtein <lev_bronshtein@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Line filtering
Date: Sun, 5 Sep 2010 17:09:21 -0400
Importance: Normal
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 05 Sep 2010 21:09:21.0814 (UTC) FILETIME=[9C70CB60:01CB4D3E]
X-Virus-Checked: Checked by ClamAV on apache.org


Hello group=2C=20

I am new to Lucene and ran into a bit of trouble while writing an app.=A0 I=
 would like to selectively index lines from a syslog on a unix system=2C to=
 this end I first wrote tokenizer that returns an entire line as a token ex=
tending CharTokenizer

=A0 protected boolean isTokenChar(char c) {
=A0=A0=A0 return !((c =3D=3D '\n') || (c =3D=3D '\r'))=3B
=A0 }

Perhaps that is my first mistake and I should have done things differently?=
=20

I then pass this to a filter that only selects the lines with text I am int=
erested in

=A0public final boolean incrementToken() throws IOException
=A0{
=A0 while (input.incrementToken())
=A0 {
=A0=A0 Matcher lineMatcher =3D linePattern.matcher(termAtt.term())=3B
=A0=A0 if (lineMatcher.find()) //(we like the payload)
=A0=A0=A0=A0 return true=3B
=A0 }
=A0 //reached EOS -- return false
=A0 return false=3B
=A0}

However the issue is that=2C now that I have the line I want to break up th=
e individual line into tokens along white space=2C but the WhitespaceTokeni=
zer does not take a TokenStream as a constructor parameter.=A0 Can anyone o=
ffer=A0 suggestion for a workaround?

Regards=2C

Lev Bronshtein
 		 	   		  =

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 06 06:21:59 2010
Return-Path: <java-user-return-47200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66567 invoked from network); 6 Sep 2010 06:21:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Sep 2010 06:21:59 -0000
Received: (qmail 70465 invoked by uid 500); 6 Sep 2010 06:21:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70073 invoked by uid 500); 6 Sep 2010 06:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70065 invoked by uid 99); 6 Sep 2010 06:21:53 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 06:21:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 06:21:28 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 9E6A03171C
	for <java-user@lucene.apache.org>; Mon,  6 Sep 2010 08:21:07 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 7DD8D31706
	for <java-user@lucene.apache.org>; Mon,  6 Sep 2010 08:21:07 +0200 (CEST)
Received: from [192.168.178.47] (srbk-5d8049d8.pool.mediaWays.net [93.128.73.216])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 479D0310E7
	for <java-user@lucene.apache.org>; Mon,  6 Sep 2010 08:21:07 +0200 (CEST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: trying to use the highlighter
From: Paul Libbrecht <paul@activemath.org>
In-Reply-To: <725AEC83-D03D-41D2-B3B7-5CF670809994@activemath.org>
Date: Mon, 6 Sep 2010 08:21:06 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <596BD7BE-BA0C-4026-A6AB-419361D44DA1@activemath.org>
References: <725AEC83-D03D-41D2-B3B7-5CF670809994@activemath.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

ping!
Any hope for help here?
I'm a bit stuck before deploying a release.

thanks in advance

paul


On 3 sept. 2010, at 14:05, Paul Libbrecht wrote:

>=20
> Hello list,
>=20
> I'm strugging again with the highlighter. I don't understand why I =
obtain sporadically InvalidTokenOffsetsException.
>=20
> The mission: given a query, detect which field was matched, among the =
names of the concepts: there can be several names for a given concept, =
also in one language. Concepts are documents and names are in fields =
name-xx where xx is the two-letter-language.
>=20
> Here's the method I'm using:
>=20
>    public String computeMatchedField(int docNum, Document doc, =
Analyzer analyzer, Query query) throws IOException {
>        //System.out.println("----- computing matched field for query " =
+ query + " on document " + doc.get("uri"));
>        query =3D query.rewrite(this.reader);
>        String found =3D null;
>        float maxScore =3D 0;
>        try {
>            for(Field f: (List<Field>) doc.getFields()) {
>                QueryScorer scorer =3D new =
QueryScorer(query,reader,f.name());
>                if(!f.name().startsWith("name-")) continue;
>                //System.out.println("Measuring field " + f.name() + ": =
" + f.stringValue());
>                String text =3D f.stringValue();
>                TokenStream tokenStream =3D =
TokenSources.getAnyTokenStream(reader,docNum, f.name(), doc, analyzer);
>                SimpleHTMLFormatter htmlFormatter =3D new =
SimpleHTMLFormatter();
>                Highlighter highlighter =3D new =
Highlighter(htmlFormatter, scorer);
>                TextFragment[] frags =3D =
highlighter.getBestTextFragments(tokenStream, text, false, 1);
>                if(frags=3D=3Dnull || frags.length=3D=3D0) continue;
>                float score =3D frags[0].getScore();
>                //System.out.println("Score: " + score);
>                if(score > maxScore) {
>                    maxScore =3D score;
>                    found =3D frags[0].toString();
>                }
>            }
>        } catch(Exception ex) {ex.printStackTrace();}
>        return found;
>    }
>=20
> Unfortunately, I have to catch InvalidTokenOffsetsException which does =
happen sometimes, not always.
> When it occurs, it stops the highlighting (the detected field is =
"null") and also costs quite some time.
>=20
> What am I doing wrong?
> I tried making my own tokenStream with no difference.
>=20
> thanks in advance
>=20
> paul
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 06 08:39:17 2010
Return-Path: <java-user-return-47201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1528 invoked from network); 6 Sep 2010 08:39:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Sep 2010 08:39:17 -0000
Received: (qmail 72164 invoked by uid 500); 6 Sep 2010 08:39:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71014 invoked by uid 500); 6 Sep 2010 08:39:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70997 invoked by uid 99); 6 Sep 2010 08:39:09 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 08:39:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 08:38:46 +0000
Received: by qyk2 with SMTP id 2so4916083qyk.14
        for <java-user@lucene.apache.org>; Mon, 06 Sep 2010 01:38:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=F8kAFy8txjIcl3A69I8dncantqONhwc6+WwzdOGWCI0=;
        b=QjV8VDn3a3etYUrS5UeVCzU+Mhok+nlh2T6TD3vRah9+Unk0dmC3tkutMxIDdfoW/T
         FfNy1LMvudcBrhX4bumrO6u6aBUOtX89BVvOufG4yPHo838vv/0iEd2LOh/NZCwsI8yC
         pQYI0AIABcLLO90dplxHX0tjZFGGr728dm/oo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=cCn40SDm/3wIESJvG7A5UkMa+X+hGShS3TqRrccP9FiycHq8OPCBdlzxtd2woTRAAh
         XEzQy/R6oFqFCUX5yqkhZ6N1ksBDjxgFikoGOk4b0dNic7EAALXXQGVHU0TkEVD11Wmh
         Uqs2P1HPrl7pf3yT+oceDLxXooChvxWEz1JnM=
Received: by 10.229.235.66 with SMTP id kf2mr3194914qcb.2.1283762305255; Mon,
 06 Sep 2010 01:38:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.223.132 with HTTP; Mon, 6 Sep 2010 01:38:05 -0700 (PDT)
In-Reply-To: <COL118-W13364397C396B01377F7FAF38F0@phx.gbl>
References: <COL118-W13364397C396B01377F7FAF38F0@phx.gbl>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 6 Sep 2010 09:38:05 +0100
Message-ID: <AANLkTinkU+R_oTqwHr_GWAQQVDkVPom5ug4LXgCcQzL=@mail.gmail.com>
Subject: Re: Line filtering
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You'd be better off reading and selecting the syslog lines outside of
lucene.  Then pass the lines you are interested in to lucene using
whatever analyzer you want.


--
Ian.


On Sun, Sep 5, 2010 at 10:09 PM, Lev Bronshtein
<lev_bronshtein@hotmail.com> wrote:
>
> Hello group,
>
> I am new to Lucene and ran into a bit of trouble while writing an app.=A0=
 I would like to selectively index lines from a syslog on a unix system, to=
 this end I first wrote tokenizer that returns an entire line as a token ex=
tending CharTokenizer
>
> =A0 protected boolean isTokenChar(char c) {
> =A0=A0=A0 return !((c =3D=3D '\n') || (c =3D=3D '\r'));
> =A0 }
>
> Perhaps that is my first mistake and I should have done things differentl=
y?
>
> I then pass this to a filter that only selects the lines with text I am i=
nterested in
>
> =A0public final boolean incrementToken() throws IOException
> =A0{
> =A0 while (input.incrementToken())
> =A0 {
> =A0=A0 Matcher lineMatcher =3D linePattern.matcher(termAtt.term());
> =A0=A0 if (lineMatcher.find()) //(we like the payload)
> =A0=A0=A0=A0 return true;
> =A0 }
> =A0 //reached EOS -- return false
> =A0 return false;
> =A0}
>
> However the issue is that, now that I have the line I want to break up th=
e individual line into tokens along white space, but the WhitespaceTokenize=
r does not take a TokenStream as a constructor parameter.=A0 Can anyone off=
er=A0 suggestion for a workaround?
>
> Regards,
>
> Lev Bronshtein
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 06 13:05:43 2010
Return-Path: <java-user-return-47202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69729 invoked from network); 6 Sep 2010 13:05:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Sep 2010 13:05:43 -0000
Received: (qmail 31781 invoked by uid 500); 6 Sep 2010 13:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31348 invoked by uid 500); 6 Sep 2010 13:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 86058 invoked by uid 99); 6 Sep 2010 10:28:48 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of pintu.grijesh@gmail.com)
Date: Mon, 6 Sep 2010 03:28:22 -0700 (PDT)
From: "Grijesh.singh" <pintu.grijesh@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1283768902740-1425425.post@n3.nabble.com>
In-Reply-To: <4C80FC5B.3000805@orbita1.ru>
References: <4C80FC5B.3000805@orbita1.ru>
Subject: Re: Too many open files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Ask your sys admin to increase the os max open file limit

ulimit

-----
Grijesh
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Too-many-open-files-tp1412227p1425425.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 06 13:24:15 2010
Return-Path: <java-user-return-47203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72794 invoked from network); 6 Sep 2010 13:24:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Sep 2010 13:24:15 -0000
Received: (qmail 46645 invoked by uid 500); 6 Sep 2010 13:24:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46297 invoked by uid 500); 6 Sep 2010 13:24:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46279 invoked by uid 99); 6 Sep 2010 13:24:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 13:24:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 13:23:59 +0000
Received: by bwz14 with SMTP id 14so4673299bwz.35
        for <multiple recipients>; Mon, 06 Sep 2010 06:23:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=cphGiU/0IDXNaKqrlzPyqmTMuva3uk4wfCKbaq5YrUg=;
        b=UDmr0oTuy1lZJmQGHT90H9cfduRX8WwaxBrbPQMiCvjw7uUvRmn2nF/qZ3Xa5qACCx
         3l+qdzR1vqfXHljIDufeY4wwWDxtvNhcEVYHhdfTL5EtV6ryQB/8ASsfm4erB/v7grgM
         QZw99qrAo7x03pRFhaOK93BvcQTnAGLM6Yx9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=W97KJ0mcYB1SYXjS3dfgrT3dfMRWhqOEdmEHvYK88bNDvwE7wYfIPzo658HK79dZ5y
         wA3C/hJJhCBgXRqKRuvbMywGFsr/D6oY0uQLU/eZb7VUrOu2DcBHJt+c0xw3FCpjPtPF
         t+AxDCFxCArCC7bYQ4xIpUnFNkuFKR2KJl0dE=
MIME-Version: 1.0
Received: by 10.204.51.145 with SMTP id d17mr2924505bkg.20.1283779417101; Mon,
 06 Sep 2010 06:23:37 -0700 (PDT)
Received: by 10.204.142.198 with HTTP; Mon, 6 Sep 2010 06:23:37 -0700 (PDT)
Date: Mon, 6 Sep 2010 14:23:37 +0100
Message-ID: <AANLkTinXzVcVDBSr8TpfqbUMRroxmgWAyEJw=Og2AVAH@mail.gmail.com>
Subject: London open-source search social - 13th Sept
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org, 
	katta-developer@lists.sourceforge.net, users@elasticsearch.com
Content-Type: multipart/alternative; boundary=0016368e23802055e6048f973064

--0016368e23802055e6048f973064
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

Apologies for the short notice but we've booked a London Search Social for
the 13th Sept. Come along if you fancy geeking out about search and related
technology over a beer.

Details on the meetup page.

http://www.meetup.com/london-search-social/

Rich

--0016368e23802055e6048f973064--

From java-user-return-47204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 06 16:28:35 2010
Return-Path: <java-user-return-47204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23617 invoked from network); 6 Sep 2010 16:28:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Sep 2010 16:28:34 -0000
Received: (qmail 96639 invoked by uid 500); 6 Sep 2010 16:28:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96509 invoked by uid 500); 6 Sep 2010 16:28:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96501 invoked by uid 99); 6 Sep 2010 16:28:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 16:28:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of appy74@dsl.pipex.com designates 212.74.114.9 as permitted sender)
Received: from [212.74.114.9] (HELO mk-outboundfilter-5-a-3.mail.uk.tiscali.com) (212.74.114.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 16:28:21 +0000
X-Trace: 303365312/mk-outboundfilter-5.mail.uk.tiscali.com/PIPEX/$PIPEX-MX-ACCEPTED/pipex-infrastructure/193.61.44.46/None/appy74@dsl.pipex.com
X-SBRS: None
X-RemoteIP: 193.61.44.46
X-IP-MAIL-FROM: appy74@dsl.pipex.com
X-SMTP-AUTH: 
X-Originating-Country: GB/UNITED KINGDOM
X-MUA: Pipex Webmail (IMP3.1)
X-IP-BHB: Once
X-IP-Webmail: TRUE
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AsgEAPayhEzBPSwu/2dsb2JhbACTSMpshT0E
X-IronPort-AV: E=Sophos;i="4.56,326,1280703600"; 
   d="scan'208";a="303365312"
X-IP-Direction: IN
Received: from netmail.pipex.net (HELO mk-netmail-1.mail.uk.tiscali.com) ([212.74.100.20])
  by smtp.pipex.tiscali.co.uk with ESMTP/TLS/DHE-RSA-AES256-SHA; 06 Sep 2010 17:28:01 +0100
Received: from mk-netmail-1.mail.uk.tiscali.com (localhost.localdomain [127.0.0.1])
	by mk-netmail-1.mail.uk.tiscali.com (8.13.8/8.13.8) with ESMTP id o86GS1HD001539
	for <java-user@lucene.apache.org>; Mon, 6 Sep 2010 17:28:01 +0100
Received: (from apache@localhost)
	by mk-netmail-1.mail.uk.tiscali.com (8.13.8/8.13.8/Submit) id o86GS1B5001538
	for java-user@lucene.apache.org; Mon, 6 Sep 2010 17:28:01 +0100
Received: from 193.61.44.46 ( [193.61.44.46])
	as user appy74@dsl.pipex.com by netmail.pipex.net with HTTP;
	Mon, 06 Sep 2010 17:28:01 +0100
Message-ID: <1283790481.4c8516912ac5e@netmail.pipex.net>
Date: Mon, 06 Sep 2010 17:28:01 +0100
From: appy74@dsl.pipex.com
To: java-user@lucene.apache.org
Subject: How to use Lucene for getting tags for tagcloud?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Pipex Webmail (IMP3.1)
X-Originating-IP: 193.61.44.46
X-Pipex-Username: appy74@dsl.pipex.com
X-Usage: Pipex Webmail is subject to the standard Pipex terms and conditions of use
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

I'm a Lucene newbie and I have it working where I can create an index from a column of a database table storing
tags, and search this index for a particular tag and display the results and their scores. I'm looking at this as an
alternative to a MySQL fulltext index which I've heard mixed comments about.

But, what I want is to get from the most popular tags in the index along with their counts and then use this data to
create a tagcloud.

Does anyone know if and how Lucene can be queried to get the most popular tags in an index and their counts at all?

Thanks

Mr Morgan.

-- 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 06 16:41:45 2010
Return-Path: <java-user-return-47205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26650 invoked from network); 6 Sep 2010 16:41:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Sep 2010 16:41:44 -0000
Received: (qmail 11005 invoked by uid 500); 6 Sep 2010 16:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10726 invoked by uid 500); 6 Sep 2010 16:41:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10714 invoked by uid 99); 6 Sep 2010 16:41:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 16:41:41 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 16:41:34 +0000
Received: by qwk3 with SMTP id 3so5007270qwk.35
        for <java-user@lucene.apache.org>; Mon, 06 Sep 2010 09:41:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=KuK06uAce9F06EOBuPZsoxeQpFnrkz6v6r1SAkvuKVM=;
        b=dUjTwFHHAQvKT3X7gFbXafJAcag6Rn/4/pBi3A0Lg991AKO22HnGVyqthqHpJ21HbR
         mEbkjPAa4wFz9ZneyhFA3o47cgdGZwA+066DQHrHQbQHJkcGLh+/q9DvEfu7CFQRXRIR
         gPHxk2Vr0YXkPbebQrsPdlO8ZJSr8Ts+V14mI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=CXMteMqhGizYW1fO2mxA3Dz5yiXFz9JIpNdFrr17J8YPwq1gy5cipIXjlDnb5H/+wZ
         iouo78SwNthFCD9oGwS8DnEaJB/v9LTegn8SqFJvyNjS/pV1hYipmxiu/t7iDWYRogfs
         e+xUKWmffAboanTFTNBMaYdWTkpIUHwE0w5JY=
Received: by 10.229.224.136 with SMTP id io8mr3680423qcb.182.1283791273427;
 Mon, 06 Sep 2010 09:41:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.223.132 with HTTP; Mon, 6 Sep 2010 09:40:53 -0700 (PDT)
In-Reply-To: <1283790481.4c8516912ac5e@netmail.pipex.net>
References: <1283790481.4c8516912ac5e@netmail.pipex.net>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 6 Sep 2010 17:40:53 +0100
Message-ID: <AANLkTinJxvNdYkbTkP7CmptdcJD-H6pCOrQJhzMSsA2X@mail.gmail.com>
Subject: Re: How to use Lucene for getting tags for tagcloud?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like you want facets.  Google "lucene facets" or browse back
through the archives of this list - there was some discussion quite
recently.  Or use Solr which will do pretty much all of it for you.


--
Ian.


On Mon, Sep 6, 2010 at 5:28 PM,  <appy74@dsl.pipex.com> wrote:
> Hello
>
> I'm a Lucene newbie and I have it working where I can create an index from a column of a database table storing
> tags, and search this index for a particular tag and display the results and their scores. I'm looking at this as an
> alternative to a MySQL fulltext index which I've heard mixed comments about.
>
> But, what I want is to get from the most popular tags in the index along with their counts and then use this data to
> create a tagcloud.
>
> Does anyone know if and how Lucene can be queried to get the most popular tags in an index and their counts at all?
>
> Thanks
>
> Mr Morgan.
>
> --
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 06 16:45:48 2010
Return-Path: <java-user-return-47206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28033 invoked from network); 6 Sep 2010 16:45:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Sep 2010 16:45:47 -0000
Received: (qmail 16812 invoked by uid 500); 6 Sep 2010 16:45:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16666 invoked by uid 500); 6 Sep 2010 16:45:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16658 invoked by uid 99); 6 Sep 2010 16:45:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 16:45:45 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Sep 2010 16:45:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 085A845E8A9
	for <java-user@lucene.apache.org>; Mon,  6 Sep 2010 18:45:18 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id h6yzssOAUmRp for <java-user@lucene.apache.org>;
	Mon,  6 Sep 2010 18:45:06 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3D08545E704
	for <java-user@lucene.apache.org>; Mon,  6 Sep 2010 18:45:06 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1283790481.4c8516912ac5e@netmail.pipex.net> <AANLkTinJxvNdYkbTkP7CmptdcJD-H6pCOrQJhzMSsA2X@mail.gmail.com>
In-Reply-To: <AANLkTinJxvNdYkbTkP7CmptdcJD-H6pCOrQJhzMSsA2X@mail.gmail.com>
Subject: RE: How to use Lucene for getting tags for tagcloud?
Date: Mon, 6 Sep 2010 18:45:09 +0200
Message-ID: <00e501cb4de2$de1e81c0$9a5b8540$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGLzfE/lXEwZ42uEiDYkWwgUqHPwwH2yEgFk3RzJSA=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

If you want the tag clound for the *whole* index (not only the results of a
specific query), its easy:
Iterate over Term(s)Enum for the specific field, you are interested in, and
get the docFreq of each term.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Monday, September 06, 2010 6:41 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to use Lucene for getting tags for tagcloud?
> 
> Sounds like you want facets.  Google "lucene facets" or browse back
through
> the archives of this list - there was some discussion quite recently.  Or
use Solr
> which will do pretty much all of it for you.
> 
> 
> --
> Ian.
> 
> 
> On Mon, Sep 6, 2010 at 5:28 PM,  <appy74@dsl.pipex.com> wrote:
> > Hello
> >
> > I'm a Lucene newbie and I have it working where I can create an index
> > from a column of a database table storing tags, and search this index
> > for a particular tag and display the results and their scores. I'm
looking at this
> as an alternative to a MySQL fulltext index which I've heard mixed
comments
> about.
> >
> > But, what I want is to get from the most popular tags in the index
> > along with their counts and then use this data to create a tagcloud.
> >
> > Does anyone know if and how Lucene can be queried to get the most
popular
> tags in an index and their counts at all?
> >
> > Thanks
> >
> > Mr Morgan.
> >
> > --
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 07 02:37:37 2010
Return-Path: <java-user-return-47207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93038 invoked from network); 7 Sep 2010 02:37:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Sep 2010 02:37:37 -0000
Received: (qmail 17179 invoked by uid 500); 7 Sep 2010 02:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16889 invoked by uid 500); 7 Sep 2010 02:37:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16881 invoked by uid 99); 7 Sep 2010 02:37:32 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Sep 2010 02:37:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lev_bronshtein@hotmail.com designates 65.55.34.86 as permitted sender)
Received: from [65.55.34.86] (HELO col0-omc2-s12.col0.hotmail.com) (65.55.34.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Sep 2010 02:37:07 +0000
Received: from COL118-W27 ([65.55.34.72]) by col0-omc2-s12.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 6 Sep 2010 19:36:46 -0700
Message-ID: <COL118-W279EECDB9CABBCA4BB6E73F3710@phx.gbl>
X-Originating-IP: [96.224.227.191]
From: Lev Bronshtein <lev_bronshtein@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: hit position
Date: Mon, 6 Sep 2010 22:36:45 -0400
Importance: Normal
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 07 Sep 2010 02:36:46.0574 (UTC) FILETIME=[840B08E0:01CB4E35]
X-Virus-Checked: Checked by ClamAV on apache.org


Now that I can index my data=2C I want to be able to search it and report s=
ome sort of position information with every hit=2C such as a line number or=
 a byte ofset within the stream.=A0 Any idea how I can acoomplish this?
 		 	   		  =

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 07 11:35:33 2010
Return-Path: <java-user-return-47208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29570 invoked from network); 7 Sep 2010 11:35:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Sep 2010 11:35:33 -0000
Received: (qmail 22704 invoked by uid 500); 7 Sep 2010 11:35:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22235 invoked by uid 500); 7 Sep 2010 11:35:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22226 invoked by uid 99); 7 Sep 2010 11:35:26 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Sep 2010 11:35:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Sep 2010 11:35:04 +0000
Received: by qwk3 with SMTP id 3so5707472qwk.35
        for <java-user@lucene.apache.org>; Tue, 07 Sep 2010 04:34:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=C6kULDylI7+cm1yf4zzI6gmD3jd6VhtL3uno88zHu5A=;
        b=LuVe9MIIqEh+Kbe7BrzzF5yK25xFU4wWivzzkytp7ZtoszeEoIrR4SdWaEsAVYjzSy
         88nvFSBSTeu/ueSDpJrWLCvNveo2Fczb6Vou1mk3H24muXBp4fdPBkd5gXmcvVBEgs+3
         lQGtvKMo/Rv4tdnfmoRnTAcr0fF5siC/L7i1E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jxCHzCy3uUKri1KZKJ4pM2ARa7xtJUiSUv57iBEV0MxzhkvzaYtJ2ZzbZxDnFBrrso
         cgflPs85rstUqgqdZGJHgKt4MnMTWMLmmx+wH9n+2Ep65q7Nr4ChzD6UnuJ2yVL2X32D
         f27eHEWnShhH72/VfzIx4wVVUuR/MDEUXHZik=
MIME-Version: 1.0
Received: by 10.229.215.208 with SMTP id hf16mr963411qcb.79.1283859282575;
 Tue, 07 Sep 2010 04:34:42 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Tue, 7 Sep 2010 04:34:42 -0700 (PDT)
In-Reply-To: <COL118-W279EECDB9CABBCA4BB6E73F3710@phx.gbl>
References: <COL118-W279EECDB9CABBCA4BB6E73F3710@phx.gbl>
Date: Tue, 7 Sep 2010 07:34:42 -0400
Message-ID: <AANLkTim4w30-cHkZrQ51BaboEYvT=RJqKjOnRAkPW9iC@mail.gmail.com>
Subject: Re: hit position
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f4f97ac885048fa9c8c9
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630f4f97ac885048fa9c8c9
Content-Type: text/plain; charset=ISO-8859-1

Line number is a completely unknown concept to Lucene, you have to somehow
figure it out. I've seen at least two ways to make that work:
1> use payloads. A payload is just a bit of data you attach to each token,
what you
     put in there is up to you, so you can encode this kind of information
however you
     want. See:
http://www.lucidimagination.com/blog/2009/08/05/getting-started-with-payloads/

2> You can do a similar sort of thing by recording the relevant information
when
     you analyze a document and the include that data in a very special
(probably
     stored-only field) in your document. Say the offsets of each beginning
of line.
     This field would never be searched, just used to find out what line a
hit
     was on. Then, when you can find the lines numbers once you know the
term
     positions. Stealing from Grant:
See
http://www.lucidimagination.com/search/document/7fe40486bc935ce4/get_term_neighbours(although
I think you can do better than the code in the third reply by using a
TermVectorMapper such that you can process the TermVector as it comes from
disk.)

Essentially, you need to use a combination of SpanQuery, TermVector and
TermVectorMapper.

HTH
Erick


On Mon, Sep 6, 2010 at 10:36 PM, Lev Bronshtein
<lev_bronshtein@hotmail.com>wrote:

>
> Now that I can index my data, I want to be able to search it and report
> some sort of position information with every hit, such as a line number or a
> byte ofset within the stream.  Any idea how I can acoomplish this?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630f4f97ac885048fa9c8c9--

From java-user-return-47209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 07 16:29:15 2010
Return-Path: <java-user-return-47209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30628 invoked from network); 7 Sep 2010 16:29:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Sep 2010 16:29:15 -0000
Received: (qmail 95693 invoked by uid 500); 7 Sep 2010 16:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95599 invoked by uid 500); 7 Sep 2010 16:29:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95591 invoked by uid 99); 7 Sep 2010 16:29:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Sep 2010 16:29:11 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Sep 2010 16:29:04 +0000
Received: from compute1.internal (compute1.nyi.mail.srv.osa [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 0B73796;
	Tue,  7 Sep 2010 12:28:44 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Tue, 07 Sep 2010 12:28:44 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=n3p+53xaqrkDzMYJOAArB69MyFM=; b=Dr7KWY1LLkj7VwZ6Ts6h4pr1udMU+j7npubpVucPpTX7iuHMwOVN9e7jgMvbUe5FErD9swLehovAtwirxN4CsKob4le4MV3iT9J3p6Hg2igf1z7nvDBLrku8q/aJnrPlxm2Jp5VMmmnvlTX8Mi5rneRYWAS/nXKAQI8ag8VzSbA=
X-Sasl-enc: 5HSbpUJRd3H+DIyClqI+O4Rvt9DpSXK3IExOqomF+HWy 1283876923
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 465F24002F0;
	Tue,  7 Sep 2010 12:28:43 -0400 (EDT)
Message-ID: <4C866924.1060309@fastmail.fm>
Date: Tue, 07 Sep 2010 17:32:36 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org, Uwe Schindler <uwe@thetaphi.de>
Subject: Re: Blocking on IndexSearcher search
References: <4C757C48.5010909@fastmail.fm> <00c901cb4496$09164a30$1b42de90$@thetaphi.de> <4C758335.7010107@fastmail.fm> <00cb01cb449a$0859db30$190d9190$@thetaphi.de> <4C758AC7.1030006@fastmail.fm> <000901cb449e$7194cd90$54be68b0$@thetaphi.de>
In-Reply-To: <000901cb449e$7194cd90$54be68b0$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Uwe Schindler wrote:
>> Im using Windows and I'll try NIO, good idea, my app is already memory
>> hungry in other areas so I guess MMapped is a no go, doe sit use heap or
>>     
> perm
>   
>> memory ?
>>     
>
> It uses address space for mapping the files into virtual memory (like a swap
> file) - this is why it only works well for 64bit VMs. The used physical
> memory depends on your OS cache configuration. Java Heap is not used for
> that (in contrast to copying a  file to a RAMDirectory).
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
Went to try NIO and then realised it no better for Windows, in fact the 
SUN bug seems is saying that multiple file channels work better than 
sharing one, so perhaps that it what is happening when I had mutliple  
IndexReaders and so performance was actually better on Windows in that 
circumstance. As customers could be using 32bit or 64bit I fear that 
MMapped is not a very robust solution
, oh well have to live with fit or now I suppose

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 08 21:28:00 2010
Return-Path: <java-user-return-47210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61746 invoked from network); 8 Sep 2010 21:28:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Sep 2010 21:28:00 -0000
Received: (qmail 24966 invoked by uid 500); 8 Sep 2010 21:27:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24831 invoked by uid 500); 8 Sep 2010 21:27:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24823 invoked by uid 99); 8 Sep 2010 21:27:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Sep 2010 21:27:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Sep 2010 21:27:50 +0000
Received: by fxm17 with SMTP id 17so624967fxm.35
        for <java-user@lucene.apache.org>; Wed, 08 Sep 2010 14:27:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=Hdw3gXbTYBNW+tgt02OFH8eyWedf+rcQczZ17wpW5xY=;
        b=HuGS3by1grPca2NiGiJC7vbS1n6Y0/YcmgEGnLGQPlrmUpUa8Ab/eynF9hbdZcCzU7
         kbzgQA/4gyJ+YySiLQ7lWvBx5VDiFT5mZe6xXktNNWtjtcRPCDiN8RHWGdxGgf3N9EKI
         ENAtK1cxk1GuxxL/Kod5ho6GHqVyn3vpH+Gyc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=KrojF8mqhmdnRxOYRK8uf63tOZyQcGEINdplcHU8sQ0voj+t+uijXY1EmqAOPx78DM
         de86MypMmg9auRmyyj7QvrBHtN6vlWZlVX4EKrvW7Zgtv+6ZG1vhr2+6WAaROyhtIiip
         0NV/xSDlmZTw/S10LIuZYhHemu3XAQ2QZyYP4=
Received: by 10.239.171.143 with SMTP id w15mr473236hbe.55.1283981249130; Wed,
 08 Sep 2010 14:27:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.239.150.133 with HTTP; Wed, 8 Sep 2010 14:27:09 -0700 (PDT)
From: Max Lynch <ihasmax@gmail.com>
Date: Wed, 8 Sep 2010 16:27:09 -0500
Message-ID: <AANLkTim5fcTpdYvcyCDgOoZrRFAsOCJp1AfR=5RoBVRj@mail.gmail.com>
Subject: "WI" not Wi-Fi
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f1ec9040bcde048fc62e62

--001485f1ec9040bcde048fc62e62
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I am using the StandardAnalyzer, but I am not interested in converting words
like Wi-Fi into "Wi" and "Fi".  Rather, "WI" is an important word for my
users (indicating the state of Wisconsin) and I need "WI" to only match the
distinct word.

I know in Solr I can set generateWordParts="0" for my
solr.WordDelimiterFilterFactory, but for some reason when I read the index
with Lucene the tokens are still separated.

Is there a way to disable this?  Thanks.

--001485f1ec9040bcde048fc62e62--

From java-user-return-47211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 08 22:23:48 2010
Return-Path: <java-user-return-47211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42135 invoked from network); 8 Sep 2010 22:23:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Sep 2010 22:23:48 -0000
Received: (qmail 78144 invoked by uid 500); 8 Sep 2010 22:23:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78062 invoked by uid 500); 8 Sep 2010 22:23:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78054 invoked by uid 99); 8 Sep 2010 22:23:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Sep 2010 22:23:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Sep 2010 22:23:39 +0000
Received: by qyk12 with SMTP id 12so6265484qyk.14
        for <java-user@lucene.apache.org>; Wed, 08 Sep 2010 15:23:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=e9cmRr+SiXrBIhEbxAu9UKWlF/73YVzkBrbzMfcbxC8=;
        b=LFMak9cUL6x4glu+jNLbTudNVFRprgW/ZseGQcPNfKAAM95tY1NfidcJQmG6dBiff2
         vy31shkKfdL2a2FBt305Tvsrrq4ea9+CFCn7TUAQQl58smxOFoy4CIcGrfMuU/gBPLdp
         5h0p17bsWzo2+qc7ctN5ppgT4k45N/t9l/vug=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=twwc447FCVTX473XKAEvAbn7M9I1hdI5SLNs/UA0u3cn2Z3otauOwV/iFY6zquMjSw
         7QQfI4Biz5dgu7cBVpT+KXZA5v2FXFv1C9ooColj1O3tommLaXeL0oih+GxRgoZuJRDF
         u8eX0pBOSgEjrPBqS10s6hS2RYlRRoxd7SxmI=
MIME-Version: 1.0
Received: by 10.229.192.21 with SMTP id do21mr3012430qcb.57.1283984598230;
 Wed, 08 Sep 2010 15:23:18 -0700 (PDT)
Received: by 10.229.225.20 with HTTP; Wed, 8 Sep 2010 15:23:18 -0700 (PDT)
In-Reply-To: <AANLkTim5fcTpdYvcyCDgOoZrRFAsOCJp1AfR=5RoBVRj@mail.gmail.com>
References: <AANLkTim5fcTpdYvcyCDgOoZrRFAsOCJp1AfR=5RoBVRj@mail.gmail.com>
Date: Wed, 8 Sep 2010 18:23:18 -0400
Message-ID: <AANLkTinrzzDVDDU+9n3oywyVFbgWqCd5_vAzb-0VmbFa@mail.gmail.com>
Subject: Re: "WI" not Wi-Fi
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b88acdfe925048fc6f5ab

--0016363b88acdfe925048fc6f5ab
Content-Type: text/plain; charset=ISO-8859-1

I'm a bit confused, this is the Lucene list, but it sounds like you're using
SOLR. If you are, could you post the relevant parts of your schema,
especially the field type definition for the field in question? If you are,
why not just take WordDelimiterFilterFactory out of your field type
definition?

The analysis page will help you lots here if you're in SOLR.

StandardAnalyzer could well be splitting on '-' if you're using that.

Best
Erick

On Wed, Sep 8, 2010 at 5:27 PM, Max Lynch <ihasmax@gmail.com> wrote:

> Hi,
> I am using the StandardAnalyzer, but I am not interested in converting
> words
> like Wi-Fi into "Wi" and "Fi".  Rather, "WI" is an important word for my
> users (indicating the state of Wisconsin) and I need "WI" to only match the
> distinct word.
>
> I know in Solr I can set generateWordParts="0" for my
> solr.WordDelimiterFilterFactory, but for some reason when I read the index
> with Lucene the tokens are still separated.
>
> Is there a way to disable this?  Thanks.
>

--0016363b88acdfe925048fc6f5ab--

From java-user-return-47212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 08 22:30:44 2010
Return-Path: <java-user-return-47212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55018 invoked from network); 8 Sep 2010 22:30:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Sep 2010 22:30:44 -0000
Received: (qmail 84910 invoked by uid 500); 8 Sep 2010 22:30:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84832 invoked by uid 500); 8 Sep 2010 22:30:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84824 invoked by uid 99); 8 Sep 2010 22:30:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Sep 2010 22:30:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Sep 2010 22:30:33 +0000
Received: by fxm17 with SMTP id 17so677362fxm.35
        for <java-user@lucene.apache.org>; Wed, 08 Sep 2010 15:30:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=5DfBAii01zSh65NCBC1x1lopJkmsP6ffeOn265P//k8=;
        b=L4xKhVePXja3C+EOFJIU+UrHislaz4atyzuWuLByfSq2xr5TIj/swvxH0gF3IuHRr6
         yqy+I8lW7RBuESqn/X6dSMoR3+nItCIIg3o7mzjkqLvlKcD8na6Y5rqWuI4jR5XB0jf9
         rFhlkTxmclURDKZ/e5ilGW8sBSvp72b7qZbRc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=esFsb75eyDps89T7Yj1fYwHqe2jFTkcUF7NKDVpzYhUywrI0xdUNjq/5G9yGDvt80f
         ZsMJ+ClA9QGSZXm2efd1lD0yCZ0A46s/iGvT/tyTiMjsOYUm25R3cBg4yqovfBDMRM/v
         S+UH/xYL7eeC3ZatQjUvf2sIse1bRjbqLEG4U=
Received: by 10.239.152.75 with SMTP id u11mr473922hbb.113.1283985013184; Wed,
 08 Sep 2010 15:30:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.239.150.133 with HTTP; Wed, 8 Sep 2010 15:29:53 -0700 (PDT)
In-Reply-To: <AANLkTinrzzDVDDU+9n3oywyVFbgWqCd5_vAzb-0VmbFa@mail.gmail.com>
References: <AANLkTim5fcTpdYvcyCDgOoZrRFAsOCJp1AfR=5RoBVRj@mail.gmail.com> <AANLkTinrzzDVDDU+9n3oywyVFbgWqCd5_vAzb-0VmbFa@mail.gmail.com>
From: Max Lynch <ihasmax@gmail.com>
Date: Wed, 8 Sep 2010 17:29:53 -0500
Message-ID: <AANLkTi=+Nsqpv7FCazbRH1EwQZnr__F78GcDfNQdLKW5@mail.gmail.com>
Subject: Re: "WI" not Wi-Fi
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485ecf72c9b9a87048fc70eae
X-Virus-Checked: Checked by ClamAV on apache.org

--001485ecf72c9b9a87048fc70eae
Content-Type: text/plain; charset=ISO-8859-1

Sorry to be confusing.  I'm actually using both.  I use Solr for its web
application features and Lucene for my background searches.  In this case,
the issue is with my Lucene side of things.

The analysis feature on the Solr admin page shows the analysis being correct
and wi-fi no longer matches "WI".  Here is the schema snippe for this type.
I changed generateWordParts="1" to "0" and that fixed the solr side of
thingst:

        <fieldType name="text_standard" class="solr.TextField"
positionIncrementGap="100">
            <analyzer type="index">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.WordDelimiterFilterFactory"
generateWordParts="0" generateNumberParts="1" catenateWords="1"
catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.SnowballPorterFilterFactory" language="English"
protected="protwords.txt"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt"
ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory"
generateWordParts="1" generateNumberParts="1" catenateWords="0"
catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.SnowballPorterFilterFactory" language="English"
protected="protwords.txt"/>
      </analyzer>
    </fieldType>


However, I am using a StandardAnalyzer on the index beneath Solr and my hits
are still showing up with Wi-Fi.  I was curious if there was something
special I had to do with the StandardAnalyzer on the lucene side of things
in order to remove the word split functionality.  I know it's kind of an odd
relationship with Solr and Lucene, but I haven't had any other issues so
far.


Please let me know if you think this belongs on the Solr list instead.

Thanks.


On Wed, Sep 8, 2010 at 5:23 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> I'm a bit confused, this is the Lucene list, but it sounds like you're
> using
> SOLR. If you are, could you post the relevant parts of your schema,
> especially the field type definition for the field in question? If you are,
> why not just take WordDelimiterFilterFactory out of your field type
> definition?
>
> The analysis page will help you lots here if you're in SOLR.
>
> StandardAnalyzer could well be splitting on '-' if you're using that.
>
> Best
> Erick
>
> On Wed, Sep 8, 2010 at 5:27 PM, Max Lynch <ihasmax@gmail.com> wrote:
>
> > Hi,
> > I am using the StandardAnalyzer, but I am not interested in converting
> > words
> > like Wi-Fi into "Wi" and "Fi".  Rather, "WI" is an important word for my
> > users (indicating the state of Wisconsin) and I need "WI" to only match
> the
> > distinct word.
> >
> > I know in Solr I can set generateWordParts="0" for my
> > solr.WordDelimiterFilterFactory, but for some reason when I read the
> index
> > with Lucene the tokens are still separated.
> >
> > Is there a way to disable this?  Thanks.
> >
>

--001485ecf72c9b9a87048fc70eae--

From java-user-return-47213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 09 02:48:01 2010
Return-Path: <java-user-return-47213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39336 invoked from network); 9 Sep 2010 02:48:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Sep 2010 02:48:01 -0000
Received: (qmail 62741 invoked by uid 500); 9 Sep 2010 02:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62368 invoked by uid 500); 9 Sep 2010 02:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62355 invoked by uid 99); 9 Sep 2010 02:47:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 02:47:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 02:47:49 +0000
Received: by qyk12 with SMTP id 12so6588940qyk.14
        for <java-user@lucene.apache.org>; Wed, 08 Sep 2010 19:47:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=GmXK2gjIQleN/3Z69fyyjDPlnwWv56zZrz/rpaBN8UA=;
        b=uVnGBV+Ft1kln8K12SXaj0NWeTF6m+Ar/g105mqM2irl7xmLpy3Mq+X0esUve70zug
         yLlvzs+UcaDvNVbrgyuUsdg7JepgvtLNtrpaSgdwKSXEoOCGElZ3JUAAhUsprnDyszEK
         puJpFBCbXWUQKZt3SR/rbG3iB06n/99QnOfTk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ndw+gqivyOnFi/tprcTurvIs0J7M3ahN9aJoUimclVexA4pAJtsaweEEcV/ZLM9+dC
         fKBDfYX2hNzj1QMADUz/u5B7+aLxU++mApQxk1kBp/NiW00vDiplMbyT3hhof7/f9Bt5
         4yf5lnK3Cn+YARZlRZHz4m4c/aVbQJNFBxzjI=
MIME-Version: 1.0
Received: by 10.229.218.85 with SMTP id hp21mr528780qcb.11.1284000448459; Wed,
 08 Sep 2010 19:47:28 -0700 (PDT)
Received: by 10.229.225.20 with HTTP; Wed, 8 Sep 2010 19:47:28 -0700 (PDT)
In-Reply-To: <AANLkTi=+Nsqpv7FCazbRH1EwQZnr__F78GcDfNQdLKW5@mail.gmail.com>
References: <AANLkTim5fcTpdYvcyCDgOoZrRFAsOCJp1AfR=5RoBVRj@mail.gmail.com>
	<AANLkTinrzzDVDDU+9n3oywyVFbgWqCd5_vAzb-0VmbFa@mail.gmail.com>
	<AANLkTi=+Nsqpv7FCazbRH1EwQZnr__F78GcDfNQdLKW5@mail.gmail.com>
Date: Wed, 8 Sep 2010 22:47:28 -0400
Message-ID: <AANLkTi=xt1nT_gqDimdSs3Apdg-8-6PNwYD5eNR92fdX@mail.gmail.com>
Subject: Re: "WI" not Wi-Fi
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b90569f3328048fcaa628

--0016363b90569f3328048fcaa628
Content-Type: text/plain; charset=ISO-8859-1

As far as I know, there's not much at all you can do with StandardAnalyzer
to emulate what's happening on Solr in Lucene. What you might be able to
do is use a different Analyzer, perhaps SimpleAnalyzer would do the trick,
see the API docs in lucene...

Beyond that, you might have to make your own analyzer in Lucene. Lucene
in Action has an example of making your own analyzer that can server as
a model (SynonymAnalyzer).

Beyond that, I'm going to have to defer to wiser heads than me.

Best
Erick

On Wed, Sep 8, 2010 at 6:29 PM, Max Lynch <ihasmax@gmail.com> wrote:

> Sorry to be confusing.  I'm actually using both.  I use Solr for its web
> application features and Lucene for my background searches.  In this case,
> the issue is with my Lucene side of things.
>
> The analysis feature on the Solr admin page shows the analysis being
> correct
> and wi-fi no longer matches "WI".  Here is the schema snippe for this type.
> I changed generateWordParts="1" to "0" and that fixed the solr side of
> thingst:
>
>        <fieldType name="text_standard" class="solr.TextField"
> positionIncrementGap="100">
>            <analyzer type="index">
>                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
>        <filter class="solr.WordDelimiterFilterFactory"
> generateWordParts="0" generateNumberParts="1" catenateWords="1"
> catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
>        <filter class="solr.LowerCaseFilterFactory"/>
>        <filter class="solr.SnowballPorterFilterFactory" language="English"
> protected="protwords.txt"/>
>      </analyzer>
>      <analyzer type="query">
>        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
>        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt"
> ignoreCase="true" expand="true"/>
>        <filter class="solr.StopFilterFactory"
>                ignoreCase="true"
>                words="stopwords.txt"
>                enablePositionIncrements="true"
>                />
>        <filter class="solr.WordDelimiterFilterFactory"
> generateWordParts="1" generateNumberParts="1" catenateWords="0"
> catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
>        <filter class="solr.LowerCaseFilterFactory"/>
>        <filter class="solr.SnowballPorterFilterFactory" language="English"
> protected="protwords.txt"/>
>      </analyzer>
>    </fieldType>
>
>
> However, I am using a StandardAnalyzer on the index beneath Solr and my
> hits
> are still showing up with Wi-Fi.  I was curious if there was something
> special I had to do with the StandardAnalyzer on the lucene side of things
> in order to remove the word split functionality.  I know it's kind of an
> odd
> relationship with Solr and Lucene, but I haven't had any other issues so
> far.
>
>
> Please let me know if you think this belongs on the Solr list instead.
>
> Thanks.
>
>
> On Wed, Sep 8, 2010 at 5:23 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > I'm a bit confused, this is the Lucene list, but it sounds like you're
> > using
> > SOLR. If you are, could you post the relevant parts of your schema,
> > especially the field type definition for the field in question? If you
> are,
> > why not just take WordDelimiterFilterFactory out of your field type
> > definition?
> >
> > The analysis page will help you lots here if you're in SOLR.
> >
> > StandardAnalyzer could well be splitting on '-' if you're using that.
> >
> > Best
> > Erick
> >
> > On Wed, Sep 8, 2010 at 5:27 PM, Max Lynch <ihasmax@gmail.com> wrote:
> >
> > > Hi,
> > > I am using the StandardAnalyzer, but I am not interested in converting
> > > words
> > > like Wi-Fi into "Wi" and "Fi".  Rather, "WI" is an important word for
> my
> > > users (indicating the state of Wisconsin) and I need "WI" to only match
> > the
> > > distinct word.
> > >
> > > I know in Solr I can set generateWordParts="0" for my
> > > solr.WordDelimiterFilterFactory, but for some reason when I read the
> > index
> > > with Lucene the tokens are still separated.
> > >
> > > Is there a way to disable this?  Thanks.
> > >
> >
>

--0016363b90569f3328048fcaa628--

From java-user-return-47214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 09 04:15:50 2010
Return-Path: <java-user-return-47214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66664 invoked from network); 9 Sep 2010 04:15:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Sep 2010 04:15:50 -0000
Received: (qmail 7262 invoked by uid 500); 9 Sep 2010 04:15:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6680 invoked by uid 500); 9 Sep 2010 04:15:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6667 invoked by uid 99); 9 Sep 2010 04:15:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 04:15:42 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tangfulin@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 04:15:37 +0000
Received: by wyf23 with SMTP id 23so1182730wyf.35
        for <java-user@lucene.apache.org>; Wed, 08 Sep 2010 21:15:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=q88D+ZXN64zdCcqHb2u8R2qgrUjD817O8RokvMM5mfE=;
        b=cIlf8pUp7Cp1g2B2z2fNaKB9Qhz6STjHqnMfefSSJhdzWXiIcwFjpBEkWAD1qgAWrS
         SxIA0XlslyOVyMpHvIM/c3DlGSHiQrHtwfnKMlZIEJrAcAzWradRfDH1Il3ELZqZuLWF
         hqugvpuvCwjR5dAZpJQdDbyl6jA6Uv1/wuf1w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=de5y6Z3nab9OVBXw/ZNW8cQwPzkz0QrAGUiGefUg16F09lSp0eUlenTNfCWnpmgFe1
         V5iWZfsbUdCzQEwmZ2Lj68COnkxed7xVPJIqX+LLQS98mUjuC8OfHa0Lv45ctPRThBy1
         fjHPnU1QjiSLhWx6ghVHgNZuHjocn/tQpJ+ew=
MIME-Version: 1.0
Received: by 10.227.157.147 with SMTP id b19mr126880wbx.49.1284005715391; Wed,
 08 Sep 2010 21:15:15 -0700 (PDT)
Received: by 10.227.129.69 with HTTP; Wed, 8 Sep 2010 21:15:15 -0700 (PDT)
In-Reply-To: <AANLkTik5niWBV+7wKUkFrctd4=A+r51yrRiz_+C875g-@mail.gmail.com>
References: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
	<AANLkTinzUgWFm+-ocXGaYYkqVNfwx59v+2ocREyN3E1z@mail.gmail.com>
	<1D3D7943573BD14FB024A9654EB43CCB04AE2B71@A99A-EMS-01VS2.ad.bedag.ch>
	<AANLkTi=65b0RPcOJM3PbqTSbeZ+UTWh8X5LFA_UWUHKS@mail.gmail.com>
	<AANLkTik5niWBV+7wKUkFrctd4=A+r51yrRiz_+C875g-@mail.gmail.com>
Date: Thu, 9 Sep 2010 12:15:15 +0800
Message-ID: <AANLkTikfmM8N2pJ8ubXAD8XsiwNvmKTKRtVSXVm024mw@mail.gmail.com>
Subject: Re: Combine data from index and db before sorting and pagination
From: fulin tang <tangfulin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

That is exactly what I am looking for now !

Our mail search system has a field name flags, like read/unread etc,
and it will change after the email indexed , so we need an update .

But we only update one field, more exactly, one  Field.Index.NOT_ANALYZED a=
nd
Field.Store.YES  field , how can we avoid update the whole document ?


=E6=A2=A6=E7=9A=84=E5=BC=80=E5=A7=8B=E6=8C=A3=E6=89=8E=E4=BA=8E=E5=9F=8E=E5=
=B8=82=E7=9A=84=E8=BE=B9=E7=BC=98
=E5=BF=83=E7=9A=84=E8=BF=9C=E6=96=B9=E6=89=A7=E7=9D=80=E5=9C=A8=E8=84=9A=E6=
=AD=A5=E7=9A=84=E7=9E=AC=E9=97=B4
=E6=88=91=E7=9A=84=E5=AE=BF=E5=91=BD=E5=9F=8B=E8=97=8F=E4=BA=86=E5=AF=82=E5=
=AF=9E=E7=9A=84=E6=B0=B8=E8=BF=9C



2010/9/2 Chris Lu <chris.lu@gmail.com>:
> If there is an API to adjust the inverted index directly, it would be muc=
h
> efficient.
>
> I guess Mirko's problem is similar to this: There could be a "main_record=
"
> table and "category" table. Each "main_record" has a "category".
> When one "category" is changed, quite some "main_record" are affected.
>
> If we denormalize the data, which is the only way currently for good sort=
ing
> performance, we would need to re-index all the affected documents.
> However, all the re-indexing work is quite inefficient.
>
> Let's suppose the "category" is using Field.Index.NOT_ANALYZED and
> Field.Store.YES.
>
> So in the inverted index is conceptually like this:
> =C2=A0"category_1": doc1,doc2,doc5,doc10.
> =C2=A0"category_2": doc3,doc4,doc7,doc8.
> If the only change is that several "category_1" records are changed to
> "category_2", take doc5 and doc10 for example, after all the reindexing
> effort, the only changes is:
> =C2=A0"category_1": doc1,doc2.
> =C2=A0"category_2": doc3,doc4,doc5,doc7,doc8,doc10.
>
> Of course, to support this efficiently could be a big change, affecting a=
ll
> the nice efficient DocDelta storage.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
> On Wed, Sep 1, 2010 at 4:29 PM, Erick Erickson <erickerickson@gmail.com>w=
rote:
>
>> The usual first choice when using Lucene to search database data is to
>> denormalize the db data into the index. Yes, it's redundant, but it's of=
ten
>> a better solution than trying to use both. Synchronization can be an iss=
ue,
>> but you have to deal with that anyway since you're indexing from the db
>> anyway.
>>
>> =C2=A0But you haven't given us any indication of how much data you're ta=
lking
>> about here. Without some such detail, it's really hard to make a
>> recommendation.
>>
>> Best
>> Erick
>>
>> On Wed, Sep 1, 2010 at 9:30 AM, Sertic Mirko, Bedag
>> <Mirko.Sertic@bedag.ch>wrote:
>>
>> > The data from db is required for sorting, and one db entry matches to
>> many
>> > index entries, so storing it in the index would be redundant. Also the=
re
>> > would be the challenge to keep index and db in sync. Any ideas?
>> >
>> > Mirko
>> >
>> > -----Urspr=C3=BCngliche Nachricht-----
>> > Von: Ian Lea [mailto:ian.lea@gmail.com]
>> > Gesendet: Mittwoch, 1. September 2010 15:17
>> > An: java-user@lucene.apache.org
>> > Betreff: Re: Combine data from index and db before sorting and paginat=
ion
>> >
>> > If the sorting and pagination doesn't require data from the database,
>> > just do db lookups for the hits on a page, page by page as required.
>> > But if the db data is required I'd suggest storing it in the index.
>> >
>> >
>> > --
>> > Ian.
>> >
>> > On Wed, Sep 1, 2010 at 1:43 PM, Sertic Mirko, Bedag
>> > <Mirko.Sertic@bedag.ch> wrote:
>> > > Hi
>> > >
>> > >
>> > >
>> > > I need to implement sorting and pagination of lucene search results.
>> > > This is quite easy, but I have to combine Data from the index with d=
ata
>> > > from a database. The index has the fulltext data plus a unique
>> > > identifier for a record from the database. The database stores
>> > > additional data. Fulltext search is only done on the index. I need t=
o
>> > > combine the search results from the index and the additional data fr=
om
>> > > the database before sorting and pagination.
>> > >
>> > >
>> > >
>> > > Is the IndexReader.document() Method the right place to enrich the d=
ata
>> > > from the index with data from the db? How should I implement this
>> > > functionality with lucene?
>> > >
>> > >
>> > >
>> > > Thanks in advance
>> > >
>> > > Mirko
>> > >
>> > >
>> > >
>> > >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 09 05:20:44 2010
Return-Path: <java-user-return-47215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77300 invoked from network); 9 Sep 2010 05:20:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Sep 2010 05:20:43 -0000
Received: (qmail 45441 invoked by uid 500); 9 Sep 2010 05:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43247 invoked by uid 500); 9 Sep 2010 05:20:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43236 invoked by uid 99); 9 Sep 2010 05:20:36 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 05:20:36 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tangfulin@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 05:20:14 +0000
Received: by wyf23 with SMTP id 23so1251041wyf.35
        for <java-user@lucene.apache.org>; Wed, 08 Sep 2010 22:19:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=IKjUEVXL67Ttjq/rA9DhcSiJPVAu5A5zHX3D8pmlasQ=;
        b=ZvrvSNzSNxJPvFXhaF9wNA32eY998QuqLo8QCkWFa/lemwN9IX7tMaYsTjXM6tamdi
         JYk4KFjr4fyuSphRNPlpWsyo/7NHkMdvBNeGzSyfYWtQZqj1lsxcTN3re4JgLTU9HpxB
         jNmfEo5MorFaet9hmWTxBII5F8MpUXsLPlLvs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=OSn35sXPKhN2LN0WQkonZzki9UkCO/55AbCkS169h/zr4Vp0odbcpYrJjWcw18mRbw
         JY+TpzqtUtIrvk9lztYbjFHquWe0KsgpThq+UjP7zdCtnoBS5MDblCAPyRfvRYcOUggT
         QG1GyUN5GLabRe0Lci1a+83pKz62ODESErt7A=
MIME-Version: 1.0
Received: by 10.227.141.136 with SMTP id m8mr155288wbu.227.1284009594287; Wed,
 08 Sep 2010 22:19:54 -0700 (PDT)
Received: by 10.227.129.69 with HTTP; Wed, 8 Sep 2010 22:19:54 -0700 (PDT)
In-Reply-To: <67B9FB634299E5469D36BF5B3537F024C2D6B3@pwex01.zoo.hmsonline.com>
References: <AANLkTi=_wHfoBcM+mHKZJu31Q4juSNOAAigbUg7pqaua@mail.gmail.com>
	<AANLkTinpxhRNruN2tWhgQFageY=f4Yf2A=Y5b0U5dQPP@mail.gmail.com>
	<67B9FB634299E5469D36BF5B3537F024C2D6B3@pwex01.zoo.hmsonline.com>
Date: Thu, 9 Sep 2010 13:19:54 +0800
Message-ID: <AANLkTi=AxBvz1n6snCZmzGazf+dNufEDnJZE-J7+vRZp@mail.gmail.com>
Subject: Re: How to do facet search in lucene, NOT solr ?
From: fulin tang <tangfulin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

sorry but the Bobo-brouse is too complex for me to understand

Will who please explain it to me how it works? Thanks!


=E6=A2=A6=E7=9A=84=E5=BC=80=E5=A7=8B=E6=8C=A3=E6=89=8E=E4=BA=8E=E5=9F=8E=E5=
=B8=82=E7=9A=84=E8=BE=B9=E7=BC=98
=E5=BF=83=E7=9A=84=E8=BF=9C=E6=96=B9=E6=89=A7=E7=9D=80=E5=9C=A8=E8=84=9A=E6=
=AD=A5=E7=9A=84=E7=9E=AC=E9=97=B4
=E6=88=91=E7=9A=84=E5=AE=BF=E5=91=BD=E5=9F=8B=E8=97=8F=E4=BA=86=E5=AF=82=E5=
=AF=9E=E7=9A=84=E6=B0=B8=E8=BF=9C



2010/9/3 Nik Kolev <nkolev@healthmarketscience.com>:
> You can also take a look at this:
> http://code.google.com/p/bobo-browse/
>
> -----Original Message-----
> From: Li Li [mailto:fancyerii@gmail.com]
> Sent: Monday, August 30, 2010 6:06 AM
> To: java-user@lucene.apache.org
> Subject: Re: How to do facet search in lucene, NOT solr ?
>
> I think you can read the codes of solr.
> I guess you can implement a collect to get all hit docs into a
> DocSet(bitset). Also getting facet fields into memory(doc id->field
> value) then loop the DocSet to count it.
>
> 2010/8/30 fulin tang <tangfulin@gmail.com>:
>> we are building a search system on top of lucene, and we are now
>> looking for a facet feature
>>
>> So it there a easy way to do this ?
>>
>> btw, we do not want to switch to solr just for this!
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 09 05:24:07 2010
Return-Path: <java-user-return-47216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77763 invoked from network); 9 Sep 2010 05:24:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Sep 2010 05:24:06 -0000
Received: (qmail 51416 invoked by uid 500); 9 Sep 2010 05:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51097 invoked by uid 500); 9 Sep 2010 05:24:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51089 invoked by uid 99); 9 Sep 2010 05:24:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 05:24:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tangfulin@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 05:23:54 +0000
Received: by wyf23 with SMTP id 23so1254852wyf.35
        for <java-user@lucene.apache.org>; Wed, 08 Sep 2010 22:23:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=sA5o4jjgtbzqJdet6AFQJubRvKpCvyrHma6ipPMNI9U=;
        b=cHvoZ9KxoP63wpmMO4/xIZZ5I4Lb8rPIyYRdOVbEmohE/0lYzATYKEuOyUw4wLT8NY
         ykJpP2DPHle6g2fbKDoQBZliQaipK7oVSeJ5vW96RKUzYMGGL+agvql/s4eoWqfcL01j
         S2AVGFcZSyQlERrKKUYO/4Ptqbhc6vn/w7v3Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=DviiWRpczEa7YyZguNGrlHJfvub4eiKWqngEqoTMWs1DzRJWai1DCGDoOEA2QnN9nh
         2PLKf0h19u/V52T7WsleYj4WrUd19SvBoVqYeW20C6yg0PvJ5paTYIaKXhNeG+UJlP9G
         emm1vP8IdPz/TOPudCiHj+hn3sIVSQNb4EtKY=
MIME-Version: 1.0
Received: by 10.227.146.4 with SMTP id f4mr213248wbv.14.1284009813059; Wed, 08
 Sep 2010 22:23:33 -0700 (PDT)
Received: by 10.227.129.69 with HTTP; Wed, 8 Sep 2010 22:23:32 -0700 (PDT)
In-Reply-To: <AANLkTi=gcoKyY4_HriuLu1anqc3iOCzO60APg-onQHU4@mail.gmail.com>
References: <AANLkTi=gcoKyY4_HriuLu1anqc3iOCzO60APg-onQHU4@mail.gmail.com>
Date: Thu, 9 Sep 2010 13:23:32 +0800
Message-ID: <AANLkTimD0Gy5jiT7h+v_W=w3f5srE5uWMuc-+gQ-+4R3@mail.gmail.com>
Subject: Re: Largest Lucene installation?
From: fulin tang <tangfulin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

we now have 0.15 billion documents, which source size 1.5 TB, on 16 shards =
.

I am very interested how you get your job done


=E6=A2=A6=E7=9A=84=E5=BC=80=E5=A7=8B=E6=8C=A3=E6=89=8E=E4=BA=8E=E5=9F=8E=E5=
=B8=82=E7=9A=84=E8=BE=B9=E7=BC=98
=E5=BF=83=E7=9A=84=E8=BF=9C=E6=96=B9=E6=89=A7=E7=9D=80=E5=9C=A8=E8=84=9A=E6=
=AD=A5=E7=9A=84=E7=9E=AC=E9=97=B4
=E6=88=91=E7=9A=84=E5=AE=BF=E5=91=BD=E5=9F=8B=E8=97=8F=E4=BA=86=E5=AF=82=E5=
=AF=9E=E7=9A=84=E6=B0=B8=E8=BF=9C



2010/8/26 Nigel <nigelspleen@gmail.com>:
> I'm curious about what the largest Lucene installations are, in terms of:
>
> - Greatest number of documents (i.e. X billion docs)
> - Largest data size (i.e. Y terabytes of indexes)
> - Most machines (i.e. Z shards or severs)
>
> Apart from general curiosity, the obvious follow-up question would be wha=
t
> approaches were taken to scale to extremes.
>
> We have ~11 billion documents indexed (growing at >2 billion per month), =
but
> I'm sure someone else has enough that this appears puny. =C2=A0(-:
>
> Thanks,
> Chris
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 09 05:27:24 2010
Return-Path: <java-user-return-47217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78042 invoked from network); 9 Sep 2010 05:27:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Sep 2010 05:27:24 -0000
Received: (qmail 53789 invoked by uid 500); 9 Sep 2010 05:27:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53338 invoked by uid 500); 9 Sep 2010 05:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53330 invoked by uid 99); 9 Sep 2010 05:27:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 05:27:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tangfulin@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 05:27:10 +0000
Received: by wwb39 with SMTP id 39so879184wwb.5
        for <java-user@lucene.apache.org>; Wed, 08 Sep 2010 22:26:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=J1uqNuupxVwOuXTkCHt8kt6RgXogz1XYbkCjSv1ZB/A=;
        b=jn4/b/G9CrW+gKfYoSn1bZZ9rQiPrAyNut4R41UGEIgdZ5TODaEwyERTRkUt9mLnYF
         Kyt+5xRi5CzdkbVoQIuAJEadpMsFrhdabEkg++2WpLQ0sBq1wJuFf/xGTR6gDSLVDwSp
         XOl5T6fAFH4+51Py2icTZetgPku5IUoYGqU3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=MoGErBG9JRBgqPRHRSUzg/iHRoffc4r45Y78kkrMETwE9BSWC4i2wA9ofaDXlxXlPB
         ntBjl5ceFOCDEaCN/QN5e7rQ+1OCeMYtEIJJdnH+M7XVUdmiX3yrom6vK+Mz01lqqZuv
         gZ5EyWugSTwCbt6yBRMlT9ARw8eW2U5HPzjkU=
MIME-Version: 1.0
Received: by 10.227.153.208 with SMTP id l16mr506979wbw.57.1284010009309; Wed,
 08 Sep 2010 22:26:49 -0700 (PDT)
Received: by 10.227.129.69 with HTTP; Wed, 8 Sep 2010 22:26:49 -0700 (PDT)
Date: Thu, 9 Sep 2010 13:26:49 +0800
Message-ID: <AANLkTima3bd9idTOX0vmqJYHKrTb14zdn3p9SQry6WCp@mail.gmail.com>
Subject: Can we just update one field of a document in a lucene index, and
 leave other fields along?
From: fulin tang <tangfulin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64

aWYgd2UgY2FuIHVwZGF0ZSBvbmx5IG9uZSBmaWVsZCBvZiBhIGRvY3VtZW50IGluIHRoZSBpbmRl
eCwgYSBsb3Qgb2YKam9icyBjYW4gYmUgZG9uZSBoZXJlICEKCgrmoqbnmoTlvIDlp4vmjKPmiY7k
uo7ln47luILnmoTovrnnvJgK5b+D55qE6L+c5pa55omn552A5Zyo6ISa5q2l55qE556s6Ze0CuaI
keeahOWuv+WRveWfi+iXj+S6huWvguWvnueahOawuOi/nAo=


From java-user-return-47218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 09 09:34:01 2010
Return-Path: <java-user-return-47218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63464 invoked from network); 9 Sep 2010 09:34:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Sep 2010 09:34:01 -0000
Received: (qmail 32022 invoked by uid 500); 9 Sep 2010 09:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31477 invoked by uid 500); 9 Sep 2010 09:33:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31468 invoked by uid 99); 9 Sep 2010 09:33:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 09:33:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of findbestopensource@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 09:33:49 +0000
Received: by pzk4 with SMTP id 4so621081pzk.35
        for <java-user@lucene.apache.org>; Thu, 09 Sep 2010 02:33:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=7IXBwC/6c13mURUd/mCZMu5rs9wNRLVW3QE1c7a+y6c=;
        b=RxY0Jg93Qd0d4i/EGkRrhalNzAFD0obXzhW02d7tGnBBF+Id8MXYSk1OIrr0yLCJpy
         /0ZKf4EF+zF/2qfRb0x0gs4y8j8fpZTkmjTrSkhlG+Idrr8gCRcF+SdFRzKQiK02x4eS
         VoCN94PXmCi7fNRAEBpaWMfRcYvZaSp9Derks=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UTAxfGrY7SAko91Zd9AeAgYSsVui8VVIvh2hSwmE5xg/u1Cp2Ot4r5FLJ7NGhEPiFO
         1megveImUB7vtJ5tXPMG5FyHoRCeDXQz6IPmFrRJRfoZAV51d9qVaUzv4I48BpJt5lU1
         o3IOS3vJ4+esn68oauVPN0L5bPte/6G9YOz2c=
MIME-Version: 1.0
Received: by 10.142.134.17 with SMTP id h17mr14866wfd.306.1284024809077; Thu,
 09 Sep 2010 02:33:29 -0700 (PDT)
Received: by 10.142.213.8 with HTTP; Thu, 9 Sep 2010 02:33:28 -0700 (PDT)
In-Reply-To: <AANLkTima3bd9idTOX0vmqJYHKrTb14zdn3p9SQry6WCp@mail.gmail.com>
References: <AANLkTima3bd9idTOX0vmqJYHKrTb14zdn3p9SQry6WCp@mail.gmail.com>
Date: Thu, 9 Sep 2010 15:03:28 +0530
Message-ID: <AANLkTimvXf1wEze-+x5fKiunL3p7oCDm+bqeYARiVbXQ@mail.gmail.com>
Subject: Re: Can we just update one field of a document in a lucene index, and
 leave other fields along?
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org, tangfulin@gmail.com
Content-Type: multipart/alternative; boundary=000e0cd3326ea0bcb4048fd05247

--000e0cd3326ea0bcb4048fd05247
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Hi fulin,

It is not possible. You need to add / update as a document. Even if you
modify a single field, you need to add all the fields. Update is nothing bu=
t
Delete and Add operation.

If you don't have the information of rest of the fields then you may need t=
o
search and retreive the document, modify the single field and then update
the same.

Regards
Aditya
www.findbestopensource.com

2010/9/9 fulin tang <tangfulin@gmail.com>

> if we can update only one field of a document in the index, a lot of
> jobs can be done here !
>
>
> =C3=CE=B5=C4=BF=AA=CA=BC=D5=F5=D4=FA=D3=DA=B3=C7=CA=D0=B5=C4=B1=DF=D4=B5
> =D0=C4=B5=C4=D4=B6=B7=BD=D6=B4=D7=C5=D4=DA=BD=C5=B2=BD=B5=C4=CB=B2=BC=E4
> =CE=D2=B5=C4=CB=DE=C3=FC=C2=F1=B2=D8=C1=CB=BC=C5=C4=AF=B5=C4=D3=C0=D4=B6
>

--000e0cd3326ea0bcb4048fd05247--

From java-user-return-47219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 09 11:04:27 2010
Return-Path: <java-user-return-47219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89545 invoked from network); 9 Sep 2010 11:04:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Sep 2010 11:04:27 -0000
Received: (qmail 37291 invoked by uid 500); 9 Sep 2010 11:04:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35517 invoked by uid 500); 9 Sep 2010 11:04:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35500 invoked by uid 99); 9 Sep 2010 11:04:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 11:04:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 11:04:11 +0000
Received: by wyf23 with SMTP id 23so1629724wyf.35
        for <multiple recipients>; Thu, 09 Sep 2010 04:03:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=M94Dc4aC7rmYouOKJvrn9mjPGnZsux9VgvQT8LlL1vo=;
        b=oMPWdtfR/9g7xGzsUlhjfL0YGpX+MLnYbHZZ3o1ANXOvwvimf79PlusgpQIirjmw9E
         vj7+YS4cvK9jKeMGrMqVXKKe3krHx/r11GdJR5MM2Aph62Q5b/NZils8KpS/OKTpD56t
         YjjQvTTLOvgLjw++lXHm1zmRQllc66YAcsLRM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=gQTKXt2Sy+Pn8pehMExciv1TtVbDDXEYeEfTrV2kvHQoxXd1488zuCskcUT4EqZ6V2
         h3umbA8H+4ibpA/kimOvBa+eabavf+qoX1Wcm2eyMiXyeS66txR7fg2yygaupA+fXPsK
         ZA+miEcprHjv1thjpWAdoqaIIX4GwRCo99xcI=
Received: by 10.227.136.146 with SMTP id r18mr229807wbt.53.1284030230226; Thu,
 09 Sep 2010 04:03:50 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.132.165 with HTTP; Thu, 9 Sep 2010 04:03:30 -0700 (PDT)
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 9 Sep 2010 07:03:30 -0400
Message-ID: <AANLkTikTvo-be9w6whj7oKq2zD=Z7X1-_7g-vDsF6-D=@mail.gmail.com>
Subject: notice: index corruption on Solr/Lucene trunk/3.x branch
To: java-user <java-user@lucene.apache.org>, solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368336f8c0e62d048fd19569

--0016368336f8c0e62d048fd19569
Content-Type: text/plain; charset=UTF-8

If you are using SimpleFSDirectory (either explicitly or via
FSDirectory.open on Windows) with Solr/Lucene trunk or 3.x branch since July
30,
you might have index corruption and you should svn up and rebuild.

More details available here:
https://issues.apache.org/jira/browse/LUCENE-2637
<https://issues.apache.org/jira/browse/LUCENE-2637>
-- 
Robert Muir
rcmuir@gmail.com

--0016368336f8c0e62d048fd19569--

From java-user-return-47220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 09 12:06:31 2010
Return-Path: <java-user-return-47220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36368 invoked from network); 9 Sep 2010 12:06:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Sep 2010 12:06:31 -0000
Received: (qmail 21853 invoked by uid 500); 9 Sep 2010 12:06:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21489 invoked by uid 500); 9 Sep 2010 12:06:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21479 invoked by uid 99); 9 Sep 2010 12:06:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 12:06:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Sep 2010 12:06:17 +0000
Received: by qwk3 with SMTP id 3so371748qwk.35
        for <java-user@lucene.apache.org>; Thu, 09 Sep 2010 05:05:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=PSwG5r2aMBXATyD2+pK18Wa56XRHJtIqjw/w77+cAeQ=;
        b=VuNZ1TUkWDdTzxmZWi2IQ+QE5V4ws/SXwLzMvqI3QsLTqfcjYlt4Kq87zJ0ZpNZzyB
         9OexCdU+5FYwkl8I4ZIgeE3g3cG8HZEOlKkjy7uScJkjNO3Tor1u3h050c6e44eG7VDc
         01Rn8z66TSqsmzF6b0svE66Tfbqll4dXjo4gE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=F5AL/R1YGSP4YCRq9eakRnrIOrQOHwfhTkjqtPFEpgYwMkkPOIv4tVTcc/1etwz3Hr
         eNGH2yQAqf9N5x9mPDD4CPF2jCf5YsRQ8nYtQHp71ZiLquJCgc/VJmh02sC3AVGOmjDV
         A+p1f53rP7kCR0VOh1TOpJFCuxe+qtJYuaNW4=
MIME-Version: 1.0
Received: by 10.224.36.207 with SMTP id u15mr415726qad.332.1284033956329; Thu,
 09 Sep 2010 05:05:56 -0700 (PDT)
Received: by 10.229.225.20 with HTTP; Thu, 9 Sep 2010 05:05:56 -0700 (PDT)
In-Reply-To: <AANLkTikfmM8N2pJ8ubXAD8XsiwNvmKTKRtVSXVm024mw@mail.gmail.com>
References: <1D3D7943573BD14FB024A9654EB43CCB04AE2B6D@A99A-EMS-01VS2.ad.bedag.ch>
	<AANLkTinzUgWFm+-ocXGaYYkqVNfwx59v+2ocREyN3E1z@mail.gmail.com>
	<1D3D7943573BD14FB024A9654EB43CCB04AE2B71@A99A-EMS-01VS2.ad.bedag.ch>
	<AANLkTi=65b0RPcOJM3PbqTSbeZ+UTWh8X5LFA_UWUHKS@mail.gmail.com>
	<AANLkTik5niWBV+7wKUkFrctd4=A+r51yrRiz_+C875g-@mail.gmail.com>
	<AANLkTikfmM8N2pJ8ubXAD8XsiwNvmKTKRtVSXVm024mw@mail.gmail.com>
Date: Thu, 9 Sep 2010 08:05:56 -0400
Message-ID: <AANLkTi=SWWMEzdWz-4pjMqsYbC8+LhmVFSXJyVk0tE6w@mail.gmail.com>
Subject: Re: Combine data from index and db before sorting and pagination
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb09ed8b989048fd273b6
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cb09ed8b989048fd273b6
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

You can't avoid updating the whole document. You must delete the
original document and re-add it. Fortunately, this is pretty inexpensive.

Update does this under the covers...

Best
Erick

On Thu, Sep 9, 2010 at 12:15 AM, fulin tang <tangfulin@gmail.com> wrote:

> That is exactly what I am looking for now !
>
> Our mail search system has a field name flags, like read/unread etc,
> and it will change after the email indexed , so we need an update .
>
> But we only update one field, more exactly, one  Field.Index.NOT_ANALYZED
> and
> Field.Store.YES  field , how can we avoid update the whole document ?
>
>
> =C3=CE=B5=C4=BF=AA=CA=BC=D5=F5=D4=FA=D3=DA=B3=C7=CA=D0=B5=C4=B1=DF=D4=B5
> =D0=C4=B5=C4=D4=B6=B7=BD=D6=B4=D7=C5=D4=DA=BD=C5=B2=BD=B5=C4=CB=B2=BC=E4
> =CE=D2=B5=C4=CB=DE=C3=FC=C2=F1=B2=D8=C1=CB=BC=C5=C4=AF=B5=C4=D3=C0=D4=B6
>
>
>
> 2010/9/2 Chris Lu <chris.lu@gmail.com>:
> > If there is an API to adjust the inverted index directly, it would be
> much
> > efficient.
> >
> > I guess Mirko's problem is similar to this: There could be a
> "main_record"
> > table and "category" table. Each "main_record" has a "category".
> > When one "category" is changed, quite some "main_record" are affected.
> >
> > If we denormalize the data, which is the only way currently for good
> sorting
> > performance, we would need to re-index all the affected documents.
> > However, all the re-indexing work is quite inefficient.
> >
> > Let's suppose the "category" is using Field.Index.NOT_ANALYZED and
> > Field.Store.YES.
> >
> > So in the inverted index is conceptually like this:
> >  "category_1": doc1,doc2,doc5,doc10.
> >  "category_2": doc3,doc4,doc7,doc8.
> > If the only change is that several "category_1" records are changed to
> > "category_2", take doc5 and doc10 for example, after all the reindexing
> > effort, the only changes is:
> >  "category_1": doc1,doc2.
> >  "category_2": doc3,doc4,doc5,doc7,doc8,doc10.
> >
> > Of course, to support this efficiently could be a big change, affecting
> all
> > the nice efficient DocDelta storage.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request) g=
ot
> > 2.6 Million Euro funding!
> >
> > On Wed, Sep 1, 2010 at 4:29 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
> >
> >> The usual first choice when using Lucene to search database data is to
> >> denormalize the db data into the index. Yes, it's redundant, but it's
> often
> >> a better solution than trying to use both. Synchronization can be an
> issue,
> >> but you have to deal with that anyway since you're indexing from the d=
b
> >> anyway.
> >>
> >>  But you haven't given us any indication of how much data you're talki=
ng
> >> about here. Without some such detail, it's really hard to make a
> >> recommendation.
> >>
> >> Best
> >> Erick
> >>
> >> On Wed, Sep 1, 2010 at 9:30 AM, Sertic Mirko, Bedag
> >> <Mirko.Sertic@bedag.ch>wrote:
> >>
> >> > The data from db is required for sorting, and one db entry matches t=
o
> >> many
> >> > index entries, so storing it in the index would be redundant. Also
> there
> >> > would be the challenge to keep index and db in sync. Any ideas?
> >> >
> >> > Mirko
> >> >
> >> > -----Urspr=A8=B9ngliche Nachricht-----
> >> > Von: Ian Lea [mailto:ian.lea@gmail.com]
> >> > Gesendet: Mittwoch, 1. September 2010 15:17
> >> > An: java-user@lucene.apache.org
> >> > Betreff: Re: Combine data from index and db before sorting and
> pagination
> >> >
> >> > If the sorting and pagination doesn't require data from the database=
,
> >> > just do db lookups for the hits on a page, page by page as required.
> >> > But if the db data is required I'd suggest storing it in the index.
> >> >
> >> >
> >> > --
> >> > Ian.
> >> >
> >> > On Wed, Sep 1, 2010 at 1:43 PM, Sertic Mirko, Bedag
> >> > <Mirko.Sertic@bedag.ch> wrote:
> >> > > Hi
> >> > >
> >> > >
> >> > >
> >> > > I need to implement sorting and pagination of lucene search result=
s.
> >> > > This is quite easy, but I have to combine Data from the index with
> data
> >> > > from a database. The index has the fulltext data plus a unique
> >> > > identifier for a record from the database. The database stores
> >> > > additional data. Fulltext search is only done on the index. I need
> to
> >> > > combine the search results from the index and the additional data
> from
> >> > > the database before sorting and pagination.
> >> > >
> >> > >
> >> > >
> >> > > Is the IndexReader.document() Method the right place to enrich the
> data
> >> > > from the index with data from the db? How should I implement this
> >> > > functionality with lucene?
> >> > >
> >> > >
> >> > >
> >> > > Thanks in advance
> >> > >
> >> > > Mirko
> >> > >
> >> > >
> >> > >
> >> > >
> >> >
> >> > --------------------------------------------------------------------=
-
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> > --------------------------------------------------------------------=
-
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cb09ed8b989048fd273b6--

From java-user-return-47221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 13:19:06 2010
Return-Path: <java-user-return-47221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81555 invoked from network); 10 Sep 2010 13:19:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 13:19:06 -0000
Received: (qmail 57193 invoked by uid 500); 10 Sep 2010 13:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56289 invoked by uid 500); 10 Sep 2010 13:19:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56270 invoked by uid 99); 10 Sep 2010 13:18:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 13:18:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of brian@echonest.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 13:18:53 +0000
Received: by fxm17 with SMTP id 17so2243206fxm.35
        for <multiple recipients>; Fri, 10 Sep 2010 06:18:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.118.71 with SMTP id u7mr432772faq.55.1284124711742; Fri,
 10 Sep 2010 06:18:31 -0700 (PDT)
Received: by 10.223.26.212 with HTTP; Fri, 10 Sep 2010 06:18:31 -0700 (PDT)
Date: Fri, 10 Sep 2010 09:18:31 -0400
Message-ID: <AANLkTinVGiXDJ82oSuoBJUC20AASF8irecVRow3wfxvM@mail.gmail.com>
Subject: solr / lucene engineering positions in Boston, MA USA @ the Echo Nest
From: Brian Whitman <brian@echonest.com>
To: solr-user@lucene.apache.org, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a4fe4a6cad048fe7956f

--001636c5a4fe4a6cad048fe7956f
Content-Type: text/plain; charset=ISO-8859-1

Hi all, brief message to let you know that we're in heavy hire mode at the
Echo Nest. As many of you know we are very heavy solr/lucene users (~1bn
documents across many many servers) and a lot of our staff have been working
with and contributing to the projects over the years. We are a "music
intelligence" company -- we crawl the web and do a lot of fancy math on
music audio and text to then provide things like recommendation, feeds,
remix capabilities, playlisting etc to a lot of music labels, social
networks and small developers via a very popular API.

We are especially interested in people with Lucene & Solr experience who
aren't afraid to get into the guts and push it to its limits. If any of
these positions fit you please let me know. We are hiring full time in the
Boston area (Davis Square, Somerville) for senior and junior engineers as
well as data architects.

http://the.echonest.com/company/jobs/

http://developer.echonest.com/docs/v4/

http://the.echonest.com/

--001636c5a4fe4a6cad048fe7956f--

From java-user-return-47222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 13:39:34 2010
Return-Path: <java-user-return-47222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86559 invoked from network); 10 Sep 2010 13:39:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 13:39:34 -0000
Received: (qmail 81800 invoked by uid 500); 10 Sep 2010 13:39:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81386 invoked by uid 500); 10 Sep 2010 13:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81376 invoked by uid 99); 10 Sep 2010 13:39:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 13:39:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of m4eclipse@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 13:39:19 +0000
Received: by vws4 with SMTP id 4so3430228vws.35
        for <java-user@lucene.apache.org>; Fri, 10 Sep 2010 06:38:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=YUaBS8AEsaDohi7Eq8RbshQGyIAcvXJ0xXpi1/bgPwo=;
        b=PI1b8Oy2IQmF9u7Lx80ex/N9vbpuXyI72NCtERE7nfUlQL//8Hw89c0JRM0yKroXrz
         j3uOh267LZ1mTtyHTSpYDDSlry6Ogq/PlKvZOOpThe9k3O7jWFukmM05ApmTke+5/h7V
         vziuDCpOZ370uSsjZ5iAvHGLXfitEtWsk7Yj8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=H4tYeBJyKC5ErJjzKmoCpZBgiqEOsluzro/vyUP4KWx33zTS4k1NBcn9CZ/O1p57Pc
         D8NRV/sYSOmQgV6p7sUtByLuIXfmdp2D1qPc1Qr1n3BLGbSYW+kqWG8WP3bUSwiCwTU9
         mJFiJM4qi6rlliY5jLHStN7q3sLAGxp6qcbN4=
MIME-Version: 1.0
Received: by 10.220.122.66 with SMTP id k2mr465662vcr.18.1284125938731; Fri,
 10 Sep 2010 06:38:58 -0700 (PDT)
Received: by 10.220.44.194 with HTTP; Fri, 10 Sep 2010 06:38:58 -0700 (PDT)
Date: Fri, 10 Sep 2010 21:38:58 +0800
Message-ID: <AANLkTimMR0fwoZ38z-rzDmwSXmyXzzH82tS9h0KSZB4c@mail.gmail.com>
Subject: does lucene support Database full text search
From: yang Yang <m4eclipse@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0050450158c36cc9b3048fe7dea1

--0050450158c36cc9b3048fe7dea1
Content-Type: text/plain; charset=ISO-8859-1

Hi:
I am using MySql,and I want to use the full text search is rather weak.
So I use the Sphinx,however I found it can not support Chinese work
searching prefectly.
So I wonder if Lucene can work better?

--0050450158c36cc9b3048fe7dea1--

From java-user-return-47223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 16:24:26 2010
Return-Path: <java-user-return-47223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42197 invoked from network); 10 Sep 2010 16:24:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 16:24:26 -0000
Received: (qmail 76168 invoked by uid 500); 10 Sep 2010 16:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76077 invoked by uid 500); 10 Sep 2010 16:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76069 invoked by uid 99); 10 Sep 2010 16:24:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 16:24:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 16:24:17 +0000
Received: from ([10.160.3.176])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.50075628;
	Fri, 10 Sep 2010 12:23:52 -0400
Received: from ohcinpub02.corp.local (10.160.3.252) by ohcinht04.corp.local
 (10.160.3.176) with Microsoft SMTP Server (TLS) id 8.2.254.0; Fri, 10 Sep
 2010 12:23:52 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.161]) by ohcinpub02.corp.local
 ([10.160.3.252]) with mapi; Fri, 10 Sep 2010 12:23:52 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 10 Sep 2010 12:23:51 -0400
Subject: Filters do not work with MultiSearcher?
Thread-Topic: Filters do not work with MultiSearcher?
Thread-Index: ActRBI3gQxeKFIEBRveCZ4K3DYJ52g==
Message-ID: <70EA5691BD59734784FF872CD1B9747A15D73E1728@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-tm-as-product-ver: SMEX-8.0.0.1181-6.500.1024-17628.003
x-tm-as-result: No--45.196200-8.000000-31
x-tm-as-user-approved-sender: No
x-tm-as-user-blocked-sender: No
Content-Type: multipart/alternative;
	boundary="_000_70EA5691BD59734784FF872CD1B9747A15D73E1728OHCINMBX01cor_"
MIME-Version: 1.0

--_000_70EA5691BD59734784FF872CD1B9747A15D73E1728OHCINMBX01cor_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We are attempting to perform a filtered search on two indices joined by a M=
ultiSearcher.  Unfortunately, it appears there is an issue in the lucene co=
de that is causing the filter to be simply reused at the starting ordinal f=
or each individual index instead of being augmented by the starting documen=
t identifier.  We are hoping there is an alternate API that will allow us t=
o perform a filtered search on multiple indices.

For example, we have two indices with three documents each, and a filter co=
ntaining only doc ID 1.  When we perform a filtered search on a MultiSearch=
er that joins these two indices, we get two documents back (1, 4), where we=
 were expecting only the one.  This is because the MultiSearcher, instead o=
f starting at doc ID 3 for the second index, is interpreting the filter ind=
ividually for each index.

We are using Lucene 3.0.2.  The API we see this behavior with is MultiSearc=
her.search(Query, Filter, nDocs) with a MatchAllDocsQuery and the filter co=
de pasted below:

public class OpenBitSetFilter extends Filter {

    private OpenBitSet openBitSet;


    public OpenBitSetFilter(OpenBitSet openBitSet) {
        this.openBitSet =3D openBitSet;
    }

    public DocIdSet getDocIdSet(IndexReader indexReader) throws IOException=
 {
        return openBitSet;
    }

}



--_000_70EA5691BD59734784FF872CD1B9747A15D73E1728OHCINMBX01cor_--

From java-user-return-47224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 16:33:29 2010
Return-Path: <java-user-return-47224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44404 invoked from network); 10 Sep 2010 16:33:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 16:33:29 -0000
Received: (qmail 86794 invoked by uid 500); 10 Sep 2010 16:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86357 invoked by uid 500); 10 Sep 2010 16:33:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86349 invoked by uid 99); 10 Sep 2010 16:33:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 16:33:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 16:33:21 +0000
Received: by wwi17 with SMTP id 17so39632wwi.5
        for <java-user@lucene.apache.org>; Fri, 10 Sep 2010 09:32:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=WoZkzl+aSQyjKEZNUsLo1mzFpPUYd582P8Wb9gLWuNI=;
        b=LWfY49c9j/AjkXezc8GTUIIbC81Rhs+1AVCgnX4R4O4AAETHnT6xbRYMGYWA04DLSP
         rTO+SplW4k3Wu2QzZBI2ST2vuh25+EdD7yMaHDuJRHBx+owEc/8ZMD/VnNUerPdMbjnS
         H9cbR4OpZdMMEFMVZAiPidaxNEA6wv3cFEQ4g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=ukoBwF89LcqW2091jGKlFMJAq5wM0yeYWUTXXq0g8NAwhuRvA/4BnXx7jB03ZJLM0q
         8N1C85z3ergVjUucj3xA9KrIGafibGZbvZztEjCBPnFnGw9M8LOl1bVJlu2saV6yzV1R
         CG41fNLZ3p7iYVS5sHN1tJUN59+rF+5eGbh9o=
MIME-Version: 1.0
Received: by 10.227.145.66 with SMTP id c2mr290436wbv.42.1284136321475; Fri,
 10 Sep 2010 09:32:01 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.48.11 with HTTP; Fri, 10 Sep 2010 09:32:01 -0700 (PDT)
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A15D73E1728@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A15D73E1728@OHCINMBX01.corp.local>
Date: Fri, 10 Sep 2010 12:32:01 -0400
X-Google-Sender-Auth: GtiV_KKJNZ00uNOg_J1ttf8ISx4
Message-ID: <AANLkTi=upOeKHyYiqBzcN9zeQ8vmaRmh90E-8uuVJ_GY@mail.gmail.com>
Subject: Re: Filters do not work with MultiSearcher?
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

This is "working as designed".

Note this method:
  public DocIdSet getDocIdSet(IndexReader indexReader) throws IOException {
        return openBitSet;
    }

You must pay attention to the IndexReader passed - and the DocIdSet
returned must always be based on that reader (and the first document
of every reader is always 0).  So returning the same DocIdSet each
time is not valid and will result in errors.

-Yonik
http://lucenerevolution.org  Lucene/Solr Conference, Boston Oct 7-8


On Fri, Sep 10, 2010 at 12:23 PM, Nader, John P <john.nader@cengage.com> wr=
ote:
> We are attempting to perform a filtered search on two indices joined by a=
 MultiSearcher. =A0Unfortunately, it appears there is an issue in the lucen=
e code that is causing the filter to be simply reused at the starting ordin=
al for each individual index instead of being augmented by the starting doc=
ument identifier. =A0We are hoping there is an alternate API that will allo=
w us to perform a filtered search on multiple indices.
>
> For example, we have two indices with three documents each, and a filter =
containing only doc ID 1. =A0When we perform a filtered search on a MultiSe=
archer that joins these two indices, we get two documents back (1, 4), wher=
e we were expecting only the one. =A0This is because the MultiSearcher, ins=
tead of starting at doc ID 3 for the second index, is interpreting the filt=
er individually for each index.
>
> We are using Lucene 3.0.2. =A0The API we see this behavior with is MultiS=
earcher.search(Query, Filter, nDocs) with a MatchAllDocsQuery and the filte=
r code pasted below:
>
> public class OpenBitSetFilter extends Filter {
>
> =A0 =A0private OpenBitSet openBitSet;
>
>
> =A0 =A0public OpenBitSetFilter(OpenBitSet openBitSet) {
> =A0 =A0 =A0 =A0this.openBitSet =3D openBitSet;
> =A0 =A0}
>
> =A0 =A0public DocIdSet getDocIdSet(IndexReader indexReader) throws IOExce=
ption {
> =A0 =A0 =A0 =A0return openBitSet;
> =A0 =A0}
>
> }
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 17:06:59 2010
Return-Path: <java-user-return-47225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59205 invoked from network); 10 Sep 2010 17:06:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 17:06:59 -0000
Received: (qmail 38260 invoked by uid 500); 10 Sep 2010 17:06:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38190 invoked by uid 500); 10 Sep 2010 17:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38182 invoked by uid 99); 10 Sep 2010 17:06:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 17:06:56 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 17:06:51 +0000
Received: from ([10.160.3.176])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.50078598;
	Fri, 10 Sep 2010 13:06:26 -0400
Received: from ohcinpub02.corp.local (10.160.3.252) by ohcinht04.corp.local
 (10.160.3.176) with Microsoft SMTP Server (TLS) id 8.2.254.0; Fri, 10 Sep
 2010 13:06:26 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.161]) by ohcinpub02.corp.local
 ([10.160.3.252]) with mapi; Fri, 10 Sep 2010 13:06:26 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
	"yonik@lucidimagination.com" <yonik@lucidimagination.com>
Date: Fri, 10 Sep 2010 13:06:25 -0400
Subject: RE: Filters do not work with MultiSearcher?
Thread-Topic: Filters do not work with MultiSearcher?
Thread-Index: ActRBedD3Wru/DPETCa9vA3TEaGuGwABB8NA
Message-ID: <70EA5691BD59734784FF872CD1B9747A15D73E1771@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A15D73E1728@OHCINMBX01.corp.local>
 <AANLkTi=upOeKHyYiqBzcN9zeQ8vmaRmh90E-8uuVJ_GY@mail.gmail.com>
In-Reply-To: <AANLkTi=upOeKHyYiqBzcN9zeQ8vmaRmh90E-8uuVJ_GY@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-tm-as-product-ver: SMEX-8.0.0.1181-6.500.1024-17628.003
x-tm-as-result: No--51.696700-8.000000-31
x-tm-as-user-approved-sender: No
x-tm-as-user-blocked-sender: No
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thanks.  Now I understand.

We changed my implementation to hold multiple bit sets, one per index reade=
r.  Then we return the correct bit set based upon which reader is being pas=
sed in. =20

The results are exactly what we need.  This is our first use of the MultiSe=
archer (as if that wasn't obvious) and our assumption was that a MultiReade=
r was being passed in.

Thank you for your quick response and useful insights.

-John

-----Original Message-----
From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik Seele=
y
Sent: Friday, September 10, 2010 12:32 PM
To: java-user@lucene.apache.org
Subject: Re: Filters do not work with MultiSearcher?

This is "working as designed".

Note this method:
  public DocIdSet getDocIdSet(IndexReader indexReader) throws IOException {
        return openBitSet;
    }

You must pay attention to the IndexReader passed - and the DocIdSet
returned must always be based on that reader (and the first document
of every reader is always 0).  So returning the same DocIdSet each
time is not valid and will result in errors.

-Yonik
http://lucenerevolution.org  Lucene/Solr Conference, Boston Oct 7-8


On Fri, Sep 10, 2010 at 12:23 PM, Nader, John P <john.nader@cengage.com> wr=
ote:
> We are attempting to perform a filtered search on two indices joined by a=
 MultiSearcher. =A0Unfortunately, it appears there is an issue in the lucen=
e code that is causing the filter to be simply reused at the starting ordin=
al for each individual index instead of being augmented by the starting doc=
ument identifier. =A0We are hoping there is an alternate API that will allo=
w us to perform a filtered search on multiple indices.
>
> For example, we have two indices with three documents each, and a filter =
containing only doc ID 1. =A0When we perform a filtered search on a MultiSe=
archer that joins these two indices, we get two documents back (1, 4), wher=
e we were expecting only the one. =A0This is because the MultiSearcher, ins=
tead of starting at doc ID 3 for the second index, is interpreting the filt=
er individually for each index.
>
> We are using Lucene 3.0.2. =A0The API we see this behavior with is MultiS=
earcher.search(Query, Filter, nDocs) with a MatchAllDocsQuery and the filte=
r code pasted below:
>
> public class OpenBitSetFilter extends Filter {
>
> =A0 =A0private OpenBitSet openBitSet;
>
>
> =A0 =A0public OpenBitSetFilter(OpenBitSet openBitSet) {
> =A0 =A0 =A0 =A0this.openBitSet =3D openBitSet;
> =A0 =A0}
>
> =A0 =A0public DocIdSet getDocIdSet(IndexReader indexReader) throws IOExce=
ption {
> =A0 =A0 =A0 =A0return openBitSet;
> =A0 =A0}
>
> }
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 21:40:48 2010
Return-Path: <java-user-return-47226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36277 invoked from network); 10 Sep 2010 21:40:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 21:40:48 -0000
Received: (qmail 54956 invoked by uid 500); 10 Sep 2010 21:40:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54902 invoked by uid 500); 10 Sep 2010 21:40:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54894 invoked by uid 99); 10 Sep 2010 21:40:45 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 21:40:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of iamjabour@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 21:40:23 +0000
Received: by eydd26 with SMTP id d26so2781786eyd.35
        for <java-user@lucene.apache.org>; Fri, 10 Sep 2010 14:40:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=Ci2a9aQfCq+w31DXiQtxkdUCJ5vXjRCC0b55y80A4xw=;
        b=bNgfiwG72iuWxJ2rtcsB2KlK+DzbvAaMq9T65M4YEf7jOSwOSFqqoJoi8ok5GEI4Lr
         MRX8rAt8UzrlBS5u5bPRXycM9G3+ZFuXn95C4i5BMDS2aRkz+/HPXxe4IkiB3IoFcpSi
         SSKClCYGVXbyWZk+q90etHzno2qIyzvrxq0gw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=OEw0fSKBH8E2RZdLKV4srWh7iGai4oDlL2zKyU3H0Sz652OTP5ErtTx2Kpy4LP23hC
         W/b++EamgehM+CkzBE1MtH++mUUcVx9F22WJjNMpxe3LXuD8Vs9+3ld+Pav/vD9SrSEJ
         1CiE/Syi4qsDWLXIGEC0yPjkcStdKC0rCiFLc=
MIME-Version: 1.0
Received: by 10.216.164.199 with SMTP id c49mr1324268wel.107.1284154801665;
 Fri, 10 Sep 2010 14:40:01 -0700 (PDT)
Received: by 10.216.39.17 with HTTP; Fri, 10 Sep 2010 14:40:01 -0700 (PDT)
Date: Fri, 10 Sep 2010 18:40:01 -0300
Message-ID: <AANLkTik+Y01Vc-KCg5co0cYF-XJhRbsWXQXbQUFW567w@mail.gmail.com>
Subject: Extra Analyzers
From: Iam Jabour <iamjabour@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I got lucene from http://www.apache.org/dyn/closer.cgi/lucene/java/
but I'm looking for extra Analyzers like BrazilianAnalyzer [1] and
others. Where can I get extra packages for lucene?

Ty

[1] - http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/luc=
ene-analyzers/3.0.2/org/apache/lucene/analysis/br/BrazilianAnalyzer.java/
______________
Iam Jabour




On Thu, Sep 9, 2010 at 2:23 AM, fulin tang <tangfulin@gmail.com> wrote:
> we now have 0.15 billion documents, which source size 1.5 TB, on 16 shard=
s .
>
> I am very interested how you get your job done
>
>
> =C3=CE=B5=C4=BF=AA=CA=BC=D5=F5=D4=FA=D3=DA=B3=C7=CA=D0=B5=C4=B1=DF=D4=B5
> =D0=C4=B5=C4=D4=B6=B7=BD=D6=B4=D7=C5=D4=DA=BD=C5=B2=BD=B5=C4=CB=B2=BC=E4
> =CE=D2=B5=C4=CB=DE=C3=FC=C2=F1=B2=D8=C1=CB=BC=C5=C4=AF=B5=C4=D3=C0=D4=B6
>
>
>
> 2010/8/26 Nigel <nigelspleen@gmail.com>:
>> I'm curious about what the largest Lucene installations are, in terms of=
:
>>
>> - Greatest number of documents (i.e. X billion docs)
>> - Largest data size (i.e. Y terabytes of indexes)
>> - Most machines (i.e. Z shards or severs)
>>
>> Apart from general curiosity, the obvious follow-up question would be wh=
at
>> approaches were taken to scale to extremes.
>>
>> We have ~11 billion documents indexed (growing at >2 billion per month),=
 but
>> I'm sure someone else has enough that this appears puny.  (-:
>>
>> Thanks,
>> Chris
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 21:49:00 2010
Return-Path: <java-user-return-47227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37202 invoked from network); 10 Sep 2010 21:49:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 21:49:00 -0000
Received: (qmail 62468 invoked by uid 500); 10 Sep 2010 21:48:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62328 invoked by uid 500); 10 Sep 2010 21:48:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62319 invoked by uid 99); 10 Sep 2010 21:48:57 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 21:48:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 21:48:36 +0000
Received: by wyf23 with SMTP id 23so4180137wyf.35
        for <java-user@lucene.apache.org>; Fri, 10 Sep 2010 14:48:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=w/e8qlNk7pq5S/rSjlpgPGRZq66I8xMDjltacdW1z6w=;
        b=k6mkwQ86AUVSJzwJBnKOYDkqq7lmSm9UTGgY/u4eWJP0leCUw7KpDOptSH14/csoH3
         HdNjapNDvHA0KiVmn0kAgQRkA39QEDhvswzdcjiSJY7JQCSr07e8AlNJuStwe43Z2t0S
         ryacVVnlhklymAjEpvjvSxckV6ZZT0jCrk52E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=QTlctdZ0en155DJxWwa9frc3vLUX8WR3QD6cRFlftxyTeDsCoqrgSLypRoBdZdWlp+
         F8tq8WZYy/cbHlDVbqF4K0wSm97+27L8idIIJSsw0MNK1eT8dnWkn/9foD0hiGUabvLI
         7QSjw59W8bkxALU0zSKjLlpVZ9nhU99G2guis=
MIME-Version: 1.0
Received: by 10.227.157.147 with SMTP id b19mr470247wbx.49.1284155295344; Fri,
 10 Sep 2010 14:48:15 -0700 (PDT)
Received: by 10.216.171.21 with HTTP; Fri, 10 Sep 2010 14:48:15 -0700 (PDT)
In-Reply-To: <AANLkTik+Y01Vc-KCg5co0cYF-XJhRbsWXQXbQUFW567w@mail.gmail.com>
References: <AANLkTik+Y01Vc-KCg5co0cYF-XJhRbsWXQXbQUFW567w@mail.gmail.com>
Date: Fri, 10 Sep 2010 14:48:15 -0700
Message-ID: <AANLkTin5scZJjQUFbk8EArBXgbX+9Q3wwV85PEs1ikT6@mail.gmail.com>
Subject: Re: Extra Analyzers
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Please start a new thread instead of highjacking this one.

2010/9/10 Iam Jabour <iamjabour@gmail.com>:
> Hi,
>
> I got lucene from http://www.apache.org/dyn/closer.cgi/lucene/java/
> but I'm looking for extra Analyzers like BrazilianAnalyzer [1] and
> others. Where can I get extra packages for lucene?
>
> Ty
>
> [1] - http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/l=
ucene-analyzers/3.0.2/org/apache/lucene/analysis/br/BrazilianAnalyzer.java/
> ______________
> Iam Jabour
>
>
>
>
> On Thu, Sep 9, 2010 at 2:23 AM, fulin tang <tangfulin@gmail.com> wrote:
>> we now have 0.15 billion documents, which source size 1.5 TB, on 16 shar=
ds .
>>
>> I am very interested how you get your job done
>>
>>
>> =E6=A2=A6=E7=9A=84=E5=BC=80=E5=A7=8B=E6=8C=A3=E6=89=8E=E4=BA=8E=E5=9F=8E=
=E5=B8=82=E7=9A=84=E8=BE=B9=E7=BC=98
>> =E5=BF=83=E7=9A=84=E8=BF=9C=E6=96=B9=E6=89=A7=E7=9D=80=E5=9C=A8=E8=84=9A=
=E6=AD=A5=E7=9A=84=E7=9E=AC=E9=97=B4
>> =E6=88=91=E7=9A=84=E5=AE=BF=E5=91=BD=E5=9F=8B=E8=97=8F=E4=BA=86=E5=AF=82=
=E5=AF=9E=E7=9A=84=E6=B0=B8=E8=BF=9C
>>
>>
>>
>> 2010/8/26 Nigel <nigelspleen@gmail.com>:
>>> I'm curious about what the largest Lucene installations are, in terms o=
f:
>>>
>>> - Greatest number of documents (i.e. X billion docs)
>>> - Largest data size (i.e. Y terabytes of indexes)
>>> - Most machines (i.e. Z shards or severs)
>>>
>>> Apart from general curiosity, the obvious follow-up question would be w=
hat
>>> approaches were taken to scale to extremes.
>>>
>>> We have ~11 billion documents indexed (growing at >2 billion per month)=
, but
>>> I'm sure someone else has enough that this appears puny. =C2=A0(-:
>>>
>>> Thanks,
>>> Chris
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 21:49:26 2010
Return-Path: <java-user-return-47228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37282 invoked from network); 10 Sep 2010 21:49:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 21:49:26 -0000
Received: (qmail 64329 invoked by uid 500); 10 Sep 2010 21:49:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64212 invoked by uid 500); 10 Sep 2010 21:49:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64203 invoked by uid 99); 10 Sep 2010 21:49:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 21:49:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 21:49:18 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C67F045EB72
	for <java-user@lucene.apache.org>; Fri, 10 Sep 2010 23:48:56 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UTEM7t7lLsez for <java-user@lucene.apache.org>;
	Fri, 10 Sep 2010 23:48:44 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id AD1CB45EB6E
	for <java-user@lucene.apache.org>; Fri, 10 Sep 2010 23:48:43 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTik+Y01Vc-KCg5co0cYF-XJhRbsWXQXbQUFW567w@mail.gmail.com>
In-Reply-To: <AANLkTik+Y01Vc-KCg5co0cYF-XJhRbsWXQXbQUFW567w@mail.gmail.com>
Subject: RE: Extra Analyzers
Date: Fri, 10 Sep 2010 23:48:50 +0200
Message-ID: <005a01cb5131$f4cf3a20$de6dae60$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="GB2312"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQL5gf8y9EvNDX0tuBDWwRzWIvMId5CvX9jg
Content-language: de

Its in the contrib subfolder of the ZIP file!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Iam Jabour [mailto:iamjabour@gmail.com]
> Sent: Friday, September 10, 2010 11:40 PM
> To: java-user@lucene.apache.org
> Subject: Extra Analyzers
>=20
> Hi,
>=20
> I got lucene from http://www.apache.org/dyn/closer.cgi/lucene/java/
> but I'm looking for extra Analyzers like BrazilianAnalyzer [1] and =
others.
Where
> can I get extra packages for lucene?
>=20
> Ty
>=20
> [1] -
> =
http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-=

> analyzers/3.0.2/org/apache/lucene/analysis/br/BrazilianAnalyzer.java/
> ______________
> Iam Jabour
>=20
>=20
>=20
>=20
> On Thu, Sep 9, 2010 at 2:23 AM, fulin tang <tangfulin@gmail.com> =
wrote:
> > we now have 0.15 billion documents, which source size 1.5 TB, on 16
shards .
> >
> > I am very interested how you get your job done
> >
> >
> > =
=C3=CE=B5=C4=BF=AA=CA=BC=D5=F5=D4=FA=D3=DA=B3=C7=CA=D0=B5=C4=B1=DF=D4=B5
> > =
=D0=C4=B5=C4=D4=B6=B7=BD=D6=B4=D7=C5=D4=DA=BD=C5=B2=BD=B5=C4=CB=B2=BC=E4
> > =
=CE=D2=B5=C4=CB=DE=C3=FC=C2=F1=B2=D8=C1=CB=BC=C5=C4=AF=B5=C4=D3=C0=D4=B6
> >
> >
> >
> > 2010/8/26 Nigel <nigelspleen@gmail.com>:
> >> I'm curious about what the largest Lucene installations are, in =
terms
of:
> >>
> >> - Greatest number of documents (i.e. X billion docs)
> >> - Largest data size (i.e. Y terabytes of indexes)
> >> - Most machines (i.e. Z shards or severs)
> >>
> >> Apart from general curiosity, the obvious follow-up question would =
be
> >> what approaches were taken to scale to extremes.
> >>
> >> We have ~11 billion documents indexed (growing at >2 billion per
> >> month), but I'm sure someone else has enough that this appears =
puny.
(-:
> >>
> >> Thanks,
> >> Chris
> >>
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 22:28:50 2010
Return-Path: <java-user-return-47229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54977 invoked from network); 10 Sep 2010 22:28:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 22:28:50 -0000
Received: (qmail 13591 invoked by uid 500); 10 Sep 2010 22:28:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13481 invoked by uid 500); 10 Sep 2010 22:28:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13473 invoked by uid 99); 10 Sep 2010 22:28:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 22:28:47 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Sep 2010 22:28:42 +0000
Received: (qmail 76266 invoked by uid 60001); 10 Sep 2010 22:28:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1284157701; bh=P9W0wHYUChY9Wao9fQYIPNcRrPr+154LuyzfR051dvc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=S9xs9nlAMxe9RjkIcBxNXIBTzg67iNo8BYEjjyE4KFFzauLPZc+L2Yx2cBPVgdf5+S5AfE5wSivnLPPLeLdS3mFA5zKH07Lc93BmNG2QqcOTCKFd+NSpM+xQNWgvv5hpu7etSbLenXEoiR032WOp6NViAgFbDlBMw209dffHy+c=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=PBzeTuI9KUsqrZlsFtP0D0n9umPl7MajxEtCs7C47eAf18rc0TMUQH6Xz49hXYb3guKrLqCBsizd55cjf806KZfBZH0QkZcv80RPxYs2/halizl57otHYwomCYwFQDfIZTdxa/bXlE7yH4tZ6mlDcRn746kp1wWDBEq/Pr1D1Yc=;
Message-ID: <41594.76259.qm@web50304.mail.re2.yahoo.com>
X-YMail-OSG: 9wdFfVwVM1kCm5ik20..VuIqdJD0jJYCo9EP1bhgy9IL1u.
 wnWdgX8duFtvKmmFM5QqAxs32ejIi1Sy5QDxfhezKMDBaGoscQ6xaWvR5DUi
 v5k3HvWBzeb5MFaioglXR0pVl6Ra7kLnanktrIDXU.umvY.Qf_fPLteAgKKy
 HAmPTqDb.xkgOtfn_d_m8IyiCgp6Ax.sE7f.swap7Xp2LmLio4OhCWTzojxA
 JZDcKxYqi1e7muBmUYvuVsfe8DZbgSQOyZyDadNmaf3b5SfOh7WBAVmk5gf4
 ZqtLWVG3QaMgRMfkNMThHfIhLbuKDooflJ1L7I0A5DcwpiwXNbpBivmQfTs_
 xCVCffQyw27xZ5RK_GsrjgVziBaI-
Received: from [78.2.165.250] by web50304.mail.re2.yahoo.com via HTTP; Fri, 10 Sep 2010 15:28:20 PDT
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.105.279950
References: <AANLkTimMR0fwoZ38z-rzDmwSXmyXzzH82tS9h0KSZB4c@mail.gmail.com>
Date: Fri, 10 Sep 2010 15:28:20 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: does lucene support Database full text search
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTimMR0fwoZ38z-rzDmwSXmyXzzH82tS9h0KSZB4c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hello,

You can use LuSQL to index DB content into Lucene.  Solr (the "Lucene Server") 
has DataImportHandler for indexing data from DBs: 
http://search-lucene.com/?q=dataimporthandler

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: yang Yang <m4eclipse@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Fri, September 10, 2010 9:38:58 AM
> Subject: does lucene support Database full text search
> 
> Hi:
> I am using MySql,and I want to use the full text search is rather  weak.
> So I use the Sphinx,however I found it can not support Chinese  work
> searching prefectly.
> So I wonder if Lucene can work better?
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 10 23:15:46 2010
Return-Path: <java-user-return-47230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69723 invoked from network); 10 Sep 2010 23:15:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Sep 2010 23:15:46 -0000
Received: (qmail 77462 invoked by uid 500); 10 Sep 2010 23:15:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77368 invoked by uid 500); 10 Sep 2010 23:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77360 invoked by uid 99); 10 Sep 2010 23:15:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 23:15:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Sep 2010 23:15:38 +0000
Received: by wwi17 with SMTP id 17so163232wwi.5
        for <java-user@lucene.apache.org>; Fri, 10 Sep 2010 16:15:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=efDxcpr51bj2P7Sa1bsqOyFwyu/V9GooFXo6fvqJl+o=;
        b=et69WuvR1RnbCbZ4Yj8flmrKES9mdr37K+udJ+BM3RUNXqcdBccFPYkKaSYuTHt7NY
         CsZB9cFIW3HsJed26omyDNqpzCp/IMBbRuOlnXMJkpgUCBqk9PDJbXoz4Yy9ED98v4zR
         oc6ETBJDXdcIg18/nSz3/Ms7Br2DmqO8bL77E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=a0mdxuqTIi5pgcLuSMc0kQbd4jwJd5E7ZbzppSOtTQRY8Le8IwiFSIVOTjT3oecJVT
         UcviOcLQr1CSmzVMR4AAYQWFacg+M/RzZT1FP7VJGsgt1sD1d1NWMsPRE0wzSnTTzOm6
         LH9k4uxuBNE5gU7nlOo03hviadhLrEh82XONU=
MIME-Version: 1.0
Received: by 10.216.6.195 with SMTP id 45mr70405wen.86.1284160517140; Fri, 10
 Sep 2010 16:15:17 -0700 (PDT)
Received: by 10.216.160.85 with HTTP; Fri, 10 Sep 2010 16:15:17 -0700 (PDT)
In-Reply-To: <AANLkTimMR0fwoZ38z-rzDmwSXmyXzzH82tS9h0KSZB4c@mail.gmail.com>
References: <AANLkTimMR0fwoZ38z-rzDmwSXmyXzzH82tS9h0KSZB4c@mail.gmail.com>
Date: Fri, 10 Sep 2010 16:15:17 -0700
Message-ID: <AANLkTi=KQdkhQN1G-q8bQOdvkOgV8Wp4idMmGqx30C2O@mail.gmail.com>
Subject: Re: does lucene support Database full text search
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d1f397572a7048fefebf9

--0016364d1f397572a7048fefebf9
Content-Type: text/plain; charset=ISO-8859-1

Lucene does not support database directly. You need to pump data into
Lucene.

You can use DBSight, which has a built-in high performance crawler for any
databases.
It also has integrated Chinese analyzers, including IKAnalyzer, which is the
best one I found so far.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Fri, Sep 10, 2010 at 6:38 AM, yang Yang <m4eclipse@gmail.com> wrote:

> Hi:
> I am using MySql,and I want to use the full text search is rather weak.
> So I use the Sphinx,however I found it can not support Chinese work
> searching prefectly.
> So I wonder if Lucene can work better?
>

--0016364d1f397572a7048fefebf9--

From java-user-return-47231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 11 01:15:59 2010
Return-Path: <java-user-return-47231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5698 invoked from network); 11 Sep 2010 01:15:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Sep 2010 01:15:58 -0000
Received: (qmail 50887 invoked by uid 500); 11 Sep 2010 01:15:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50361 invoked by uid 500); 11 Sep 2010 01:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50207 invoked by uid 99); 11 Sep 2010 01:15:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Sep 2010 01:15:55 +0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=FREEMAIL_FROM,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zipinghappy@hotmail.com designates 65.55.111.87 as permitted sender)
Received: from [65.55.111.87] (HELO blu0-omc2-s12.blu0.hotmail.com) (65.55.111.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Sep 2010 01:15:47 +0000
Received: from BLU0-SMTP189 ([65.55.111.71]) by blu0-omc2-s12.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 10 Sep 2010 18:15:26 -0700
X-Originating-IP: [113.119.39.2]
X-Originating-Email: [zipinghappy@hotmail.com]
Message-ID: <BLU0-SMTP189774D14AD35C9936A7116BC750@phx.gbl>
Received: from 6d2cf76a4be0421 ([113.119.39.2]) by BLU0-SMTP189.phx.gbl over TLS secured channel with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 10 Sep 2010 18:15:24 -0700
Date: Sat, 11 Sep 2010 09:15:16 +0800
From: "=?utf-8?B?U2hlbGRvbiBDaGVu?=" <zipinghappy@hotmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
References: <AANLkTimMR0fwoZ38z-rzDmwSXmyXzzH82tS9h0KSZB4c@mail.gmail.com>
Subject: =?utf-8?B?UmU6IGRvZXMgbHVjZW5lIHN1cHBvcnQgRGF0YWJhc2UgZnVsbCB0ZXh0IHNlYXJjaA==?=
X-mailer: Foxmail 6, 15, 201, 23 [cn]
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon853428380458_====="
X-OriginalArrivalTime: 11 Sep 2010 01:15:25.0795 (UTC) FILETIME=[D0864330:01CB514E]

--=====003_Dragon853428380458_=====
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

WW91IGNhbiB0cnkgSGliZXJuYXRlIFNlYXJjaC4gTWF5YmUgaXQgY2FuIHdvcmsuDQoNCg0KMjAx
MC0wOS0xMSANCg0KDQoNClNoZWxkb24gQ2hlbiANCg0KDQoNCuWPkeS7tuS6uu+8miB5YW5nIFlh
bmcgDQrlj5HpgIHml7bpl7TvvJogMjAxMC0wOS0xMCAgMjE6Mzk6MzEgDQrmlLbku7bkurrvvJog
amF2YS11c2VyIA0K5oqE6YCB77yaIA0K5Li76aKY77yaIGRvZXMgbHVjZW5lIHN1cHBvcnQgRGF0
YWJhc2UgZnVsbCB0ZXh0IHNlYXJjaCANCiANCkhpOg0KSSBhbSB1c2luZyBNeVNxbCxhbmQgSSB3
YW50IHRvIHVzZSB0aGUgZnVsbCB0ZXh0IHNlYXJjaCBpcyByYXRoZXIgd2Vhay4NClNvIEkgdXNl
IHRoZSBTcGhpbngsaG93ZXZlciBJIGZvdW5kIGl0IGNhbiBub3Qgc3VwcG9ydCBDaGluZXNlIHdv
cmsNCnNlYXJjaGluZyBwcmVmZWN0bHkuDQpTbyBJIHdvbmRlciBpZiBMdWNlbmUgY2FuIHdvcmsg
YmV0dGVyPw0K

--=====003_Dragon853428380458_=====--

From java-user-return-47232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 12 05:13:23 2010
Return-Path: <java-user-return-47232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90602 invoked from network); 12 Sep 2010 05:13:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Sep 2010 05:13:23 -0000
Received: (qmail 23985 invoked by uid 500); 12 Sep 2010 05:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23030 invoked by uid 500); 12 Sep 2010 05:13:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22722 invoked by uid 99); 12 Sep 2010 05:13:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 05:13:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karthikkatooru@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 05:13:08 +0000
Received: by qyk8 with SMTP id 8so896033qyk.14
        for <java-user@lucene.apache.org>; Sat, 11 Sep 2010 22:12:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=Ilb8mZE0ZoWxfQ4JeMzwyLnZGNRHdRbuiq4UqWU6Bqo=;
        b=luxqVW7mWtKUM7ffRBdfaXDzaM7lYOqTwKtr9ZHRkfkpLP3e/mA4Y4PlFjIhSqFG5z
         MDA6d5eTZXPdKQQ3EHLFT5FjuZ8soTyN2Khl1mAeXFZBL3YpiQLls5oKq2Rda3z5sqFK
         K9JbNv9ORZXCOw0612UtUEhEEVwhddD6yo2MQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=HkaeHs0PsoQtmY6HhLHUHcQ3rvhgrFflqFM+7bvfVQu2m66NdaqNcd0IP06GL3s+qJ
         qZdVmb+QJsC+/DVlR8//Fb2Ym5D4GFgyMeUM5BtZ/finDr24UDUTlHYN8t5nMw1Fa1+T
         30iFWLdak2OQf+wTQlxQ0gCK7X3U5uQtAL1I4=
Received: by 10.224.19.200 with SMTP id c8mr247676qab.309.1284268367354; Sat,
 11 Sep 2010 22:12:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.182.134 with HTTP; Sat, 11 Sep 2010 22:12:27 -0700 (PDT)
From: Karthik K <karthikkatooru@gmail.com>
Date: Sun, 12 Sep 2010 13:12:27 +0800
Message-ID: <AANLkTik20p13HjC76suqoKnP=GEL6byS-TZOMaocK7fF@mail.gmail.com>
Subject: iterate through tokens in standardtokenizer
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb262d51a6b04900907bb

--0015175cb262d51a6b04900907bb
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I am trying to use standardTokenizer in a non-lucene project to generate
tokens. The previous versions i used supported token.next , getToken to
iterate over and retrieve the tokens continuously. 3.0.2 doesnt have that
and i cant figure out how to iterate. Can get number of tokens with
increment token, but cant get the exact terms. Is this the right place to
ask?

Thanks

--0015175cb262d51a6b04900907bb--

From java-user-return-47233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 12 10:15:29 2010
Return-Path: <java-user-return-47233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49931 invoked from network); 12 Sep 2010 10:15:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Sep 2010 10:15:29 -0000
Received: (qmail 32761 invoked by uid 500); 12 Sep 2010 10:15:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32210 invoked by uid 500); 12 Sep 2010 10:15:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32202 invoked by uid 99); 12 Sep 2010 10:15:21 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 10:15:21 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL,T_FRT_PACKAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 10:14:58 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4DF8345ED63
	for <java-user@lucene.apache.org>; Sun, 12 Sep 2010 12:14:37 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 642wOxargCWC for <java-user@lucene.apache.org>;
	Sun, 12 Sep 2010 12:14:26 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C416145ED57
	for <java-user@lucene.apache.org>; Sun, 12 Sep 2010 12:14:25 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTik20p13HjC76suqoKnP=GEL6byS-TZOMaocK7fF@mail.gmail.com>
In-Reply-To: <AANLkTik20p13HjC76suqoKnP=GEL6byS-TZOMaocK7fF@mail.gmail.com>
Subject: RE: iterate through tokens in standardtokenizer
Date: Sun, 12 Sep 2010 12:14:34 +0200
Message-ID: <003501cb5263$4c6be350$e543a9f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKwKEDCc9Lt4/K0mldi1pHMyYlr1ZFEdfCw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/analysis/pack
age-summary.html

Read the example for "Using the new TokenStream API"!

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Karthik K [mailto:karthikkatooru@gmail.com]
> Sent: Sunday, September 12, 2010 7:12 AM
> To: java-user@lucene.apache.org
> Subject: iterate through tokens in standardtokenizer
> 
> Hi,
> I am trying to use standardTokenizer in a non-lucene project to generate
> tokens. The previous versions i used supported token.next , getToken to
iterate
> over and retrieve the tokens continuously. 3.0.2 doesnt have that and i
cant
> figure out how to iterate. Can get number of tokens with increment token,
but
> cant get the exact terms. Is this the right place to ask?
> 
> Thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 12 12:05:04 2010
Return-Path: <java-user-return-47234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70477 invoked from network); 12 Sep 2010 12:05:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Sep 2010 12:05:04 -0000
Received: (qmail 85114 invoked by uid 500); 12 Sep 2010 12:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84757 invoked by uid 500); 12 Sep 2010 12:04:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84477 invoked by uid 99); 12 Sep 2010 12:04:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 12:04:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oren.liat@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 12:04:51 +0000
Received: by qyk2 with SMTP id 2so5143310qyk.14
        for <java-user@lucene.apache.org>; Sun, 12 Sep 2010 05:04:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=syuBG4pchFZr+Nh0vZQ1A9JSpk2foJwlY1sW7liEydE=;
        b=vjUJDMsBYdSOFX7pcdzSPa7LcLsXgtltKyLRLcha/jMNGhbX2jlu84WCiqsfQfibG8
         h/cy8KTIH8897HyIVEIiCAvq9KDnSc9XhJcpfzcvByJjjp0Zsnbt4jPNMv/knq1lLwQh
         xI1oAj6VMyRzgw1YqBmzxEgaHmVVH2t3CU6Bo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=IeOA4HPLcM72CnrEpRVACWSuRQi9wo2fKxChxP4uwmS6JhOoZnwB8q+esaKgpU4ZRQ
         6pwx5cUFYQlgfiIkuPjBuE8aud6yX57vQBekJLsHhfEkjruu1/0j6XJWYiMA0DhXC0D1
         g8JQqA5FwQ4BDccPNqeb4x6ltP5aOXvFZqrss=
MIME-Version: 1.0
Received: by 10.229.61.86 with SMTP id s22mr1950899qch.204.1284293067807; Sun,
 12 Sep 2010 05:04:27 -0700 (PDT)
Received: by 10.229.223.134 with HTTP; Sun, 12 Sep 2010 05:04:27 -0700 (PDT)
Date: Sun, 12 Sep 2010 15:04:27 +0300
Message-ID: <AANLkTi=3k_MW+EWN7OkN7W2o+2AhUUkMdBym+yAHBfq3@mail.gmail.com>
Subject: Unexpected Results - using should and must in boolean query
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6539632181ac904900ec8ba

--0016e6539632181ac904900ec8ba
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am running a query and get some unexpected results.

When I run boolean query on a text field for the word X, using occur =
SHOULD, the results contain the word X.

However, when I add another boolean query on another field (country) for the
word Y, using occur = MUST, in the results I get only documents in country
Y, but from some reason, not only that I get documents that don't contain
the word X, they get higher score than those contain the word X.

If I change the occur of the word X in the query to MUST, it of course fixes
it, but I don't understand why the SHOULD "lost" its "power" when I added
the MUST on another field.

Could something like this can happen?
How can it be solved?

Many thanks,
Liat

--0016e6539632181ac904900ec8ba--

From java-user-return-47235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 12 12:24:13 2010
Return-Path: <java-user-return-47235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76157 invoked from network); 12 Sep 2010 12:24:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Sep 2010 12:24:13 -0000
Received: (qmail 430 invoked by uid 500); 12 Sep 2010 12:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 126 invoked by uid 500); 12 Sep 2010 12:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 116 invoked by uid 99); 12 Sep 2010 12:24:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 12:24:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karthikkatooru@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 12:24:00 +0000
Received: by qyk8 with SMTP id 8so1086900qyk.14
        for <java-user@lucene.apache.org>; Sun, 12 Sep 2010 05:23:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=0Vkf9bwuWviR5HSw480YwitAyMD+lZpNYkqce5qXKNg=;
        b=wVnoRwHGmwvVT//XTv3/N2tO2M4y482eYCyKQwtADytKNTIyGx79oVBbGY6OV31zXg
         1hm837ZT93OFNtkmScWkIqKI1++XIBELuWR7f5BJtgBZtiBuynf8OdvW6CfrRGHK4TCi
         gSc76Dg3v8kqH4a6fOmrXj55YUFVGP+AqrWBY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=vc64FrNCxi8VXA27mahCWVwBwXknwYZLLtJmP0OTbpiLgE7fknXhcSnPHwL64at8hn
         hVwFwtghzeVZZZ5UkzqkiAsrd7yy7/wenPAPfj993RDMD8R/iUQmY3fysCOaEfD6tw4V
         f2tYBJ2efp5rDAQtMmkpZXrcQHSVlx8uEbKVk=
Received: by 10.224.71.209 with SMTP id i17mr1909128qaj.282.1284294219235;
 Sun, 12 Sep 2010 05:23:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.182.134 with HTTP; Sun, 12 Sep 2010 05:23:19 -0700 (PDT)
In-Reply-To: <003501cb5263$4c6be350$e543a9f0$@thetaphi.de>
References: <AANLkTik20p13HjC76suqoKnP=GEL6byS-TZOMaocK7fF@mail.gmail.com> <003501cb5263$4c6be350$e543a9f0$@thetaphi.de>
From: Karthik K <karthikkatooru@gmail.com>
Date: Sun, 12 Sep 2010 20:23:19 +0800
Message-ID: <AANLkTikBoP+C5Ne2byQZpf2Lari4Pzj7pX208yLna4Ji@mail.gmail.com>
Subject: Re: iterate through tokens in standardtokenizer
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f8a501eb9853404900f0c2d

--00c09f8a501eb9853404900f0c2d
Content-Type: text/plain; charset=ISO-8859-1

Thanks a lot for the help.

--00c09f8a501eb9853404900f0c2d--

From java-user-return-47236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 12 13:37:41 2010
Return-Path: <java-user-return-47236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96860 invoked from network); 12 Sep 2010 13:37:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Sep 2010 13:37:40 -0000
Received: (qmail 36467 invoked by uid 500); 12 Sep 2010 13:37:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35947 invoked by uid 500); 12 Sep 2010 13:37:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35939 invoked by uid 99); 12 Sep 2010 13:37:32 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 13:37:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 13:37:09 +0000
Received: by qwk3 with SMTP id 3so3374078qwk.35
        for <java-user@lucene.apache.org>; Sun, 12 Sep 2010 06:36:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=QokXUqQzkjIS7JqsufB2zG5TGwwWG9CXFxGQRmktMWY=;
        b=ncCBuy4B12G+73iAOAmvKM9I463vlavHnDmQTCDPiqUnE6wIliduepBeYsMBC5SbCz
         k3zjq5Y0JdK/nHQInpasE0IKgcs1x+pZC78BEjHl+jVRzV7gueikMT7kwcZ+7ulc3/xQ
         0d6B2qt5iUWAsmT4cXWdVDIbDlC/03xqbU4W0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PVJJdkmYyCdMvH/CiJBWeFA5MzADDHXSi4qe7wMSfKO6YVOmBqzcNEoH7yuC3bfsM7
         9PrVb+Sbb2B7JWPmCRfFy0pOz2tCx4pK7JrxS1VnohVfXua0F0VOFryth0UWBtt/aSaG
         aSuqRMxxvv0WtMAHZ+gAbUJS90A9Cxi5nQDSc=
MIME-Version: 1.0
Received: by 10.224.67.74 with SMTP id q10mr2009381qai.144.1284298608400; Sun,
 12 Sep 2010 06:36:48 -0700 (PDT)
Received: by 10.229.225.20 with HTTP; Sun, 12 Sep 2010 06:36:48 -0700 (PDT)
In-Reply-To: <AANLkTi=3k_MW+EWN7OkN7W2o+2AhUUkMdBym+yAHBfq3@mail.gmail.com>
References: <AANLkTi=3k_MW+EWN7OkN7W2o+2AhUUkMdBym+yAHBfq3@mail.gmail.com>
Date: Sun, 12 Sep 2010 09:36:48 -0400
Message-ID: <AANLkTi=VuGL5V3RS_TwOE4VHJCCZKUTJ5Pr8WUcHmKue@mail.gmail.com>
Subject: Re: Unexpected Results - using should and must in boolean query
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cdf7c56dc1704901012ed
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cdf7c56dc1704901012ed
Content-Type: text/plain; charset=ISO-8859-1

This is expected. The clause you add with MUST does just
that, any documents returned MUST have that term. The SHOULD
part of the query just says will simply bump the scores of
documents with that clause.

As to scores being different on the queries (and I'm having a hard time
understanding your point, so I may be way off base here), comparing
scores between different queries is meaningless. Scores are ways
of ranking documents in a single query. See the scoring discussion
on the Wiki for why...

Best
Erick

On Sun, Sep 12, 2010 at 8:04 AM, liat oren <oren.liat@gmail.com> wrote:

> Hi,
>
> I am running a query and get some unexpected results.
>
> When I run boolean query on a text field for the word X, using occur =
> SHOULD, the results contain the word X.
>
> However, when I add another boolean query on another field (country) for
> the
> word Y, using occur = MUST, in the results I get only documents in country
> Y, but from some reason, not only that I get documents that don't contain
> the word X, they get higher score than those contain the word X.
>
> If I change the occur of the word X in the query to MUST, it of course
> fixes
> it, but I don't understand why the SHOULD "lost" its "power" when I added
> the MUST on another field.
>
> Could something like this can happen?
> How can it be solved?
>
> Many thanks,
> Liat
>

--0015175cdf7c56dc1704901012ed--

From java-user-return-47237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 12 13:52:37 2010
Return-Path: <java-user-return-47237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 151 invoked from network); 12 Sep 2010 13:52:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Sep 2010 13:52:37 -0000
Received: (qmail 46604 invoked by uid 500); 12 Sep 2010 13:52:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46226 invoked by uid 500); 12 Sep 2010 13:52:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46218 invoked by uid 99); 12 Sep 2010 13:52:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 13:52:30 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 13:52:24 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9BF4645EE48
	for <java-user@lucene.apache.org>; Sun, 12 Sep 2010 15:52:00 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id yCerJALebqsY for <java-user@lucene.apache.org>;
	Sun, 12 Sep 2010 15:51:49 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2439245EE47
	for <java-user@lucene.apache.org>; Sun, 12 Sep 2010 15:51:49 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTi=3k_MW+EWN7OkN7W2o+2AhUUkMdBym+yAHBfq3@mail.gmail.com>
In-Reply-To: <AANLkTi=3k_MW+EWN7OkN7W2o+2AhUUkMdBym+yAHBfq3@mail.gmail.com>
Subject: RE: Unexpected Results - using should and must in boolean query
Date: Sun, 12 Sep 2010 15:51:57 +0200
Message-ID: <004501cb5281$aacab020$00601060$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKxcjDa9jvh339M/Y7nEiuZyLx8JJFCHXaA
Content-Language: de

Hi,

I always recommend my customers to not mix should and must in the same
BooleanQuery if strict boolean matching is needed. It will match all docs,
containing the MUST clause and "boost" all SHOULD terms.

If you have some MUST terms, but you also want to have at least one of a
list of other terms (like 5 SHOULD clauses), the trick is to separate both:
Create a BooleanQuery with 2 MUST clauses, one is your required TermQuery
and the second clause is itself a BooleanQuery with all the SHOULD clauses.
This ensures that at least one of the SHOULD terms is needed together with
the MUST term.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: liat oren [mailto:oren.liat@gmail.com]
> Sent: Sunday, September 12, 2010 2:04 PM
> To: java-user@lucene.apache.org
> Subject: Unexpected Results - using should and must in boolean query
> 
> Hi,
> 
> I am running a query and get some unexpected results.
> 
> When I run boolean query on a text field for the word X, using occur =
SHOULD,
> the results contain the word X.
> 
> However, when I add another boolean query on another field (country) for
the
> word Y, using occur = MUST, in the results I get only documents in country
Y,
> but from some reason, not only that I get documents that don't contain the
> word X, they get higher score than those contain the word X.
> 
> If I change the occur of the word X in the query to MUST, it of course
fixes it,
> but I don't understand why the SHOULD "lost" its "power" when I added the
> MUST on another field.
> 
> Could something like this can happen?
> How can it be solved?
> 
> Many thanks,
> Liat


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 12 20:30:03 2010
Return-Path: <java-user-return-47238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96374 invoked from network); 12 Sep 2010 20:30:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Sep 2010 20:30:03 -0000
Received: (qmail 82848 invoked by uid 500); 12 Sep 2010 20:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82738 invoked by uid 500); 12 Sep 2010 20:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82730 invoked by uid 99); 12 Sep 2010 20:30:00 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 20:30:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Sep 2010 20:29:38 +0000
Received: by qwk3 with SMTP id 3so3573590qwk.35
        for <java-user@lucene.apache.org>; Sun, 12 Sep 2010 13:29:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=4VbwSMN8/CugZAdkpg3A0uGEHyPL3Zp+fpxS5mhfjUo=;
        b=tI0LZjNW/iHIkgrdCMDUeQGNj0QfRL+58SdbKiuBFMR97qokqOEPvJYfHFvBsAVMXZ
         sdWc7tvuD4jFyFhIZxgBdmqW1eECJqpaFD9nZF88ZzVgiTkbM0CPsXUqiyvRfiEfTWOY
         plTM/Qt/l4ZyFLlJwpt6dHShrrFem/K8W2IxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xWZmjELw29YomBg0IeMjDI9ZyaCoOpbdNPxp9YFqlOoQjL5posBkkNLBdoVvCvuKEB
         kQu212ZtUhZCaKc/rcsYor7uTId1hDpdTaWcVk2ERa6ou2//5bsuNnbMIPIsLgwWEk1z
         jKXFYf8rAeT42tBe0z+TYpIRvLt3MsHNgHQGY=
MIME-Version: 1.0
Received: by 10.224.115.38 with SMTP id g38mr2202317qaq.281.1284323357753;
 Sun, 12 Sep 2010 13:29:17 -0700 (PDT)
Received: by 10.229.212.20 with HTTP; Sun, 12 Sep 2010 13:29:17 -0700 (PDT)
In-Reply-To: <004501cb5281$aacab020$00601060$@thetaphi.de>
References: <AANLkTi=3k_MW+EWN7OkN7W2o+2AhUUkMdBym+yAHBfq3@mail.gmail.com>
	<004501cb5281$aacab020$00601060$@thetaphi.de>
Date: Sun, 12 Sep 2010 23:29:17 +0300
Message-ID: <AANLkTikRh53pXh3rPV1M+u5fgC024QG9Xi_X_W+-F_39@mail.gmail.com>
Subject: Re: Unexpected Results - using should and must in boolean query
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00148502aee58401d5049015d5fa
X-Virus-Checked: Checked by ClamAV on apache.org

--00148502aee58401d5049015d5fa
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Thanks for both of you for the answer.

I will try the solution of Uwe, it looks like your suggestion will solve my
problem.

Many thanks,
Liat




On 12 September 2010 16:51, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi,
>
> I always recommend my customers to not mix should and must in the same
> BooleanQuery if strict boolean matching is needed. It will match all docs,
> containing the MUST clause and "boost" all SHOULD terms.
>
> If you have some MUST terms, but you also want to have at least one of a
> list of other terms (like 5 SHOULD clauses), the trick is to separate both:
> Create a BooleanQuery with 2 MUST clauses, one is your required TermQuery
> and the second clause is itself a BooleanQuery with all the SHOULD clauses.
> This ensures that at least one of the SHOULD terms is needed together with
> the MUST term.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: liat oren [mailto:oren.liat@gmail.com]
> > Sent: Sunday, September 12, 2010 2:04 PM
> > To: java-user@lucene.apache.org
> > Subject: Unexpected Results - using should and must in boolean query
> >
> > Hi,
> >
> > I am running a query and get some unexpected results.
> >
> > When I run boolean query on a text field for the word X, using occur =
> SHOULD,
> > the results contain the word X.
> >
> > However, when I add another boolean query on another field (country) for
> the
> > word Y, using occur = MUST, in the results I get only documents in
> country
> Y,
> > but from some reason, not only that I get documents that don't contain
> the
> > word X, they get higher score than those contain the word X.
> >
> > If I change the occur of the word X in the query to MUST, it of course
> fixes it,
> > but I don't understand why the SHOULD "lost" its "power" when I added the
> > MUST on another field.
> >
> > Could something like this can happen?
> > How can it be solved?
> >
> > Many thanks,
> > Liat
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00148502aee58401d5049015d5fa--

From java-user-return-47239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 13 09:46:57 2010
Return-Path: <java-user-return-47239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 183 invoked from network); 13 Sep 2010 09:46:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Sep 2010 09:46:56 -0000
Received: (qmail 83856 invoked by uid 500); 13 Sep 2010 09:46:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83279 invoked by uid 500); 13 Sep 2010 09:46:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83269 invoked by uid 99); 13 Sep 2010 09:46:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Sep 2010 09:46:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oren.liat@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Sep 2010 09:46:43 +0000
Received: by qwk3 with SMTP id 3so3970782qwk.35
        for <java-user@lucene.apache.org>; Mon, 13 Sep 2010 02:46:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=AqqtZ+LLBRyAwaziBQuqMiK2MMBspyI459T2QAVaEJI=;
        b=qstj4QK+6DOi4ECO18y3Gnx9EWHtM4cz8l4g3YWqxTeVwM3KIbzVKuqZEPpfZBgHd6
         kscrFhnVb1Ftf2QbCLJyOSkoSjgfwRBfUTd5Mq17yEtfofIOKjrb1NrUI6jYCmz2RtdQ
         QGsXxUCmuIlrdJlprG79k5KIoiP9H+tpCrh8s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=tCZDSoIY3JcURNMFKuN9ViF0ZmbWYxT6Mt4DnXSAA3q9fh/FJYgASsE2am8kCQTfji
         XThhrGwswKiMMdZH41fI4GjVwL2pZ+NbHeCWqTobUPy3ZN4hAx9bz0hrjT6furZ1uHTW
         hmNxi7zWhrvapzVI/ra0jZ7VFwDA8wddfmCMY=
MIME-Version: 1.0
Received: by 10.224.11.6 with SMTP id r6mr2727076qar.5.1284371182708; Mon, 13
 Sep 2010 02:46:22 -0700 (PDT)
Received: by 10.229.212.20 with HTTP; Mon, 13 Sep 2010 02:46:22 -0700 (PDT)
Date: Mon, 13 Sep 2010 12:46:22 +0300
Message-ID: <AANLkTiky12oQ_bV1BrY9nuZJZco0H3i4OzHWE5A-NQHf@mail.gmail.com>
Subject: Get total number of results
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb1d41ae9de049020f857

--0015175cb1d41ae9de049020f857
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I need to give the user the total number of results when running a query.

Currently I use the TopDocCollector to get the top 200 documents.

How can I know the total number of results?

Thanks a lot,
Liat

--0015175cb1d41ae9de049020f857--

From java-user-return-47240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 13 09:54:35 2010
Return-Path: <java-user-return-47240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1612 invoked from network); 13 Sep 2010 09:54:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Sep 2010 09:54:34 -0000
Received: (qmail 96282 invoked by uid 500); 13 Sep 2010 09:54:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95925 invoked by uid 500); 13 Sep 2010 09:54:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95913 invoked by uid 99); 13 Sep 2010 09:54:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Sep 2010 09:54:27 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Sep 2010 09:54:21 +0000
Received: by qwk3 with SMTP id 3so3975852qwk.35
        for <java-user@lucene.apache.org>; Mon, 13 Sep 2010 02:54:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=7L+nsT4orwK65xjji2daNXaWkinpQFHYr8DAgoVeHQM=;
        b=MV5yACHO2Ywp5OOuVfEdUoCyk9gsZ+Lxd+guUOjk/DoO8j3syy4oIlWQdhnwlmYe6Z
         UVS3mkIlGFReOqyLidsi/0/y4swPLd/pyMB6upHZqEp0X2e/jsufFcg7bmD5iTlRJpLs
         gjAp3Ipj7kq988Qe40o2DfPl5q8BQy8YYgZ9U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SW2c8ZVKyv79YzoxJa41QNwfs36NKwdmslpPsQRhqUg0Bav3ljrWTUt8xXbzIOEiZc
         0gvRjoFtTuwyzUbymgIFpzSAa64kXyFjKa50piGfLkC7cm/Zl8OLnFwZBgiyGbS4z8B7
         g27gjPdicM/dXvRVwRyp4Q/6nJNdB75fv6IiM=
Received: by 10.224.28.139 with SMTP id m11mr2331530qac.347.1284371640221;
 Mon, 13 Sep 2010 02:54:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.196 with HTTP; Mon, 13 Sep 2010 02:53:40 -0700 (PDT)
In-Reply-To: <AANLkTiky12oQ_bV1BrY9nuZJZco0H3i4OzHWE5A-NQHf@mail.gmail.com>
References: <AANLkTiky12oQ_bV1BrY9nuZJZco0H3i4OzHWE5A-NQHf@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 13 Sep 2010 10:53:40 +0100
Message-ID: <AANLkTikPYbSR+K5Gjv9wjEMADE1Sq7VXhKqdCKSjYN9G@mail.gmail.com>
Subject: Re: Get total number of results
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/search/TopDocsCollector.html#getTotalHits%28%29


--
Ian.


On Mon, Sep 13, 2010 at 10:46 AM, liat oren <oren.liat@gmail.com> wrote:
> Hi,
>
> I need to give the user the total number of results when running a query.
>
> Currently I use the TopDocCollector to get the top 200 documents.
>
> How can I know the total number of results?
>
> Thanks a lot,
> Liat
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 14 11:38:14 2010
Return-Path: <java-user-return-47241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75395 invoked from network); 14 Sep 2010 11:38:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Sep 2010 11:38:14 -0000
Received: (qmail 90396 invoked by uid 500); 14 Sep 2010 11:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90031 invoked by uid 500); 14 Sep 2010 11:38:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90023 invoked by uid 99); 14 Sep 2010 11:38:07 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Sep 2010 11:38:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pankajiitdyn@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Sep 2010 11:37:45 +0000
Received: by qyk2 with SMTP id 2so7372042qyk.14
        for <java-user@lucene.apache.org>; Tue, 14 Sep 2010 04:37:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=RUe3KgRGVe3fbwh8fcLZIg9S1/DWOk00AHuM1imPxMA=;
        b=Gks+MfM3EOG6KUUrIzGPj7WnHVvc0PiyReJ5Glc3XeHX4T8jdfgMa2OJeKdpzmy60y
         o89Hvtv8D3AvF3n4WmsJarWO3v0VoAfQABDv18OM7BmPedW0+3U+rYnnUHiN6CstBSBb
         zZTxWHNfAoootl3ix8aesmjTAKFOHsIETuxCw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=azFLGG24vpi70VOGwDk54WJacwidROVKLeQqOPhCB/GugMcrX3MSuQD0gtSCVhayIR
         Sq22zoe1aUs9Ou1XPlhXjPPqk8kwYOa4twrrxbT3PcHa5gMtiKMXsCvMyjhtZGWr5tTZ
         599ug27OQFqRzG5YPX19BE/+t9F/OUPHeVaWc=
MIME-Version: 1.0
Received: by 10.229.213.135 with SMTP id gw7mr4316740qcb.41.1284464243518;
 Tue, 14 Sep 2010 04:37:23 -0700 (PDT)
Received: by 10.229.21.11 with HTTP; Tue, 14 Sep 2010 04:37:23 -0700 (PDT)
Date: Tue, 14 Sep 2010 17:07:23 +0530
Message-ID: <AANLkTinQcAA12jbQxgmThZFtVD5N4zXJ+D129A5e-fUT@mail.gmail.com>
Subject: Search within a document
From: Pankaj Malhotra <pankajiitdyn@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485e8ab84f62d86049036a2bd
X-Virus-Checked: Checked by ClamAV on apache.org

--001485e8ab84f62d86049036a2bd
Content-Type: text/plain; charset=ISO-8859-1

A newbie's question: From a search, I find a document. Now I want to search
a different keyword across various fields *only* in this document. Is this
possible?
Kindly explain.

Regards
Pankaj

--001485e8ab84f62d86049036a2bd--

From java-user-return-47242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 14 11:44:53 2010
Return-Path: <java-user-return-47242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79092 invoked from network); 14 Sep 2010 11:44:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Sep 2010 11:44:53 -0000
Received: (qmail 11908 invoked by uid 500); 14 Sep 2010 11:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11461 invoked by uid 500); 14 Sep 2010 11:44:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11453 invoked by uid 99); 14 Sep 2010 11:44:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Sep 2010 11:44:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pankajiitdyn@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Sep 2010 11:44:40 +0000
Received: by qwk3 with SMTP id 3so5099653qwk.35
        for <java-user@lucene.apache.org>; Tue, 14 Sep 2010 04:44:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=A+eKpT1nORIILpfMfwFrkXsGPybdtf8iRC++FeMMHcw=;
        b=HGUMSi/OGGjkBQmE/5WQ66HAZx1kttnJcIpQpIeo6+JyrR8SOW+cUjVkYkyj2CM9mJ
         Wi8HmNxG93Y6Sot5RKceGuyhw6eSWvPcMogXsQgCfABRuXJJM8mUCh9R/RDQroT0sSR0
         v/fCN2D9rE0zXPfKwR+DuPsnU/NeS7LKr5vF0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BFIzNbhuYa+sHAEevYm51nsTBcPad+4gI+ytIo9zDxAkIDJej3IFnaHSAZEAGhnlTv
         2mJxbw8d5jYaOnnUV3qzSij7xvETh7aITfVed5rV8//1RcqEnI37BYJd6lQvKiY4N1VM
         DGgpLpjTEgoYT/y8F28ekTqoVPMzCezwkD1yQ=
MIME-Version: 1.0
Received: by 10.224.37.14 with SMTP id v14mr769640qad.298.1284464659331; Tue,
 14 Sep 2010 04:44:19 -0700 (PDT)
Received: by 10.229.21.11 with HTTP; Tue, 14 Sep 2010 04:44:19 -0700 (PDT)
In-Reply-To: <AANLkTinQcAA12jbQxgmThZFtVD5N4zXJ+D129A5e-fUT@mail.gmail.com>
References: <AANLkTinQcAA12jbQxgmThZFtVD5N4zXJ+D129A5e-fUT@mail.gmail.com>
Date: Tue, 14 Sep 2010 17:14:19 +0530
Message-ID: <AANLkTikiU+m0jWEQeo3GmY8ec=tnJEVY5af7_4PmQVrB@mail.gmail.com>
Subject: Re: Search within a document
From: Pankaj Malhotra <pankajiitdyn@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd341c2befcca049036bba2

--000e0cd341c2befcca049036bba2
Content-Type: text/plain; charset=ISO-8859-1

Also, if someone could tell how to search across all the fields together and
also know which field the search result belong to. Other than using the
"All" field kind of approach. Also using MultiFieldQueryParser doesn't work
for me as the number and names of fields keep on changing.

Thanks in advance
Pankaj
On Tue, Sep 14, 2010 at 5:07 PM, Pankaj Malhotra <pankajiitdyn@gmail.com>wrote:

> A newbie's question: From a search, I find a document. Now I want to search
> a different keyword across various fields *only* in this document. Is this
> possible?
> Kindly explain.
>
> Regards
> Pankaj
>

--000e0cd341c2befcca049036bba2--

From java-user-return-47243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 14 11:53:27 2010
Return-Path: <java-user-return-47243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81670 invoked from network); 14 Sep 2010 11:53:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Sep 2010 11:53:27 -0000
Received: (qmail 23198 invoked by uid 500); 14 Sep 2010 11:53:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23104 invoked by uid 500); 14 Sep 2010 11:53:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23089 invoked by uid 99); 14 Sep 2010 11:53:21 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Sep 2010 11:53:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Sep 2010 11:52:59 +0000
Received: (qmail 7962 invoked by uid 508); 14 Sep 2010 11:52:36 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=l4U2VNZsGfxBeg4DR9yP4yjyiXGsx9Xe3Oe2HnPYP8BG4p88w3dQqfWOouzRk5Rq  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 14 Sep 2010 11:52:36 -0000
MIME-Version: 1.0
Date: Tue, 14 Sep 2010 17:22:36 +0530
From: <suman.holani@zapak.co.in>
To: <java-user@lucene.apache.org>
Subject: Re: Search within a document
In-Reply-To: <AANLkTikiU+m0jWEQeo3GmY8ec=tnJEVY5af7_4PmQVrB@mail.gmail.com>
References: <AANLkTinQcAA12jbQxgmThZFtVD5N4zXJ+D129A5e-fUT@mail.gmail.com> <AANLkTikiU+m0jWEQeo3GmY8ec=tnJEVY5af7_4PmQVrB@mail.gmail.com>
Message-ID: <2b0cd00d668c50b3f61d1fbb021270c1@localhost>
X-Sender: suman.holani@zapak.co.in
User-Agent: RoundCube Webmail/0.3.1
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

you can use query filter for that purpose .



Suman


On Tue, 14 Sep 2010 17:14:19 +0530, Pankaj Malhotra
<pankajiitdyn@gmail.com> wrote:
> Also, if someone could tell how to search across all the fields together
> and
> also know which field the search result belong to. Other than using the
> "All" field kind of approach. Also using MultiFieldQueryParser doesn't
work
> for me as the number and names of fields keep on changing.
> 
> Thanks in advance
> Pankaj
> On Tue, Sep 14, 2010 at 5:07 PM, Pankaj Malhotra
> <pankajiitdyn@gmail.com>wrote:
> 
>> A newbie's question: From a search, I find a document. Now I want to
>> search
>> a different keyword across various fields *only* in this document. Is
>> this
>> possible?
>> Kindly explain.
>>
>> Regards
>> Pankaj
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 14 18:04:25 2010
Return-Path: <java-user-return-47244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25731 invoked from network); 14 Sep 2010 18:04:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Sep 2010 18:04:24 -0000
Received: (qmail 46366 invoked by uid 500); 14 Sep 2010 18:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46186 invoked by uid 500); 14 Sep 2010 18:04:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46178 invoked by uid 99); 14 Sep 2010 18:04:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Sep 2010 18:04:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pankajiitdyn@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Sep 2010 18:04:16 +0000
Received: by ywf9 with SMTP id 9so3343030ywf.35
        for <java-user@lucene.apache.org>; Tue, 14 Sep 2010 11:03:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Lrirz8wMNeGXvfKt1sg5tT++rmnUazQCh8vwxEYk6dU=;
        b=suLCkM/j3ewUJdcJb+uXMbg/KITRfR4S8iFF/7sKXFOayE7p5Oy/hgxos8L3vr4wAP
         6cORMJlpCA76QoIdfLExmZnpgiXck27a6XocxJLPWaOwn24Y9n0qv42JScfLCvNeeUwf
         5zel4eNcKMM1zpOEyvVVUFNw/1yoicZD0IiB0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nPx58pSiHfbMjIkZARdPuWRgqsT2rK2EkJakza2/YO/Z1/qcETgxkTMMZ0A4IosSRF
         solSIP3p+aoAjS18pyoNKTmIYletG0LUGNKFFGsevju02h3emqvj4yHK+pzWgUE5lT5i
         JMkbdWj+VSxSRMsoYa9hES+6s/la3afoznMFo=
MIME-Version: 1.0
Received: by 10.150.50.4 with SMTP id x4mr657561ybx.17.1284487435621; Tue, 14
 Sep 2010 11:03:55 -0700 (PDT)
Received: by 10.231.150.5 with HTTP; Tue, 14 Sep 2010 11:03:55 -0700 (PDT)
In-Reply-To: <2b0cd00d668c50b3f61d1fbb021270c1@localhost>
References: <AANLkTinQcAA12jbQxgmThZFtVD5N4zXJ+D129A5e-fUT@mail.gmail.com>
	<AANLkTikiU+m0jWEQeo3GmY8ec=tnJEVY5af7_4PmQVrB@mail.gmail.com>
	<2b0cd00d668c50b3f61d1fbb021270c1@localhost>
Date: Tue, 14 Sep 2010 23:33:55 +0530
Message-ID: <AANLkTikb0ckPVRtjkFuMkd7ORyH-9b7=NV=0Wk8_MWNp@mail.gmail.com>
Subject: Re: Search within a document
From: Pankaj Malhotra <pankajiitdyn@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6adfe5196a704903c09ae

--000e0cd6adfe5196a704903c09ae
Content-Type: text/plain; charset=ISO-8859-1

@Suman:Yaa, that's what I needed.

Thanks
Pankaj

On Tue, Sep 14, 2010 at 5:22 PM, <suman.holani@zapak.co.in> wrote:

> you can use query filter for that purpose .
>
>
>
> Suman
>
>
> On Tue, 14 Sep 2010 17:14:19 +0530, Pankaj Malhotra
> <pankajiitdyn@gmail.com> wrote:
> > Also, if someone could tell how to search across all the fields together
> > and
> > also know which field the search result belong to. Other than using the
> > "All" field kind of approach. Also using MultiFieldQueryParser doesn't
> work
> > for me as the number and names of fields keep on changing.
> >
> > Thanks in advance
> > Pankaj
> > On Tue, Sep 14, 2010 at 5:07 PM, Pankaj Malhotra
> > <pankajiitdyn@gmail.com>wrote:
> >
> >> A newbie's question: From a search, I find a document. Now I want to
> >> search
> >> a different keyword across various fields *only* in this document. Is
> >> this
> >> possible?
> >> Kindly explain.
> >>
> >> Regards
> >> Pankaj
> >>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6adfe5196a704903c09ae--

From java-user-return-47245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 15 07:50:53 2010
Return-Path: <java-user-return-47245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83048 invoked from network); 15 Sep 2010 07:50:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Sep 2010 07:50:53 -0000
Received: (qmail 52741 invoked by uid 500); 15 Sep 2010 07:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49974 invoked by uid 500); 15 Sep 2010 07:50:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49937 invoked by uid 99); 15 Sep 2010 07:50:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 07:50:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.214.115.60] (HELO h1349259.stratoserver.net) (85.214.115.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 07:50:35 +0000
Received: from crt-01-tr.neofonie.de ([91.213.91.28] helo=essen.neofonie.priv)
	by h1349259.stratoserver.net with esmtpsa (TLS1.0:DHE_RSA_AES_128_CBC_SHA1:16)
	(Exim 4.69)
	(envelope-from <isabel@apache.org>)
	id 1Ovmks-00032h-FG; Wed, 15 Sep 2010 07:50:10 +0000
Date: Wed, 15 Sep 2010 09:44:45 +0200
From: Isabel Drost <isabel@apache.org>
To: hadoopberlin@isabel-drost.de, user@mahout.apache.org,
 java-user@lucene.apache.org, general@hadoop.apache.org,
 katta-developer@lists.sourceforge.net, solr-user@lucene.apache.org
Cc: Martin Schmidt <msc@newthinking.de>
Subject: Apache Hadoop Get Together Berlin October 2010 - this time with a
 huge Mahout focus
Message-ID: <20100915094445.58115636@essen.neofonie.priv>
X-Mailer: Claws Mail 3.7.2 (GTK+ 2.14.4; x86_64-http://packman.links2linux.de-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

this is to announce the next Apache Hadoop Get Together sponsored by
JTeam (http://www.jteam.nl) that will take place in newthinking store
in Berlin.

When: October 7th, 5p.m.
Where: Newthinking store Berlin

As always there will be slots of 30min each for talks on your Hadoop
topic. After each talk there will be a lot time to discuss. You can
order drinks directly at the bar in the newthinking store. If you like,
you can order pizza. We will go to Cafe Aufsturz after the event for
some beer and something to eat.

Talks scheduled so far:

Max Heimel: "Hidden Markov Models for Apache Mahout"

Abstract: In this talk I will present and discuss an implementation of
a powerful statistical tool called Hidden Markov Models for the Apache
Mahout project. Hidden Markov models allow to mathematically deduce the
structure of an underlying - and unobservable - process based on the
structure of the produced data. Hidden Markov Models are thus
frequently applied in pattern recognition to deduce structures that are
not directly observable. Examples for applications of Hidden Markov
Models include the recognition of syllables in speech recordings,
handwritten letter recognition and part-of-speech tagging.

Sebastian Schelter: Distributed Itembased Collaborative Filtering with
Apache Mahout"

Abstract: Recommendation Mining helps users find items they like. A
very popular way to implement this is by using Collaborative Filtering.
This talk will give an introduction to an approach called Itembased
Collaborative Filtering and explain Mahout's Map/Reduce based
implementation of it.

Please do indicate on Upcoming
<http://upcoming.yahoo.com/event/6792156> or on Xing
<https://www.xing.com/events/apache-hadoop-berlin-october-2010-564265>
if you are coming so we can more safely plan capacities. Updates to the
event, a brief summary and videos will be posted on
http://isabel-drost.de/hadoop

JTeam is looking for Java developers and search enthusiasts. Check out
their jobs page (http://www.jteam.nl/Jobs/Jobs.html) for more info!

As always a big Thank You goes to newthinking store for providing the
venue for free for our event.

Looking forward to seeing you in Berlin as well,
Isabel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 15 08:56:48 2010
Return-Path: <java-user-return-47246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6284 invoked from network); 15 Sep 2010 08:56:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Sep 2010 08:56:47 -0000
Received: (qmail 43092 invoked by uid 500); 15 Sep 2010 08:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42729 invoked by uid 500); 15 Sep 2010 08:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42214 invoked by uid 99); 15 Sep 2010 08:56:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 08:56:39 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 08:56:31 +0000
Received: from compute1.internal (compute1.nyi.mail.srv.osa [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id D92C728F
	for <java-user@lucene.apache.org>; Wed, 15 Sep 2010 04:56:10 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Wed, 15 Sep 2010 04:56:10 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=wYr6kIppNl4TmHrl644uy41lufI=; b=NYo0EX5tN/3pYypJyPLK7ETLdnvDhfYqDzcmapL7VI7dq0sJLRiuLqvmkaLtgK6L7Va/kSV/IvYy7WS/nVoNJri9KQciJqCqCT/N6zpzx6SVR6uZilZYvZEC3X952RzM5XWqm05oyWQ73NVMpk0CU+Mvzronqf3LLrxlH9+ZRr0=
X-Sasl-enc: TL9PYBUdR0ErKmhxP153zkCO0H2cfB9xqobqSZyLJ1Rr 1284540970
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 64F6E406CA4
	for <java-user@lucene.apache.org>; Wed, 15 Sep 2010 04:56:10 -0400 (EDT)
Message-ID: <4C908A29.9070702@fastmail.fm>
Date: Wed, 15 Sep 2010 09:56:09 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Use of SimpleStringInterner in non Lucene App
References: <AANLkTinQcAA12jbQxgmThZFtVD5N4zXJ+D129A5e-fUT@mail.gmail.com>
In-Reply-To: <AANLkTinQcAA12jbQxgmThZFtVD5N4zXJ+D129A5e-fUT@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Im currently using String.intern() in my app purely to reduce the memory 
usage, this has worked well except the memory required for intern() go 
into perm rather than heap, setting perm on different platforms is on 
trivial so Im looking for a solution that works on Heap. (Now before you 
say tune your applications please understand that my app is memory bound 
based on how many files are loaded into it , which can be anything from 
10 to 100,000, in the long term I am going to move to a database soln to 
solve this issue, but in the short term I need intern() for heap memory)

Does SimpleStringInterner use heap, would it be sensible to use it for a 
non lucene stuff, and what do the tableSize and maxChainLength 
parameters mean. ?

thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 15 11:35:22 2010
Return-Path: <java-user-return-47247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52092 invoked from network); 15 Sep 2010 11:35:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Sep 2010 11:35:22 -0000
Received: (qmail 18587 invoked by uid 500); 15 Sep 2010 11:35:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18076 invoked by uid 500); 15 Sep 2010 11:35:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18062 invoked by uid 99); 15 Sep 2010 11:35:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 11:35:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 11:35:09 +0000
Received: by qwk3 with SMTP id 3so20436qwk.35
        for <java-user@lucene.apache.org>; Wed, 15 Sep 2010 04:34:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=MZq5Mr57rbYrNo6xGeRZagZhyqb7HZEk0pLRGVOVc5c=;
        b=N3xdzxzNKH50wNick6ibVt/qqs8G388js/lyo09qC3Tr3Eqf7mt/52QeXL3jSffoJN
         PS6Sisf69btNQapd/6iNCHxJhs6Bnjg6lv6eMJQ+sNsxoPTaX/HExwOR2vGtNU4zeghV
         hZx+ovjiV3VIfDn5OXpFQmSQle98JiLXUQCl0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=aaFwDJnCpxvEzrggl8JuiAUHf6NNNuO1GxkU/VbIjWwHJANz2HuHihT5IXY5mFRuAu
         rnS4ApVet+hz0V+4bOlOySDbXqZnFI3Yu88hD6QsHFJPfKtQxo8C4wyH7GBOIM2mwnnp
         +lA5YzExSBWkC/lonl0f8aSBYIHFczEHbYDbU=
MIME-Version: 1.0
Received: by 10.224.29.1 with SMTP id o1mr929143qac.279.1284550487826; Wed, 15
 Sep 2010 04:34:47 -0700 (PDT)
Received: by 10.224.67.68 with HTTP; Wed, 15 Sep 2010 04:34:47 -0700 (PDT)
Date: Wed, 15 Sep 2010 08:34:47 -0300
Message-ID: <AANLkTimXkzrtVoEsv2BYv=qKhH3JYd6Poc9RKvOc=9JJ@mail.gmail.com>
Subject: ANN: Oracle Lucene Domain Index 3.0.2 released
From: Marcelo Ochoa <marcelo.ochoa@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Just a few words to announce a new release
(http://sourceforge.net/projects/dbprism/files/odi/3.0.2.1.0/) of
Oracle Lucene Domain Index
(http://docs.google.com/View?docid=ddgw7sjp_569gf8c7cd8), this zip is
valid for 10g and 11g database version (10g using back-ported classes
from 1.5 to 1.4)
This release is compiled using Lucene 3.0.2 version and incorporates a
set of new features added, here the list:
  * Added a long awaited functionality, a parallel/shared/slave search
process used during a start-fetch-close and CountHits function
  * Added lfreqterms ancillary operator returning the freq terms array
of rows visited
  * Added lsimilarity ancillary operator returning a computed
Levenshtein distance of the row visited
  * Added a ldidyoumean pipeline table function using
DidYouMean.indexDictionary storage
  * Added test using SQLUnit
The bigger addition is the Parallel-Shared-Slave search process, this
architectural change was in my to-do list for a long time and finally
I added in this release :)
The idea behind this is to have a new Oracle process started by the
DBMS_SCHEDULER sub-system during the database startup process and
stopped immediately before shutdown.
Now this process is responsible for implementing the ODCI methods
start-fetch-close/count-hit on behalf of the client process (process
associated to an specific user session) which connect to the
shared-slave process by using RMI.
With this new architecture we have two principal benefits:
  * Reduce memory consumption
  * Increase Lucene Cache Hits
Less memory consumption because the internal OJVM implementation is
attached to a client session, so the Java space used by Lucene
structures is isolated and independent from another concurrent
session, now all Lucene memory structures used during index scan
process are created in a shared process and then not replicated.
Also if one session submits a Lucene search, this search is cached for
subsequent queries, all subsequent queries coming from the same client
session or any other which are associated to the same index and with
the same Query string implies a hit.
For those who are in the SFO area, I'll be there next week during the OOW10 :)
Marcelo.

-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://mochoa.sites.exa.unicen.edu.ar/
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 15 13:19:06 2010
Return-Path: <java-user-return-47248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97520 invoked from network); 15 Sep 2010 13:19:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Sep 2010 13:19:06 -0000
Received: (qmail 58478 invoked by uid 500); 15 Sep 2010 13:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58050 invoked by uid 500); 15 Sep 2010 13:19:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57276 invoked by uid 99); 15 Sep 2010 13:18:59 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 13:18:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of iamjabour@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 13:18:38 +0000
Received: by wyf23 with SMTP id 23so223782wyf.35
        for <java-user@lucene.apache.org>; Wed, 15 Sep 2010 06:18:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=UXdGiH6zxLAEILhhK7cCDiHb+lkxHKALK0RUFKCghWc=;
        b=KKjG1oYcoLgYB2VZrnLM2JwJdFVJIe0c8VfBKJDJCnp/D7n10XrMkaxzDr7VHgoPaX
         /hmtljlcAbaQBfzFBgn67Qzfx/Io0Pn+AkMwA261sDeyYFezZW1V7Tk4xedKjtH0CdTI
         xOL7B1tD3RunKrEzypqUQNRZlJnjLpBGk1AxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=LRmsTXElZSau8wXBUWrnRR5DIViEuqWLXJIyPFZSJNjkAR23Rgom703Cst7FrRnzvu
         GOd5Qq9ISarDCjSElVhJQFEpP9RnI69uxDyYg83jNnMIVfuX+Ke67g5UVNQIUg73+kbf
         3pa3RBBB1NMRlU4doHZFMfiYC+ZbWrSmHAZFY=
MIME-Version: 1.0
Received: by 10.216.11.201 with SMTP id 51mr5227159wex.72.1284556696346; Wed,
 15 Sep 2010 06:18:16 -0700 (PDT)
Received: by 10.216.39.17 with HTTP; Wed, 15 Sep 2010 06:18:16 -0700 (PDT)
In-Reply-To: <005a01cb5131$f4cf3a20$de6dae60$@thetaphi.de>
References: <AANLkTik+Y01Vc-KCg5co0cYF-XJhRbsWXQXbQUFW567w@mail.gmail.com>
	<005a01cb5131$f4cf3a20$de6dae60$@thetaphi.de>
Date: Wed, 15 Sep 2010 10:18:16 -0300
Message-ID: <AANLkTikoOZBUU28inzoQfqyAKHct6qa9=VbqZfomyQYy@mail.gmail.com>
Subject: Re: Extra Analyzers
From: Iam Jabour <iamjabour@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

ok, tanks.
______________
Iam Jabour




2010/9/10 Uwe Schindler <uwe@thetaphi.de>:
> Its in the contrib subfolder of the ZIP file!
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Iam Jabour [mailto:iamjabour@gmail.com]
>> Sent: Friday, September 10, 2010 11:40 PM
>> To: java-user@lucene.apache.org
>> Subject: Extra Analyzers
>>
>> Hi,
>>
>> I got lucene from http://www.apache.org/dyn/closer.cgi/lucene/java/
>> but I'm looking for extra Analyzers like BrazilianAnalyzer [1] and other=
s.
> Where
>> can I get extra packages for lucene?
>>
>> Ty
>>
>> [1] -
>> http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene=
-
>> analyzers/3.0.2/org/apache/lucene/analysis/br/BrazilianAnalyzer.java/
>> ______________
>> Iam Jabour
>>
>>
>>
>>
>> On Thu, Sep 9, 2010 at 2:23 AM, fulin tang <tangfulin@gmail.com> wrote:
>> > we now have 0.15 billion documents, which source size 1.5 TB, on 16
> shards .
>> >
>> > I am very interested how you get your job done
>> >
>> >
>> > =C3=CE=B5=C4=BF=AA=CA=BC=D5=F5=D4=FA=D3=DA=B3=C7=CA=D0=B5=C4=B1=DF=D4=
=B5
>> > =D0=C4=B5=C4=D4=B6=B7=BD=D6=B4=D7=C5=D4=DA=BD=C5=B2=BD=B5=C4=CB=B2=BC=
=E4
>> > =CE=D2=B5=C4=CB=DE=C3=FC=C2=F1=B2=D8=C1=CB=BC=C5=C4=AF=B5=C4=D3=C0=D4=
=B6
>> >
>> >
>> >
>> > 2010/8/26 Nigel <nigelspleen@gmail.com>:
>> >> I'm curious about what the largest Lucene installations are, in terms
> of:
>> >>
>> >> - Greatest number of documents (i.e. X billion docs)
>> >> - Largest data size (i.e. Y terabytes of indexes)
>> >> - Most machines (i.e. Z shards or severs)
>> >>
>> >> Apart from general curiosity, the obvious follow-up question would be
>> >> what approaches were taken to scale to extremes.
>> >>
>> >> We have ~11 billion documents indexed (growing at >2 billion per
>> >> month), but I'm sure someone else has enough that this appears puny.
> (-:
>> >>
>> >> Thanks,
>> >> Chris
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 15 13:20:44 2010
Return-Path: <java-user-return-47249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97815 invoked from network); 15 Sep 2010 13:20:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Sep 2010 13:20:44 -0000
Received: (qmail 62332 invoked by uid 500); 15 Sep 2010 13:20:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62209 invoked by uid 500); 15 Sep 2010 13:20:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62182 invoked by uid 99); 15 Sep 2010 13:20:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 13:20:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamjabour@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 13:20:30 +0000
Received: by wwc33 with SMTP id 33so157812wwc.5
        for <java-user@lucene.apache.org>; Wed, 15 Sep 2010 06:20:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=0+P5cbaYDjAqpLkNhyTnrbJXZ89H3o8KuP4C8qgWmAk=;
        b=iybM1BnF0UM31Hx5JNMItzsI+tBchQ3sx8SHkvK18+kTd01loFCXi2LqhsrklqaWjs
         BJEFw1CBWD70ouFGYVyNMGd4FdwINt1FLH/Q7mZfq0jpCqDDV4g69l3gTGV3MXgGpMiI
         NAdBOr/zY0K7vwibz0ikryFSVxfWlAiF8cDaY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=DzYvWocRfEJw40RZyIPOZS9mgGqlCXlJdW/j8VqDO+FvvIgvLbVP8fx1waFPGgw8A6
         iAZbMxIG3fAhV6nitLEPydX5OZHTnaKKQcW/buj4kg3lzxoxS0BJl7gFogBhpG8DAxwv
         ti8mxx1p0twSLjM5ZZPYOUnmz45IsUu3ZSzVU=
MIME-Version: 1.0
Received: by 10.227.137.211 with SMTP id x19mr1380144wbt.32.1284556809297;
 Wed, 15 Sep 2010 06:20:09 -0700 (PDT)
Received: by 10.216.39.17 with HTTP; Wed, 15 Sep 2010 06:20:09 -0700 (PDT)
Date: Wed, 15 Sep 2010 10:20:09 -0300
Message-ID: <AANLkTimFkYWDYWd57gHv6skcQwHNqS4qqMo4N6HqpU-K@mail.gmail.com>
Subject: Hierarchical Fields
From: Iam Jabour <iamjabour@gmail.com>
To: lucene-group <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

 Hello, any one can help me with fields?

I have the same problem posted in
http://search.lucidimagination.com/search/out?u=http://wiki.apache.org/lucene-java/HierarchicalFields,
but I don't like the proposed solutions. I need a order field, like [
token1, token2, token3]
If a query match with token1 the score is bigger then a match in
token2, or same thing like that.

______________
Iam Jabour

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 15 15:54:58 2010
Return-Path: <java-user-return-47250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66354 invoked from network); 15 Sep 2010 15:54:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Sep 2010 15:54:58 -0000
Received: (qmail 6297 invoked by uid 500); 15 Sep 2010 15:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5926 invoked by uid 500); 15 Sep 2010 15:54:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5911 invoked by uid 99); 15 Sep 2010 15:54:52 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 15:54:52 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 15:54:28 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o8FFs6we001644
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 15 Sep 2010 11:54:07 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Wed, 15 Sep 2010
 11:53:15 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 15 Sep 2010 11:52:43 -0400
Subject: RE: Hierarchical Fields
Thread-Topic: Hierarchical Fields
Thread-Index: ActU2NERYuxbypNDRFObPe0hICwCvgAFML8A
Message-ID: <2D127F11DC79714E9B6A43AC9458147F796789A5@suex07-mbx-03.ad.syr.edu>
References: <AANLkTimFkYWDYWd57gHv6skcQwHNqS4qqMo4N6HqpU-K@mail.gmail.com>
In-Reply-To: <AANLkTimFkYWDYWd57gHv6skcQwHNqS4qqMo4N6HqpU-K@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-09-15_10:2010-09-15,2010-09-15,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgSWFtLA0KDQpDYW4geW91IHNheSB3aHkgeW91IGRvbid0IGxpa2UgdGhlIHByb3Bvc2VkIHNv
bHV0aW9uPw0KDQpBbHNvLCB0aGUgZXhhbXBsZSBvZiB0aGUgc2NvcmluZyB5b3UncmUgbG9va2lu
ZyBmb3IgZG9lc24ndCBhcHBlYXIgdG8gYmUgaGllcmFyY2hpY2FsIGluIG5hdHVyZSAtIGNhbiB5
b3UgZ2l2ZSBpbGx1c3RyYXRlIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgdG9rZW5zIGlu
IFt0b2tlbjEsIHRva2VuMiwgdG9rZW4zXT8gIEFsc28sIHdoeSBkbyB5b3Ugd2FudCB0b2tlbjEg
dG8gY29udHJpYnV0ZSBtb3JlIHRvIHRoZSBzY29yZSB0aGFuIHRva2VuMj8NCg0KU3RldmUNCg0K
PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBJYW0gSmFib3VyIFttYWlsdG86
aWFtamFib3VyQGdtYWlsLmNvbV0NCj4gU2VudDogV2VkbmVzZGF5LCBTZXB0ZW1iZXIgMTUsIDIw
MTAgOToyMCBBTQ0KPiBUbzogbHVjZW5lLWdyb3VwDQo+IFN1YmplY3Q6IEhpZXJhcmNoaWNhbCBG
aWVsZHMNCj4gDQo+ICBIZWxsbywgYW55IG9uZSBjYW4gaGVscCBtZSB3aXRoIGZpZWxkcz8NCj4g
DQo+IEkgaGF2ZSB0aGUgc2FtZSBwcm9ibGVtIHBvc3RlZCBpbg0KPiBodHRwOi8vc2VhcmNoLmx1
Y2lkaW1hZ2luYXRpb24uY29tL3NlYXJjaC9vdXQ/dT1odHRwOi8vd2lraS5hcGFjaGUub3JnL2x1
Yw0KPiBlbmUtamF2YS9IaWVyYXJjaGljYWxGaWVsZHMsDQo+IGJ1dCBJIGRvbid0IGxpa2UgdGhl
IHByb3Bvc2VkIHNvbHV0aW9ucy4gSSBuZWVkIGEgb3JkZXIgZmllbGQsIGxpa2UgWw0KPiB0b2tl
bjEsIHRva2VuMiwgdG9rZW4zXQ0KPiBJZiBhIHF1ZXJ5IG1hdGNoIHdpdGggdG9rZW4xIHRoZSBz
Y29yZSBpcyBiaWdnZXIgdGhlbiBhIG1hdGNoIGluDQo+IHRva2VuMiwgb3Igc2FtZSB0aGluZyBs
aWtlIHRoYXQuDQo+IA0KPiBfX19fX19fX19fX19fXw0KPiBJYW0gSmFib3VyDQo+IA0KPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJl
QGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-47251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 15 16:22:07 2010
Return-Path: <java-user-return-47251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80228 invoked from network); 15 Sep 2010 16:22:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Sep 2010 16:22:07 -0000
Received: (qmail 47525 invoked by uid 500); 15 Sep 2010 16:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47348 invoked by uid 500); 15 Sep 2010 16:22:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47340 invoked by uid 99); 15 Sep 2010 16:22:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 16:22:04 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamjabour@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 16:21:59 +0000
Received: by wyf23 with SMTP id 23so503958wyf.35
        for <java-user@lucene.apache.org>; Wed, 15 Sep 2010 09:21:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=FpcDNO6GcX77qz8ZiNxuy/N6OvSJoWI3091DTMNEeOg=;
        b=THBieNwFsvZQ4l79AITQrsPti5MpM3LW4R7RqnfRXvbvJisIhmGURLn9ZICa5DDJN0
         O2Xy2ruzuMdRZj35V2Wa3yzxQ45slWYGKSom20nnoWqExxwdfog6ADC1Gh+L1YOp3M6G
         o6+OsJfRPtVDDHS9dbs3glbCPA0saV1Urw2Ic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=MnJzQXZiPwOdvZvcTV7WPTiwg9W5LXTXIqDsn2u3WR836Q3AHznWIxoLWdzIKBpvyI
         M0PPiyW4szHTxIWxQUGsNsn9+4qkz+uWgV3R81sSh1oyiTwFFv5JRZwPj4NiayLrr+TC
         iDldrKAHOtnoO1fLp9tv0F2a1FUCtScgRZz7U=
MIME-Version: 1.0
Received: by 10.227.141.84 with SMTP id l20mr1548811wbu.119.1284567697552;
 Wed, 15 Sep 2010 09:21:37 -0700 (PDT)
Received: by 10.216.39.17 with HTTP; Wed, 15 Sep 2010 09:21:37 -0700 (PDT)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F796789A5@suex07-mbx-03.ad.syr.edu>
References: <AANLkTimFkYWDYWd57gHv6skcQwHNqS4qqMo4N6HqpU-K@mail.gmail.com>
	<2D127F11DC79714E9B6A43AC9458147F796789A5@suex07-mbx-03.ad.syr.edu>
Date: Wed, 15 Sep 2010 13:21:37 -0300
Message-ID: <AANLkTi=WqGRpUtdTfHyuEsS3jFkXCQK_2ciss3-9u-SD@mail.gmail.com>
Subject: Re: Hierarchical Fields
From: Iam Jabour <iamjabour@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Let's go to some example:

1 - Suppose I have some path tree, like:
- /music/
  | - rock/
    | - doc1 =3D "artist1 music blues ..."
    | - doc2 =3D "artist2 music pop ..."
  | - blues/
    | - doc3 =3D "artist3  ..."
    | - pop/
        - doc5 =3D "artist1 ... "
  | - pop/
    | -  doc4 =3D "artist1 music rock ..."

2 - I created lucene documents like this example:
 field1 =3D ("path", doc1fullpath)
 field2 =3D ("value", doc1Value)
and do the same to all documents.

3 - now I going to do the search:
  $ rock
I get some sort like: [doc4, doc1, doc2]
but I want: [doc1 | doc2] and the others [doc3 & doc4] like doc1, doc2, doc=
4

  $ music AND blues
I get: doc1, doc3
but I want: doc3, doc1

  $ pop
I want: doc4 then doc5 (because the path to doc4 is smaller then doc5)

So to do this I need:
1 - change field boost
2 - set priority of path, and to do that: I create N field (one field
to node in the path) or have some Lucene feature (but I don't know
how)

Thanks.
______________
Iam Jabour




On Wed, Sep 15, 2010 at 12:52 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> Hi Iam,
>
> Can you say why you don't like the proposed solution?
>
> Also, the example of the scoring you're looking for doesn't appear to be =
hierarchical in nature - can you give illustrate the relationship between t=
he tokens in [token1, token2, token3]? =A0Also, why do you want token1 to c=
ontribute more to the score than token2?
>
> Steve
>
>> -----Original Message-----
>> From: Iam Jabour [mailto:iamjabour@gmail.com]
>> Sent: Wednesday, September 15, 2010 9:20 AM
>> To: lucene-group
>> Subject: Hierarchical Fields
>>
>> =A0Hello, any one can help me with fields?
>>
>> I have the same problem posted in
>> http://search.lucidimagination.com/search/out?u=3Dhttp://wiki.apache.org=
/luc
>> ene-java/HierarchicalFields,
>> but I don't like the proposed solutions. I need a order field, like [
>> token1, token2, token3]
>> If a query match with token1 the score is bigger then a match in
>> token2, or same thing like that.
>>
>> ______________
>> Iam Jabour
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 15 17:04:38 2010
Return-Path: <java-user-return-47252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92428 invoked from network); 15 Sep 2010 17:04:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Sep 2010 17:04:37 -0000
Received: (qmail 41586 invoked by uid 500); 15 Sep 2010 17:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41435 invoked by uid 500); 15 Sep 2010 17:04:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41427 invoked by uid 99); 15 Sep 2010 17:04:35 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 17:04:35 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Sep 2010 17:04:11 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o8FH3o0W005384
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 15 Sep 2010 13:03:50 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Wed, 15 Sep 2010
 13:03:50 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 15 Sep 2010 13:03:18 -0400
Subject: RE: Hierarchical Fields
Thread-Topic: Hierarchical Fields
Thread-Index: ActU8ie8IdZ5WT+TRlODuFGzxHACVgAAdemQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147F796789AA@suex07-mbx-03.ad.syr.edu>
References: <AANLkTimFkYWDYWd57gHv6skcQwHNqS4qqMo4N6HqpU-K@mail.gmail.com>
	<2D127F11DC79714E9B6A43AC9458147F796789A5@suex07-mbx-03.ad.syr.edu>
 <AANLkTi=WqGRpUtdTfHyuEsS3jFkXCQK_2ciss3-9u-SD@mail.gmail.com>
In-Reply-To: <AANLkTi=WqGRpUtdTfHyuEsS3jFkXCQK_2ciss3-9u-SD@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-09-15_10:2010-09-15,2010-09-15,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

U3VtbWFyaXppbmcgYSAjbHVjZW5lIGNvbnZlcnNhdGlvbiBJIGhhZCB3aXRoIElhbSAoYWthIFBh
Y2thZ2VMb3N0KToNCg0KLS0tLS0NClN0ZXZlOiBIb3cgZGVlcCBpcyB5b3VyIGhpZXJhcmNoeT8g
SSBhc2sgYmVjYXVzZSB5b3UgbWF5IGJlIGFibGUgdG8gaGF2ZSBvbmUgZmllbGQgZm9yIGVhY2gg
bGV2ZWwgaW4gdGhlIGhpZXJhcmNoeSwgYW5kIGJvb3N0IHRoZSBsZXZlbHMgaGlnaGVyIHRoZSBj
bG9zZXIgdGhleSBhcmUgdG8gdGhlIHJvb3QNCg0KSWFtOiBIdW0sIG5vdyBpcyAuLi4gNS03LiAg
SSB0aGluayA2DQoNClN0ZXZlOiBJZiB5b3UgaGF2ZSBmaWVsZHMgImxldmVsMSIsICJsZXZlbDIi
LCAibGV2ZWwzIiwgZXRjLiwgYW5kIGJvb3N0IGxldmVsMSBoaWdoZXN0LCBsZXZlbDIgYSBsaXR0
bGUgbG93ZXIsIGV0Yy4sIHRoZW4gc2VhcmNoIGFnYWluc3QgYWxsIGxldmVscw0KDQpJYW06IEJ1
dCBjYW4gYSBkb2N1bWVudCBoYXZlIGRpZmZlcmVudCBmaWVsZHM/IFRoZXJlIGFyZSBhbGwgZmll
bGRzIGFuZCBwbHVzIHRob3NlIE4gbGV2ZWxzIGZpZWxkcyBidXQgc29tZSBkb2N1bWVudHMganVz
dCBuZWVkIDIgbGV2ZWxzLg0KDQpTdGV2ZTogTHVjZW5lIGRvZXMgbm90IHJlcXVpcmUgZXZlcnkg
ZG9jdW1lbnQgdG8gaGF2ZSB0aGUgc2FtZSBzZXQgb2YgZmllbGRzLiBkb2MxIGNvdWxkIGhhdmUg
ZmllbGQgIkEiLCBhbmQgbm90aGluZyBlbHNlLCBhbmQgZG9jMiBjb3VsZCBoYXZlIGZpZWxkICJC
IiBhbmQgbm90aGluZyBlbHNlLCBib3RoIGluIHRoZSBzYW1lIGluZGV4LiBObyBwcm9ibGVtLg0K
LS0tLS0NCg0KQW4gZXhhbXBsZTogSWFtJ3MgdGhpcmQgcXVlcnkgZnJvbSBiZWxvdyAoInBvcCIp
IGNvdWxkIGJlIGV4cGFuZGVkIHRvIHRoZSBmb2xsb3dpbmcgUXVlcnlQYXJzZXIgcXVlcnkgKGFz
c3VtaW5nIGp1c3Qgb25lICJjb250ZW50IiBmaWVsZCBpbiBhZGRpdGlvbiB0byB0aGUgImxldmVs
WCIgZmllbGRzKToNCg0KY29udGVudDpwb3AgbGV2ZWwxOnBvcF4xMjggbGV2ZWwyOnBvcF42NCBs
ZXZlbDM6cG9wXjMyIGxldmVsNDpwb3BeMTYgbGV2ZWw1OnBvcF44IGxldmVsNjpwb3BeNCBsZXZl
bDc6cG9wXjINCg0KVGhpcyB3b3VsZCByZXN1bHQgaW4gZG9jNCwgZG9jNSwgZG9jMiwgd2hpY2gg
aXMgdGhlIGRlc2lyZWQgYmVoYXZpb3IuDQoNClN0ZXZlDQoNCg0KKDEyOjMwOjE0IFBNKSBzYXJv
d2U6IA0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBJYW0gSmFib3VyIFtt
YWlsdG86aWFtamFib3VyQGdtYWlsLmNvbV0NCj4gU2VudDogV2VkbmVzZGF5LCBTZXB0ZW1iZXIg
MTUsIDIwMTAgMTI6MjIgUE0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBT
dWJqZWN0OiBSZTogSGllcmFyY2hpY2FsIEZpZWxkcw0KPiANCj4gTGV0J3MgZ28gdG8gc29tZSBl
eGFtcGxlOg0KPiANCj4gMSAtIFN1cHBvc2UgSSBoYXZlIHNvbWUgcGF0aCB0cmVlLCBsaWtlOg0K
PiAtIC9tdXNpYy8NCj4gICB8IC0gcm9jay8NCj4gICAgIHwgLSBkb2MxID0gImFydGlzdDEgbXVz
aWMgYmx1ZXMgLi4uIg0KPiAgICAgfCAtIGRvYzIgPSAiYXJ0aXN0MiBtdXNpYyBwb3AgLi4uIg0K
PiAgIHwgLSBibHVlcy8NCj4gICAgIHwgLSBkb2MzID0gImFydGlzdDMgIC4uLiINCj4gICAgIHwg
LSBwb3AvDQo+ICAgICAgICAgLSBkb2M1ID0gImFydGlzdDEgLi4uICINCj4gICB8IC0gcG9wLw0K
PiAgICAgfCAtICBkb2M0ID0gImFydGlzdDEgbXVzaWMgcm9jayAuLi4iDQo+IA0KPiAyIC0gSSBj
cmVhdGVkIGx1Y2VuZSBkb2N1bWVudHMgbGlrZSB0aGlzIGV4YW1wbGU6DQo+ICBmaWVsZDEgPSAo
InBhdGgiLCBkb2MxZnVsbHBhdGgpDQo+ICBmaWVsZDIgPSAoInZhbHVlIiwgZG9jMVZhbHVlKQ0K
PiBhbmQgZG8gdGhlIHNhbWUgdG8gYWxsIGRvY3VtZW50cy4NCj4gDQo+IDMgLSBub3cgSSBnb2lu
ZyB0byBkbyB0aGUgc2VhcmNoOg0KPiAgICQgcm9jaw0KPiBJIGdldCBzb21lIHNvcnQgbGlrZTog
W2RvYzQsIGRvYzEsIGRvYzJdDQo+IGJ1dCBJIHdhbnQ6IFtkb2MxIHwgZG9jMl0gYW5kIHRoZSBv
dGhlcnMgW2RvYzMgJiBkb2M0XSBsaWtlIGRvYzEsIGRvYzIsDQo+IGRvYzQNCj4gDQo+ICAgJCBt
dXNpYyBBTkQgYmx1ZXMNCj4gSSBnZXQ6IGRvYzEsIGRvYzMNCj4gYnV0IEkgd2FudDogZG9jMywg
ZG9jMQ0KPiANCj4gICAkIHBvcA0KPiBJIHdhbnQ6IGRvYzQgdGhlbiBkb2M1IChiZWNhdXNlIHRo
ZSBwYXRoIHRvIGRvYzQgaXMgc21hbGxlciB0aGVuIGRvYzUpDQo+IA0KPiBTbyB0byBkbyB0aGlz
IEkgbmVlZDoNCj4gMSAtIGNoYW5nZSBmaWVsZCBib29zdA0KPiAyIC0gc2V0IHByaW9yaXR5IG9m
IHBhdGgsIGFuZCB0byBkbyB0aGF0OiBJIGNyZWF0ZSBOIGZpZWxkIChvbmUgZmllbGQNCj4gdG8g
bm9kZSBpbiB0aGUgcGF0aCkgb3IgaGF2ZSBzb21lIEx1Y2VuZSBmZWF0dXJlIChidXQgSSBkb24n
dCBrbm93DQo+IGhvdykNCj4gDQo+IFRoYW5rcy4NCj4gX19fX19fX19fX19fX18NCj4gSWFtIEph
Ym91cg0KPiANCj4gDQo+IA0KPiANCj4gT24gV2VkLCBTZXAgMTUsIDIwMTAgYXQgMTI6NTIgUE0s
IFN0ZXZlbiBBIFJvd2UgPHNhcm93ZUBzeXIuZWR1PiB3cm90ZToNCj4gPiBIaSBJYW0sDQo+ID4N
Cj4gPiBDYW4geW91IHNheSB3aHkgeW91IGRvbid0IGxpa2UgdGhlIHByb3Bvc2VkIHNvbHV0aW9u
Pw0KPiA+DQo+ID4gQWxzbywgdGhlIGV4YW1wbGUgb2YgdGhlIHNjb3JpbmcgeW91J3JlIGxvb2tp
bmcgZm9yIGRvZXNuJ3QgYXBwZWFyIHRvIGJlDQo+IGhpZXJhcmNoaWNhbCBpbiBuYXR1cmUgLSBj
YW4geW91IGdpdmUgaWxsdXN0cmF0ZSB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4NCj4gdGhlIHRv
a2VucyBpbiBbdG9rZW4xLCB0b2tlbjIsIHRva2VuM10/IMKgQWxzbywgd2h5IGRvIHlvdSB3YW50
IHRva2VuMSB0bw0KPiBjb250cmlidXRlIG1vcmUgdG8gdGhlIHNjb3JlIHRoYW4gdG9rZW4yPw0K
PiA+DQo+ID4gU3RldmUNCj4gPg0KPiA+PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiA+
PiBGcm9tOiBJYW0gSmFib3VyIFttYWlsdG86aWFtamFib3VyQGdtYWlsLmNvbV0NCj4gPj4gU2Vu
dDogV2VkbmVzZGF5LCBTZXB0ZW1iZXIgMTUsIDIwMTAgOToyMCBBTQ0KPiA+PiBUbzogbHVjZW5l
LWdyb3VwDQo+ID4+IFN1YmplY3Q6IEhpZXJhcmNoaWNhbCBGaWVsZHMNCj4gPj4NCj4gPj4gwqBI
ZWxsbywgYW55IG9uZSBjYW4gaGVscCBtZSB3aXRoIGZpZWxkcz8NCj4gPj4NCj4gPj4gSSBoYXZl
IHRoZSBzYW1lIHByb2JsZW0gcG9zdGVkIGluDQo+ID4+DQo+IGh0dHA6Ly9zZWFyY2gubHVjaWRp
bWFnaW5hdGlvbi5jb20vc2VhcmNoL291dD91PWh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvbHVjDQo+
ID4+IGVuZS1qYXZhL0hpZXJhcmNoaWNhbEZpZWxkcywNCj4gPj4gYnV0IEkgZG9uJ3QgbGlrZSB0
aGUgcHJvcG9zZWQgc29sdXRpb25zLiBJIG5lZWQgYSBvcmRlciBmaWVsZCwgbGlrZSBbDQo+ID4+
IHRva2VuMSwgdG9rZW4yLCB0b2tlbjNdDQo+ID4+IElmIGEgcXVlcnkgbWF0Y2ggd2l0aCB0b2tl
bjEgdGhlIHNjb3JlIGlzIGJpZ2dlciB0aGVuIGEgbWF0Y2ggaW4NCj4gPj4gdG9rZW4yLCBvciBz
YW1lIHRoaW5nIGxpa2UgdGhhdC4NCj4gPj4NCj4gPj4gX19fX19fX19fX19fX18NCj4gPj4gSWFt
IEphYm91cg0KPiA+Pg0KPiA+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4+IEZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUu
b3JnDQo+ID4NCj4gPg0KPiANCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1h
aWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRp
b25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K
DQo=


From java-user-return-47253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 16 17:39:47 2010
Return-Path: <java-user-return-47253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67942 invoked from network); 16 Sep 2010 17:39:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Sep 2010 17:39:47 -0000
Received: (qmail 73000 invoked by uid 500); 16 Sep 2010 17:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72906 invoked by uid 500); 16 Sep 2010 17:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72897 invoked by uid 99); 16 Sep 2010 17:39:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 17:39:43 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of sirishreddy@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 17:39:38 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <sirishreddy@gmail.com>)
	id 1OwIQY-0005Tr-7H
	for java-user@lucene.apache.org; Thu, 16 Sep 2010 10:39:18 -0700
Date: Thu, 16 Sep 2010 10:39:18 -0700 (PDT)
From: Sirish Vadala <sirishreddy@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1284658758220-1501269.post@n3.nabble.com>
Subject: Problem searching in the same sentence
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hello All: 

Can any one suggest me the best way to allow me to perform a sentence
specific phrase search? 

Eg: Let the indexed text be: 

If you are posting a question, please try search first. Your question may
have already been answered. Don't post repeatedly. Wait for a few days.
People will read your post by email.

Now if I search for the phrase 'post repeatedly Wait for a few', still I am
able to retrieve the document even though they are in different sentences.

Currently I am using StandardAnalyzer and this is how I am generating lucene
documents:

Field field = new Field(fieldName, validFieldValue, Field.Store.YES,
Field.Index.ANALYZED);
document.add(field);

Is there a way to keep track of different sentences while indexing the
content.
Any hint would be appreciated. 
Thanks. 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Problem-searching-in-the-same-sentence-tp1501269p1501269.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 16 17:46:47 2010
Return-Path: <java-user-return-47254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69744 invoked from network); 16 Sep 2010 17:46:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Sep 2010 17:46:47 -0000
Received: (qmail 92540 invoked by uid 500); 16 Sep 2010 17:46:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92490 invoked by uid 500); 16 Sep 2010 17:46:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92465 invoked by uid 99); 16 Sep 2010 17:46:44 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 17:46:44 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,MIME_BASE64_BLANKS,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 17:46:21 +0000
Received: by bwz14 with SMTP id 14so2859111bwz.35
        for <java-user@lucene.apache.org>; Thu, 16 Sep 2010 10:46:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority
         :sensitivity:importance:subject:to:from:date:content-type
         :mime-version;
        bh=EVLHcPQcsn5Z3iwB6GUrLLU8PSOvMhRDPmhfHKZaSPk=;
        b=nDudndACmqOI0+8AhXls8A5/RKz1CHu8SvWLi9vCCxPs2ACRQAmB7+sEhkjaTP9MpL
         00bMkLi/BzEjh8cA0Hncn2Dt2Qss1JX51kv9jPjJNZGPqR0UsLsQnGIVgFgI7u7zTQT5
         JWJeqCDahtmODPJyDwEvwwEZ0pZHjgf7vamEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:sensitivity:importance:subject:to:from:date:content-type
         :mime-version;
        b=thaafedqNj0XEwuXn5dvDKQ74Bp1bwHOaVlq3rgOTmJRxXUaL3O6VrHxSOHWUXrw8Y
         j4TyNfDqiVCUGnuiaZmI+G1NVbuYBUOYgEbE9MPgzJzGfXGAPzwxDpvVO2B60u0pnVjf
         +GRzsMAy5msKrNZ66ynRWlW3DPmePRMmKuzTE=
Received: by 10.223.117.201 with SMTP id s9mr1623185faq.87.1284659159899;
        Thu, 16 Sep 2010 10:45:59 -0700 (PDT)
Received: from bda028.bisx.produk.on.blackberry (bda-68-171-236-185.bise.eu.blackberry.com [68.171.236.185])
        by mx.google.com with ESMTPS id b9sm1295977faq.31.2010.09.16.10.45.56
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 16 Sep 2010 10:45:58 -0700 (PDT)
X-rim-org-msg-ref-id:965415784
Message-ID:<965415784-1284659153-cardhu_decombobulator_blackberry.rim.net-18703510-@bda2121.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: anshumg@gmail.com
X-Priority: Normal
Sensitivity: Normal
Importance: Normal
Subject: Re: Problem searching in the same sentence
To: java-user@lucene.apache.org
From: "anshum.gupta@naukri.com" <anshumg@gmail.com>
Date: Thu, 16 Sep 2010 17:45:51 +0000
Content-Type: text/plain; charset="Windows-1252"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VHJ5IHdpdGggbXVsdGkgdmFsdWVkIGZpZWxkIHdoaWxlIGluZGV4aW5nIGkuZS4gQWRkIGVhY2gg
c2VudGVuY2UgYXMgYSBzZXBhcmF0ZSBmaWVsZCh3aXRoIHRoZSBzYW1lIGZpZWxkIG5hbWUpIHRv
IHRoZSBzYW1lIGRvY3VtZW50LiBUaGlzIHdvdWxkIGdpdmUgeW91IHRoZSByZXN1bHRzIGFzIHlv
dSB3YW50Lg0KDQotLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0tDQpGcm9tOiBTaXJpc2ggVmFk
YWxhDQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpSZXBseVRvOiBqYXZhLXVzZXJA
bHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IFByb2JsZW0gc2VhcmNoaW5nIGluIHRoZSBzYW1l
IHNlbnRlbmNlDQpTZW50OiBTZXAgMTYsIDIwMTAgMjM6MDkNCg0KDQpIZWxsbyBBbGw6IA0KDQpD
YW4gYW55IG9uZSBzdWdnZXN0IG1lIHRoZSBiZXN0IHdheSB0byBhbGxvdyBtZSB0byBwZXJmb3Jt
IGEgc2VudGVuY2UNCnNwZWNpZmljIHBocmFzZSBzZWFyY2g/IA0KDQpFZzogTGV0IHRoZSBpbmRl
eGVkIHRleHQgYmU6IA0KDQpJZiB5b3UgYXJlIHBvc3RpbmcgYSBxdWVzdGlvbiwgcGxlYXNlIHRy
eSBzZWFyY2ggZmlyc3QuIFlvdXIgcXVlc3Rpb24gbWF5DQpoYXZlIGFscmVhZHkgYmVlbiBhbnN3
ZXJlZC4gRG9uJ3QgcG9zdCByZXBlYXRlZGx5LiBXYWl0IGZvciBhIGZldyBkYXlzLg0KUGVvcGxl
IHdpbGwgcmVhZCB5b3VyIHBvc3QgYnkgZW1haWwuDQoNCk5vdyBpZiBJIHNlYXJjaCBmb3IgdGhl
IHBocmFzZSAncG9zdCByZXBlYXRlZGx5IFdhaXQgZm9yIGEgZmV3Jywgc3RpbGwgSSBhbQ0KYWJs
ZSB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZXZlbiB0aG91Z2ggdGhleSBhcmUgaW4gZGlmZmVy
ZW50IHNlbnRlbmNlcy4NCg0KQ3VycmVudGx5IEkgYW0gdXNpbmcgU3RhbmRhcmRBbmFseXplciBh
bmQgdGhpcyBpcyBob3cgSSBhbSBnZW5lcmF0aW5nIGx1Y2VuZQ0KZG9jdW1lbnRzOg0KDQpGaWVs
ZCBmaWVsZCA9IG5ldyBGaWVsZChmaWVsZE5hbWUsIHZhbGlkRmllbGRWYWx1ZSwgRmllbGQuU3Rv
cmUuWUVTLA0KRmllbGQuSW5kZXguQU5BTFlaRUQpOw0KZG9jdW1lbnQuYWRkKGZpZWxkKTsNCg0K
SXMgdGhlcmUgYSB3YXkgdG8ga2VlcCB0cmFjayBvZiBkaWZmZXJlbnQgc2VudGVuY2VzIHdoaWxl
IGluZGV4aW5nIHRoZQ0KY29udGVudC4NCkFueSBoaW50IHdvdWxkIGJlIGFwcHJlY2lhdGVkLiAN
ClRoYW5rcy4gDQotLSANClZpZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRleHQ6IGh0dHA6Ly9sdWNl
bmUuNDcyMDY2Lm4zLm5hYmJsZS5jb20vUHJvYmxlbS1zZWFyY2hpbmctaW4tdGhlLXNhbWUtc2Vu
dGVuY2UtdHAxNTAxMjY5cDE1MDEyNjkuaHRtbA0KU2VudCBmcm9tIHRoZSBMdWNlbmUgLSBKYXZh
IFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20uDQoNCi0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5h
cGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZw0KDQoNCg0KLS0NCkFuc2h1bQ0KaHR0cDovL2Jsb2cuYW5zaHVt
Z3VwdGEubmV0DQoNClNlbnQgZnJvbSBCbGFja0JlcnJ5rg==



From java-user-return-47255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 16 17:57:52 2010
Return-Path: <java-user-return-47255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73987 invoked from network); 16 Sep 2010 17:57:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Sep 2010 17:57:52 -0000
Received: (qmail 18865 invoked by uid 500); 16 Sep 2010 17:57:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18704 invoked by uid 500); 16 Sep 2010 17:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18696 invoked by uid 99); 16 Sep 2010 17:57:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 17:57:49 +0000
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 17:57:45 +0000
Received: by qyk8 with SMTP id 8so6385808qyk.14
        for <java-user@lucene.apache.org>; Thu, 16 Sep 2010 10:57:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type;
        bh=QRwyV86Nt8PHyB0rBHskOJAtiM0UybBh84GmQpsRlaY=;
        b=rifRHZ+cH30VK/tFodryY17JjiVDRgUIzZuhPi3MI9fdv+AMUC6vMShpX7bO19cldT
         N/f8g1V5yGgmO5NNzHn8K6g3SuxPLQc4g2xNCHPtxbQdUKTO5PEMNWlBek8pKNuNgOm+
         tUjYb4gExOGnWC/9S//o1VKh6a9o/wJUGqKn0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=eirdq5KtjlOBLjclHAI1q3qw7wBXXv/ui535KjDgTaXMvjEL3w47jWL9zC3PROa8ss
         GjFVE9j8ldkPYxCqFpwqL1YQJwQ/ZKzVL2zT5Tj9jiv/2sfbio6hxkvRFFZdRQuWIzvv
         +T1xQ88h9PNBx5NFdAkFrCVip3UG8Xw7MLWrY=
MIME-Version: 1.0
Received: by 10.229.37.130 with SMTP id x2mr2344287qcd.194.1284659844113; Thu,
 16 Sep 2010 10:57:24 -0700 (PDT)
Received: by 10.229.235.208 with HTTP; Thu, 16 Sep 2010 10:57:23 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1284658758220-1501269.post@n3.nabble.com>
References: <1284658758220-1501269.post@n3.nabble.com>
Date: Thu, 16 Sep 2010 19:57:23 +0200
Message-ID: <AANLkTinZ615UXnN1Zg3ZzNNsU-rmn9TEd7VoQbGaYTYj@mail.gmail.com>
Subject: Re: Problem searching in the same sentence
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hi Sirish,

see my comments inline...

On Thu, Sep 16, 2010 at 7:39 PM, Sirish Vadala <sirishreddy@gmail.com> wrote:
>
> Hello All:
>
> Can any one suggest me the best way to allow me to perform a sentence
> specific phrase search?
>
> Eg: Let the indexed text be:
>
> If you are posting a question, please try search first. Your question may
> have already been answered. Don't post repeatedly. Wait for a few days.
> People will read your post by email.
>
> Now if I search for the phrase 'post repeatedly Wait for a few', still I am
> able to retrieve the document even though they are in different sentences.
>
> Currently I am using StandardAnalyzer and this is how I am generating lucene
> documents:
>
> Field field = new Field(fieldName, validFieldValue, Field.Store.YES,
> Field.Index.ANALYZED);
> document.add(field);
>
> Is there a way to keep track of different sentences while indexing the
> content.
What you essentially need to do is you need to tell lucene where the
sentence ends are while you are indexing your text. PhraseQuery uses
positional information to retrieve phrase matches and those positional
information is created by your TokenStream (you get from the
analyzer). The TokenStream sets the PositionIncrementAttribute for
each term with an according delta between the current term and the
previous term. Yet, if you index "hello world. Here am I" the
posIncrement between "world" and "here" will be 1 since
StandardTokenizer will throw away the punctuation. what you
essentially need to do is to introduce a larger posIncrement at
sentence borders so that PhraseQuery does not consider "world" and
"here" to be a phrase.

You can either write your own Tokenizer which is the more advance
version or you can simply add multiple fields to you document one for
each sentence. If you do that you need to set the  position increment
gap which is done by subclassing Analyzer and override
Analyzer#getPositionIncrementGap() to return 100 or something like
that.
The document you need to build would then look like the following pseudocode:

doc = Document()
doc.addField(Field("foo", "hello world.",...)
doc.addField(Field("foo", "here am I", ...)

I hope that helps

simon




There are several possibilities to do what you want and maybe the
easiest would be to split you
> Any hint would be appreciated.
> Thanks.
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Problem-searching-in-the-same-sentence-tp1501269p1501269.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 16 21:40:13 2010
Return-Path: <java-user-return-47256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60470 invoked from network); 16 Sep 2010 21:40:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Sep 2010 21:40:12 -0000
Received: (qmail 17821 invoked by uid 500); 16 Sep 2010 21:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17764 invoked by uid 500); 16 Sep 2010 21:40:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17756 invoked by uid 99); 16 Sep 2010 21:40:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 21:40:10 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 21:40:02 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <176447(2)>; Thu, 16 Sep 2010 14:39:16 PDT
To: java-user@lucene.apache.org
Subject: recommended way to identify a version to pass to StandardAnalyzer constructor?
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Thu, 16 Sep 2010 14:39:16 PDT
Message-ID: <32419.1284673156@parc.com>
From: Bill Janssen <janssen@parc.com>

So, in version 3, I have to pass a version parameter to the constructor
for StandardAnalyzer.  Since Version.LUCENE_CURRENT is deprecated, I'd
like this to be the same as the version of the index I'm using.  Is
there a way of getting a value of Version for an index?  I don't see
obvious methods on IndexReader and IndexWriter.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 16 22:56:52 2010
Return-Path: <java-user-return-47257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84369 invoked from network); 16 Sep 2010 22:56:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Sep 2010 22:56:52 -0000
Received: (qmail 21650 invoked by uid 500); 16 Sep 2010 22:56:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21606 invoked by uid 500); 16 Sep 2010 22:56:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21598 invoked by uid 99); 16 Sep 2010 22:56:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 22:56:49 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of iamjabour@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 22:56:43 +0000
Received: by wwb31 with SMTP id 31so193623wwb.5
        for <java-user@lucene.apache.org>; Thu, 16 Sep 2010 15:56:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=AeXVJu0zYgV2Dz7x4qUfjG5cmC2rk9a2aiscT3aUcak=;
        b=iDxJlM1GLl2Zw5OIvorc4cNvEOtKZXtm9uEeM18foFMpubGn+5vAzeARKjY62akKPc
         7aawX3v+aFptmaOD2+OLINRyD8ph1HdUkj1/SHYKAjr9M0Stsq9eCaXVg84aZ00qJzw2
         eU6+c1q5d+CfeE0f/vbM6kcOZsgVU1C2kqJbk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ds/MFov0wpPRZs2f0byklItrlB1dc90fbh5gBUxZtyAyuVbVwVCSQc0jzt5DOcuP+M
         8D2MbyMjkfm1hqsQGHGO7NrEye1WzjKjw2gdzXR7+Ibi/HmFW9X3BwDBkn8YBss6gPcc
         zlQu+5D1T5sZqMpl45+T3oGT9ZgCDwT25UxZg=
MIME-Version: 1.0
Received: by 10.216.74.75 with SMTP id w53mr3345716wed.86.1284677783370; Thu,
 16 Sep 2010 15:56:23 -0700 (PDT)
Received: by 10.216.39.17 with HTTP; Thu, 16 Sep 2010 15:56:23 -0700 (PDT)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F796789AA@suex07-mbx-03.ad.syr.edu>
References: <AANLkTimFkYWDYWd57gHv6skcQwHNqS4qqMo4N6HqpU-K@mail.gmail.com>
	<2D127F11DC79714E9B6A43AC9458147F796789A5@suex07-mbx-03.ad.syr.edu>
	<AANLkTi=WqGRpUtdTfHyuEsS3jFkXCQK_2ciss3-9u-SD@mail.gmail.com>
	<2D127F11DC79714E9B6A43AC9458147F796789AA@suex07-mbx-03.ad.syr.edu>
Date: Thu, 16 Sep 2010 19:56:23 -0300
Message-ID: <AANLkTi=ubjfEV3iOa=+w2T5rVe2soV=AQVA2vo8u9X-6@mail.gmail.com>
Subject: Re: Hierarchical Fields
From: Iam Jabour <iamjabour@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steve and how want help,

in this direction I added boost to fields, a bit different of in
queryParser like you suggestion, but I have some quastions:

1-  If I set boost to a fields they are sum to be used like doc.boost ?
2 - If field1_boost=3D2 and field2_boost=3D1 and query match to field1 in
document 1 and to field2 in document2, document1 and document2 have
the same score (when I use multfieldquery) ?

______________
Iam Jabour




On Wed, Sep 15, 2010 at 2:03 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> Summarizing a #lucene conversation I had with Iam (aka PackageLost):
>
> -----
> Steve: How deep is your hierarchy? I ask because you may be able to have =
one field for each level in the hierarchy, and boost the levels higher the =
closer they are to the root
>
> Iam: Hum, now is ... 5-7. =A0I think 6
>
> Steve: If you have fields "level1", "level2", "level3", etc., and boost l=
evel1 highest, level2 a little lower, etc., then search against all levels
>
> Iam: But can a document have different fields? There are all fields and p=
lus those N levels fields but some documents just need 2 levels.
>
> Steve: Lucene does not require every document to have the same set of fie=
lds. doc1 could have field "A", and nothing else, and doc2 could have field=
 "B" and nothing else, both in the same index. No problem.
> -----
>
> An example: Iam's third query from below ("pop") could be expanded to the=
 following QueryParser query (assuming just one "content" field in addition=
 to the "levelX" fields):
>
> content:pop level1:pop^128 level2:pop^64 level3:pop^32 level4:pop^16 leve=
l5:pop^8 level6:pop^4 level7:pop^2
>
> This would result in doc4, doc5, doc2, which is the desired behavior.
>
> Steve
>
>
> (12:30:14 PM) sarowe:
>> -----Original Message-----
>> From: Iam Jabour [mailto:iamjabour@gmail.com]
>> Sent: Wednesday, September 15, 2010 12:22 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Hierarchical Fields
>>
>> Let's go to some example:
>>
>> 1 - Suppose I have some path tree, like:
>> - /music/
>> =A0 | - rock/
>> =A0 =A0 | - doc1 =3D "artist1 music blues ..."
>> =A0 =A0 | - doc2 =3D "artist2 music pop ..."
>> =A0 | - blues/
>> =A0 =A0 | - doc3 =3D "artist3 =A0..."
>> =A0 =A0 | - pop/
>> =A0 =A0 =A0 =A0 - doc5 =3D "artist1 ... "
>> =A0 | - pop/
>> =A0 =A0 | - =A0doc4 =3D "artist1 music rock ..."
>>
>> 2 - I created lucene documents like this example:
>> =A0field1 =3D ("path", doc1fullpath)
>> =A0field2 =3D ("value", doc1Value)
>> and do the same to all documents.
>>
>> 3 - now I going to do the search:
>> =A0 $ rock
>> I get some sort like: [doc4, doc1, doc2]
>> but I want: [doc1 | doc2] and the others [doc3 & doc4] like doc1, doc2,
>> doc4
>>
>> =A0 $ music AND blues
>> I get: doc1, doc3
>> but I want: doc3, doc1
>>
>> =A0 $ pop
>> I want: doc4 then doc5 (because the path to doc4 is smaller then doc5)
>>
>> So to do this I need:
>> 1 - change field boost
>> 2 - set priority of path, and to do that: I create N field (one field
>> to node in the path) or have some Lucene feature (but I don't know
>> how)
>>
>> Thanks.
>> ______________
>> Iam Jabour
>>
>>
>>
>>
>> On Wed, Sep 15, 2010 at 12:52 PM, Steven A Rowe <sarowe@syr.edu> wrote:
>> > Hi Iam,
>> >
>> > Can you say why you don't like the proposed solution?
>> >
>> > Also, the example of the scoring you're looking for doesn't appear to =
be
>> hierarchical in nature - can you give illustrate the relationship betwee=
n
>> the tokens in [token1, token2, token3]? =A0Also, why do you want token1 =
to
>> contribute more to the score than token2?
>> >
>> > Steve
>> >
>> >> -----Original Message-----
>> >> From: Iam Jabour [mailto:iamjabour@gmail.com]
>> >> Sent: Wednesday, September 15, 2010 9:20 AM
>> >> To: lucene-group
>> >> Subject: Hierarchical Fields
>> >>
>> >> =A0Hello, any one can help me with fields?
>> >>
>> >> I have the same problem posted in
>> >>
>> http://search.lucidimagination.com/search/out?u=3Dhttp://wiki.apache.org=
/luc
>> >> ene-java/HierarchicalFields,
>> >> but I don't like the proposed solutions. I need a order field, like [
>> >> token1, token2, token3]
>> >> If a query match with token1 the score is bigger then a match in
>> >> token2, or same thing like that.
>> >>
>> >> ______________
>> >> Iam Jabour
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 16 23:07:13 2010
Return-Path: <java-user-return-47258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90510 invoked from network); 16 Sep 2010 23:07:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Sep 2010 23:07:12 -0000
Received: (qmail 34798 invoked by uid 500); 16 Sep 2010 23:07:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34736 invoked by uid 500); 16 Sep 2010 23:07:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34728 invoked by uid 99); 16 Sep 2010 23:07:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 23:07:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Sep 2010 23:07:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id AE6BD210D0
	for <java-user@lucene.apache.org>; Thu, 16 Sep 2010 17:06:40 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id BttV7b7yqa1A for <java-user@lucene.apache.org>;
	Thu, 16 Sep 2010 17:06:38 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 037301E0D5
	for <java-user@lucene.apache.org>; Thu, 16 Sep 2010 17:06:38 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB55F3.D1000D45"
x-cr-hashedpuzzle: AVCN A1Oo BB+d CE7v CWzG Cbdr EDGB EZJp E0Ut FfwH F+0r Gu/i KKlK KVmJ KkWx LeMg;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{365D4E0E-9C52-439E-848C-F092562D094A};cwBzAG0AaQB0AGgAQABtAGEAaQBuAHMAdAByAGUAYQBtAGQAYQB0AGEALgBjAG8AbQA=;Thu, 16 Sep 2010 23:06:35 GMT;UQB1AGUAcgB5AFAAYQByAHMAZQByACAAaQBuACAAMwAuAHgA
x-cr-puzzleid: {365D4E0E-9C52-439E-848C-F092562D094A}
Content-class: urn:content-classes:message
Subject: QueryParser in 3.x
Date: Thu, 16 Sep 2010 17:06:35 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB4078A5F82@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser in 3.x
Thread-Index: ActV88+E3MLJ9H5VQlGpdUg1WCj7jg==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CB55F3.D1000D45
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I recently upgraded to Lucene 3.0 and am seeing some new behavior that I =
don't understand.  Perhaps someone can explain why.

=20

I have a custom analyzer.  Part of the analyzer uses the =
AsciiFoldingFilter.  If I run a word with an umlaut through that =
analyzer using the AnalyzerDemo code in LIA2, as expected, I get the =
same word except that the umlauted letter is now a simple ascii letter =
(no umlaut).  That's what I would expect and want.

=20

If I create a Queryparser using the call "new QueryParser(LUCENE_30, =
"body", myAnalyzer) and then call the parse() method passing the same =
word, I can see that the query parser has not removed the umlaut.  The =
string it has is "+body: Europab=F6rsen". =20

=20

I know I had to make a number of changes to the analyzer and the =
tokenizer to upgrade to 3.x.  Is there something very different from the =
2.x version that I'm likely missing.

=20

Anyone have any thoughts?

=20

=20


------_=_NextPart_001_01CB55F3.D1000D45--

From java-user-return-47259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 02:39:39 2010
Return-Path: <java-user-return-47259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51183 invoked from network); 17 Sep 2010 02:39:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 02:39:39 -0000
Received: (qmail 51804 invoked by uid 500); 17 Sep 2010 02:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51433 invoked by uid 500); 17 Sep 2010 02:39:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51425 invoked by uid 99); 17 Sep 2010 02:39:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 02:39:35 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 02:39:27 +0000
Received: by pxi3 with SMTP id 3so843970pxi.35
        for <java-user@lucene.apache.org>; Thu, 16 Sep 2010 19:39:04 -0700 (PDT)
Received: by 10.143.2.11 with SMTP id e11mr2554391wfi.24.1284691143910;
        Thu, 16 Sep 2010 19:39:03 -0700 (PDT)
Received: from [10.0.1.90] (203-114-161-15.wir.sta.inspire.net.nz [203.114.161.15])
        by mx.google.com with ESMTPS id o9sm1376118wfd.4.2010.09.16.19.39.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 16 Sep 2010 19:39:02 -0700 (PDT)
Subject: Filtering times stored as longs in HEX
From: Todd Nine <todd@spidertracks.co.nz>
Reply-To: todd@spidertracks.co.nz
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary="=-QMvpci+NPyIDvbBLNVqB"
Organization: Spidertracks
Date: Fri, 17 Sep 2010 14:39:01 +1200
Message-ID: <1284691141.30500.28.camel@greenlantern.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.28.3 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-QMvpci+NPyIDvbBLNVqB
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 7bit

Hi all,
  I'm using Lucandra to index notes in our system.  Since we can't use
numeric fields due to a bug in Cassandra (fixed in 0.7), I'm encoding
all times a epoch in Hex, then storing the hex string.  I have the
following fields on my document.

createdDate
phoneNumber
email


I want to perform a query where the input is either a phone number, or
an email.  The user also passes in an epoch timestamp (long in
milliseconds), and the count.  I need to return all documents with a
timestamp <= the given timestamp, and the maximum count.  I'm having
some trouble building this query in my code.  I never get any results,
but I can see the data is written to the index properly.  Here is my
code.

http://pastie.org/private/xzvnntmyjzxgpjgctxftrq



Thanks,
Todd





--=-QMvpci+NPyIDvbBLNVqB--


From java-user-return-47260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 07:03:19 2010
Return-Path: <java-user-return-47260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30551 invoked from network); 17 Sep 2010 07:03:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 07:03:19 -0000
Received: (qmail 75216 invoked by uid 500); 17 Sep 2010 07:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74731 invoked by uid 500); 17 Sep 2010 07:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74723 invoked by uid 99); 17 Sep 2010 07:03:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 07:03:10 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 07:03:05 +0000
Received: by qyk2 with SMTP id 2so2669309qyk.14
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 00:02:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=IUFYx60CoETnbCI3t0BIIy0u7SyhyxyLRnxY5Y/6Z5Y=;
        b=VVpgeWGYpmz6AFInEn2Rsk1mxzQ+Pv+tSsJMmCgaCLTLkVfstNJx9Hkt9hwHa73umX
         0X5I5dsUky/4IYSHWktir2v79DLIAxnVfrjzrj4lowkzj00yJE5jZCKuLgqx5rRdruru
         XLbEN8oF+3n4ojLhSlVLkQcLf+Fel4Kg5qHQc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=fqe9NfU4r1evOOVNPe8BTGRcq1myMqEh4pWhPl9aZyreUcJDsLPzWWdGXeRKqPamvd
         higTSjjuDHMhU6a8fBVAtLUlXrnfG/QUOVKIpZw9Dm7u+Gbj11xY8BqXHoc/b0mi0Voz
         O1dqXNnzhwg/8a39kJOESeSO3gikSTSHI27UI=
MIME-Version: 1.0
Received: by 10.229.37.147 with SMTP id x19mr2780909qcd.187.1284706963954;
 Fri, 17 Sep 2010 00:02:43 -0700 (PDT)
Received: by 10.229.235.208 with HTTP; Fri, 17 Sep 2010 00:02:43 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB4078A5F82@exchange.slc.mainstreamdata.com>
References: <55F9EF953014514EB6BEE1F5198CEEB4078A5F82@exchange.slc.mainstreamdata.com>
Date: Fri, 17 Sep 2010 09:02:43 +0200
Message-ID: <AANLkTimxnNmgMVqkYQwPLp-Ri_hTs-7=coKEAc68nK9Z@mail.gmail.com>
Subject: Re: QueryParser in 3.x
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Fri, Sep 17, 2010 at 1:06 AM, Scott Smith <ssmith@mainstreamdata.com> wr=
ote:
> I recently upgraded to Lucene 3.0 and am seeing some new behavior that I =
don't understand. =C2=A0Perhaps someone can explain why.
>
>
>
> I have a custom analyzer. =C2=A0Part of the analyzer uses the AsciiFoldin=
gFilter. =C2=A0If I run a word with an umlaut through that analyzer using t=
he AnalyzerDemo code in LIA2, as expected, I get the same word except that =
the umlauted letter is now a simple ascii letter (no umlaut). =C2=A0That's =
what I would expect and want.
>
>
>
> If I create a Queryparser using the call "new QueryParser(LUCENE_30, "bod=
y", myAnalyzer) and then call the parse() method passing the same word, I c=
an see that the query parser has not removed the umlaut. =C2=A0The string i=
t has is "+body: Europab=C3=B6rsen".
>
This seems to be an issue with your analyzer rather than with the
QueryParser. Since QueryParser didn't really change its behavior in
3.0 except of some default values. Can you provide more info what you
did with your analyzer? Did you try running the term with umlaut chars
through your Analyzer / Tokenstream directly? Something like that:

Analyzer a =3D new MyAnalyzer();
TokenStream stream =3D a.reusableTokenStream("body", new
StringReader("Europab=C3=B6rsen"));
TermAttribute attr =3D stream.addAttribute(TermAttribute.class);
while(stream.incrementToken())
  System.out.println(attr.term());

simon
>
>
> I know I had to make a number of changes to the analyzer and the tokenize=
r to upgrade to 3.x. =C2=A0Is there something very different from the 2.x v=
ersion that I'm likely missing.
>
>
>
> Anyone have any thoughts?
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 07:16:10 2010
Return-Path: <java-user-return-47261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37108 invoked from network); 17 Sep 2010 07:16:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 07:16:10 -0000
Received: (qmail 96013 invoked by uid 500); 17 Sep 2010 07:16:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95635 invoked by uid 500); 17 Sep 2010 07:16:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95626 invoked by uid 99); 17 Sep 2010 07:16:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 07:16:02 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 07:15:58 +0000
Received: by qyk2 with SMTP id 2so2684243qyk.14
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 00:15:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=VaHyyl9mBZUSitpgqx0DRZtJlUPTMZl/LAIZ5DxcQYY=;
        b=n6wNtUkShTsu86xFjf8Xv8J7lyP7/wezNVjgehbLfWfyxpgpXOnV9u+SosvxoXlhlJ
         5RJ6hnt4AUgGFw8FZT/LdSVNG3reCtAk6mFm8uacl6M4XA5dx6rHcl6ATVuwXWJPFwnN
         o0/X1WGVAnyJiufIN/2wX/dD1KPAexcMa4INU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=lSrasRHDpPcov32K+3M83mRi3lwPX+j/ANG9Hy54YqNSBhnvtFkGSFJVBX+SUPvIli
         CR6TWfYbfm9ASWMRGwweNwo5qSkVo+kF+0TOw6micDxGQimLR/LZNrVPKDy6s8MyWPKB
         L8Oygtq4xDZDco9Mw6Y8zIz20kKTCXCV1ig7c=
MIME-Version: 1.0
Received: by 10.229.37.83 with SMTP id w19mr2935227qcd.185.1284707737665; Fri,
 17 Sep 2010 00:15:37 -0700 (PDT)
Received: by 10.229.235.208 with HTTP; Fri, 17 Sep 2010 00:15:37 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <32419.1284673156@parc.com>
References: <32419.1284673156@parc.com>
Date: Fri, 17 Sep 2010 09:15:37 +0200
Message-ID: <AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com>
Subject: Re: recommended way to identify a version to pass to StandardAnalyzer constructor?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hey Bill,
let me clarify what Version is used for since I think that caused
little confusion. The Version constant was mainly introduced to help
users with backwards compatibility and upgrading their codebase to a
new version of lucene without breaking existing applications / indexes
build with previous versions. For instance StandardAnalyzer preserves
the positionIncrement in its StopFilter which was introduces in Lucene
2.9. If you use 2.4 and upgrade to 2.9 this change might break you app
since you indexed with a 2.4 behavior. You phrasequeries might not
work as expected anymore. If you don't have any upgrade issues or if
you can simply reindex you might just use the latest version. Some
usecases might require somewhat "buggy" behavior which has been fixed
in various places in lucene but must be maintained because of
backwards compatibility this is also done by Version.
If a certain class like IndexWriter / IndexReader have maintained
compatibility without a Version constant so there is no need to pass
it to them. You will be implicitly on the latest version.

Btw. you can also mix version as you like.

hope that helps

On Thu, Sep 16, 2010 at 11:39 PM, Bill Janssen <janssen@parc.com> wrote:
> So, in version 3, I have to pass a version parameter to the constructor
> for StandardAnalyzer. =C2=A0Since Version.LUCENE_CURRENT is deprecated, I=
'd
> like this to be the same as the version of the index I'm using. =C2=A0Is
> there a way of getting a value of Version for an index? =C2=A0I don't see
> obvious methods on IndexReader and IndexWriter.
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 08:37:50 2010
Return-Path: <java-user-return-47262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59797 invoked from network); 17 Sep 2010 08:37:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 08:37:50 -0000
Received: (qmail 82661 invoked by uid 500); 17 Sep 2010 08:37:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82307 invoked by uid 500); 17 Sep 2010 08:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82290 invoked by uid 99); 17 Sep 2010 08:37:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 08:37:42 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 08:37:38 +0000
Received: by qyk8 with SMTP id 8so727222qyk.14
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 01:37:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=/FjTipjE1XYtq0YbVuxfF+d7vpklHc2m/cz8b2biGQI=;
        b=rnygc8ULr2tIgUfWuuVUEBFcntHbuUwfaU0Ca+WRs7s2l6JmJzWtMMqWMpNUeH02w3
         tkF61/bR4yEO1wdQcL9uWG5ZEiiFH7qwFXjaErAyz8t4PNL891sTcrwpI4gzxntOu5GL
         s5kwC67uf3szB1LQr9RxMrZj622YkDkPE2csM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Qh6M+C4eSajsvRLaR2Hu/JqsYF9GqIE+D6R/Av6sJlOP7EKs6ZdUsF1ocdrWMT2J8Y
         sJcP+mCqyJ6txdm2IH7eLQ+E301j049qtou4hoGNvazkep3RWBqq5LlOargJLtjL0xQT
         swo6C8qXDtIUgaH+0E7Ugjtu0SYbC/hs2naOw=
Received: by 10.224.28.77 with SMTP id l13mr3082028qac.222.1284712637154; Fri,
 17 Sep 2010 01:37:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.196 with HTTP; Fri, 17 Sep 2010 01:36:55 -0700 (PDT)
In-Reply-To: <1284691141.30500.28.camel@greenlantern.local>
References: <1284691141.30500.28.camel@greenlantern.local>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 17 Sep 2010 09:36:55 +0100
Message-ID: <AANLkTimKP+Ha74zB0C5YtpJT11TvCC-firvwqXfjLc8r@mail.gmail.com>
Subject: Re: Filtering times stored as longs in HEX
To: java-user@lucene.apache.org, todd@spidertracks.co.nz
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

>From a quick look your code looks fine, but there are various possible
reasons why you might not be getting the results you expect.
http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hits_.2BAC=
8_incorrect_hits.3F

Are the email and phone numbers stored as is, or analyzed?  Does it
work if you remove the date filter?  Are the hex encoded strings the
same length and in the right sequence?

Posting a complete standalone test case or program, as small as you
can make it while demonstrating the problem, can make it easier for
people to spot problems.


--
Ian.


On Fri, Sep 17, 2010 at 3:39 AM, Todd Nine <todd@spidertracks.co.nz> wrote:
> Hi all,
> =A0I'm using Lucandra to index notes in our system. =A0Since we can't use
> numeric fields due to a bug in Cassandra (fixed in 0.7), I'm encoding
> all times a epoch in Hex, then storing the hex string. =A0I have the
> following fields on my document.
>
> createdDate
> phoneNumber
> email
>
>
> I want to perform a query where the input is either a phone number, or
> an email. =A0The user also passes in an epoch timestamp (long in
> milliseconds), and the count. =A0I need to return all documents with a
> timestamp <=3D the given timestamp, and the maximum count. =A0I'm having
> some trouble building this query in my code. =A0I never get any results,
> but I can see the data is written to the index properly. =A0Here is my
> code.
>
> http://pastie.org/private/xzvnntmyjzxgpjgctxftrq
>
>
>
> Thanks,
> Todd
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 17:10:06 2010
Return-Path: <java-user-return-47263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27725 invoked from network); 17 Sep 2010 17:10:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 17:10:06 -0000
Received: (qmail 80951 invoked by uid 500); 17 Sep 2010 17:10:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80825 invoked by uid 500); 17 Sep 2010 17:10:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80816 invoked by uid 99); 17 Sep 2010 17:10:02 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 17:10:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cogross@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 17:09:40 +0000
Received: by gwb17 with SMTP id 17so1207789gwb.35
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 10:09:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=o7qHuqBbp2d7axnOxGTwqmMxmp1oIYw7RWsg/eCSYbE=;
        b=dVncDcaxhhp7O72fXjbXKl/pyvKUmgHk6Bo1tWqqhzkMHBtl892j5zNTjHlOaYF+Fs
         CHEa8bwUVi+o16BQ49jnowmFvBX5XW5cywUmjmC0amW99fepc/jIx+wuy/SVkm6PJKnv
         EOF3bEm1StUwbJy5ihf8xKP5FxgNAfhhxURY8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=hL9WPomCd7POzQNDuSsEC+BiVb8gDfxNgtHt9QxsxElwPmWFDbY62qNQxeIVJOUfZY
         LlqQDOBoA2tCZn30vMJdamY+YBl2qTe2PAd7VsBkSLbk7667J9Fb6LDbbNjUkYp4uVD3
         ZbV43KZfoDYfTw2lAdklAahaG1eWoRshXRMyk=
Received: by 10.150.195.9 with SMTP id s9mr5655840ybf.419.1284743359293; Fri,
 17 Sep 2010 10:09:19 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.141.3 with HTTP; Fri, 17 Sep 2010 10:08:59 -0700 (PDT)
From: Christopher Gross <cogross@gmail.com>
Date: Fri, 17 Sep 2010 13:08:59 -0400
Message-ID: <AANLkTinSYM1yiQN_4Fh_01C_+81BaazxjPnxqcHJmEJd@mail.gmail.com>
Subject: Connection question
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I'm trying to connect to a Lucene index on a test server.  All of the
examples that I've found use a local directory to connect into the
Lucene index, but I can't find one that will remotely hook into it.

Can someone please point me in the right direction?  I'm fairly
certain that someone has run into and fixed this problem, but I
haven't been able to find a way to do it.

Thanks for your help!

-- Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 17:34:49 2010
Return-Path: <java-user-return-47264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42197 invoked from network); 17 Sep 2010 17:34:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 17:34:49 -0000
Received: (qmail 16157 invoked by uid 500); 17 Sep 2010 17:34:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16050 invoked by uid 500); 17 Sep 2010 17:34:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16035 invoked by uid 99); 17 Sep 2010 17:34:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 17:34:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 17:34:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 2854920068;
	Fri, 17 Sep 2010 11:34:18 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ZCYPdbSxj3CY; Fri, 17 Sep 2010 11:34:16 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 45AA21D06C;
	Fri, 17 Sep 2010 11:34:16 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: QueryParser in 3.x
Date: Fri, 17 Sep 2010 11:34:15 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB4078A60A7@exchange.slc.mainstreamdata.com>
In-Reply-To: <AANLkTimxnNmgMVqkYQwPLp-Ri_hTs-7=coKEAc68nK9Z@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser in 3.x
Thread-Index: ActWNmjZ7aaSAEwfQgmePFa7ca275gASmJZQ
References: <55F9EF953014514EB6BEE1F5198CEEB4078A5F82@exchange.slc.mainstreamdata.com> <AANLkTimxnNmgMVqkYQwPLp-Ri_hTs-7=coKEAc68nK9Z@mail.gmail.com>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>,
	<simon.willnauer@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Rmlyc3QsIGxldCBtZSBzYXkgdGhhdCBJIGRpZG4ndCB0aGluayB0aGUgcHJvYmxlbSB3YXMgaW4g
UXVlcnlQYXJzZXIgYW5kIEkgYXBvbG9naXplIGlmIHRoYXQncyBob3cgaXQgc291bmRlZC4gIFF1
ZXJ5UGFyc2VyIGlzIGEgY2VudHJhbCBtZXRob2QgdG8gTHVjZW5lLiAgMSBvZiBtZSBoYXZpbmcg
cHJvYmxlbXMgd2l0aCBRdWVyeVBhcnNlciwgMTAwMCdzIG9mIG90aGVycyBub3QuICBJcyB0aGUg
cHJvYmxlbSBtb3JlIGxpa2VseSBpbiBteSBjb2RlIG9yIGx1Y2VuZS4gIFdlJ2xsIGFsbCBhZ3Jl
ZSBvbiB0aGUgYW5zd2VyIHRvIHRoYXQgcXVlc3Rpb24uDQoNCkFzIGZ1cnRoZXIgcHJvb2YsIEkg
cmFuIHRoZSBmb2xsb3dpbmcgY29kZS4gIFRoZSBmaXJzdCBwYXJ0IGlzIGZyb20gU2ltb24ncyBl
bWFpbCAodGhhbmtzIGZvciB0aGF0IHNuaXBwZXQpIGFuZCB0aGUgc2Vjb25kIHBhcnQgaXMgZnJv
bSBMSUEyLg0KDQogICAgICAgIC8vIGNvZGUgZnJvbSBXaWxsbmF1ZXIgZW1haWwNCiAgICAgICAg
QW5hbHl6ZXIgYSA9IG5ldyBNeUFuYWx5emVyKFZlcnNpb24uTFVDRU5FXzMwKTsNCiAgICAgICAg
VG9rZW5TdHJlYW0gc3RyZWFtID0gYS5yZXVzYWJsZVRva2VuU3RyZWFtKCJib2R5IiwgbmV3IFN0
cmluZ1JlYWRlcigiRXVyb3BhYsO2cnNlbiIpKTsgDQogICAgICAgIFRlcm1BdHRyaWJ1dGUgYXR0
ciA9IHN0cmVhbS5hZGRBdHRyaWJ1dGUoVGVybUF0dHJpYnV0ZS5jbGFzcyk7DQogICAgICAgIHdo
aWxlKHN0cmVhbS5pbmNyZW1lbnRUb2tlbigpKQ0KICAgICAgICB7DQogICAgICAgICAgU3lzdGVt
Lm91dC5wcmludGxuKGF0dHIudGVybSgpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGNvZGUg
ZnJvbSBMSUEyDQogICAgICAgIHN0cmVhbSA9IGEudG9rZW5TdHJlYW0oImJvZHkiLCBuZXcgU3Ry
aW5nUmVhZGVyKCJFdXJvcGFiw7Zyc2VuIikpOw0KICAgICAgICBUZXJtQXR0cmlidXRlIHRlcm0g
PSBzdHJlYW0uYWRkQXR0cmlidXRlKFRlcm1BdHRyaWJ1dGUuY2xhc3MpOw0KICAgICAgICB3aGls
ZSAoc3RyZWFtLmluY3JlbWVudFRva2VuKCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFN5c3Rl
bS5vdXQucHJpbnQodGVybS50ZXJtKCkpOw0KICAgICAgICB9DQoNCg0KVGhlIGFuc3dlciBJIGdv
dCBiYWNrIHdhczoNCmV1cm9wYWLDtnJzZW4NCmV1cm9wYWJvcnNlbg0KDQpJIHJlYWxpemVkIHRo
ZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlc2UgdHdvIHdhcyB3aGV0aGVyIEkgd2FzIGdldHRpbmcg
dGhlIHJldXNhYmxlVG9rZVN0cmVhbSBvciB0aGUgdG9rZW5TdHJlYW0uICBJbiBsb29raW5nIGF0
IG15IGNvZGUsIHRoZSBBU0NJSUZvbGRpbmdGaWx0ZXIgd2FzIG5vdCBpbiB0aGUgZmlsdGVyIHNl
dHVwIGZvciB0aGUgcmVzdXNhYmxlVG9rZW5TdHJlYW0oKS4gIEl0IHdhcyBmb3IgdGhlIHRva2Vu
U3RyZWFtKCkuICBJIGFkZGVkIGl0IHRvIHRoZSByZXVzYWJsZVRva2VuU3RyZWFtIGFuZCBJIG5v
dyBnZXQgdGhlIHJlc3VsdCBJIHdhbnRlZC4gIFRoZSBhYm92ZSBjb2RlIHNuaXBwZXQgZ2VuZXJh
dGVzIHRoZSB3b3JkIHdpdGhvdXQgdGhlIHVtbGF1dCBpbiBib3RoIGNhc2VzLiAgU28sIHByb2Js
ZW0gc29sdmVkLg0KDQpUaGFua3MgdG8gU2ltb24gZm9yIHB1dHRpbmcgb24gdGhlIHJpZ2h0IHRy
YWNrLg0KDQpTY290dA0KDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBTaW1v
biBXaWxsbmF1ZXIgW21haWx0bzpzaW1vbi53aWxsbmF1ZXJAZ29vZ2xlbWFpbC5jb21dIA0KU2Vu
dDogRnJpZGF5LCBTZXB0ZW1iZXIgMTcsIDIwMTAgMTowMyBBTQ0KVG86IGphdmEtdXNlckBsdWNl
bmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IFF1ZXJ5UGFyc2VyIGluIDMueA0KDQpPbiBGcmks
IFNlcCAxNywgMjAxMCBhdCAxOjA2IEFNLCBTY290dCBTbWl0aCA8c3NtaXRoQG1haW5zdHJlYW1k
YXRhLmNvbT4gd3JvdGU6DQo+IEkgcmVjZW50bHkgdXBncmFkZWQgdG8gTHVjZW5lIDMuMCBhbmQg
YW0gc2VlaW5nIHNvbWUgbmV3IGJlaGF2aW9yIHRoYXQgSSBkb24ndCB1bmRlcnN0YW5kLiDCoFBl
cmhhcHMgc29tZW9uZSBjYW4gZXhwbGFpbiB3aHkuDQo+DQo+DQo+DQo+IEkgaGF2ZSBhIGN1c3Rv
bSBhbmFseXplci4gwqBQYXJ0IG9mIHRoZSBhbmFseXplciB1c2VzIHRoZSBBc2NpaUZvbGRpbmdG
aWx0ZXIuIMKgSWYgSSBydW4gYSB3b3JkIHdpdGggYW4gdW1sYXV0IHRocm91Z2ggdGhhdCBhbmFs
eXplciB1c2luZyB0aGUgQW5hbHl6ZXJEZW1vIGNvZGUgaW4gTElBMiwgYXMgZXhwZWN0ZWQsIEkg
Z2V0IHRoZSBzYW1lIHdvcmQgZXhjZXB0IHRoYXQgdGhlIHVtbGF1dGVkIGxldHRlciBpcyBub3cg
YSBzaW1wbGUgYXNjaWkgbGV0dGVyIChubyB1bWxhdXQpLiDCoFRoYXQncyB3aGF0IEkgd291bGQg
ZXhwZWN0IGFuZCB3YW50Lg0KPg0KPg0KPg0KPiBJZiBJIGNyZWF0ZSBhIFF1ZXJ5cGFyc2VyIHVz
aW5nIHRoZSBjYWxsICJuZXcgUXVlcnlQYXJzZXIoTFVDRU5FXzMwLCAiYm9keSIsIG15QW5hbHl6
ZXIpIGFuZCB0aGVuIGNhbGwgdGhlIHBhcnNlKCkgbWV0aG9kIHBhc3NpbmcgdGhlIHNhbWUgd29y
ZCwgSSBjYW4gc2VlIHRoYXQgdGhlIHF1ZXJ5IHBhcnNlciBoYXMgbm90IHJlbW92ZWQgdGhlIHVt
bGF1dC4gwqBUaGUgc3RyaW5nIGl0IGhhcyBpcyAiK2JvZHk6IEV1cm9wYWLDtnJzZW4iLg0KPg0K
VGhpcyBzZWVtcyB0byBiZSBhbiBpc3N1ZSB3aXRoIHlvdXIgYW5hbHl6ZXIgcmF0aGVyIHRoYW4g
d2l0aCB0aGUNClF1ZXJ5UGFyc2VyLiBTaW5jZSBRdWVyeVBhcnNlciBkaWRuJ3QgcmVhbGx5IGNo
YW5nZSBpdHMgYmVoYXZpb3IgaW4NCjMuMCBleGNlcHQgb2Ygc29tZSBkZWZhdWx0IHZhbHVlcy4g
Q2FuIHlvdSBwcm92aWRlIG1vcmUgaW5mbyB3aGF0IHlvdQ0KZGlkIHdpdGggeW91ciBhbmFseXpl
cj8gRGlkIHlvdSB0cnkgcnVubmluZyB0aGUgdGVybSB3aXRoIHVtbGF1dCBjaGFycw0KdGhyb3Vn
aCB5b3VyIEFuYWx5emVyIC8gVG9rZW5zdHJlYW0gZGlyZWN0bHk/IFNvbWV0aGluZyBsaWtlIHRo
YXQ6DQoNCkFuYWx5emVyIGEgPSBuZXcgTXlBbmFseXplcigpOw0KVG9rZW5TdHJlYW0gc3RyZWFt
ID0gYS5yZXVzYWJsZVRva2VuU3RyZWFtKCJib2R5IiwgbmV3DQpTdHJpbmdSZWFkZXIoIkV1cm9w
YWLDtnJzZW4iKSk7DQpUZXJtQXR0cmlidXRlIGF0dHIgPSBzdHJlYW0uYWRkQXR0cmlidXRlKFRl
cm1BdHRyaWJ1dGUuY2xhc3MpOw0Kd2hpbGUoc3RyZWFtLmluY3JlbWVudFRva2VuKCkpDQogIFN5
c3RlbS5vdXQucHJpbnRsbihhdHRyLnRlcm0oKSk7DQoNCnNpbW9uDQo+DQo+DQo+IEkga25vdyBJ
IGhhZCB0byBtYWtlIGEgbnVtYmVyIG9mIGNoYW5nZXMgdG8gdGhlIGFuYWx5emVyIGFuZCB0aGUg
dG9rZW5pemVyIHRvIHVwZ3JhZGUgdG8gMy54LiDCoElzIHRoZXJlIHNvbWV0aGluZyB2ZXJ5IGRp
ZmZlcmVudCBmcm9tIHRoZSAyLnggdmVyc2lvbiB0aGF0IEknbSBsaWtlbHkgbWlzc2luZy4NCj4N
Cj4NCj4NCj4gQW55b25lIGhhdmUgYW55IHRob3VnaHRzPw0KPg0KPg0KPg0KPg0KPg0KPg0KDQot
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-47265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 18:16:06 2010
Return-Path: <java-user-return-47265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60702 invoked from network); 17 Sep 2010 18:16:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 18:16:06 -0000
Received: (qmail 1921 invoked by uid 500); 17 Sep 2010 18:16:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1850 invoked by uid 500); 17 Sep 2010 18:16:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1842 invoked by uid 99); 17 Sep 2010 18:16:03 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 18:16:03 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 18:15:41 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <176888(1)>; Fri, 17 Sep 2010 11:14:49 PDT
To: java-user@lucene.apache.org
Subject: Re: recommended way to identify a version to pass to StandardAnalyzer constructor?
In-reply-to: <AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com>
References: <32419.1284673156@parc.com> <AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com>
Comments: In-reply-to Simon Willnauer <simon.willnauer@googlemail.com>
    message dated "Fri, 17 Sep 2010 00:15:37 -0700."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Fri, 17 Sep 2010 11:14:48 PDT
Message-ID: <16477.1284747288@parc.com>
From: Bill Janssen <janssen@parc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Simon Willnauer <simon.willnauer@googlemail.com> wrote:

> Hey Bill,
> let me clarify what Version is used for since I think that caused
> little confusion.

Thanks.

> The Version constant was mainly introduced to help
> users with backwards compatibility and upgrading their codebase to a
> new version of lucene without breaking existing applications / indexes
> build with previous versions. For instance StandardAnalyzer preserves
> the positionIncrement in its StopFilter which was introduces in Lucene
> 2.9. If you use 2.4 and upgrade to 2.9 this change might break you app
> since you indexed with a 2.4 behavior. You phrasequeries might not
> work as expected anymore. If you don't have any upgrade issues or if
> you can simply reindex you might just use the latest version.

That's what I'm trying to do.  But how?  LUCENE_CURRENT is deprecated!

How about adding a constructor for StandardAnalyzer that takes no
parameters and is implicitly LUCENE_CURRENT?

> Some usecases might require somewhat "buggy" behavior which has been
> fixed in various places in lucene but must be maintained because of
> backwards compatibility this is also done by Version.

Sure.

> If a certain
> class like IndexWriter / IndexReader have maintained compatibility
> without a Version constant so there is no need to pass it to them. You
> will be implicitly on the latest version.

Good.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 19:03:30 2010
Return-Path: <java-user-return-47266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81701 invoked from network); 17 Sep 2010 19:03:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 19:03:29 -0000
Received: (qmail 52979 invoked by uid 500); 17 Sep 2010 19:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52930 invoked by uid 500); 17 Sep 2010 19:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52920 invoked by uid 99); 17 Sep 2010 19:03:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 19:03:26 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 19:03:20 +0000
Received: by qyk8 with SMTP id 8so1429261qyk.14
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 12:02:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=ADFt68gsZw9DHeJWgZ1klKlVQmCAuZor1KW/1Q9OECc=;
        b=IU9ttFsRxq5u13WOwFOYVmQlsg9iGqeAoC7FyaHCRACdoLLekYml2dnkMtW0i2dH15
         qvJAAA5fJSSD3NxdSgnMbkU2CAnhHJ6voOOzOiW1xAmQC31hc8BrD5LTKUC7IEyq40NP
         WmZcwdR6QoV6Q6Q32AZquty+uqXxHulFCIblM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=f2cNoFM26OOHY5eRzrqpTgwbVzvjQMhuZY9Ghr/IuJjrE4AI0W7s9SJhscLOPnyXqA
         c/QdygLRabm5fOT8b2H1F+Gk48AeWM7rMoMzxKGijbeBYgEzRX4DHDrOTvuu7x+tZuEK
         HBMc5iSLax4PKMOfDpNMWIMSq3Ju6HuWqmM1Q=
Received: by 10.224.44.4 with SMTP id y4mr3644386qae.376.1284750179313; Fri,
 17 Sep 2010 12:02:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.196 with HTTP; Fri, 17 Sep 2010 12:02:38 -0700 (PDT)
In-Reply-To: <AANLkTinSYM1yiQN_4Fh_01C_+81BaazxjPnxqcHJmEJd@mail.gmail.com>
References: <AANLkTinSYM1yiQN_4Fh_01C_+81BaazxjPnxqcHJmEJd@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 17 Sep 2010 20:02:38 +0100
Message-ID: <AANLkTinLF_ODqKQ3wBDG_1wbgPSytsOYvTHgcxDDKnkz@mail.gmail.com>
Subject: Re: Connection question
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Are you asking about network connections?  There is no networking
built into lucene.  There is in solr, and lucene can use directories
on networked file systems.


--
Ian.


On Fri, Sep 17, 2010 at 6:08 PM, Christopher Gross <cogross@gmail.com> wrot=
e:
> I'm trying to connect to a Lucene index on a test server. =A0All of the
> examples that I've found use a local directory to connect into the
> Lucene index, but I can't find one that will remotely hook into it.
>
> Can someone please point me in the right direction? =A0I'm fairly
> certain that someone has run into and fixed this problem, but I
> haven't been able to find a way to do it.
>
> Thanks for your help!
>
> -- Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 19:08:41 2010
Return-Path: <java-user-return-47267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88054 invoked from network); 17 Sep 2010 19:08:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 19:08:40 -0000
Received: (qmail 65177 invoked by uid 500); 17 Sep 2010 19:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65126 invoked by uid 500); 17 Sep 2010 19:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65118 invoked by uid 99); 17 Sep 2010 19:08:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 19:08:37 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 19:08:33 +0000
Received: by qyk8 with SMTP id 8so1434515qyk.14
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 12:08:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=07AG5O5mJJJw09ciDkzy1m3e8jhbt5yB7SgtHrZ7LNA=;
        b=cHOjuMmNEYxZyP/9v9gTe9TahnNnSuo9gqCkKywhGZgOriZmNCE5h0QgjNTCdVxdxX
         Uzr+0OflTGoMTvj6fBJtlaLJ/IRUsyOnvvgscVericaR0dbblZ6jl6C7P3qPrT7375kl
         M3qddKsKPcex6U5gAMXLAqEgZ3JB41EXnVplI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=evMjjjUDsxCqd6oPOCsozL14/iVqYweElYilwXnGf8UZqpafmd3rS/X1TGmJRUl/J7
         tiMF7W3fE03RFtQCq7cNJSXYQpfYov3n8EgSwziAYCYLrKzxzPguWr8XVQhMLsWFHXbR
         DnH1tmELsmalpVvIje01iqHsqivXULGzbRtVw=
MIME-Version: 1.0
Received: by 10.229.214.13 with SMTP id gy13mr3816542qcb.155.1284750492523;
 Fri, 17 Sep 2010 12:08:12 -0700 (PDT)
Received: by 10.229.235.208 with HTTP; Fri, 17 Sep 2010 12:08:12 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <16477.1284747288@parc.com>
References: <32419.1284673156@parc.com>
	<AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com>
	<16477.1284747288@parc.com>
Date: Fri, 17 Sep 2010 21:08:12 +0200
Message-ID: <AANLkTinHYLEMfm2FyoWpN5kQAgiyJqoT5F+-JcmmBf9u@mail.gmail.com>
Subject: Re: recommended way to identify a version to pass to StandardAnalyzer constructor?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Fri, Sep 17, 2010 at 8:14 PM, Bill Janssen <janssen@parc.com> wrote:
> Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
>> Hey Bill,
>> let me clarify what Version is used for since I think that caused
>> little confusion.
>
> Thanks.
>
>> The Version constant was mainly introduced to help
>> users with backwards compatibility and upgrading their codebase to a
>> new version of lucene without breaking existing applications / indexes
>> build with previous versions. For instance StandardAnalyzer preserves
>> the positionIncrement in its StopFilter which was introduces in Lucene
>> 2.9. If you use 2.4 and upgrade to 2.9 this change might break you app
>> since you indexed with a 2.4 behavior. You phrasequeries might not
>> work as expected anymore. If you don't have any upgrade issues or if
>> you can simply reindex you might just use the latest version.
>
> That's what I'm trying to do. =C2=A0But how? =C2=A0LUCENE_CURRENT is depr=
ecated!
>
> How about adding a constructor for StandardAnalyzer that takes no
> parameters and is implicitly LUCENE_CURRENT?

We deprecated LUCENE_CURRENT for a good reason that is that folks will
run into big trouble if they upgrade from X to X+n because behavior
may change dramatically due to optimizations, bug fixes and useful
features. If you blindly pass LUCENE_CURRENT you might end up with
incompatible APIs in some cases (we do deploy "sophisticated backwards
layers" like we did in CharTokenizer) or query analysis which will not
work with you existing Version X index.

What you should do is pick YOUR latest version manually and go through
the changes once you upgrade. Write unittests for you API to make sure
it does not break you code. Its worth the trouble!

simon
>
>> Some usecases might require somewhat "buggy" behavior which has been
>> fixed in various places in lucene but must be maintained because of
>> backwards compatibility this is also done by Version.
>
> Sure.
>
>> If a certain
>> class like IndexWriter / IndexReader have maintained compatibility
>> without a Version constant so there is no need to pass it to them. You
>> will be implicitly on the latest version.
>
> Good.
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 19:31:34 2010
Return-Path: <java-user-return-47268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94843 invoked from network); 17 Sep 2010 19:31:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 19:31:34 -0000
Received: (qmail 4279 invoked by uid 500); 17 Sep 2010 19:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4235 invoked by uid 500); 17 Sep 2010 19:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4227 invoked by uid 99); 17 Sep 2010 19:31:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 19:31:31 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 19:31:25 +0000
Received: by qyk8 with SMTP id 8so1456977qyk.14
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 12:31:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=mnsxVEzwF4U+2pl9MPEcw+rYR6Igv6rlqg5+hTOxGj8=;
        b=XBmedFxh5k+SL8EsWiFDF0WeSD/rLZmRiL8EmSMDyF07uDlRNriXFnaf5WLNYnccQN
         1cJHeKItv+LxFc4I1ugFKAuAEUR0twyhWK6QDP8KcMEnC0T4kIQ/oRcb5WTqIQTFCjdY
         Uyjp9AmrUF+F/P5Od0VP5o6BDwEHOa73ElSpo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=t2YHE7HcetDFx5F8Jw0/zUQIFBAODaHmH5J3drixXTO0wkXmtkEMZpQIB62Qk5B8ph
         0Rrekpr+zzBrnuH0yYDB7mp69T1Ig+aCgP/4OtsQIdncchZe5Gq7kk2PKbntW35qm1S1
         dopkQqYVmhaUlliiNqAu2t4zp0vJldUtjmvtU=
MIME-Version: 1.0
Received: by 10.224.107.65 with SMTP id a1mr3478324qap.326.1284751863560; Fri,
 17 Sep 2010 12:31:03 -0700 (PDT)
Received: by 10.229.235.208 with HTTP; Fri, 17 Sep 2010 12:31:03 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB4078A60A7@exchange.slc.mainstreamdata.com>
References: <55F9EF953014514EB6BEE1F5198CEEB4078A5F82@exchange.slc.mainstreamdata.com>
	<AANLkTimxnNmgMVqkYQwPLp-Ri_hTs-7=coKEAc68nK9Z@mail.gmail.com>
	<55F9EF953014514EB6BEE1F5198CEEB4078A60A7@exchange.slc.mainstreamdata.com>
Date: Fri, 17 Sep 2010 21:31:03 +0200
Message-ID: <AANLkTimzxXDYgyCK5scY-noi=LBPxxieypQctdaXzxgr@mail.gmail.com>
Subject: Re: QueryParser in 3.x
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Sep 17, 2010 at 7:34 PM, Scott Smith <ssmith@mainstreamdata.com> wr=
ote:
> First, let me say that I didn't think the problem was in QueryParser and =
I apologize if that's how it sounded. =C2=A0QueryParser is a central method=
 to Lucene. =C2=A01 of me having problems with QueryParser, 1000's of other=
s not. =C2=A0Is the problem more likely in my code or lucene. =C2=A0We'll a=
ll agree on the answer to that question.

Don't worry :)
>
> As further proof, I ran the following code. =C2=A0The first part is from =
Simon's email (thanks for that snippet) and the second part is from LIA2.
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0// code from Willnauer email
> =C2=A0 =C2=A0 =C2=A0 =C2=A0Analyzer a =3D new MyAnalyzer(Version.LUCENE_3=
0);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0TokenStream stream =3D a.reusableTokenStream("=
body", new StringReader("Europab=C3=B6rsen"));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0TermAttribute attr =3D stream.addAttribute(Ter=
mAttribute.class);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0while(stream.incrementToken())
> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println(attr.term());
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0// code from LIA2
> =C2=A0 =C2=A0 =C2=A0 =C2=A0stream =3D a.tokenStream("body", new StringRea=
der("Europab=C3=B6rsen"));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0TermAttribute term =3D stream.addAttribute(Ter=
mAttribute.class);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0while (stream.incrementToken())
> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.print(term.term());
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
>
> The answer I got back was:
> europab=C3=B6rsen
> europaborsen
>
> I realized the difference between these two was whether I was getting the=
 reusableTokeStream or the tokenStream. =C2=A0In looking at my code, the AS=
CIIFoldingFilter was not in the filter setup for the resusableTokenStream()=
. =C2=A0It was for the tokenStream(). =C2=A0I added it to the reusableToken=
Stream and I now get the result I wanted. =C2=A0The above code snippet gene=
rates the word without the umlaut in both cases. =C2=A0So, problem solved.
>
> Thanks to Simon for putting on the right track.
you are using lucene 3.0? If so take a look at ReusableAnalyzerBase
which makes it much easier to build Analyzers and prevents code
duplication.

simon
>
> Scott
>
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
> Sent: Friday, September 17, 2010 1:03 AM
> To: java-user@lucene.apache.org
> Subject: Re: QueryParser in 3.x
>
> On Fri, Sep 17, 2010 at 1:06 AM, Scott Smith <ssmith@mainstreamdata.com> =
wrote:
>> I recently upgraded to Lucene 3.0 and am seeing some new behavior that I=
 don't understand. =C2=A0Perhaps someone can explain why.
>>
>>
>>
>> I have a custom analyzer. =C2=A0Part of the analyzer uses the AsciiFoldi=
ngFilter. =C2=A0If I run a word with an umlaut through that analyzer using =
the AnalyzerDemo code in LIA2, as expected, I get the same word except that=
 the umlauted letter is now a simple ascii letter (no umlaut). =C2=A0That's=
 what I would expect and want.
>>
>>
>>
>> If I create a Queryparser using the call "new QueryParser(LUCENE_30, "bo=
dy", myAnalyzer) and then call the parse() method passing the same word, I =
can see that the query parser has not removed the umlaut. =C2=A0The string =
it has is "+body: Europab=C3=B6rsen".
>>
> This seems to be an issue with your analyzer rather than with the
> QueryParser. Since QueryParser didn't really change its behavior in
> 3.0 except of some default values. Can you provide more info what you
> did with your analyzer? Did you try running the term with umlaut chars
> through your Analyzer / Tokenstream directly? Something like that:
>
> Analyzer a =3D new MyAnalyzer();
> TokenStream stream =3D a.reusableTokenStream("body", new
> StringReader("Europab=C3=B6rsen"));
> TermAttribute attr =3D stream.addAttribute(TermAttribute.class);
> while(stream.incrementToken())
> =C2=A0System.out.println(attr.term());
>
> simon
>>
>>
>> I know I had to make a number of changes to the analyzer and the tokeniz=
er to upgrade to 3.x. =C2=A0Is there something very different from the 2.x =
version that I'm likely missing.
>>
>>
>>
>> Anyone have any thoughts?
>>
>>
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 19:40:33 2010
Return-Path: <java-user-return-47269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96354 invoked from network); 17 Sep 2010 19:40:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 19:40:33 -0000
Received: (qmail 15502 invoked by uid 500); 17 Sep 2010 19:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15422 invoked by uid 500); 17 Sep 2010 19:40:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15414 invoked by uid 99); 17 Sep 2010 19:40:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 19:40:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cogross@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 19:40:24 +0000
Received: by gxk7 with SMTP id 7so1288226gxk.35
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 12:40:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=iI9J0Ys0Pl5Kj9nk2B0iPuFdFY9O/taKnWZSWw7tuug=;
        b=Dl/qnxsuQPgvcUHV5eMGxIQuochOhch36QUN0ElySBvuX91f7D00gvHujvwVJ/IvQh
         rW/x1Zm68t6cUvnjhCHy6iYEpT2ufrB3aYu6jXjd3gFUYG7WzSmlPY6zfSGrglcqvfok
         ABwIWaaqYkU744OsNXCUnWAQEK4WwdA5cQC7U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=GyZkAZzMsq7sYKHerqMqTGBU9AN3pDPLyXVDpER82VSSmMJ84Nau+DgjyDBBNo1quG
         S/YPus/duy/WVG7cAhyI//DU9TkfWiwaXnN5arPn80cgJEakmz7A2uGkAZNeqFxIwxik
         //gOVb0MMvOxN/mP8Kn3vbTXHcYx8OJTGMGwI=
Received: by 10.150.12.13 with SMTP id 13mr6200196ybl.191.1284752403205; Fri,
 17 Sep 2010 12:40:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.141.3 with HTTP; Fri, 17 Sep 2010 12:39:43 -0700 (PDT)
In-Reply-To: <AANLkTinLF_ODqKQ3wBDG_1wbgPSytsOYvTHgcxDDKnkz@mail.gmail.com>
References: <AANLkTinSYM1yiQN_4Fh_01C_+81BaazxjPnxqcHJmEJd@mail.gmail.com> <AANLkTinLF_ODqKQ3wBDG_1wbgPSytsOYvTHgcxDDKnkz@mail.gmail.com>
From: Christopher Gross <cogross@gmail.com>
Date: Fri, 17 Sep 2010 15:39:43 -0400
Message-ID: <AANLkTimp3qHNu+4sVAC4-eyTbT-pbqmmqCDcGmNWMy9N@mail.gmail.com>
Subject: Re: Connection question
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Yes, I'm asking about network connections.

Are you aware of any documentation on how I can set up Solr to use the
Lucene index that I already have?

Thanks!

-- Chris



On Fri, Sep 17, 2010 at 3:02 PM, Ian Lea <ian.lea@gmail.com> wrote:
> Are you asking about network connections? =A0There is no networking
> built into lucene. =A0There is in solr, and lucene can use directories
> on networked file systems.
>
>
> --
> Ian.
>
>
> On Fri, Sep 17, 2010 at 6:08 PM, Christopher Gross <cogross@gmail.com> wr=
ote:
>> I'm trying to connect to a Lucene index on a test server. =A0All of the
>> examples that I've found use a local directory to connect into the
>> Lucene index, but I can't find one that will remotely hook into it.
>>
>> Can someone please point me in the right direction? =A0I'm fairly
>> certain that someone has run into and fixed this problem, but I
>> haven't been able to find a way to do it.
>>
>> Thanks for your help!
>>
>> -- Chris
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 21:45:56 2010
Return-Path: <java-user-return-47270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30509 invoked from network); 17 Sep 2010 21:45:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 21:45:56 -0000
Received: (qmail 60102 invoked by uid 500); 17 Sep 2010 21:45:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60037 invoked by uid 500); 17 Sep 2010 21:45:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60029 invoked by uid 99); 17 Sep 2010 21:45:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 21:45:53 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 21:45:48 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <177153(2)>; Fri, 17 Sep 2010 14:45:21 PDT
cc: java-user@lucene.apache.org
To: <java-user@lucene.apache.org>
To: <janssen@parc.com>
Subject: Re: recommended way to identify a version to pass to StandardAnalyzer constructor?
In-reply-to: <AANLkTinHYLEMfm2FyoWpN5kQAgiyJqoT5F+-JcmmBf9u@mail.gmail.com>
References: <32419.1284673156@parc.com> <AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com> <16477.1284747288@parc.com> <AANLkTinHYLEMfm2FyoWpN5kQAgiyJqoT5F+-JcmmBf9u@mail.gmail.com>
Comments: In-reply-to Simon Willnauer <simon.willnauer@googlemail.com>
    message dated "Fri, 17 Sep 2010 12:08:12 -0700."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Date: Fri, 17 Sep 2010 14:45:21 PDT
Message-ID: <11920.1284759921@parc.com>
From: Bill Janssen <janssen@parc.com>

Simon Willnauer <simon.willnauer@googlemail.com> wrote:

> On Fri, Sep 17, 2010 at 8:14 PM, Bill Janssen <janssen@parc.com> wrote:
> > Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> >
> >> Hey Bill,
> >> let me clarify what Version is used for since I think that caused
> >> little confusion.
> >
> > Thanks.
> >
> >> The Version constant was mainly introduced to help
> >> users with backwards compatibility and upgrading their codebase to a
> >> new version of lucene without breaking existing applications / indexes
> >> build with previous versions. For instance StandardAnalyzer preserves
> >> the positionIncrement in its StopFilter which was introduces in Lucene
> >> 2.9. If you use 2.4 and upgrade to 2.9 this change might break you app
> >> since you indexed with a 2.4 behavior. You phrasequeries might not
> >> work as expected anymore. If you don't have any upgrade issues or if
> >> you can simply reindex you might just use the latest version.
> >
> > That's what I'm trying to do. =C2=A0But how? =C2=A0LUCENE_CURRENT is de=
precated!
> >
> > How about adding a constructor for StandardAnalyzer that takes no
> > parameters and is implicitly LUCENE_CURRENT?
>=20
> We deprecated LUCENE_CURRENT for a good reason that is that folks will
> run into big trouble if they upgrade from X to X+n because behavior
> may change dramatically due to optimizations, bug fixes and useful
> features. If you blindly pass LUCENE_CURRENT you might end up with
> incompatible APIs in some cases (we do deploy "sophisticated backwards
> layers" like we did in CharTokenizer) or query analysis which will not
> work with you existing Version X index.

Yes, but that's not an issue if I don't *have* existing version X
indices, which I don't.

> What you should do is pick YOUR latest version manually and go through
> the changes once you upgrade. Write unittests for you API to make sure
> it does not break you code. Its worth the trouble!

Simon, this advice isn't helping.

I have unittests, and, yes, they are worth the trouble.  I always
re-index my collection if I change to a different version of Lucene.
So I'd like to make my choice of the value of
org.apache.lucene.util.Version automatically, using tools, instead of
choosing it manually, based on what version of Lucene the user has
installed, and without encoding a limited set of strings in my
application.

How do I do that?  More directly, is there any attribute or static
method somewhere in Lucene which will return a value of
org.apache.lucene.util.Version that corresponds to the version of the
code?  That's what I'm looking for.  Version.LUCENE_CURRENT looks good,
but it's deprecated.

Or, is there a method which will take a Lucene version, expressed as a
Package or perhaps even a string like "3.0.2", and return the
appropriate Version value?  If so, I could write my own code to retrieve
the Lucene version, then call that method to retrieve the Version value.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 21:59:37 2010
Return-Path: <java-user-return-47271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33681 invoked from network); 17 Sep 2010 21:59:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 21:59:37 -0000
Received: (qmail 87815 invoked by uid 500); 17 Sep 2010 21:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87762 invoked by uid 500); 17 Sep 2010 21:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87754 invoked by uid 99); 17 Sep 2010 21:59:34 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 21:59:34 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 21:59:12 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <177186(2)>; Fri, 17 Sep 2010 14:58:33 PDT
cc: java-user@lucene.apache.org
To: <java-user@lucene.apache.org>
To: <janssen@parc.com>
Subject: Re: recommended way to identify a version to pass to StandardAnalyzer constructor?
In-reply-to: <11920.1284759921@parc.com>
References: <32419.1284673156@parc.com> <AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com> <16477.1284747288@parc.com> <AANLkTinHYLEMfm2FyoWpN5kQAgiyJqoT5F+-JcmmBf9u@mail.gmail.com> <11920.1284759921@parc.com>
Comments: In-reply-to Bill Janssen <janssen@parc.com>
    message dated "Fri, 17 Sep 2010 14:45:21 -0700."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Fri, 17 Sep 2010 14:58:33 PDT
Message-ID: <86452.1284760713@parc.com>
From: Bill Janssen <janssen@parc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Bill Janssen <janssen@parc.com> wrote:

> ...is there any attribute or static
> method somewhere in Lucene which will return a value of
> org.apache.lucene.util.Version that corresponds to the version of the
> code?  That's what I'm looking for.  Version.LUCENE_CURRENT looks good,
> but it's deprecated.

And, given that the sole purpose of this Version frob is to support the
use of indices that were created with a different version of Lucene, it
would be a very good thing to have methods on IndexSearcher,
IndexReader, and IndexWriter (or perhaps simply on Directory?) which
would allow a program to figure out what Version is appropriate for that
index.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 23:24:58 2010
Return-Path: <java-user-return-47272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56805 invoked from network); 17 Sep 2010 23:24:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 23:24:58 -0000
Received: (qmail 69984 invoked by uid 500); 17 Sep 2010 23:24:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69919 invoked by uid 500); 17 Sep 2010 23:24:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69910 invoked by uid 99); 17 Sep 2010 23:24:55 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 23:24:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 23:24:32 +0000
Received: by wyf23 with SMTP id 23so4121029wyf.35
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 16:24:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=3cD3sEpUUCkyuHuagwFjSroZCUsBkEN19dhcDJZJxVg=;
        b=b3tejcXpf8vdfgt/Bioiy/a/XrlsFyszp8czzviYBDio9Cwh5hASWP7o9RBAZI1jbh
         osEvcKv56FtfGH3hg5p1jmgsQRoD0BBOsKy2qUpQPUHabYQKb+DLqHIHksstTagcTgmj
         sElo68aOgYHiTENWQQlvzcf/lV6ByPc4jqtHs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=HXR+rFh6wb1VFVOkS4o8rxk2MFg6nziKlpsXyVu23HduI57sCHoW0W3Jk/ot3NR4hq
         8jac54BXAQ1gt6u+8pRPs6jEMxC6dw9DoXTEPOTq1WIdEerIEn8B8xC4fz1waqfn8x+c
         1WCO2kvcXqCSM8rfuCZcDhkKJ1O4w3i9c7+Ps=
MIME-Version: 1.0
Received: by 10.216.158.12 with SMTP id p12mr436742wek.48.1284765852557; Fri,
 17 Sep 2010 16:24:12 -0700 (PDT)
Received: by 10.216.133.21 with HTTP; Fri, 17 Sep 2010 16:24:12 -0700 (PDT)
In-Reply-To: <AANLkTimp3qHNu+4sVAC4-eyTbT-pbqmmqCDcGmNWMy9N@mail.gmail.com>
References: <AANLkTinSYM1yiQN_4Fh_01C_+81BaazxjPnxqcHJmEJd@mail.gmail.com>
	<AANLkTinLF_ODqKQ3wBDG_1wbgPSytsOYvTHgcxDDKnkz@mail.gmail.com>
	<AANLkTimp3qHNu+4sVAC4-eyTbT-pbqmmqCDcGmNWMy9N@mail.gmail.com>
Date: Fri, 17 Sep 2010 16:24:12 -0700
Message-ID: <AANLkTi=HQ3hx5HBfattH3TWmCvoV9p9QAzxxzX8i=hM1@mail.gmail.com>
Subject: Re: Connection question
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This can probably be done. The hardest part is cross-correlating your
Lucene analyzer use with the Solr analyzer stack definition. There are
a few things Lucene does that Solr doesn't- span queries for one.

Lance

On Fri, Sep 17, 2010 at 12:39 PM, Christopher Gross <cogross@gmail.com> wro=
te:
> Yes, I'm asking about network connections.
>
> Are you aware of any documentation on how I can set up Solr to use the
> Lucene index that I already have?
>
> Thanks!
>
> -- Chris
>
>
>
> On Fri, Sep 17, 2010 at 3:02 PM, Ian Lea <ian.lea@gmail.com> wrote:
>> Are you asking about network connections? =C2=A0There is no networking
>> built into lucene. =C2=A0There is in solr, and lucene can use directorie=
s
>> on networked file systems.
>>
>>
>> --
>> Ian.
>>
>>
>> On Fri, Sep 17, 2010 at 6:08 PM, Christopher Gross <cogross@gmail.com> w=
rote:
>>> I'm trying to connect to a Lucene index on a test server. =C2=A0All of =
the
>>> examples that I've found use a local directory to connect into the
>>> Lucene index, but I can't find one that will remotely hook into it.
>>>
>>> Can someone please point me in the right direction? =C2=A0I'm fairly
>>> certain that someone has run into and fixed this problem, but I
>>> haven't been able to find a way to do it.
>>>
>>> Thanks for your help!
>>>
>>> -- Chris
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 17 23:34:28 2010
Return-Path: <java-user-return-47273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59139 invoked from network); 17 Sep 2010 23:34:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Sep 2010 23:34:28 -0000
Received: (qmail 81191 invoked by uid 500); 17 Sep 2010 23:34:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81095 invoked by uid 500); 17 Sep 2010 23:34:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81087 invoked by uid 99); 17 Sep 2010 23:34:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 23:34:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pulkitsinghal@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Sep 2010 23:34:18 +0000
Received: by wwd20 with SMTP id 20so212996wwd.5
        for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 16:33:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=LdsXBRynCjviJfWJx8C8jYV13BD5lWyUrjlsEuv7FZw=;
        b=kaIEf9VLJe4xKVNcPBKh+JaYV9R8km7vbR/jexfusKk7099ArifNlwBvLl6dmhESdS
         M8q4M7iIeQO+3Ble9eVVO2Z/4Qgev6PBz6PtWzcGw9+inomH6nPr6ChvsqOGTPb9pdJJ
         v+vshjdL6ajpVrfZGNCGpX5/nx+kMxHm7d3sM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Fh5WzR+Do854niptb4ihv4tft9+/faMf0LLQ8IoosLilwveB43tCq7EBjf0PfkGWi8
         5pkaA0o/PZ9tCuxomKauhYuqSOnsAeic8JjK3il5aCczDDlC6U+nX5zomDWbv6Ybpmnt
         Ujc5BnAuzMWsKkbXHuhjAhyw/jizeDmJJ/NrA=
MIME-Version: 1.0
Received: by 10.216.178.200 with SMTP id f50mr4778872wem.62.1284766438107;
 Fri, 17 Sep 2010 16:33:58 -0700 (PDT)
Received: by 10.216.137.146 with HTTP; Fri, 17 Sep 2010 16:33:58 -0700 (PDT)
Date: Fri, 17 Sep 2010 16:33:58 -0700
Message-ID: <AANLkTikqCF6=FZv1qrSz9-E-rjN3w=K6E99VUUyYfCHR@mail.gmail.com>
Subject: How to close the wrapped directory implementation
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

With RAMDirectory we have the option of providing another Directory
implementation such as FSDirectory that can be wrapped and loaded into
memory:

Directory directory = new RAMDirectory(FSDirectory.open(new
File(fileDirectoryName)));

But after building the index, if I close the IndexWriter then the data
is still available for searches in the directory bean but nothing ever
gets written to the disk!

Is this a bug? Is there a workaround?

Or is this by design? Is the RAMDirectory constructor only meant to
read in data from the passed in argument? Or is it supposed to keep it
around and update it when closing?

Please write back, Thanks!
- Pulkit

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 18 02:21:11 2010
Return-Path: <java-user-return-47274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13977 invoked from network); 18 Sep 2010 02:21:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Sep 2010 02:21:10 -0000
Received: (qmail 97432 invoked by uid 500); 18 Sep 2010 02:21:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97302 invoked by uid 500); 18 Sep 2010 02:21:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97294 invoked by uid 99); 18 Sep 2010 02:21:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Sep 2010 02:21:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hossman_lucene@fucit.org designates 208.69.42.181 as permitted sender)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Sep 2010 02:21:02 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8650371C21B; Fri, 17 Sep 2010 19:20:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 83A3371C0F2
	for <java-user@lucene.apache.org>; Fri, 17 Sep 2010 19:20:42 -0700 (PDT)
Date: Fri, 17 Sep 2010 19:20:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Unexpected Results - using should and must in boolean query
In-Reply-To: <004501cb5281$aacab020$00601060$@thetaphi.de>
Message-ID: <alpine.DEB.1.10.1009171917430.22231@radix.cryptio.net>
References: <AANLkTi=3k_MW+EWN7OkN7W2o+2AhUUkMdBym+yAHBfq3@mail.gmail.com> <004501cb5281$aacab020$00601060$@thetaphi.de>
User-Agent: Alpine 1.10 (DEB 962 2008-03-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


: If you have some MUST terms, but you also want to have at least one of a
: list of other terms (like 5 SHOULD clauses), the trick is to separate both:
: Create a BooleanQuery with 2 MUST clauses, one is your required TermQuery
: and the second clause is itself a BooleanQuery with all the SHOULD clauses.
: This ensures that at least one of the SHOULD terms is needed together with
: the MUST term.

BooleanQuery.setMinimumNumberShouldMatch(1) has hte same effect on what is 
matched w/o requiring a nested BooleanQuery -- and because of the coord 
factor the scores from the single BooleanQuery will probably better 
represent your goal then using the nested BooleanQueries.



-Hoss

--
http://lucenerevolution.org/  ...  October 7-8, Boston
http://bit.ly/stump-hoss      ...  Stump The Chump!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 18 05:56:21 2010
Return-Path: <java-user-return-47275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55219 invoked from network); 18 Sep 2010 05:56:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Sep 2010 05:56:21 -0000
Received: (qmail 66465 invoked by uid 500); 18 Sep 2010 05:56:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65944 invoked by uid 500); 18 Sep 2010 05:56:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65934 invoked by uid 99); 18 Sep 2010 05:56:14 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Sep 2010 05:56:14 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Sep 2010 05:55:51 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4EE1845EA65
	for <java-user@lucene.apache.org>; Sat, 18 Sep 2010 07:55:31 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Fi5UpOyEtGAI for <java-user@lucene.apache.org>;
	Sat, 18 Sep 2010 07:55:18 +0200 (CEST)
Received: from VEGA (70-35-37-2.static.wiline.com [70.35.37.2])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 581E245EA41
	for <java-user@lucene.apache.org>; Sat, 18 Sep 2010 07:55:18 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTi=3k_MW+EWN7OkN7W2o+2AhUUkMdBym+yAHBfq3@mail.gmail.com> <004501cb5281$aacab020$00601060$@thetaphi.de> <alpine.DEB.1.10.1009171917430.22231@radix.cryptio.net>
In-Reply-To: <alpine.DEB.1.10.1009171917430.22231@radix.cryptio.net>
Subject: RE: Unexpected Results - using should and must in boolean query
Date: Fri, 17 Sep 2010 22:55:31 -0700
Message-ID: <009301cb56f6$1c0b5780$54220680$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKxcjDa9jvh339M/Y7nEiuZyLx8JAHIcRheAhaRYimRLA+tYA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hah, I forgot that, thanks!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: Friday, September 17, 2010 7:21 PM
> To: java-user@lucene.apache.org
> Subject: RE: Unexpected Results - using should and must in boolean query
> 
> 
> : If you have some MUST terms, but you also want to have at least one of a
> : list of other terms (like 5 SHOULD clauses), the trick is to separate
both:
> : Create a BooleanQuery with 2 MUST clauses, one is your required
TermQuery
> : and the second clause is itself a BooleanQuery with all the SHOULD
clauses.
> : This ensures that at least one of the SHOULD terms is needed together
with
> : the MUST term.
> 
> BooleanQuery.setMinimumNumberShouldMatch(1) has hte same effect on
> what is matched w/o requiring a nested BooleanQuery -- and because of the
> coord factor the scores from the single BooleanQuery will probably better
> represent your goal then using the nested BooleanQueries.
> 
> 
> 
> -Hoss
> 
> --
> http://lucenerevolution.org/  ...  October 7-8, Boston
> http://bit.ly/stump-hoss      ...  Stump The Chump!
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 18 12:04:49 2010
Return-Path: <java-user-return-47276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46352 invoked from network); 18 Sep 2010 12:04:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Sep 2010 12:04:49 -0000
Received: (qmail 27116 invoked by uid 500); 18 Sep 2010 12:04:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26696 invoked by uid 500); 18 Sep 2010 12:04:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26688 invoked by uid 99); 18 Sep 2010 12:04:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Sep 2010 12:04:43 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Sep 2010 12:04:38 +0000
Received: by qwk3 with SMTP id 3so3172256qwk.35
        for <java-user@lucene.apache.org>; Sat, 18 Sep 2010 05:04:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=sEJqt6QjXgYXawNdMdoKYwdf4A/fNtcmXc7OL3EX6Gk=;
        b=qnlHVTlVCEO5fOGHSwJGYGx7QThFh+VabBW9WGR79IeR2/D3p9k799G/AQPIbCzI+F
         WTVZMfR2vB6U50p5YOrXn6sCldop/EvXzLzCWU6mEYGMbWGBO7l3D5bafzLRtwF8FbQD
         jlhPTVBJrvRaSzH5wNlzmE5UPEhUWwfDCkdvc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=NetQop5S9oEKVGvFMORefGXM2g9WZt4BlDshGXefgR8LPacqfsi/eE8tqf35smQvvz
         WcxqR+qEXx5HlS2QhM06qXm4mxcWR/yLNC98DR8FuXow69oqX3shgo6uzPkNmUbnX92v
         tUl4SqaeJ8+ROGQuwRxk6cTuuQF17dfmwqxm8=
MIME-Version: 1.0
Received: by 10.229.238.200 with SMTP id kt8mr4561265qcb.0.1284811457324; Sat,
 18 Sep 2010 05:04:17 -0700 (PDT)
Received: by 10.229.245.138 with HTTP; Sat, 18 Sep 2010 05:04:17 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <11920.1284759921@parc.com>
References: <32419.1284673156@parc.com>
	<AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com>
	<16477.1284747288@parc.com>
	<AANLkTinHYLEMfm2FyoWpN5kQAgiyJqoT5F+-JcmmBf9u@mail.gmail.com>
	<11920.1284759921@parc.com>
Date: Sat, 18 Sep 2010 14:04:17 +0200
Message-ID: <AANLkTim_5ArworgNVo1Bp5NBVgUUzTU+a34fNPagjHDY@mail.gmail.com>
Subject: Re: recommended way to identify a version to pass to StandardAnalyzer constructor?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Fri, Sep 17, 2010 at 11:45 PM, Bill Janssen <janssen@parc.com> wrote:
> Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
>> On Fri, Sep 17, 2010 at 8:14 PM, Bill Janssen <janssen@parc.com> wrote:
>> > Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>> >
>> >> Hey Bill,
>> >> let me clarify what Version is used for since I think that caused
>> >> little confusion.
>> >
>> > Thanks.
>> >
>> >> The Version constant was mainly introduced to help
>> >> users with backwards compatibility and upgrading their codebase to a
>> >> new version of lucene without breaking existing applications / indexe=
s
>> >> build with previous versions. For instance StandardAnalyzer preserves
>> >> the positionIncrement in its StopFilter which was introduces in Lucen=
e
>> >> 2.9. If you use 2.4 and upgrade to 2.9 this change might break you ap=
p
>> >> since you indexed with a 2.4 behavior. You phrasequeries might not
>> >> work as expected anymore. If you don't have any upgrade issues or if
>> >> you can simply reindex you might just use the latest version.
>> >
>> > That's what I'm trying to do. =C2=A0But how? =C2=A0LUCENE_CURRENT is d=
eprecated!
>> >
>> > How about adding a constructor for StandardAnalyzer that takes no
>> > parameters and is implicitly LUCENE_CURRENT?
>>
>> We deprecated LUCENE_CURRENT for a good reason that is that folks will
>> run into big trouble if they upgrade from X to X+n because behavior
>> may change dramatically due to optimizations, bug fixes and useful
>> features. If you blindly pass LUCENE_CURRENT you might end up with
>> incompatible APIs in some cases (we do deploy "sophisticated backwards
>> layers" like we did in CharTokenizer) or query analysis which will not
>> work with you existing Version X index.
>
> Yes, but that's not an issue if I don't *have* existing version X
> indices, which I don't.
Well then why don't you just use the Version.LUCENE_30 and assign it
to some static final variable like:
class MyConstants { public final Version LUCENE_VERSION =3D
Version.LUCENE_30; } and use it everywhere?!

We moved away from LUCENE_CURRENT for the reasons I mentioned - if
that made you aware of what could happen our plans worked out. I
rather answer some questions on the list regarding version than have
tons of people with broken applications.

>
>> What you should do is pick YOUR latest version manually and go through
>> the changes once you upgrade. Write unittests for you API to make sure
>> it does not break you code. Its worth the trouble!
>
> Simon, this advice isn't helping.

sorry, I though I would explain it in detail and you could find the
best way for your application - didn't work out ey?!
>
> I have unittests, and, yes, they are worth the trouble. =C2=A0I always
> re-index my collection if I change to a different version of Lucene.
> So I'd like to make my choice of the value of
> org.apache.lucene.util.Version automatically, using tools, instead of
> choosing it manually, based on what version of Lucene the user has
> installed, and without encoding a limited set of strings in my
> application.

see above
>
> How do I do that? =C2=A0More directly, is there any attribute or static
> method somewhere in Lucene which will return a value of
> org.apache.lucene.util.Version that corresponds to the version of the
> code? =C2=A0That's what I'm looking for. =C2=A0Version.LUCENE_CURRENT loo=
ks good,
> but it's deprecated.
Version of the code? I don't understand.. the max value of Version is
your lucene version, does that help?!
>
> Or, is there a method which will take a Lucene version, expressed as a
> Package or perhaps even a string like "3.0.2", and return the
> appropriate Version value? =C2=A0If so, I could write my own code to retr=
ieve
> the Lucene version, then call that method to retrieve the Version value.

org.apache.lucene.util.Constants#LUCENE_MAIN_VERSION
org.apache.lucene.util.Constants#LUCENE_VERSION

simon
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 19 22:21:55 2010
Return-Path: <java-user-return-47277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91850 invoked from network); 19 Sep 2010 22:21:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Sep 2010 22:21:55 -0000
Received: (qmail 89605 invoked by uid 500); 19 Sep 2010 22:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88867 invoked by uid 500); 19 Sep 2010 22:21:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88859 invoked by uid 99); 19 Sep 2010 22:21:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Sep 2010 22:21:51 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Sep 2010 22:21:46 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <511327(1)>; Sun, 19 Sep 2010 15:21:03 PDT
cc: java-user@lucene.apache.org
To: <java-user@lucene.apache.org>
To: <janssen@parc.com>
Subject: Re: recommended way to identify a version to pass to StandardAnalyzer constructor?
In-reply-to: <AANLkTim_5ArworgNVo1Bp5NBVgUUzTU+a34fNPagjHDY@mail.gmail.com>
References: <32419.1284673156@parc.com> <AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com> <16477.1284747288@parc.com> <AANLkTinHYLEMfm2FyoWpN5kQAgiyJqoT5F+-JcmmBf9u@mail.gmail.com> <11920.1284759921@parc.com> <AANLkTim_5ArworgNVo1Bp5NBVgUUzTU+a34fNPagjHDY@mail.gmail.com>
Comments: In-reply-to Simon Willnauer <simon.willnauer@googlemail.com>
    message dated "Sat, 18 Sep 2010 05:04:17 -0700."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Date: Sun, 19 Sep 2010 15:21:03 PDT
Message-ID: <18031.1284934863@parc.com>
From: Bill Janssen <janssen@parc.com>

Simon Willnauer <simon.willnauer@googlemail.com> wrote:

> On Fri, Sep 17, 2010 at 11:45 PM, Bill Janssen <janssen@parc.com> wrote:
> > Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> >
> >> On Fri, Sep 17, 2010 at 8:14 PM, Bill Janssen <janssen@parc.com> wrote:
> >> > Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> >> >
> >> >> Hey Bill,
> >> >> let me clarify what Version is used for since I think that caused
> >> >> little confusion.
> >> >
> >> > Thanks.
> >> >
> >> >> The Version constant was mainly introduced to help
> >> >> users with backwards compatibility and upgrading their codebase to a
> >> >> new version of lucene without breaking existing applications / inde=
xes
> >> >> build with previous versions. For instance StandardAnalyzer preserv=
es
> >> >> the positionIncrement in its StopFilter which was introduces in Luc=
ene
> >> >> 2.9. If you use 2.4 and upgrade to 2.9 this change might break you =
app
> >> >> since you indexed with a 2.4 behavior. You phrasequeries might not
> >> >> work as expected anymore. If you don't have any upgrade issues or if
> >> >> you can simply reindex you might just use the latest version.
> >> >
> >> > That's what I'm trying to do. =C2=A0But how? =C2=A0LUCENE_CURRENT is=
 deprecated!
> >> >
> >> > How about adding a constructor for StandardAnalyzer that takes no
> >> > parameters and is implicitly LUCENE_CURRENT?
> >>
> >> We deprecated LUCENE_CURRENT for a good reason that is that folks will
> >> run into big trouble if they upgrade from X to X+n because behavior
> >> may change dramatically due to optimizations, bug fixes and useful
> >> features. If you blindly pass LUCENE_CURRENT you might end up with
> >> incompatible APIs in some cases (we do deploy "sophisticated backwards
> >> layers" like we did in CharTokenizer) or query analysis which will not
> >> work with you existing Version X index.
> >
> > Yes, but that's not an issue if I don't *have* existing version X
> > indices, which I don't.
> Well then why don't you just use the Version.LUCENE_30 and assign it
> to some static final variable like:
> class MyConstants { public final Version LUCENE_VERSION =3D
> Version.LUCENE_30; } and use it everywhere?!

Because that will break if what my users have installed is Lucene 2.9.3.

> We moved away from LUCENE_CURRENT for the reasons I mentioned - if
> that made you aware of what could happen our plans worked out.

I was already aware, but I do appreciate you folks thinking of your
users.  I just wish those plans had been thought out a bit more.  But
that's software development, isn't it :-?

> Version of the code? I don't understand.. the max value of Version is
> your lucene version, does that help?!

Yep.  That's what I'm using:

    # we'd like to make this the latest Version that this Lucene knows
    # about, because that's what the index will be using, but using
    # Version.LUCENE_CURRENT is deprecated, and there's no API to map
    # from the Lucene version string to the Version value for that
    # string.  To make things worse, the 2.9 code doesn't support the
    # values() method, and Version doesn't implement Comparable, so I
    # can't just use max().  So, this complexity:

    def _order(v1, v2):
        if v1.equals(v2):
            return 0
        if v1.onOrAfter(v2):
            return 1
        else:
            return -1
    _values =3D sorted([getattr(Version, x) for x in Version.__dict__
                      if (x.startswith("LUCENE") and (x !=3D "LUCENE_CURREN=
T"))],
                     cmp=3D_order)
    _indexversion =3D _values[-1]
    del _order, _values


> > Or, is there a method which will take a Lucene version, expressed as a
> > Package or perhaps even a string like "3.0.2", and return the
> > appropriate Version value? =C2=A0If so, I could write my own code to re=
trieve
> > the Lucene version, then call that method to retrieve the Version value.
>=20
> org.apache.lucene.util.Constants#LUCENE_MAIN_VERSION
> org.apache.lucene.util.Constants#LUCENE_VERSION

Yes, those are the strings I would use.  Now, how do I map from that
string to an appropriate value of Version?  I think Version should grow
a static method for doing that:

  Version theVersion =3D Version.valueOf(Constants.LUCENE_MAIN_VERSION);

Thanks,

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 20 02:52:04 2010
Return-Path: <java-user-return-47278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65877 invoked from network); 20 Sep 2010 02:52:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Sep 2010 02:52:03 -0000
Received: (qmail 3110 invoked by uid 500); 20 Sep 2010 02:52:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1917 invoked by uid 500); 20 Sep 2010 02:51:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1900 invoked by uid 99); 20 Sep 2010 02:51:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Sep 2010 02:51:58 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Sep 2010 02:51:50 +0000
Received: by pxi3 with SMTP id 3so1882117pxi.35
        for <java-user@lucene.apache.org>; Sun, 19 Sep 2010 19:51:27 -0700 (PDT)
Received: by 10.114.111.12 with SMTP id j12mr9316505wac.95.1284951087597;
        Sun, 19 Sep 2010 19:51:27 -0700 (PDT)
Received: from [10.0.1.90] (203-114-161-15.wir.sta.inspire.net.nz [203.114.161.15])
        by mx.google.com with ESMTPS id q6sm12565472waj.10.2010.09.19.19.51.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 19 Sep 2010 19:51:26 -0700 (PDT)
Subject: Help with numeric ranges and querying with sorting and counts
From: Todd Nine <todd@spidertracks.co.nz>
Reply-To: todd@spidertracks.co.nz
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary="=-PCD0PwX6pxXJ04vmi7ZH"
Organization: Spidertracks
Date: Mon, 20 Sep 2010 14:51:20 +1200
Message-ID: <1284951080.32030.10.camel@greenlantern.local>
Mime-Version: 1.0
X-Mailer: Evolution 2.28.3 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-PCD0PwX6pxXJ04vmi7ZH
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 7bit

Hi all,
  Now that the nasty bug in Cassandra has been fixed, I can use numeric
fields in my Lucandra for searching and sorting.  I'm having a bit of an
issue I could use a hand with.  We're creating an SoS index.  Each
Document corresponds to an SoS.  Every person contacted for the SoS will
be indexed by their email address, their phone numbers, and the time the
SoS was created.  I have an api with the following functionality.


public List<SoS> getAll(String input, long endTime int count) {


Where the string is either a phone number or an email address, the
endTime is the epoch end time to seek up to, and the count is the number
of records to return.  I basically want to perform the following search

(email: input OR phone: input) AND endtime[-LONG.MIN : endTime]

Then return the last "count" values that are closest to the end time.
Here is how I'm creating my document.

	Document doc = new Document();
		DocumentUtils.setRowKey(doc, sos.getId().toString());

		doc.add(new Field(FIELD_IMEI, sos.getImeiNumber(), Store.NO,
				Index.NOT_ANALYZED));

		doc.add(new Field(FIELD_TRACKIDX, getHex(sos.getTrackIndexTime()),
				Store.NO, Index.NOT_ANALYZED));

		doc.add(new Field(FIELD_TIER, getHex(sos.getTier().getStoredValue()),
				Store.NO, Index.NOT_ANALYZED));

		doc.add(new NumericField(FIELD_CREATETIME).setLongValue(sos
				.getCreatedTime().getTime()));

		doc.add(new Field(FIELD_RESOLVED, getHex(sos.isResolved()), Store.NO,
				Index.NOT_ANALYZED));

		if (sos.getNotes() != null) {
			doc.add(new Field(FIELD_NOTES, sos.getNotes(), Store.NO,
					Index.ANALYZED));
		}

		if (sos.isResolved()) {
			doc.add(new NumericField(FIELD_RESOLVETIME).setLongValue(sos
					.getResolvedTime().getTime()));
		}

		for (ContactedPerson person : sos.getContactedPeople()) {

			doc.add(new Field(FIELD_EMAIL, person.getEmail(), Store.NO,
					Index.NOT_ANALYZED));

			for (Phone phone : person.getPhones()) {
				doc.add(new Field(FIELD_PHONE, getNumericString(phone
						.getNumber()), Store.NO, Index.NOT_ANALYZED));
			}

		}


Here is how I'm creating my query.




		BooleanQuery query = new BooleanQuery();
		
		BooleanQuery inputTerms = new BooleanQuery();
		
		inputTerms.add(new TermQuery(new Term(FIELD_EMAIL, input)),
				Occur.SHOULD);
		
		inputTerms.add(
				new TermQuery(new Term(FIELD_PHONE, getNumericString(input))),
				Occur.SHOULD);
		
		
		query.add(inputTerms, Occur.MUST);
		
	
		
		NumericRangeQuery time = NumericRangeQuery.newLongRange(
				FIELD_CREATETIME, null, endTime, true, true);

		query.add(time, BooleanClause.Occur.MUST);

     And my sorter

	SortField sort = new SortField(FIELD_CREATETIME, SortField.LONG,true);



Finally here is some sample test data.

SOS 1: createdTime = 1284093337200L
SOS 2: createdTime = 1284093337200L + 10000;
SOS 3: createdTime = 1284093337200L + 20000;

My search criteria is the following

input = "foo@bar.com" (each record has this email address on it)
time = SOS 3 created time.

I expect to get 3 records, but instead I'm only getting 1.  It's
something specific to this query, as I have similar queries that work
properly for the numeric range and sorting.  Any ideas what is wrong
with my query?

Thanks,
Todd


--=-PCD0PwX6pxXJ04vmi7ZH--


From java-user-return-47279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 20 15:27:27 2010
Return-Path: <java-user-return-47279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40479 invoked from network); 20 Sep 2010 15:27:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Sep 2010 15:27:27 -0000
Received: (qmail 29118 invoked by uid 500); 20 Sep 2010 15:27:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28743 invoked by uid 500); 20 Sep 2010 15:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28734 invoked by uid 99); 20 Sep 2010 15:27:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Sep 2010 15:27:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sanne.grinovero@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Sep 2010 15:27:13 +0000
Received: by ywf9 with SMTP id 9so2090888ywf.35
        for <java-user@lucene.apache.org>; Mon, 20 Sep 2010 08:26:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=GvwCK7hk9fAVDSJOfYjYVYAxH7YQ+vIfDMXle8LHPdE=;
        b=HgPurr7SDMI+mD23AO+0FyTHn19U/ua65fAqGOs7dBbYnawcbFc7OFItBfut6IB5Dl
         djRqd4yCru2pvLT6tPVK+QyoUWPid7KwIqtEby8lO+ZP9Yz+MmlseotcsV1aKH19Nn4F
         Hf1LhW7k2QEb4W9DgpG0MP3NttjhA9vJGZ0Tc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=tDD1zJazMvOMIbjPwdeKlW5De0bjMWZAlnbi01gMqlf8aLNbG8YLbawYJhmrPh7G23
         WVXg84ganTugAU0d9uo/46EIqsnm7QAeClPjG/sewEoSRI1QP2Kc/M5z/cl7Xn3uIREa
         z9z/9AOpJx8UGHuBtQcJPMUVQZST3NK/Ucbxg=
Received: by 10.150.49.8 with SMTP id w8mr9288219ybw.141.1284996412520; Mon,
 20 Sep 2010 08:26:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.173.197 with HTTP; Mon, 20 Sep 2010 08:26:32 -0700 (PDT)
In-Reply-To: <AANLkTikqCF6=FZv1qrSz9-E-rjN3w=K6E99VUUyYfCHR@mail.gmail.com>
References: <AANLkTikqCF6=FZv1qrSz9-E-rjN3w=K6E99VUUyYfCHR@mail.gmail.com>
From: Sanne Grinovero <sanne.grinovero@gmail.com>
Date: Mon, 20 Sep 2010 17:26:32 +0200
Message-ID: <AANLkTik0-+XD84bD5-ZyXO82rKZ=wFEnu+=-37JvoiyO@mail.gmail.com>
Subject: Re: How to close the wrapped directory implementation
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

2010/9/18 Pulkit Singhal <pulkitsinghal@gmail.com>:
> With RAMDirectory we have the option of providing another Directory
> implementation such as FSDirectory that can be wrapped and loaded into
> memory:
>
> Directory directory = new RAMDirectory(FSDirectory.open(new
> File(fileDirectoryName)));
>
> But after building the index, if I close the IndexWriter then the data
> is still available for searches in the directory bean but nothing ever
> gets written to the disk!
>
> Is this a bug? Is there a workaround?
>
> Or is this by design? Is the RAMDirectory constructor only meant to
> read in data from the passed in argument? Or is it supposed to keep it
> around and update it when closing?
>
> Please write back, Thanks!
> - Pulkit

hi Pulkit, no that's not a bug, as the javadoc explains it's going to
copy the given Directory in the RAMDirectory but they are independent.
You could use Directory.copy(source, dest, boolean) to copy it from
ram to the source Directory when you're done with the changes, but I'd
recommend to use the FSDirectory directly if you need persistence.

Regards,
Sanne

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 20 15:41:26 2010
Return-Path: <java-user-return-47280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60182 invoked from network); 20 Sep 2010 15:41:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Sep 2010 15:41:26 -0000
Received: (qmail 61081 invoked by uid 500); 20 Sep 2010 15:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60772 invoked by uid 500); 20 Sep 2010 15:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60764 invoked by uid 99); 20 Sep 2010 15:41:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Sep 2010 15:41:21 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Sep 2010 15:41:15 +0000
Received: from compute1.internal (compute1.nyi.mail.srv.osa [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 1C9B5675
	for <java-user@lucene.apache.org>; Mon, 20 Sep 2010 11:40:55 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Mon, 20 Sep 2010 11:40:55 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=+4I0fm3hHTkJLVozQKgbPg5LNS4=; b=r9u7kGfjfjxmL/3Ys1rkkTTUwBEZAFIJSe82+huOWxqlQyji3/f0OwziDPff4/lHo7HvWycVbAvVydzHid8S+O/bSfKtJutSH9qQ4pq+lWMh1+pXmq1yGPu14vAEYQm7X/Bdao+WO0wMfQJEjCsQCMQ2QQeZang2oF4NbKKEdbs=
X-Sasl-enc: gmMGTcY0JWqikfBEpLAMscWiL3iw9XRkovn8a+psWVBQ 1284997254
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 749F05E923A
	for <java-user@lucene.apache.org>; Mon, 20 Sep 2010 11:40:54 -0400 (EDT)
Message-ID: <4C978085.70702@fastmail.fm>
Date: Mon, 20 Sep 2010 16:40:53 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Use of SimpleStringInterner in non Lucene App
References: <AANLkTinQcAA12jbQxgmThZFtVD5N4zXJ+D129A5e-fUT@mail.gmail.com> <4C908A29.9070702@fastmail.fm>
In-Reply-To: <4C908A29.9070702@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Paul Taylor wrote:
> Im currently using String.intern() in my app purely to reduce the 
> memory usage, this has worked well except the memory required for 
> intern() go into perm rather than heap, setting perm on different 
> platforms is on trivial so Im looking for a solution that works on 
> Heap. (Now before you say tune your applications please understand 
> that my app is memory bound based on how many files are loaded into it 
> , which can be anything from 10 to 100,000, in the long term I am 
> going to move to a database soln to solve this issue, but in the short 
> term I need intern() for heap memory)
>
> Does SimpleStringInterner use heap, would it be sensible to use it for 
> a non lucene stuff, and what do the tableSize and maxChainLength 
> parameters mean. ?
>
> thanks Paul
>
In case of interest to anyone

Having looked at the code it seems Lucene SimpleStringInterner still 
uses String.intern() it just has some cpu optimizations to reduce 
unneccessary calls to string.intern()

Google have a replacement for String.intern() which I think will do the 
job for me

http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Interners.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 00:20:30 2010
Return-Path: <java-user-return-47281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70565 invoked from network); 21 Sep 2010 00:20:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 00:20:30 -0000
Received: (qmail 71294 invoked by uid 500); 21 Sep 2010 00:20:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71118 invoked by uid 500); 21 Sep 2010 00:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71110 invoked by uid 99); 21 Sep 2010 00:20:27 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 00:20:27 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pulkitsinghal@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 00:20:04 +0000
Received: by wyf23 with SMTP id 23so7159395wyf.35
        for <java-user@lucene.apache.org>; Mon, 20 Sep 2010 17:19:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=qsC0MxtqP1PLOgDcDX377FPeVSzZPgq5fHIShFWqoM8=;
        b=wogVPtRhTrp6BC/sjWfqam8yFQ1aaZIjy6mXEDoyYS1YOLV0nmi3xlN8SLvIvZ+4o5
         0vBmMBTH+48MLaj+nVRIC68ra5Xasi/ELHqo5JdDFca1jWEwYRVBU2yEcQPdBLfYjs6u
         TuUzNBPFzBIhnD0qfYomKx9eagCi3CDwunw74=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=OXoZXY1ZiEjatczokvNM75tM0mYcdFLZY4I2eLxGA0suwXBIiE7mBs7KrWgfqkwxGa
         MXC67SXWH1dfoSyC5ssS3NxbGTmFbNyoo/CYes9m3ApnNzNQOG3uvaN53v9A9iLVIKoG
         ca/OobAUB96MysQ1YKKu3VAhKNSgja2pV0uWU=
MIME-Version: 1.0
Received: by 10.216.1.77 with SMTP id 55mr8482434wec.72.1285028384398; Mon, 20
 Sep 2010 17:19:44 -0700 (PDT)
Received: by 10.216.137.146 with HTTP; Mon, 20 Sep 2010 17:19:44 -0700 (PDT)
Date: Mon, 20 Sep 2010 17:19:44 -0700
Message-ID: <AANLkTin=k0PPJdatKAkSoc22aWdeJXm=d6eCKb5TvMt1@mail.gmail.com>
Subject: Checksum and transactional safety for lucene indexes
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Everyone,

What happens if:
a) lucene index gets written half-way to the disk and then something goes wrong?
b) the index gets corrupted on the file system?

When we open that directory location again using FSDirectory implementations:
a) Is there any provision for the code to clean out the previous file
and start a new index file because the older one was corrupted and
didn't match the checksum?
b) Or can we check that the # of documents that can be found in the
underlying index are now ZERO because they can't be parsed properly?
How can we do this?

- Pulkit

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 04:54:29 2010
Return-Path: <java-user-return-47282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34237 invoked from network); 21 Sep 2010 04:54:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 04:54:29 -0000
Received: (qmail 32140 invoked by uid 500); 21 Sep 2010 04:54:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31616 invoked by uid 500); 21 Sep 2010 04:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31608 invoked by uid 99); 21 Sep 2010 04:54:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 04:54:22 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 04:54:14 +0000
Received: by vws4 with SMTP id 4so5438149vws.35
        for <java-user@lucene.apache.org>; Mon, 20 Sep 2010 21:53:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding:x-antivirus
         :x-antivirus-status;
        bh=03mbTfo9c5m4mgLGAhp19l7o3m2bG9wfHiwnT0irIYU=;
        b=p2Osn52HGsfdVs2T0LEfkNZbu/PkGKrMVimHTSUfC62S0RPaBYmhtSAJTe4vLfPjYp
         wkhIf4FEeTsGokey+iW5doilnIpmXCZBt/NYapjUYWWrFHxHs2DtcrqeFUOgiD1amFYE
         hrGvwtER2W0u2iBzn7gGeIrtnFy6ET6r/8oWw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding:x-antivirus
         :x-antivirus-status;
        b=N7ywYyWX2H4tadCSk4Wq8exaIIaa+wO/3tysPfl9QyZkikrL5ioOh3aZzRPcsAVOw+
         WK0v7eLnOgY9EmfUd7iAQnaBs0Z1Wb6Ax3SeXnMF+qdNvt3L0VKmwqRnUO/axsaJbwF3
         XGM9zadrslZLgX+IzPBm47lIFgnMEZMUdfIe4=
Received: by 10.220.123.215 with SMTP id q23mr5021191vcr.178.1285044833805;
        Mon, 20 Sep 2010 21:53:53 -0700 (PDT)
Received: from [127.0.0.1] ([207.179.4.183])
        by mx.google.com with ESMTPS id m10sm4970352vbp.13.2010.09.20.21.53.52
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 20 Sep 2010 21:53:53 -0700 (PDT)
Message-ID: <4C983A5E.2010809@gmail.com>
Date: Mon, 20 Sep 2010 21:53:50 -0700
From: Lance Norskog <goksron@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.13) Gecko/20100914 SeaMonkey/2.0.8
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Checksum and transactional safety for lucene indexes
References: <AANLkTin=k0PPJdatKAkSoc22aWdeJXm=d6eCKb5TvMt1@mail.gmail.com>
In-Reply-To: <AANLkTin=k0PPJdatKAkSoc22aWdeJXm=d6eCKb5TvMt1@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 100920-1, 09/20/2010), Outbound message
X-Antivirus-Status: Clean

If an index file is not completely written to disk, it never become 
available. Lucene has a file describing the current active index 
segments. It writes all new files to the disk, and changes the 
description file (segments.gen) only after that.

If the index files are corrupted, all bets are off. Usually the data 
structures are damaged and Lucene throws CorruptIndexExceptions, NPE or 
array out-of-bounds exceptions. There is no checksumming of the index 
files.

Lance

Pulkit Singhal wrote:
> Hello Everyone,
>
> What happens if:
> a) lucene index gets written half-way to the disk and then something goes wrong?
> b) the index gets corrupted on the file system?
>
> When we open that directory location again using FSDirectory implementations:
> a) Is there any provision for the code to clean out the previous file
> and start a new index file because the older one was corrupted and
> didn't match the checksum?
> b) Or can we check that the # of documents that can be found in the
> underlying index are now ZERO because they can't be parsed properly?
> How can we do this?
>
> - Pulkit
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 15:13:06 2010
Return-Path: <java-user-return-47283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63219 invoked from network); 21 Sep 2010 15:13:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 15:13:06 -0000
Received: (qmail 76893 invoked by uid 500); 21 Sep 2010 15:13:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76441 invoked by uid 500); 21 Sep 2010 15:13:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76433 invoked by uid 99); 21 Sep 2010 15:12:59 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 15:12:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 15:12:53 +0000
Received: by qwk3 with SMTP id 3so347121qwk.35
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 08:12:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=eDwuwi4RW5sTQKR0/1VGdDQC9UBlxMWdYmIYPrtCNBY=;
        b=n1+m/7B8DY5wRp5zrnGr5mE8JxJopJN8jceojaA4ssXtGRcqTjRF5u7OpuZEJ5B83z
         q6fFj2rwOLGnaZ/tweQZX2WzWUSi3AU5Ty4zgHMHVAJB0v/1RZBjgA711x7e3ofyRYjw
         Lwyn+Y3XspjMfj5CQFTjZOM1cKp2UgUem4amk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=l7FVUI+p8vv8k+B+Id+FyT4JY3/Lw8DYC9LlgiAfxyRe3mrYiV6pSaiaYwSNEAKBZP
         +LFOgLWNcJ3Wl5TBo0AP63PrZu8FJZOqsjraXwuboEmTzq+hG79ie53L9eg1ON5gPw9i
         yHJTWTXQTECLFbW3zU7dYY3ywGoRbtUC9+drU=
Received: by 10.229.182.3 with SMTP id ca3mr6911555qcb.173.1285081952203; Tue,
 21 Sep 2010 08:12:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.196 with HTTP; Tue, 21 Sep 2010 08:12:11 -0700 (PDT)
In-Reply-To: <18031.1284934863@parc.com>
References: <32419.1284673156@parc.com> <AANLkTi=gXZDUi-7pHL9sVPcDkQG+t2a1TobKYWN1=fkP@mail.gmail.com>
 <16477.1284747288@parc.com> <AANLkTinHYLEMfm2FyoWpN5kQAgiyJqoT5F+-JcmmBf9u@mail.gmail.com>
 <11920.1284759921@parc.com> <AANLkTim_5ArworgNVo1Bp5NBVgUUzTU+a34fNPagjHDY@mail.gmail.com>
 <18031.1284934863@parc.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 21 Sep 2010 16:12:11 +0100
Message-ID: <AANLkTi=_tTpgomnmKYXj=iMtr-RzmRP4gqHMQdH8fdVf@mail.gmail.com>
Subject: Re: recommended way to identify a version to pass to StandardAnalyzer constructor?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

+1 for a static method to get the appropriate value of Version.


--
Ian.


On Sun, Sep 19, 2010 at 11:21 PM, Bill Janssen <janssen@parc.com> wrote:
> Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
>> On Fri, Sep 17, 2010 at 11:45 PM, Bill Janssen <janssen@parc.com> wrote:
>> > Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>> >
>> >> On Fri, Sep 17, 2010 at 8:14 PM, Bill Janssen <janssen@parc.com> wrot=
e:
>> >> > Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>> >> >
>> >> >> Hey Bill,
>> >> >> let me clarify what Version is used for since I think that caused
>> >> >> little confusion.
>> >> >
>> >> > Thanks.
>> >> >
>> >> >> The Version constant was mainly introduced to help
>> >> >> users with backwards compatibility and upgrading their codebase to=
 a
>> >> >> new version of lucene without breaking existing applications / ind=
exes
>> >> >> build with previous versions. For instance StandardAnalyzer preser=
ves
>> >> >> the positionIncrement in its StopFilter which was introduces in Lu=
cene
>> >> >> 2.9. If you use 2.4 and upgrade to 2.9 this change might break you=
 app
>> >> >> since you indexed with a 2.4 behavior. You phrasequeries might not
>> >> >> work as expected anymore. If you don't have any upgrade issues or =
if
>> >> >> you can simply reindex you might just use the latest version.
>> >> >
>> >> > That's what I'm trying to do. =A0But how? =A0LUCENE_CURRENT is depr=
ecated!
>> >> >
>> >> > How about adding a constructor for StandardAnalyzer that takes no
>> >> > parameters and is implicitly LUCENE_CURRENT?
>> >>
>> >> We deprecated LUCENE_CURRENT for a good reason that is that folks wil=
l
>> >> run into big trouble if they upgrade from X to X+n because behavior
>> >> may change dramatically due to optimizations, bug fixes and useful
>> >> features. If you blindly pass LUCENE_CURRENT you might end up with
>> >> incompatible APIs in some cases (we do deploy "sophisticated backward=
s
>> >> layers" like we did in CharTokenizer) or query analysis which will no=
t
>> >> work with you existing Version X index.
>> >
>> > Yes, but that's not an issue if I don't *have* existing version X
>> > indices, which I don't.
>> Well then why don't you just use the Version.LUCENE_30 and assign it
>> to some static final variable like:
>> class MyConstants { public final Version LUCENE_VERSION =3D
>> Version.LUCENE_30; } and use it everywhere?!
>
> Because that will break if what my users have installed is Lucene 2.9.3.
>
>> We moved away from LUCENE_CURRENT for the reasons I mentioned - if
>> that made you aware of what could happen our plans worked out.
>
> I was already aware, but I do appreciate you folks thinking of your
> users. =A0I just wish those plans had been thought out a bit more. =A0But
> that's software development, isn't it :-?
>
>> Version of the code? I don't understand.. the max value of Version is
>> your lucene version, does that help?!
>
> Yep. =A0That's what I'm using:
>
> =A0 =A0# we'd like to make this the latest Version that this Lucene knows
> =A0 =A0# about, because that's what the index will be using, but using
> =A0 =A0# Version.LUCENE_CURRENT is deprecated, and there's no API to map
> =A0 =A0# from the Lucene version string to the Version value for that
> =A0 =A0# string. =A0To make things worse, the 2.9 code doesn't support th=
e
> =A0 =A0# values() method, and Version doesn't implement Comparable, so I
> =A0 =A0# can't just use max(). =A0So, this complexity:
>
> =A0 =A0def _order(v1, v2):
> =A0 =A0 =A0 =A0if v1.equals(v2):
> =A0 =A0 =A0 =A0 =A0 =A0return 0
> =A0 =A0 =A0 =A0if v1.onOrAfter(v2):
> =A0 =A0 =A0 =A0 =A0 =A0return 1
> =A0 =A0 =A0 =A0else:
> =A0 =A0 =A0 =A0 =A0 =A0return -1
> =A0 =A0_values =3D sorted([getattr(Version, x) for x in Version.__dict__
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (x.startswith("LUCENE") and=
 (x !=3D "LUCENE_CURRENT"))],
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 cmp=3D_order)
> =A0 =A0_indexversion =3D _values[-1]
> =A0 =A0del _order, _values
>
>
>> > Or, is there a method which will take a Lucene version, expressed as a
>> > Package or perhaps even a string like "3.0.2", and return the
>> > appropriate Version value? =A0If so, I could write my own code to retr=
ieve
>> > the Lucene version, then call that method to retrieve the Version valu=
e.
>>
>> org.apache.lucene.util.Constants#LUCENE_MAIN_VERSION
>> org.apache.lucene.util.Constants#LUCENE_VERSION
>
> Yes, those are the strings I would use. =A0Now, how do I map from that
> string to an appropriate value of Version? =A0I think Version should grow
> a static method for doing that:
>
> =A0Version theVersion =3D Version.valueOf(Constants.LUCENE_MAIN_VERSION);
>
> Thanks,
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 16:12:23 2010
Return-Path: <java-user-return-47284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86264 invoked from network); 21 Sep 2010 16:12:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 16:12:23 -0000
Received: (qmail 69177 invoked by uid 500); 21 Sep 2010 16:12:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69059 invoked by uid 500); 21 Sep 2010 16:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69051 invoked by uid 99); 21 Sep 2010 16:12:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 16:12:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 16:12:12 +0000
Received: by wyf23 with SMTP id 23so8079344wyf.35
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 09:11:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=QZumRyfGTb7nb55cqex/wRuI8nABri8VOivJ1D/Jf5E=;
        b=XAtCumUNra5jmXu2R2YXakJo2Y+7n5yJHf+/wZokDkN9lGvsRuo8f6nbgmv1hclcvE
         WsQChZK+SQcY/axcGlAI0+chnknpfgcMR0Lg/un/5L/w1oZ5Nh1/JT/pBnTZDrOTc1gD
         GJ+wiCjH8Q9/kc7Si442opptj/dXtEuw3E6sM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=fVFL0jTTGbnLL22q1Lp7MZWYfL8nK91B68xKGvBOUkDNSO7grgtDltyEnUuHMixhzh
         c7R4twB5aOKDv+Cw60sN6yWBOiTZXQDcz99Rg932UMHC1S/3C4gMnr/cF5SLNHiKYtUy
         9cvEsuJ3/J20LObcbIyhxwlOF673s2QDcmpLk=
MIME-Version: 1.0
Received: by 10.216.1.12 with SMTP id 12mr5854408wec.1.1285085510825; Tue, 21
 Sep 2010 09:11:50 -0700 (PDT)
Received: by 10.216.192.25 with HTTP; Tue, 21 Sep 2010 09:11:50 -0700 (PDT)
Date: Tue, 21 Sep 2010 12:11:50 -0400
Message-ID: <AANLkTinAgjTmF3LDSuNHj8je2cWiw96D6f-p_=gFDUMj@mail.gmail.com>
Subject: How to export lucene index to a simple text file?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636458cd460f92e0490c749f9

--001636458cd460f92e0490c749f9
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am currently working on a project about private information retrieval and
I need to have an inverted index file in txt format as follows:

Term t    freq t      Inverted list for t
-------------------------------------------------------------------------
and          1          <6, 0.159>
big           2          <2, 0.148> <3, 0.088>
dark         1          <6, 0.079>
.
.
.
.

here the <number1, number2> pairs are indicating: number1: doc ID, where
term t exist with a rank of number2.

I have created an index from 5492 txt files, however the index is composed
of different files and most of the data is not in the text format.

could somebody guide me to achieve this?

Thank you

Sahin.

--001636458cd460f92e0490c749f9--

From java-user-return-47285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 16:30:22 2010
Return-Path: <java-user-return-47285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90930 invoked from network); 21 Sep 2010 16:30:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 16:30:22 -0000
Received: (qmail 95889 invoked by uid 500); 21 Sep 2010 16:30:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95834 invoked by uid 500); 21 Sep 2010 16:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95825 invoked by uid 99); 21 Sep 2010 16:30:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 16:30:19 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 16:30:12 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A92F745E8EF
	for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 18:29:51 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UtOo3myRS3Do for <java-user@lucene.apache.org>;
	Tue, 21 Sep 2010 18:29:38 +0200 (CEST)
Received: from VEGA (unknown [207.179.4.183])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 1A2F545E8DA
	for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 18:29:37 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTinAgjTmF3LDSuNHj8je2cWiw96D6f-p_=gFDUMj@mail.gmail.com>
In-Reply-To: <AANLkTinAgjTmF3LDSuNHj8je2cWiw96D6f-p_=gFDUMj@mail.gmail.com>
Subject: RE: How to export lucene index to a simple text file?
Date: Tue, 21 Sep 2010 09:29:55 -0700
Message-ID: <000501cb59aa$3b82eea0$b288cbe0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFrYwn5Z3jqKEi3hpDJsLR1USalB5Pcjb7A
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Retrieve a TermEnum and iterate it. By that you get all terms and can
retrieve the docFreq, which is the second column in your table. Finally for
each term you position the TermDocs enum on this term to get all document
ids. Read docs of IndexReader/TermEnum/TermDocs about this.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Sahin Buyrukbilen [mailto:sahin.buyrukbilen@gmail.com]
> Sent: Tuesday, September 21, 2010 9:12 AM
> To: java-user@lucene.apache.org
> Subject: How to export lucene index to a simple text file?
> 
> Hi,
> 
> I am currently working on a project about private information retrieval
and I
> need to have an inverted index file in txt format as follows:
> 
> Term t    freq t      Inverted list for t
> -------------------------------------------------------------------------
> and          1          <6, 0.159>
> big           2          <2, 0.148> <3, 0.088>
> dark         1          <6, 0.079>
> .
> .
> .
> .
> 
> here the <number1, number2> pairs are indicating: number1: doc ID, where
> term t exist with a rank of number2.
> 
> I have created an index from 5492 txt files, however the index is composed
of
> different files and most of the data is not in the text format.
> 
> could somebody guide me to achieve this?
> 
> Thank you
> 
> Sahin.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 16:33:34 2010
Return-Path: <java-user-return-47286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92148 invoked from network); 21 Sep 2010 16:33:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 16:33:33 -0000
Received: (qmail 2162 invoked by uid 500); 21 Sep 2010 16:33:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2138 invoked by uid 500); 21 Sep 2010 16:33:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2130 invoked by uid 99); 21 Sep 2010 16:33:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 16:33:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 16:33:24 +0000
Received: by wyf23 with SMTP id 23so8112762wyf.35
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 09:33:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=cWyjPCa2T2o6jQv8SSE+B1w9BtmAUvWwuP+V0450rlE=;
        b=QnXyZd3rjpU1T5+EP42XJq+MMJHvgU3PEtmGPKDi8MZuP+cniA10eNz7V9pT2+2cLs
         PwsOy9b6i14M5S+SZhPAb9bzrSq5+MRmqYwXBalsPIoUardKUC4cp/akJMYO59xwtZG8
         TiKi7uXgmVHgZkxKlq1Z0JlFjjVfjmpzrTQ6Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Nu01N3pOMGwWeU0xsrfe1vBJAcWlD7iJRyMVdt7fccetUJuzlE5MxPLVuVj/3VkQqq
         x2cKcpzuJqnaisko1rX072IJ3K6INUgsqOZv2fbAE6v61pxdRC8lGuKlEP91a2jgILqp
         vHsQvSJTMkfneINd677/8fbeRDbZeYAt4jdyE=
MIME-Version: 1.0
Received: by 10.216.159.129 with SMTP id s1mr9504571wek.42.1285086784427; Tue,
 21 Sep 2010 09:33:04 -0700 (PDT)
Received: by 10.216.192.25 with HTTP; Tue, 21 Sep 2010 09:33:04 -0700 (PDT)
In-Reply-To: <000501cb59aa$3b82eea0$b288cbe0$@thetaphi.de>
References: <AANLkTinAgjTmF3LDSuNHj8je2cWiw96D6f-p_=gFDUMj@mail.gmail.com>
	<000501cb59aa$3b82eea0$b288cbe0$@thetaphi.de>
Date: Tue, 21 Sep 2010 12:33:04 -0400
Message-ID: <AANLkTimKE2kmycdBqCMZJn2cA1tuLzJS3b4Vk4c24EeP@mail.gmail.com>
Subject: Re: How to export lucene index to a simple text file?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65b61024a97970490c79544
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e65b61024a97970490c79544
Content-Type: text/plain; charset=ISO-8859-1

Thank you Uwe, I will read the docs and try to do it, however do you have an
example code? I need because I am not very familiar with Java.

Thank you.

Sahin

On Tue, Sep 21, 2010 at 12:29 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi,
>
> Retrieve a TermEnum and iterate it. By that you get all terms and can
> retrieve the docFreq, which is the second column in your table. Finally for
> each term you position the TermDocs enum on this term to get all document
> ids. Read docs of IndexReader/TermEnum/TermDocs about this.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Sahin Buyrukbilen [mailto:sahin.buyrukbilen@gmail.com]
> > Sent: Tuesday, September 21, 2010 9:12 AM
> > To: java-user@lucene.apache.org
> > Subject: How to export lucene index to a simple text file?
> >
> > Hi,
> >
> > I am currently working on a project about private information retrieval
> and I
> > need to have an inverted index file in txt format as follows:
> >
> > Term t    freq t      Inverted list for t
> > -------------------------------------------------------------------------
> > and          1          <6, 0.159>
> > big           2          <2, 0.148> <3, 0.088>
> > dark         1          <6, 0.079>
> > .
> > .
> > .
> > .
> >
> > here the <number1, number2> pairs are indicating: number1: doc ID, where
> > term t exist with a rank of number2.
> >
> > I have created an index from 5492 txt files, however the index is
> composed
> of
> > different files and most of the data is not in the text format.
> >
> > could somebody guide me to achieve this?
> >
> > Thank you
> >
> > Sahin.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e65b61024a97970490c79544--

From java-user-return-47287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 18:24:41 2010
Return-Path: <java-user-return-47287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39019 invoked from network); 21 Sep 2010 18:24:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 18:24:41 -0000
Received: (qmail 81247 invoked by uid 500); 21 Sep 2010 18:24:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81203 invoked by uid 500); 21 Sep 2010 18:24:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81195 invoked by uid 99); 21 Sep 2010 18:24:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 18:24:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devshree.sane@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 18:24:31 +0000
Received: by ewy10 with SMTP id 10so3143787ewy.35
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 11:24:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=xyJURZJwZn5vYzscAn11cZ307O24OdU1e0kRhJWouKw=;
        b=YNIUM0Z7qF6lAPisw4ab3TlK4pPvMNpRAqySMWeGWgThXZEUvOmE8Awb7gZJrcoW7O
         fTCkpWqTxD+J4zHrr2nbb0rmbDsZ+5LdEu95o0TTOD6MVwCTCjIXVu1ON4joeFoVrT60
         CbmONMT0gtkosxRohHEVcM8KTBPY62x+OG3Q4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=KXHMf4SdgIgeG7SONIam/TwNepYEfa7GOKNBYjjzG+f+CSFiluukIv1BOw4LrPIY5r
         DR3Xvi67w1qe0YaK2ihd3Gd8INIne4XeHOQlqZz4sq4D59X9tQLcKWKD7x/qrm9DYdjG
         bM1Vv3pMobAE6euwLv+5Oka1tsE5UmRARtGbU=
MIME-Version: 1.0
Received: by 10.213.10.84 with SMTP id o20mr4618938ebo.50.1285093450069; Tue,
 21 Sep 2010 11:24:10 -0700 (PDT)
Received: by 10.213.14.193 with HTTP; Tue, 21 Sep 2010 11:24:10 -0700 (PDT)
Date: Tue, 21 Sep 2010 23:54:10 +0530
Message-ID: <AANLkTimu-mNuqH2eAiBMwwfSHgyMs-ZpDnHKQnLi6zgu@mail.gmail.com>
Subject: Using FastVectorHighlighter for snippets
From: Devshree Sane <devshree.sane@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174bdb5298391b0490c922be

--0015174bdb5298391b0490c922be
Content-Type: text/plain; charset=ISO-8859-1

I am using the FastVectorHighlighter for retrieving snippets from the index.


I am a bit confused about the parameters that are passed to the
FastVectorHighlighter.getBestFragments() method. One parameter is a document
id and another is the maximum number of fragments. Does it mean that only
the maximum number of fragments will be retrieved from document with given
id (even if there are more fragments in the same document)?

Is there a way to get the maximum number of fragments over the whole
index(and not just 1 document)?

--0015174bdb5298391b0490c922be--

From java-user-return-47288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 19:12:23 2010
Return-Path: <java-user-return-47288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79910 invoked from network); 21 Sep 2010 19:12:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 19:12:23 -0000
Received: (qmail 73863 invoked by uid 500); 21 Sep 2010 19:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73763 invoked by uid 500); 21 Sep 2010 19:12:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73755 invoked by uid 99); 21 Sep 2010 19:12:20 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 19:12:20 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 19:11:56 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/80) with ESMTP id o8LJBYk04543
	for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 12:11:34 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([::1]) by mta.ad.sdsc.edu ([132.249.69.68])
 with mapi; Tue, 21 Sep 2010 12:11:29 -0700
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 21 Sep 2010 12:11:25 -0700
Subject: Best practice for embedding extra information in an index
Thread-Topic: Best practice for embedding extra information in an index
Thread-Index: ActZwCjn6FxsqT6zRNO+7IcHwkhdjg==
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B128CF5B3DE047@MBX.ad.sdsc.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I'm curious about embedding extra information in an index (and being able t=
o search the extra information as well). In this case certain tokens corres=
pond to recognized entities with ids. I'd like to get the ids into the inde=
x so that searching for the id of the entity will also return that document=
. I can think of three ways and I was curious if there's a preferred way:
1) Add the id as another token during filtering
2) Add the id as a payload
3) Add the id as an attribute (although I don't know how to search on the a=
ttribute value)

Thanks,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 20:20:13 2010
Return-Path: <java-user-return-47289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16366 invoked from network); 21 Sep 2010 20:20:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 20:20:13 -0000
Received: (qmail 95362 invoked by uid 500); 21 Sep 2010 20:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95315 invoked by uid 500); 21 Sep 2010 20:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95307 invoked by uid 99); 21 Sep 2010 20:20:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 20:20:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alertli@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 20:20:02 +0000
Received: by wyf23 with SMTP id 23so8471588wyf.35
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 13:19:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=Vkz/FdIoxGMF/fY4U0qdhb/wEhaJOTIiTwqVPsJCbSo=;
        b=W7wVwkL+qX2rOqa/Fqq+pkX5mp0ekvjl513SGad+8joD2ntVVV7CTyLMiwKSYjH3VM
         /kP2c2LdF0H0g0OzhRCfW+8DiHQoVzvadpcsQTu20+7J6BQyRXA69jBWJrzOj9+cNB4F
         7gkxpVHVYdPcaPZCwCY3ZHaTFr5Vk/U5mz1nQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=dFTzzSCrv1NX38F0RcGs8+yDEfvDgy9d40BFgZ/Fi2MECTUaUP+q3KRCKRv3NPWA3r
         FH02pRAVO1Qy7mQm6ooQn/1+nPuublLxCB1SL21Bq7WmFJwcX/+HMi7ZO8/MQAJ+9VlY
         DrmuC0NB5Rb0lECSiJ44EINKXZl1DC3aetOxo=
MIME-Version: 1.0
Received: by 10.216.178.130 with SMTP id f2mr9626182wem.101.1285100382433;
 Tue, 21 Sep 2010 13:19:42 -0700 (PDT)
Received: by 10.216.29.6 with HTTP; Tue, 21 Sep 2010 13:19:42 -0700 (PDT)
Date: Tue, 21 Sep 2010 16:19:42 -0400
Message-ID: <AANLkTinPFBOFBpRQnXbJBW3kYt0SMhTCwYeAsPOoU8A_@mail.gmail.com>
Subject: How to calculate the fieldNorm
From: Qi Li <alertli@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363ba1f8cbc9280490cabf8b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363ba1f8cbc9280490cabf8b
Content-Type: text/plain; charset=ISO-8859-1

Hi, guys:

I read this  http://lucene.apache.org/java/3_0_2/api/core/index.html . But I
am confused about how the fieldNorm is calculated after seeing the
explanation.

( I am using StandardAnalyzer for both index and search)
*1.. Index Part*
     document 0:
           doc.add(new Field("test","it's time to pay income tax",
Field.Store.YES, Field.Index.Analyzed));
           doc.add(new Field("test","return library books on time",
Field.Store.YES, Field.Index.Analyzed));

     document 1:
          doc.add(new Field("test","it's time to pay income tax return
library books on time", Field.Store.YES, Field.Index.Analyzed));

*2.  Search Part*
        QueryParser parser = new QueryParser(Version.LUCENE_30,
"test",standard);
        Query query = parser.parse("tax return");
       TopDocs hits = searcher.search(query, 10);

*3.  Result with explanation*

*document id: 0*
score : 26.905577
26.905577 = (MATCH) sum of:
  13.452788 = (MATCH) weight(major:tax in 0), product of:
    0.70710677 = queryWeight(major:tax), product of:
      0.5945349 = idf(docFreq=2, maxDocs=2)
      1.1893445 = queryNorm
    19.025116 = (MATCH) fieldWeight(major:tax in 0), product of:
      1.0 = tf(termFreq(major:tax)=1)
      0.5945349 = idf(docFreq=2, maxDocs=2)
*      32.0 = fieldNorm(field=major, doc=0)*
  13.452788 = (MATCH) weight(major:return in 0), product of:
    0.70710677 = queryWeight(major:return), product of:
      0.5945349 = idf(docFreq=2, maxDocs=2)
      1.1893445 = queryNorm
    19.025116 = (MATCH) fieldWeight(major:return in 0), product of:
      1.0 = tf(termFreq(major:return)=1)
      0.5945349 = idf(docFreq=2, maxDocs=2)
   *   32.0 = fieldNorm(field=major, doc=0)*

*document id: 1*
score : 0.31529972
0.31529972 = (MATCH) sum of:
  0.15764986 = (MATCH) weight(major:tax in 1), product of:
    0.70710677 = queryWeight(major:tax), product of:
      0.5945349 = idf(docFreq=2, maxDocs=2)
      1.1893445 = queryNorm
    0.22295058 = (MATCH) fieldWeight(major:tax in 1), product of:
      1.0 = tf(termFreq(major:tax)=1)
      0.5945349 = idf(docFreq=2, maxDocs=2)
      *0.375 = fieldNorm(field=major, doc=1)*
  0.15764986 = (MATCH) weight(major:return in 1), product of:
    0.70710677 = queryWeight(major:return), product of:
      0.5945349 = idf(docFreq=2, maxDocs=2)
      1.1893445 = queryNorm
    0.22295058 = (MATCH) fieldWeight(major:return in 1), product of:
      1.0 = tf(termFreq(major:return)=1)
      0.5945349 = idf(docFreq=2, maxDocs=2)
      *0.375 = fieldNorm(field=major, doc=1)*


*4. Questions:*
   1.  why the the value of fieldNorm is so different ?  (32.0   vs 0.375)
.
   2.  Anybody knows how to calculate the fieldNorm for this case by hand?

Thank you very much.

Best regards,
Qi Li

--0016363ba1f8cbc9280490cabf8b--

From java-user-return-47290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 20:26:34 2010
Return-Path: <java-user-return-47290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20652 invoked from network); 21 Sep 2010 20:26:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 20:26:33 -0000
Received: (qmail 7487 invoked by uid 500); 21 Sep 2010 20:26:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7430 invoked by uid 500); 21 Sep 2010 20:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7422 invoked by uid 99); 21 Sep 2010 20:26:30 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 20:26:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alertli@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 20:26:23 +0000
Received: by wyf23 with SMTP id 23so8480980wyf.35
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 13:25:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=V4Cyss4QMbYmyDunngeZkx/DkYGyg5MzrtfMZn80SjE=;
        b=FluFlcxHimxO67NP/dUhSx1usErQx1wUjjJCKkyAyDmqzPd8pBfyZ8IYA0GZT880D2
         e1PwX2SY3ReFNQmE/gezLRJJYnj/5e91WAM8m0UBuxLO/eSLOJH77GJBCjOCYlL/PMc6
         dlBgFHscY2swhG2dxymwgaIm8WOCwZ2tdkyqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=UtSsnFn1VONC0SzZ2FJuDvnxx1hbgKKjzNp9QgNssnmjqUTUDGAIlpp+WKTOGAIvjS
         pnIuUlrzoF99s7VVoDJip8EFn8ikbUNJy0bqx7DQyKcQjj6+KgH2YC581OUUhpLl2gvK
         BsCqV7je4fp5Z4DQkl5qZJR+tzm++JuUd7vGw=
MIME-Version: 1.0
Received: by 10.216.175.12 with SMTP id y12mr6095904wel.61.1285100759652; Tue,
 21 Sep 2010 13:25:59 -0700 (PDT)
Received: by 10.216.29.6 with HTTP; Tue, 21 Sep 2010 13:25:59 -0700 (PDT)
Date: Tue, 21 Sep 2010 16:25:59 -0400
Message-ID: <AANLkTinma1UKt+V0CS5VFL1rw6_sK82_=q4F=LNyyQBQ@mail.gmail.com>
Subject: how to change the getPositionIncrementGap for a field which has
 multiple values
From: Qi Li <alertli@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364164e9479b3a0490cad6b8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364164e9479b3a0490cad6b8
Content-Type: text/plain; charset=ISO-8859-1

Hi, Guys:

I try to change the getPositionIncrementGap for a field which has multiple
values per document on index time.  But got no clue how to approach this
issue.  Any ideas?

Thank you very much.

Best regards,
Qi Li

--0016364164e9479b3a0490cad6b8--

From java-user-return-47291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 23:22:09 2010
Return-Path: <java-user-return-47291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3217 invoked from network); 21 Sep 2010 23:22:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 23:22:09 -0000
Received: (qmail 23863 invoked by uid 500); 21 Sep 2010 23:22:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23791 invoked by uid 500); 21 Sep 2010 23:22:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23783 invoked by uid 99); 21 Sep 2010 23:22:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 23:22:06 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 23:22:00 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id D31DCB4FC2
	for <java-user@lucene.apache.org>; Wed, 22 Sep 2010 08:21:38 +0900 (JST)
Message-ID: <4C993E02.4060605@r.email.ne.jp>
Date: Wed, 22 Sep 2010 08:21:38 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using FastVectorHighlighter for snippets
References: <AANLkTimu-mNuqH2eAiBMwwfSHgyMs-ZpDnHKQnLi6zgu@mail.gmail.com>
In-Reply-To: <AANLkTimu-mNuqH2eAiBMwwfSHgyMs-ZpDnHKQnLi6zgu@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

  (10/09/22 3:24), Devshree Sane wrote:
> I am using the FastVectorHighlighter for retrieving snippets from the index.
>
>
> I am a bit confused about the parameters that are passed to the
> FastVectorHighlighter.getBestFragments() method. One parameter is a document
> id and another is the maximum number of fragments. Does it mean that only
> the maximum number of fragments will be retrieved from document with given
> id (even if there are more fragments in the same document)?
>
Correct.

> Is there a way to get the maximum number of fragments over the whole
> index(and not just 1 document)?
>
You need to put getBestFragments() in a loop:

for( int docId : ids in whole index ){
   String[] fragments = fvh.getBestFragments( ..., docId, ... );
   // ...
}

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 23:25:14 2010
Return-Path: <java-user-return-47292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3637 invoked from network); 21 Sep 2010 23:25:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 23:25:14 -0000
Received: (qmail 27235 invoked by uid 500); 21 Sep 2010 23:25:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27184 invoked by uid 500); 21 Sep 2010 23:25:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27176 invoked by uid 99); 21 Sep 2010 23:25:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 23:25:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 23:25:06 +0000
Received: by qyk2 with SMTP id 2so7619422qyk.14
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 16:24:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=DdxtRujiA+bBu6pFsPEl8HHu8p8swhoKZMJ8dIHXcyM=;
        b=Q6j+UakVe4DSCHMH5iBV/DsZJVI3iXLeKWcZNKgAncBik0Gs/yh0GEiH9pPh6QJJ6x
         uzc9eptFKaf3I6BiMvQ6gIhsxuwrcI9TwlaamvOgtOYqiONiTiway3FTU4b7nWOh706d
         ikCcqQWVbtRS80ekCwqH6DKZtksm3CAAXHC6c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ew//ICDwtzgy/D84urbSk9uzv8lKCqyOnlAJKerawkxbAPo5R4gHF9kVcMa+hrIdps
         X8ukeu60KHC5xYZ+Ru9Nn5LaNbny/PaDM7gge2GakDrXKIrJn8y7Juh0zwbIBsSy48a5
         k/CB7c+/EECvDdC4wm++XQSZTPhgSbi+8Ldd8=
MIME-Version: 1.0
Received: by 10.224.28.134 with SMTP id m6mr7572408qac.150.1285111485496; Tue,
 21 Sep 2010 16:24:45 -0700 (PDT)
Received: by 10.229.225.20 with HTTP; Tue, 21 Sep 2010 16:24:45 -0700 (PDT)
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B128CF5B3DE047@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B128CF5B3DE047@MBX.ad.sdsc.edu>
Date: Tue, 21 Sep 2010 19:24:45 -0400
Message-ID: <AANLkTi=_2Do75ibsHMVTnZNgfZEE4Vx3wZiEv4vv7suF@mail.gmail.com>
Subject: Re: Best practice for embedding extra information in an index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cf71296ff1f0490cd55e6

--0015175cf71296ff1f0490cd55e6
Content-Type: text/plain; charset=ISO-8859-1

Off the top of my head...
1) is certainly easiest. This looks suspiciously like synonyms. That is, at
index
    time you inject the ID as a synonym in the text and it gets indexed at
the same
    position as the token. Why this helps is that then phrase queries
continue to
    work. Lucene in Action has an example of creating a synonym analyzer.
2) I don't see how payloads really help you here. I confess I'm not
intimately
    familiar with payloads, but what I've seen is that they're useful when
you
    match the *term* and want to do something special. Uses I've seen are,
    for instance, parts of speech. So one can alter the score of, say, nouns
    to boost matches on nouns. But I don't recall seeing something that
allows
    the payload data to be the match.
3)  I have no idea what an attribute is in this context <G>..... Although
you
    could simply create another field that contained all of the IDs for the
    document and add an SHOULD clause to all your queries on that field.

HTH
Erick

On Tue, Sep 21, 2010 at 3:11 PM, Christopher Condit <condit@sdsc.edu> wrote:

> I'm curious about embedding extra information in an index (and being able
> to search the extra information as well). In this case certain tokens
> correspond to recognized entities with ids. I'd like to get the ids into the
> index so that searching for the id of the entity will also return that
> document. I can think of three ways and I was curious if there's a preferred
> way:
> 1) Add the id as another token during filtering
> 2) Add the id as a payload
> 3) Add the id as an attribute (although I don't know how to search on the
> attribute value)
>
> Thanks,
> -Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cf71296ff1f0490cd55e6--

From java-user-return-47293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 21 23:31:11 2010
Return-Path: <java-user-return-47293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9948 invoked from network); 21 Sep 2010 23:31:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Sep 2010 23:31:11 -0000
Received: (qmail 35257 invoked by uid 500); 21 Sep 2010 23:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35199 invoked by uid 500); 21 Sep 2010 23:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35191 invoked by uid 99); 21 Sep 2010 23:31:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 23:31:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Sep 2010 23:31:01 +0000
Received: by qwk3 with SMTP id 3so911384qwk.35
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 16:30:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=mFZITzXy7bNGfTzmzGzy9lW9vjdqmrb6T4qayr7C5k0=;
        b=RppKfiUdG8BOdzUlxlpX4maJcacz+rmlu80hNxW7C3Tn+EHh7v5nYkF3s6CrXybf2v
         MfZFegloRLq6/80sNQ936a6n3TEZgvBR1aazOgQdzjLhRxdsQMw2qw1IF8mlJT4Mmx07
         bI9O2dg0779nl1BjngM+4YzkAwjvlHfT3IxSo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=J2mSibkrRuSav/XBazKvqYr/6Q9Clm9nqek8sUh59Gvm6yvwGc+nYgGepxTTvlCGfT
         3U2usEQS7Y/y3fPCgh0kMr/GGnGJcNAotW4glxQrwh7c+CvlUUbc3ZuJec0fHFuL6wkc
         cYRr7NQ8oospRmAcbHLvZLc7ePrNpgeDK4c50=
MIME-Version: 1.0
Received: by 10.229.214.210 with SMTP id hb18mr7966237qcb.68.1285111840260;
 Tue, 21 Sep 2010 16:30:40 -0700 (PDT)
Received: by 10.229.225.20 with HTTP; Tue, 21 Sep 2010 16:30:40 -0700 (PDT)
In-Reply-To: <AANLkTinma1UKt+V0CS5VFL1rw6_sK82_=q4F=LNyyQBQ@mail.gmail.com>
References: <AANLkTinma1UKt+V0CS5VFL1rw6_sK82_=q4F=LNyyQBQ@mail.gmail.com>
Date: Tue, 21 Sep 2010 19:30:40 -0400
Message-ID: <AANLkTi=P4vr2B+0N+YwZrh4j5anJA951Rr7EOECgRMNV@mail.gmail.com>
Subject: Re: how to change the getPositionIncrementGap for a field which has
 multiple values
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e83babc43020490cd6a3b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e83babc43020490cd6a3b
Content-Type: text/plain; charset=ISO-8859-1

You should be able to subclass your favorite Analyzer and
then just override that method.

Best
Erick

On Tue, Sep 21, 2010 at 4:25 PM, Qi Li <alertli@gmail.com> wrote:

> Hi, Guys:
>
> I try to change the getPositionIncrementGap for a field which has multiple
> values per document on index time.  But got no clue how to approach this
> issue.  Any ideas?
>
> Thank you very much.
>
> Best regards,
> Qi Li
>

--0016361e83babc43020490cd6a3b--

From java-user-return-47294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 22 01:27:41 2010
Return-Path: <java-user-return-47294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76179 invoked from network); 22 Sep 2010 01:27:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Sep 2010 01:27:41 -0000
Received: (qmail 29684 invoked by uid 500); 22 Sep 2010 01:27:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29643 invoked by uid 500); 22 Sep 2010 01:27:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29634 invoked by uid 99); 22 Sep 2010 01:27:38 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 01:27:38 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 01:27:15 +0000
Received: by qyk8 with SMTP id 8so5709441qyk.14
        for <java-user@lucene.apache.org>; Tue, 21 Sep 2010 18:26:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding:x-antivirus
         :x-antivirus-status;
        bh=4OLMk1fzDhWrR7u0oYLXRtN47YRBTabND/ZWEEUAQrk=;
        b=kOyxPBJJc1pG5EpssROGRsPQFve9OSpMFfsRqGXxWn3hMxRUdJWq81jhBvTMGWcFLB
         mJVEi8Q6VecoaC9K7eqjPKcvLyGI6jxy5RmAKq1mAgZbxbL8+sIhkA/dQTDfLeDq3ulU
         HFR1haF27/c0GlvsWkILpu16eccI7pUX6SSrM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding:x-antivirus
         :x-antivirus-status;
        b=flXFQwPlcyGmjsyETjeq5EfIP25etc0Xb9CbyQ10RiXefdTPBSNfo4eGtks0hBAocm
         eKxTC3ZUK+ow9cv1QUVcZB0k+rnALMhgwR02zidnU25zTpHKbm1/PF6zzM8uyoyytkKd
         YB1rEmzica1xF0c9wBvW5ptYv/ZZrb+fSMNTM=
Received: by 10.220.63.10 with SMTP id z10mr6208412vch.0.1285118814990;
        Tue, 21 Sep 2010 18:26:54 -0700 (PDT)
Received: from [127.0.0.1] ([209.19.58.106])
        by mx.google.com with ESMTPS id a10sm3914277vci.40.2010.09.21.18.26.52
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 21 Sep 2010 18:26:53 -0700 (PDT)
Message-ID: <4C995B58.7020706@gmail.com>
Date: Tue, 21 Sep 2010 18:26:48 -0700
From: Lance Norskog <goksron@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.13) Gecko/20100914 SeaMonkey/2.0.8
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to export lucene index to a simple text file?
References: <AANLkTinAgjTmF3LDSuNHj8je2cWiw96D6f-p_=gFDUMj@mail.gmail.com>	<000501cb59aa$3b82eea0$b288cbe0$@thetaphi.de> <AANLkTimKE2kmycdBqCMZJn2cA1tuLzJS3b4Vk4c24EeP@mail.gmail.com>
In-Reply-To: <AANLkTimKE2kmycdBqCMZJn2cA1tuLzJS3b4Vk4c24EeP@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 100921-1, 09/21/2010), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

The Lucene CheckIndex program opens an index and walks all of the data 
structures. It is a good start for you.

Sahin Buyrukbilen wrote:
> Thank you Uwe, I will read the docs and try to do it, however do you have an
> example code? I need because I am not very familiar with Java.
>
> Thank you.
>
> Sahin
>
> On Tue, Sep 21, 2010 at 12:29 PM, Uwe Schindler<uwe@thetaphi.de>  wrote:
>
>    
>> Hi,
>>
>> Retrieve a TermEnum and iterate it. By that you get all terms and can
>> retrieve the docFreq, which is the second column in your table. Finally for
>> each term you position the TermDocs enum on this term to get all document
>> ids. Read docs of IndexReader/TermEnum/TermDocs about this.
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>      
>>> -----Original Message-----
>>> From: Sahin Buyrukbilen [mailto:sahin.buyrukbilen@gmail.com]
>>> Sent: Tuesday, September 21, 2010 9:12 AM
>>> To: java-user@lucene.apache.org
>>> Subject: How to export lucene index to a simple text file?
>>>
>>> Hi,
>>>
>>> I am currently working on a project about private information retrieval
>>>        
>> and I
>>      
>>> need to have an inverted index file in txt format as follows:
>>>
>>> Term t    freq t      Inverted list for t
>>> -------------------------------------------------------------------------
>>> and          1<6, 0.159>
>>> big           2<2, 0.148>  <3, 0.088>
>>> dark         1<6, 0.079>
>>> .
>>> .
>>> .
>>> .
>>>
>>> here the<number1, number2>  pairs are indicating: number1: doc ID, where
>>> term t exist with a rank of number2.
>>>
>>> I have created an index from 5492 txt files, however the index is
>>>        
>> composed
>> of
>>      
>>> different files and most of the data is not in the text format.
>>>
>>> could somebody guide me to achieve this?
>>>
>>> Thank you
>>>
>>> Sahin.
>>>        
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 22 09:31:41 2010
Return-Path: <java-user-return-47295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76505 invoked from network); 22 Sep 2010 09:31:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Sep 2010 09:31:41 -0000
Received: (qmail 44296 invoked by uid 500); 22 Sep 2010 09:31:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43740 invoked by uid 500); 22 Sep 2010 09:31:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43727 invoked by uid 99); 22 Sep 2010 09:31:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 09:31:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 09:31:27 +0000
Received: by wyf23 with SMTP id 23so384761wyf.35
        for <java-user@lucene.apache.org>; Wed, 22 Sep 2010 02:31:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.69.78 with SMTP id y14mr4422447wbi.212.1285147866766; Wed,
 22 Sep 2010 02:31:06 -0700 (PDT)
Received: by 10.216.74.67 with HTTP; Wed, 22 Sep 2010 02:31:06 -0700 (PDT)
In-Reply-To: <4C995B58.7020706@gmail.com>
References: <AANLkTinAgjTmF3LDSuNHj8je2cWiw96D6f-p_=gFDUMj@mail.gmail.com>
	<000501cb59aa$3b82eea0$b288cbe0$@thetaphi.de>
	<AANLkTimKE2kmycdBqCMZJn2cA1tuLzJS3b4Vk4c24EeP@mail.gmail.com>
	<4C995B58.7020706@gmail.com>
Date: Wed, 22 Sep 2010 05:31:06 -0400
Message-ID: <AANLkTimExcynARTjO-OnaTCVj5wsg_jW03aJENLZMYpf@mail.gmail.com>
Subject: Re: How to export lucene index to a simple text file?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Saving the index in text format would also be a fun codec (in 4.0) to creat=
e :)

Ie, the codec would be read/write.  The performance wouldn't be great,
but it'd be neat for debugging, teaching, transparency purposes...

Mike

On Tue, Sep 21, 2010 at 9:26 PM, Lance Norskog <goksron@gmail.com> wrote:
> The Lucene CheckIndex program opens an index and walks all of the data
> structures. It is a good start for you.
>
> Sahin Buyrukbilen wrote:
>>
>> Thank you Uwe, I will read the docs and try to do it, however do you hav=
e
>> an
>> example code? I need because I am not very familiar with Java.
>>
>> Thank you.
>>
>> Sahin
>>
>> On Tue, Sep 21, 2010 at 12:29 PM, Uwe Schindler<uwe@thetaphi.de> =A0wrot=
e:
>>
>>
>>>
>>> Hi,
>>>
>>> Retrieve a TermEnum and iterate it. By that you get all terms and can
>>> retrieve the docFreq, which is the second column in your table. Finally
>>> for
>>> each term you position the TermDocs enum on this term to get all docume=
nt
>>> ids. Read docs of IndexReader/TermEnum/TermDocs about this.
>>>
>>> Uwe
>>>
>>> -----
>>> Uwe Schindler
>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>> http://www.thetaphi.de
>>> eMail: uwe@thetaphi.de
>>>
>>>
>>>>
>>>> -----Original Message-----
>>>> From: Sahin Buyrukbilen [mailto:sahin.buyrukbilen@gmail.com]
>>>> Sent: Tuesday, September 21, 2010 9:12 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: How to export lucene index to a simple text file?
>>>>
>>>> Hi,
>>>>
>>>> I am currently working on a project about private information retrieva=
l
>>>>
>>>
>>> and I
>>>
>>>>
>>>> need to have an inverted index file in txt format as follows:
>>>>
>>>> Term t =A0 =A0freq t =A0 =A0 =A0Inverted list for t
>>>>
>>>> ----------------------------------------------------------------------=
---
>>>> and =A0 =A0 =A0 =A0 =A01<6, 0.159>
>>>> big =A0 =A0 =A0 =A0 =A0 2<2, 0.148> =A0<3, 0.088>
>>>> dark =A0 =A0 =A0 =A0 1<6, 0.079>
>>>> .
>>>> .
>>>> .
>>>> .
>>>>
>>>> here the<number1, number2> =A0pairs are indicating: number1: doc ID, w=
here
>>>> term t exist with a rank of number2.
>>>>
>>>> I have created an index from 5492 txt files, however the index is
>>>>
>>>
>>> composed
>>> of
>>>
>>>>
>>>> different files and most of the data is not in the text format.
>>>>
>>>> could somebody guide me to achieve this?
>>>>
>>>> Thank you
>>>>
>>>> Sahin.
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 22 09:36:16 2010
Return-Path: <java-user-return-47296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77813 invoked from network); 22 Sep 2010 09:36:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Sep 2010 09:36:16 -0000
Received: (qmail 48047 invoked by uid 500); 22 Sep 2010 09:36:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47671 invoked by uid 500); 22 Sep 2010 09:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47658 invoked by uid 99); 22 Sep 2010 09:36:09 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 09:36:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of devshree.sane@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 09:35:47 +0000
Received: by ewy10 with SMTP id 10so102752ewy.35
        for <java-user@lucene.apache.org>; Wed, 22 Sep 2010 02:35:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=jI9fGWTZx7CGU7i4klkk2fa4k86bXHnaRBQXbAbyX7M=;
        b=jFhvb/JP/g/4x05mioSxh72OpAdWY6MpW083IPiiHkU0Eld2jsVHmwGqDE0CM/6yZr
         /pw1oq13/DJAPzRuwu8bThF9jvCsa7ePbMGqbIU1AQ4W7VibZUB4MkLg7JFKYkHtG69n
         npjcP/Y96GNo5DAScNkIf++Jkfcudry5tpsXA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PI60pON7uhlcDGkdzGtbKcGghGlDSt3xjKMU49meMvhHcYgw1e7ljdswW5EZhVjrEB
         6cJLOQk1FxiOSuScacvZwhe4lsbXsFN/oAftq/2lhWQ1e5g9l4PoZWqPPb2ExUFxAlam
         ngghuTotDvE0Z4Cy+bGcIPJWQP0hfSpx8Urs4=
MIME-Version: 1.0
Received: by 10.213.4.202 with SMTP id 10mr5043568ebs.73.1285148127766; Wed,
 22 Sep 2010 02:35:27 -0700 (PDT)
Received: by 10.213.14.193 with HTTP; Wed, 22 Sep 2010 02:35:27 -0700 (PDT)
In-Reply-To: <4C993E02.4060605@r.email.ne.jp>
References: <AANLkTimu-mNuqH2eAiBMwwfSHgyMs-ZpDnHKQnLi6zgu@mail.gmail.com>
	<4C993E02.4060605@r.email.ne.jp>
Date: Wed, 22 Sep 2010 15:05:27 +0530
Message-ID: <AANLkTi=nW52nO2P+=myxkVLBMZue-AJOYAWaJuMJDRAM@mail.gmail.com>
Subject: Re: Using FastVectorHighlighter for snippets
From: Devshree Sane <devshree.sane@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174bf1b6a3a8aa0490d5ddc6
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174bf1b6a3a8aa0490d5ddc6
Content-Type: text/plain; charset=ISO-8859-1

Thanks for your reply Koji.

On Wed, Sep 22, 2010 at 4:51 AM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

>  (10/09/22 3:24), Devshree Sane wrote:
>
>> I am a bit confused about the parameters that are passed to the
>> FastVectorHighlighter.getBestFragments() method. One parameter is a
>> document
>> id and another is the maximum number of fragments. Does it mean that only
>> the maximum number of fragments will be retrieved from document with given
>> id (even if there are more fragments in the same document)?
>>
>>  Correct.
>
>
I did a little experiment for this. Following are my observations.
Changing the number of characters from 100 to 1000 decreased the number of
fragments returned.

Is this because the document text was covered with a few 1000 character
fragments? If so, then this means that one fragment can contain more than
one occurrence of the query term. Is this so? If yes, is there a way to find
the number of occurrences of the query term inside a particular
snippet/fragment?

Also is there a way to get the beginning and ending positions/offsets in the
document of the snippet/fragment being returned?

--0015174bf1b6a3a8aa0490d5ddc6--

From java-user-return-47297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 22 09:41:14 2010
Return-Path: <java-user-return-47297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79026 invoked from network); 22 Sep 2010 09:41:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Sep 2010 09:41:14 -0000
Received: (qmail 52724 invoked by uid 500); 22 Sep 2010 09:41:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52359 invoked by uid 500); 22 Sep 2010 09:41:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52351 invoked by uid 99); 22 Sep 2010 09:41:09 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 09:41:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adrianocrestani@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 09:40:48 +0000
Received: by iwn9 with SMTP id 9so493824iwn.35
        for <java-user@lucene.apache.org>; Wed, 22 Sep 2010 02:40:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=kmMgchZAkxv0KMR6GGRkL1EdqDAASzH6k3tsYI/5rqM=;
        b=gfmq9vNWv1+Ppw5jgzaBNrb2/V2CDZFOVbLUSG5/S4Uw0q9w0uBfeyDxliCPR6EoE3
         VFwja8c4dhNYUR7Mge9f63R1/VXV9zEHN49p8XB0DekF+n+z8okpA5RlszUna/+SC8uQ
         wqMy4fsx9mVC+H9RlSmXYqjBbTNnyEMK984uM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=bFUcfWlNWTNjDS+ltOVRv+mcmuDRSEz+YEyB7YexivD1orkxFAZGO2N0dpL0Uj5oOq
         b6uIbroVfHSJw4coLpTd5+QvnLCx1GE3Fg549A3BwkSl9ls7pOwT8pivigzbw//2K3zx
         MQ4p9mu1ZNkNs4wkJhjn3x2XH4U1JMaQpPc+Y=
Received: by 10.231.30.76 with SMTP id t12mr13524534ibc.161.1285148427180;
 Wed, 22 Sep 2010 02:40:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.144.68 with HTTP; Wed, 22 Sep 2010 02:40:07 -0700 (PDT)
In-Reply-To: <AANLkTimExcynARTjO-OnaTCVj5wsg_jW03aJENLZMYpf@mail.gmail.com>
References: <AANLkTinAgjTmF3LDSuNHj8je2cWiw96D6f-p_=gFDUMj@mail.gmail.com>
 <000501cb59aa$3b82eea0$b288cbe0$@thetaphi.de> <AANLkTimKE2kmycdBqCMZJn2cA1tuLzJS3b4Vk4c24EeP@mail.gmail.com>
 <4C995B58.7020706@gmail.com> <AANLkTimExcynARTjO-OnaTCVj5wsg_jW03aJENLZMYpf@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Wed, 22 Sep 2010 05:40:07 -0400
Message-ID: <AANLkTi==xW9Uipr+4OYKnWuMSMDo39A2XPcaSGrc8N0e@mail.gmail.com>
Subject: Re: How to export lucene index to a simple text file?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> Saving the index in text format would also be a fun codec (in 4.0) to cre=
ate :)

A codec like that would be welcome :)

On Wed, Sep 22, 2010 at 5:31 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Saving the index in text format would also be a fun codec (in 4.0) to cre=
ate :)
>
> Ie, the codec would be read/write. =A0The performance wouldn't be great,
> but it'd be neat for debugging, teaching, transparency purposes...
>
> Mike
>
> On Tue, Sep 21, 2010 at 9:26 PM, Lance Norskog <goksron@gmail.com> wrote:
>> The Lucene CheckIndex program opens an index and walks all of the data
>> structures. It is a good start for you.
>>
>> Sahin Buyrukbilen wrote:
>>>
>>> Thank you Uwe, I will read the docs and try to do it, however do you ha=
ve
>>> an
>>> example code? I need because I am not very familiar with Java.
>>>
>>> Thank you.
>>>
>>> Sahin
>>>
>>> On Tue, Sep 21, 2010 at 12:29 PM, Uwe Schindler<uwe@thetaphi.de> =A0wro=
te:
>>>
>>>
>>>>
>>>> Hi,
>>>>
>>>> Retrieve a TermEnum and iterate it. By that you get all terms and can
>>>> retrieve the docFreq, which is the second column in your table. Finall=
y
>>>> for
>>>> each term you position the TermDocs enum on this term to get all docum=
ent
>>>> ids. Read docs of IndexReader/TermEnum/TermDocs about this.
>>>>
>>>> Uwe
>>>>
>>>> -----
>>>> Uwe Schindler
>>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>>> http://www.thetaphi.de
>>>> eMail: uwe@thetaphi.de
>>>>
>>>>
>>>>>
>>>>> -----Original Message-----
>>>>> From: Sahin Buyrukbilen [mailto:sahin.buyrukbilen@gmail.com]
>>>>> Sent: Tuesday, September 21, 2010 9:12 AM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: How to export lucene index to a simple text file?
>>>>>
>>>>> Hi,
>>>>>
>>>>> I am currently working on a project about private information retriev=
al
>>>>>
>>>>
>>>> and I
>>>>
>>>>>
>>>>> need to have an inverted index file in txt format as follows:
>>>>>
>>>>> Term t =A0 =A0freq t =A0 =A0 =A0Inverted list for t
>>>>>
>>>>> ---------------------------------------------------------------------=
----
>>>>> and =A0 =A0 =A0 =A0 =A01<6, 0.159>
>>>>> big =A0 =A0 =A0 =A0 =A0 2<2, 0.148> =A0<3, 0.088>
>>>>> dark =A0 =A0 =A0 =A0 1<6, 0.079>
>>>>> .
>>>>> .
>>>>> .
>>>>> .
>>>>>
>>>>> here the<number1, number2> =A0pairs are indicating: number1: doc ID, =
where
>>>>> term t exist with a rank of number2.
>>>>>
>>>>> I have created an index from 5492 txt files, however the index is
>>>>>
>>>>
>>>> composed
>>>> of
>>>>
>>>>>
>>>>> different files and most of the data is not in the text format.
>>>>>
>>>>> could somebody guide me to achieve this?
>>>>>
>>>>> Thank you
>>>>>
>>>>> Sahin.
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 22 11:35:05 2010
Return-Path: <java-user-return-47298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13072 invoked from network); 22 Sep 2010 11:35:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Sep 2010 11:35:04 -0000
Received: (qmail 77881 invoked by uid 500); 22 Sep 2010 11:35:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77734 invoked by uid 500); 22 Sep 2010 11:34:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77726 invoked by uid 99); 22 Sep 2010 11:34:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 11:34:58 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 11:34:52 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id B94EB581
	for <java-user@lucene.apache.org>; Wed, 22 Sep 2010 07:34:31 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Wed, 22 Sep 2010 07:34:31 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=from:content-type:subject:date:message-id:to:mime-version; s=smtpout; bh=v8HgslgHlwevuqpC28uvbi1IWzQ=; b=M+RtsOp0FfQGLU1RPK2pIystmqajI4CzKIAstDSFk71ENWJwVP7LVScfSCfso40YFulNnyGXxA4OsGOjOuktgwTjsuZ5LT5rv/GY4DK9EGhaVviowfgpQU2TIXrYIQAzO31QhOD3YrcsdmJi34JRoNgy6vvKXyiqiFlMqTo4c+8=
X-Sasl-enc: YtgFq914LOBBCiENgwuLyLsqWj1Gq0JtJovmoqh4UTIL 1285155269
Received: from [192.168.123.137] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 71E755E11DC
	for <java-user@lucene.apache.org>; Wed, 22 Sep 2010 07:34:29 -0400 (EDT)
From: Eric Bowman <ebowman@boboco.ie>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--242093632
Subject: Lucene job in Amsterdam
Date: Wed, 22 Sep 2010 12:34:27 +0100
Message-Id: <655A3562-C2CF-4BDD-B329-0EE157B4C9C7@boboco.ie>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)

--Apple-Mail-1--242093632
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hi,

We're looking for a senior, experienced Lucene engineer to work on a =
high performance location search platform for a Dutch company in =
Amsterdam. This is not a contract role, sorry.

Please email me if this might be interesting to you.  (I'm not a =
recruiter; I'm involved in the project...)

Thanks,
Eric Bowman
ebowman@boboco.ie

--Apple-Mail-1--242093632--

From java-user-return-47299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 22 20:17:13 2010
Return-Path: <java-user-return-47299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30928 invoked from network); 22 Sep 2010 20:17:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Sep 2010 20:17:13 -0000
Received: (qmail 79602 invoked by uid 500); 22 Sep 2010 20:17:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77841 invoked by uid 500); 22 Sep 2010 20:17:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77800 invoked by uid 99); 22 Sep 2010 20:17:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 20:17:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ridabenjelloun@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Sep 2010 20:16:59 +0000
Received: by eyg5 with SMTP id 5so271451eyg.35
        for <multiple recipients>; Wed, 22 Sep 2010 13:16:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=w3LhDTT4RJe6a/rMY2WtQMVdr6nbdv5iF3RTS4oZKyM=;
        b=D/nNCnnBDJ3RChYMoz1blXi0hx1nncqc2sGVV4qGXFHxMAg05zhkWujd+r0zrsuVvg
         7jQp+g8kC8hrVKNbhAC8X21Ud3VXjfkiBv0Tga68FLSLmE5ocVB+yfCP5caNcBBdPPBu
         ZRhphtaKmVbnmqwDY3bq1nDlFkiPnC+Mjp43E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        b=MsTauer4yTPMywMcFY6R7t9TsH+MdwAktunrzyigPv/brmRSsfr2haBlUQ3bXcuPcO
         dwv8JLNtbB7kZM1ivHfpSle8GMp6AK84D3/YomZwxZs8hpkdUTFXOkqp2ty7MTFdbT7r
         Zuleh60kI72o4ksvuwA6oeasY7wl2h8RvRcYI=
MIME-Version: 1.0
Received: by 10.213.32.70 with SMTP id b6mr6032520ebd.19.1285186598661; Wed,
 22 Sep 2010 13:16:38 -0700 (PDT)
Sender: ridabenjelloun@gmail.com
Received: by 10.213.105.200 with HTTP; Wed, 22 Sep 2010 13:16:38 -0700 (PDT)
Date: Wed, 22 Sep 2010 16:16:38 -0400
X-Google-Sender-Auth: bd8hko-AQrqLm6zSJuQRp_2qX5A
Message-ID: <AANLkTikL8u5keR0Q76xBzTA+v0h5PYr8H6FuWY49H2At@mail.gmail.com>
Subject: Constellio Enterprise Search announces its first Open Source release
From: Rida Benjelloun <rida.benjelloun@doculibre.com>
To: java-user@lucene.apache.org, user@nutch.apache.org, 
	solr-user@lucene.apache.org, dev@lucene.apache.org, 
	solr-dev@lucene.apache.org, nutch-dev@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174be98caeeea60490ded22e
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174be98caeeea60490ded22e
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

The Constellio team is proud to announce the release of the first Open
Source version of Constellio Enterprise Search. It is available for downloa=
d
at the following address : http://www.constellio.com

Based on  Apache Solr and using Google Search Appliance's connector
architecture, Constellio provides the solution to index all sources of
information in your business.



Some key features :

=95 Administration interface

=95 Security management

=95 Federated search of all data of the organization;

=95 Discovery tool (faceted search);

=95 Real time indexing, Web, file system, mail, database, ECM and CRM crawl=
ers

=95 Search engine collaboration (Tagging, best bets, synonyms);

=95 Machine learning, Classification and clustering

=95 Thesaurus and taxonomy support using OWL and SKOS

=95 Entity extraction,

=95 Multilingual spell checker

=95 Reports and statistics on indexing and search;

=95 Supports multilingual interface (I18N);

=95 Supports over 15 languages (with stemming);

=95 Documents and fields boosting

=95 Search results sorting

=95 And more=85



---------------------------------------------------------
Rida Benjelloun
ridabenjelloun@apache.org
rida.benjelloun@doculibre.com
---------------------------------------------------------

--0015174be98caeeea60490ded22e--

From java-user-return-47300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 23 17:09:54 2010
Return-Path: <java-user-return-47300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35501 invoked from network); 23 Sep 2010 17:09:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Sep 2010 17:09:54 -0000
Received: (qmail 7664 invoked by uid 500); 23 Sep 2010 17:09:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7554 invoked by uid 500); 23 Sep 2010 17:09:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7546 invoked by uid 99); 23 Sep 2010 17:09:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 17:09:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of devshree.sane@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 17:09:44 +0000
Received: by eyg5 with SMTP id 5so642232eyg.35
        for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 10:09:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=6pwR4tTaXjOwV/OCHVmAMlBvNrF/7TPmBYYbEAVnjo8=;
        b=aOeR0MxpNXRGH6V8K5O7LmNU386oNUD1+9j55AyfwxKtusvUWQFf08qzNXaL0cUEms
         ysa0lJfqfdt00AuAHrKinykTvP45sg8EV3gcUGONoiKb0CDt/QhKTrCa13IK2urVzTor
         2BZmr1BeptsI9lqpX8xV81OISHiepHqOUA+do=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gcKelgERufs/CcxAVvikGrmqOS+DQXdTOZs6CoEbGhexeQ0jeYb/xCIZ6fCmVI2p9Q
         0m7JzVwx69iqtkWy6sD2Dkodi1dIL1R/4YUPORKxrw7j2loZS+uFiTDmfOtuSHUqgLhv
         WYVCzWN0H2wxPc4oAbgV8ALiPTr6JF/9S9wDo=
MIME-Version: 1.0
Received: by 10.213.28.208 with SMTP id n16mr2102292ebc.75.1285261763934; Thu,
 23 Sep 2010 10:09:23 -0700 (PDT)
Received: by 10.213.14.193 with HTTP; Thu, 23 Sep 2010 10:09:23 -0700 (PDT)
In-Reply-To: <AANLkTi=nW52nO2P+=myxkVLBMZue-AJOYAWaJuMJDRAM@mail.gmail.com>
References: <AANLkTimu-mNuqH2eAiBMwwfSHgyMs-ZpDnHKQnLi6zgu@mail.gmail.com>
	<4C993E02.4060605@r.email.ne.jp>
	<AANLkTi=nW52nO2P+=myxkVLBMZue-AJOYAWaJuMJDRAM@mail.gmail.com>
Date: Thu, 23 Sep 2010 22:39:23 +0530
Message-ID: <AANLkTikR1uFizRP9oDLTozoDdr3Wu4-Gp86bACHfRMhO@mail.gmail.com>
Subject: Re: Using FastVectorHighlighter for snippets
From: Devshree Sane <devshree.sane@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174be392e1f95d0490f0524f
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174be392e1f95d0490f0524f
Content-Type: text/plain; charset=ISO-8859-1

One more observation.
The length of the snippet returned is not equal to the  fragment length
specified.
Does anyone know the reason why?

On Wed, Sep 22, 2010 at 3:05 PM, Devshree Sane <devshree.sane@gmail.com>wrote:

> Thanks for your reply Koji.
>
> On Wed, Sep 22, 2010 at 4:51 AM, Koji Sekiguchi <koji@r.email.ne.jp>wrote:
>
>>  (10/09/22 3:24), Devshree Sane wrote:
>>
>>> I am a bit confused about the parameters that are passed to the
>>> FastVectorHighlighter.getBestFragments() method. One parameter is a
>>> document
>>> id and another is the maximum number of fragments. Does it mean that only
>>> the maximum number of fragments will be retrieved from document with
>>> given
>>> id (even if there are more fragments in the same document)?
>>>
>>>  Correct.
>>
>>
> I did a little experiment for this. Following are my observations.
> Changing the number of characters from 100 to 1000 decreased the number of
> fragments returned.
>
> Is this because the document text was covered with a few 1000 character
> fragments? If so, then this means that one fragment can contain more than
> one occurrence of the query term. Is this so? If yes, is there a way to find
> the number of occurrences of the query term inside a particular
> snippet/fragment?
>
> Also is there a way to get the beginning and ending positions/offsets in
> the document of the snippet/fragment being returned?
>
>
>
>
>

--0015174be392e1f95d0490f0524f--

From java-user-return-47301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 23 19:23:17 2010
Return-Path: <java-user-return-47301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95440 invoked from network); 23 Sep 2010 19:23:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Sep 2010 19:23:17 -0000
Received: (qmail 87382 invoked by uid 500); 23 Sep 2010 19:23:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87322 invoked by uid 500); 23 Sep 2010 19:23:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87312 invoked by uid 99); 23 Sep 2010 19:23:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 19:23:14 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [137.65.248.137] (HELO sinclair.provo.novell.com) (137.65.248.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 19:23:06 +0000
Received: from INET-PRV-MTA by sinclair.provo.novell.com
	with Novell_GroupWise; Thu, 23 Sep 2010 13:22:45 -0600
Message-Id: <4C9B54A4020000A30005147F@sinclair.provo.novell.com>
X-Mailer: Novell GroupWise Internet Agent 8.0.2 
Date: Thu, 23 Sep 2010 13:22:44 -0600
From: "Daniel Sanders" <dsanders@novell.com>
To: <java-user@lucene.apache.org>
Subject: Problem with Numeric range query.
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary="=__Part022FD814.0__="
X-Virus-Checked: Checked by ClamAV on apache.org

--=__Part022FD814.0__=
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable


I have a set of documents that all have a "timestamp" field which is =
stored as a long integer number. The field is indexed in my Lucene index =
as a number using NumericField with a precision step of 8:=20

   Field field =3D new NumericField("timestamp", 8);=20
   field.setLongValue( timestampValue);=20

I do this so I can do numeric range queries to retrieve all documents that =
fall within a specific time range.=20

The query I construct has two parts to it, a query, and a filter. I get =
the document hits as follows:=20

   IndexReader reader =3D ...... some index reader.....=20
   IndexSearcher searcher =3D new IndexSearcher(reader);=20

   Filter filter =3D NumericRangeFilter.newLongRange("timestamp", 8, =
startTime, endTime, false, true);=20
   Query query =3D new MatchAllDocsQuery();=20
   searcher.search( query, filter, myCollector); // My collector is a =
super class of Collector - saves all Hits=20

Occasionally, I have a single document with a very specific timestamp I =
want to retrieve. Suppose that timestamp is timeX, I will create the =
filter as follows:=20

   Filter filter =3D NumericRangeFilter.newLongRange("timestamp", 8, =
timeX-1, timeX, false, true);=20

But with this filter, the document that should be found is never found. I =
have even tried expanding the time range as follows, but with no =
success:=20

   Filter filter =3D NumericRangeFilter.newLongRange("timestamp", 8, =
timeX-1, timeX+500, false, true);=20

Strangely, a filter that should NOT have found the document actually did =
find the document:=20

   Filter filter =3D NumericRangeFilter.newLongRange("timestamp", 8, =
timeX, timeX+1000, false, true);=20

This filter should NOT have found the document since the minInclusive =
argument is false.=20

I have also noticed that sometimes when I have several documents with =
exactly the same timestamp, a query will return some, but not all, of the =
documents.=20

I have also tried to use a NumericRangeQuery as follows:=20

   Query query =3D NumericRangeQuery.newLongRange("timestamp", 8, timeX-1, =
timeX, false, true);=20
   searcher.search( query, null, myCollector);=20

This also fails to return my document(s).=20

Am I doing something wrong here? Have I misunderstood how this is supposed =
to work? Has anyone else had problems like this?=20


Thanks for any help or guidance or tips you can give me,=20

-Daniel Sanders 

--=__Part022FD814.0__=--

From java-user-return-47302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 23 20:04:31 2010
Return-Path: <java-user-return-47302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10536 invoked from network); 23 Sep 2010 20:04:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Sep 2010 20:04:31 -0000
Received: (qmail 58597 invoked by uid 500); 23 Sep 2010 20:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58444 invoked by uid 500); 23 Sep 2010 20:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58436 invoked by uid 99); 23 Sep 2010 20:04:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 20:04:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 20:04:21 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 2591B45EFD0
	for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 22:03:59 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2rYtwBcySF79 for <java-user@lucene.apache.org>;
	Thu, 23 Sep 2010 22:03:47 +0200 (CEST)
Received: from VEGA (unknown [207.179.4.183])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 21B1945EFCF
	for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 22:03:46 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4C9B54A4020000A30005147F@sinclair.provo.novell.com>
In-Reply-To: <4C9B54A4020000A30005147F@sinclair.provo.novell.com>
Subject: RE: Problem with Numeric range query.
Date: Thu, 23 Sep 2010 13:04:01 -0700
Message-ID: <005801cb5b5a$7c325a10$74970e30$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKkqkouzYDJvdNDTIlkTa/kyl/wpZFtXvDw
Content-Language: de

Hi,

Can you provide some self-containing testcase that shows your problem? In
most cases those problems are caused by not committing changes to
IndexWriter before opening the IndexReader.

Additionally, if you only want to look for exactly one timestamp (like a
TermQuery), use a NumericRangeQuery with upper+lower inclusive = true and
use the specific value to search for as both upper and lower.

You may also hit a bug, that's already solved in SVN (it happens when the
lower bound is near Long.MAX_VALUE or the upper bound near Long.MIN_VALUE):
https://issues.apache.org/jira/browse/LUCENE-2541

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Daniel Sanders [mailto:dsanders@novell.com]
> Sent: Thursday, September 23, 2010 12:23 PM
> To: java-user@lucene.apache.org
> Subject: Problem with Numeric range query.
> 
> 
> I have a set of documents that all have a "timestamp" field which is
stored as a
> long integer number. The field is indexed in my Lucene index as a number
> using NumericField with a precision step of 8:
> 
>    Field field = new NumericField("timestamp", 8);
>    field.setLongValue( timestampValue);
> 
> I do this so I can do numeric range queries to retrieve all documents that
fall
> within a specific time range.
> 
> The query I construct has two parts to it, a query, and a filter. I get
the
> document hits as follows:
> 
>    IndexReader reader = ...... some index reader.....
>    IndexSearcher searcher = new IndexSearcher(reader);
> 
>    Filter filter = NumericRangeFilter.newLongRange("timestamp", 8,
startTime,
> endTime, false, true);
>    Query query = new MatchAllDocsQuery();
>    searcher.search( query, filter, myCollector); // My collector is a
super class of
> Collector - saves all Hits
> 
> Occasionally, I have a single document with a very specific timestamp I
want to
> retrieve. Suppose that timestamp is timeX, I will create the filter as
follows:
> 
>    Filter filter = NumericRangeFilter.newLongRange("timestamp", 8,
timeX-1,
> timeX, false, true);
> 
> But with this filter, the document that should be found is never found. I
have
> even tried expanding the time range as follows, but with no success:
> 
>    Filter filter = NumericRangeFilter.newLongRange("timestamp", 8,
timeX-1,
> timeX+500, false, true);
> 
> Strangely, a filter that should NOT have found the document actually did
find
> the document:
> 
>    Filter filter = NumericRangeFilter.newLongRange("timestamp", 8, timeX,
> timeX+1000, false, true);
> 
> This filter should NOT have found the document since the minInclusive
> argument is false.
> 
> I have also noticed that sometimes when I have several documents with
exactly
> the same timestamp, a query will return some, but not all, of the
documents.
> 
> I have also tried to use a NumericRangeQuery as follows:
> 
>    Query query = NumericRangeQuery.newLongRange("timestamp", 8, timeX-1,
> timeX, false, true);
>    searcher.search( query, null, myCollector);
> 
> This also fails to return my document(s).
> 
> Am I doing something wrong here? Have I misunderstood how this is supposed
> to work? Has anyone else had problems like this?
> 
> 
> Thanks for any help or guidance or tips you can give me,
> 
> -Daniel Sanders


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 23 20:49:30 2010
Return-Path: <java-user-return-47303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30349 invoked from network); 23 Sep 2010 20:49:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Sep 2010 20:49:29 -0000
Received: (qmail 34211 invoked by uid 500); 23 Sep 2010 20:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34145 invoked by uid 500); 23 Sep 2010 20:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34136 invoked by uid 99); 23 Sep 2010 20:49:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 20:49:27 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [137.65.248.137] (HELO sinclair.provo.novell.com) (137.65.248.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 20:49:21 +0000
Received: from INET-PRV-MTA by sinclair.provo.novell.com
	with Novell_GroupWise; Thu, 23 Sep 2010 14:49:00 -0600
Message-Id: <4C9B68DA020000A30005148A@sinclair.provo.novell.com>
X-Mailer: Novell GroupWise Internet Agent 8.0.2 
Date: Thu, 23 Sep 2010 14:48:58 -0600
From: "Daniel Sanders" <dsanders@novell.com>
To: <java-user@lucene.apache.org>
Subject: RE: Problem with Numeric range query.
References: <4C9B54A4020000A30005147F@sinclair.provo.novell.com>
 <005801cb5b5a$7c325a10$74970e30$@thetaphi.de>
In-Reply-To: <005801cb5b5a$7c325a10$74970e30$@thetaphi.de>
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary="=__Part2805F22A.0__="

--=__Part2805F22A.0__=
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable


Thank you for your timely response.=20

It's going to take me longer to create an isolated test case you can test =
this with.  I will see what I can do.=20

In the meantime, I have some follow up information in response to your =
other suggestions.=20

1) I don't think my problem is that the IndexWriter has not committed the =
document.  Here's why:=20


In my test case, I first retrieve a document using a different lucene =
query on a different field.  From that document I extract the value for =
timestamp field and then perform the NumericRangeQuery on that value as =
described below.  I was doing as a way to create a unit test that would =
verify that the NumericRangeQuery was working properly.  I think the fact =
that first query found the document is evidence that the IndexWriter had =
committed the document.  Hence, I would expect that if I follow that query =
with a NumericRangeQuery it should be able to find the same document.=20

2) I also don't think my problem is values near Long.MIN_VALUE or =
Long.MAX_VALUE.  My values are all timestamps, which are positive integers =
that are not anywhere near those two extremes.  The values originally come =
from the java.util.Date.getTime() method.=20

3) I will try the upper+lower inclusive =3D true and using same value for =
min and max, although I don't see how that will change anything.  I have =
actually debugged through the code for NumericRangeQuery, and if minInclusi=
ve =3D=3D false, then min is incremented, and if maxInclusive =3D=3D =
false, then max is decremented.  So my query:=20

   NumericRangeQuery.newLongRange("timestamp",8,timeX-1,timeX,false,true)=
=20

is essentially equivalent to the query you suggest trying:=20

   NumericRangeQuery.newLongRange("timestamp",8,timeX,timeX,true,true)=20

right?=20

-Daniel Sanders=20


>>> "Uwe Schindler" <uwe@thetaphi.de> 9/23/2010 2:04 PM >>>
Hi,

Can you provide some self-containing testcase that shows your problem? In
most cases those problems are caused by not committing changes to
IndexWriter before opening the IndexReader.

Additionally, if you only want to look for exactly one timestamp (like a
TermQuery), use a NumericRangeQuery with upper+lower inclusive =3D true =
and
use the specific value to search for as both upper and lower.

You may also hit a bug, that's already solved in SVN (it happens when the
lower bound is near Long.MAX_VALUE or the upper bound near Long.MIN_VALUE):=

https://issues.apache.org/jira/browse/LUCENE-2541

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Daniel Sanders [mailto:dsanders@novell.com]
> Sent: Thursday, September 23, 2010 12:23 PM
> To: java-user@lucene.apache.org
> Subject: Problem with Numeric range query.
>
>
> I have a set of documents that all have a "timestamp" field which is
stored as a
> long integer number. The field is indexed in my Lucene index as a number
> using NumericField with a precision step of 8:
>
>    Field field =3D new NumericField("timestamp", 8);
>    field.setLongValue( timestampValue);
>
> I do this so I can do numeric range queries to retrieve all documents =
that
fall
> within a specific time range.
>
> The query I construct has two parts to it, a query, and a filter. I get
the
> document hits as follows:
>
>    IndexReader reader =3D ...... some index reader.....
>    IndexSearcher searcher =3D new IndexSearcher(reader);
>
>    Filter filter =3D NumericRangeFilter.newLongRange("timestamp", 8,
startTime,
> endTime, false, true);
>    Query query =3D new MatchAllDocsQuery();
>    searcher.search( query, filter, myCollector); // My collector is a
super class of
> Collector - saves all Hits
>
> Occasionally, I have a single document with a very specific timestamp I
want to
> retrieve. Suppose that timestamp is timeX, I will create the filter as
follows:
>
>    Filter filter =3D NumericRangeFilter.newLongRange("timestamp", 8,
timeX-1,
> timeX, false, true);
>
> But with this filter, the document that should be found is never found. =
I
have
> even tried expanding the time range as follows, but with no success:
>
>    Filter filter =3D NumericRangeFilter.newLongRange("timestamp", 8,
timeX-1,
> timeX+500, false, true);
>
> Strangely, a filter that should NOT have found the document actually did
find
> the document:
>
>    Filter filter =3D NumericRangeFilter.newLongRange("timestamp", 8, =
timeX,
> timeX+1000, false, true);
>
> This filter should NOT have found the document since the minInclusive
> argument is false.
>
> I have also noticed that sometimes when I have several documents with
exactly
> the same timestamp, a query will return some, but not all, of the
documents.
>
> I have also tried to use a NumericRangeQuery as follows:
>
>    Query query =3D NumericRangeQuery.newLongRange("timestamp", 8, =
timeX-1,
> timeX, false, true);
>    searcher.search( query, null, myCollector);
>
> This also fails to return my document(s).
>
> Am I doing something wrong here? Have I misunderstood how this is =
supposed
> to work? Has anyone else had problems like this?
>
>
> Thanks for any help or guidance or tips you can give me,
>
> -Daniel Sanders


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


--=__Part2805F22A.0__=--

From java-user-return-47304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 23 21:03:11 2010
Return-Path: <java-user-return-47304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33566 invoked from network); 23 Sep 2010 21:03:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Sep 2010 21:03:10 -0000
Received: (qmail 61509 invoked by uid 500); 23 Sep 2010 21:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61333 invoked by uid 500); 23 Sep 2010 21:03:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61325 invoked by uid 99); 23 Sep 2010 21:03:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 21:03:08 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 21:03:00 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 2C9A545EFC6
	for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 23:02:39 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id v50WeJ1L7psj for <java-user@lucene.apache.org>;
	Thu, 23 Sep 2010 23:02:35 +0200 (CEST)
Received: from VEGA (unknown [207.179.4.183])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 0791C45EFC3
	for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 23:02:34 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4C9B54A4020000A30005147F@sinclair.provo.novell.com> <005801cb5b5a$7c325a10$74970e30$@thetaphi.de> <4C9B68DA020000A30005148A@sinclair.provo.novell.com>
In-Reply-To: <4C9B68DA020000A30005148A@sinclair.provo.novell.com>
Subject: RE: Problem with Numeric range query.
Date: Thu, 23 Sep 2010 14:02:54 -0700
Message-ID: <006801cb5b62$b2ea8e30$18bfaa90$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKkqkouzYDJvdNDTIlkTa/kyl/wpQJSK0YYAhan5gORSiiscA==
Content-Language: de

Hi,

> Thank you for your timely response.

:-)

> It's going to take me longer to create an isolated test case you can test
this
> with.  I will see what I can do.

That would be fine. Often with a simple test those errors disappear, because
they are problem in the logic somewhere else :) But you should in all cases
try this.

> In the meantime, I have some follow up information in response to your
other
> suggestions.
> 
> 1) I don't think my problem is that the IndexWriter has not committed the
> document.  Here's why:
> 
> 
> In my test case, I first retrieve a document using a different lucene
query on a
> different field.  From that document I extract the value for timestamp
field and
> then perform the NumericRangeQuery on that value as described below.  I
was
> doing as a way to create a unit test that would verify that the
> NumericRangeQuery was working properly.  I think the fact that first query
> found the document is evidence that the IndexWriter had committed the
> document.  Hence, I would expect that if I follow that query with a
> NumericRangeQuery it should be able to find the same document.

Yes. But are you sure, that the timestamp is also indexed? If it's stored
only, it would not find that. Or maybe the other way round.

> 2) I also don't think my problem is values near Long.MIN_VALUE or
> Long.MAX_VALUE.  My values are all timestamps, which are positive integers
> that are not anywhere near those two extremes.  The values originally come
> from the java.util.Date.getTime() method.
> 
> 3) I will try the upper+lower inclusive = true and using same value for
min and
> max, although I don't see how that will change anything.  I have actually
> debugged through the code for NumericRangeQuery, and if minInclusive ==
> false, then min is incremented, and if maxInclusive == false, then max is
> decremented.  So my query:
> 
>    NumericRangeQuery.newLongRange("timestamp",8,timeX-1,timeX,false,true)
> 
> is essentially equivalent to the query you suggest trying:
> 
>    NumericRangeQuery.newLongRange("timestamp",8,timeX,timeX,true,true)
> 
> right?

Yes, it is the same. The Lucene test
TestNumericRangeQuery64.testOneMatchQuery() verifies the upper=lower
inclusive=true thing.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 23 21:11:13 2010
Return-Path: <java-user-return-47305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40511 invoked from network); 23 Sep 2010 21:11:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Sep 2010 21:11:12 -0000
Received: (qmail 75564 invoked by uid 500); 23 Sep 2010 21:11:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75377 invoked by uid 500); 23 Sep 2010 21:11:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75369 invoked by uid 99); 23 Sep 2010 21:11:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 21:11:10 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [137.65.248.137] (HELO sinclair.provo.novell.com) (137.65.248.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Sep 2010 21:11:05 +0000
Received: from INET-PRV-MTA by sinclair.provo.novell.com
	with Novell_GroupWise; Thu, 23 Sep 2010 15:10:44 -0600
Message-Id: <4C9B6DF2020000A30005148F@sinclair.provo.novell.com>
X-Mailer: Novell GroupWise Internet Agent 8.0.2 
Date: Thu, 23 Sep 2010 15:10:42 -0600
From: "Daniel Sanders" <dsanders@novell.com>
To: <java-user@lucene.apache.org>
Subject: RE: Problem with Numeric range query.
References: <4C9B54A4020000A30005147F@sinclair.provo.novell.com>
 <005801cb5b5a$7c325a10$74970e30$@thetaphi.de>
 <4C9B68DA020000A30005148A@sinclair.provo.novell.com>
 <006801cb5b62$b2ea8e30$18bfaa90$@thetaphi.de>
In-Reply-To: <006801cb5b62$b2ea8e30$18bfaa90$@thetaphi.de>
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary="=__Part3F12E542.0__="

--=__Part3F12E542.0__=
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable


I'm certain the timestamp field is being indexed.  It is created as =
follows:=20

   Document doc =3D new Document();=20
....=20
   NumericField timeField =3D new NumericField("timestamp", 8); // =
Defaults to indexing =3D true.=20
   timeField.setLongValue( timeX);=20
   doc.add( timeField);=20
...=20
   indexWriter.addDocument(doc);=20
...=20
   indexWriter.commit();=20

-Daniel=20



>>> "Uwe Schindler" <uwe@thetaphi.de> 9/23/2010 3:02 PM >>>
Hi,

> Thank you for your timely response.

:-)

> It's going to take me longer to create an isolated test case you can =
test
this
> with.  I will see what I can do.

That would be fine. Often with a simple test those errors disappear, =
because
they are problem in the logic somewhere else :) But you should in all =
cases
try this.

> In the meantime, I have some follow up information in response to your
other
> suggestions.
>
> 1) I don't think my problem is that the IndexWriter has not committed =
the
> document.  Here's why:
>
>
> In my test case, I first retrieve a document using a different lucene
query on a
> different field.  From that document I extract the value for timestamp
field and
> then perform the NumericRangeQuery on that value as described below.  I
was
> doing as a way to create a unit test that would verify that the
> NumericRangeQuery was working properly.  I think the fact that first =
query
> found the document is evidence that the IndexWriter had committed the
> document.  Hence, I would expect that if I follow that query with a
> NumericRangeQuery it should be able to find the same document.

Yes. But are you sure, that the timestamp is also indexed? If it's stored
only, it would not find that. Or maybe the other way round.

> 2) I also don't think my problem is values near Long.MIN_VALUE or
> Long.MAX_VALUE.  My values are all timestamps, which are positive =
integers
> that are not anywhere near those two extremes.  The values originally =
come
> from the java.util.Date.getTime() method.
>
> 3) I will try the upper+lower inclusive =3D true and using same value =
for
min and
> max, although I don't see how that will change anything.  I have =
actually
> debugged through the code for NumericRangeQuery, and if minInclusive =
=3D=3D
> false, then min is incremented, and if maxInclusive =3D=3D false, then =
max is
> decremented.  So my query:
>
>    NumericRangeQuery.newLongRange("timestamp",8,timeX-1,timeX,false,true)=

>
> is essentially equivalent to the query you suggest trying:
>
>    NumericRangeQuery.newLongRange("timestamp",8,timeX,timeX,true,true)
>
> right?

Yes, it is the same. The Lucene test
TestNumericRangeQuery64.testOneMatchQuery() verifies the upper=3Dlower
inclusive=3Dtrue thing.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


--=__Part3F12E542.0__=--

From java-user-return-47306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 00:53:51 2010
Return-Path: <java-user-return-47306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10224 invoked from network); 24 Sep 2010 00:53:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 00:53:51 -0000
Received: (qmail 14132 invoked by uid 500); 24 Sep 2010 00:53:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14031 invoked by uid 500); 24 Sep 2010 00:53:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14023 invoked by uid 99); 24 Sep 2010 00:53:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 00:53:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kimchy@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 00:53:42 +0000
Received: by qyk7 with SMTP id 7so598587qyk.14
        for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 17:53:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=fSuZcH2XUt8wiDUR2pRxQUpvvbDSiYVCLsg/klh3pi8=;
        b=ZJP+fMhCrKXX64xwbn0dz5cuyj6ZXLxMWoBhYnnDINy+2qaYzDXWCm2rE+95C9LhtY
         Umn0FO6nWrr6fnom+uu3NExitYV26fHkgQWqPnDTeiK66xmh5GxPSPeFsB2iooAIrhh9
         4oIieWvOPiiZ9g6259HKXiC6Xw02PK5G87qKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=IxxGo7/U9aTlgRdMDuRrTA8y88EqQLzAVoPf9CnQ6B9MTQdXN+VL+g6xil2w5WnGdl
         5Lc1aXgcgt+SYUQi5Vu/mJeOAn9UtaUixOF/Y427gulDNQCAkancCeCgXp27jwprEHZs
         XXRuF1bjfbHMMMZlKe8Nx+ChGcUM5WCJu8PrE=
Received: by 10.220.57.193 with SMTP id d1mr860538vch.259.1285289600649; Thu,
 23 Sep 2010 17:53:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.175.135 with HTTP; Thu, 23 Sep 2010 17:53:00 -0700 (PDT)
From: Shay Banon <kimchy@gmail.com>
Date: Fri, 24 Sep 2010 02:53:00 +0200
Message-ID: <AANLkTinaeaAmPdaE-0O8fdn9ZSk67rQ+3FDxd2hGp84V@mail.gmail.com>
Subject: ArrayIndexOutOfBoundsException when iterating over TermDocs
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=002354447701148a2e0490f6ce0e

--002354447701148a2e0490f6ce0e
Content-Type: text/plain; charset=ISO-8859-1

Hi,

    A user got this very strange exception, and I managed to get the index
that it happens on. Basically, iterating over the TermDocs causes an AAOIB
exception. I easily reproduced it using the FieldCache which does exactly
that (the field in question is indexed as numeric). Here is the exception:

Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 114
at org.apache.lucene.util.BitVector.get(BitVector.java:104)
 at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:127)
at
org.apache.lucene.search.FieldCacheImpl$LongCache.createValue(FieldCacheImpl.java:501)
 at
org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:183)
at org.apache.lucene.search.FieldCacheImpl.getLongs(FieldCacheImpl.java:470)
 at TestMe.main(TestMe.java:56)

It happens on the following segment: _26t docCount: 914 delCount: 1
delFileName: _26t_1.del

And as you can see, it smells like a corner case (it fails for document
number 912, the AIOOB happens from the deleted docs). The code to recreate
it is simple:

        FSDirectory dir = FSDirectory.open(new File("index"));
        IndexReader reader = IndexReader.open(dir, true);

        IndexReader[] subReaders = reader.getSequentialSubReaders();
        for (IndexReader subReader : subReaders) {
            Field field =
subReader.getClass().getSuperclass().getDeclaredField("si");
            field.setAccessible(true);
            SegmentInfo si = (SegmentInfo) field.get(subReader);
            System.out.println("--> " + si);
            if (si.getDocStoreSegment().contains("_26t")) {
                // this is the probleatic one...
                System.out.println("problematic one...");
                FieldCache.DEFAULT.getLongs(subReader, "__documentdate",
FieldCache.NUMERIC_UTILS_LONG_PARSER);
            }
        }

Here is the result of a check index on that segment:

  8 of 10: name=_26t docCount=914
    compound=true
    hasProx=true
    numFiles=2
    size (MB)=1.641
    diagnostics = {optimize=false, mergeFactor=10,
os.version=2.6.18-194.11.1.el5.centos.plus, os=Linux, mergeDocStores=true,
lucene.version=3.0.2 953716 - 2010-06-11 17:13:53, source=merge,
os.arch=amd64, java.version=1.6.0, java.vendor=Sun Microsystems Inc.}
    has deletions [delFileName=_26t_1.del]
    test: open reader.........OK [1 deleted docs]
    test: fields..............OK [32 fields]
    test: field norms.........OK [32 fields]
    test: terms, freq, prox...ERROR [114]
java.lang.ArrayIndexOutOfBoundsException: 114
at org.apache.lucene.util.BitVector.get(BitVector.java:104)
 at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:127)
at
org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:102)
 at org.apache.lucene.index.CheckIndex.testTermIndex(CheckIndex.java:616)
at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:509)
 at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
at TestMe.main(TestMe.java:47)
    test: stored fields.......ERROR [114]
java.lang.ArrayIndexOutOfBoundsException: 114
at org.apache.lucene.util.BitVector.get(BitVector.java:104)
 at
org.apache.lucene.index.ReadOnlySegmentReader.isDeleted(ReadOnlySegmentReader.java:34)
at org.apache.lucene.index.CheckIndex.testStoredFields(CheckIndex.java:684)
 at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:512)
at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
 at TestMe.main(TestMe.java:47)
    test: term vectors........ERROR [114]
java.lang.ArrayIndexOutOfBoundsException: 114
at org.apache.lucene.util.BitVector.get(BitVector.java:104)
 at
org.apache.lucene.index.ReadOnlySegmentReader.isDeleted(ReadOnlySegmentReader.java:34)
at org.apache.lucene.index.CheckIndex.testTermVectors(CheckIndex.java:721)
 at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:515)
at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
 at TestMe.main(TestMe.java:47)



The creation of the index does not do something fancy (all defaults), though
there is usage of the near real time aspect (IndexWriter#getReader) which
does complicate deleted docs handling. Seems like the deleted docs got
written without matching the number of docs?. Sadly, I don't have something
that recreates it from scratch, but I do have the index if someone want to
have a look at it (mail me directly and I will provide a download link).

I will continue to investigate why this might happen, just wondering if
someone stumbled on this exception before. Lucene 3.0.2 is used.

-shay.banon

--002354447701148a2e0490f6ce0e--

From java-user-return-47307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 01:11:09 2010
Return-Path: <java-user-return-47307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20552 invoked from network); 24 Sep 2010 01:11:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 01:11:09 -0000
Received: (qmail 35714 invoked by uid 500); 24 Sep 2010 01:11:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35659 invoked by uid 500); 24 Sep 2010 01:11:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35651 invoked by uid 99); 24 Sep 2010 01:11:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 01:11:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 01:10:58 +0000
X-ASG-Debug-ID: 1285290637-712500480000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 4896CB8C1E
	for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 18:10:37 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM ([10.10.160.33]) by mail-fw.broadvision.com with ESMTP id 9OyzQ5qGb12vAdRl for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 18:10:37 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: In lucene 2.3.2, needs to stop optimization?
Subject: In lucene 2.3.2, needs to stop optimization?
Date: Thu, 23 Sep 2010 18:10:37 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1694@rw-ex2003.BROADVISION.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: In lucene 2.3.2, needs to stop optimization?
Thread-Index: ActbhUvK9F8gGggdSWaMRaapeyQOAw==
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: UNKNOWN[10.10.160.33]
X-Barracuda-Start-Time: 1285290637
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We are using lucene 2.3.2, now we need to index each document as
fast as possible, so user can almost immediately search it.=20

So I am considering stop IndexWriter optimization during real time,=20
then in relatively off-time like late night we may call IndexWriter =
optimize
method explicitly once.

What is the most efficient way to completely turn off IndexWriter merge
in lucene 2.3.2?

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 05:13:24 2010
Return-Path: <java-user-return-47308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39944 invoked from network); 24 Sep 2010 05:13:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 05:13:24 -0000
Received: (qmail 97577 invoked by uid 500); 24 Sep 2010 05:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96435 invoked by uid 500); 24 Sep 2010 05:13:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96420 invoked by uid 99); 24 Sep 2010 05:13:17 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 05:13:17 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 05:12:55 +0000
Received: by qwk3 with SMTP id 3so2070714qwk.35
        for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 22:12:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=OIxlPlJR04+ORDKQDz+GVeG5nyfKHcN8H3PLIbDwBkc=;
        b=O37/VLh6mS7740jdjCq82vzzCdnKLw7hFBWCsOHpPJXVBM5EkHKj8ZUVA40rIO+X7k
         KZwZu0rLzQkhqj1JZBlYzQBOWUYOzt52WpvtmieneM/sZ7ZmHH0s4xzjzgPKIYFXnBvx
         wrFoiiv7+RE13leFkDJigwUOmywUQDIM0c6tk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=vijE5WTqXG7FZPgLtxHE3PvAVTjwsu2+KnNcmRw7gUgFZgTas4Ro8qHujrUkPQa9B2
         hX1mtJr7QTu2Fz+1WDt7YcF8jUtrdUTc2KQnoNnOzVK7Mis/z2nD3tS8rdEtgljlYR4h
         iLKHQAY7v3oX7sBJcZ0xE4gthMOQMnHmZS4IQ=
MIME-Version: 1.0
Received: by 10.229.249.212 with SMTP id ml20mr2114750qcb.119.1285305153151;
 Thu, 23 Sep 2010 22:12:33 -0700 (PDT)
Received: by 10.229.245.138 with HTTP; Thu, 23 Sep 2010 22:12:33 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <AANLkTinaeaAmPdaE-0O8fdn9ZSk67rQ+3FDxd2hGp84V@mail.gmail.com>
References: <AANLkTinaeaAmPdaE-0O8fdn9ZSk67rQ+3FDxd2hGp84V@mail.gmail.com>
Date: Fri, 24 Sep 2010 07:12:33 +0200
Message-ID: <AANLkTin9kX3UrGdzAr7macN232FtF9kVJifSJ9H9tgLr@mail.gmail.com>
Subject: Re: ArrayIndexOutOfBoundsException when iterating over TermDocs
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Shay,

would you mind open a jira issue for that?

simon

On Fri, Sep 24, 2010 at 2:53 AM, Shay Banon <kimchy@gmail.com> wrote:
> Hi,
>
> =C2=A0 =C2=A0A user got this very strange exception, and I managed to get=
 the index
> that it happens on. Basically, iterating over the TermDocs causes an AAOI=
B
> exception. I easily reproduced it using the FieldCache which does exactly
> that (the field in question is indexed as numeric). Here is the exception=
:
>
> Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 114
> at org.apache.lucene.util.BitVector.get(BitVector.java:104)
> =C2=A0at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.jav=
a:127)
> at
> org.apache.lucene.search.FieldCacheImpl$LongCache.createValue(FieldCacheI=
mpl.java:501)
> =C2=A0at
> org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:183=
)
> at org.apache.lucene.search.FieldCacheImpl.getLongs(FieldCacheImpl.java:4=
70)
> =C2=A0at TestMe.main(TestMe.java:56)
>
> It happens on the following segment: _26t docCount: 914 delCount: 1
> delFileName: _26t_1.del
>
> And as you can see, it smells like a corner case (it fails for document
> number 912, the AIOOB happens from the deleted docs). The code to recreat=
e
> it is simple:
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0FSDirectory dir =3D FSDirectory.open(new File(=
"index"));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexReader reader =3D IndexReader.open(dir, t=
rue);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexReader[] subReaders =3D reader.getSequent=
ialSubReaders();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0for (IndexReader subReader : subReaders) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Field field =3D
> subReader.getClass().getSuperclass().getDeclaredField("si");
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0field.setAccessible(true);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0SegmentInfo si =3D (SegmentInfo)=
 field.get(subReader);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("--> " + si);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if (si.getDocStoreSegment().cont=
ains("_26t")) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// this is the pro=
bleatic one...
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println=
("problematic one...");
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0FieldCache.DEFAULT=
.getLongs(subReader, "__documentdate",
> FieldCache.NUMERIC_UTILS_LONG_PARSER);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
> Here is the result of a check index on that segment:
>
> =C2=A08 of 10: name=3D_26t docCount=3D914
> =C2=A0 =C2=A0compound=3Dtrue
> =C2=A0 =C2=A0hasProx=3Dtrue
> =C2=A0 =C2=A0numFiles=3D2
> =C2=A0 =C2=A0size (MB)=3D1.641
> =C2=A0 =C2=A0diagnostics =3D {optimize=3Dfalse, mergeFactor=3D10,
> os.version=3D2.6.18-194.11.1.el5.centos.plus, os=3DLinux, mergeDocStores=
=3Dtrue,
> lucene.version=3D3.0.2 953716 - 2010-06-11 17:13:53, source=3Dmerge,
> os.arch=3Damd64, java.version=3D1.6.0, java.vendor=3DSun Microsystems Inc=
.}
> =C2=A0 =C2=A0has deletions [delFileName=3D_26t_1.del]
> =C2=A0 =C2=A0test: open reader.........OK [1 deleted docs]
> =C2=A0 =C2=A0test: fields..............OK [32 fields]
> =C2=A0 =C2=A0test: field norms.........OK [32 fields]
> =C2=A0 =C2=A0test: terms, freq, prox...ERROR [114]
> java.lang.ArrayIndexOutOfBoundsException: 114
> at org.apache.lucene.util.BitVector.get(BitVector.java:104)
> =C2=A0at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.jav=
a:127)
> at
> org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.ja=
va:102)
> =C2=A0at org.apache.lucene.index.CheckIndex.testTermIndex(CheckIndex.java=
:616)
> at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:509)
> =C2=A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:29=
9)
> at TestMe.main(TestMe.java:47)
> =C2=A0 =C2=A0test: stored fields.......ERROR [114]
> java.lang.ArrayIndexOutOfBoundsException: 114
> at org.apache.lucene.util.BitVector.get(BitVector.java:104)
> =C2=A0at
> org.apache.lucene.index.ReadOnlySegmentReader.isDeleted(ReadOnlySegmentRe=
ader.java:34)
> at org.apache.lucene.index.CheckIndex.testStoredFields(CheckIndex.java:68=
4)
> =C2=A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:51=
2)
> at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
> =C2=A0at TestMe.main(TestMe.java:47)
> =C2=A0 =C2=A0test: term vectors........ERROR [114]
> java.lang.ArrayIndexOutOfBoundsException: 114
> at org.apache.lucene.util.BitVector.get(BitVector.java:104)
> =C2=A0at
> org.apache.lucene.index.ReadOnlySegmentReader.isDeleted(ReadOnlySegmentRe=
ader.java:34)
> at org.apache.lucene.index.CheckIndex.testTermVectors(CheckIndex.java:721=
)
> =C2=A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:51=
5)
> at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
> =C2=A0at TestMe.main(TestMe.java:47)
>
>
>
> The creation of the index does not do something fancy (all defaults), tho=
ugh
> there is usage of the near real time aspect (IndexWriter#getReader) which
> does complicate deleted docs handling. Seems like the deleted docs got
> written without matching the number of docs?. Sadly, I don't have somethi=
ng
> that recreates it from scratch, but I do have the index if someone want t=
o
> have a look at it (mail me directly and I will provide a download link).
>
> I will continue to investigate why this might happen, just wondering if
> someone stumbled on this exception before. Lucene 3.0.2 is used.
>
> -shay.banon
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 06:48:01 2010
Return-Path: <java-user-return-47309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73322 invoked from network); 24 Sep 2010 06:48:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 06:48:01 -0000
Received: (qmail 68840 invoked by uid 500); 24 Sep 2010 06:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68435 invoked by uid 500); 24 Sep 2010 06:47:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68427 invoked by uid 99); 24 Sep 2010 06:47:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 06:47:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 06:47:48 +0000
X-ASG-Debug-ID: 1285310848-2dbf002b0000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 3006CE4713
	for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 23:47:28 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM ([10.10.160.33]) by mail-fw.broadvision.com with ESMTP id va0av0ldCKYx9oQP for <java-user@lucene.apache.org>; Thu, 23 Sep 2010 23:47:28 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: In lucene 2.3.2, needs to stop optimization?
Subject: RE: In lucene 2.3.2, needs to stop optimization?
Date: Thu, 23 Sep 2010 23:47:28 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1695@rw-ex2003.BROADVISION.COM>
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1694@rw-ex2003.BROADVISION.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: In lucene 2.3.2, needs to stop optimization?
Thread-Index: ActbhUvK9F8gGggdSWaMRaapeyQOAwALLLzQ
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: UNKNOWN[10.10.160.33]
X-Barracuda-Start-Time: 1285310848
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com

Hi,

I read document/code and did some experiments, one possibility
is to raise mergeFactor to high value, say close to 2Billion,
then a lot of small files are created and after >500 docs are
created separately, search speed dropped sharply.

I noticed with our current data, if I add one doc then call=20
optimize(), it took about 7s, this is too slow for real time
search.=20

If I keep mergeFactor as 10 and donot call optimize(), does it
mean from time to time IndexWriter would optimize on background,
when it happens, it may take a few seconds (so Index will delay
a few seconds)?

Should I use high mergeFactor and optimize once a day, or use
default mergeFactor and donot call optimize? maybe latter is
better, but I am concerned about occasional slowness?

Currently I donot plan to keep IndexWriter constantly open, but
open/close for each index request.

Any suggestion to improve would be appreciated,

Lisheng=20

-----Original Message-----
From: Zhang, Lisheng [mailto:Lisheng.Zhang@BroadVision.com]
Sent: Thursday, September 23, 2010 6:11 PM
To: java-user@lucene.apache.org
Subject: In lucene 2.3.2, needs to stop optimization?


Hi,

We are using lucene 2.3.2, now we need to index each document as
fast as possible, so user can almost immediately search it.=20

So I am considering stop IndexWriter optimization during real time,=20
then in relatively off-time like late night we may call IndexWriter =
optimize
method explicitly once.

What is the most efficient way to completely turn off IndexWriter merge
in lucene 2.3.2?

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 07:02:02 2010
Return-Path: <java-user-return-47310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79202 invoked from network); 24 Sep 2010 07:02:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 07:02:02 -0000
Received: (qmail 81041 invoked by uid 500); 24 Sep 2010 07:02:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80649 invoked by uid 500); 24 Sep 2010 07:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80640 invoked by uid 99); 24 Sep 2010 07:01:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 07:01:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 07:01:50 +0000
Received: by qwk3 with SMTP id 3so2124009qwk.35
        for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 00:01:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=tihxty/XNYH5tBoT8Q5kcDIWrJjnxKa7Ggjf7oZsbWw=;
        b=tpoG7yJFK3htPZqkMmKrCA2s1OXlfN50TIup/wbMfvOM2+xBeNtmF1RppLM1GnvUV8
         WAdjvCwtWDlhRBeAWEY1WcMU5FwuknuDhyyvYpYo49uLa4mIj8Eyyy6GIGGbJVDKi4Ec
         dksnRG7hgfr0GLFR0WWXKEV0nrj/gZnU0PjsM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=QEXblrh70tCV4s3wdbTT/znCs9oBF59sQAKgxMqVPpNG8eGwJxaw70KID4aCeYmAT3
         tFfoUYcvdOmNQ4ULaNYiFtH7rqRl2rxPmGavGc9+LFpS2ET9eBHxQ8MGW3YyYsAyeIir
         /mMaoVYN/7uB/N14eDOeyHlpUt/QhYNMK5sr4=
Received: by 10.229.52.38 with SMTP id f38mr2165613qcg.224.1285311688519; Fri,
 24 Sep 2010 00:01:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.14.170 with HTTP; Fri, 24 Sep 2010 00:01:08 -0700 (PDT)
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1695@rw-ex2003.BROADVISION.COM>
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1694@rw-ex2003.BROADVISION.COM>
 <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1695@rw-ex2003.BROADVISION.COM>
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
Date: Fri, 24 Sep 2010 10:01:08 +0300
Message-ID: <AANLkTimJgBaTkr8+fS3NoyS2c63VD_UZncZsUQk+EKmK@mail.gmail.com>
Subject: Re: In lucene 2.3.2, needs to stop optimization?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Is it possible for you to migrate to 2.9.x ? Or even 3.x ?
There are some huge optimization in 2.9 on reopening indexes that
significantly improve search speed.

I'm not sure..but I think indexWriter.getReader() for almost realtime
was added to 2.9, so you can keep your writer always open and get very
cheaply a new reader on each search request.

On Fri, Sep 24, 2010 at 09:47, Zhang, Lisheng
<Lisheng.Zhang@broadvision.com> wrote:
> Hi,
>
> I read document/code and did some experiments, one possibility
> is to raise mergeFactor to high value, say close to 2Billion,
> then a lot of small files are created and after >500 docs are
> created separately, search speed dropped sharply.
>
> I noticed with our current data, if I add one doc then call
> optimize(), it took about 7s, this is too slow for real time
> search.
>
> If I keep mergeFactor as 10 and donot call optimize(), does it
> mean from time to time IndexWriter would optimize on background,
> when it happens, it may take a few seconds (so Index will delay
> a few seconds)?
>
> Should I use high mergeFactor and optimize once a day, or use
> default mergeFactor and donot call optimize? maybe latter is
> better, but I am concerned about occasional slowness?
>
> Currently I donot plan to keep IndexWriter constantly open, but
> open/close for each index request.
>
> Any suggestion to improve would be appreciated,
>
> Lisheng
>
> -----Original Message-----
> From: Zhang, Lisheng [mailto:Lisheng.Zhang@BroadVision.com]
> Sent: Thursday, September 23, 2010 6:11 PM
> To: java-user@lucene.apache.org
> Subject: In lucene 2.3.2, needs to stop optimization?
>
>
> Hi,
>
> We are using lucene 2.3.2, now we need to index each document as
> fast as possible, so user can almost immediately search it.
>
> So I am considering stop IndexWriter optimization during real time,
> then in relatively off-time like late night we may call IndexWriter optimize
> method explicitly once.
>
> What is the most efficient way to completely turn off IndexWriter merge
> in lucene 2.3.2?
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 09:08:18 2010
Return-Path: <java-user-return-47311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25035 invoked from network); 24 Sep 2010 09:08:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 09:08:18 -0000
Received: (qmail 203 invoked by uid 500); 24 Sep 2010 09:08:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99584 invoked by uid 500); 24 Sep 2010 09:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99576 invoked by uid 99); 24 Sep 2010 09:08:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 09:08:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kimchy@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 09:08:04 +0000
Received: by qwk3 with SMTP id 3so2197816qwk.35
        for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 02:07:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=UxckUrc8DxydzkLdRalayXdQJKWMGz5cqwKSrDZJpQc=;
        b=i6+XSCaRIYTLimJ0spIuiUBPE+TIIzNlnK0+OuZTLynEyIKlcn4ctjomK+esy3UZ9B
         nwPgAUJL4R1yVNwYA61geVA52mYKLwsnOE8p7r1N3oG2SnKcGMWE0/8aUwDFQGvCxcRv
         47SDZUakJ8rsyut7GYr3a46X3MsChLeC59JDk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=L/NyCYh/ORmF7JNBN4PJXoX7K0fqfI7FKKluYRhYrYaZzPfylWOMKXJvlqiMSdqBhA
         hjDHoG3Ya7J5tCyHg76qc2U7q3IrBdMV9qKYkmVah6pcWT0Ra3/CZH861v8gwHVKpSfL
         fb87Z3S+t0adNuuYRb14myBgbPoFDVqVjRVfs=
Received: by 10.220.50.2 with SMTP id x2mr1049269vcf.161.1285319263434; Fri,
 24 Sep 2010 02:07:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.175.135 with HTTP; Fri, 24 Sep 2010 02:07:22 -0700 (PDT)
In-Reply-To: <AANLkTin9kX3UrGdzAr7macN232FtF9kVJifSJ9H9tgLr@mail.gmail.com>
References: <AANLkTinaeaAmPdaE-0O8fdn9ZSk67rQ+3FDxd2hGp84V@mail.gmail.com> <AANLkTin9kX3UrGdzAr7macN232FtF9kVJifSJ9H9tgLr@mail.gmail.com>
From: Shay Banon <kimchy@gmail.com>
Date: Fri, 24 Sep 2010 11:07:22 +0200
Message-ID: <AANLkTin+2Kx6Ks6H-9_bi4FxVxNTF=Jf7mzFBX1L6ERQ@mail.gmail.com>
Subject: Re: ArrayIndexOutOfBoundsException when iterating over TermDocs
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=0016e64692021eb9120490fdb6b1

--0016e64692021eb9120490fdb6b1
Content-Type: text/plain; charset=ISO-8859-1

Sure, opened https://issues.apache.org/jira/browse/LUCENE-2666, wanted to
ping the list first to see if someone knows about it.

On Fri, Sep 24, 2010 at 7:12 AM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> Shay,
>
> would you mind open a jira issue for that?
>
> simon
>
> On Fri, Sep 24, 2010 at 2:53 AM, Shay Banon <kimchy@gmail.com> wrote:
> > Hi,
> >
> >    A user got this very strange exception, and I managed to get the index
> > that it happens on. Basically, iterating over the TermDocs causes an
> AAOIB
> > exception. I easily reproduced it using the FieldCache which does exactly
> > that (the field in question is indexed as numeric). Here is the
> exception:
> >
> > Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 114
> > at org.apache.lucene.util.BitVector.get(BitVector.java:104)
> >  at
> org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:127)
> > at
> >
> org.apache.lucene.search.FieldCacheImpl$LongCache.createValue(FieldCacheImpl.java:501)
> >  at
> >
> org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:183)
> > at
> org.apache.lucene.search.FieldCacheImpl.getLongs(FieldCacheImpl.java:470)
> >  at TestMe.main(TestMe.java:56)
> >
> > It happens on the following segment: _26t docCount: 914 delCount: 1
> > delFileName: _26t_1.del
> >
> > And as you can see, it smells like a corner case (it fails for document
> > number 912, the AIOOB happens from the deleted docs). The code to
> recreate
> > it is simple:
> >
> >        FSDirectory dir = FSDirectory.open(new File("index"));
> >        IndexReader reader = IndexReader.open(dir, true);
> >
> >        IndexReader[] subReaders = reader.getSequentialSubReaders();
> >        for (IndexReader subReader : subReaders) {
> >            Field field =
> > subReader.getClass().getSuperclass().getDeclaredField("si");
> >            field.setAccessible(true);
> >            SegmentInfo si = (SegmentInfo) field.get(subReader);
> >            System.out.println("--> " + si);
> >            if (si.getDocStoreSegment().contains("_26t")) {
> >                // this is the probleatic one...
> >                System.out.println("problematic one...");
> >                FieldCache.DEFAULT.getLongs(subReader, "__documentdate",
> > FieldCache.NUMERIC_UTILS_LONG_PARSER);
> >            }
> >        }
> >
> > Here is the result of a check index on that segment:
> >
> >  8 of 10: name=_26t docCount=914
> >    compound=true
> >    hasProx=true
> >    numFiles=2
> >    size (MB)=1.641
> >    diagnostics = {optimize=false, mergeFactor=10,
> > os.version=2.6.18-194.11.1.el5.centos.plus, os=Linux,
> mergeDocStores=true,
> > lucene.version=3.0.2 953716 - 2010-06-11 17:13:53, source=merge,
> > os.arch=amd64, java.version=1.6.0, java.vendor=Sun Microsystems Inc.}
> >    has deletions [delFileName=_26t_1.del]
> >    test: open reader.........OK [1 deleted docs]
> >    test: fields..............OK [32 fields]
> >    test: field norms.........OK [32 fields]
> >    test: terms, freq, prox...ERROR [114]
> > java.lang.ArrayIndexOutOfBoundsException: 114
> > at org.apache.lucene.util.BitVector.get(BitVector.java:104)
> >  at
> org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:127)
> > at
> >
> org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:102)
> >  at org.apache.lucene.index.CheckIndex.testTermIndex(CheckIndex.java:616)
> > at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:509)
> >  at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
> > at TestMe.main(TestMe.java:47)
> >    test: stored fields.......ERROR [114]
> > java.lang.ArrayIndexOutOfBoundsException: 114
> > at org.apache.lucene.util.BitVector.get(BitVector.java:104)
> >  at
> >
> org.apache.lucene.index.ReadOnlySegmentReader.isDeleted(ReadOnlySegmentReader.java:34)
> > at
> org.apache.lucene.index.CheckIndex.testStoredFields(CheckIndex.java:684)
> >  at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:512)
> > at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
> >  at TestMe.main(TestMe.java:47)
> >    test: term vectors........ERROR [114]
> > java.lang.ArrayIndexOutOfBoundsException: 114
> > at org.apache.lucene.util.BitVector.get(BitVector.java:104)
> >  at
> >
> org.apache.lucene.index.ReadOnlySegmentReader.isDeleted(ReadOnlySegmentReader.java:34)
> > at
> org.apache.lucene.index.CheckIndex.testTermVectors(CheckIndex.java:721)
> >  at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:515)
> > at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
> >  at TestMe.main(TestMe.java:47)
> >
> >
> >
> > The creation of the index does not do something fancy (all defaults),
> though
> > there is usage of the near real time aspect (IndexWriter#getReader) which
> > does complicate deleted docs handling. Seems like the deleted docs got
> > written without matching the number of docs?. Sadly, I don't have
> something
> > that recreates it from scratch, but I do have the index if someone want
> to
> > have a look at it (mail me directly and I will provide a download link).
> >
> > I will continue to investigate why this might happen, just wondering if
> > someone stumbled on this exception before. Lucene 3.0.2 is used.
> >
> > -shay.banon
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64692021eb9120490fdb6b1--

From java-user-return-47312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 09:38:13 2010
Return-Path: <java-user-return-47312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32579 invoked from network); 24 Sep 2010 09:38:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 09:38:12 -0000
Received: (qmail 34357 invoked by uid 500); 24 Sep 2010 09:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33974 invoked by uid 500); 24 Sep 2010 09:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33966 invoked by uid 99); 24 Sep 2010 09:38:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 09:38:05 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 09:38:00 +0000
Received: by qyk8 with SMTP id 8so2691222qyk.14
        for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 02:37:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:cc
         :content-type:content-transfer-encoding;
        bh=eyI9OGmdgUlkM67FfL3DenkZyOS42nHOalzgKR5sUYc=;
        b=IF4ZZKsMxth4sExBOdKeYm2UPCbUAiXoD1rSrcDZu8ZFswu5gBJuq8+QD5Qm3+ryqH
         AoudM65My9MMkU5RqXGe4HoqT8RIo8yGhCHmO9h91OFXTf4uymtqaJO2RVjSY+QOKPdb
         2jefD0khEa6LP6WyfnOF9nMYjEv7yGjZDyrBQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=q5XJyXtS06QNZCLsulvYiSUirwE51ZcZNeb/afCpRecxxEl+ykZ9j6v5sO0/k21aKM
         0UAyq1MiQLhSOfXIvzEotuKZYEJX9YK9Z19Qm30M69XDZu/EDuIradU46iUhNOuT5VlQ
         6kzQ57lwI/hHOjJvs6728JMi2DkrebNZhyJKQ=
MIME-Version: 1.0
Received: by 10.224.122.196 with SMTP id m4mr2323711qar.105.1285321059361;
 Fri, 24 Sep 2010 02:37:39 -0700 (PDT)
Received: by 10.229.245.138 with HTTP; Fri, 24 Sep 2010 02:37:39 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <AANLkTin+2Kx6Ks6H-9_bi4FxVxNTF=Jf7mzFBX1L6ERQ@mail.gmail.com>
References: <AANLkTinaeaAmPdaE-0O8fdn9ZSk67rQ+3FDxd2hGp84V@mail.gmail.com>
	<AANLkTin9kX3UrGdzAr7macN232FtF9kVJifSJ9H9tgLr@mail.gmail.com>
	<AANLkTin+2Kx6Ks6H-9_bi4FxVxNTF=Jf7mzFBX1L6ERQ@mail.gmail.com>
Date: Fri, 24 Sep 2010 11:37:39 +0200
Message-ID: <AANLkTi=AcW04F6nSVtfeSLOJyOeoKmnkk_AV5N0auY5U@mail.gmail.com>
Subject: Re: ArrayIndexOutOfBoundsException when iterating over TermDocs
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: Shay Banon <kimchy@gmail.com>
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Cool thanks!

On Fri, Sep 24, 2010 at 11:07 AM, Shay Banon <kimchy@gmail.com> wrote:
> Sure, opened=C2=A0https://issues.apache.org/jira/browse/LUCENE-2666, want=
ed to
> ping the list first to see if someone knows about it.
>
> On Fri, Sep 24, 2010 at 7:12 AM, Simon Willnauer
> <simon.willnauer@googlemail.com> wrote:
>>
>> Shay,
>>
>> would you mind open a jira issue for that?
>>
>> simon
>>
>> On Fri, Sep 24, 2010 at 2:53 AM, Shay Banon <kimchy@gmail.com> wrote:
>> > Hi,
>> >
>> > =C2=A0 =C2=A0A user got this very strange exception, and I managed to =
get the
>> > index
>> > that it happens on. Basically, iterating over the TermDocs causes an
>> > AAOIB
>> > exception. I easily reproduced it using the FieldCache which does
>> > exactly
>> > that (the field in question is indexed as numeric). Here is the
>> > exception:
>> >
>> > Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1=
14
>> > at org.apache.lucene.util.BitVector.get(BitVector.java:104)
>> > =C2=A0at
>> > org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:127)
>> > at
>> >
>> > org.apache.lucene.search.FieldCacheImpl$LongCache.createValue(FieldCac=
heImpl.java:501)
>> > =C2=A0at
>> >
>> > org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:=
183)
>> > at
>> > org.apache.lucene.search.FieldCacheImpl.getLongs(FieldCacheImpl.java:4=
70)
>> > =C2=A0at TestMe.main(TestMe.java:56)
>> >
>> > It happens on the following segment: _26t docCount: 914 delCount: 1
>> > delFileName: _26t_1.del
>> >
>> > And as you can see, it smells like a corner case (it fails for documen=
t
>> > number 912, the AIOOB happens from the deleted docs). The code to
>> > recreate
>> > it is simple:
>> >
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0FSDirectory dir =3D FSDirectory.open(new Fi=
le("index"));
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexReader reader =3D IndexReader.open(dir=
, true);
>> >
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexReader[] subReaders =3D reader.getSequ=
entialSubReaders();
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0for (IndexReader subReader : subReaders) {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Field field =3D
>> > subReader.getClass().getSuperclass().getDeclaredField("si");
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0field.setAccessible(true);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0SegmentInfo si =3D (SegmentIn=
fo) field.get(subReader);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("--> " + s=
i);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if (si.getDocStoreSegment().c=
ontains("_26t")) {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// this is the =
probleatic one...
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.prin=
tln("problematic one...");
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0FieldCache.DEFA=
ULT.getLongs(subReader, "__documentdate",
>> > FieldCache.NUMERIC_UTILS_LONG_PARSER);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>> >
>> > Here is the result of a check index on that segment:
>> >
>> > =C2=A08 of 10: name=3D_26t docCount=3D914
>> > =C2=A0 =C2=A0compound=3Dtrue
>> > =C2=A0 =C2=A0hasProx=3Dtrue
>> > =C2=A0 =C2=A0numFiles=3D2
>> > =C2=A0 =C2=A0size (MB)=3D1.641
>> > =C2=A0 =C2=A0diagnostics =3D {optimize=3Dfalse, mergeFactor=3D10,
>> > os.version=3D2.6.18-194.11.1.el5.centos.plus, os=3DLinux,
>> > mergeDocStores=3Dtrue,
>> > lucene.version=3D3.0.2 953716 - 2010-06-11 17:13:53, source=3Dmerge,
>> > os.arch=3Damd64, java.version=3D1.6.0, java.vendor=3DSun Microsystems =
Inc.}
>> > =C2=A0 =C2=A0has deletions [delFileName=3D_26t_1.del]
>> > =C2=A0 =C2=A0test: open reader.........OK [1 deleted docs]
>> > =C2=A0 =C2=A0test: fields..............OK [32 fields]
>> > =C2=A0 =C2=A0test: field norms.........OK [32 fields]
>> > =C2=A0 =C2=A0test: terms, freq, prox...ERROR [114]
>> > java.lang.ArrayIndexOutOfBoundsException: 114
>> > at org.apache.lucene.util.BitVector.get(BitVector.java:104)
>> > =C2=A0at
>> > org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:127)
>> > at
>> >
>> > org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions=
.java:102)
>> > =C2=A0at
>> > org.apache.lucene.index.CheckIndex.testTermIndex(CheckIndex.java:616)
>> > at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:509)
>> > =C2=A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java=
:299)
>> > at TestMe.main(TestMe.java:47)
>> > =C2=A0 =C2=A0test: stored fields.......ERROR [114]
>> > java.lang.ArrayIndexOutOfBoundsException: 114
>> > at org.apache.lucene.util.BitVector.get(BitVector.java:104)
>> > =C2=A0at
>> >
>> > org.apache.lucene.index.ReadOnlySegmentReader.isDeleted(ReadOnlySegmen=
tReader.java:34)
>> > at
>> > org.apache.lucene.index.CheckIndex.testStoredFields(CheckIndex.java:68=
4)
>> > =C2=A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java=
:512)
>> > at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
>> > =C2=A0at TestMe.main(TestMe.java:47)
>> > =C2=A0 =C2=A0test: term vectors........ERROR [114]
>> > java.lang.ArrayIndexOutOfBoundsException: 114
>> > at org.apache.lucene.util.BitVector.get(BitVector.java:104)
>> > =C2=A0at
>> >
>> > org.apache.lucene.index.ReadOnlySegmentReader.isDeleted(ReadOnlySegmen=
tReader.java:34)
>> > at
>> > org.apache.lucene.index.CheckIndex.testTermVectors(CheckIndex.java:721=
)
>> > =C2=A0at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java=
:515)
>> > at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:299)
>> > =C2=A0at TestMe.main(TestMe.java:47)
>> >
>> >
>> >
>> > The creation of the index does not do something fancy (all defaults),
>> > though
>> > there is usage of the near real time aspect (IndexWriter#getReader)
>> > which
>> > does complicate deleted docs handling. Seems like the deleted docs got
>> > written without matching the number of docs?. Sadly, I don't have
>> > something
>> > that recreates it from scratch, but I do have the index if someone wan=
t
>> > to
>> > have a look at it (mail me directly and I will provide a download link=
).
>> >
>> > I will continue to investigate why this might happen, just wondering i=
f
>> > someone stumbled on this exception before. Lucene 3.0.2 is used.
>> >
>> > -shay.banon
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 13:41:01 2010
Return-Path: <java-user-return-47313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20358 invoked from network); 24 Sep 2010 13:41:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 13:41:01 -0000
Received: (qmail 16921 invoked by uid 500); 24 Sep 2010 13:40:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16503 invoked by uid 500); 24 Sep 2010 13:40:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16487 invoked by uid 99); 24 Sep 2010 13:40:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 13:40:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pulkitsinghal@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 13:40:46 +0000
Received: by wyb34 with SMTP id 34so2768930wyb.35
        for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 06:40:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=6Sy4B7aKz2fSq7LY6NALkCbFBPEIRtN66iV3HTlvETY=;
        b=XH4ZR8EtlIwZl7GnKE5+bj1cMMSy9Tk5KpxcKcmmipPIWtjZQVZTO2aKMQZlV+BwEX
         fV5r4wc1ebjt3iqoxq7xL1TrgW1v1COXz9Q+e91PClbeVudIBzRaG3ftNctzUFYdkqyi
         dh2KemUNv0/qiDooVrl2zsvym1SspHzT2xFmc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=DZOYMlmcF5PzouL21uBvytSrzRdxaUc9g/bJBPq6Pu63HydSAazfQP7ZGYgfueO0K2
         KhpR/nA2y3U9X5efdwIc07RDoIEnaGeqpdNlJe5zgzC4s/k5+/wv6IFLyB3uu9Grx5yI
         WqycY8DRCZkGxasnggdPvvMAbDQdM/fz306zc=
MIME-Version: 1.0
Received: by 10.216.176.8 with SMTP id a8mr9481986wem.93.1285335626463; Fri,
 24 Sep 2010 06:40:26 -0700 (PDT)
Received: by 10.216.137.146 with HTTP; Fri, 24 Sep 2010 06:40:26 -0700 (PDT)
Date: Fri, 24 Sep 2010 09:40:26 -0400
Message-ID: <AANLkTikUPYViqD7zU3Ao6Se6ns1XeSV2bWcpkQBmC=3S@mail.gmail.com>
Subject: How to count entries in an index file?
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Everyone,

I want to load the indexed data from the file system using FSDirectory.
But I also want to be sure if something was actually loaded or if a
new empty directory was created and returned to me.
How can I count the # of entries in the Directory object returned to me?

Thanks!
- Pulkit

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 14:20:38 2010
Return-Path: <java-user-return-47314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35068 invoked from network); 24 Sep 2010 14:20:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 14:20:37 -0000
Received: (qmail 86159 invoked by uid 500); 24 Sep 2010 14:20:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85756 invoked by uid 500); 24 Sep 2010 14:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85748 invoked by uid 99); 24 Sep 2010 14:20:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 14:20:31 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pulkitsinghal@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 14:20:24 +0000
Received: by wyb34 with SMTP id 34so2825932wyb.35
        for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 07:20:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=bIpJpmtVUaiQaQa6EdfiqFvFSJAMg8GD93oU1PWEU6w=;
        b=UwrN+gpXx8yzy3UCWhtE0hR+nVbiNSidpRoRwRGMJMzwBxLeX0KdWfVSFSptNis/Hr
         Y908UqcpVyueCs0BEj5JMwCCgc7GdwrXLiAm7MBt2anhIqprAKdBN4hH1YgtO9Yi4OyV
         15TGy3Py3peFbylMlX2f5ZZIaqyBq+DiVAjZs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ldpeKBx/F0NP6yO7tJ3sgdNbilgqZZs9oUINEVsRZKqadA96WoL+cTUF6yOxfWM2a7
         OV7YhcLeRuYJWtufgU0jH7FN2yJz8L3FchK9hjNuS5hv2+Iy5FvarLlu2+2Z18Q7kj19
         x5Noh9sUoQmFte5gS4wAymzxmJECWXiYFNcbM=
MIME-Version: 1.0
Received: by 10.216.188.197 with SMTP id a47mr2752766wen.70.1285338002925;
 Fri, 24 Sep 2010 07:20:02 -0700 (PDT)
Received: by 10.216.137.146 with HTTP; Fri, 24 Sep 2010 07:20:02 -0700 (PDT)
In-Reply-To: <AANLkTikUPYViqD7zU3Ao6Se6ns1XeSV2bWcpkQBmC=3S@mail.gmail.com>
References: <AANLkTikUPYViqD7zU3Ao6Se6ns1XeSV2bWcpkQBmC=3S@mail.gmail.com>
Date: Fri, 24 Sep 2010 10:20:02 -0400
Message-ID: <AANLkTimWu7qJ11XH=RaqpOXrd2=u4G_nKCAcK=pAmbDU@mail.gmail.com>
Subject: Re: How to count entries in an index file?
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Is using IndexReader.numDocs() on the Directory instance, the only way
to count the indexed entries?

On Fri, Sep 24, 2010 at 9:40 AM, Pulkit Singhal <pulkitsinghal@gmail.com> wrote:
> Hello Everyone,
>
> I want to load the indexed data from the file system using FSDirectory.
> But I also want to be sure if something was actually loaded or if a
> new empty directory was created and returned to me.
> How can I count the # of entries in the Directory object returned to me?
>
> Thanks!
> - Pulkit
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 14:58:02 2010
Return-Path: <java-user-return-47315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66606 invoked from network); 24 Sep 2010 14:58:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 14:58:01 -0000
Received: (qmail 71117 invoked by uid 500); 24 Sep 2010 14:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70706 invoked by uid 500); 24 Sep 2010 14:57:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70693 invoked by uid 99); 24 Sep 2010 14:57:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 14:57:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pulkitsinghal@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 14:57:49 +0000
Received: by wyb34 with SMTP id 34so2882603wyb.35
        for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 07:57:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=nHXq8Gbb6C7p6/vIEdvKhfRkKwmkbr5iu5dCTexcBQU=;
        b=C7ne4J+HIOUpRB8E+d9t2uIGI/wOTZ5IVFbUnMYvYJeBowBnotJHzQeZN593WHqEW6
         JoJKR53U/jrIZuSoIpg4S6dZMXeBv296CKENxo7BIE84M4br2Rht/IBphvticovWLcG6
         X4sj72XusoPjl6HmIMxfJhXcFgu+5GZb+mGfo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NQmCgKsLXXQw8Ex9pKcbJDNABqqOGLMw7gyEdHr08kjAy5gPj3L/T4iWWl8wBYfSMZ
         E5bwRE+NgR/7mD1mkmT0LrdS8U5Z6/TTia7e9aSzkdX25icYc+bvP5WpQsYLb/HbofwI
         zqCe60MufSxOVQm+0Qz3M6kFdfBzteipuuz0I=
MIME-Version: 1.0
Received: by 10.216.67.66 with SMTP id i44mr9570728wed.53.1285340247836; Fri,
 24 Sep 2010 07:57:27 -0700 (PDT)
Received: by 10.216.137.146 with HTTP; Fri, 24 Sep 2010 07:57:27 -0700 (PDT)
In-Reply-To: <4C983A5E.2010809@gmail.com>
References: <AANLkTin=k0PPJdatKAkSoc22aWdeJXm=d6eCKb5TvMt1@mail.gmail.com>
	<4C983A5E.2010809@gmail.com>
Date: Fri, 24 Sep 2010 10:57:27 -0400
Message-ID: <AANLkTi=nWL8XNFKgg8u4CHmRiWE0EKN16oSaqFiLdfUZ@mail.gmail.com>
Subject: Re: Checksum and transactional safety for lucene indexes
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

In order to determine the integrity of an index file, I found that the
easiest way was to use IndexReader.open(directory) and if there were
any problems with the data then catch the exceptions and make a new
one.

I also see that the API offers IndexReader.indexExists() ... would
that be a better alternative?
Or would I miss out on being able to check if the index is corrupt if
I limit myself to that invocaction only?

Thanks!

- Pulkit

On Tue, Sep 21, 2010 at 12:53 AM, Lance Norskog <goksron@gmail.com> wrote:
> If an index file is not completely written to disk, it never become
> available. Lucene has a file describing the current active index segments.
> It writes all new files to the disk, and changes the description file
> (segments.gen) only after that.
>
> If the index files are corrupted, all bets are off. Usually the data
> structures are damaged and Lucene throws CorruptIndexExceptions, NPE or
> array out-of-bounds exceptions. There is no checksumming of the index files.
>
> Lance
>
> Pulkit Singhal wrote:
>>
>> Hello Everyone,
>>
>> What happens if:
>> a) lucene index gets written half-way to the disk and then something goes
>> wrong?
>> b) the index gets corrupted on the file system?
>>
>> When we open that directory location again using FSDirectory
>> implementations:
>> a) Is there any provision for the code to clean out the previous file
>> and start a new index file because the older one was corrupted and
>> didn't match the checksum?
>> b) Or can we check that the # of documents that can be found in the
>> underlying index are now ZERO because they can't be parsed properly?
>> How can we do this?
>>
>> - Pulkit
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 15:18:38 2010
Return-Path: <java-user-return-47316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76746 invoked from network); 24 Sep 2010 15:18:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 15:18:38 -0000
Received: (qmail 97844 invoked by uid 500); 24 Sep 2010 15:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97768 invoked by uid 500); 24 Sep 2010 15:18:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97760 invoked by uid 99); 24 Sep 2010 15:18:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 15:18:33 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 15:18:28 +0000
Received: by wwi18 with SMTP id 18so271769wwi.5
        for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 08:18:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=eWLTLOto3sA7OQWwiKyEcQiyMQOGWeFNcPHp2+lle00=;
        b=YnSc/2h9fpSrcfRHF0xn5I5NkRSP/3jWNIohHs3E64xwN/07ti5yTfIlU6JdP+oxyQ
         J4pbEYcFaO40vQmVev9/miPrN77nc4SnqoXkKoXCaAQsT+Zi/d4Px3sf0eRynIuFUDEd
         Qnq7l/sfinB6RsF/uJby7rvtb1l4EGXbKZ+c0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=SozkXsoYqSsoDf0B4phwlyOJGafx60FyDPgNLXd/n3PYjzB3xc2BbWjREb/LvuMDz1
         Tljf5MlOMhUgKuTsgdHwAZh2bSAYcWGbjqTZwbSn/iqad+7TqQXVTgOB7UeY6CeKNGvc
         0GFEOKEmIkYxA1CnSM3XuR0W1mbUlnYetrRbY=
MIME-Version: 1.0
Received: by 10.216.157.13 with SMTP id n13mr2866802wek.35.1285341487188; Fri,
 24 Sep 2010 08:18:07 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.48.11 with HTTP; Fri, 24 Sep 2010 08:18:07 -0700 (PDT)
In-Reply-To: <4C983A5E.2010809@gmail.com>
References: <AANLkTin=k0PPJdatKAkSoc22aWdeJXm=d6eCKb5TvMt1@mail.gmail.com>
	<4C983A5E.2010809@gmail.com>
Date: Fri, 24 Sep 2010 11:18:07 -0400
X-Google-Sender-Auth: dttH_9jXiolSbOvzjI3GiJHOrR0
Message-ID: <AANLkTinJDF9EvH6bxAFETufuUeeskDH1Z76T0i3WUAyd@mail.gmail.com>
Subject: Re: Checksum and transactional safety for lucene indexes
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Sep 21, 2010 at 12:53 AM, Lance Norskog <goksron@gmail.com> wrote:
> If an index file is not completely written to disk, it never become
> available. Lucene has a file describing the current active index segments.
> It writes all new files to the disk, and changes the description file
> (segments.gen) only after that.

Right - but it's segments_<n>
segments.gen is actually optional (IIRC, solr doesn't even replicate
it to slaves).

-Yonik
http://lucenerevolution.org   Lucene/Solr Conference, Boston Oct 7-8

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 24 16:13:26 2010
Return-Path: <java-user-return-47317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17150 invoked from network); 24 Sep 2010 16:13:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Sep 2010 16:13:25 -0000
Received: (qmail 24734 invoked by uid 500); 24 Sep 2010 16:13:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24471 invoked by uid 500); 24 Sep 2010 16:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24458 invoked by uid 99); 24 Sep 2010 16:13:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 16:13:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Sep 2010 16:13:17 +0000
X-ASG-Debug-ID: 1285344776-63b600650000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 58B8DE6615
	for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 09:12:56 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM ([10.10.160.33]) by mail-fw.broadvision.com with ESMTP id lexqTrB6hlQ2TQaY for <java-user@lucene.apache.org>; Fri, 24 Sep 2010 09:12:56 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
X-ASG-Orig-Subj: RE: In lucene 2.3.2, needs to stop optimization?
Subject: RE: In lucene 2.3.2, needs to stop optimization?
Date: Fri, 24 Sep 2010 09:12:56 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1696@rw-ex2003.BROADVISION.COM>
In-Reply-To: <AANLkTimJgBaTkr8+fS3NoyS2c63VD_UZncZsUQk+EKmK@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: In lucene 2.3.2, needs to stop optimization?
Thread-Index: ActbtmNunmFqrrSMQTmFsObfgdtHAQANjm3Q
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: UNKNOWN[10.10.160.33]
X-Barracuda-Start-Time: 1285344776
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com

SGksDQoNClRoYW5rcyB2ZXJ5IG11Y2gsIEkgZGVmaW5pdGVseSBwbGFuIHRvIHVwZ3JhZGUgbHVj
ZW5lLg0KDQpJIGRpZCBub3Qga2VlcCBJbmRleFdyaXRlciBvcGVuIHBhcnRseSBiZWNhdXNlIGlu
IG91ciBhcHAgd2UNCmhhdmUgbW9yZSB0aGFuIDNLIGluZGVwZW5kZW50IGx1Y2VuZSBkaXJlY3Rv
cmllcywgc28gaXQgd291bGQNCmJlIGhhcmQgdG8gcHV0IHRoZW0gYWxsIGludG8gbWVtb3J5LCBi
dXQgSSBtYXkgY2FjaGUgc29tZQ0KYnVzaWVzdCBvbmVzLg0KDQpCZXN0IHJlZ2FyZHMsIExpc2hl
bmcNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IERhbmlsIFRPUklOIFttYWls
dG86dG9yaW5kYW5AZ21haWwuY29tXQ0KU2VudDogRnJpZGF5LCBTZXB0ZW1iZXIgMjQsIDIwMTAg
MTI6MDEgQU0NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IFJlOiBJ
biBsdWNlbmUgMi4zLjIsIG5lZWRzIHRvIHN0b3Agb3B0aW1pemF0aW9uPw0KDQoNCklzIGl0IHBv
c3NpYmxlIGZvciB5b3UgdG8gbWlncmF0ZSB0byAyLjkueCA/IE9yIGV2ZW4gMy54ID8NClRoZXJl
IGFyZSBzb21lIGh1Z2Ugb3B0aW1pemF0aW9uIGluIDIuOSBvbiByZW9wZW5pbmcgaW5kZXhlcyB0
aGF0DQpzaWduaWZpY2FudGx5IGltcHJvdmUgc2VhcmNoIHNwZWVkLg0KDQpJJ20gbm90IHN1cmUu
LmJ1dCBJIHRoaW5rIGluZGV4V3JpdGVyLmdldFJlYWRlcigpIGZvciBhbG1vc3QgcmVhbHRpbWUN
CndhcyBhZGRlZCB0byAyLjksIHNvIHlvdSBjYW4ga2VlcCB5b3VyIHdyaXRlciBhbHdheXMgb3Bl
biBhbmQgZ2V0IHZlcnkNCmNoZWFwbHkgYSBuZXcgcmVhZGVyIG9uIGVhY2ggc2VhcmNoIHJlcXVl
c3QuDQoNCk9uIEZyaSwgU2VwIDI0LCAyMDEwIGF0IDA5OjQ3LCBaaGFuZywgTGlzaGVuZw0KPExp
c2hlbmcuWmhhbmdAYnJvYWR2aXNpb24uY29tPiB3cm90ZToNCj4gSGksDQo+DQo+IEkgcmVhZCBk
b2N1bWVudC9jb2RlIGFuZCBkaWQgc29tZSBleHBlcmltZW50cywgb25lIHBvc3NpYmlsaXR5DQo+
IGlzIHRvIHJhaXNlIG1lcmdlRmFjdG9yIHRvIGhpZ2ggdmFsdWUsIHNheSBjbG9zZSB0byAyQmls
bGlvbiwNCj4gdGhlbiBhIGxvdCBvZiBzbWFsbCBmaWxlcyBhcmUgY3JlYXRlZCBhbmQgYWZ0ZXIg
PjUwMCBkb2NzIGFyZQ0KPiBjcmVhdGVkIHNlcGFyYXRlbHksIHNlYXJjaCBzcGVlZCBkcm9wcGVk
IHNoYXJwbHkuDQo+DQo+IEkgbm90aWNlZCB3aXRoIG91ciBjdXJyZW50IGRhdGEsIGlmIEkgYWRk
IG9uZSBkb2MgdGhlbiBjYWxsDQo+IG9wdGltaXplKCksIGl0IHRvb2sgYWJvdXQgN3MsIHRoaXMg
aXMgdG9vIHNsb3cgZm9yIHJlYWwgdGltZQ0KPiBzZWFyY2guDQo+DQo+IElmIEkga2VlcCBtZXJn
ZUZhY3RvciBhcyAxMCBhbmQgZG9ub3QgY2FsbCBvcHRpbWl6ZSgpLCBkb2VzIGl0DQo+IG1lYW4g
ZnJvbSB0aW1lIHRvIHRpbWUgSW5kZXhXcml0ZXIgd291bGQgb3B0aW1pemUgb24gYmFja2dyb3Vu
ZCwNCj4gd2hlbiBpdCBoYXBwZW5zLCBpdCBtYXkgdGFrZSBhIGZldyBzZWNvbmRzIChzbyBJbmRl
eCB3aWxsIGRlbGF5DQo+IGEgZmV3IHNlY29uZHMpPw0KPg0KPiBTaG91bGQgSSB1c2UgaGlnaCBt
ZXJnZUZhY3RvciBhbmQgb3B0aW1pemUgb25jZSBhIGRheSwgb3IgdXNlDQo+IGRlZmF1bHQgbWVy
Z2VGYWN0b3IgYW5kIGRvbm90IGNhbGwgb3B0aW1pemU/IG1heWJlIGxhdHRlciBpcw0KPiBiZXR0
ZXIsIGJ1dCBJIGFtIGNvbmNlcm5lZCBhYm91dCBvY2Nhc2lvbmFsIHNsb3duZXNzPw0KPg0KPiBD
dXJyZW50bHkgSSBkb25vdCBwbGFuIHRvIGtlZXAgSW5kZXhXcml0ZXIgY29uc3RhbnRseSBvcGVu
LCBidXQNCj4gb3Blbi9jbG9zZSBmb3IgZWFjaCBpbmRleCByZXF1ZXN0Lg0KPg0KPiBBbnkgc3Vn
Z2VzdGlvbiB0byBpbXByb3ZlIHdvdWxkIGJlIGFwcHJlY2lhdGVkLA0KPg0KPiBMaXNoZW5nDQo+
DQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IFpoYW5nLCBMaXNoZW5nIFtt
YWlsdG86TGlzaGVuZy5aaGFuZ0BCcm9hZFZpc2lvbi5jb21dDQo+IFNlbnQ6IFRodXJzZGF5LCBT
ZXB0ZW1iZXIgMjMsIDIwMTAgNjoxMSBQTQ0KPiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUu
b3JnDQo+IFN1YmplY3Q6IEluIGx1Y2VuZSAyLjMuMiwgbmVlZHMgdG8gc3RvcCBvcHRpbWl6YXRp
b24/DQo+DQo+DQo+IEhpLA0KPg0KPiBXZSBhcmUgdXNpbmcgbHVjZW5lIDIuMy4yLCBub3cgd2Ug
bmVlZCB0byBpbmRleCBlYWNoIGRvY3VtZW50IGFzDQo+IGZhc3QgYXMgcG9zc2libGUsIHNvIHVz
ZXIgY2FuIGFsbW9zdCBpbW1lZGlhdGVseSBzZWFyY2ggaXQuDQo+DQo+IFNvIEkgYW0gY29uc2lk
ZXJpbmcgc3RvcCBJbmRleFdyaXRlciBvcHRpbWl6YXRpb24gZHVyaW5nIHJlYWwgdGltZSwNCj4g
dGhlbiBpbiByZWxhdGl2ZWx5IG9mZi10aW1lIGxpa2UgbGF0ZSBuaWdodCB3ZSBtYXkgY2FsbCBJ
bmRleFdyaXRlciBvcHRpbWl6ZQ0KPiBtZXRob2QgZXhwbGljaXRseSBvbmNlLg0KPg0KPiBXaGF0
IGlzIHRoZSBtb3N0IGVmZmljaWVudCB3YXkgdG8gY29tcGxldGVseSB0dXJuIG9mZiBJbmRleFdy
aXRlciBtZXJnZQ0KPiBpbiBsdWNlbmUgMi4zLjI/DQo+DQo+IFRoYW5rcyB2ZXJ5IG11Y2ggZm9y
IGhlbHBzLCBMaXNoZW5nDQo+DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1t
YWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0
aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcN
Cj4NCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNl
ci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPg0KPg0KDQotLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBs
dWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11
c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-47318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 25 01:58:55 2010
Return-Path: <java-user-return-47318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42182 invoked from network); 25 Sep 2010 01:58:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Sep 2010 01:58:55 -0000
Received: (qmail 86492 invoked by uid 500); 25 Sep 2010 01:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86436 invoked by uid 500); 25 Sep 2010 01:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86428 invoked by uid 99); 25 Sep 2010 01:58:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 01:58:52 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 01:58:44 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <178537(2)>; Fri, 24 Sep 2010 18:58:07 PDT
To: java-user@lucene.apache.org
Subject: finding the analyzer for a language...
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Fri, 24 Sep 2010 18:58:07 PDT
Message-ID: <35868.1285379887@parc.com>
From: Bill Janssen <janssen@parc.com>

I thought that since I'm updating UpLib's Lucene code, I should tackle
the issue of document languages, as well.  Right now I'm using an
off-the-shelf language identifier, textcat, to figure out which language
a Web page or PDF is (mainly) written in.  I then want to analyze that
document with an appropriate analyzer.  I'd then like to map to the
correct Lucene analyzer for that language, falling back to
StandardAnalyzer if the installed Lucene library doesn't have an
analyzer for that language.

It would be *very* handy if Analyzer had a static method

  static Analyzer getAnalyzerForLanguage(String rfc_4646_lang_tag);

Right now I'm consulting a hand-compiled mapping of
langtag-to-Lucene-classname to figure out which Analyzer to use.
Wearisome, and it will be out-of-date for future releases of Lucenen
which will presumably support more languages.

Secondly, if I've got an instance of a SnowballAnalyzer, there's no way
to look "inside" it, and see what language it's for.  That's a problem
on the search side.  My QueryParser is a subclass of
MultiFieldQueryParser, and it looks for a "special" FieldQuery on the
field "_query_language", i.e., "_query_language:de" to tell the query
parser to use a German analyzer on this query.  What I'd like to be able
to do is interrogate the current analyzer attached to the query parser
instance, and throw an exception if it's not for the specified language.
I can do this for non-Snowball analyzers, because of the brittle
hand-compiled mapping mentioned above.  But if it's a SnowballAnalyzer,
there's no way to tell what the language inside it is.  So it would be
nice if SnowballAnalyzer grew a method

  String getLanguageName();

Even better would be

  String getLanguageTag();

And, it would be nice if QueryParser grew a method

  void setAnalyzer(Analyzer a);

which would allow me to simply replace the current analyzer for the
parsing of the rest of the query, instead of going through the rigmarole
of throwing an exception, catching it, recreating the QueryParser with a
different analyzer, and trying again.  What would break if you changed
the analyzer in midstream?  Wouldn't it simply be used for analyzing
remaining terms in the query?

I see that Robert Muir has been doing a lot of good work on the Snowball
code.  I'd really like to see the stopword work finished, so that a
SnowballAnalyzer for a particular language has a decent set of
stopwords.

Bill


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 25 11:22:34 2010
Return-Path: <java-user-return-47319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66386 invoked from network); 25 Sep 2010 11:22:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Sep 2010 11:22:33 -0000
Received: (qmail 37196 invoked by uid 500); 25 Sep 2010 11:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36875 invoked by uid 500); 25 Sep 2010 11:22:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36863 invoked by uid 99); 25 Sep 2010 11:22:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 11:22:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 11:22:22 +0000
Received: by fxm5 with SMTP id 5so3249340fxm.35
        for <java-user@lucene.apache.org>; Sat, 25 Sep 2010 04:22:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=wKE+yysuVXY/fDveJgR0U/6ZA8oAmqlMv3T+Y3Ji3OM=;
        b=Fn8+KYsWPd6PFPNsls0IeKHT4f6zOi1MaT4wzGnt2B/ntqB9OvfEQn5SyG9qKHzX/x
         icI+4iT8Keci3WzRZk6GPYVOe0fyRRFSVh8wGCLX3KfTXj1fBZFbK3qiIjJjVmEgFZZ/
         lMYVPhhs5tTNbkfCLEyHzptluTYcYqd6EwPEM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=CwIWotuSD68lCk1LMRbL6jK796oSqOwxLOAM+AOFFEddosOGeKp6RrIbXmhUOHl4js
         zH/1gci5703rxb+UAbnMeEvYbXUb+LUqZPNeXSboXfJsJj4TOw2zAANyREYQ+LsX1ZE0
         k1n7uPGixyEiySnzMKtkwNbVegPfeL3hPeD7g=
Received: by 10.223.105.135 with SMTP id t7mr4789023fao.57.1285413721044; Sat,
 25 Sep 2010 04:22:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.106.19 with HTTP; Sat, 25 Sep 2010 04:21:40 -0700 (PDT)
In-Reply-To: <35868.1285379887@parc.com>
References: <35868.1285379887@parc.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Sat, 25 Sep 2010 07:21:40 -0400
Message-ID: <AANLkTinB+5AZOkxb=s6JknThA+Ks7nbu_xiG++XQyD+e@mail.gmail.com>
Subject: Re: finding the analyzer for a language...
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5bc273b77ae049113b411

--001636c5bc273b77ae049113b411
Content-Type: text/plain; charset=UTF-8

On Fri, Sep 24, 2010 at 9:58 PM, Bill Janssen <janssen@parc.com> wrote:

> I thought that since I'm updating UpLib's Lucene code, I should tackle
> the issue of document languages, as well.  Right now I'm using an
> off-the-shelf language identifier, textcat, to figure out which language
> a Web page or PDF is (mainly) written in.  I then want to analyze that
> document with an appropriate analyzer.  I'd then like to map to the
> correct Lucene analyzer for that language, falling back to
> StandardAnalyzer if the installed Lucene library doesn't have an
> analyzer for that language.
>
> It would be *very* handy if Analyzer had a static method
>
>  static Analyzer getAnalyzerForLanguage(String rfc_4646_lang_tag);
>

I agree (not sure if it should be in Analyzer itself, maybe we could make an
Analyzer for this)...
i mean it sounds like what you want, is for it to work in a similar way to
ResourceBundle's fallback mechanism?

And I agree with your idea of rfc3066/4646, e.g. you might want to specify
subtags like "word" (SmartChineseAnalyzer) or "ngram" (CJKAnalyzer) for
chinese somehow?

Shai Erera brought a similar idea up before, to use Locale, but my concerns
are it would be limited by javas Locale mechanism... but we can figure this
out.

Maybe you want to create a JIRA issue to pursue this idea further? See
http://wiki.apache.org/lucene-java/HowToContribute


> Right now I'm consulting a hand-compiled mapping of
> langtag-to-Lucene-classname to figure out which Analyzer to use.
> Wearisome, and it will be out-of-date for future releases of Lucenen
> which will presumably support more languages.
>

yes, but it also brings up interesting backwards compatibility challenges.
Because if we add more analyzers, say EsperantoAnalyzer, if you upgrade
lucene then suddenly your Esperanto queries are analyzed differently
(whereas they were dealt with by StandardAnalyzer before).

But this becomes less of a problem as we work on modularizing lucene, so we
can remove Version from analyzers, and so you can just use an old analyzers
jar file (such as 4.1) but upgrade your lucene core jar to say version 4.3.


>
> Secondly, if I've got an instance of a SnowballAnalyzer, there's no way
> to look "inside" it, and see what language it's for.  That's a problem
> on the search side.  My QueryParser is a subclass of
> MultiFieldQueryParser, and it looks for a "special" FieldQuery on the
> field "_query_language", i.e., "_query_language:de" to tell the query
> parser to use a German analyzer on this query.  What I'd like to be able
> to do is interrogate the current analyzer attached to the query parser
> instance, and throw an exception if it's not for the specified language.
> I can do this for non-Snowball analyzers, because of the brittle
> hand-compiled mapping mentioned above.  But if it's a SnowballAnalyzer,
> there's no way to tell what the language inside it is.  So it would be
> nice if SnowballAnalyzer grew a method
>

SnowballAnalyzer had more problems. its actually deprecated in
trunk/branch_3x and instead there is an Analyzer for each language (English,
Italian, etc), which now has stopwords lists, and sometimes special behavior
(e.g. Turkish lowercases differently).

Put more simply, its an implementation detail for ItalianAnalyzer that we
implement the stemming with SnowballFilter. One day we might change it to
use a less aggressive stemming algorithm (e.g. ItalianLightStemFilter) by
default.

I'd really like to see the stopword work finished, so that a
> SnowballAnalyzer for a particular language has a decent set of
> stopwords.
>

See above, I think this is finished? The remaining work is actually Solr
integration.

In trunk and branch_3x, all the analyzers have their own package, here's
Italian:

Source package: contains Analyzer that uses SnowballFilter(Italian) and
loads Italian snowball stopwords by default. It also includes an
alternative, less aggressive stemmer.
http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/java/org/apache/lucene/analysis/it/

The snowball stopwords were all added to the resources directory. This is
where ItalianAnalyzer loads its set of stopwords from:
http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
<http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/>
-- 
Robert Muir
rcmuir@gmail.com

--001636c5bc273b77ae049113b411--

From java-user-return-47320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 25 19:30:36 2010
Return-Path: <java-user-return-47320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27280 invoked from network); 25 Sep 2010 19:30:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Sep 2010 19:30:36 -0000
Received: (qmail 80414 invoked by uid 500); 25 Sep 2010 19:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80278 invoked by uid 500); 25 Sep 2010 19:30:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80270 invoked by uid 99); 25 Sep 2010 19:30:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 19:30:33 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 19:30:26 +0000
Received: from parc.com ([13.1.102.103]) by alpha.xerox.com with SMTP id <512991(1)>; Sat, 25 Sep 2010 12:29:55 PDT
To: java-user@lucene.apache.org
Subject: Re: finding the analyzer for a language...
In-reply-to: <AANLkTinB+5AZOkxb=s6JknThA+Ks7nbu_xiG++XQyD+e@mail.gmail.com>
References: <35868.1285379887@parc.com> <AANLkTinB+5AZOkxb=s6JknThA+Ks7nbu_xiG++XQyD+e@mail.gmail.com>
Comments: In-reply-to Robert Muir <rcmuir@gmail.com>
    message dated "Sat, 25 Sep 2010 04:21:40 -0700."
Cc: janssen@parc.com
X-Mailer: MH-E 8.2; nmh 1.3; GNU Emacs 23.1.90
Date: Sat, 25 Sep 2010 12:29:55 PDT
Message-ID: <22393.1285442995@parc.com>
From: Bill Janssen <janssen@parc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Robert Muir <rcmuir@gmail.com> wrote:

> On Fri, Sep 24, 2010 at 9:58 PM, Bill Janssen <janssen@parc.com> wrote:
> 
> > I thought that since I'm updating UpLib's Lucene code, I should tackle
> > the issue of document languages, as well.  Right now I'm using an
> > off-the-shelf language identifier, textcat, to figure out which language
> > a Web page or PDF is (mainly) written in.  I then want to analyze that
> > document with an appropriate analyzer.  I'd then like to map to the
> > correct Lucene analyzer for that language, falling back to
> > StandardAnalyzer if the installed Lucene library doesn't have an
> > analyzer for that language.
> >
> > It would be *very* handy if Analyzer had a static method
> >
> >  static Analyzer getAnalyzerForLanguage(String rfc_4646_lang_tag);
> >
> 
> I agree (not sure if it should be in Analyzer itself, maybe we could make an
> Analyzer for this)...

Not sure I followed that...  I wanted to be able to retrieve an instance
of an instantiated Analyzer class, the class that's "designed" to work
with that language, if one exists, otherwise null.  And to have you guys
keep that list up-to-date, instead of having to do it myself :-).
Seemed to me that's the standard kind of thing you make a static method
on the top-level class.

> i mean it sounds like what you want, is for it to work in a similar way to
> ResourceBundle's fallback mechanism?

I'm not sure that's appropriate.  I just want to retrieve an Analyzer
for that language, if such a thing exists.  If by "fallback", you mean
that "en-US" should just return EnglishAnalyzer if there's no analyzer
specifically for US usage -- yes, that's fine.  On the other hand, I
don't think there should be a fallback for languages which have no
macrolanguage Analyzer -- it should just return null or throw an
exception.  The programmer can then explicitly decide how do deal with
that response.

> And I agree with your idea of rfc3066/4646, e.g. you might want to specify
> subtags like "word" (SmartChineseAnalyzer) or "ngram" (CJKAnalyzer) for
> chinese somehow?

Yes, good idea.  Might be interesting to see if those kind of subtags
can be registered with IANA, too.

Although, if one is smart enough about Lucene and one's application to
make these kinds of judgement calls, I think one is probably smart
enough to know which class to use without consulting a generic
mechanism.

> Shai Erera brought a similar idea up before, to use Locale, but my concerns
> are it would be limited by javas Locale mechanism... but we can figure this
> out.
> 
> Maybe you want to create a JIRA issue to pursue this idea further? See
> http://wiki.apache.org/lucene-java/HowToContribute
> 
> 
> > Right now I'm consulting a hand-compiled mapping of
> > langtag-to-Lucene-classname to figure out which Analyzer to use.
> > Wearisome, and it will be out-of-date for future releases of Lucenen
> > which will presumably support more languages.
> >
> 
> yes, but it also brings up interesting backwards compatibility challenges.
> Because if we add more analyzers, say EsperantoAnalyzer, if you upgrade
> lucene then suddenly your Esperanto queries are analyzed differently
> (whereas they were dealt with by StandardAnalyzer before).

Yes, presumably the Version would need to be used with this, too.

> But this becomes less of a problem as we work on modularizing lucene, so we
> can remove Version from analyzers,

Oh goody, another API change to cope with in my code.

> and so you can just use an old analyzers
> jar file (such as 4.1) but upgrade your lucene core jar to say version 4.3.
> 
> 
> >
> > Secondly, if I've got an instance of a SnowballAnalyzer, there's no way
> > to look "inside" it, and see what language it's for.  That's a problem
> > on the search side.  My QueryParser is a subclass of
> > MultiFieldQueryParser, and it looks for a "special" FieldQuery on the
> > field "_query_language", i.e., "_query_language:de" to tell the query
> > parser to use a German analyzer on this query.  What I'd like to be able
> > to do is interrogate the current analyzer attached to the query parser
> > instance, and throw an exception if it's not for the specified language.
> > I can do this for non-Snowball analyzers, because of the brittle
> > hand-compiled mapping mentioned above.  But if it's a SnowballAnalyzer,
> > there's no way to tell what the language inside it is.  So it would be
> > nice if SnowballAnalyzer grew a method
> >
> 
> SnowballAnalyzer had more problems. its actually deprecated in
> trunk/branch_3x and instead there is an Analyzer for each language (English,
> Italian, etc), which now has stopwords lists, and sometimes special behavior
> (e.g. Turkish lowercases differently).
> 
> Put more simply, its an implementation detail for ItalianAnalyzer that we
> implement the stemming with SnowballFilter. One day we might change it to
> use a less aggressive stemming algorithm (e.g. ItalianLightStemFilter) by
> default.

Ah, good.  That will suit my purposes nicely.

> I'd really like to see the stopword work finished, so that a
> > SnowballAnalyzer for a particular language has a decent set of
> > stopwords.
> >
> 
> See above, I think this is finished? The remaining work is actually Solr
> integration.

Excellent.  I looked at the JIRA, but some discussions just seem to
peter out, and I'm having a hard time telling what the resolution is.

> In trunk and branch_3x, all the analyzers have their own package, here's
> Italian:
> 
> Source package: contains Analyzer that uses SnowballFilter(Italian) and
> loads Italian snowball stopwords by default. It also includes an
> alternative, less aggressive stemmer.
> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/java/org/apache/lucene/analysis/it/
> 
> The snowball stopwords were all added to the resources directory. This is
> where ItalianAnalyzer loads its set of stopwords from:
> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
> <http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/>

I see there's also an explicit EnglishAnalyzer -- never thought it made
sense to call that StandardAnalyzer.  Great work!

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 25 20:27:30 2010
Return-Path: <java-user-return-47321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38376 invoked from network); 25 Sep 2010 20:27:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Sep 2010 20:27:30 -0000
Received: (qmail 8747 invoked by uid 500); 25 Sep 2010 20:27:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8688 invoked by uid 500); 25 Sep 2010 20:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8680 invoked by uid 99); 25 Sep 2010 20:27:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 20:27:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 20:27:22 +0000
Received: by fxm5 with SMTP id 5so3427049fxm.35
        for <java-user@lucene.apache.org>; Sat, 25 Sep 2010 13:27:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=6NYW+l6Q9Hr6EqFHHrTXMn0cumytneSLel9H3BUjr/0=;
        b=dLsfKtK7/CsieFetK4iTUdmI4VEhrI2OWZVmKXEmYX17Q8vHKbo+Z4Qt8OHhlkYDof
         73WH/rfKXxTSuD34p+i4NxCYtmdiCMq35pg+gpYAUMYOY96w4dNCynCLlw1hzzA83+si
         CAwv9rn0Mtjvy0HmScOSOlESIX1QAo+slacMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lKw0vNn9N5L7lJ3jbyGbyQ6EdWjiQ7wEwm6M0v7XWoJA5mQW0NNabGuI16i0P9iuMb
         Mwl4mekFmHq+0O7OdKvNg1/uH/Vxdf11B/Y9GswsiTYLMXd6bKNn5aPOeq5nAdAvIXC4
         h3ZLoKSR+ghXJBQ8t0hu6/PpK6w0UIwDtzx7E=
MIME-Version: 1.0
Received: by 10.103.134.4 with SMTP id l4mr372782mun.110.1285446420553; Sat,
 25 Sep 2010 13:27:00 -0700 (PDT)
Received: by 10.103.243.7 with HTTP; Sat, 25 Sep 2010 13:27:00 -0700 (PDT)
In-Reply-To: <22393.1285442995@parc.com>
References: <35868.1285379887@parc.com>
	<AANLkTinB+5AZOkxb=s6JknThA+Ks7nbu_xiG++XQyD+e@mail.gmail.com>
	<22393.1285442995@parc.com>
Date: Sat, 25 Sep 2010 22:27:00 +0200
Message-ID: <AANLkTi=c0ydL==iU_Gk0xNQTswsY=2iSC1Khip_oNGFc@mail.gmail.com>
Subject: Re: finding the analyzer for a language...
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d2035465e7104911b5110

--0016364d2035465e7104911b5110
Content-Type: text/plain; charset=ISO-8859-1

>
> Shai Erera brought a similar idea up before, to use Locale, but my concerns
> are it would be limited by javas Locale mechanism... but we can figure this
> out.
>

 It really depends how sophisticated you want such an AnalyzerFactory
(that's how I call it in my code) to be. We can
define it to be a factory for predefined languages (Locale-based) for the
most common use cases. If you want to
have tighter control over the Analyzer you create, you can still instantiate
your own, or create a new one with a custom
TokenFilters chain.

As long as things are well documented, I don't see a reason why we cannot
start simple and only if we find out
that most users don't use 'simple' and prefer to be allowed to specify more
parameters (such as 'word' or 'ngram') we
bring complication into the game.

I'm offering Locale 'cause in most web applications that I know of, the
Locale is defined on the request and is often
used to parse the user's query, translating strings etc.

Anyway, it'd be great to have any such Factory, be it Locale based or not,
because we have so many Analyzers
already, and the way things stand today, any user, even the simplest one,
who wishes to support multi-lingual search
has to sift through all of them and decide what combination to use for each
language. And if the user ends up picking
default values, then a Factory would simplify matters for him.

Shai

On Sat, Sep 25, 2010 at 9:29 PM, Bill Janssen <janssen@parc.com> wrote:

> Robert Muir <rcmuir@gmail.com> wrote:
>
> > On Fri, Sep 24, 2010 at 9:58 PM, Bill Janssen <janssen@parc.com> wrote:
> >
> > > I thought that since I'm updating UpLib's Lucene code, I should tackle
> > > the issue of document languages, as well.  Right now I'm using an
> > > off-the-shelf language identifier, textcat, to figure out which
> language
> > > a Web page or PDF is (mainly) written in.  I then want to analyze that
> > > document with an appropriate analyzer.  I'd then like to map to the
> > > correct Lucene analyzer for that language, falling back to
> > > StandardAnalyzer if the installed Lucene library doesn't have an
> > > analyzer for that language.
> > >
> > > It would be *very* handy if Analyzer had a static method
> > >
> > >  static Analyzer getAnalyzerForLanguage(String rfc_4646_lang_tag);
> > >
> >
> > I agree (not sure if it should be in Analyzer itself, maybe we could make
> an
> > Analyzer for this)...
>
> Not sure I followed that...  I wanted to be able to retrieve an instance
> of an instantiated Analyzer class, the class that's "designed" to work
> with that language, if one exists, otherwise null.  And to have you guys
> keep that list up-to-date, instead of having to do it myself :-).
> Seemed to me that's the standard kind of thing you make a static method
> on the top-level class.
>
> > i mean it sounds like what you want, is for it to work in a similar way
> to
> > ResourceBundle's fallback mechanism?
>
> I'm not sure that's appropriate.  I just want to retrieve an Analyzer
> for that language, if such a thing exists.  If by "fallback", you mean
> that "en-US" should just return EnglishAnalyzer if there's no analyzer
> specifically for US usage -- yes, that's fine.  On the other hand, I
> don't think there should be a fallback for languages which have no
> macrolanguage Analyzer -- it should just return null or throw an
> exception.  The programmer can then explicitly decide how do deal with
> that response.
>
> > And I agree with your idea of rfc3066/4646, e.g. you might want to
> specify
> > subtags like "word" (SmartChineseAnalyzer) or "ngram" (CJKAnalyzer) for
> > chinese somehow?
>
> Yes, good idea.  Might be interesting to see if those kind of subtags
> can be registered with IANA, too.
>
> Although, if one is smart enough about Lucene and one's application to
> make these kinds of judgement calls, I think one is probably smart
> enough to know which class to use without consulting a generic
> mechanism.
>
> > Shai Erera brought a similar idea up before, to use Locale, but my
> concerns
> > are it would be limited by javas Locale mechanism... but we can figure
> this
> > out.
> >
> > Maybe you want to create a JIRA issue to pursue this idea further? See
> > http://wiki.apache.org/lucene-java/HowToContribute
> >
> >
> > > Right now I'm consulting a hand-compiled mapping of
> > > langtag-to-Lucene-classname to figure out which Analyzer to use.
> > > Wearisome, and it will be out-of-date for future releases of Lucenen
> > > which will presumably support more languages.
> > >
> >
> > yes, but it also brings up interesting backwards compatibility
> challenges.
> > Because if we add more analyzers, say EsperantoAnalyzer, if you upgrade
> > lucene then suddenly your Esperanto queries are analyzed differently
> > (whereas they were dealt with by StandardAnalyzer before).
>
> Yes, presumably the Version would need to be used with this, too.
>
> > But this becomes less of a problem as we work on modularizing lucene, so
> we
> > can remove Version from analyzers,
>
> Oh goody, another API change to cope with in my code.
>
> > and so you can just use an old analyzers
> > jar file (such as 4.1) but upgrade your lucene core jar to say version
> 4.3.
> >
> >
> > >
> > > Secondly, if I've got an instance of a SnowballAnalyzer, there's no way
> > > to look "inside" it, and see what language it's for.  That's a problem
> > > on the search side.  My QueryParser is a subclass of
> > > MultiFieldQueryParser, and it looks for a "special" FieldQuery on the
> > > field "_query_language", i.e., "_query_language:de" to tell the query
> > > parser to use a German analyzer on this query.  What I'd like to be
> able
> > > to do is interrogate the current analyzer attached to the query parser
> > > instance, and throw an exception if it's not for the specified
> language.
> > > I can do this for non-Snowball analyzers, because of the brittle
> > > hand-compiled mapping mentioned above.  But if it's a SnowballAnalyzer,
> > > there's no way to tell what the language inside it is.  So it would be
> > > nice if SnowballAnalyzer grew a method
> > >
> >
> > SnowballAnalyzer had more problems. its actually deprecated in
> > trunk/branch_3x and instead there is an Analyzer for each language
> (English,
> > Italian, etc), which now has stopwords lists, and sometimes special
> behavior
> > (e.g. Turkish lowercases differently).
> >
> > Put more simply, its an implementation detail for ItalianAnalyzer that we
> > implement the stemming with SnowballFilter. One day we might change it to
> > use a less aggressive stemming algorithm (e.g. ItalianLightStemFilter) by
> > default.
>
> Ah, good.  That will suit my purposes nicely.
>
> > I'd really like to see the stopword work finished, so that a
> > > SnowballAnalyzer for a particular language has a decent set of
> > > stopwords.
> > >
> >
> > See above, I think this is finished? The remaining work is actually Solr
> > integration.
>
> Excellent.  I looked at the JIRA, but some discussions just seem to
> peter out, and I'm having a hard time telling what the resolution is.
>
> > In trunk and branch_3x, all the analyzers have their own package, here's
> > Italian:
> >
> > Source package: contains Analyzer that uses SnowballFilter(Italian) and
> > loads Italian snowball stopwords by default. It also includes an
> > alternative, less aggressive stemmer.
> >
> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/java/org/apache/lucene/analysis/it/
> >
> > The snowball stopwords were all added to the resources directory. This is
> > where ItalianAnalyzer loads its set of stopwords from:
> >
> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
> > <
> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
> >
>
> I see there's also an explicit EnglishAnalyzer -- never thought it made
> sense to call that StandardAnalyzer.  Great work!
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364d2035465e7104911b5110--

From java-user-return-47322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 25 22:21:00 2010
Return-Path: <java-user-return-47322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70059 invoked from network); 25 Sep 2010 22:21:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Sep 2010 22:21:00 -0000
Received: (qmail 61502 invoked by uid 500); 25 Sep 2010 22:20:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61426 invoked by uid 500); 25 Sep 2010 22:20:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61418 invoked by uid 99); 25 Sep 2010 22:20:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Sep 2010 22:20:57 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 25 Sep 2010 22:20:49 +0000
Received: (qmail 15440 invoked from network); 25 Sep 2010 22:20:27 -0000
Received: from unknown (109.160.209.235)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 25 Sep 2010 22:19:50 -0000
Message-ID: <4C9E7580.5090605@code972.com>
Date: Sun, 26 Sep 2010 00:19:44 +0200
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: finding the analyzer for a language...
References: <35868.1285379887@parc.com>	<AANLkTinB+5AZOkxb=s6JknThA+Ks7nbu_xiG++XQyD+e@mail.gmail.com>	<22393.1285442995@parc.com> <AANLkTi=c0ydL==iU_Gk0xNQTswsY=2iSC1Khip_oNGFc@mail.gmail.com>
In-Reply-To: <AANLkTi=c0ydL==iU_Gk0xNQTswsY=2iSC1Khip_oNGFc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I may be missing the point here, but how do you define an analyzer <-> 
language match? What do you do in cases of mixed content, for example?

Itamar.

On 25/9/2010 10:27 PM, Shai Erera wrote:
>> Shai Erera brought a similar idea up before, to use Locale, but my concerns
>> are it would be limited by javas Locale mechanism... but we can figure this
>> out.
>>
>>      
>   It really depends how sophisticated you want such an AnalyzerFactory
> (that's how I call it in my code) to be. We can
> define it to be a factory for predefined languages (Locale-based) for the
> most common use cases. If you want to
> have tighter control over the Analyzer you create, you can still instantiate
> your own, or create a new one with a custom
> TokenFilters chain.
>
> As long as things are well documented, I don't see a reason why we cannot
> start simple and only if we find out
> that most users don't use 'simple' and prefer to be allowed to specify more
> parameters (such as 'word' or 'ngram') we
> bring complication into the game.
>
> I'm offering Locale 'cause in most web applications that I know of, the
> Locale is defined on the request and is often
> used to parse the user's query, translating strings etc.
>
> Anyway, it'd be great to have any such Factory, be it Locale based or not,
> because we have so many Analyzers
> already, and the way things stand today, any user, even the simplest one,
> who wishes to support multi-lingual search
> has to sift through all of them and decide what combination to use for each
> language. And if the user ends up picking
> default values, then a Factory would simplify matters for him.
>
> Shai
>
> On Sat, Sep 25, 2010 at 9:29 PM, Bill Janssen<janssen@parc.com>  wrote:
>
>    
>> Robert Muir<rcmuir@gmail.com>  wrote:
>>
>>      
>>> On Fri, Sep 24, 2010 at 9:58 PM, Bill Janssen<janssen@parc.com>  wrote:
>>>
>>>        
>>>> I thought that since I'm updating UpLib's Lucene code, I should tackle
>>>> the issue of document languages, as well.  Right now I'm using an
>>>> off-the-shelf language identifier, textcat, to figure out which
>>>>          
>> language
>>      
>>>> a Web page or PDF is (mainly) written in.  I then want to analyze that
>>>> document with an appropriate analyzer.  I'd then like to map to the
>>>> correct Lucene analyzer for that language, falling back to
>>>> StandardAnalyzer if the installed Lucene library doesn't have an
>>>> analyzer for that language.
>>>>
>>>> It would be *very* handy if Analyzer had a static method
>>>>
>>>>   static Analyzer getAnalyzerForLanguage(String rfc_4646_lang_tag);
>>>>
>>>>          
>>> I agree (not sure if it should be in Analyzer itself, maybe we could make
>>>        
>> an
>>      
>>> Analyzer for this)...
>>>        
>> Not sure I followed that...  I wanted to be able to retrieve an instance
>> of an instantiated Analyzer class, the class that's "designed" to work
>> with that language, if one exists, otherwise null.  And to have you guys
>> keep that list up-to-date, instead of having to do it myself :-).
>> Seemed to me that's the standard kind of thing you make a static method
>> on the top-level class.
>>
>>      
>>> i mean it sounds like what you want, is for it to work in a similar way
>>>        
>> to
>>      
>>> ResourceBundle's fallback mechanism?
>>>        
>> I'm not sure that's appropriate.  I just want to retrieve an Analyzer
>> for that language, if such a thing exists.  If by "fallback", you mean
>> that "en-US" should just return EnglishAnalyzer if there's no analyzer
>> specifically for US usage -- yes, that's fine.  On the other hand, I
>> don't think there should be a fallback for languages which have no
>> macrolanguage Analyzer -- it should just return null or throw an
>> exception.  The programmer can then explicitly decide how do deal with
>> that response.
>>
>>      
>>> And I agree with your idea of rfc3066/4646, e.g. you might want to
>>>        
>> specify
>>      
>>> subtags like "word" (SmartChineseAnalyzer) or "ngram" (CJKAnalyzer) for
>>> chinese somehow?
>>>        
>> Yes, good idea.  Might be interesting to see if those kind of subtags
>> can be registered with IANA, too.
>>
>> Although, if one is smart enough about Lucene and one's application to
>> make these kinds of judgement calls, I think one is probably smart
>> enough to know which class to use without consulting a generic
>> mechanism.
>>
>>      
>>> Shai Erera brought a similar idea up before, to use Locale, but my
>>>        
>> concerns
>>      
>>> are it would be limited by javas Locale mechanism... but we can figure
>>>        
>> this
>>      
>>> out.
>>>
>>> Maybe you want to create a JIRA issue to pursue this idea further? See
>>> http://wiki.apache.org/lucene-java/HowToContribute
>>>
>>>
>>>        
>>>> Right now I'm consulting a hand-compiled mapping of
>>>> langtag-to-Lucene-classname to figure out which Analyzer to use.
>>>> Wearisome, and it will be out-of-date for future releases of Lucenen
>>>> which will presumably support more languages.
>>>>
>>>>          
>>> yes, but it also brings up interesting backwards compatibility
>>>        
>> challenges.
>>      
>>> Because if we add more analyzers, say EsperantoAnalyzer, if you upgrade
>>> lucene then suddenly your Esperanto queries are analyzed differently
>>> (whereas they were dealt with by StandardAnalyzer before).
>>>        
>> Yes, presumably the Version would need to be used with this, too.
>>
>>      
>>> But this becomes less of a problem as we work on modularizing lucene, so
>>>        
>> we
>>      
>>> can remove Version from analyzers,
>>>        
>> Oh goody, another API change to cope with in my code.
>>
>>      
>>> and so you can just use an old analyzers
>>> jar file (such as 4.1) but upgrade your lucene core jar to say version
>>>        
>> 4.3.
>>      
>>>
>>>        
>>>> Secondly, if I've got an instance of a SnowballAnalyzer, there's no way
>>>> to look "inside" it, and see what language it's for.  That's a problem
>>>> on the search side.  My QueryParser is a subclass of
>>>> MultiFieldQueryParser, and it looks for a "special" FieldQuery on the
>>>> field "_query_language", i.e., "_query_language:de" to tell the query
>>>> parser to use a German analyzer on this query.  What I'd like to be
>>>>          
>> able
>>      
>>>> to do is interrogate the current analyzer attached to the query parser
>>>> instance, and throw an exception if it's not for the specified
>>>>          
>> language.
>>      
>>>> I can do this for non-Snowball analyzers, because of the brittle
>>>> hand-compiled mapping mentioned above.  But if it's a SnowballAnalyzer,
>>>> there's no way to tell what the language inside it is.  So it would be
>>>> nice if SnowballAnalyzer grew a method
>>>>
>>>>          
>>> SnowballAnalyzer had more problems. its actually deprecated in
>>> trunk/branch_3x and instead there is an Analyzer for each language
>>>        
>> (English,
>>      
>>> Italian, etc), which now has stopwords lists, and sometimes special
>>>        
>> behavior
>>      
>>> (e.g. Turkish lowercases differently).
>>>
>>> Put more simply, its an implementation detail for ItalianAnalyzer that we
>>> implement the stemming with SnowballFilter. One day we might change it to
>>> use a less aggressive stemming algorithm (e.g. ItalianLightStemFilter) by
>>> default.
>>>        
>> Ah, good.  That will suit my purposes nicely.
>>
>>      
>>> I'd really like to see the stopword work finished, so that a
>>>        
>>>> SnowballAnalyzer for a particular language has a decent set of
>>>> stopwords.
>>>>
>>>>          
>>> See above, I think this is finished? The remaining work is actually Solr
>>> integration.
>>>        
>> Excellent.  I looked at the JIRA, but some discussions just seem to
>> peter out, and I'm having a hard time telling what the resolution is.
>>
>>      
>>> In trunk and branch_3x, all the analyzers have their own package, here's
>>> Italian:
>>>
>>> Source package: contains Analyzer that uses SnowballFilter(Italian) and
>>> loads Italian snowball stopwords by default. It also includes an
>>> alternative, less aggressive stemmer.
>>>
>>>        
>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/java/org/apache/lucene/analysis/it/
>>      
>>> The snowball stopwords were all added to the resources directory. This is
>>> where ItalianAnalyzer loads its set of stopwords from:
>>>
>>>        
>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
>>      
>>> <
>>>        
>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
>>      
>>>        
>> I see there's also an explicit EnglishAnalyzer -- never thought it made
>> sense to call that StandardAnalyzer.  Great work!
>>
>> Bill
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 04:17:48 2010
Return-Path: <java-user-return-47323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60911 invoked from network); 26 Sep 2010 04:17:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 04:17:47 -0000
Received: (qmail 6810 invoked by uid 500); 26 Sep 2010 04:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6415 invoked by uid 500); 26 Sep 2010 04:17:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6407 invoked by uid 99); 26 Sep 2010 04:17:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 04:17:41 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 04:17:35 +0000
Received: by iwn6 with SMTP id 6so4233697iwn.35
        for <java-user@lucene.apache.org>; Sat, 25 Sep 2010 21:17:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.35.202 with SMTP id q10mr6554957ibd.138.1285474632620;
 Sat, 25 Sep 2010 21:17:12 -0700 (PDT)
Received: by 10.231.176.17 with HTTP; Sat, 25 Sep 2010 21:17:12 -0700 (PDT)
Date: Sun, 26 Sep 2010 11:17:12 +0700
Message-ID: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
Subject: flushing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

hello all,
I am here to ask about lucene in flushing indexes.
below is a pseudocode I get from the book lucene in action.

FSDirectory fsDir = FSDirectory.getDirectory("/tmp/index",
true);
RAMDirectory ramDir = new RAMDirectory();
IndexWriter fsWriter = IndexWriter(fsDir,
new SimpleAnalyzer(), true);
IndexWriter ramWriter = new IndexWriter(ramDir,
new SimpleAnalyzer(), true);
while (there are documents to index) {
... create Document ...
ramWriter.addDocument(doc);
if (condition for flushing memory to disk has been met) { ///THIS LINE
FOR FLUSHING INDEX
fsWriter.addIndexes(Directory[] {ramDir});
ramWriter.close();
ramWriter = new IndexWriter(ramDir, new SimpleAnalyzer(),
true);
}
}

the above code has a condition to which the index need to be flush
from RAMDirectory to the disk. what I am asking is that what is the
correct source code to be used? I mean what is the source code for
flushing indexes? maybe some of you had tried it so can help me out
here. I am a bit stuck at this point. any help would be appreciated.

thanks

-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 04:38:08 2010
Return-Path: <java-user-return-47324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63970 invoked from network); 26 Sep 2010 04:38:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 04:38:08 -0000
Received: (qmail 19982 invoked by uid 500); 26 Sep 2010 04:38:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19649 invoked by uid 500); 26 Sep 2010 04:38:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19641 invoked by uid 99); 26 Sep 2010 04:38:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 04:38:02 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 04:37:55 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 99FE9D36007
	for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 06:37:35 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id a8-oZ5rXjnbw for <java-user@lucene.apache.org>;
	Sun, 26 Sep 2010 06:37:23 +0200 (CEST)
Received: from VEGA (70-35-37-2.static.wiline.com [70.35.37.2])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id E683FD36005
	for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 06:37:22 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
In-Reply-To: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
Subject: RE: flushing index
Date: Sat, 25 Sep 2010 21:37:46 -0700
Message-ID: <001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHTQAC1dqsOSOMpuuqwZT9MlKlqVZMT6Ing
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

You should close the ramwriter before doing the addindexes call. Else you
simply copy only *committed* changes, but there are none, as the index is
initially empty and stays empty for an outside reader (your addindexes call
is the outside reader) until the ramwriter is closed or committed. :-)

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Yakob [mailto:jacobian@opensuse-id.org]
> Sent: Saturday, September 25, 2010 9:17 PM
> To: java-user@lucene.apache.org
> Subject: flushing index
> 
> hello all,
> I am here to ask about lucene in flushing indexes.
> below is a pseudocode I get from the book lucene in action.
> 
> FSDirectory fsDir = FSDirectory.getDirectory("/tmp/index",
> true);
> RAMDirectory ramDir = new RAMDirectory(); IndexWriter fsWriter =
> IndexWriter(fsDir, new SimpleAnalyzer(), true); IndexWriter ramWriter =
new
> IndexWriter(ramDir, new SimpleAnalyzer(), true); while (there are
documents
> to index) { ... create Document ...
> ramWriter.addDocument(doc);
> if (condition for flushing memory to disk has been met) { ///THIS LINE FOR
> FLUSHING INDEX fsWriter.addIndexes(Directory[] {ramDir});
ramWriter.close();
> ramWriter = new IndexWriter(ramDir, new SimpleAnalyzer(), true); } }
> 
> the above code has a condition to which the index need to be flush from
> RAMDirectory to the disk. what I am asking is that what is the correct
source
> code to be used? I mean what is the source code for flushing indexes?
maybe
> some of you had tried it so can help me out here. I am a bit stuck at this
point.
> any help would be appreciated.
> 
> thanks
> 
> --
> http://jacobian.web.id
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 08:11:31 2010
Return-Path: <java-user-return-47325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10944 invoked from network); 26 Sep 2010 08:11:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 08:11:31 -0000
Received: (qmail 97653 invoked by uid 500); 26 Sep 2010 08:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97183 invoked by uid 500); 26 Sep 2010 08:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97173 invoked by uid 99); 26 Sep 2010 08:11:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 08:11:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 08:11:17 +0000
Received: by fxm5 with SMTP id 5so3574527fxm.35
        for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 01:10:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Yz6aI8ThXEHjk/4n1Sdf6iw6TMGLZTXr8JYEyObjLU4=;
        b=Grs5mGAIcObayeJ3wVbcnA3aE9HY7xZyLRrX1EMYWlk3HA9Ao0rHh3p+rdV4HDX9G2
         jBTm6M5vGi8hY8qtkmK2dYxiR1lr5vW7xe1XMadCUJ4qUx+Jz7dlFQUM2xnMAgjmduZK
         +mKnC8eqtzfI9PTtnQxovztM/h9wL3Q99smOA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=b1WNu33aMuScXEKJnVpWXmf2pVIv2klg92IKrlEF+s4ZUj2n7NrBnDX6TZ4CsnkL/n
         SJekiSyzpbhwj7gTZcuNN2nriQSQ026vhFPNPdfyLNSpvsjMe4+f5XCzmvVCVRRIGq+A
         4Q0CuctdtbUNC3Q6VPMydehwpqs7xQ9SC3+aQ=
MIME-Version: 1.0
Received: by 10.103.199.17 with SMTP id b17mr451890muq.23.1285488656992; Sun,
 26 Sep 2010 01:10:56 -0700 (PDT)
Received: by 10.103.243.7 with HTTP; Sun, 26 Sep 2010 01:10:56 -0700 (PDT)
In-Reply-To: <4C9E7580.5090605@code972.com>
References: <35868.1285379887@parc.com>
	<AANLkTinB+5AZOkxb=s6JknThA+Ks7nbu_xiG++XQyD+e@mail.gmail.com>
	<22393.1285442995@parc.com>
	<AANLkTi=c0ydL==iU_Gk0xNQTswsY=2iSC1Khip_oNGFc@mail.gmail.com>
	<4C9E7580.5090605@code972.com>
Date: Sun, 26 Sep 2010 10:10:56 +0200
Message-ID: <AANLkTinA-3eJoMwRR=EWFVhSCEt26+_1OW8A1wLnrYQB@mail.gmail.com>
Subject: Re: finding the analyzer for a language...
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016369cfeffc349f50491252646
X-Virus-Checked: Checked by ClamAV on apache.org

--0016369cfeffc349f50491252646
Content-Type: text/plain; charset=ISO-8859-1

The mapping is simply about returning the right Analyzer for the given
Locale. You decide up front (as the Factory developer) what Analyzer /
Tokenizer + TokenFilters combination you want to return for each language,
and then when that language is input, you return it. That's it.

Can you define mixed content? There are two possibilities:

1) Indexing documents of different languages. In that case, you need to know
what's the document language, and then you use IndexWriter.addDocument(doc,
analyzer) method, instead of relying on the default analyzer you pass to
IndexWriterConfig.

2) Indexing documents that include text in multiple languages -- this is a
complicated case and you need auto-language identification at the Tokenizer
level. This is not the case where a Factory would be useful.

Shai

On Sun, Sep 26, 2010 at 12:19 AM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> I may be missing the point here, but how do you define an analyzer <->
> language match? What do you do in cases of mixed content, for example?
>
> Itamar.
>
>
> On 25/9/2010 10:27 PM, Shai Erera wrote:
>
>> Shai Erera brought a similar idea up before, to use Locale, but my
>>> concerns
>>> are it would be limited by javas Locale mechanism... but we can figure
>>> this
>>> out.
>>>
>>>
>>>
>>  It really depends how sophisticated you want such an AnalyzerFactory
>> (that's how I call it in my code) to be. We can
>> define it to be a factory for predefined languages (Locale-based) for the
>> most common use cases. If you want to
>> have tighter control over the Analyzer you create, you can still
>> instantiate
>> your own, or create a new one with a custom
>> TokenFilters chain.
>>
>> As long as things are well documented, I don't see a reason why we cannot
>> start simple and only if we find out
>> that most users don't use 'simple' and prefer to be allowed to specify
>> more
>> parameters (such as 'word' or 'ngram') we
>> bring complication into the game.
>>
>> I'm offering Locale 'cause in most web applications that I know of, the
>> Locale is defined on the request and is often
>> used to parse the user's query, translating strings etc.
>>
>> Anyway, it'd be great to have any such Factory, be it Locale based or not,
>> because we have so many Analyzers
>> already, and the way things stand today, any user, even the simplest one,
>> who wishes to support multi-lingual search
>> has to sift through all of them and decide what combination to use for
>> each
>> language. And if the user ends up picking
>> default values, then a Factory would simplify matters for him.
>>
>> Shai
>>
>> On Sat, Sep 25, 2010 at 9:29 PM, Bill Janssen<janssen@parc.com>  wrote:
>>
>>
>>
>>> Robert Muir<rcmuir@gmail.com>  wrote:
>>>
>>>
>>>
>>>> On Fri, Sep 24, 2010 at 9:58 PM, Bill Janssen<janssen@parc.com>  wrote:
>>>>
>>>>
>>>>
>>>>> I thought that since I'm updating UpLib's Lucene code, I should tackle
>>>>> the issue of document languages, as well.  Right now I'm using an
>>>>> off-the-shelf language identifier, textcat, to figure out which
>>>>>
>>>>>
>>>> language
>>>
>>>
>>>> a Web page or PDF is (mainly) written in.  I then want to analyze that
>>>>> document with an appropriate analyzer.  I'd then like to map to the
>>>>> correct Lucene analyzer for that language, falling back to
>>>>> StandardAnalyzer if the installed Lucene library doesn't have an
>>>>> analyzer for that language.
>>>>>
>>>>> It would be *very* handy if Analyzer had a static method
>>>>>
>>>>>  static Analyzer getAnalyzerForLanguage(String rfc_4646_lang_tag);
>>>>>
>>>>>
>>>>>
>>>> I agree (not sure if it should be in Analyzer itself, maybe we could
>>>> make
>>>>
>>>>
>>> an
>>>
>>>
>>>> Analyzer for this)...
>>>>
>>>>
>>> Not sure I followed that...  I wanted to be able to retrieve an instance
>>> of an instantiated Analyzer class, the class that's "designed" to work
>>> with that language, if one exists, otherwise null.  And to have you guys
>>> keep that list up-to-date, instead of having to do it myself :-).
>>> Seemed to me that's the standard kind of thing you make a static method
>>> on the top-level class.
>>>
>>>
>>>
>>>> i mean it sounds like what you want, is for it to work in a similar way
>>>>
>>>>
>>> to
>>>
>>>
>>>> ResourceBundle's fallback mechanism?
>>>>
>>>>
>>> I'm not sure that's appropriate.  I just want to retrieve an Analyzer
>>> for that language, if such a thing exists.  If by "fallback", you mean
>>> that "en-US" should just return EnglishAnalyzer if there's no analyzer
>>> specifically for US usage -- yes, that's fine.  On the other hand, I
>>> don't think there should be a fallback for languages which have no
>>> macrolanguage Analyzer -- it should just return null or throw an
>>> exception.  The programmer can then explicitly decide how do deal with
>>> that response.
>>>
>>>
>>>
>>>> And I agree with your idea of rfc3066/4646, e.g. you might want to
>>>>
>>>>
>>> specify
>>>
>>>
>>>> subtags like "word" (SmartChineseAnalyzer) or "ngram" (CJKAnalyzer) for
>>>> chinese somehow?
>>>>
>>>>
>>> Yes, good idea.  Might be interesting to see if those kind of subtags
>>> can be registered with IANA, too.
>>>
>>> Although, if one is smart enough about Lucene and one's application to
>>> make these kinds of judgement calls, I think one is probably smart
>>> enough to know which class to use without consulting a generic
>>> mechanism.
>>>
>>>
>>>
>>>> Shai Erera brought a similar idea up before, to use Locale, but my
>>>>
>>>>
>>> concerns
>>>
>>>
>>>> are it would be limited by javas Locale mechanism... but we can figure
>>>>
>>>>
>>> this
>>>
>>>
>>>> out.
>>>>
>>>> Maybe you want to create a JIRA issue to pursue this idea further? See
>>>> http://wiki.apache.org/lucene-java/HowToContribute
>>>>
>>>>
>>>>
>>>>
>>>>> Right now I'm consulting a hand-compiled mapping of
>>>>> langtag-to-Lucene-classname to figure out which Analyzer to use.
>>>>> Wearisome, and it will be out-of-date for future releases of Lucenen
>>>>> which will presumably support more languages.
>>>>>
>>>>>
>>>>>
>>>> yes, but it also brings up interesting backwards compatibility
>>>>
>>>>
>>> challenges.
>>>
>>>
>>>> Because if we add more analyzers, say EsperantoAnalyzer, if you upgrade
>>>> lucene then suddenly your Esperanto queries are analyzed differently
>>>> (whereas they were dealt with by StandardAnalyzer before).
>>>>
>>>>
>>> Yes, presumably the Version would need to be used with this, too.
>>>
>>>
>>>
>>>> But this becomes less of a problem as we work on modularizing lucene, so
>>>>
>>>>
>>> we
>>>
>>>
>>>> can remove Version from analyzers,
>>>>
>>>>
>>> Oh goody, another API change to cope with in my code.
>>>
>>>
>>>
>>>> and so you can just use an old analyzers
>>>> jar file (such as 4.1) but upgrade your lucene core jar to say version
>>>>
>>>>
>>> 4.3.
>>>
>>>
>>>>
>>>>
>>>>
>>>>> Secondly, if I've got an instance of a SnowballAnalyzer, there's no way
>>>>> to look "inside" it, and see what language it's for.  That's a problem
>>>>> on the search side.  My QueryParser is a subclass of
>>>>> MultiFieldQueryParser, and it looks for a "special" FieldQuery on the
>>>>> field "_query_language", i.e., "_query_language:de" to tell the query
>>>>> parser to use a German analyzer on this query.  What I'd like to be
>>>>>
>>>>>
>>>> able
>>>
>>>
>>>> to do is interrogate the current analyzer attached to the query parser
>>>>> instance, and throw an exception if it's not for the specified
>>>>>
>>>>>
>>>> language.
>>>
>>>
>>>> I can do this for non-Snowball analyzers, because of the brittle
>>>>> hand-compiled mapping mentioned above.  But if it's a SnowballAnalyzer,
>>>>> there's no way to tell what the language inside it is.  So it would be
>>>>> nice if SnowballAnalyzer grew a method
>>>>>
>>>>>
>>>>>
>>>> SnowballAnalyzer had more problems. its actually deprecated in
>>>> trunk/branch_3x and instead there is an Analyzer for each language
>>>>
>>>>
>>> (English,
>>>
>>>
>>>> Italian, etc), which now has stopwords lists, and sometimes special
>>>>
>>>>
>>> behavior
>>>
>>>
>>>> (e.g. Turkish lowercases differently).
>>>>
>>>> Put more simply, its an implementation detail for ItalianAnalyzer that
>>>> we
>>>> implement the stemming with SnowballFilter. One day we might change it
>>>> to
>>>> use a less aggressive stemming algorithm (e.g. ItalianLightStemFilter)
>>>> by
>>>> default.
>>>>
>>>>
>>> Ah, good.  That will suit my purposes nicely.
>>>
>>>
>>>
>>>> I'd really like to see the stopword work finished, so that a
>>>>
>>>>
>>>>> SnowballAnalyzer for a particular language has a decent set of
>>>>> stopwords.
>>>>>
>>>>>
>>>>>
>>>> See above, I think this is finished? The remaining work is actually Solr
>>>> integration.
>>>>
>>>>
>>> Excellent.  I looked at the JIRA, but some discussions just seem to
>>> peter out, and I'm having a hard time telling what the resolution is.
>>>
>>>
>>>
>>>> In trunk and branch_3x, all the analyzers have their own package, here's
>>>> Italian:
>>>>
>>>> Source package: contains Analyzer that uses SnowballFilter(Italian) and
>>>> loads Italian snowball stopwords by default. It also includes an
>>>> alternative, less aggressive stemmer.
>>>>
>>>>
>>>>
>>>
>>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/java/org/apache/lucene/analysis/it/
>>>
>>>
>>>> The snowball stopwords were all added to the resources directory. This
>>>> is
>>>> where ItalianAnalyzer loads its set of stopwords from:
>>>>
>>>>
>>>>
>>>
>>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
>>>
>>>
>>>> <
>>>>
>>>>
>>>
>>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
>>>
>>>
>>>>
>>>>
>>> I see there's also an explicit EnglishAnalyzer -- never thought it made
>>> sense to call that StandardAnalyzer.  Great work!
>>>
>>> Bill
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016369cfeffc349f50491252646--

From java-user-return-47326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 09:07:24 2010
Return-Path: <java-user-return-47326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21132 invoked from network); 26 Sep 2010 09:07:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 09:07:24 -0000
Received: (qmail 19358 invoked by uid 500); 26 Sep 2010 09:07:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18757 invoked by uid 500); 26 Sep 2010 09:07:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18749 invoked by uid 99); 26 Sep 2010 09:07:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 09:07:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 26 Sep 2010 09:07:09 +0000
Received: (qmail 6147 invoked from network); 26 Sep 2010 09:06:44 -0000
Received: from unknown (109.160.209.235)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 26 Sep 2010 09:06:11 -0000
Message-ID: <4C9F0CFC.60102@code972.com>
Date: Sun, 26 Sep 2010 11:06:04 +0200
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: finding the analyzer for a language...
References: <35868.1285379887@parc.com>	<AANLkTinB+5AZOkxb=s6JknThA+Ks7nbu_xiG++XQyD+e@mail.gmail.com>	<22393.1285442995@parc.com>	<AANLkTi=c0ydL==iU_Gk0xNQTswsY=2iSC1Khip_oNGFc@mail.gmail.com>	<4C9E7580.5090605@code972.com> <AANLkTinA-3eJoMwRR=EWFVhSCEt26+_1OW8A1wLnrYQB@mail.gmail.com>
In-Reply-To: <AANLkTinA-3eJoMwRR=EWFVhSCEt26+_1OW8A1wLnrYQB@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Shai, I was referring to your #2, which you already indicated in your 
reply wasn't part of the discussion.

Itamar.

On 26/9/2010 10:10 AM, Shai Erera wrote:
> The mapping is simply about returning the right Analyzer for the given
> Locale. You decide up front (as the Factory developer) what Analyzer /
> Tokenizer + TokenFilters combination you want to return for each language,
> and then when that language is input, you return it. That's it.
>
> Can you define mixed content? There are two possibilities:
>
> 1) Indexing documents of different languages. In that case, you need to know
> what's the document language, and then you use IndexWriter.addDocument(doc,
> analyzer) method, instead of relying on the default analyzer you pass to
> IndexWriterConfig.
>
> 2) Indexing documents that include text in multiple languages -- this is a
> complicated case and you need auto-language identification at the Tokenizer
> level. This is not the case where a Factory would be useful.
>
> Shai
>
> On Sun, Sep 26, 2010 at 12:19 AM, Itamar Syn-Hershko<itamar@code972.com>wrote:
>
>    
>> I may be missing the point here, but how do you define an analyzer<->
>> language match? What do you do in cases of mixed content, for example?
>>
>> Itamar.
>>
>>
>> On 25/9/2010 10:27 PM, Shai Erera wrote:
>>
>>      
>>> Shai Erera brought a similar idea up before, to use Locale, but my
>>>        
>>>> concerns
>>>> are it would be limited by javas Locale mechanism... but we can figure
>>>> this
>>>> out.
>>>>
>>>>
>>>>
>>>>          
>>>   It really depends how sophisticated you want such an AnalyzerFactory
>>> (that's how I call it in my code) to be. We can
>>> define it to be a factory for predefined languages (Locale-based) for the
>>> most common use cases. If you want to
>>> have tighter control over the Analyzer you create, you can still
>>> instantiate
>>> your own, or create a new one with a custom
>>> TokenFilters chain.
>>>
>>> As long as things are well documented, I don't see a reason why we cannot
>>> start simple and only if we find out
>>> that most users don't use 'simple' and prefer to be allowed to specify
>>> more
>>> parameters (such as 'word' or 'ngram') we
>>> bring complication into the game.
>>>
>>> I'm offering Locale 'cause in most web applications that I know of, the
>>> Locale is defined on the request and is often
>>> used to parse the user's query, translating strings etc.
>>>
>>> Anyway, it'd be great to have any such Factory, be it Locale based or not,
>>> because we have so many Analyzers
>>> already, and the way things stand today, any user, even the simplest one,
>>> who wishes to support multi-lingual search
>>> has to sift through all of them and decide what combination to use for
>>> each
>>> language. And if the user ends up picking
>>> default values, then a Factory would simplify matters for him.
>>>
>>> Shai
>>>
>>> On Sat, Sep 25, 2010 at 9:29 PM, Bill Janssen<janssen@parc.com>   wrote:
>>>
>>>
>>>
>>>        
>>>> Robert Muir<rcmuir@gmail.com>   wrote:
>>>>
>>>>
>>>>
>>>>          
>>>>> On Fri, Sep 24, 2010 at 9:58 PM, Bill Janssen<janssen@parc.com>   wrote:
>>>>>
>>>>>
>>>>>
>>>>>            
>>>>>> I thought that since I'm updating UpLib's Lucene code, I should tackle
>>>>>> the issue of document languages, as well.  Right now I'm using an
>>>>>> off-the-shelf language identifier, textcat, to figure out which
>>>>>>
>>>>>>
>>>>>>              
>>>>> language
>>>>>            
>>>>
>>>>          
>>>>> a Web page or PDF is (mainly) written in.  I then want to analyze that
>>>>>            
>>>>>> document with an appropriate analyzer.  I'd then like to map to the
>>>>>> correct Lucene analyzer for that language, falling back to
>>>>>> StandardAnalyzer if the installed Lucene library doesn't have an
>>>>>> analyzer for that language.
>>>>>>
>>>>>> It would be *very* handy if Analyzer had a static method
>>>>>>
>>>>>>   static Analyzer getAnalyzerForLanguage(String rfc_4646_lang_tag);
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>> I agree (not sure if it should be in Analyzer itself, maybe we could
>>>>> make
>>>>>
>>>>>
>>>>>            
>>>> an
>>>>
>>>>
>>>>          
>>>>> Analyzer for this)...
>>>>>
>>>>>
>>>>>            
>>>> Not sure I followed that...  I wanted to be able to retrieve an instance
>>>> of an instantiated Analyzer class, the class that's "designed" to work
>>>> with that language, if one exists, otherwise null.  And to have you guys
>>>> keep that list up-to-date, instead of having to do it myself :-).
>>>> Seemed to me that's the standard kind of thing you make a static method
>>>> on the top-level class.
>>>>
>>>>
>>>>
>>>>          
>>>>> i mean it sounds like what you want, is for it to work in a similar way
>>>>>
>>>>>
>>>>>            
>>>> to
>>>>
>>>>
>>>>          
>>>>> ResourceBundle's fallback mechanism?
>>>>>
>>>>>
>>>>>            
>>>> I'm not sure that's appropriate.  I just want to retrieve an Analyzer
>>>> for that language, if such a thing exists.  If by "fallback", you mean
>>>> that "en-US" should just return EnglishAnalyzer if there's no analyzer
>>>> specifically for US usage -- yes, that's fine.  On the other hand, I
>>>> don't think there should be a fallback for languages which have no
>>>> macrolanguage Analyzer -- it should just return null or throw an
>>>> exception.  The programmer can then explicitly decide how do deal with
>>>> that response.
>>>>
>>>>
>>>>
>>>>          
>>>>> And I agree with your idea of rfc3066/4646, e.g. you might want to
>>>>>
>>>>>
>>>>>            
>>>> specify
>>>>
>>>>
>>>>          
>>>>> subtags like "word" (SmartChineseAnalyzer) or "ngram" (CJKAnalyzer) for
>>>>> chinese somehow?
>>>>>
>>>>>
>>>>>            
>>>> Yes, good idea.  Might be interesting to see if those kind of subtags
>>>> can be registered with IANA, too.
>>>>
>>>> Although, if one is smart enough about Lucene and one's application to
>>>> make these kinds of judgement calls, I think one is probably smart
>>>> enough to know which class to use without consulting a generic
>>>> mechanism.
>>>>
>>>>
>>>>
>>>>          
>>>>> Shai Erera brought a similar idea up before, to use Locale, but my
>>>>>
>>>>>
>>>>>            
>>>> concerns
>>>>
>>>>
>>>>          
>>>>> are it would be limited by javas Locale mechanism... but we can figure
>>>>>
>>>>>
>>>>>            
>>>> this
>>>>
>>>>
>>>>          
>>>>> out.
>>>>>
>>>>> Maybe you want to create a JIRA issue to pursue this idea further? See
>>>>> http://wiki.apache.org/lucene-java/HowToContribute
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>            
>>>>>> Right now I'm consulting a hand-compiled mapping of
>>>>>> langtag-to-Lucene-classname to figure out which Analyzer to use.
>>>>>> Wearisome, and it will be out-of-date for future releases of Lucenen
>>>>>> which will presumably support more languages.
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>> yes, but it also brings up interesting backwards compatibility
>>>>>
>>>>>
>>>>>            
>>>> challenges.
>>>>
>>>>
>>>>          
>>>>> Because if we add more analyzers, say EsperantoAnalyzer, if you upgrade
>>>>> lucene then suddenly your Esperanto queries are analyzed differently
>>>>> (whereas they were dealt with by StandardAnalyzer before).
>>>>>
>>>>>
>>>>>            
>>>> Yes, presumably the Version would need to be used with this, too.
>>>>
>>>>
>>>>
>>>>          
>>>>> But this becomes less of a problem as we work on modularizing lucene, so
>>>>>
>>>>>
>>>>>            
>>>> we
>>>>
>>>>
>>>>          
>>>>> can remove Version from analyzers,
>>>>>
>>>>>
>>>>>            
>>>> Oh goody, another API change to cope with in my code.
>>>>
>>>>
>>>>
>>>>          
>>>>> and so you can just use an old analyzers
>>>>> jar file (such as 4.1) but upgrade your lucene core jar to say version
>>>>>
>>>>>
>>>>>            
>>>> 4.3.
>>>>
>>>>
>>>>          
>>>>>
>>>>>
>>>>>            
>>>>>> Secondly, if I've got an instance of a SnowballAnalyzer, there's no way
>>>>>> to look "inside" it, and see what language it's for.  That's a problem
>>>>>> on the search side.  My QueryParser is a subclass of
>>>>>> MultiFieldQueryParser, and it looks for a "special" FieldQuery on the
>>>>>> field "_query_language", i.e., "_query_language:de" to tell the query
>>>>>> parser to use a German analyzer on this query.  What I'd like to be
>>>>>>
>>>>>>
>>>>>>              
>>>>> able
>>>>>            
>>>>
>>>>          
>>>>> to do is interrogate the current analyzer attached to the query parser
>>>>>            
>>>>>> instance, and throw an exception if it's not for the specified
>>>>>>
>>>>>>
>>>>>>              
>>>>> language.
>>>>>            
>>>>
>>>>          
>>>>> I can do this for non-Snowball analyzers, because of the brittle
>>>>>            
>>>>>> hand-compiled mapping mentioned above.  But if it's a SnowballAnalyzer,
>>>>>> there's no way to tell what the language inside it is.  So it would be
>>>>>> nice if SnowballAnalyzer grew a method
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>> SnowballAnalyzer had more problems. its actually deprecated in
>>>>> trunk/branch_3x and instead there is an Analyzer for each language
>>>>>
>>>>>
>>>>>            
>>>> (English,
>>>>
>>>>
>>>>          
>>>>> Italian, etc), which now has stopwords lists, and sometimes special
>>>>>
>>>>>
>>>>>            
>>>> behavior
>>>>
>>>>
>>>>          
>>>>> (e.g. Turkish lowercases differently).
>>>>>
>>>>> Put more simply, its an implementation detail for ItalianAnalyzer that
>>>>> we
>>>>> implement the stemming with SnowballFilter. One day we might change it
>>>>> to
>>>>> use a less aggressive stemming algorithm (e.g. ItalianLightStemFilter)
>>>>> by
>>>>> default.
>>>>>
>>>>>
>>>>>            
>>>> Ah, good.  That will suit my purposes nicely.
>>>>
>>>>
>>>>
>>>>          
>>>>> I'd really like to see the stopword work finished, so that a
>>>>>
>>>>>
>>>>>            
>>>>>> SnowballAnalyzer for a particular language has a decent set of
>>>>>> stopwords.
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>> See above, I think this is finished? The remaining work is actually Solr
>>>>> integration.
>>>>>
>>>>>
>>>>>            
>>>> Excellent.  I looked at the JIRA, but some discussions just seem to
>>>> peter out, and I'm having a hard time telling what the resolution is.
>>>>
>>>>
>>>>
>>>>          
>>>>> In trunk and branch_3x, all the analyzers have their own package, here's
>>>>> Italian:
>>>>>
>>>>> Source package: contains Analyzer that uses SnowballFilter(Italian) and
>>>>> loads Italian snowball stopwords by default. It also includes an
>>>>> alternative, less aggressive stemmer.
>>>>>
>>>>>
>>>>>
>>>>>            
>>>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/java/org/apache/lucene/analysis/it/
>>>>
>>>>
>>>>          
>>>>> The snowball stopwords were all added to the resources directory. This
>>>>> is
>>>>> where ItalianAnalyzer loads its set of stopwords from:
>>>>>
>>>>>
>>>>>
>>>>>            
>>>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
>>>>
>>>>
>>>>          
>>>>> <
>>>>>
>>>>>
>>>>>            
>>>> http://svn.apache.org/viewvc/lucene/dev/trunk/modules/analysis/common/src/resources/org/apache/lucene/analysis/
>>>>
>>>>
>>>>          
>>>>>
>>>>>            
>>>> I see there's also an explicit EnglishAnalyzer -- never thought it made
>>>> sense to call that StandardAnalyzer.  Great work!
>>>>
>>>> Bill
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>          
>>>
>>>        
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 12:08:49 2010
Return-Path: <java-user-return-47327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57566 invoked from network); 26 Sep 2010 12:08:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 12:08:49 -0000
Received: (qmail 5124 invoked by uid 500); 26 Sep 2010 12:08:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4671 invoked by uid 500); 26 Sep 2010 12:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4663 invoked by uid 99); 26 Sep 2010 12:08:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 12:08:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 12:08:37 +0000
Received: by iwn6 with SMTP id 6so4516274iwn.35
        for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 05:08:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.192.67 with SMTP id dp3mr7245226ibb.180.1285502895531;
 Sun, 26 Sep 2010 05:08:15 -0700 (PDT)
Received: by 10.231.176.17 with HTTP; Sun, 26 Sep 2010 05:08:15 -0700 (PDT)
In-Reply-To: <001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
	<001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
Date: Sun, 26 Sep 2010 19:08:15 +0700
Message-ID: <AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
Subject: Re: flushing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On 9/26/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> You should close the ramwriter before doing the addindexes call. Else you
> simply copy only *committed* changes, but there are none, as the index is
> initially empty and stays empty for an outside reader (your addindexes call
> is the outside reader) until the ramwriter is closed or committed. :-)
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de

thanks for the suggestion. but I was also asking of what source code
should I filled in this line

if (condition for flushing memory to disk has been met) { ///THIS LINE
ramWriter.close();
fsWriter.addIndexes(Directory[] {ramDir});
ramWriter = new IndexWriter(ramDir, new SimpleAnalyzer(),
true);
}
}

I mean what source code that I can put after the IF statement so that
it will force the index to be flushed?
but anyway, did I put the ramwriter.close() correctly in the above
source code? you advised me to close ramwriter before the addIndexes()
right?

thanks for your help though. :-)
-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 17:16:42 2010
Return-Path: <java-user-return-47328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40391 invoked from network); 26 Sep 2010 17:16:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 17:16:42 -0000
Received: (qmail 77664 invoked by uid 500); 26 Sep 2010 17:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77518 invoked by uid 500); 26 Sep 2010 17:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77510 invoked by uid 99); 26 Sep 2010 17:16:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 17:16:39 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 17:16:30 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D7C8D45F04A
	for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 19:16:09 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id slduE9eOijB2 for <java-user@lucene.apache.org>;
	Sun, 26 Sep 2010 19:16:07 +0200 (CEST)
Received: from VEGA (70-35-37-2.static.wiline.com [70.35.37.2])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D157C45EF06
	for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 19:16:06 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>	<001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de> <AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
In-Reply-To: <AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
Subject: RE: flushing index
Date: Sun, 26 Sep 2010 10:16:31 -0700
Message-ID: <004301cb5d9e$91a5cfd0$b4f16f70$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHTQAC1dqsOSOMpuuqwZT9MlKlqVQKWIokRAqluecmS6r6WMA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

> thanks for the suggestion. but I was also asking of what source code
should I
> filled in this line
> 
> if (condition for flushing memory to disk has been met) { ///THIS LINE
> ramWriter.close(); fsWriter.addIndexes(Directory[] {ramDir}); ramWriter =
new
> IndexWriter(ramDir, new SimpleAnalyzer(), true); } }
> 
> I mean what source code that I can put after the IF statement so that it
will
> force the index to be flushed?
> but anyway, did I put the ramwriter.close() correctly in the above source
code?
> you advised me to close ramwriter before the addIndexes() right?

Yes. You must close before, else the addIndexes call will do nothing, as the
index looks empty for the addIndexes() call (because no committed segments
are available in the ramDir).

I don't understand what you mean with flushing? If you are working on Lucene
2.9 or 3.0, the ramWriter is flushed to the RAMDir on close. The addIndexes
call will add the index to the on-disk writer. To flush that fsWriter (flush
is the wrong thing, you probably mean commit), simply call fsWriter.commit()
so the newly added segments are written to disk and IndexReaders opened in
parallel "see" the new segments.

Btw: If you are working on Lucene 3.0, the addIndexes call does not need the
new Directory[] {}, as the method is Java 5 varargs now.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 17:32:52 2010
Return-Path: <java-user-return-47329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44764 invoked from network); 26 Sep 2010 17:32:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 17:32:52 -0000
Received: (qmail 95201 invoked by uid 500); 26 Sep 2010 17:32:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95142 invoked by uid 500); 26 Sep 2010 17:32:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95134 invoked by uid 99); 26 Sep 2010 17:32:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 17:32:49 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of falha404@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 17:32:42 +0000
Received: by iwn6 with SMTP id 6so4786053iwn.35
        for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 10:32:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=7HakWNr07omzmpkpoEUGzGRIK/pH+opxY8mPfex5EwQ=;
        b=xIqz2cuakU34JZdECcNs5DbTZQerjqmPej/kZDU4SfeglH6K/j1MCwonJ12hTkUn6T
         X3e1h6diPsPM7v4dDIHZQ1GHum0NuYe1q7KNoEjZRwGnG3DtkvKiqlGVxbkUy8/2K2LG
         HfFKa8fEVP6QjDhPe3YBtYbRHXGGwDleArSeU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        b=DU9VQ8KJUcaCIwnJCBf87VeR6ZG+3c7IeX5RO0F+Y/eo+fnkrt8IFLvDGZS2WajTk5
         dPodV3+OFSB2UbnFbLX5g2blCs2I3JL+GP6JoqJdcXXgELNf6n43YCUshy+ogkZQ2uMx
         txtiha+AXP7BD01zxGqWrDYDUeDUfjdTERjoo=
Received: by 10.231.162.13 with SMTP id t13mr7478387ibx.160.1285522341037;
 Sun, 26 Sep 2010 10:32:21 -0700 (PDT)
MIME-Version: 1.0
Sender: falha404@gmail.com
Received: by 10.231.154.209 with HTTP; Sun, 26 Sep 2010 10:32:00 -0700 (PDT)
From: Fabiano Nunes <fabiano@nunes.me>
Date: Sun, 26 Sep 2010 14:32:00 -0300
X-Google-Sender-Auth: HP707Ts6DCaQxgpslyZx5Oeoi-E
Message-ID: <AANLkTimBJPHxPaGkGLD0Z5_m-cEhiZW0LGiwWpn+xYOE@mail.gmail.com>
Subject: Fuzzy Phrase
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504501400c7d07a704912cfe25
X-Virus-Checked: Checked by ClamAV on apache.org

--00504501400c7d07a704912cfe25
Content-Type: text/plain; charset=ISO-8859-1

Is it possible to search for fuzzy phrase queries like -- "colorless~ green~
ideas~" -- ?
I have had some success with ComplexPhraseQuery, but I can't use it for
querying two fields at same time, ie, -- head:"hello~ world"~3 AND
contents:"colorless~ green~ ideas~" --

Thank you.

--00504501400c7d07a704912cfe25--

From java-user-return-47330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 17:57:51 2010
Return-Path: <java-user-return-47330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49734 invoked from network); 26 Sep 2010 17:57:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 17:57:50 -0000
Received: (qmail 10181 invoked by uid 500); 26 Sep 2010 17:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10125 invoked by uid 500); 26 Sep 2010 17:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10117 invoked by uid 99); 26 Sep 2010 17:57:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 17:57:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 17:57:41 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id F1FB345F139
	for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 19:57:19 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lxkb-PudYhjs for <java-user@lucene.apache.org>;
	Sun, 26 Sep 2010 19:57:07 +0200 (CEST)
Received: from VEGA (70-35-37-2.static.wiline.com [70.35.37.2])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4CA6545F133
	for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 19:57:07 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTimBJPHxPaGkGLD0Z5_m-cEhiZW0LGiwWpn+xYOE@mail.gmail.com>
In-Reply-To: <AANLkTimBJPHxPaGkGLD0Z5_m-cEhiZW0LGiwWpn+xYOE@mail.gmail.com>
Subject: RE: Fuzzy Phrase
Date: Sun, 26 Sep 2010 10:57:31 -0700
Message-ID: <004701cb5da4$4c170d70$e4452850$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQLjOStww7AhcR+O4PRV1yRnHBNw15D01fbw
Content-Language: de

Hi,

You can combine two different ComplexPhraseQueries for both fields using an
BooleanQuery with Occur.MUST.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: falha404@gmail.com [mailto:falha404@gmail.com] On Behalf Of
> Fabiano Nunes
> Sent: Sunday, September 26, 2010 10:32 AM
> To: java-user@lucene.apache.org
> Subject: Fuzzy Phrase
> 
> Is it possible to search for fuzzy phrase queries like -- "colorless~
green~
> ideas~" -- ?
> I have had some success with ComplexPhraseQuery, but I can't use it for
> querying two fields at same time, ie, -- head:"hello~ world"~3 AND
> contents:"colorless~ green~ ideas~" --
> 
> Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 26 22:20:35 2010
Return-Path: <java-user-return-47331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14646 invoked from network); 26 Sep 2010 22:20:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Sep 2010 22:20:35 -0000
Received: (qmail 63887 invoked by uid 500); 26 Sep 2010 22:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63820 invoked by uid 500); 26 Sep 2010 22:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63812 invoked by uid 99); 26 Sep 2010 22:20:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 22:20:32 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of falha404@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Sep 2010 22:20:27 +0000
Received: by mail-iw0-f176.google.com with SMTP id 6so5025536iwn.35
        for <java-user@lucene.apache.org>; Sun, 26 Sep 2010 15:20:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received
         :in-reply-to:references:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        bh=Gq7iwxubvBTJZbHd25sIKPMT6AgDK7XV2KN7X36vHr8=;
        b=VN0M2ytmLX0Q5soCxsWjJLbpjCrVtJstuvJqmMKFjgwmo91JWBhcQf9qgP1TvvUPit
         hzLm71k8PXKMQbY6MW6uSS8Yx7+ioajXKxH4okUqRtZjol2s2MHqluxY1wLSoqCXUA0N
         foHX+mUv1lUr4RoplQfHy1xRGk/KuJ81pxd8E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        b=iAFInn1g93IQbwHSomdHQU1EsK/Su8++IyqruK1Ap39ZH7T6zYx8Ieqz5/dlm2ZY6l
         bKc2KrCk0g9FKCNOnZjMPsw2DS9DmhKd8ppxjzxsxkcKEN973m0F3ZSt5FJtNwrz4/q4
         QyrpywPNnwQYyHJZJvjV41gSWaUphYK115CRA=
Received: by 10.231.152.78 with SMTP id f14mr8066367ibw.60.1285539607375; Sun,
 26 Sep 2010 15:20:07 -0700 (PDT)
MIME-Version: 1.0
Sender: falha404@gmail.com
Received: by 10.231.154.209 with HTTP; Sun, 26 Sep 2010 15:19:46 -0700 (PDT)
In-Reply-To: <004701cb5da4$4c170d70$e4452850$@thetaphi.de>
References: <AANLkTimBJPHxPaGkGLD0Z5_m-cEhiZW0LGiwWpn+xYOE@mail.gmail.com> <004701cb5da4$4c170d70$e4452850$@thetaphi.de>
From: Fabiano Nunes <fabiano@nunes.me>
Date: Sun, 26 Sep 2010 19:19:46 -0300
X-Google-Sender-Auth: C_VRsogc4qqFABzog553X8twMiw
Message-ID: <AANLkTi=0Obx7+gLC7XEgWP95-OgZmzV70rci1vFWJSxk@mail.gmail.com>
Subject: Re: Fuzzy Phrase
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=005045014644a470c604913103a3

--005045014644a470c604913103a3
Content-Type: text/plain; charset=ISO-8859-1

Thank you, Schindler.
When combining queries, I need two strings, one for each field. I want to
use just one string like -- head:"hello~ world"~3 AND contents:"colorless~
green~ ideas~".

When I this string query within ComplexPhraseQuery, I get the exception:
 -- ParseException: Cannot parse 'hello~ world': Cannot have clause for
field "content" nested in phrase  for field "head"

But, If I use -- head:hello AND head:world AND contents:"colorless~ green~
ideas~" -- no errors occurred.


On Sun, Sep 26, 2010 at 2:57 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi,
>
> You can combine two different ComplexPhraseQueries for both fields using an
> BooleanQuery with Occur.MUST.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: falha404@gmail.com [mailto:falha404@gmail.com] On Behalf Of
> > Fabiano Nunes
> > Sent: Sunday, September 26, 2010 10:32 AM
> > To: java-user@lucene.apache.org
> > Subject: Fuzzy Phrase
> >
> > Is it possible to search for fuzzy phrase queries like -- "colorless~
> green~
> > ideas~" -- ?
> > I have had some success with ComplexPhraseQuery, but I can't use it for
> > querying two fields at same time, ie, -- head:"hello~ world"~3 AND
> > contents:"colorless~ green~ ideas~" --
> >
> > Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--005045014644a470c604913103a3--

From java-user-return-47332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 11:36:19 2010
Return-Path: <java-user-return-47332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28789 invoked from network); 27 Sep 2010 11:36:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 11:36:19 -0000
Received: (qmail 30358 invoked by uid 500); 27 Sep 2010 11:36:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29720 invoked by uid 500); 27 Sep 2010 11:36:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29712 invoked by uid 99); 27 Sep 2010 11:36:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 11:36:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [160.53.250.157] (HELO mxsmtp1.etat-ge.ch) (160.53.250.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 11:36:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by mxsmtp1.etat-ge.ch (Postfix) with ESMTP id 4D8FFF0093
	for <java-user@lucene.apache.org>; Mon, 27 Sep 2010 13:35:42 +0200 (CEST)
X-Virus-Scanned: Clean
Received: from mxsmtp1.etat-ge.ch ([127.0.0.1])
	by localhost (mxsmtp1.etat-ge.ch [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2YLb4lR8cxsa for <java-user@lucene.apache.org>;
	Mon, 27 Sep 2010 13:35:42 +0200 (CEST)
Received: from fregate.ge-admin.ad.etat-ge.ch (fregate.ge-admin.ad.etat-ge.ch [10.137.224.84])
	by mxsmtp1.etat-ge.ch (Postfix) with ESMTP id 2F224F0091
	for <java-user@lucene.apache.org>; Mon, 27 Sep 2010 13:35:42 +0200 (CEST)
Received: from ADAPA.ge-admin.ad.etat-ge.ch ([10.139.36.72]) by fregate.ge-admin.ad.etat-ge.ch with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 27 Sep 2010 13:35:41 +0200
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB5E38.1D9D85D0"
Subject: Questions about Lucene usage recommendations
Date: Mon, 27 Sep 2010 13:35:20 +0200
Message-ID: <F1AD6F6673633C4692F7689E42FF9AAA42138C@ADAPA.ge-admin.ad.etat-ge.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Questions about Lucene usage recommendations
Thread-Index: ActeOBEXIUoENNJLTmWJxuPcrTUc4w==
From: "Pawlak Michel (DCTI)" <michel.pawlak@etat.ge.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Sep 2010 11:35:41.0716 (UTC) FILETIME=[1D8D2540:01CB5E38]

------_=_NextPart_001_01CB5E38.1D9D85D0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hello,

We have an application which is using lucene and we have strong
performance issues (on bad days, some searches take more than 2
minutes). I'm new to the Lucene component, thus I'm not sure Lucene is
correctly used and thus would like to have some information on lucene
usage recommendations. This would help locate the problem (application
code / lucene configuration / hardware / all) It would be great if a
project committer / specialist could answer those questions.

First some facts about the application :=20
- Lucene version being used : 2.1.0 (february 2007...)
- around 1.4M "documents" to be indexed.
- Db size (all data to be indexed is stored in DB fields) : 3.5 GB
- Index file size on disk : 1.6 GB (note that one cfs file is 780M,
another one is 600M, the rest consists of smaller files)
- single indexer, multiple readers (6 readers)
- around 150 documents are modified per day
- indexing is done right after every modification
- simple searches can take ages (for instance searching for "chocolate"
could take for more than 2 minutes)
- I do not have access to source code (yes that's the funny part)

My questions :=20
- Is this version of Lucene still supported ?
- What are the main reasons, if any, one should use the latest version
of lucene instead of 2.1.0 ? (for instance : performance, stability,
critical fixes, support, etc.) (the answer may sound obvious, but I
would like to have an official answer)
- Is there any recommendation concerning storage any Lucene user should
know (not benchmarks, but recommendations such as "better use physical
HDD", "do not use NFS if possible", "if your cfs files are greater than
XYZ, better use this kind of storage", "if you have more than XYZ
searches per second, better..." etc)
- Is there any recommandation concerning cfs file size ?=20
- Is there a way to limit the size of cfs files ?=20
- What is the impact on search performance if cfs file size is limited ?
- How often should optimization occur ? (every day, week, month ?)
- I saw that IndexWriter has methods such as setMaxFieldLength()
setMergeFactor() setMaxBufferedDocs() setMaxMergeDocs() Can you briefly
explain how these can affect performance ?
- Is there any other recommandation "dummies" should be informed of, and
every expert has to know ? For instance as a list of lucene patterns /
anti patterns which may affect performance.

If my questions are not precise enough, do not hesitate to ask for
details. If you see an obvious problem do not hesitate to tell me.

A big thank you in advance for your help,

Best regards,

Michel



------_=_NextPart_001_01CB5E38.1D9D85D0--

From java-user-return-47333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 12:53:48 2010
Return-Path: <java-user-return-47333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56464 invoked from network); 27 Sep 2010 12:53:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 12:53:48 -0000
Received: (qmail 33572 invoked by uid 500); 27 Sep 2010 12:53:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33033 invoked by uid 500); 27 Sep 2010 12:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33020 invoked by uid 99); 27 Sep 2010 12:53:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 12:53:42 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 12:53:37 +0000
Received: by qwk3 with SMTP id 3so4480245qwk.35
        for <java-user@lucene.apache.org>; Mon, 27 Sep 2010 05:53:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=4iaIA9w/UVUizZiaXeHbUr5Ppj3TTGijOfSVNF9drKc=;
        b=jeKvMsydETLdDYzM94xnW9jii1sQpqflwdu78XMlydxYR6PM4wh35bGEv9A/18mWEG
         46wsoG07vMbqah8KkIK8mQ9g4FJaFX2+AD2lBZYJ59XWgDnBbqdqLMnoLvwArMiezt6W
         o8cf/l9EKetM/WgWV3vnJQ+hNfd2IsEXnN7kE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ezBIbdDU6TU30cl1FfnffA4tlBFcEiDtwoc0x5D/XTwBTT1dDRghN1Z5Dq4CfhkFvl
         rfyGe3nR59lt58HEIYY3TITbh1UTsZRIVBZmyLvMbIO7jXMwLZ1TPNzBfOQNqrwS2JKO
         2dzb8EWXDX5Cwyx5n0d97S0ie+W6PHgFX9cm0=
Received: by 10.224.47.4 with SMTP id l4mr5513100qaf.157.1285591996451; Mon,
 27 Sep 2010 05:53:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.14.170 with HTTP; Mon, 27 Sep 2010 05:52:56 -0700 (PDT)
In-Reply-To: <F1AD6F6673633C4692F7689E42FF9AAA42138C@ADAPA.ge-admin.ad.etat-ge.ch>
References: <F1AD6F6673633C4692F7689E42FF9AAA42138C@ADAPA.ge-admin.ad.etat-ge.ch>
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
Date: Mon, 27 Sep 2010 15:52:56 +0300
Message-ID: <AANLkTin5qr4Z5_GV=FuQ_N15ZdAaRVNPB0-QV4FeKbXN@mail.gmail.com>
Subject: Re: Questions about Lucene usage recommendations
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Lucene 2.1 is really old...you should be able to migrate to lucene 2.9
without changing your code (almost jar drop-in, but be careful on
analyzers), and there could be huge improvements if you use lucene
properly.

Few questions:
- what does "all data to be indexed is stored in DB fields" mean? you
should store in lucene everything you need, so on search time you
shouldn't need to hit DB
- what does "indexing is done right after every modification" mean? do
you index just the changed document? or reindex all 1.4 M docs?
- do you sort on some field, or just basic relevance?
- how big is each document and what do you do with it? maybe
highlighting on large documents causes this?
- what's in the document? if it's like a book...and almost every word
matches every document...there could be some issues
- is the lucene the bottleneck? maybe you are calling from remote
server and marshaling+network+unmarshaling is slow?

Usual lucene patterns are (assuming that you moved to lucene 2.9):
- avoid using NFS (not necessary a performance bottleneck, and
definitely not something to cause 2 minutes query, but just to be on
the safe side)
- keep writer open and add documents to the index (no need to rebuild
everything)
- keep your readers open and use reopen() once in a while (you may
even go for realtime search if you want to)
- in your case, I don't think optimize will do any good, segments look
good to me, don't worry about cfs file size
- there are ways to limit cfs files and play with setMaxXXX, but i
don't think it's the cause of your 2 minute query.

On Mon, Sep 27, 2010 at 14:35, Pawlak Michel (DCTI)
<michel.pawlak@etat.ge.ch> wrote:
> Hello,
>
> We have an application which is using lucene and we have strong
> performance issues (on bad days, some searches take more than 2
> minutes). I'm new to the Lucene component, thus I'm not sure Lucene is
> correctly used and thus would like to have some information on lucene
> usage recommendations. This would help locate the problem (application
> code / lucene configuration / hardware / all) It would be great if a
> project committer / specialist could answer those questions.
>
> First some facts about the application :
> - Lucene version being used : 2.1.0 (february 2007...)
> - around 1.4M "documents" to be indexed.
> - Db size (all data to be indexed is stored in DB fields) : 3.5 GB
> - Index file size on disk : 1.6 GB (note that one cfs file is 780M,
> another one is 600M, the rest consists of smaller files)
> - single indexer, multiple readers (6 readers)
> - around 150 documents are modified per day
> - indexing is done right after every modification
> - simple searches can take ages (for instance searching for "chocolate"
> could take for more than 2 minutes)
> - I do not have access to source code (yes that's the funny part)
>
> My questions :
> - Is this version of Lucene still supported ?
> - What are the main reasons, if any, one should use the latest version
> of lucene instead of 2.1.0 ? (for instance : performance, stability,
> critical fixes, support, etc.) (the answer may sound obvious, but I
> would like to have an official answer)
> - Is there any recommendation concerning storage any Lucene user should
> know (not benchmarks, but recommendations such as "better use physical
> HDD", "do not use NFS if possible", "if your cfs files are greater than
> XYZ, better use this kind of storage", "if you have more than XYZ
> searches per second, better..." etc)
> - Is there any recommandation concerning cfs file size ?
> - Is there a way to limit the size of cfs files ?
> - What is the impact on search performance if cfs file size is limited ?
> - How often should optimization occur ? (every day, week, month ?)
> - I saw that IndexWriter has methods such as setMaxFieldLength()
> setMergeFactor() setMaxBufferedDocs() setMaxMergeDocs() Can you briefly
> explain how these can affect performance ?
> - Is there any other recommandation "dummies" should be informed of, and
> every expert has to know ? For instance as a list of lucene patterns /
> anti patterns which may affect performance.
>
> If my questions are not precise enough, do not hesitate to ask for
> details. If you see an obvious problem do not hesitate to tell me.
>
> A big thank you in advance for your help,
>
> Best regards,
>
> Michel
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 13:04:20 2010
Return-Path: <java-user-return-47334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59546 invoked from network); 27 Sep 2010 13:04:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 13:04:20 -0000
Received: (qmail 58403 invoked by uid 500); 27 Sep 2010 13:04:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58052 invoked by uid 500); 27 Sep 2010 13:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 16888 invoked by uid 99); 27 Sep 2010 12:46:15 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_KHOP_FOREIGN_CLICK
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paulocsc@terra.com.br designates 208.84.243.62 as permitted sender)
X-Terra-Karma:         -2%
X-Terra-Hash: 2486cc7c240bd53abc0d26ac0763b165
Received-SPF: pass (155.terra.com: domain of terra.com.br designates 208.84.242.62 as permitted sender) client-ip=208.84.242.62; envelope-from=paulocsc@terra.com.br; helo=terra.com.br;
MIME-Version: 1.0
X-Mailer: TerraMail PHP 5.2
Message-ID: <60394.1285591545@terra.com.br>
To: <java-user@lucene.apache.org>
Reply-To: paulocsc@terra.com.br
Content-Type: multipart/alternative;
	boundary="=_cb5dfe21c8aaf1d142ec0d5f97378a55"
X-Origin: 201.67.8.65
Date: Mon, 27 Sep 2010 12:45:45 +0000
Subject: Is it a bug in Lucene?
From: paulocsc@terra.com.br
X-CLX-Rate-Response: fi=10.235.200.250:2001; MB=0; GT=0; fs=1011; ns=0; id=a103GLF8l4aQ0VH-8R1245k; rv=5892/208.84.242.250:14051; ts=D1jaV; fl=I; ip=208.84.242.167; he=C7Kebad4cDT; ht=1; ho=O6zC25DVjaL; hd=C7Kebad4cDT; hf=O6zC25DVjaL; hF=O6zC25DVjaL; hj=GzMmtcBXViP; hr=KSUPTAlTG/R; ZB=BOU4D1yKIS4; ZB=Dw+ixidvaq6; ZB=ONK/upOO84e; ZB=ECRRiCE2ys8; ZB=DQBe87RpulO;
X-Abaca-Score-Saida: 0

--=_cb5dfe21c8aaf1d142ec0d5f97378a55
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="utf-8"

=20
 Hi,
	I did a test to understand the use of '*' and '?'.=20

	If I use StandardAnalyzer I have espected results but, if a use
BrazilianAnalyzer I have a mistake result.=20

	Junit is at the end.=20

	Thanks.=20

	Paulo Cesar=20
	cities in my Lucene data base=3D>
{"Bras=C3=ADlia","Brasil=C3=A2ndia","Brasl=C3=A2ndia", "S=C3=A3o Paulo", "S=
=C3=A3o
Roque", "Salvador"};=20
	=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=20

	>>> Using StandardAnalyzer  Using BrazilianAnalyzer >> JUnit=20
--=_cb5dfe21c8aaf1d142ec0d5f97378a55--


From java-user-return-47335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 13:37:38 2010
Return-Path: <java-user-return-47335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71584 invoked from network); 27 Sep 2010 13:37:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 13:37:38 -0000
Received: (qmail 10901 invoked by uid 500); 27 Sep 2010 13:37:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10724 invoked by uid 500); 27 Sep 2010 13:37:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10716 invoked by uid 99); 27 Sep 2010 13:37:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 13:37:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 13:37:22 +0000
Received: by fxm5 with SMTP id 5so4202293fxm.35
        for <java-user@lucene.apache.org>; Mon, 27 Sep 2010 06:37:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=Od6LePQAMyMWuEVNoC3BVvucCskVMdAwuG+zas1fxLM=;
        b=ncuI45ErZql2Iv7Gc57ZKCT21NdoK63jWXzmuvOm3eoK7JgJOZUEMTq4o10dlmAunN
         BhwV+YKRj0ehaFOhuUvBOdgj/4769iASsuqiR4J8EaLmgzihSU8ObCawIl9iudOvO+tz
         a52JhHEwC0yNBb6jzT3UGZuGSmjdac3cYT4yM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=ZN71rVOtqFX1GQBrx0ljcmv/OI9XbvBiqH0TG7+YoPmNgDMwoGC8N/MZT4nqYhE11u
         Uv4Yl80bKG4MlZrpZNEfgv9EFZsydH6LZW2xKrmAVXPIoAD1AWnKVuUZVFZ4s4coI/QN
         +0l6SxI7BlZZ2gHj6n9MZQp4Dbf1dwTduKqaY=
Received: by 10.223.125.70 with SMTP id x6mr7539179far.85.1285594622346;
        Mon, 27 Sep 2010 06:37:02 -0700 (PDT)
Received: from [192.168.2.5] (dslb-088-072-241-011.pools.arcor-ip.net [88.72.241.11])
        by mx.google.com with ESMTPS id s20sm2402664faa.4.2010.09.27.06.37.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 27 Sep 2010 06:37:01 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Fuzzy Phrase
From: Karl Wettin <karl.wettin@gmail.com>
In-Reply-To: <AANLkTi=0Obx7+gLC7XEgWP95-OgZmzV70rci1vFWJSxk@mail.gmail.com>
Date: Mon, 27 Sep 2010 15:36:59 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <D94CEBA8-A7E6-4231-973D-68181F3ED22E@gmail.com>
References: <AANLkTimBJPHxPaGkGLD0Z5_m-cEhiZW0LGiwWpn+xYOE@mail.gmail.com> <004701cb5da4$4c170d70$e4452850$@thetaphi.de> <AANLkTi=0Obx7+gLC7XEgWP95-OgZmzV70rci1vFWJSxk@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

There is a SpanFuzzyQuery for Lucene 1.9 from 2006 in LUCENE-522.


	karl

27 sep 2010 kl. 00.19 skrev Fabiano Nunes:

> Thank you, Schindler.
> When combining queries, I need two strings, one for each field. I want =
to
> use just one string like -- head:"hello~ world"~3 AND =
contents:"colorless~
> green~ ideas~".
>=20
> When I this string query within ComplexPhraseQuery, I get the =
exception:
> -- ParseException: Cannot parse 'hello~ world': Cannot have clause for
> field "content" nested in phrase  for field "head"
>=20
> But, If I use -- head:hello AND head:world AND contents:"colorless~ =
green~
> ideas~" -- no errors occurred.
>=20
>=20
> On Sun, Sep 26, 2010 at 2:57 PM, Uwe Schindler <uwe@thetaphi.de> =
wrote:
>=20
>> Hi,
>>=20
>> You can combine two different ComplexPhraseQueries for both fields =
using an
>> BooleanQuery with Occur.MUST.
>>=20
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>=20
>>=20
>>> -----Original Message-----
>>> From: falha404@gmail.com [mailto:falha404@gmail.com] On Behalf Of
>>> Fabiano Nunes
>>> Sent: Sunday, September 26, 2010 10:32 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Fuzzy Phrase
>>>=20
>>> Is it possible to search for fuzzy phrase queries like -- =
"colorless~
>> green~
>>> ideas~" -- ?
>>> I have had some success with ComplexPhraseQuery, but I can't use it =
for
>>> querying two fields at same time, ie, -- head:"hello~ world"~3 AND
>>> contents:"colorless~ green~ ideas~" --
>>>=20
>>> Thank you.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 15:42:19 2010
Return-Path: <java-user-return-47336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16453 invoked from network); 27 Sep 2010 15:42:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 15:42:18 -0000
Received: (qmail 11303 invoked by uid 500); 27 Sep 2010 15:42:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10930 invoked by uid 500); 27 Sep 2010 15:42:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10921 invoked by uid 99); 27 Sep 2010 15:42:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 15:42:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [160.53.250.156] (HELO mxsmtp2.etat-ge.ch) (160.53.250.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 15:42:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by mxsmtp2.etat-ge.ch (Postfix) with ESMTP id 4FC8978088
	for <java-user@lucene.apache.org>; Mon, 27 Sep 2010 17:41:45 +0200 (CEST)
X-Virus-Scanned: Clean
Received: from mxsmtp2.etat-ge.ch ([127.0.0.1])
	by localhost (mxsmtp2.etat-ge.ch [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id M2EZIAWvjwIm for <java-user@lucene.apache.org>;
	Mon, 27 Sep 2010 17:41:45 +0200 (CEST)
Received: from goeland.ge-admin.ad.etat-ge.ch (smtp-int.etat-ge.ch [10.139.36.81])
	by mxsmtp2.etat-ge.ch (Postfix) with ESMTP id 38B9E7807A
	for <java-user@lucene.apache.org>; Mon, 27 Sep 2010 17:41:45 +0200 (CEST)
Received: from ADAPA.ge-admin.ad.etat-ge.ch ([10.139.36.72]) by goeland.ge-admin.ad.etat-ge.ch with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 27 Sep 2010 17:41:44 +0200
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Questions about Lucene usage recommendations
Date: Mon, 27 Sep 2010 17:41:23 +0200
Message-ID: <F1AD6F6673633C4692F7689E42FF9AAA4214CF@ADAPA.ge-admin.ad.etat-ge.ch>
In-Reply-To: <AANLkTin5qr4Z5_GV=FuQ_N15ZdAaRVNPB0-QV4FeKbXN@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Questions about Lucene usage recommendations
Thread-Index: ActeQ/cexaX7gpgHSxKoa9IrtmAZJAAAEcDA
References: <F1AD6F6673633C4692F7689E42FF9AAA42138C@ADAPA.ge-admin.ad.etat-ge.ch> <AANLkTin5qr4Z5_GV=FuQ_N15ZdAaRVNPB0-QV4FeKbXN@mail.gmail.com>
From: "Pawlak Michel (DCTI)" <michel.pawlak@etat.ge.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Sep 2010 15:41:44.0911 (UTC) FILETIME=[7D19EDF0:01CB5E5A]

SGVsbG8sDQoNClRoYW5rIHlvdSBmb3IgeW91ciBxdWljayByZXBseSwgSSdsbCBkbyBteSBiZXN0
IHRvIGFuc3dlciB5b3VyIHJlbWFya3MgYW5kIHF1ZXN0aW9ucyAoSSBudW1iZXJlZCB0aGVtIHRv
IG1ha2UgbXkgbWFpbCBtb3JlIHJlYWRhYmxlLikgVW5mb3J0dW5hdGVseSwgYXMgSSB3cm90ZSwg
SSBoYXZlIG5vIGFjY2VzcyB0byB0aGUgc291cmNlIGNvZGUsIGFuZCB0aGUgY29tcGFueSBpcyBu
b3QgcmVhbGx5IHdpbGxpbmcgdG8gYW5zd2VyIG15IHF1ZXN0aW9ucyAodGhhdCdzIHdoeSB3ZSBp
bnZlc3RpZ2F0ZSkuLi4gc28gSSBjYW5ub3QgYmUgc3VyZSBvZiB3aGF0IGlzIHJlYWxseSBkb25l
Lg0KDQoxKSB5ZXMgMi4xLjAgaXMgcmVhbGx5IG9sZCB0aGF0J3Mgd2h5IEknbSB3b25kZXJpbmcg
d2h5IHRoZSBjb21wYW55IHByb3ZpZGluZyB0aGUgYXBwbGljYXRpb24gZGlkbid0IHVwZ3JhZGUg
dG8gYSBuZXdlciB2ZXJzaW9uLCBlc3BlY2lhbGx5IGlmIGl0J3MgImFsbW9zdCBqYXIgZHJvcC1p
biINCjIpIEkgbWVhbiB0aGF0IHRoZSBhcHBsaWNhdGlvbiBjcmVhdGVzIGFuIGluZGV4IGJhc2Vk
IG9uIGRhdGEgc3RvcmVkIGluIGEgZGIgYW5kIG5vdCBpbiBmaWxlcyAodGhlbiB0aGUgaW5kZXgg
aXMgYmVpbmcgdXNlZCBmb3IgdGhlIHNlYXJjaGVzKQ0KMykgb25seSBkb2N1bWVudHMgYmVpbmcg
Y2hhbmdlZCBhcmUgcmVpbmRleGVkLCBub3QgdGhlIGVudGlyZSBkb2N1bWVudCBiYXNlLiBBcm91
bmQgMTAwLTE1MCAiZG9jdW1lbnRzIiBwZXIgZGF5IG5lZWQgdG8gYmUgcmVpbmRleGVkLg0KNCkg
bm8gc3BlY2lmaWMgc29ydGluZyBpcyBkb25lIGJ5IGRlZmF1bHQgKGFzIGZhciBhcyBJIGtub3cu
Li4pDQo1KzYpIGVhY2ggImRvY3VtZW50IiBpcyBzbWFsbCAoZWFjaCAiZG9jdW1lbnQiIGlzIGEg
dGVjaG5pY2FsIGRlc2NyaXB0aW9uIG9mIGEgYm9vayAobm90IHRoZSBib29rJ3MgY29udGVudCBp
dHNlbGYpLCBtYWRlIG9mIH4xMDAwIGRhdGFiYXNlIGZpZWxkcywgZWFjaCBvZiB3aGljaCB3ZWln
aHQgYSBmZXcgS2J5dGUpLCBubyBoaWdobGlnaHRpbmcgaXMgZG9uZQ0KNykgSU1ITyB0aGUgd2F5
IGx1Y2VuZSBpcyBiZWluZyB1c2VkIGlzIHRoZSBib3R0bGVuZWNrLCBub3QgbHVjZW5lIGl0c2Vs
Zi4gSG93ZXZlciBJIGhhdmUgbm8gcHJvb2YsIGFzIEkgZG8gbm90IGhhdmUgYWNjZXNzIHRvIHRo
ZSBjb2RlLiBXaGF0IEkga25vdyBpcyB0aGF0IGFzIHdlIGhhdmUgYXdmdWxsIHBlcmZvcm1hbmNl
IGlzc3VlcyBhbmQgY291bGQgbm90IHdhaXQgZm9yIGEgYmV0dGVyIHNvbHV0aW9uLCB3ZSd2ZSBw
dXQgdGhlIGFwcGxpY2F0aW9uIG9uIGEgaGlnaCBwZXJmb3JtYW5jZSBzZXJ2ZXIsIHdpdGggYSBV
U1BWIFNBTiwgYW5kIHRoZSBwZXJmb3JtYW5jZSBpbXByb3ZlZCBkcmFtYXRpY2FsbHkgKGRyb3Bw
ZWQgZnJvbSAyLjUgbWludXRlcyBwZXIgc2VhcmNoIHRvIGFyb3VuZCAxMCBzZWNvbmRzIGJlZm9y
ZSBvcHRpbWl6YXRpb24uKSBCdXQgd2UgY2Fubm90IGFmZm9yZCBzdWNoIGEgc29sdXRpb24gaW4g
dGhlIGxvbmcgcnVuICh1c2luZyBzdWNoIGFuIGhpZ2ggZW5kIHNlcnZlciBmb3Igc3VjaCBhIHNt
YWxsIGFwcGxpY2F0aW9uIGlzIGEga2luZCBvZiBqb2tlKS4gQ3VycmVudGx5LCB3ZSBvYnNlcnZl
IHJlYWQgYWNjZXNzIHBlYWtzIHRvIHRoZSBpbmRleCBmaWxlICh1cCB0byAyODAgTWJ5dGUvc2Vj
b25kKSBhbmQgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzIHdoZW4gb3B0aW1pemluZyB0aGUgaW5k
ZXggKHNlZSBiZWxvdykNCjgpIFdlIHVzZSBubyBORlMsIHdlJ3JlIG9uIGEgVVNQViBTQU4sIGJ1
dCB3ZSB3ZXJlIHVzaW5nIHBoeXNpY2FsIEhERCBiZWZvcmUgKHNsb3dlciB0aGFuIHRoZSBTQU4s
IGJ1dCBpdCdzIG9ubHkgcGFydCBvZiB0aGUgcHJvYmxlbSBJTUhPKQ0KOS0xMCkgVGhhbmsgeW91
IGZvciB0aGUgaW5mb3JtYXRpb24NCjExKSBPbiB0aGUgaGlnaCBlbmQgc2VydmVyLCBhZnRlciB3
ZSBvcHRpbWl6ZWQgdGhlIGluZGV4IHRoZSBhdmVyYWdlIHNlYXJjaCB0aW1lIGRyb3BwZWQgZnJv
bSAxMHMgdG8gYmVsb3cgMnMsIG5vdyAoYWZ0ZXIgMi41IHdlZWtzKSB0aGUgYXZlcmFnZSBzZWFy
Y2ggdGltZSBpcyA3cy4gT3B0aW1pemF0aW9uIHNlZW1zIHJlcXVpcmVkIDotLw0KMTIpIG9rDQoN
ClJlZ2FyZHMsDQoNCk1pY2hlbA0KDQotLS0tLU1lc3NhZ2UgZCdvcmlnaW5lLS0tLS0NCkRlIDog
RGFuaWwgxaJPUklOIFttYWlsdG86dG9yaW5kYW5AZ21haWwuY29tXSANCkVudm95w6kgOiBsdW5k
aSwgMjcuIHNlcHRlbWJyZSAyMDEwIDE0OjUzDQrDgCA6IGphdmEtdXNlckBsdWNlbmUuYXBhY2hl
Lm9yZw0KT2JqZXQgOiBSZTogUXVlc3Rpb25zIGFib3V0IEx1Y2VuZSB1c2FnZSByZWNvbW1lbmRh
dGlvbnMNCg0KMSkgTHVjZW5lIDIuMSBpcyByZWFsbHkgb2xkLi4ueW91IHNob3VsZCBiZSBhYmxl
IHRvIG1pZ3JhdGUgdG8gbHVjZW5lIDIuOQ0Kd2l0aG91dCBjaGFuZ2luZyB5b3VyIGNvZGUgKGFs
bW9zdCBqYXIgZHJvcC1pbiwgYnV0IGJlIGNhcmVmdWwgb24NCmFuYWx5emVycyksIGFuZCB0aGVy
ZSBjb3VsZCBiZSBodWdlIGltcHJvdmVtZW50cyBpZiB5b3UgdXNlIGx1Y2VuZQ0KcHJvcGVybHku
DQoNCkZldyBxdWVzdGlvbnM6DQoyKSAtIHdoYXQgZG9lcyAiYWxsIGRhdGEgdG8gYmUgaW5kZXhl
ZCBpcyBzdG9yZWQgaW4gREIgZmllbGRzIiBtZWFuPyB5b3UNCnNob3VsZCBzdG9yZSBpbiBsdWNl
bmUgZXZlcnl0aGluZyB5b3UgbmVlZCwgc28gb24gc2VhcmNoIHRpbWUgeW91DQpzaG91bGRuJ3Qg
bmVlZCB0byBoaXQgREINCjMpIC0gd2hhdCBkb2VzICJpbmRleGluZyBpcyBkb25lIHJpZ2h0IGFm
dGVyIGV2ZXJ5IG1vZGlmaWNhdGlvbiIgbWVhbj8gZG8NCnlvdSBpbmRleCBqdXN0IHRoZSBjaGFu
Z2VkIGRvY3VtZW50PyBvciByZWluZGV4IGFsbCAxLjQgTSBkb2NzPw0KNCkgZG8geW91IHNvcnQg
b24gc29tZSBmaWVsZCwgb3IganVzdCBiYXNpYyByZWxldmFuY2U/DQo1KSAtIGhvdyBiaWcgaXMg
ZWFjaCBkb2N1bWVudCBhbmQgd2hhdCBkbyB5b3UgZG8gd2l0aCBpdD8gbWF5YmUNCmhpZ2hsaWdo
dGluZyBvbiBsYXJnZSBkb2N1bWVudHMgY2F1c2VzIHRoaXM/DQo2KSAtIHdoYXQncyBpbiB0aGUg
ZG9jdW1lbnQ/IGlmIGl0J3MgbGlrZSBhIGJvb2suLi5hbmQgYWxtb3N0IGV2ZXJ5IHdvcmQNCm1h
dGNoZXMgZXZlcnkgZG9jdW1lbnQuLi50aGVyZSBjb3VsZCBiZSBzb21lIGlzc3Vlcw0KNykgLSBp
cyB0aGUgbHVjZW5lIHRoZSBib3R0bGVuZWNrPyBtYXliZSB5b3UgYXJlIGNhbGxpbmcgZnJvbSBy
ZW1vdGUNCnNlcnZlciBhbmQgbWFyc2hhbGluZytuZXR3b3JrK3VubWFyc2hhbGluZyBpcyBzbG93
Pw0KDQpVc3VhbCBsdWNlbmUgcGF0dGVybnMgYXJlIChhc3N1bWluZyB0aGF0IHlvdSBtb3ZlZCB0
byBsdWNlbmUgMi45KToNCjgpIC0gYXZvaWQgdXNpbmcgTkZTIChub3QgbmVjZXNzYXJ5IGEgcGVy
Zm9ybWFuY2UgYm90dGxlbmVjaywgYW5kDQpkZWZpbml0ZWx5IG5vdCBzb21ldGhpbmcgdG8gY2F1
c2UgMiBtaW51dGVzIHF1ZXJ5LCBidXQganVzdCB0byBiZSBvbg0KdGhlIHNhZmUgc2lkZSkNCjkp
IC0ga2VlcCB3cml0ZXIgb3BlbiBhbmQgYWRkIGRvY3VtZW50cyB0byB0aGUgaW5kZXggKG5vIG5l
ZWQgdG8gcmVidWlsZA0KZXZlcnl0aGluZykNCjEwKSAtIGtlZXAgeW91ciByZWFkZXJzIG9wZW4g
YW5kIHVzZSByZW9wZW4oKSBvbmNlIGluIGEgd2hpbGUgKHlvdSBtYXkNCmV2ZW4gZ28gZm9yIHJl
YWx0aW1lIHNlYXJjaCBpZiB5b3Ugd2FudCB0bykNCjExKSAtIGluIHlvdXIgY2FzZSwgSSBkb24n
dCB0aGluayBvcHRpbWl6ZSB3aWxsIGRvIGFueSBnb29kLCBzZWdtZW50cyBsb29rDQpnb29kIHRv
IG1lLCBkb24ndCB3b3JyeSBhYm91dCBjZnMgZmlsZSBzaXplDQoxMikgLSB0aGVyZSBhcmUgd2F5
cyB0byBsaW1pdCBjZnMgZmlsZXMgYW5kIHBsYXkgd2l0aCBzZXRNYXhYWFgsIGJ1dCBpDQpkb24n
dCB0aGluayBpdCdzIHRoZSBjYXVzZSBvZiB5b3VyIDIgbWludXRlIHF1ZXJ5Lg0KDQpPbiBNb24s
IFNlcCAyNywgMjAxMCBhdCAxNDozNSwgUGF3bGFrIE1pY2hlbCAoRENUSSkNCjxtaWNoZWwucGF3
bGFrQGV0YXQuZ2UuY2g+IHdyb3RlOg0KPiBIZWxsbywNCj4NCj4gV2UgaGF2ZSBhbiBhcHBsaWNh
dGlvbiB3aGljaCBpcyB1c2luZyBsdWNlbmUgYW5kIHdlIGhhdmUgc3Ryb25nDQo+IHBlcmZvcm1h
bmNlIGlzc3VlcyAob24gYmFkIGRheXMsIHNvbWUgc2VhcmNoZXMgdGFrZSBtb3JlIHRoYW4gMg0K
PiBtaW51dGVzKS4gSSdtIG5ldyB0byB0aGUgTHVjZW5lIGNvbXBvbmVudCwgdGh1cyBJJ20gbm90
IHN1cmUgTHVjZW5lIGlzDQo+IGNvcnJlY3RseSB1c2VkIGFuZCB0aHVzIHdvdWxkIGxpa2UgdG8g
aGF2ZSBzb21lIGluZm9ybWF0aW9uIG9uIGx1Y2VuZQ0KPiB1c2FnZSByZWNvbW1lbmRhdGlvbnMu
IFRoaXMgd291bGQgaGVscCBsb2NhdGUgdGhlIHByb2JsZW0gKGFwcGxpY2F0aW9uDQo+IGNvZGUg
LyBsdWNlbmUgY29uZmlndXJhdGlvbiAvIGhhcmR3YXJlIC8gYWxsKSBJdCB3b3VsZCBiZSBncmVh
dCBpZiBhDQo+IHByb2plY3QgY29tbWl0dGVyIC8gc3BlY2lhbGlzdCBjb3VsZCBhbnN3ZXIgdGhv
c2UgcXVlc3Rpb25zLg0KPg0KPiBGaXJzdCBzb21lIGZhY3RzIGFib3V0IHRoZSBhcHBsaWNhdGlv
biA6DQo+IC0gTHVjZW5lIHZlcnNpb24gYmVpbmcgdXNlZCA6IDIuMS4wIChmZWJydWFyeSAyMDA3
Li4uKQ0KPiAtIGFyb3VuZCAxLjRNICJkb2N1bWVudHMiIHRvIGJlIGluZGV4ZWQuDQo+IC0gRGIg
c2l6ZSAoYWxsIGRhdGEgdG8gYmUgaW5kZXhlZCBpcyBzdG9yZWQgaW4gREIgZmllbGRzKSA6IDMu
NSBHQg0KPiAtIEluZGV4IGZpbGUgc2l6ZSBvbiBkaXNrIDogMS42IEdCIChub3RlIHRoYXQgb25l
IGNmcyBmaWxlIGlzIDc4ME0sDQo+IGFub3RoZXIgb25lIGlzIDYwME0sIHRoZSByZXN0IGNvbnNp
c3RzIG9mIHNtYWxsZXIgZmlsZXMpDQo+IC0gc2luZ2xlIGluZGV4ZXIsIG11bHRpcGxlIHJlYWRl
cnMgKDYgcmVhZGVycykNCj4gLSBhcm91bmQgMTUwIGRvY3VtZW50cyBhcmUgbW9kaWZpZWQgcGVy
IGRheQ0KPiAtIGluZGV4aW5nIGlzIGRvbmUgcmlnaHQgYWZ0ZXIgZXZlcnkgbW9kaWZpY2F0aW9u
DQo+IC0gc2ltcGxlIHNlYXJjaGVzIGNhbiB0YWtlIGFnZXMgKGZvciBpbnN0YW5jZSBzZWFyY2hp
bmcgZm9yICJjaG9jb2xhdGUiDQo+IGNvdWxkIHRha2UgZm9yIG1vcmUgdGhhbiAyIG1pbnV0ZXMp
DQo+IC0gSSBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gc291cmNlIGNvZGUgKHllcyB0aGF0J3MgdGhl
IGZ1bm55IHBhcnQpDQo+DQo+IE15IHF1ZXN0aW9ucyA6DQo+IC0gSXMgdGhpcyB2ZXJzaW9uIG9m
IEx1Y2VuZSBzdGlsbCBzdXBwb3J0ZWQgPw0KPiAtIFdoYXQgYXJlIHRoZSBtYWluIHJlYXNvbnMs
IGlmIGFueSwgb25lIHNob3VsZCB1c2UgdGhlIGxhdGVzdCB2ZXJzaW9uDQo+IG9mIGx1Y2VuZSBp
bnN0ZWFkIG9mIDIuMS4wID8gKGZvciBpbnN0YW5jZSA6IHBlcmZvcm1hbmNlLCBzdGFiaWxpdHks
DQo+IGNyaXRpY2FsIGZpeGVzLCBzdXBwb3J0LCBldGMuKSAodGhlIGFuc3dlciBtYXkgc291bmQg
b2J2aW91cywgYnV0IEkNCj4gd291bGQgbGlrZSB0byBoYXZlIGFuIG9mZmljaWFsIGFuc3dlcikN
Cj4gLSBJcyB0aGVyZSBhbnkgcmVjb21tZW5kYXRpb24gY29uY2VybmluZyBzdG9yYWdlIGFueSBM
dWNlbmUgdXNlciBzaG91bGQNCj4ga25vdyAobm90IGJlbmNobWFya3MsIGJ1dCByZWNvbW1lbmRh
dGlvbnMgc3VjaCBhcyAiYmV0dGVyIHVzZSBwaHlzaWNhbA0KPiBIREQiLCAiZG8gbm90IHVzZSBO
RlMgaWYgcG9zc2libGUiLCAiaWYgeW91ciBjZnMgZmlsZXMgYXJlIGdyZWF0ZXIgdGhhbg0KPiBY
WVosIGJldHRlciB1c2UgdGhpcyBraW5kIG9mIHN0b3JhZ2UiLCAiaWYgeW91IGhhdmUgbW9yZSB0
aGFuIFhZWg0KPiBzZWFyY2hlcyBwZXIgc2Vjb25kLCBiZXR0ZXIuLi4iIGV0YykNCj4gLSBJcyB0
aGVyZSBhbnkgcmVjb21tYW5kYXRpb24gY29uY2VybmluZyBjZnMgZmlsZSBzaXplID8NCj4gLSBJ
cyB0aGVyZSBhIHdheSB0byBsaW1pdCB0aGUgc2l6ZSBvZiBjZnMgZmlsZXMgPw0KPiAtIFdoYXQg
aXMgdGhlIGltcGFjdCBvbiBzZWFyY2ggcGVyZm9ybWFuY2UgaWYgY2ZzIGZpbGUgc2l6ZSBpcyBs
aW1pdGVkID8NCj4gLSBIb3cgb2Z0ZW4gc2hvdWxkIG9wdGltaXphdGlvbiBvY2N1ciA/IChldmVy
eSBkYXksIHdlZWssIG1vbnRoID8pDQo+IC0gSSBzYXcgdGhhdCBJbmRleFdyaXRlciBoYXMgbWV0
aG9kcyBzdWNoIGFzIHNldE1heEZpZWxkTGVuZ3RoKCkNCj4gc2V0TWVyZ2VGYWN0b3IoKSBzZXRN
YXhCdWZmZXJlZERvY3MoKSBzZXRNYXhNZXJnZURvY3MoKSBDYW4geW91IGJyaWVmbHkNCj4gZXhw
bGFpbiBob3cgdGhlc2UgY2FuIGFmZmVjdCBwZXJmb3JtYW5jZSA/DQo+IC0gSXMgdGhlcmUgYW55
IG90aGVyIHJlY29tbWFuZGF0aW9uICJkdW1taWVzIiBzaG91bGQgYmUgaW5mb3JtZWQgb2YsIGFu
ZA0KPiBldmVyeSBleHBlcnQgaGFzIHRvIGtub3cgPyBGb3IgaW5zdGFuY2UgYXMgYSBsaXN0IG9m
IGx1Y2VuZSBwYXR0ZXJucyAvDQo+IGFudGkgcGF0dGVybnMgd2hpY2ggbWF5IGFmZmVjdCBwZXJm
b3JtYW5jZS4NCj4NCj4gSWYgbXkgcXVlc3Rpb25zIGFyZSBub3QgcHJlY2lzZSBlbm91Z2gsIGRv
IG5vdCBoZXNpdGF0ZSB0byBhc2sgZm9yDQo+IGRldGFpbHMuIElmIHlvdSBzZWUgYW4gb2J2aW91
cyBwcm9ibGVtIGRvIG5vdCBoZXNpdGF0ZSB0byB0ZWxsIG1lLg0KPg0KPiBBIGJpZyB0aGFuayB5
b3UgaW4gYWR2YW5jZSBmb3IgeW91ciBoZWxwLA0KPg0KPiBCZXN0IHJlZ2FyZHMsDQo+DQo+IE1p
Y2hlbA0KPg0KPg0KPg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGph
dmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29t
bWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-47337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 16:42:54 2010
Return-Path: <java-user-return-47337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43930 invoked from network); 27 Sep 2010 16:42:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 16:42:53 -0000
Received: (qmail 92369 invoked by uid 500); 27 Sep 2010 16:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92316 invoked by uid 500); 27 Sep 2010 16:42:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92303 invoked by uid 99); 27 Sep 2010 16:42:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 16:42:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 27 Sep 2010 16:42:41 +0000
Received: (qmail 3708 invoked by uid 60001); 27 Sep 2010 16:42:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1285605740; bh=guy0HEVYDWdNINIjiBruf+a5rUW/EJRI5VvRF+6PM/E=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=2pcPhog0WXIiLZ8WDYJEQ7yHyti7qkur3S866ArR4JJ/7Crls8GLXSTvnIWPZMWL7RVNPHAgVcX4cXMdTHPWr6uR3SMOyfEBuH0jNVoVxTWI4njV33/DeAAdCllYTJl9bmSbp5qxAF9rMJJn7whLgbXDSya8LUHF9p3rr/ueC+Y=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=tmKs3DCMhdzAaA1/rHe2Kf6Mm3RaIdRMPFI/kIqRfnzStkCM3mi7ByIREdPQk7JjtLINywLtSoo1KaE+XvcwHPF1dWY08Gw8NQA5s9a9drV+jQ/YhKGmPcqTmlnUunXpRpGB0291W30YhyxUjIg+oz4Dsq4ZG3FgQaBzXuqYiKk=;
Message-ID: <603713.2562.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: _OS41mcVM1mGD_tpXckVukWUV.antBkI4UAXE.fxwzz3ijE
 VDkyZ6sfV8IiyUqTVcGvFdMpybKfcDDGtS_i9boIoK7oQaRkFtDvoBR9RJwY
 hzKOPsCZ7klrCh1UQjxaCV_SbyWj41TA0wgfGSuIVvf0.zf9y_NithsLFx3P
 Ejft7gA1d42cbNeM6CdaUQtgOIM_wuioGAifRwQ4jzvxvU1aV41DXJehPNwf
 bXjj2PEd2_blZ4DeArWRU41k2G8pF6oX3qrnD3SburBc2i7L55VfgEOXwobN
 4cXYO.VJ6iGtRH99AdlW7d9iqodIWoxTBqBAqyqwPIZ4.EJ093Yy5sMO0ILE
 5ssqRLlrPw5SyTKppcHpOGm0N..A-
Received: from [95.10.50.202] by web52904.mail.re2.yahoo.com via HTTP; Mon, 27 Sep 2010 09:42:20 PDT
X-Mailer: YahooMailClassic/11.4.9 YahooMailWebService/0.8.105.279950
Date: Mon, 27 Sep 2010 09:42:20 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Fuzzy Phrase
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTi=0Obx7+gLC7XEgWP95-OgZmzV70rci1vFWJSxk@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0A> I want to=0A> use just one string like -- head:"hello~ world"~3 AND=0A=
> contents:"colorless~=0A> green~ ideas~".=0A> =0A> When I this string quer=
y within ComplexPhraseQuery, I get=0A> the exception:=0A>  -- ParseExceptio=
n: Cannot parse 'hello~ world': Cannot=0A> have clause for=0A> field "conte=
nt" nested in phrase=A0 for field "head"=0A> =0A> But, If I use -- head:hel=
lo AND head:world AND=0A> contents:"colorless~ green~=0A> ideas~" -- no err=
ors occurred.=0A=0A=0AActually there is solution/patch for that problem.=0A=
=0Ahttps://issues.apache.org/jira/secure/attachment/12414443/Lucene-1486+no=
n+default+field.patch=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 19:29:01 2010
Return-Path: <java-user-return-47338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15888 invoked from network); 27 Sep 2010 19:29:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 19:29:01 -0000
Received: (qmail 56706 invoked by uid 500); 27 Sep 2010 19:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56619 invoked by uid 500); 27 Sep 2010 19:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56611 invoked by uid 99); 27 Sep 2010 19:28:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 19:28:58 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 27 Sep 2010 19:28:55 +0000
Received: (qmail 15762 invoked by uid 99); 27 Sep 2010 19:28:34 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 19:28:34 +0000
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Is it a bug in Lucene?
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <60394.1285591545@terra.com.br>
Date: Mon, 27 Sep 2010 15:28:32 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <40683965-5D65-4C56-9142-3388E0344DB3@apache.org>
References: <60394.1285591545@terra.com.br>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paulo,

The mailing list strips attachments.  Can you just cut and paste it into =
the email?

-Grant

On Sep 27, 2010, at 8:45 AM, paulocsc@terra.com.br wrote:

>=20
> Hi,
> 	I did a test to understand the use of '*' and '?'.=20
>=20
> 	If I use StandardAnalyzer I have espected results but, if a use
> BrazilianAnalyzer I have a mistake result.=20
>=20
> 	Junit is at the end.=20
>=20
> 	Thanks.=20
>=20
> 	Paulo Cesar=20
> 	cities in my Lucene data base=3D>
> {"Bras=EDlia","Brasil=E2ndia","Brasl=E2ndia", "S=E3o Paulo", "S=E3o
> Roque", "Salvador"};=20
> 	=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
>=20
> 	>>> Using StandardAnalyzer  Using BrazilianAnalyzer >> JUnit

--------------------------
Grant Ingersoll
http://lucenerevolution.org Apache Lucene/Solr Conference, Boston Oct =
7-8


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 21:41:39 2010
Return-Path: <java-user-return-47339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60500 invoked from network); 27 Sep 2010 21:41:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 21:41:38 -0000
Received: (qmail 63678 invoked by uid 500); 27 Sep 2010 21:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63585 invoked by uid 500); 27 Sep 2010 21:41:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63577 invoked by uid 99); 27 Sep 2010 21:41:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 21:41:35 +0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.34.111.252] (HELO barmail2.idig.net) (64.34.111.252)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 21:41:30 +0000
X-ASG-Debug-ID: 1285623665-546ee0830001-H1Y1KX
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10]) by barmail2.idig.net with ESMTP id 45kBV3NBLNXiNYn6; Mon, 27 Sep 2010 14:41:05 -0700 (PDT)
X-Barracuda-Envelope-From: fuad@efendi.ca
X-Barracuda-Apparent-Source-IP: 65.39.182.10
Received: from v52013181-136-59.cust.b2b2c.ca ([66.158.136.59] helo=FuadPC)
	by cpweb10.idig.net with esmtp (Exim 4.69)
	(envelope-from <fuad@efendi.ca>)
	id 1P0LRX-0007Pl-8J; Mon, 27 Sep 2010 14:41:04 -0700
From: "Fuad Efendi" <fuad@efendi.ca>
To: <java-user@lucene.apache.org>,
	<dev@lucene.apache.org>
References: <1103715082423.1101335703814.196879.10.431400B0@scheduler>
In-Reply-To: <1103715082423.1101335703814.196879.10.431400B0@scheduler>
Subject: FW: Save 45% and Join the Search Revolution!
Date: Mon, 27 Sep 2010 17:40:57 -0400
X-ASG-Orig-Subj: FW: Save 45% and Join the Search Revolution!
Message-ID: <006701cb5e8c$aef909a0$0ceb1ce0$@efendi.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0068_01CB5E6B.27EB6140"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGbxQN7WDHollSLSIVOWMPhDG5KGZOFjx6g
Content-Language: en-ca
X-Barracuda-Connect: cpweb10.idig.net[65.39.182.10]
X-Barracuda-Start-Time: 1285623665
X-Barracuda-URL: http://64.34.111.252:8000/cgi-mod/mark.cgi
X-Virus-Scanned: by bsmtpd at idig.net
X-Barracuda-Spam-Score: 0.35
X-Barracuda-Spam-Status: No, SCORE=0.35 using global scores of TAG_LEVEL=1000.0 QUARANTINE_LEVEL=1000.0 KILL_LEVEL=3.5 tests=CN_BODY_332, HTML_MESSAGE, SH_BIG5_05413_BODY_104, THREAD_INDEX
X-Barracuda-Spam-Report: Code version 3.2, rules version 3.2.2.42076
	Rule breakdown below
	 pts rule name              description
	---- ---------------------- --------------------------------------------------
	0.01 THREAD_INDEX           thread-index: AcO7Y8iR61tzADqsRmmc5wNiFHEOig==
	0.12 CN_BODY_332            BODY: CN_BODY_332
	0.21 SH_BIG5_05413_BODY_104 BODY: Body: contain "UNSUBSCRIBE"
	0.00 HTML_MESSAGE           BODY: HTML included in message

------=_NextPart_000_0068_01CB5E6B.27EB6140
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 


Click here to view in your browser.
<http://campaign.r20.constantcontact.com/render?llr=gimslwbab&v=001HZh_ryKk0
qdG4WejchCB4NWuBDRHxIg9mBm7VHa9wjtWDtxhCBx_G3c84MTiPz0k8-jGptuf8rRaERY7YjsWj
AeCGA3wiZwWpP7wj32TAKUUT1cacfEiKrIg-Sy3ORFm> 

 



 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSV3SpmhiIZAFE6UUWDXfk0Hy--CsjA3tTDmJPkfQKU6txedk_0LWni3L58LqXQdiWzFSW9M
lJIc0WhDk8gSWYc4Els2b-1uJZC5TvHZz4uDwnhYzUbAzpxVoTeOMrS04yc=>
ManningWeblogo.medium


	
	



Join the Search revolution!

.         Create: 

.         .smarter searches

.         .better recommendations

.         .more responsive apps 

Search is the foundation for high-demand site features like recommendations,
content filtering, classification, and clustering. And rapidly growing
interest in NoSQL, big data, and the semantic web makes it only more
important to master technologies like Lucene, Mahout, Tika, and Hadoop.

Manning has the books to help you join the search revolution. Until October
5, you can save 45% on any of them--ebook, pbook, or MEAP. Just enter
search45 in the Promotional Code box when you check out at
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVuGOxnDXgfG9npjNH30iHEZmRjQrqlPfDNqyKNRoTqsMFBuaJq7YoHIKpGaB8VzvnOMLW1
GuMzySn51FacEYBRaqlTTRW15unz7JgfCu9d4A==> manning.com.

Lucene Revolution

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUVgzWkddDrjSZRRA-bvrcyTg0RDQiMqRaRa9ZGj2Yq7Ys960p7SrsVkwvkaodgowExAd-F
ZjL-C3cseguA_9gFQPEd2YmB5KMkp-JPPiIXA0SxCu1FFyss>
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUVgzWkddDrjSZRRA-bvrcyTg0RDQiMqRaRa9ZGj2Yq7Ys960p7SrsVkwvkaodgowExAd-F
ZjL-C3cseguA_9gFQPEd2YmB5KMkp-JPPiIXA0SxCu1FFyss> lucenerevolution
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUVgzWkddDrjSZRRA-bvrcyTg0RDQiMqRaRa9ZGj2Yq7Ys960p7SrsVkwvkaodgowExAd-F
ZjL-C3cseguA_9gFQPEd2YmB5KMkp-JPPiIXA0SxCu1FFyss> We are taking part in the
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUVgzWkddDrjSZRRA-bvrcyTg0RDQiMqRaRa9ZGj2Yq7Ys960p7SrsVkwvkaodgowExAd-F
ZjL-C3cseguA_9gFQPEd2YmB5KMkp-JPPiIXA0SxCu1FFyss> Lucene Revolution--the
premiere event for developers using Lucene and Solr, October 7-8 in Boston.
Meet our authors Grant Ingersoll (of
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVOBq2ADcxz2EOBvG4qlL-zvteYR9xg3RZEjqLu6CxG5FKdtYw5LA6bGY-yjilInWs-zVf0
Lx92M00OfBceR3iWV95n-CHW9mMO_IOjpW1ePHh5ywiw6nej> Taming Text) and Michael
McCandless, Erik Hatcher, Otis Gospodnetic (of
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXqmmSomsjhf4f3G2EgRgcbqhApl8YEZSrwkRBLWFCOuirW019YzUduzoDvxi3FdQT9zTBD
olNK2GqIqPg-xAedmSQ7q8BsELUSR_N_YNhKmJ9_rz0dFsAs> Lucene in Action, Second
Edition). 

Core technologies


 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXqmmSomsjhf4f3G2EgRgcbqhApl8YEZSrwkRBLWFCOuirW019YzUduzoDvxi3FdQT9zTBD
olNK2GqIqPg-xAedmSQ7q8BsELUSR_N_YNhKmJ9_rz0dFsAs> lucene

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXqmmSomsjhf4f3G2EgRgcbqhApl8YEZSrwkRBLWFCOuirW019YzUduzoDvxi3FdQT9zTBD
olNK2GqIqPg-xAedmSQ7q8BsELUSR_N_YNhKmJ9_rz0dFsAs> Lucene in Action, Second
Edition--Print and ebook--This clearly-written, completely revised second
edition has the breadth and depth you need. It is the definitive book on
Lucene. Starting with the basics it guides you through numerous practical
examples you will love. [
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXqmmSomsjhf4f3G2EgRgcbqhApl8YEZSrwkRBLWFCOuirW019YzUduzoDvxi3FdQT9zTBD
olNK2GqIqPg-xAedmSQ7q8BsELUSR_N_YNhKmJ9_rz0dFsAs> read more]

 


 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXmdpl9kPpnBSXjjhkzQcPBMxwWS1mpqsQnkTuGr4vxyohP-B7cTtSYurl4tvVmJA4QfZp1
MU114gjp06bRL-B3aJ9Zk2V5b74ecOtgDUQqCvqbB3F6lI3x> tikainaction

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXmdpl9kPpnBSXjjhkzQcPBMxwWS1mpqsQnkTuGr4vxyohP-B7cTtSYurl4tvVmJA4QfZp1
MU114gjp06bRL-B3aJ9Zk2V5b74ecOtgDUQqCvqbB3F6lI3x> Tika in Action--MEAP-With
Apache Tika you can detect the type of document you are dealing with and
retrieve just the filtered text from it. With lots of real-world examples,
this book teaches you to mine binary and text sources. [
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXmdpl9kPpnBSXjjhkzQcPBMxwWS1mpqsQnkTuGr4vxyohP-B7cTtSYurl4tvVmJA4QfZp1
MU114gjp06bRL-B3aJ9Zk2V5b74ecOtgDUQqCvqbB3F6lI3x> read more]

 


 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXLyIjSm91oI1Pi50rSD-90B4B-CGJp0iL9KmGbyPCKzo-8OvXw0LjefAHJfFym3SqQzL6w
RfXV6sVT3oD6F82cLeZJ9jWkFvrwbfDMysPMb7b4a6s44v-T> mahoutinaction

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXLyIjSm91oI1Pi50rSD-90B4B-CGJp0iL9KmGbyPCKzo-8OvXw0LjefAHJfFym3SqQzL6w
RfXV6sVT3oD6F82cLeZJ9jWkFvrwbfDMysPMb7b4a6s44v-T> Mahout in
Action--MEAP--Don't build intelligent web apps from scratch. Let Mahout and
this book help you with a library of machine learning algorithms, tested and
ready to use for recommendation, clustering, and classification. [
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXLyIjSm91oI1Pi50rSD-90B4B-CGJp0iL9KmGbyPCKzo-8OvXw0LjefAHJfFym3SqQzL6w
RfXV6sVT3oD6F82cLeZJ9jWkFvrwbfDMysPMb7b4a6s44v-T> read more]

 


 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXznFTL6idPMKnf5WZTPIa8VwnIV5UE3CwqGcITxlfFDXRDj4Ox0EEhk8VRTszqrtq7Mq0i
z-kB6rXDS1uZKaUQKlaD_zBsZbpwY2Km0lArwifjyzE-lsF0> hadoopinaction

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXznFTL6idPMKnf5WZTPIa8VwnIV5UE3CwqGcITxlfFDXRDj4Ox0EEhk8VRTszqrtq7Mq0i
z-kB6rXDS1uZKaUQKlaD_zBsZbpwY2Km0lArwifjyzE-lsF0> Hadoop in
Action--MEAP--For big data you'll need new ways to store and retrieve
information, and Map/Reduce is the way to go. In this book you'll learn to
use Hadoop for real-world Map/Reduce programming. [
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXznFTL6idPMKnf5WZTPIa8VwnIV5UE3CwqGcITxlfFDXRDj4Ox0EEhk8VRTszqrtq7Mq0i
z-kB6rXDS1uZKaUQKlaD_zBsZbpwY2Km0lArwifjyzE-lsF0> read more]

 


 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUBFIJyNFaIPPd3C4ls6doPUU3MrBzN03SX9LftIze46lPHrtA6xQXwMBKV9AgSo5IaTRL8
bo6yLNPfKa8fBPpastI2T3WXYbBv97UprYDawEJdnyN9-ajX> mongoDB

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUBFIJyNFaIPPd3C4ls6doPUU3MrBzN03SX9LftIze46lPHrtA6xQXwMBKV9AgSo5IaTRL8
bo6yLNPfKa8fBPpastI2T3WXYbBv97UprYDawEJdnyN9-ajX> MongoDB in
Action--MEAP--MongoDB is a scalable document-oriented database. This book is
an easy-to-follow guide that introduces both its approach to data and how to
use it in e-commerce, social networking, analytics, and other common
situations. [
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUBFIJyNFaIPPd3C4ls6doPUU3MrBzN03SX9LftIze46lPHrtA6xQXwMBKV9AgSo5IaTRL8
bo6yLNPfKa8fBPpastI2T3WXYbBv97UprYDawEJdnyN9-ajX> read more]

Big Ideas


 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXznFTL6idPMKnf5WZTPIa8VwnIV5UE3CwqGcITxlfFDXRDj4Ox0EEhk8VRTszqrtq7Mq0i
z-kB6rXDS1uZKaUQKlaD_zBsZbpwY2Km0lArwifjyzE-lsF0> algorithms

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUEGK0oxur0wJQ0sJI_X63B0vK_GpmFfmLH8S0Sn620Jzl-x7PXoHZ-_gMSmh2avZaDIZpH
O-8bWHfCHDnjqjNoKuM43-3Ygz6OT7vFvLQSzfF8X17kazzW> Algorithms of the
Intelligent Web--Print and ebook--Get detailed coverage of the algorithms
you need to implement features like intelligent search, suggestions and
recommendations, and item clustering. The examples are in Java, but the
algorithms apply to any implementation. [
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUEGK0oxur0wJQ0sJI_X63B0vK_GpmFfmLH8S0Sn620Jzl-x7PXoHZ-_gMSmh2avZaDIZpH
O-8bWHfCHDnjqjNoKuM43-3Ygz6OT7vFvLQSzfF8X17kazzW> read more]

 


 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVEj6ERSOOHxgVdD5grDqDboDdaF6-uTo5IaSDCTf3i1PKWoZyQPNt-5ispPv_BLz-tFm6e
uwTwX5ESbyghe_WBHDwtMifnobAuTo0SzMov8bXu344zvwBP> collectiveintelligence

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVEj6ERSOOHxgVdD5grDqDboDdaF6-uTo5IaSDCTf3i1PKWoZyQPNt-5ispPv_BLz-tFm6e
uwTwX5ESbyghe_WBHDwtMifnobAuTo0SzMov8bXu344zvwBP> Collective Intelligence in
Action--Print or ebook--Explore the core concepts and techniques you need to
make your web applications learn from the information users leave behind as
they surf, browse, blog, and buy. All techniques are presented with clear
Java-based examples. [
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVEj6ERSOOHxgVdD5grDqDboDdaF6-uTo5IaSDCTf3i1PKWoZyQPNt-5ispPv_BLz-tFm6e
uwTwX5ESbyghe_WBHDwtMifnobAuTo0SzMov8bXu344zvwBP> read more]

 


 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVOBq2ADcxz2EOBvG4qlL-zvteYR9xg3RZEjqLu6CxG5FKdtYw5LA6bGY-yjilInWs-zVf0
Lx92M00OfBceR3iWV95n-CHW9mMO_IOjpW1ePHh5ywiw6nej> tamingtext

 
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVOBq2ADcxz2EOBvG4qlL-zvteYR9xg3RZEjqLu6CxG5FKdtYw5LA6bGY-yjilInWs-zVf0
Lx92M00OfBceR3iWV95n-CHW9mMO_IOjpW1ePHh5ywiw6nej> Taming
Text--MEAP--Provides a readable, example-based introduction to natural
language processing. Learn how to break down complex text documents
automatically and extract relevant information for use in your intelligent
web applications. [
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVOBq2ADcxz2EOBvG4qlL-zvteYR9xg3RZEjqLu6CxG5FKdtYw5LA6bGY-yjilInWs-zVf0
Lx92M00OfBceR3iWV95n-CHW9mMO_IOjpW1ePHh5ywiw6nej> read more]

You may also be interested in

.
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSWXayZu3ZvXhYpV5I6fs4oFrWOAXqMVUSK_L2uZJdSGoNoZPK775JZinwnu7-pbpyD22tEi
ugOaT0Kp2MAZyaWgBf3PErCNpjSzTleiiG3ljDV9Q27Rxx_Y> Clojure in Action--MEAP

.
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVEj6ERSOOHxiuoGC2YoRsWicPZon9qX3zuqR7Izs46yI2tcC3og2y2FOwsnE6pLt9U5rwa
bCyBsDv9lJ6N9rhBW4H8T3vlKxbUkZ1H6OUawNuhYVTCL8tQ> The Joy of Clojure--MEAP

.
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXjGj_TQzMAXZTf41dpnmC6KeM38qsuyM3lkuzk65QQfi9x4WlfHf9y9gEnKblk4Mch5IOp
TYa-AHbb6IBLkDWapXHpubbE5BxAM9s-_K7uK41MMuivsNkQ> R in Action--MEAP

.
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSUe8QUMixQ_9NY-Yuxo9U8s1Th4DO7f2b7Uf5lEyLmzyLSiqC-FsnhY_md06COPE1VugPl7
kP25xqgBshNa_oGl_gx-HO2m24mFIbHiwrG3unciMhIQ6Inw> PostGIS in Action--MEAP

.
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSWJPvx9Mj5JQyB_fNSIhSGFbgFsBZNrjUcGE5u3q_bWYo_kdurFrPcoHuzgIas9WOgNZrW4
GGOYWzfL6kLJrwrd6rbB3W6qkBXyWp1z3JTCHwqvBjF5vJyx> The Cloud at your
Service--MEAP

.
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSWXayZu3ZvXhcrWvKWylyHln4Hc_lFDb8pkb2jG-NP2tjECS4A8jQ536uD5A8f5iwb2gSHj
wqi5elMhO90pMr4eXrAqHBdr91nNHpONeTLR7wX2HH2nifUf> Azure in Action--MEAP

.
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSXfer2B0fKvScuZfjhN1lsjlBWBmVelCh7l9NawDcQaIg4mOEzdyj9LVeb5cZ1Q53-bLJj6
11Pm1xXGauE2YKT3cU9CkcSUa2pl_616MUVNayOarCbUxFoD> Liferay in Action--MEAP

.
<http://r20.rs6.net/tn.jsp?llr=gimslwbab&et=1103715082423&s=196879&e=001VClo
uqYnzSVLrgAtfkCvM4znqAOrgj2kFme6xlb5TVJPAY1nw6u9E8ZnAWoLxbDZ2GFvMDG4rnabN15T
0t_P6Y8T_oNJTazJ-B-U7gD5xY9mbAUb2PKbgwCnfT-tQB_M> Portlets in Action--MEAP


			
	
	
	


Forward email
<http://ui.constantcontact.com/sa/fwtf.jsp?llr=gimslwbab&m=1101335703814&ea=
fuad%40efendi.ca&a=1103715082423> 


 
<http://visitor.r20.constantcontact.com/d.jsp?llr=gimslwbab&v=0018GC6MpVjY0Q
sVHXO2XbbSbU3-GPnAfVhjjG9WCP_0nAHSjKiFMqBDkg7VDJxicRlHM9qMFD5BcI%3D&p=un>
Safe Unsubscribe

This email was sent to fuad@efendi.ca by mkt@manning.com.

Update Profile/Email Address
<http://visitor.r20.constantcontact.com/d.jsp?llr=gimslwbab&v=0018GC6MpVjY0Q
sVHXO2XbbSbU3-GPnAfVhjjG9WCP_0nAHSjKiFMqBDkg7VDJxicRlHM9qMFD5BcI%3D&p=oo>  |
Instant removal with SafeUnsubscribe
<http://visitor.r20.constantcontact.com/d.jsp?llr=gimslwbab&v=0018GC6MpVjY0Q
sVHXO2XbbSbU3-GPnAfVhjjG9WCP_0nAHSjKiFMqBDkg7VDJxicRlHM9qMFD5BcI%3D&p=un> T
| Privacy Policy <http://ui.constantcontact.com/roving/CCPrivacyPolicy.jsp>
.

	

Manning Publications Co. | Sound View Ct. #3B | Greenwich | CT | 06830

 
<http://r20.rs6.net/on.jsp?llr=gimslwbab&t=1103715082423.0.1101335703814.196
879&ts=S0539&o=http://ui.constantcontact.com/images/p1x1.gif> 


------=_NextPart_000_0068_01CB5E6B.27EB6140--


From java-user-return-47340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 27 21:47:44 2010
Return-Path: <java-user-return-47340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61563 invoked from network); 27 Sep 2010 21:47:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Sep 2010 21:47:44 -0000
Received: (qmail 72274 invoked by uid 500); 27 Sep 2010 21:47:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72203 invoked by uid 500); 27 Sep 2010 21:47:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72195 invoked by uid 99); 27 Sep 2010 21:47:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 21:47:41 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.34.111.253] (HELO barmail3.idig.net) (64.34.111.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Sep 2010 21:47:33 +0000
X-ASG-Debug-ID: 1285624031-60d9da8f0001-H1Y1KX
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10]) by barmail3.idig.net with ESMTP id i1f3WZ0BM9Icr2wh; Mon, 27 Sep 2010 14:47:11 -0700 (PDT)
X-Barracuda-Envelope-From: fuad@efendi.ca
X-Barracuda-Apparent-Source-IP: 65.39.182.10
Received: from v52013181-136-59.cust.b2b2c.ca ([66.158.136.59] helo=FuadPC)
	by cpweb10.idig.net with esmtp (Exim 4.69)
	(envelope-from <fuad@efendi.ca>)
	id 1P0LXT-0000qC-04; Mon, 27 Sep 2010 14:47:11 -0700
From: "Fuad Efendi" <fuad@efendi.ca>
To: <dev@lucene.apache.org>,
	<java-user@lucene.apache.org>
References: <1103715082423.1101335703814.196879.10.431400B0@scheduler> <006701cb5e8c$aef909a0$0ceb1ce0$@efendi.ca>
In-Reply-To: <006701cb5e8c$aef909a0$0ceb1ce0$@efendi.ca>
Subject: RE: Save 45% and Join the Search Revolution!
Date: Mon, 27 Sep 2010 17:47:05 -0400
X-ASG-Orig-Subj: RE: Save 45% and Join the Search Revolution!
Message-ID: <007201cb5e8d$8a29dc70$9e7d9550$@efendi.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0073_01CB5E6C.0318B1A0"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGbxQN7WDHollSLSIVOWMPhDG5KGQGsPO8ik3guiSA=
Content-Language: en-ca
X-Barracuda-Connect: cpweb10.idig.net[65.39.182.10]
X-Barracuda-Start-Time: 1285624031
X-Barracuda-URL: http://64.34.111.253:8000/cgi-mod/mark.cgi
X-Virus-Scanned: by bsmtpd at idig.net
X-Barracuda-Spam-Score: 0.01
X-Barracuda-Spam-Status: No, SCORE=0.01 using global scores of TAG_LEVEL=1000.0 QUARANTINE_LEVEL=1000.0 KILL_LEVEL=3.5 tests=HTML_MESSAGE, THREAD_INDEX
X-Barracuda-Spam-Report: Code version 3.2, rules version 3.2.2.42077
	Rule breakdown below
	 pts rule name              description
	---- ---------------------- --------------------------------------------------
	0.01 THREAD_INDEX           thread-index: AcO7Y8iR61tzADqsRmmc5wNiFHEOig==
	0.00 HTML_MESSAGE           BODY: HTML included in message

------=_NextPart_000_0073_01CB5E6C.0318B1A0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Sorry about previous Email if it was delivered 'weird'; one is Ok, another
one is crazy, and there is difference between DEV and JAVA-USER in mail
delivery settings (HTML). but I can't find which one was wrong.


------=_NextPart_000_0073_01CB5E6C.0318B1A0--


From java-user-return-47341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 28 05:58:10 2010
Return-Path: <java-user-return-47341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99234 invoked from network); 28 Sep 2010 05:58:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Sep 2010 05:58:10 -0000
Received: (qmail 34736 invoked by uid 500); 28 Sep 2010 05:58:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33010 invoked by uid 500); 28 Sep 2010 05:58:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32421 invoked by uid 99); 28 Sep 2010 05:58:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 05:58:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 05:57:56 +0000
Received: by qwk3 with SMTP id 3so5148391qwk.35
        for <java-user@lucene.apache.org>; Mon, 27 Sep 2010 22:57:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=1IAFaR300e3Z+EAU8vyiHFgN3Oj5y+2TjDS288z5/D8=;
        b=BCjprHetRclx0EnITAqKSAslHa6o+Bi4rv+VPYZLJiHXrhunhWb5m8YLlcdzycd6b0
         K//9oCWFbWK+ad0VEUex/fA4mBwDnDjRFhQU1RmnoWPg+AZ9rUoSkItjc3NEUjX+zu84
         N+q20yozhhsZY7HMwiNAq9bneliK+5Za6IZx0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=j6j0f463/T7hvlEdCAYuAmFtfkHkqMdxjfWX2oVNQ2BzaKTaVP1TZ/eXChuAIArxou
         yxo5aCUDYHKoNYJFRSK7J6DxZpB5fYGLfEgtl8jy4YTc7ABHd6zNsccxYDkUIJ7R9yJU
         NlspmBrXeBpjTfUnAHmo6Z7AZA5kKmgC2cqqM=
Received: by 10.229.184.149 with SMTP id ck21mr6576676qcb.198.1285653455994;
 Mon, 27 Sep 2010 22:57:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.14.170 with HTTP; Mon, 27 Sep 2010 22:57:14 -0700 (PDT)
In-Reply-To: <F1AD6F6673633C4692F7689E42FF9AAA4214CF@ADAPA.ge-admin.ad.etat-ge.ch>
References: <F1AD6F6673633C4692F7689E42FF9AAA42138C@ADAPA.ge-admin.ad.etat-ge.ch>
 <AANLkTin5qr4Z5_GV=FuQ_N15ZdAaRVNPB0-QV4FeKbXN@mail.gmail.com> <F1AD6F6673633C4692F7689E42FF9AAA4214CF@ADAPA.ge-admin.ad.etat-ge.ch>
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
Date: Tue, 28 Sep 2010 08:57:14 +0300
Message-ID: <AANLkTinNczRbQAS7fUB=O_hUWprDX0L=Fm=4wug7Q6jC@mail.gmail.com>
Subject: Re: Questions about Lucene usage recommendations
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

You said you have 1000 fields...when performing search do you search
in all 1000 fields?
That could definitely be a major performance hit, as it translates to
a BooleanQuery with 1000 TermQueries inside

Maybe it make sense to concat data from fields that you search in
fewer fields (preferably ONE).
So basically your document will have 1000+1 field and search is
performed on that additional field, instead of 1000 fields.

But it depends on your usecase, adding title, author and book abstract
may make sense together..for the search usecase
On the other hand if you store number of pages, and release year it
doesn't make sense to mix something like "349", "1997" with title and
author.
It depends on how you are searching and what results do you
expect...but I hope you get the idea...


On Mon, Sep 27, 2010 at 18:41, Pawlak Michel (DCTI)
<michel.pawlak@etat.ge.ch> wrote:
> Hello,
>
> Thank you for your quick reply, I'll do my best to answer your remarks an=
d questions (I numbered them to make my mail more readable.) Unfortunately,=
 as I wrote, I have no access to the source code, and the company is not re=
ally willing to answer my questions (that's why we investigate)... so I can=
not be sure of what is really done.
>
> 1) yes 2.1.0 is really old that's why I'm wondering why the company provi=
ding the application didn't upgrade to a newer version, especially if it's =
"almost jar drop-in"
> 2) I mean that the application creates an index based on data stored in a=
 db and not in files (then the index is being used for the searches)
> 3) only documents being changed are reindexed, not the entire document ba=
se. Around 100-150 "documents" per day need to be reindexed.
> 4) no specific sorting is done by default (as far as I know...)
> 5+6) each "document" is small (each "document" is a technical description=
 of a book (not the book's content itself), made of ~1000 database fields, =
each of which weight a few Kbyte), no highlighting is done
> 7) IMHO the way lucene is being used is the bottleneck, not lucene itself=
. However I have no proof, as I do not have access to the code. What I know=
 is that as we have awfull performance issues and could not wait for a bett=
er solution, we've put the application on a high performance server, with a=
 USPV SAN, and the performance improved dramatically (dropped from 2.5 minu=
tes per search to around 10 seconds before optimization.) But we cannot aff=
ord such a solution in the long run (using such an high end server for such=
 a small application is a kind of joke). Currently, we observe read access =
peaks to the index file (up to 280 Mbyte/second) and performance improvemen=
ts when optimizing the index (see below)
> 8) We use no NFS, we're on a USPV SAN, but we were using physical HDD bef=
ore (slower than the SAN, but it's only part of the problem IMHO)
> 9-10) Thank you for the information
> 11) On the high end server, after we optimized the index the average sear=
ch time dropped from 10s to below 2s, now (after 2.5 weeks) the average sea=
rch time is 7s. Optimization seems required :-/
> 12) ok
>
> Regards,
>
> Michel
>
> -----Message d'origine-----
> De : Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Envoy=C3=A9 : lundi, 27. septembre 2010 14:53
> =C3=80 : java-user@lucene.apache.org
> Objet : Re: Questions about Lucene usage recommendations
>
> 1) Lucene 2.1 is really old...you should be able to migrate to lucene 2.9
> without changing your code (almost jar drop-in, but be careful on
> analyzers), and there could be huge improvements if you use lucene
> properly.
>
> Few questions:
> 2) - what does "all data to be indexed is stored in DB fields" mean? you
> should store in lucene everything you need, so on search time you
> shouldn't need to hit DB
> 3) - what does "indexing is done right after every modification" mean? do
> you index just the changed document? or reindex all 1.4 M docs?
> 4) do you sort on some field, or just basic relevance?
> 5) - how big is each document and what do you do with it? maybe
> highlighting on large documents causes this?
> 6) - what's in the document? if it's like a book...and almost every word
> matches every document...there could be some issues
> 7) - is the lucene the bottleneck? maybe you are calling from remote
> server and marshaling+network+unmarshaling is slow?
>
> Usual lucene patterns are (assuming that you moved to lucene 2.9):
> 8) - avoid using NFS (not necessary a performance bottleneck, and
> definitely not something to cause 2 minutes query, but just to be on
> the safe side)
> 9) - keep writer open and add documents to the index (no need to rebuild
> everything)
> 10) - keep your readers open and use reopen() once in a while (you may
> even go for realtime search if you want to)
> 11) - in your case, I don't think optimize will do any good, segments loo=
k
> good to me, don't worry about cfs file size
> 12) - there are ways to limit cfs files and play with setMaxXXX, but i
> don't think it's the cause of your 2 minute query.
>
> On Mon, Sep 27, 2010 at 14:35, Pawlak Michel (DCTI)
> <michel.pawlak@etat.ge.ch> wrote:
>> Hello,
>>
>> We have an application which is using lucene and we have strong
>> performance issues (on bad days, some searches take more than 2
>> minutes). I'm new to the Lucene component, thus I'm not sure Lucene is
>> correctly used and thus would like to have some information on lucene
>> usage recommendations. This would help locate the problem (application
>> code / lucene configuration / hardware / all) It would be great if a
>> project committer / specialist could answer those questions.
>>
>> First some facts about the application :
>> - Lucene version being used : 2.1.0 (february 2007...)
>> - around 1.4M "documents" to be indexed.
>> - Db size (all data to be indexed is stored in DB fields) : 3.5 GB
>> - Index file size on disk : 1.6 GB (note that one cfs file is 780M,
>> another one is 600M, the rest consists of smaller files)
>> - single indexer, multiple readers (6 readers)
>> - around 150 documents are modified per day
>> - indexing is done right after every modification
>> - simple searches can take ages (for instance searching for "chocolate"
>> could take for more than 2 minutes)
>> - I do not have access to source code (yes that's the funny part)
>>
>> My questions :
>> - Is this version of Lucene still supported ?
>> - What are the main reasons, if any, one should use the latest version
>> of lucene instead of 2.1.0 ? (for instance : performance, stability,
>> critical fixes, support, etc.) (the answer may sound obvious, but I
>> would like to have an official answer)
>> - Is there any recommendation concerning storage any Lucene user should
>> know (not benchmarks, but recommendations such as "better use physical
>> HDD", "do not use NFS if possible", "if your cfs files are greater than
>> XYZ, better use this kind of storage", "if you have more than XYZ
>> searches per second, better..." etc)
>> - Is there any recommandation concerning cfs file size ?
>> - Is there a way to limit the size of cfs files ?
>> - What is the impact on search performance if cfs file size is limited ?
>> - How often should optimization occur ? (every day, week, month ?)
>> - I saw that IndexWriter has methods such as setMaxFieldLength()
>> setMergeFactor() setMaxBufferedDocs() setMaxMergeDocs() Can you briefly
>> explain how these can affect performance ?
>> - Is there any other recommandation "dummies" should be informed of, and
>> every expert has to know ? For instance as a list of lucene patterns /
>> anti patterns which may affect performance.
>>
>> If my questions are not precise enough, do not hesitate to ask for
>> details. If you see an obvious problem do not hesitate to tell me.
>>
>> A big thank you in advance for your help,
>>
>> Best regards,
>>
>> Michel
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 28 06:18:40 2010
Return-Path: <java-user-return-47342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8925 invoked from network); 28 Sep 2010 06:18:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Sep 2010 06:18:40 -0000
Received: (qmail 55606 invoked by uid 500); 28 Sep 2010 06:18:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55366 invoked by uid 500); 28 Sep 2010 06:18:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55358 invoked by uid 99); 28 Sep 2010 06:18:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 06:18:33 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 06:18:27 +0000
Received: by iwn40 with SMTP id 40so529163iwn.35
        for <java-user@lucene.apache.org>; Mon, 27 Sep 2010 23:18:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.32.135 with SMTP id c7mr10350242ibd.3.1285654684036; Mon,
 27 Sep 2010 23:18:04 -0700 (PDT)
Received: by 10.231.176.17 with HTTP; Mon, 27 Sep 2010 23:18:03 -0700 (PDT)
In-Reply-To: <004301cb5d9e$91a5cfd0$b4f16f70$@thetaphi.de>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
	<001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
	<AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
	<004301cb5d9e$91a5cfd0$b4f16f70$@thetaphi.de>
Date: Tue, 28 Sep 2010 13:18:03 +0700
Message-ID: <AANLkTim7qCKop6=P1n=Cq=ZMWUbuoJy5aGMZ3bfExYX9@mail.gmail.com>
Subject: Re: flushing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On 9/27/10, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>
> Yes. You must close before, else the addIndexes call will do nothing, as the
> index looks empty for the addIndexes() call (because no committed segments
> are available in the ramDir).
>
> I don't understand what you mean with flushing? If you are working on Lucene
> 2.9 or 3.0, the ramWriter is flushed to the RAMDir on close. The addIndexes
> call will add the index to the on-disk writer. To flush that fsWriter (flush
> is the wrong thing, you probably mean commit), simply call fsWriter.commit()
> so the newly added segments are written to disk and IndexReaders opened in
> parallel "see" the new segments.
>
> Btw: If you are working on Lucene 3.0, the addIndexes call does not need the
> new Directory[] {}, as the method is Java 5 varargs now.
>
> Uwe
>
>

I mean I need to flush the index periodically.that's mean that the
index will be regularly updated as the document being added.what do
you reckon is the solution for this? I need a sample source code to be
able to flush an index.

ok just like this source code below.

public class SimpleFileIndexer {
	
	public static void main(String[] args) throws Exception {
		
		File indexDir = new
File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
		File dataDir = new
File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
		String suffix = "txt";
		
		SimpleFileIndexer indexer = new SimpleFileIndexer();
		
		int numIndex = indexer.index(indexDir, dataDir, suffix);
		
		System.out.println("Total files indexed " + numIndex);
		
	}
	
	private int index(File indexDir, File dataDir, String suffix) throws
Exception {
		
		IndexWriter indexWriter = new IndexWriter(
				FSDirectory.open(indexDir),
				new SimpleAnalyzer(),
				true,
				IndexWriter.MaxFieldLength.LIMITED);
		indexWriter.setUseCompoundFile(false);
		
		indexDirectory(indexWriter, dataDir, suffix);
		
		int numIndexed = indexWriter.maxDoc();
		indexWriter.optimize();
		indexWriter.close();
		
		return numIndexed;
		
	}
	
	private void indexDirectory(IndexWriter indexWriter, File dataDir,
String suffix) throws IOException {
		File[] files = dataDir.listFiles();
		for (int i = 0; i < files.length; i++) {
			File f = files[i];
			if (f.isDirectory()) {
				indexDirectory(indexWriter, f, suffix);
			}
			else {
				indexFileWithIndexWriter(indexWriter, f, suffix);
			}
		}
	}
	
	private void indexFileWithIndexWriter(IndexWriter indexWriter, File
f, String suffix) throws IOException {
		if (f.isHidden() || f.isDirectory() || !f.canRead() || !f.exists()) {
			return;
		}
		if (suffix!=null && !f.getName().endsWith(suffix)) {
			return;
		}
		System.out.println("Indexing file " + f.getCanonicalPath());
		
		Document doc = new Document();
		doc.add(new Field("contents", new FileReader(f)));		
		doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
Field.Index.ANALYZED));
		
		indexWriter.addDocument(doc);
	}

}


the above source code can index documents when given the directory of
text files. now what I am asking is how can I made the code to run
continuously? what class should I use? so that everytime there is new
documents added to that directory then lucene will index those
documents automatically, can you help me out on this one. I really
need to know what is the best solution.

thanks
-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 28 08:07:52 2010
Return-Path: <java-user-return-47343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47716 invoked from network); 28 Sep 2010 08:07:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Sep 2010 08:07:52 -0000
Received: (qmail 63511 invoked by uid 500); 28 Sep 2010 08:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62980 invoked by uid 500); 28 Sep 2010 08:07:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62969 invoked by uid 99); 28 Sep 2010 08:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 08:07:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [160.53.250.157] (HELO mxsmtp1.etat-ge.ch) (160.53.250.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 08:07:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by mxsmtp1.etat-ge.ch (Postfix) with ESMTP id 54DA7F0096
	for <java-user@lucene.apache.org>; Tue, 28 Sep 2010 10:07:17 +0200 (CEST)
X-Virus-Scanned: Clean
Received: from mxsmtp1.etat-ge.ch ([127.0.0.1])
	by localhost (mxsmtp1.etat-ge.ch [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id B8mDEhF4YIRW for <java-user@lucene.apache.org>;
	Tue, 28 Sep 2010 10:07:17 +0200 (CEST)
Received: from goeland.ge-admin.ad.etat-ge.ch (goeland.ge-admin.ad.etat-ge.ch [10.139.36.81])
	by mxsmtp1.etat-ge.ch (Postfix) with ESMTP id 2F962F00A7
	for <java-user@lucene.apache.org>; Tue, 28 Sep 2010 10:07:17 +0200 (CEST)
Received: from ADAPA.ge-admin.ad.etat-ge.ch ([10.139.36.72]) by goeland.ge-admin.ad.etat-ge.ch with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 28 Sep 2010 10:07:14 +0200
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Questions about Lucene usage recommendations
Date: Tue, 28 Sep 2010 10:06:50 +0200
Message-ID: <F1AD6F6673633C4692F7689E42FF9AAA4215AE@ADAPA.ge-admin.ad.etat-ge.ch>
In-Reply-To: <AANLkTinNczRbQAS7fUB=O_hUWprDX0L=Fm=4wug7Q6jC@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Questions about Lucene usage recommendations
Thread-Index: Acte0iHwYnmKa5/FTFy/owjvYf4lowACCg/w
References: <F1AD6F6673633C4692F7689E42FF9AAA42138C@ADAPA.ge-admin.ad.etat-ge.ch> <AANLkTin5qr4Z5_GV=FuQ_N15ZdAaRVNPB0-QV4FeKbXN@mail.gmail.com> <F1AD6F6673633C4692F7689E42FF9AAA4214CF@ADAPA.ge-admin.ad.etat-ge.ch> <AANLkTinNczRbQAS7fUB=O_hUWprDX0L=Fm=4wug7Q6jC@mail.gmail.com>
From: "Pawlak Michel (DCTI)" <michel.pawlak@etat.ge.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Sep 2010 08:07:14.0160 (UTC) FILETIME=[28E14F00:01CB5EE4]

SGVsbG8sDQoNCkkgKmhvcGUqIHRoZXkgZG8gaXQgdGhpcyB3YXksIEknbGwgaGF2ZSB0byBjaGVj
ayBpdC4gVGhlIG51bWJlciBvZiBmaWVsZHMgY2Fubm90IGJlIG1hZGUgc21hbGxlciBhcyBpdCBo
YXMgdG8gcmVzcGVjdCBhbiBleGlzdGluZyBzdGFuZGFyZCwgcmVnYXJkIHRvIHdoYXQgeW91IGV4
cGxhaW4sIHNlYXJjaGluZyBjb25jYXRlbmVkIGZpZWxkcyBzZWVtcyB0byBiZSBhIHNtYXJ0IHdh
eSB0byBkbyBpdC4gVGhhbmsgeW91IGZvciB0aGUgdGlwLg0KDQpNaWNoZWwNCg0KDQpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQpNaWNoZWwgUGF3
bGFrDQpBcmNoaXRlY3RlIFNvbHV0aW9uDQoNCkNlbnRyZSBkZXMgVGVjaG5vbG9naWVzIGRlIGwn
SW5mb3JtYXRpb24gKENUSSkNClNlcnZpY2UgQXJjaGl0ZWN0dXJlIGV0IENvbXBvc2FudHMgVHJh
bnN2ZXJzYXV4IChBQ1QpDQpDYXNlIHBvc3RhbGUgMjI4NSAtIDY0LTY2LCBydWUgZHUgR3JhbmQg
UHLDqSAtIDEyMTEgR2Vuw6h2ZSAyDQpUw6lsLiBkaXJlY3QgOiArNDEgKDApMjIgMzg4IDAwIDk1
DQptaWNoZWwucGF3bGFrQGV0YXQuZ2UuY2gNCg0KDQotLS0tLU1lc3NhZ2UgZCdvcmlnaW5lLS0t
LS0NCkRlIDogRGFuaWwgxaJPUklOIFttYWlsdG86dG9yaW5kYW5AZ21haWwuY29tXSANCkVudm95
w6kgOiBtYXJkaSwgMjguIHNlcHRlbWJyZSAyMDEwIDA3OjU3DQrDgCA6IGphdmEtdXNlckBsdWNl
bmUuYXBhY2hlLm9yZw0KT2JqZXQgOiBSZTogUXVlc3Rpb25zIGFib3V0IEx1Y2VuZSB1c2FnZSBy
ZWNvbW1lbmRhdGlvbnMNCg0KWW91IHNhaWQgeW91IGhhdmUgMTAwMCBmaWVsZHMuLi53aGVuIHBl
cmZvcm1pbmcgc2VhcmNoIGRvIHlvdSBzZWFyY2gNCmluIGFsbCAxMDAwIGZpZWxkcz8NClRoYXQg
Y291bGQgZGVmaW5pdGVseSBiZSBhIG1ham9yIHBlcmZvcm1hbmNlIGhpdCwgYXMgaXQgdHJhbnNs
YXRlcyB0bw0KYSBCb29sZWFuUXVlcnkgd2l0aCAxMDAwIFRlcm1RdWVyaWVzIGluc2lkZQ0KDQpN
YXliZSBpdCBtYWtlIHNlbnNlIHRvIGNvbmNhdCBkYXRhIGZyb20gZmllbGRzIHRoYXQgeW91IHNl
YXJjaCBpbg0KZmV3ZXIgZmllbGRzIChwcmVmZXJhYmx5IE9ORSkuDQpTbyBiYXNpY2FsbHkgeW91
ciBkb2N1bWVudCB3aWxsIGhhdmUgMTAwMCsxIGZpZWxkIGFuZCBzZWFyY2ggaXMNCnBlcmZvcm1l
ZCBvbiB0aGF0IGFkZGl0aW9uYWwgZmllbGQsIGluc3RlYWQgb2YgMTAwMCBmaWVsZHMuDQoNCkJ1
dCBpdCBkZXBlbmRzIG9uIHlvdXIgdXNlY2FzZSwgYWRkaW5nIHRpdGxlLCBhdXRob3IgYW5kIGJv
b2sgYWJzdHJhY3QNCm1heSBtYWtlIHNlbnNlIHRvZ2V0aGVyLi5mb3IgdGhlIHNlYXJjaCB1c2Vj
YXNlDQpPbiB0aGUgb3RoZXIgaGFuZCBpZiB5b3Ugc3RvcmUgbnVtYmVyIG9mIHBhZ2VzLCBhbmQg
cmVsZWFzZSB5ZWFyIGl0DQpkb2Vzbid0IG1ha2Ugc2Vuc2UgdG8gbWl4IHNvbWV0aGluZyBsaWtl
ICIzNDkiLCAiMTk5NyIgd2l0aCB0aXRsZSBhbmQNCmF1dGhvci4NCkl0IGRlcGVuZHMgb24gaG93
IHlvdSBhcmUgc2VhcmNoaW5nIGFuZCB3aGF0IHJlc3VsdHMgZG8geW91DQpleHBlY3QuLi5idXQg
SSBob3BlIHlvdSBnZXQgdGhlIGlkZWEuLi4NCg0KDQpPbiBNb24sIFNlcCAyNywgMjAxMCBhdCAx
ODo0MSwgUGF3bGFrIE1pY2hlbCAoRENUSSkNCjxtaWNoZWwucGF3bGFrQGV0YXQuZ2UuY2g+IHdy
b3RlOg0KPiBIZWxsbywNCj4NCj4gVGhhbmsgeW91IGZvciB5b3VyIHF1aWNrIHJlcGx5LCBJJ2xs
IGRvIG15IGJlc3QgdG8gYW5zd2VyIHlvdXIgcmVtYXJrcyBhbmQgcXVlc3Rpb25zIChJIG51bWJl
cmVkIHRoZW0gdG8gbWFrZSBteSBtYWlsIG1vcmUgcmVhZGFibGUuKSBVbmZvcnR1bmF0ZWx5LCBh
cyBJIHdyb3RlLCBJIGhhdmUgbm8gYWNjZXNzIHRvIHRoZSBzb3VyY2UgY29kZSwgYW5kIHRoZSBj
b21wYW55IGlzIG5vdCByZWFsbHkgd2lsbGluZyB0byBhbnN3ZXIgbXkgcXVlc3Rpb25zICh0aGF0
J3Mgd2h5IHdlIGludmVzdGlnYXRlKS4uLiBzbyBJIGNhbm5vdCBiZSBzdXJlIG9mIHdoYXQgaXMg
cmVhbGx5IGRvbmUuDQo+DQo+IDEpIHllcyAyLjEuMCBpcyByZWFsbHkgb2xkIHRoYXQncyB3aHkg
SSdtIHdvbmRlcmluZyB3aHkgdGhlIGNvbXBhbnkgcHJvdmlkaW5nIHRoZSBhcHBsaWNhdGlvbiBk
aWRuJ3QgdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24sIGVzcGVjaWFsbHkgaWYgaXQncyAiYWxt
b3N0IGphciBkcm9wLWluIg0KPiAyKSBJIG1lYW4gdGhhdCB0aGUgYXBwbGljYXRpb24gY3JlYXRl
cyBhbiBpbmRleCBiYXNlZCBvbiBkYXRhIHN0b3JlZCBpbiBhIGRiIGFuZCBub3QgaW4gZmlsZXMg
KHRoZW4gdGhlIGluZGV4IGlzIGJlaW5nIHVzZWQgZm9yIHRoZSBzZWFyY2hlcykNCj4gMykgb25s
eSBkb2N1bWVudHMgYmVpbmcgY2hhbmdlZCBhcmUgcmVpbmRleGVkLCBub3QgdGhlIGVudGlyZSBk
b2N1bWVudCBiYXNlLiBBcm91bmQgMTAwLTE1MCAiZG9jdW1lbnRzIiBwZXIgZGF5IG5lZWQgdG8g
YmUgcmVpbmRleGVkLg0KPiA0KSBubyBzcGVjaWZpYyBzb3J0aW5nIGlzIGRvbmUgYnkgZGVmYXVs
dCAoYXMgZmFyIGFzIEkga25vdy4uLikNCj4gNSs2KSBlYWNoICJkb2N1bWVudCIgaXMgc21hbGwg
KGVhY2ggImRvY3VtZW50IiBpcyBhIHRlY2huaWNhbCBkZXNjcmlwdGlvbiBvZiBhIGJvb2sgKG5v
dCB0aGUgYm9vaydzIGNvbnRlbnQgaXRzZWxmKSwgbWFkZSBvZiB+MTAwMCBkYXRhYmFzZSBmaWVs
ZHMsIGVhY2ggb2Ygd2hpY2ggd2VpZ2h0IGEgZmV3IEtieXRlKSwgbm8gaGlnaGxpZ2h0aW5nIGlz
IGRvbmUNCj4gNykgSU1ITyB0aGUgd2F5IGx1Y2VuZSBpcyBiZWluZyB1c2VkIGlzIHRoZSBib3R0
bGVuZWNrLCBub3QgbHVjZW5lIGl0c2VsZi4gSG93ZXZlciBJIGhhdmUgbm8gcHJvb2YsIGFzIEkg
ZG8gbm90IGhhdmUgYWNjZXNzIHRvIHRoZSBjb2RlLiBXaGF0IEkga25vdyBpcyB0aGF0IGFzIHdl
IGhhdmUgYXdmdWxsIHBlcmZvcm1hbmNlIGlzc3VlcyBhbmQgY291bGQgbm90IHdhaXQgZm9yIGEg
YmV0dGVyIHNvbHV0aW9uLCB3ZSd2ZSBwdXQgdGhlIGFwcGxpY2F0aW9uIG9uIGEgaGlnaCBwZXJm
b3JtYW5jZSBzZXJ2ZXIsIHdpdGggYSBVU1BWIFNBTiwgYW5kIHRoZSBwZXJmb3JtYW5jZSBpbXBy
b3ZlZCBkcmFtYXRpY2FsbHkgKGRyb3BwZWQgZnJvbSAyLjUgbWludXRlcyBwZXIgc2VhcmNoIHRv
IGFyb3VuZCAxMCBzZWNvbmRzIGJlZm9yZSBvcHRpbWl6YXRpb24uKSBCdXQgd2UgY2Fubm90IGFm
Zm9yZCBzdWNoIGEgc29sdXRpb24gaW4gdGhlIGxvbmcgcnVuICh1c2luZyBzdWNoIGFuIGhpZ2gg
ZW5kIHNlcnZlciBmb3Igc3VjaCBhIHNtYWxsIGFwcGxpY2F0aW9uIGlzIGEga2luZCBvZiBqb2tl
KS4gQ3VycmVudGx5LCB3ZSBvYnNlcnZlIHJlYWQgYWNjZXNzIHBlYWtzIHRvIHRoZSBpbmRleCBm
aWxlICh1cCB0byAyODAgTWJ5dGUvc2Vjb25kKSBhbmQgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRz
IHdoZW4gb3B0aW1pemluZyB0aGUgaW5kZXggKHNlZSBiZWxvdykNCj4gOCkgV2UgdXNlIG5vIE5G
Uywgd2UncmUgb24gYSBVU1BWIFNBTiwgYnV0IHdlIHdlcmUgdXNpbmcgcGh5c2ljYWwgSEREIGJl
Zm9yZSAoc2xvd2VyIHRoYW4gdGhlIFNBTiwgYnV0IGl0J3Mgb25seSBwYXJ0IG9mIHRoZSBwcm9i
bGVtIElNSE8pDQo+IDktMTApIFRoYW5rIHlvdSBmb3IgdGhlIGluZm9ybWF0aW9uDQo+IDExKSBP
biB0aGUgaGlnaCBlbmQgc2VydmVyLCBhZnRlciB3ZSBvcHRpbWl6ZWQgdGhlIGluZGV4IHRoZSBh
dmVyYWdlIHNlYXJjaCB0aW1lIGRyb3BwZWQgZnJvbSAxMHMgdG8gYmVsb3cgMnMsIG5vdyAoYWZ0
ZXIgMi41IHdlZWtzKSB0aGUgYXZlcmFnZSBzZWFyY2ggdGltZSBpcyA3cy4gT3B0aW1pemF0aW9u
IHNlZW1zIHJlcXVpcmVkIDotLw0KPiAxMikgb2sNCj4NCj4gUmVnYXJkcywNCj4NCj4gTWljaGVs
DQo+DQo+IC0tLS0tTWVzc2FnZSBkJ29yaWdpbmUtLS0tLQ0KPiBEZSA6IERhbmlsIMWiT1JJTiBb
bWFpbHRvOnRvcmluZGFuQGdtYWlsLmNvbV0NCj4gRW52b3nDqSA6IGx1bmRpLCAyNy4gc2VwdGVt
YnJlIDIwMTAgMTQ6NTMNCj4gw4AgOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gT2Jq
ZXQgOiBSZTogUXVlc3Rpb25zIGFib3V0IEx1Y2VuZSB1c2FnZSByZWNvbW1lbmRhdGlvbnMNCj4N
Cj4gMSkgTHVjZW5lIDIuMSBpcyByZWFsbHkgb2xkLi4ueW91IHNob3VsZCBiZSBhYmxlIHRvIG1p
Z3JhdGUgdG8gbHVjZW5lIDIuOQ0KPiB3aXRob3V0IGNoYW5naW5nIHlvdXIgY29kZSAoYWxtb3N0
IGphciBkcm9wLWluLCBidXQgYmUgY2FyZWZ1bCBvbg0KPiBhbmFseXplcnMpLCBhbmQgdGhlcmUg
Y291bGQgYmUgaHVnZSBpbXByb3ZlbWVudHMgaWYgeW91IHVzZSBsdWNlbmUNCj4gcHJvcGVybHku
DQo+DQo+IEZldyBxdWVzdGlvbnM6DQo+IDIpIC0gd2hhdCBkb2VzICJhbGwgZGF0YSB0byBiZSBp
bmRleGVkIGlzIHN0b3JlZCBpbiBEQiBmaWVsZHMiIG1lYW4/IHlvdQ0KPiBzaG91bGQgc3RvcmUg
aW4gbHVjZW5lIGV2ZXJ5dGhpbmcgeW91IG5lZWQsIHNvIG9uIHNlYXJjaCB0aW1lIHlvdQ0KPiBz
aG91bGRuJ3QgbmVlZCB0byBoaXQgREINCj4gMykgLSB3aGF0IGRvZXMgImluZGV4aW5nIGlzIGRv
bmUgcmlnaHQgYWZ0ZXIgZXZlcnkgbW9kaWZpY2F0aW9uIiBtZWFuPyBkbw0KPiB5b3UgaW5kZXgg
anVzdCB0aGUgY2hhbmdlZCBkb2N1bWVudD8gb3IgcmVpbmRleCBhbGwgMS40IE0gZG9jcz8NCj4g
NCkgZG8geW91IHNvcnQgb24gc29tZSBmaWVsZCwgb3IganVzdCBiYXNpYyByZWxldmFuY2U/DQo+
IDUpIC0gaG93IGJpZyBpcyBlYWNoIGRvY3VtZW50IGFuZCB3aGF0IGRvIHlvdSBkbyB3aXRoIGl0
PyBtYXliZQ0KPiBoaWdobGlnaHRpbmcgb24gbGFyZ2UgZG9jdW1lbnRzIGNhdXNlcyB0aGlzPw0K
PiA2KSAtIHdoYXQncyBpbiB0aGUgZG9jdW1lbnQ/IGlmIGl0J3MgbGlrZSBhIGJvb2suLi5hbmQg
YWxtb3N0IGV2ZXJ5IHdvcmQNCj4gbWF0Y2hlcyBldmVyeSBkb2N1bWVudC4uLnRoZXJlIGNvdWxk
IGJlIHNvbWUgaXNzdWVzDQo+IDcpIC0gaXMgdGhlIGx1Y2VuZSB0aGUgYm90dGxlbmVjaz8gbWF5
YmUgeW91IGFyZSBjYWxsaW5nIGZyb20gcmVtb3RlDQo+IHNlcnZlciBhbmQgbWFyc2hhbGluZytu
ZXR3b3JrK3VubWFyc2hhbGluZyBpcyBzbG93Pw0KPg0KPiBVc3VhbCBsdWNlbmUgcGF0dGVybnMg
YXJlIChhc3N1bWluZyB0aGF0IHlvdSBtb3ZlZCB0byBsdWNlbmUgMi45KToNCj4gOCkgLSBhdm9p
ZCB1c2luZyBORlMgKG5vdCBuZWNlc3NhcnkgYSBwZXJmb3JtYW5jZSBib3R0bGVuZWNrLCBhbmQN
Cj4gZGVmaW5pdGVseSBub3Qgc29tZXRoaW5nIHRvIGNhdXNlIDIgbWludXRlcyBxdWVyeSwgYnV0
IGp1c3QgdG8gYmUgb24NCj4gdGhlIHNhZmUgc2lkZSkNCj4gOSkgLSBrZWVwIHdyaXRlciBvcGVu
IGFuZCBhZGQgZG9jdW1lbnRzIHRvIHRoZSBpbmRleCAobm8gbmVlZCB0byByZWJ1aWxkDQo+IGV2
ZXJ5dGhpbmcpDQo+IDEwKSAtIGtlZXAgeW91ciByZWFkZXJzIG9wZW4gYW5kIHVzZSByZW9wZW4o
KSBvbmNlIGluIGEgd2hpbGUgKHlvdSBtYXkNCj4gZXZlbiBnbyBmb3IgcmVhbHRpbWUgc2VhcmNo
IGlmIHlvdSB3YW50IHRvKQ0KPiAxMSkgLSBpbiB5b3VyIGNhc2UsIEkgZG9uJ3QgdGhpbmsgb3B0
aW1pemUgd2lsbCBkbyBhbnkgZ29vZCwgc2VnbWVudHMgbG9vaw0KPiBnb29kIHRvIG1lLCBkb24n
dCB3b3JyeSBhYm91dCBjZnMgZmlsZSBzaXplDQo+IDEyKSAtIHRoZXJlIGFyZSB3YXlzIHRvIGxp
bWl0IGNmcyBmaWxlcyBhbmQgcGxheSB3aXRoIHNldE1heFhYWCwgYnV0IGkNCj4gZG9uJ3QgdGhp
bmsgaXQncyB0aGUgY2F1c2Ugb2YgeW91ciAyIG1pbnV0ZSBxdWVyeS4NCj4NCj4gT24gTW9uLCBT
ZXAgMjcsIDIwMTAgYXQgMTQ6MzUsIFBhd2xhayBNaWNoZWwgKERDVEkpDQo+IDxtaWNoZWwucGF3
bGFrQGV0YXQuZ2UuY2g+IHdyb3RlOg0KPj4gSGVsbG8sDQo+Pg0KPj4gV2UgaGF2ZSBhbiBhcHBs
aWNhdGlvbiB3aGljaCBpcyB1c2luZyBsdWNlbmUgYW5kIHdlIGhhdmUgc3Ryb25nDQo+PiBwZXJm
b3JtYW5jZSBpc3N1ZXMgKG9uIGJhZCBkYXlzLCBzb21lIHNlYXJjaGVzIHRha2UgbW9yZSB0aGFu
IDINCj4+IG1pbnV0ZXMpLiBJJ20gbmV3IHRvIHRoZSBMdWNlbmUgY29tcG9uZW50LCB0aHVzIEkn
bSBub3Qgc3VyZSBMdWNlbmUgaXMNCj4+IGNvcnJlY3RseSB1c2VkIGFuZCB0aHVzIHdvdWxkIGxp
a2UgdG8gaGF2ZSBzb21lIGluZm9ybWF0aW9uIG9uIGx1Y2VuZQ0KPj4gdXNhZ2UgcmVjb21tZW5k
YXRpb25zLiBUaGlzIHdvdWxkIGhlbHAgbG9jYXRlIHRoZSBwcm9ibGVtIChhcHBsaWNhdGlvbg0K
Pj4gY29kZSAvIGx1Y2VuZSBjb25maWd1cmF0aW9uIC8gaGFyZHdhcmUgLyBhbGwpIEl0IHdvdWxk
IGJlIGdyZWF0IGlmIGENCj4+IHByb2plY3QgY29tbWl0dGVyIC8gc3BlY2lhbGlzdCBjb3VsZCBh
bnN3ZXIgdGhvc2UgcXVlc3Rpb25zLg0KPj4NCj4+IEZpcnN0IHNvbWUgZmFjdHMgYWJvdXQgdGhl
IGFwcGxpY2F0aW9uIDoNCj4+IC0gTHVjZW5lIHZlcnNpb24gYmVpbmcgdXNlZCA6IDIuMS4wIChm
ZWJydWFyeSAyMDA3Li4uKQ0KPj4gLSBhcm91bmQgMS40TSAiZG9jdW1lbnRzIiB0byBiZSBpbmRl
eGVkLg0KPj4gLSBEYiBzaXplIChhbGwgZGF0YSB0byBiZSBpbmRleGVkIGlzIHN0b3JlZCBpbiBE
QiBmaWVsZHMpIDogMy41IEdCDQo+PiAtIEluZGV4IGZpbGUgc2l6ZSBvbiBkaXNrIDogMS42IEdC
IChub3RlIHRoYXQgb25lIGNmcyBmaWxlIGlzIDc4ME0sDQo+PiBhbm90aGVyIG9uZSBpcyA2MDBN
LCB0aGUgcmVzdCBjb25zaXN0cyBvZiBzbWFsbGVyIGZpbGVzKQ0KPj4gLSBzaW5nbGUgaW5kZXhl
ciwgbXVsdGlwbGUgcmVhZGVycyAoNiByZWFkZXJzKQ0KPj4gLSBhcm91bmQgMTUwIGRvY3VtZW50
cyBhcmUgbW9kaWZpZWQgcGVyIGRheQ0KPj4gLSBpbmRleGluZyBpcyBkb25lIHJpZ2h0IGFmdGVy
IGV2ZXJ5IG1vZGlmaWNhdGlvbg0KPj4gLSBzaW1wbGUgc2VhcmNoZXMgY2FuIHRha2UgYWdlcyAo
Zm9yIGluc3RhbmNlIHNlYXJjaGluZyBmb3IgImNob2NvbGF0ZSINCj4+IGNvdWxkIHRha2UgZm9y
IG1vcmUgdGhhbiAyIG1pbnV0ZXMpDQo+PiAtIEkgZG8gbm90IGhhdmUgYWNjZXNzIHRvIHNvdXJj
ZSBjb2RlICh5ZXMgdGhhdCdzIHRoZSBmdW5ueSBwYXJ0KQ0KPj4NCj4+IE15IHF1ZXN0aW9ucyA6
DQo+PiAtIElzIHRoaXMgdmVyc2lvbiBvZiBMdWNlbmUgc3RpbGwgc3VwcG9ydGVkID8NCj4+IC0g
V2hhdCBhcmUgdGhlIG1haW4gcmVhc29ucywgaWYgYW55LCBvbmUgc2hvdWxkIHVzZSB0aGUgbGF0
ZXN0IHZlcnNpb24NCj4+IG9mIGx1Y2VuZSBpbnN0ZWFkIG9mIDIuMS4wID8gKGZvciBpbnN0YW5j
ZSA6IHBlcmZvcm1hbmNlLCBzdGFiaWxpdHksDQo+PiBjcml0aWNhbCBmaXhlcywgc3VwcG9ydCwg
ZXRjLikgKHRoZSBhbnN3ZXIgbWF5IHNvdW5kIG9idmlvdXMsIGJ1dCBJDQo+PiB3b3VsZCBsaWtl
IHRvIGhhdmUgYW4gb2ZmaWNpYWwgYW5zd2VyKQ0KPj4gLSBJcyB0aGVyZSBhbnkgcmVjb21tZW5k
YXRpb24gY29uY2VybmluZyBzdG9yYWdlIGFueSBMdWNlbmUgdXNlciBzaG91bGQNCj4+IGtub3cg
KG5vdCBiZW5jaG1hcmtzLCBidXQgcmVjb21tZW5kYXRpb25zIHN1Y2ggYXMgImJldHRlciB1c2Ug
cGh5c2ljYWwNCj4+IEhERCIsICJkbyBub3QgdXNlIE5GUyBpZiBwb3NzaWJsZSIsICJpZiB5b3Vy
IGNmcyBmaWxlcyBhcmUgZ3JlYXRlciB0aGFuDQo+PiBYWVosIGJldHRlciB1c2UgdGhpcyBraW5k
IG9mIHN0b3JhZ2UiLCAiaWYgeW91IGhhdmUgbW9yZSB0aGFuIFhZWg0KPj4gc2VhcmNoZXMgcGVy
IHNlY29uZCwgYmV0dGVyLi4uIiBldGMpDQo+PiAtIElzIHRoZXJlIGFueSByZWNvbW1hbmRhdGlv
biBjb25jZXJuaW5nIGNmcyBmaWxlIHNpemUgPw0KPj4gLSBJcyB0aGVyZSBhIHdheSB0byBsaW1p
dCB0aGUgc2l6ZSBvZiBjZnMgZmlsZXMgPw0KPj4gLSBXaGF0IGlzIHRoZSBpbXBhY3Qgb24gc2Vh
cmNoIHBlcmZvcm1hbmNlIGlmIGNmcyBmaWxlIHNpemUgaXMgbGltaXRlZCA/DQo+PiAtIEhvdyBv
ZnRlbiBzaG91bGQgb3B0aW1pemF0aW9uIG9jY3VyID8gKGV2ZXJ5IGRheSwgd2VlaywgbW9udGgg
PykNCj4+IC0gSSBzYXcgdGhhdCBJbmRleFdyaXRlciBoYXMgbWV0aG9kcyBzdWNoIGFzIHNldE1h
eEZpZWxkTGVuZ3RoKCkNCj4+IHNldE1lcmdlRmFjdG9yKCkgc2V0TWF4QnVmZmVyZWREb2NzKCkg
c2V0TWF4TWVyZ2VEb2NzKCkgQ2FuIHlvdSBicmllZmx5DQo+PiBleHBsYWluIGhvdyB0aGVzZSBj
YW4gYWZmZWN0IHBlcmZvcm1hbmNlID8NCj4+IC0gSXMgdGhlcmUgYW55IG90aGVyIHJlY29tbWFu
ZGF0aW9uICJkdW1taWVzIiBzaG91bGQgYmUgaW5mb3JtZWQgb2YsIGFuZA0KPj4gZXZlcnkgZXhw
ZXJ0IGhhcyB0byBrbm93ID8gRm9yIGluc3RhbmNlIGFzIGEgbGlzdCBvZiBsdWNlbmUgcGF0dGVy
bnMgLw0KPj4gYW50aSBwYXR0ZXJucyB3aGljaCBtYXkgYWZmZWN0IHBlcmZvcm1hbmNlLg0KPj4N
Cj4+IElmIG15IHF1ZXN0aW9ucyBhcmUgbm90IHByZWNpc2UgZW5vdWdoLCBkbyBub3QgaGVzaXRh
dGUgdG8gYXNrIGZvcg0KPj4gZGV0YWlscy4gSWYgeW91IHNlZSBhbiBvYnZpb3VzIHByb2JsZW0g
ZG8gbm90IGhlc2l0YXRlIHRvIHRlbGwgbWUuDQo+Pg0KPj4gQSBiaWcgdGhhbmsgeW91IGluIGFk
dmFuY2UgZm9yIHlvdXIgaGVscCwNCj4+DQo+PiBCZXN0IHJlZ2FyZHMsDQo+Pg0KPj4gTWljaGVs
DQo+Pg0KPj4NCj4+DQo+DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4N
Cj4NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1h
aWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-47344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 28 12:51:24 2010
Return-Path: <java-user-return-47344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38409 invoked from network); 28 Sep 2010 12:51:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Sep 2010 12:51:24 -0000
Received: (qmail 1847 invoked by uid 500); 28 Sep 2010 12:51:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1420 invoked by uid 500); 28 Sep 2010 12:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1375 invoked by uid 99); 28 Sep 2010 12:51:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 12:51:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 12:51:12 +0000
Received: by qyk36 with SMTP id 36so2829272qyk.14
        for <java-user@lucene.apache.org>; Tue, 28 Sep 2010 05:50:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=gGVqQtk3C78eyNo/duOHndHDMA/Zae9p49myCiqIegw=;
        b=d15wWSgQBfOPsa1m4CmdMG4HVMqoWmxtog6yjbfKduYpQuMWuhtJko3dGU+hYL5iYv
         CMUTcQ4lqzZhbr5S1abLbLtynrWwkjRTwCDBaAnoWIoHn6zewNQnJ2cSi5kSOnqH6Klv
         6IhqAPOLv5Y7/u1UfmPn+5oqRp3EUG3Bi/pEg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Qwz3kzUP1hF4zZdckRMPIcS3qZAlWre775eCu53VzlqhWaw7wbpudOjKGlqvq7JPj5
         JDmAz9lOqqCgbqWnXa9rmetDXipvV8dPkV2zImnaXhqKkiayD8Gq28AqZiWUVs+wZang
         tbeCOPPCtgAOWU3SwJgqvki6D5rqGrE0vExcs=
MIME-Version: 1.0
Received: by 10.224.47.4 with SMTP id l4mr6832927qaf.157.1285678251870; Tue,
 28 Sep 2010 05:50:51 -0700 (PDT)
Received: by 10.229.232.19 with HTTP; Tue, 28 Sep 2010 05:50:51 -0700 (PDT)
In-Reply-To: <AANLkTim7qCKop6=P1n=Cq=ZMWUbuoJy5aGMZ3bfExYX9@mail.gmail.com>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
	<001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
	<AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
	<004301cb5d9e$91a5cfd0$b4f16f70$@thetaphi.de>
	<AANLkTim7qCKop6=P1n=Cq=ZMWUbuoJy5aGMZ3bfExYX9@mail.gmail.com>
Date: Tue, 28 Sep 2010 08:50:51 -0400
Message-ID: <AANLkTimpjB-SNwx9ZU+Ow=uDf+eCpUuG+2KE-RzbR0op@mail.gmail.com>
Subject: Re: flushing index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750ea807f8b220491514ba1

--00151750ea807f8b220491514ba1
Content-Type: text/plain; charset=ISO-8859-1

Flushing an index to disk is just an IndexWriter.commit(), there's nothing
really special about that...

About running your code continuously, you have several options:
1> schedule a recurring job to do this. On *nix systems, this is a cron job,
on Windows systems there's a job scheduler.
2> Just start it up in an infinite loop. That is, your main is just a
while(1){}.
you'll probably want to throttle it a bit, that is run, sleep for some
interval
and start again.
3> You can get really fancy and try to put some filesystem hooks in that
notify you when anything changes in a directory, but I really wouldn't go
there.

Note that you'll have to keep some kind of timestamp (probably in a separate
file or configuration somewhere) that you can compare against to figure out
whether you've already indexed the current version of the file.

The other thing you'll have to worry about is deletions. That is, how do you
*remove* a file from your index if it has been deleted on disk? You may have
to ask your index for all the file paths.

You want to think about storing the file path NOT analyzed (perhaps with
keywordtokenizer). That way you'll be able to know which files to remove
if they are no longer in your directory. As well as which files to update
when they've changed.

HTH
Erick

On Tue, Sep 28, 2010 at 2:18 AM, Yakob <jacobian@opensuse-id.org> wrote:

> On 9/27/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> >
> >
> > Yes. You must close before, else the addIndexes call will do nothing, as
> the
> > index looks empty for the addIndexes() call (because no committed
> segments
> > are available in the ramDir).
> >
> > I don't understand what you mean with flushing? If you are working on
> Lucene
> > 2.9 or 3.0, the ramWriter is flushed to the RAMDir on close. The
> addIndexes
> > call will add the index to the on-disk writer. To flush that fsWriter
> (flush
> > is the wrong thing, you probably mean commit), simply call
> fsWriter.commit()
> > so the newly added segments are written to disk and IndexReaders opened
> in
> > parallel "see" the new segments.
> >
> > Btw: If you are working on Lucene 3.0, the addIndexes call does not need
> the
> > new Directory[] {}, as the method is Java 5 varargs now.
> >
> > Uwe
> >
> >
>
> I mean I need to flush the index periodically.that's mean that the
> index will be regularly updated as the document being added.what do
> you reckon is the solution for this? I need a sample source code to be
> able to flush an index.
>
> ok just like this source code below.
>
> public class SimpleFileIndexer {
>
>        public static void main(String[] args) throws Exception {
>
>                File indexDir = new
> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>                File dataDir = new
> File("C:/Users/Raden/Documents/lucene/LuceneHibernate/adi");
>                String suffix = "txt";
>
>                SimpleFileIndexer indexer = new SimpleFileIndexer();
>
>                int numIndex = indexer.index(indexDir, dataDir, suffix);
>
>                System.out.println("Total files indexed " + numIndex);
>
>        }
>
>        private int index(File indexDir, File dataDir, String suffix) throws
> Exception {
>
>                IndexWriter indexWriter = new IndexWriter(
>                                FSDirectory.open(indexDir),
>                                new SimpleAnalyzer(),
>                                true,
>                                IndexWriter.MaxFieldLength.LIMITED);
>                indexWriter.setUseCompoundFile(false);
>
>                indexDirectory(indexWriter, dataDir, suffix);
>
>                int numIndexed = indexWriter.maxDoc();
>                indexWriter.optimize();
>                indexWriter.close();
>
>                return numIndexed;
>
>        }
>
>        private void indexDirectory(IndexWriter indexWriter, File dataDir,
> String suffix) throws IOException {
>                File[] files = dataDir.listFiles();
>                for (int i = 0; i < files.length; i++) {
>                        File f = files[i];
>                        if (f.isDirectory()) {
>                                indexDirectory(indexWriter, f, suffix);
>                        }
>                        else {
>                                indexFileWithIndexWriter(indexWriter, f,
> suffix);
>                        }
>                }
>        }
>
>        private void indexFileWithIndexWriter(IndexWriter indexWriter, File
> f, String suffix) throws IOException {
>                if (f.isHidden() || f.isDirectory() || !f.canRead() ||
> !f.exists()) {
>                        return;
>                }
>                if (suffix!=null && !f.getName().endsWith(suffix)) {
>                        return;
>                }
>                System.out.println("Indexing file " + f.getCanonicalPath());
>
>                Document doc = new Document();
>                doc.add(new Field("contents", new FileReader(f)));
>                doc.add(new Field("filename", f.getCanonicalPath(),
> Field.Store.YES,
> Field.Index.ANALYZED));
>
>                indexWriter.addDocument(doc);
>        }
>
> }
>
>
> the above source code can index documents when given the directory of
> text files. now what I am asking is how can I made the code to run
> continuously? what class should I use? so that everytime there is new
> documents added to that directory then lucene will index those
> documents automatically, can you help me out on this one. I really
> need to know what is the best solution.
>
> thanks
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00151750ea807f8b220491514ba1--

From java-user-return-47345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 28 12:52:52 2010
Return-Path: <java-user-return-47345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38596 invoked from network); 28 Sep 2010 12:52:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Sep 2010 12:52:52 -0000
Received: (qmail 3805 invoked by uid 500); 28 Sep 2010 12:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3486 invoked by uid 500); 28 Sep 2010 12:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3478 invoked by uid 99); 28 Sep 2010 12:52:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 12:52:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Sep 2010 12:52:40 +0000
Received: (qmail 29313 invoked from network); 28 Sep 2010 12:52:18 -0000
Received: from unknown (109.160.209.235)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 28 Sep 2010 12:51:56 -0000
Message-ID: <4CA1E4DA.9040208@code972.com>
Date: Tue, 28 Sep 2010 14:51:38 +0200
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Changing QueryParser operator images
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,


I'm trying to customize the "AND", "OR" and "NOT" operators being used 
by the QP, without changing anything in the core. I noticed a previous 
attempt, but it seems to have died quietly a few years ago [1].


Unfortunately, even changing the hardcoded values seems impossible, as 
they are inaccessible or readonly - or both.


How can this be done, if at all? has anyone ever did something like this?


Itamar.


[1] http://search-lucene.com/m/lPElM1p2BHa2, 
https://issues.apache.org/jira/browse/LUCENE-682


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 28 13:39:31 2010
Return-Path: <java-user-return-47346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57561 invoked from network); 28 Sep 2010 13:39:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Sep 2010 13:39:30 -0000
Received: (qmail 62166 invoked by uid 500); 28 Sep 2010 13:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61896 invoked by uid 500); 28 Sep 2010 13:39:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61870 invoked by uid 99); 28 Sep 2010 13:39:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 13:39:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 13:39:17 +0000
Received: by iwn40 with SMTP id 40so1052428iwn.35
        for <java-user@lucene.apache.org>; Tue, 28 Sep 2010 06:38:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.167.196 with SMTP id r4mr11005977iby.29.1285681134951;
 Tue, 28 Sep 2010 06:38:54 -0700 (PDT)
Received: by 10.231.176.17 with HTTP; Tue, 28 Sep 2010 06:38:54 -0700 (PDT)
In-Reply-To: <AANLkTimpjB-SNwx9ZU+Ow=uDf+eCpUuG+2KE-RzbR0op@mail.gmail.com>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
	<001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
	<AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
	<004301cb5d9e$91a5cfd0$b4f16f70$@thetaphi.de>
	<AANLkTim7qCKop6=P1n=Cq=ZMWUbuoJy5aGMZ3bfExYX9@mail.gmail.com>
	<AANLkTimpjB-SNwx9ZU+Ow=uDf+eCpUuG+2KE-RzbR0op@mail.gmail.com>
Date: Tue, 28 Sep 2010 20:38:54 +0700
Message-ID: <AANLkTikJqgyv3zZ5GSLZHrVLDA9XXyd1Ah98LZ-W9Ovc@mail.gmail.com>
Subject: Re: flushing index
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On 9/28/10, Erick Erickson <erickerickson@gmail.com> wrote:
> Flushing an index to disk is just an IndexWriter.commit(), there's nothing
> really special about that...
>
> About running your code continuously, you have several options:
> 1> schedule a recurring job to do this. On *nix systems, this is a cron job,
> on Windows systems there's a job scheduler.
> 2> Just start it up in an infinite loop. That is, your main is just a
> while(1){}.
> you'll probably want to throttle it a bit, that is run, sleep for some
> interval
> and start again.
> 3> You can get really fancy and try to put some filesystem hooks in that
> notify you when anything changes in a directory, but I really wouldn't go
> there.
>
> Note that you'll have to keep some kind of timestamp (probably in a separate
> file or configuration somewhere) that you can compare against to figure out
> whether you've already indexed the current version of the file.
>
> The other thing you'll have to worry about is deletions. That is, how do you
> *remove* a file from your index if it has been deleted on disk? You may have
> to ask your index for all the file paths.
>
> You want to think about storing the file path NOT analyzed (perhaps with
> keywordtokenizer). That way you'll be able to know which files to remove
> if they are no longer in your directory. As well as which files to update
> when they've changed.
>
> HTH
> Erick


I think I'll go with the third option, I had found a class that can do
monitoring of certain directory, it's called Jnotify. I am planning of
inserting this class in my code above. can you tell me how to do that?
or maybe you can forward me to any link tutorials that explain how to
include Jnotify in a certain lucene source code. I had search about
Jnotify on google but the tutorials of Jnotify is still a few I guess.

thanks though.

-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 28 15:29:25 2010
Return-Path: <java-user-return-47347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25106 invoked from network); 28 Sep 2010 15:29:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Sep 2010 15:29:24 -0000
Received: (qmail 81014 invoked by uid 500); 28 Sep 2010 15:29:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80883 invoked by uid 500); 28 Sep 2010 15:29:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80866 invoked by uid 99); 28 Sep 2010 15:29:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 15:29:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.12] (HELO web52902.mail.re2.yahoo.com) (206.190.49.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Sep 2010 15:29:11 +0000
Received: (qmail 99519 invoked by uid 60001); 28 Sep 2010 15:28:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1285687730; bh=kRdfzDVUYSYFIczzmNf3jbwAgx1y6jzZv6MQmnsgd28=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=HGD7DRuMymhtH/LmV43oCUNNDJG6dK/vZSaMwZBsOOXWtbpii7SqzNi+OYV7pJBpNauBIFgI4aZsRzIT5M/Be2M2opMEzTHWvGZQaxZlmvEIOM4J/ryn3FcyDyraYV+Y9TIpIVnBapSgg1Uv6d52qWa1njhAXfJq3sIpcY4XXJw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=hKfVXMTU5mmyHPd1FgSwimvAm2KlImJxtULW5nAisjo5uYwD9IyXgfNy8GD4xm/UDjYCZfKtzqyQ3ss1jD8aaPENAMu5erIcrkpVB9wJ4tQigfL6Kp1xizAH6oEgwApUQp2qAhyhwJ/z4NhTT+jQrPF9h5kR8zF5uKsXGTcdObU=;
Message-ID: <10815.87841.qm@web52902.mail.re2.yahoo.com>
X-YMail-OSG: RgynUlMVM1m1UHjrkGxnrdLSn4jATpLfVFSApy3F49sr3b9
 NpDp9FZ9gaMgKvMXGMSHBCjOTAeJHX5aa5XZckIaxP6NuWdF2tuxfffbWoGs
 dSu_iRK6mKBNLL76TKV5R40geAANc678OQ.7BTHCTY04mqpOz_Yl2EmYA3.B
 _a1zgYCURo4eKLCVSvxfxyGJpPm5nlSVd622Xo2PiQvUQr.UYbVv2MTxIV.M
 mbVDYLC4FvGXbYVDcM3V_g4exnenP_32mRrZKcwvTBkRwsoDmHKodcWEUnXv
 ZWoFPuM3gzkD1tZUjnZcmTB4Yl.uvhsMn3.WoUN6LvzDHvhu63kVYLjX74Gz
 zeXXPZ5OB27ag7pZTxeU0IvH6Lh4-
Received: from [95.10.50.202] by web52902.mail.re2.yahoo.com via HTTP; Tue, 28 Sep 2010 08:28:49 PDT
X-Mailer: YahooMailClassic/11.4.9 YahooMailWebService/0.8.105.279950
Date: Tue, 28 Sep 2010 08:28:49 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Changing QueryParser operator images
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> How can this be done, if at all? has anyone ever did
> something like this?

I did it by modifying QueryParser.jj and regenerating corresponding java files. But it is better to use (teach users) + - universal operators. 

http://wiki.apache.org/lucene-java/BooleanQuerySyntax





      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 28 20:29:03 2010
Return-Path: <java-user-return-47348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29853 invoked from network); 28 Sep 2010 20:29:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Sep 2010 20:29:03 -0000
Received: (qmail 32588 invoked by uid 500); 28 Sep 2010 19:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32510 invoked by uid 500); 28 Sep 2010 19:27:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32502 invoked by uid 99); 28 Sep 2010 19:27:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 19:27:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Sep 2010 19:26:57 +0000
Received: by ewy10 with SMTP id 10so1163ewy.35
        for <java-user@lucene.apache.org>; Tue, 28 Sep 2010 12:26:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=hF7YcW3odwC/DkYrZ9R3FOsz+Utbl2vp59tj43M8O7Q=;
        b=Xj7KpUL0VGjq13lH2OUCAwANht6ly/ShnsZCkAFeHTHMO/F2qulPJbbZ689sjGdW82
         DUsSJrTVbll4jVsGYE984jw09xpuKif9Ru5+HKUnboDK3QDM+ojZ96QAujz7ST3z2cQ9
         nMaXdx5CvjCxXUUd5xdE/laQub2sNXURJtAys=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=T2mby5u6/jDknVK9WquXDhu1PlJVp0N3dCgp3xP8WOetdHj33zxXYm3qiLrE2wepJF
         EG4QulrTE71r1GIMsAGe/wVQoBTod1myZ9La6C4A3CuVdiVchBDNG69oX51zhc9OSn/m
         nZj/VbK1TO+fafUHJRJPgn2Zn3GURJnwhk8v4=
MIME-Version: 1.0
Received: by 10.213.29.79 with SMTP id p15mr1771765ebc.94.1285701994954; Tue,
 28 Sep 2010 12:26:34 -0700 (PDT)
Received: by 10.220.186.5 with HTTP; Tue, 28 Sep 2010 12:26:34 -0700 (PDT)
In-Reply-To: <AANLkTikJqgyv3zZ5GSLZHrVLDA9XXyd1Ah98LZ-W9Ovc@mail.gmail.com>
References: <AANLkTin27g2dwfP4GBKKdfAHMBwzqQU_w80J+U+R+JBu@mail.gmail.com>
	<001901cb5d34$92cef3b0$b86cdb10$@thetaphi.de>
	<AANLkTintcq21ULqswpvJuwBiegUGNWcci_m1gm+PQwcz@mail.gmail.com>
	<004301cb5d9e$91a5cfd0$b4f16f70$@thetaphi.de>
	<AANLkTim7qCKop6=P1n=Cq=ZMWUbuoJy5aGMZ3bfExYX9@mail.gmail.com>
	<AANLkTimpjB-SNwx9ZU+Ow=uDf+eCpUuG+2KE-RzbR0op@mail.gmail.com>
	<AANLkTikJqgyv3zZ5GSLZHrVLDA9XXyd1Ah98LZ-W9Ovc@mail.gmail.com>
Date: Tue, 28 Sep 2010 15:26:34 -0400
Message-ID: <AANLkTimSJYn=UhybgxpT5uBhVBekmEdSM8N+PLOJLJqq@mail.gmail.com>
Subject: Re: flushing index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c1724b27455049156d251

--0015174c1724b27455049156d251
Content-Type: text/plain; charset=ISO-8859-1

Nope, never used jNotify, so I don't have any code handy...

Good luck!
Erick

On Tue, Sep 28, 2010 at 9:38 AM, Yakob <jacobian@opensuse-id.org> wrote:

> On 9/28/10, Erick Erickson <erickerickson@gmail.com> wrote:
> > Flushing an index to disk is just an IndexWriter.commit(), there's
> nothing
> > really special about that...
> >
> > About running your code continuously, you have several options:
> > 1> schedule a recurring job to do this. On *nix systems, this is a cron
> job,
> > on Windows systems there's a job scheduler.
> > 2> Just start it up in an infinite loop. That is, your main is just a
> > while(1){}.
> > you'll probably want to throttle it a bit, that is run, sleep for some
> > interval
> > and start again.
> > 3> You can get really fancy and try to put some filesystem hooks in that
> > notify you when anything changes in a directory, but I really wouldn't go
> > there.
> >
> > Note that you'll have to keep some kind of timestamp (probably in a
> separate
> > file or configuration somewhere) that you can compare against to figure
> out
> > whether you've already indexed the current version of the file.
> >
> > The other thing you'll have to worry about is deletions. That is, how do
> you
> > *remove* a file from your index if it has been deleted on disk? You may
> have
> > to ask your index for all the file paths.
> >
> > You want to think about storing the file path NOT analyzed (perhaps with
> > keywordtokenizer). That way you'll be able to know which files to remove
> > if they are no longer in your directory. As well as which files to update
> > when they've changed.
> >
> > HTH
> > Erick
>
>
> I think I'll go with the third option, I had found a class that can do
> monitoring of certain directory, it's called Jnotify. I am planning of
> inserting this class in my code above. can you tell me how to do that?
> or maybe you can forward me to any link tutorials that explain how to
> include Jnotify in a certain lucene source code. I had search about
> Jnotify on google but the tutorials of Jnotify is still a few I guess.
>
> thanks though.
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174c1724b27455049156d251--

From java-user-return-47349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 29 17:49:10 2010
Return-Path: <java-user-return-47349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53010 invoked from network); 29 Sep 2010 17:49:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Sep 2010 17:49:09 -0000
Received: (qmail 94299 invoked by uid 500); 29 Sep 2010 17:49:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94180 invoked by uid 500); 29 Sep 2010 17:49:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94172 invoked by uid 99); 29 Sep 2010 17:49:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Sep 2010 17:49:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Sep 2010 17:48:56 +0000
Received: from serve.stimulussoft.com (localhost.localdomain [127.0.0.1])
	by serve.stimulussoft.com (Postfix) with ESMTP id 23BDD10739
	for <java-user@lucene.apache.org>; Wed, 29 Sep 2010 10:48:35 -0700 (PDT)
Received: by serve.stimulussoft.com (Postfix, from userid 5001)
	id 0B9941078B; Wed, 29 Sep 2010 10:48:35 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on
	serve.stimulussoft.com
X-Spam-Level: 
Received: from Jamie-Bands-MacBook-Pro.local (196-210-169-220.dynamic.isadsl.co.za [196.210.169.220])
	by serve.stimulussoft.com (Postfix) with ESMTPA id 65EE410739
	for <java-user@lucene.apache.org>; Wed, 29 Sep 2010 10:48:30 -0700 (PDT)
Message-ID: <4CA37BD8.8050608@stimulussoft.com>
Date: Wed, 29 Sep 2010 19:48:08 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: File Handle Leaks During Lucene 3.0.2 Merge
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.3 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00
	autolearn=ham version=3.2.4

  Hi There

I am noticing file handle leaks appearing on Index files. I think the 
leaks occur during the Lucene merge operation.
Lsof reports the following:

java      28604   root  213r      REG               8,33  1098681   
57409621 /var/index/vol201009/_a4w.cfs (deleted)
java      28604   root  214r      REG               8,33    35164   
57409699 /var/index/vol201009/_a4x.cfs (deleted)
java      28604   root  215r      REG               8,33    46139   
57409691 /var/index/vol201009/_a4y.cfs (deleted)
java      28604   root  216r      REG               8,33    40342   
57409673 /var/index/vol201009/_a4z.cfs (deleted)
java      28604   root  217r      REG               8,33    44204   
57409675 /var/index/vol201009/_a50.cfs (deleted)

We are using Lucene's realtime search feature so have handles open on 
the index. Could it be that we are not
handling the merge situation correctly or something? Your ideas are most 
appreciated.

The source code to our index file as follows:

package com.stimulus.archiva.index;
import com.stimulus.util.*;

import java.io.File;
import java.io.IOException;
import java.io.PrintStream;
import org.apache.commons.logging.*;
import org.apache.lucene.document.Document;
import org.apache.lucene.index.*;
import org.apache.lucene.store.FSDirectory;
import com.stimulus.archiva.domain.Config;
import com.stimulus.archiva.exception.*;
import com.stimulus.archiva.language.AnalyzerFactory;
import com.stimulus.archiva.search.*;
import java.util.*;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.store.AlreadyClosedException;
import java.util.concurrent.locks.ReentrantLock;
import java.util.concurrent.*;

public class LuceneIndex extends Thread {

          protected ArrayBlockingQueue<LuceneDocument> queue;
          protected static final Log logger = 
LogFactory.getLog(LuceneIndex.class.getName());
          protected static final Log indexLog = 
LogFactory.getLog("indexlog");
             IndexWriter writer = null;
             protected static ScheduledExecutorService scheduler;
          protected static ScheduledFuture<?> scheduledTask;
          protected LuceneDocument EXIT_REQ = null;
          ReentrantLock indexLock = new ReentrantLock();
          ArchivaAnalyzer analyzer     = new ArchivaAnalyzer();
          File indexLogFile;
          PrintStream indexLogOut;
          IndexProcessor indexProcessor;
          String friendlyName;
          String indexPath;
          int maxSimultaneousDocs;
          int indexThreads;
          IndexReader reader = null;
          volatile boolean reopen = false;
          FSDirectory fsDirectory;
          ReentrantLock readerLock = new ReentrantLock();
          enum Status { READY, SHUTDOWN };
          Status status = Status.SHUTDOWN;

             public LuceneIndex(int queueSize, LuceneDocument exitReq, 
String friendlyName, String indexPath, int  maxSimultaneousDocs, int 
indexThreads) {
                 this.queue = new 
ArrayBlockingQueue<LuceneDocument>(queueSize);
                 this.EXIT_REQ = exitReq;
                 this.friendlyName = friendlyName;
                 this.indexPath = indexPath;
                 this.maxSimultaneousDocs = maxSimultaneousDocs;
                 this.indexThreads = indexThreads;
                 this.status = Status.SHUTDOWN;
               //  if (indexLog.isDebugEnabled()) {
                   //setLog(friendlyName);
                 //}
             }


           public int getMaxSimultaneousDocs() {
               return maxSimultaneousDocs;
           }

           public void setMaxSimultaneousDocs(int maxSimultaneousDocs) {
               this.maxSimultaneousDocs = maxSimultaneousDocs;
           }


           public ReentrantLock getIndexLock() {
               return indexLock;
           }

           protected void setLog(String logName) {

                 try {
                     indexLogFile = getIndexLogFile(logName);
                     if (indexLogFile!=null) {
                         if (indexLogFile.length()>10485760)
                             indexLogFile.delete();
                         indexLogOut = new PrintStream(indexLogFile);
                     }
                     logger.debug("set index log file path 
{path='"+indexLogFile.getCanonicalPath()+"'}");
                 } catch (Exception e) {
                     logger.error("failed to open index log 
file:"+e.getMessage(),e);
                 }

           }

           protected File getIndexLogFile(String logName) {
                try {
                     String logfilepath = 
Config.getFileSystem().getLogPath()+File.separator+"indexdebug_"+logName+".log";
                     return new File(logfilepath);
                 } catch (Exception e) {
                     logger.error("failed to open index log 
file:"+e.getMessage(),e);
                     return null;
                 }
           }



           protected void openIndex() throws MessageSearchException {
             Exception lastError = null;

             if (writer==null) {
                 logger.debug("openIndex() index "+friendlyName+" will 
be opened. it is currently closed.");
             } else {
                 logger.debug("openIndex() did not bother opening index 
"+friendlyName+". it is already open.");
                 return;
             }
             logger.debug("opening index "+friendlyName+" for write");
             logger.debug("opening search index "+friendlyName+" for 
write {indexpath='"+indexPath+"'}");
             boolean writelock;
             int attempt = 0;
             int maxattempt = 10;

             if 
(Config.getConfig().getIndex().getMultipleIndexProcesses()) {
                 maxattempt = 10000;
              } else {
                 maxattempt = 10;
              }

             do {
                 writelock = false;
                 try {
                         fsDirectory = FSDirectory.open(new 
File(indexPath));
                         int maxIndexChars = 
Config.getConfig().getIndex().getMaxIndexPerFieldChars();
                         writer = new 
IndexWriter(fsDirectory,analyzer,new 
IndexWriter.MaxFieldLength(maxIndexChars));
                         if (indexLog.isDebugEnabled() && 
indexLogOut!=null) {
                             writer.setInfoStream(indexLogOut);
                         }
                 } catch (LockObtainFailedException lobfe) {
                         logger.debug("write lock on index 
"+friendlyName+". will reopen in 50ms.");
                         try { Thread.sleep(50); } catch (Exception e) {}
                         attempt++;
                         writelock = true;
                 } catch (CorruptIndexException cie) {
                     throw new MessageSearchException("index 
"+friendlyName+" appears to be corrupt. please reindex the active 
volume."+cie.getMessage(),logger);
                 } catch (Throwable io) {
                     throw new MessageSearchException("failed to write 
document to index "+friendlyName+":"+io.getMessage(),logger);
                 }
            } while (writelock && attempt<maxattempt);
            if (attempt>=10000)
              throw new MessageSearchException("failed to open index 
"+friendlyName+" writer {indexPath='"+indexPath+"'}",lastError,logger);
         }

         public void indexDocument(LuceneDocument luceneDocument) throws 
MessageSearchException {
             logger.debug("index document {"+luceneDocument+"}");
             if (status==Status.SHUTDOWN) {
                   throw new MessageSearchException("index is 
shutdown.",logger);
             }
             long s = (new Date()).getTime();
             if (luceneDocument == null)
                 throw new MessageSearchException("assertion failure: 
null document",logger);
             try {
                 queue.put(luceneDocument);
             } catch (InterruptedException ie) {
                 throw new MessageSearchException("failed to add 
document to queue:"+ie.getMessage(),ie,logger);
             }
             logger.debug("document indexed successfully 
{"+luceneDocument+"}");

             logger.debug("indexing message end {"+luceneDocument+"}");
             long e = (new Date()).getTime();
             logger.debug("indexing time {time='"+(e-s)+"'}");
         }

         public class DocWriter implements Runnable {

             LuceneDocument doc;
             String language;
             LinkedList<LuceneDocument> pushbacks;
             ReentrantLock pushbackLock;

             public DocWriter(LuceneDocument doc,String 
language,LinkedList<LuceneDocument> pushbacks, ReentrantLock pushbackLock) {
                 this.doc = doc;
                 this.language = language;
                 this.pushbacks = pushbacks;
             }

             public void run() {
                 try {
                     
writer.addDocument(doc.getDocument(),AnalyzerFactory.getAnalyzer(language,AnalyzerFactory.Operation.INDEX));
                 } catch (IOException io) {
                     logger.error("failed to add document to 
index:"+io.getMessage(),io);
                 } catch (AlreadyClosedException e) {
                     try {
                         pushbackLock.lock();
                         pushbacks.add(doc);
                     } finally {
                         pushbackLock.unlock();
                     }
                 }
             }

         }



         public class IndexProcessor extends Thread {

             public IndexProcessor() {
                 setName("index processor");
             }

             public void run() {
                 boolean exit = false;
                 LuceneDocument luceneDocument = null;
                 LinkedList<LuceneDocument> pushbacks = new 
LinkedList<LuceneDocument>();
                 ReentrantLock pushbackLock = new ReentrantLock();


                 while (!exit) {


                     //documentPool = 
Executors.newFixedThreadPool(Config.getConfig().getArchiver().getArchiveThreads());
                     luceneDocument = null;
                     try {
                         luceneDocument = (LuceneDocument) queue.take();
                     } catch (InterruptedException e) {
                         logger.debug("index exit req received. exiting");
                         exit = true;
                         continue;
                     }
                     if (luceneDocument==EXIT_REQ) {
                         logger.debug("index exit req received. exiting");
                         exit = true;
                         continue;
                     }
                      try {

                         indexLock.lock();

                         if (luceneDocument==null) {
                             logger.debug("index info is null");
                         }
                         int i = 0;
                         ExecutorService threadPool = 
Executors.newFixedThreadPool(indexThreads,ThreadUtil.getFlexibleThreadFactory("indexwritepool",Thread.NORM_PRIORITY,true));

                         while(luceneDocument!=null && 
i<maxSimultaneousDocs) {
                                 Document doc = 
luceneDocument.getDocument();
                                 String language = doc.get("lang");
                                 if (language==null) {
                                     language = 
Config.getConfig().getIndex().getIndexLanguage();
                                 }
                                 DocWriter docWriter = new 
DocWriter(luceneDocument,language,pushbacks,pushbackLock);
                                 threadPool.submit(docWriter);

                                  i++;
                                  if (i<maxSimultaneousDocs) {
                                      luceneDocument = (LuceneDocument) 
queue.poll();

                                      if (luceneDocument==null) {
                                             logger.debug("index info is 
null");
                                      }

                                      if (luceneDocument==EXIT_REQ) {
                                              logger.debug("index exit 
req received. exiting (2)");
                                             exit = true;
                                             break;
                                       }
                                  }

                         }
                         threadPool.shutdown();
                         threadPool.awaitTermination(30,TimeUnit.MINUTES);
                         try {
                             pushbackLock.lock();
                             if (pushbacks.size()>0) {
                                  for (LuceneDocument pushback : 
pushbacks) {
                                         try {
                                             
writer.addDocument(pushback.getDocument());
                                         } catch (IOException io) {
                                             logger.error("failed to add 
document to index:"+io.getMessage(),io);
                                         } catch (AlreadyClosedException 
e) {
                                             pushbacks.add(pushback);
                                         }
                                         i++;
                                   }
                             }
                         } finally {
                             pushbackLock.unlock();
                         }
                         logger.debug("index commit");
                         try {
                             if (writer!=null) {
                                 writer.commit();
                             }
                         } catch (Exception e) {
                             logger.error("failed to commit 
index:"+e.getMessage(),e);
                             try {
                                 readerLock.lock();
                                 closeIndex();
                                 openIndex();
                             } finally {
                                 readerLock.unlock();
                             }
                         }

                      } catch (Throwable ie) {
                          logger.error("index write 
interrupted:"+ie.getMessage(),ie);
                      } finally {

                           indexLock.unlock();
                     }
                 }
                 logger.debug("exit indexer");
                }

             public class IndexDocument extends Thread {

                     LuceneDocument luceneDocument = null;
                     List<LuceneDocument> pushbacks = null;

                     public IndexDocument(LuceneDocument 
luceneDocument,List<LuceneDocument> pushbacks) {
                         this.luceneDocument = luceneDocument;
                         this.pushbacks = pushbacks;
                         setName("index document");
                     }

                     public void run() {
                         try {
                             
writer.addDocument(luceneDocument.getDocument());
                         } catch (IOException io) {
                             logger.error("failed to add document to 
index:"+io.getMessage(),io);
                         } catch (AlreadyClosedException e) {
                             pushbacks.add(luceneDocument);
                         } catch (Throwable t) {
                             logger.error("failed to add document to 
index:"+t.getMessage(),t);
                         }
                     }};
             }

         protected void closeIndex() {
              try {
                  indexLock.lock();


                  if (writer!=null) {
                     writer.close();
                  }

                  if (fsDirectory!=null) {
                      fsDirectory.close();
                  }
              } catch (Throwable io) {
                 logger.error("failed to close index 
writer:"+io.getMessage(),io);
              } finally {
                  writer = null;
                  indexLock.unlock();
              }
         }



         public void optimize() throws MessageSearchException {
               logger.debug("optimize volume");
               try {
                   indexLock.lock();
                   try {
                       writer.optimize(false);
                   } catch (Exception io) {
                       throw new MessageSearchException("failed to 
optimize the index:"+io.getMessage(),io,logger);
                   }
               } catch (Throwable t) { // diskspace problems could arise
                   logger.error("failed to optimize 
index:"+t.getMessage(),t);
               } finally {
                   indexLock.unlock();
               }

         }
         public void deleteDocs(Term[] terms) throws 
MessageSearchException {
               logger.debug("delete docs");
               if (status==Status.SHUTDOWN) {
                    throw new MessageSearchException("index is 
shutdown.",logger);
               }
               try {
                   indexLock.lock();
                   openIndex();
                   try {
                       writer.deleteDocuments(terms);
                   } catch (Exception e) {
                       throw new MessageSearchException("failed to 
delete doc from index:"+e.getMessage(),e,logger);
                   } finally {
                       try {
                           writer.commit();
                           writer.expungeDeletes(false);
                       } catch (Exception io) {
                           throw new MessageSearchException("failed to 
expunge docs from index:"+io.getMessage(),io,logger);
                       }
                   }
               } catch (Throwable t) {
                   logger.error("failed to delete docs from 
index."+t.getMessage(),t);
               } finally {
                   indexLock.unlock();
               }
         }


           public void deleteIndex() throws MessageSearchException {
                    logger.debug("delete index 
{indexpath='"+indexPath+"'}");
                    try {
                       indexLock.lock();
                      closeIndex();
                      File indexFile = new File(indexPath);
                      //deleteDirContents(indexFile);
                      try {
                         int maxIndexChars = 
Config.getConfig().getIndex().getMaxIndexPerFieldChars();
                         writer = new 
IndexWriter(FSDirectory.open(indexFile),analyzer,true,new 
IndexWriter.MaxFieldLength(maxIndexChars));
                      } catch (Throwable cie) {
                          logger.error("failed to delete index 
{index='"+indexPath+"'}",cie);
                          return;
                      } finally {
                          try { writer.close(); } catch (Exception e) { 
logger.debug("failed to close writer:"+e.getMessage()); }
                          writer = null;
                      }
                   } finally {
                         openIndex();
                       indexLock.unlock();
                 }
           }

           public void startup() throws MessageSearchException {
             logger.debug("luceneindex is starting up");


             File lockFile = new File(indexPath+File.separatorChar + 
"write.lock");
             if (lockFile.exists()) {
                 if 
(Config.getConfig().getIndex().getMultipleIndexProcesses()) {
                     logger.debug("index lock file detected on 
volumeindex startup.");
                 } else {
                     logger.warn("index lock file detected. the server 
was shutdown incorrectly. automatically deleting lock file. 
{lockFile='"+lockFile.getPath()+"'}");
                     lockFile.delete();
                 }
             }
             openIndex();
             scheduler = 
Executors.newScheduledThreadPool(1,ThreadUtil.getFlexibleThreadFactory("index 
reopen",Thread.NORM_PRIORITY-1,true));
             scheduledTask = scheduler.scheduleWithFixedDelay(new 
Runnable() { public void run() { reopen=true; }},1,1,TimeUnit.SECONDS);

             indexProcessor = new IndexProcessor();
             indexProcessor.start();


             Runtime.getRuntime().addShutdownHook(this);
             status = Status.READY;
           }

           public IndexReader getReader() throws MessageSearchException {
               if (status==Status.SHUTDOWN) {
                    throw new MessageSearchException("index is 
shutdown.",logger);
               }
               readerLock.lock();
               try {
                   if (writer==null) {
                       throw new MessageSearchException("cannot retrieve 
reader. writer is closed (or null)",logger);
                   }
                   if (reader == null) {
                       reader = new VolumeIndexReader(writer.getReader(5));
                   } else {
                       try {
                           if (reopen) {
                               reader = new 
VolumeIndexReader(writer.getReader(5));
                               reopen = false;
                           }
                       } catch (AlreadyClosedException ace) {
                           logger.debug("reader was found closed. 
reopening");
                           reader = new 
VolumeIndexReader(writer.getReader(5));
                       }
                   }
               } catch (IOException io) {
                   throw new MessageSearchException("failed to retrieve 
reader from writer:"+io.getMessage(),io,logger);
               } finally {
                   readerLock.unlock();
               }
               return reader;
           }


           public void shutdown() {
               status = Status.SHUTDOWN;
               try { queue.put(EXIT_REQ); } catch (InterruptedException 
e) {}

               if (reader!=null) {
                   try {
                       reader.close();
                   } catch (Exception e) {
                       logger.error("failed to close index 
reader:"+e.getMessage());
                   }
               }
               reader = null;
               if (scheduler!=null) {
                   scheduler.shutdown();
               }
               closeIndex();

               indexProcessor.interrupt();

               if (scheduler!=null) {
                   scheduler.shutdownNow();
               }

            }

           @Override
           public void run() {
               shutdown();
           }


           public interface LuceneDocument {

               public String toString();
               public Document getDocument();
               public void finalize();

           }

           public static void deleteDirContents(File path) {
                 if( path.exists() ) {
                   File[] files = path.listFiles();
                   for(int i=0; i<files.length; i++) {
                      if(files[i].isFile()) {
                       files[i].delete();
                      }
                   }
                 }
            }



}





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 29 18:15:26 2010
Return-Path: <java-user-return-47350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65225 invoked from network); 29 Sep 2010 18:15:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Sep 2010 18:15:25 -0000
Received: (qmail 48119 invoked by uid 500); 29 Sep 2010 18:15:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48043 invoked by uid 500); 29 Sep 2010 18:15:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48035 invoked by uid 99); 29 Sep 2010 18:15:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Sep 2010 18:15:23 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Sep 2010 18:15:17 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <fgeary@acquiremedia.com>)
	id 1P11BA-0000b0-NC
	for java-user@lucene.apache.org; Wed, 29 Sep 2010 11:14:56 -0700
Date: Wed, 29 Sep 2010 11:14:56 -0700 (PDT)
From: Frank Geary <fgeary@acquiremedia.com>
To: java-user@lucene.apache.org
Message-ID: <1285784096709-1603932.post@n3.nabble.com>
In-Reply-To: <1285784096710-552478.post@n3.nabble.com>
References: <1285784096711-552476.post@n3.nabble.com> <359a92830803111046v6b261be2w5564024cdca77251@mail.gmail.com> <1285784096710-552478.post@n3.nabble.com>
Subject: Re: Searching for null (empty) fields, how to use -field:[* TO *]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Since my index cannot be re-indexed easily, I had to go with Erick's first
suggestion.  I thought others might be interested in an example of the code
(I did this using Lucene 2.4.1):

// This code worked best to deletes documents with a null field value...
BooleanQuery nullFieldsOnlyQuery = new BooleanQuery();

MatchAllDocsQuery matchAllDocsQuery = new MatchAllDocsQuery();

// ConstantScoreRangeQuery does not throw a BooleanQuery.TooManyClauses
exception.
// A regular RangeQuery does throws a BooleanQuery.TooManyClauses exception.
// Obviously the range may be different depending on the nature of the field
involved.
ConstantScoreRangeQuery nonNullFieldsRangeQuery = new
ConstantScoreRangeQuery( theFieldName,
                                                                                                                               
"0", //zero
                                                                                                                               
"z",                                                                                                                                                
true,							                                                true);

// Load up the BooleanQuery
nullFieldsOnlyQuery.add( new MatchAllDocsQuery(), BooleanClause.Occur.MUST
);
nullFieldsOnlyQuery.add( nonNullFieldsRangeQuery,
BooleanClause.Occur.MUST_NOT );

// Delete the documents from the archive index
indexWriter.deleteDocuments( nullFieldsOnlyQuery );
// End of code that worked best to delete documents with a null field value.

// The following code did NOT always work to delete documents with a null
field value.
// I did get the code below to delete documents with a null field value in
my Windows XP
// environment when I simply added a document with "" for the field value. 
However, it did 
// not work in my CentOS environment.  I imagine this failure had more to do
with the way
// those documents with a null field value ended up erroneously being
indexed in CentOS 
// rather than with the difference in the OS itself.
Term[] fieldTerms = new Term[ 1 ];
fieldTerms[0] = new Term( theFieldName, "" );
indexWriter.deleteDocuments( fieldTerms );
// End of code that did NOT always work for me.

Frank Geary
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Searching-for-null-empty-fields-how-to-use-field-TO-tp552476p1603932.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 29 18:22:05 2010
Return-Path: <java-user-return-47351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73146 invoked from network); 29 Sep 2010 18:22:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Sep 2010 18:22:05 -0000
Received: (qmail 64301 invoked by uid 500); 29 Sep 2010 18:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64257 invoked by uid 500); 29 Sep 2010 18:22:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64249 invoked by uid 99); 29 Sep 2010 18:22:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Sep 2010 18:22:02 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Sep 2010 18:21:54 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 87C2B45F149
	for <java-user@lucene.apache.org>; Wed, 29 Sep 2010 20:21:33 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id g9ovkAPz9Fvb for <java-user@lucene.apache.org>;
	Wed, 29 Sep 2010 20:21:21 +0200 (CEST)
Received: from VEGA (unknown [207.179.4.183])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4A23645F11E
	for <java-user@lucene.apache.org>; Wed, 29 Sep 2010 20:21:20 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4CA37BD8.8050608@stimulussoft.com>
In-Reply-To: <4CA37BD8.8050608@stimulussoft.com>
Subject: RE: File Handle Leaks During Lucene 3.0.2 Merge
Date: Wed, 29 Sep 2010 11:21:47 -0700
Message-ID: <006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQK1IASPuHD7fWK4tGfTUhRYh1Mz8JFVxgmA
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

The "deleted" files are only freed by OS kernel if no longer an IndexReader
accesses them. Did you get a new realtime reader after merging and *closed*
the old one?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Jamie [mailto:jamie@stimulussoft.com]
> Sent: Wednesday, September 29, 2010 10:48 AM
> To: java-user@lucene.apache.org
> Subject: File Handle Leaks During Lucene 3.0.2 Merge
> 
>   Hi There
> 
> I am noticing file handle leaks appearing on Index files. I think the
leaks occur
> during the Lucene merge operation.
> Lsof reports the following:
> 
> java      28604   root  213r      REG               8,33  1098681
> 57409621 /var/index/vol201009/_a4w.cfs (deleted)
> java      28604   root  214r      REG               8,33    35164
> 57409699 /var/index/vol201009/_a4x.cfs (deleted)
> java      28604   root  215r      REG               8,33    46139
> 57409691 /var/index/vol201009/_a4y.cfs (deleted)
> java      28604   root  216r      REG               8,33    40342
> 57409673 /var/index/vol201009/_a4z.cfs (deleted)
> java      28604   root  217r      REG               8,33    44204
> 57409675 /var/index/vol201009/_a50.cfs (deleted)
> 
> We are using Lucene's realtime search feature so have handles open on the
> index. Could it be that we are not handling the merge situation correctly
or
> something? Your ideas are most appreciated.
> 
> The source code to our index file as follows:
> 
> package com.stimulus.archiva.index;
> import com.stimulus.util.*;
> 
> import java.io.File;
> import java.io.IOException;
> import java.io.PrintStream;
> import org.apache.commons.logging.*;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.index.*;
> import org.apache.lucene.store.FSDirectory;
> import com.stimulus.archiva.domain.Config;
> import com.stimulus.archiva.exception.*; import
> com.stimulus.archiva.language.AnalyzerFactory;
> import com.stimulus.archiva.search.*;
> import java.util.*;
> import org.apache.lucene.store.LockObtainFailedException;
> import org.apache.lucene.store.AlreadyClosedException;
> import java.util.concurrent.locks.ReentrantLock;
> import java.util.concurrent.*;
> 
> public class LuceneIndex extends Thread {
> 
>           protected ArrayBlockingQueue<LuceneDocument> queue;
>           protected static final Log logger =
> LogFactory.getLog(LuceneIndex.class.getName());
>           protected static final Log indexLog =
LogFactory.getLog("indexlog");
>              IndexWriter writer = null;
>              protected static ScheduledExecutorService scheduler;
>           protected static ScheduledFuture<?> scheduledTask;
>           protected LuceneDocument EXIT_REQ = null;
>           ReentrantLock indexLock = new ReentrantLock();
>           ArchivaAnalyzer analyzer     = new ArchivaAnalyzer();
>           File indexLogFile;
>           PrintStream indexLogOut;
>           IndexProcessor indexProcessor;
>           String friendlyName;
>           String indexPath;
>           int maxSimultaneousDocs;
>           int indexThreads;
>           IndexReader reader = null;
>           volatile boolean reopen = false;
>           FSDirectory fsDirectory;
>           ReentrantLock readerLock = new ReentrantLock();
>           enum Status { READY, SHUTDOWN };
>           Status status = Status.SHUTDOWN;
> 
>              public LuceneIndex(int queueSize, LuceneDocument exitReq,
String
> friendlyName, String indexPath, int  maxSimultaneousDocs, int
> indexThreads) {
>                  this.queue = new
> ArrayBlockingQueue<LuceneDocument>(queueSize);
>                  this.EXIT_REQ = exitReq;
>                  this.friendlyName = friendlyName;
>                  this.indexPath = indexPath;
>                  this.maxSimultaneousDocs = maxSimultaneousDocs;
>                  this.indexThreads = indexThreads;
>                  this.status = Status.SHUTDOWN;
>                //  if (indexLog.isDebugEnabled()) {
>                    //setLog(friendlyName);
>                  //}
>              }
> 
> 
>            public int getMaxSimultaneousDocs() {
>                return maxSimultaneousDocs;
>            }
> 
>            public void setMaxSimultaneousDocs(int maxSimultaneousDocs) {
>                this.maxSimultaneousDocs = maxSimultaneousDocs;
>            }
> 
> 
>            public ReentrantLock getIndexLock() {
>                return indexLock;
>            }
> 
>            protected void setLog(String logName) {
> 
>                  try {
>                      indexLogFile = getIndexLogFile(logName);
>                      if (indexLogFile!=null) {
>                          if (indexLogFile.length()>10485760)
>                              indexLogFile.delete();
>                          indexLogOut = new PrintStream(indexLogFile);
>                      }
>                      logger.debug("set index log file path
> {path='"+indexLogFile.getCanonicalPath()+"'}");
>                  } catch (Exception e) {
>                      logger.error("failed to open index log
file:"+e.getMessage(),e);
>                  }
> 
>            }
> 
>            protected File getIndexLogFile(String logName) {
>                 try {
>                      String logfilepath =
>
Config.getFileSystem().getLogPath()+File.separator+"indexdebug_"+logName+".
> log";
>                      return new File(logfilepath);
>                  } catch (Exception e) {
>                      logger.error("failed to open index log
file:"+e.getMessage(),e);
>                      return null;
>                  }
>            }
> 
> 
> 
>            protected void openIndex() throws MessageSearchException {
>              Exception lastError = null;
> 
>              if (writer==null) {
>                  logger.debug("openIndex() index "+friendlyName+" will be
opened. it
> is currently closed.");
>              } else {
>                  logger.debug("openIndex() did not bother opening index
> "+friendlyName+". it is already open.");
>                  return;
>              }
>              logger.debug("opening index "+friendlyName+" for write");
>              logger.debug("opening search index "+friendlyName+" for write
> {indexpath='"+indexPath+"'}");
>              boolean writelock;
>              int attempt = 0;
>              int maxattempt = 10;
> 
>              if
> (Config.getConfig().getIndex().getMultipleIndexProcesses()) {
>                  maxattempt = 10000;
>               } else {
>                  maxattempt = 10;
>               }
> 
>              do {
>                  writelock = false;
>                  try {
>                          fsDirectory = FSDirectory.open(new
File(indexPath));
>                          int maxIndexChars =
> Config.getConfig().getIndex().getMaxIndexPerFieldChars();
>                          writer = new
> IndexWriter(fsDirectory,analyzer,new
> IndexWriter.MaxFieldLength(maxIndexChars));
>                          if (indexLog.isDebugEnabled() &&
> indexLogOut!=null) {
>                              writer.setInfoStream(indexLogOut);
>                          }
>                  } catch (LockObtainFailedException lobfe) {
>                          logger.debug("write lock on index
"+friendlyName+". will
> reopen in 50ms.");
>                          try { Thread.sleep(50); } catch (Exception e) {}
>                          attempt++;
>                          writelock = true;
>                  } catch (CorruptIndexException cie) {
>                      throw new MessageSearchException("index
"+friendlyName+"
> appears to be corrupt. please reindex the active
> volume."+cie.getMessage(),logger);
>                  } catch (Throwable io) {
>                      throw new MessageSearchException("failed to write
document to
> index "+friendlyName+":"+io.getMessage(),logger);
>                  }
>             } while (writelock && attempt<maxattempt);
>             if (attempt>=10000)
>               throw new MessageSearchException("failed to open index
> "+friendlyName+" writer {indexPath='"+indexPath+"'}",lastError,logger);
>          }
> 
>          public void indexDocument(LuceneDocument luceneDocument) throws
> MessageSearchException {
>              logger.debug("index document {"+luceneDocument+"}");
>              if (status==Status.SHUTDOWN) {
>                    throw new MessageSearchException("index is
shutdown.",logger);
>              }
>              long s = (new Date()).getTime();
>              if (luceneDocument == null)
>                  throw new MessageSearchException("assertion failure:
> null document",logger);
>              try {
>                  queue.put(luceneDocument);
>              } catch (InterruptedException ie) {
>                  throw new MessageSearchException("failed to add document
to
> queue:"+ie.getMessage(),ie,logger);
>              }
>              logger.debug("document indexed successfully
{"+luceneDocument+"}");
> 
>              logger.debug("indexing message end {"+luceneDocument+"}");
>              long e = (new Date()).getTime();
>              logger.debug("indexing time {time='"+(e-s)+"'}");
>          }
> 
>          public class DocWriter implements Runnable {
> 
>              LuceneDocument doc;
>              String language;
>              LinkedList<LuceneDocument> pushbacks;
>              ReentrantLock pushbackLock;
> 
>              public DocWriter(LuceneDocument doc,String
> language,LinkedList<LuceneDocument> pushbacks, ReentrantLock
> pushbackLock) {
>                  this.doc = doc;
>                  this.language = language;
>                  this.pushbacks = pushbacks;
>              }
> 
>              public void run() {
>                  try {
> 
> writer.addDocument(doc.getDocument(),AnalyzerFactory.getAnalyzer(language
> ,AnalyzerFactory.Operation.INDEX));
>                  } catch (IOException io) {
>                      logger.error("failed to add document to
> index:"+io.getMessage(),io);
>                  } catch (AlreadyClosedException e) {
>                      try {
>                          pushbackLock.lock();
>                          pushbacks.add(doc);
>                      } finally {
>                          pushbackLock.unlock();
>                      }
>                  }
>              }
> 
>          }
> 
> 
> 
>          public class IndexProcessor extends Thread {
> 
>              public IndexProcessor() {
>                  setName("index processor");
>              }
> 
>              public void run() {
>                  boolean exit = false;
>                  LuceneDocument luceneDocument = null;
>                  LinkedList<LuceneDocument> pushbacks = new
> LinkedList<LuceneDocument>();
>                  ReentrantLock pushbackLock = new ReentrantLock();
> 
> 
>                  while (!exit) {
> 
> 
>                      //documentPool =
>
Executors.newFixedThreadPool(Config.getConfig().getArchiver().getArchiveThr
> eads());
>                      luceneDocument = null;
>                      try {
>                          luceneDocument = (LuceneDocument) queue.take();
>                      } catch (InterruptedException e) {
>                          logger.debug("index exit req received. exiting");
>                          exit = true;
>                          continue;
>                      }
>                      if (luceneDocument==EXIT_REQ) {
>                          logger.debug("index exit req received. exiting");
>                          exit = true;
>                          continue;
>                      }
>                       try {
> 
>                          indexLock.lock();
> 
>                          if (luceneDocument==null) {
>                              logger.debug("index info is null");
>                          }
>                          int i = 0;
>                          ExecutorService threadPool =
> Executors.newFixedThreadPool(indexThreads,ThreadUtil.getFlexibleThreadFact
> ory("indexwritepool",Thread.NORM_PRIORITY,true));
> 
>                          while(luceneDocument!=null &&
> i<maxSimultaneousDocs) {
>                                  Document doc =
> luceneDocument.getDocument();
>                                  String language = doc.get("lang");
>                                  if (language==null) {
>                                      language =
> Config.getConfig().getIndex().getIndexLanguage();
>                                  }
>                                  DocWriter docWriter = new
> DocWriter(luceneDocument,language,pushbacks,pushbackLock);
>                                  threadPool.submit(docWriter);
> 
>                                   i++;
>                                   if (i<maxSimultaneousDocs) {
>                                       luceneDocument = (LuceneDocument)
> queue.poll();
> 
>                                       if (luceneDocument==null) {
>                                              logger.debug("index info is
> null");
>                                       }
> 
>                                       if (luceneDocument==EXIT_REQ) {
>                                               logger.debug("index exit
> req received. exiting (2)");
>                                              exit = true;
>                                              break;
>                                        }
>                                   }
> 
>                          }
>                          threadPool.shutdown();
>                          threadPool.awaitTermination(30,TimeUnit.MINUTES);
>                          try {
>                              pushbackLock.lock();
>                              if (pushbacks.size()>0) {
>                                   for (LuceneDocument pushback :
> pushbacks) {
>                                          try {
> 
> writer.addDocument(pushback.getDocument());
>                                          } catch (IOException io) {
>                                              logger.error("failed to add
> document to index:"+io.getMessage(),io);
>                                          } catch (AlreadyClosedException
> e) {
>                                              pushbacks.add(pushback);
>                                          }
>                                          i++;
>                                    }
>                              }
>                          } finally {
>                              pushbackLock.unlock();
>                          }
>                          logger.debug("index commit");
>                          try {
>                              if (writer!=null) {
>                                  writer.commit();
>                              }
>                          } catch (Exception e) {
>                              logger.error("failed to commit
> index:"+e.getMessage(),e);
>                              try {
>                                  readerLock.lock();
>                                  closeIndex();
>                                  openIndex();
>                              } finally {
>                                  readerLock.unlock();
>                              }
>                          }
> 
>                       } catch (Throwable ie) {
>                           logger.error("index write
> interrupted:"+ie.getMessage(),ie);
>                       } finally {
> 
>                            indexLock.unlock();
>                      }
>                  }
>                  logger.debug("exit indexer");
>                 }
> 
>              public class IndexDocument extends Thread {
> 
>                      LuceneDocument luceneDocument = null;
>                      List<LuceneDocument> pushbacks = null;
> 
>                      public IndexDocument(LuceneDocument
> luceneDocument,List<LuceneDocument> pushbacks) {
>                          this.luceneDocument = luceneDocument;
>                          this.pushbacks = pushbacks;
>                          setName("index document");
>                      }
> 
>                      public void run() {
>                          try {
> 
> writer.addDocument(luceneDocument.getDocument());
>                          } catch (IOException io) {
>                              logger.error("failed to add document to
> index:"+io.getMessage(),io);
>                          } catch (AlreadyClosedException e) {
>                              pushbacks.add(luceneDocument);
>                          } catch (Throwable t) {
>                              logger.error("failed to add document to
> index:"+t.getMessage(),t);
>                          }
>                      }};
>              }
> 
>          protected void closeIndex() {
>               try {
>                   indexLock.lock();
> 
> 
>                   if (writer!=null) {
>                      writer.close();
>                   }
> 
>                   if (fsDirectory!=null) {
>                       fsDirectory.close();
>                   }
>               } catch (Throwable io) {
>                  logger.error("failed to close index
> writer:"+io.getMessage(),io);
>               } finally {
>                   writer = null;
>                   indexLock.unlock();
>               }
>          }
> 
> 
> 
>          public void optimize() throws MessageSearchException {
>                logger.debug("optimize volume");
>                try {
>                    indexLock.lock();
>                    try {
>                        writer.optimize(false);
>                    } catch (Exception io) {
>                        throw new MessageSearchException("failed to
> optimize the index:"+io.getMessage(),io,logger);
>                    }
>                } catch (Throwable t) { // diskspace problems could arise
>                    logger.error("failed to optimize
> index:"+t.getMessage(),t);
>                } finally {
>                    indexLock.unlock();
>                }
> 
>          }
>          public void deleteDocs(Term[] terms) throws
> MessageSearchException {
>                logger.debug("delete docs");
>                if (status==Status.SHUTDOWN) {
>                     throw new MessageSearchException("index is
> shutdown.",logger);
>                }
>                try {
>                    indexLock.lock();
>                    openIndex();
>                    try {
>                        writer.deleteDocuments(terms);
>                    } catch (Exception e) {
>                        throw new MessageSearchException("failed to
> delete doc from index:"+e.getMessage(),e,logger);
>                    } finally {
>                        try {
>                            writer.commit();
>                            writer.expungeDeletes(false);
>                        } catch (Exception io) {
>                            throw new MessageSearchException("failed to
> expunge docs from index:"+io.getMessage(),io,logger);
>                        }
>                    }
>                } catch (Throwable t) {
>                    logger.error("failed to delete docs from
> index."+t.getMessage(),t);
>                } finally {
>                    indexLock.unlock();
>                }
>          }
> 
> 
>            public void deleteIndex() throws MessageSearchException {
>                     logger.debug("delete index
> {indexpath='"+indexPath+"'}");
>                     try {
>                        indexLock.lock();
>                       closeIndex();
>                       File indexFile = new File(indexPath);
>                       //deleteDirContents(indexFile);
>                       try {
>                          int maxIndexChars =
> Config.getConfig().getIndex().getMaxIndexPerFieldChars();
>                          writer = new
> IndexWriter(FSDirectory.open(indexFile),analyzer,true,new
> IndexWriter.MaxFieldLength(maxIndexChars));
>                       } catch (Throwable cie) {
>                           logger.error("failed to delete index
> {index='"+indexPath+"'}",cie);
>                           return;
>                       } finally {
>                           try { writer.close(); } catch (Exception e) {
> logger.debug("failed to close writer:"+e.getMessage()); }
>                           writer = null;
>                       }
>                    } finally {
>                          openIndex();
>                        indexLock.unlock();
>                  }
>            }
> 
>            public void startup() throws MessageSearchException {
>              logger.debug("luceneindex is starting up");
> 
> 
>              File lockFile = new File(indexPath+File.separatorChar +
> "write.lock");
>              if (lockFile.exists()) {
>                  if
> (Config.getConfig().getIndex().getMultipleIndexProcesses()) {
>                      logger.debug("index lock file detected on
> volumeindex startup.");
>                  } else {
>                      logger.warn("index lock file detected. the server
> was shutdown incorrectly. automatically deleting lock file.
> {lockFile='"+lockFile.getPath()+"'}");
>                      lockFile.delete();
>                  }
>              }
>              openIndex();
>              scheduler =
> Executors.newScheduledThreadPool(1,ThreadUtil.getFlexibleThreadFactory("in
> dex
> reopen",Thread.NORM_PRIORITY-1,true));
>              scheduledTask = scheduler.scheduleWithFixedDelay(new
> Runnable() { public void run() { reopen=true; }},1,1,TimeUnit.SECONDS);
> 
>              indexProcessor = new IndexProcessor();
>              indexProcessor.start();
> 
> 
>              Runtime.getRuntime().addShutdownHook(this);
>              status = Status.READY;
>            }
> 
>            public IndexReader getReader() throws MessageSearchException {
>                if (status==Status.SHUTDOWN) {
>                     throw new MessageSearchException("index is
> shutdown.",logger);
>                }
>                readerLock.lock();
>                try {
>                    if (writer==null) {
>                        throw new MessageSearchException("cannot retrieve
> reader. writer is closed (or null)",logger);
>                    }
>                    if (reader == null) {
>                        reader = new
VolumeIndexReader(writer.getReader(5));
>                    } else {
>                        try {
>                            if (reopen) {
>                                reader = new
> VolumeIndexReader(writer.getReader(5));
>                                reopen = false;
>                            }
>                        } catch (AlreadyClosedException ace) {
>                            logger.debug("reader was found closed.
> reopening");
>                            reader = new
> VolumeIndexReader(writer.getReader(5));
>                        }
>                    }
>                } catch (IOException io) {
>                    throw new MessageSearchException("failed to retrieve
> reader from writer:"+io.getMessage(),io,logger);
>                } finally {
>                    readerLock.unlock();
>                }
>                return reader;
>            }
> 
> 
>            public void shutdown() {
>                status = Status.SHUTDOWN;
>                try { queue.put(EXIT_REQ); } catch (InterruptedException
> e) {}
> 
>                if (reader!=null) {
>                    try {
>                        reader.close();
>                    } catch (Exception e) {
>                        logger.error("failed to close index
> reader:"+e.getMessage());
>                    }
>                }
>                reader = null;
>                if (scheduler!=null) {
>                    scheduler.shutdown();
>                }
>                closeIndex();
> 
>                indexProcessor.interrupt();
> 
>                if (scheduler!=null) {
>                    scheduler.shutdownNow();
>                }
> 
>             }
> 
>            @Override
>            public void run() {
>                shutdown();
>            }
> 
> 
>            public interface LuceneDocument {
> 
>                public String toString();
>                public Document getDocument();
>                public void finalize();
> 
>            }
> 
>            public static void deleteDirContents(File path) {
>                  if( path.exists() ) {
>                    File[] files = path.listFiles();
>                    for(int i=0; i<files.length; i++) {
>                       if(files[i].isFile()) {
>                        files[i].delete();
>                       }
>                    }
>                  }
>             }
> 
> 
> 
> }
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 29 18:51:05 2010
Return-Path: <java-user-return-47352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81482 invoked from network); 29 Sep 2010 18:51:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Sep 2010 18:51:04 -0000
Received: (qmail 11115 invoked by uid 500); 29 Sep 2010 18:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11035 invoked by uid 500); 29 Sep 2010 18:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11027 invoked by uid 99); 29 Sep 2010 18:51:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Sep 2010 18:51:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Sep 2010 18:50:54 +0000
Received: from serve.stimulussoft.com (localhost.localdomain [127.0.0.1])
	by serve.stimulussoft.com (Postfix) with ESMTP id A090810738
	for <java-user@lucene.apache.org>; Wed, 29 Sep 2010 11:50:32 -0700 (PDT)
Received: by serve.stimulussoft.com (Postfix, from userid 5001)
	id 8A77A10747; Wed, 29 Sep 2010 11:50:32 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on
	serve.stimulussoft.com
X-Spam-Level: 
Received: from Jamie-Bands-MacBook-Pro.local (196-210-169-220.dynamic.isadsl.co.za [196.210.169.220])
	by serve.stimulussoft.com (Postfix) with ESMTPA id 727C310738
	for <java-user@lucene.apache.org>; Wed, 29 Sep 2010 11:50:30 -0700 (PDT)
Message-ID: <4CA38A5F.1000100@stimulussoft.com>
Date: Wed, 29 Sep 2010 20:50:07 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
References: <4CA37BD8.8050608@stimulussoft.com> <006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
In-Reply-To: <006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
Content-Type: multipart/alternative;
 boundary="------------030301090104010706040202"
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.4 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_MESSAGE autolearn=ham version=3.2.4

--------------030301090104010706040202
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

  Hi Uwe

Thanks in advance for your help. Well, I just tried searching again and 
it made no difference. My LuceneIndex getReader() function
will call writer.getReader() on occasion or return a cached copy. To 
make sure that IndexReader's are closed when they are no longer needed,
I wrap the IndexReader as follows:

public class VolumeIndexReader extends FilterIndexReader {

     public VolumeIndexReader(IndexReader in) {
         super(in);
     }

     public void finalize() {
         try { in.close(); } catch (Exception e) {}
     }

     public IndexReader reopen(boolean readonly) throws IOException {
         return super.reopen(readonly);
     }
}

You'll notice finalizer calls IndexReader.close(). After users conduct 
multiple searches, the index reader should be closed in time. Therefore,
its confusing to me to see that open handles are still present. Clearly, 
I am doing something wrong, but what?

Jamie



On 2010/09/29 8:21 PM, Uwe Schindler wrote:
> The "deleted" files are only freed by OS kernel if no longer an IndexReader
> accesses them. Did you get a new realtime reader after merging and*closed*
> the old one?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail:uwe@thetaphi.de


--------------030301090104010706040202--

From java-user-return-47353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 00:21:18 2010
Return-Path: <java-user-return-47353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91043 invoked from network); 30 Sep 2010 00:21:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 00:21:17 -0000
Received: (qmail 82516 invoked by uid 500); 30 Sep 2010 00:21:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82309 invoked by uid 500); 30 Sep 2010 00:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82277 invoked by uid 99); 30 Sep 2010 00:21:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 00:21:14 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of sirishreddy@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 00:21:08 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <sirishreddy@gmail.com>)
	id 1P16tD-0001WV-54
	for java-user@lucene.apache.org; Wed, 29 Sep 2010 17:20:47 -0700
Date: Wed, 29 Sep 2010 17:20:47 -0700 (PDT)
From: Sirish Vadala <sirishreddy@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1285806047151-1605904.post@n3.nabble.com>
In-Reply-To: <AANLkTinZ615UXnN1Zg3ZzNNsU-rmn9TEd7VoQbGaYTYj@mail.gmail.com>
References: <1284658758220-1501269.post@n3.nabble.com> <AANLkTinZ615UXnN1Zg3ZzNNsU-rmn9TEd7VoQbGaYTYj@mail.gmail.com>
Subject: Re: Problem searching in the same sentence
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hello All:

I am performing the sentence specific phrase search, by adding sentence by
sentence to the same field as suggested below. Everything works fine, but
when I display my results, highlighter is not able to find the search text
phrase.

The following is my code:

SentenceScanner sentenceScanner = new
SentenceScanner(doc.getText().replaceAll("\\s+", " "));
ArrayList<String> sentencesList = sentenceScanner.getAllSentences();
for (String sentence : sentencesList){
	addFieldToDocument(document, IFIELD_TEXT, sentence, true, true);
}

private void addFieldToDocument(Document document, String fieldName,
	String fieldValue, Boolean store, Boolean tokenize) {
	String validFieldValue = Utility.validateString(fieldValue);
	Field field = new Field(fieldName, validFieldValue,
			(store) ? Field.Store.YES : Field.Store.NO,
			(tokenize) ? Field.Index.ANALYZED : Field.Index.NOT_ANALYZED);
	document.add(field);
}

My custom standard analyzer:

public class MyStandardAnalyzer extends StandardAnalyzer implements
IndexFields {
	public MyStandardAnalyzer(Version matchVersion) {
		super(matchVersion);
	}
	public int getPositionIncrementGap(String fieldName) {
		int incrementGap = super.getPositionIncrementGap(fieldName);
		if (fieldName.equals(IFIELD_TEXT)) {
			incrementGap += 10;
		}
		return incrementGap;
	}
}

My highlighter code:

//analyzer instantiated as 'MyStandardAnalyzer' in the constructor
public String highlight(String text) {
   String highlightedText = "";
   TokenStream tokenStream = analyzer.tokenStream(IndexFields.IFIELD_TEXT,
new StringReader(text));
   highlighter.setMaxDocCharsToAnalyze(Integer.MAX_VALUE);
   try {
	return highlighter.getBestFragments(tokenStream, text,
			maxFragments, delimiter);
   } catch (Exception e) {
	e.printStackTrace();
   } 
	return highlightedText;
}

Everything works fine except for the highlighter. Highlighter doesn't return
me the text snippets while retrieving the results. Before this sentence
specific implementation, it worked well.

Any hints or help on this would be highly appreciated.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Problem-searching-in-the-same-sentence-tp1501269p1605904.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 06:14:07 2010
Return-Path: <java-user-return-47354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82653 invoked from network); 30 Sep 2010 06:14:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 06:14:07 -0000
Received: (qmail 92607 invoked by uid 500); 30 Sep 2010 06:14:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92163 invoked by uid 500); 30 Sep 2010 06:14:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92155 invoked by uid 99); 30 Sep 2010 06:14:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 06:14:00 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [70.182.184.44] (HELO mailsecurity.capitallegals.com) (70.182.184.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 06:13:55 +0000
X-AuditID: c0a8032b-b7bd6ae000000d34-d8-4ca42a8dac02
Received: from Cmail.Capitallegals.com (cmail.capitallegals.com [192.168.3.18])
	by mailsecurity.capitallegals.com (Symantec Mail Security) with SMTP id C2.60.03380.D8A24AC4; Thu, 30 Sep 2010 02:13:33 -0400 (EDT)
Received: from EXCHSVR.IN.Capitallegals.com ([10.1.2.10]) by Cmail.Capitallegals.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 30 Sep 2010 02:13:33 -0400
Content-class: urn:content-classes:message
Subject: RE: Problem searching in the same sentence
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 30 Sep 2010 11:43:25 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <B1B793DEA6F70E45B586B5DF2ADA0DF67C1907@EXCHSVR.IN.Capitallegals.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem searching in the same sentence
Thread-Index: ActgNWctJeWTojyhSmqY58SzSVO9xwAMJvpw
References: <1284658758220-1501269.post@n3.nabble.com> <AANLkTinZ615UXnN1Zg3ZzNNsU-rmn9TEd7VoQbGaYTYj@mail.gmail.com> <1285806047151-1605904.post@n3.nabble.com>
From: "Jagdish Vasani IN" <jvasani@in.Capitallegals.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Sep 2010 06:13:33.0351 (UTC) FILETIME=[9C2FF370:01CB6066]
X-Brightmail-Tracker: AAAAAA==

For highlighting to work you need to store position information of each
token...
So while field creation you need to call following constructor..
=20
	Field field =3D new Field(fieldName, validFieldValue,
			(store) ? Field.Store.YES : Field.Store.NO,
			(tokenize) ? Field.Index.ANALYZED :
Field.Index.NOT_ANALYZED, TermVector.WITH_POSITIONS_OFFSET);

Hope this will solve your issue..

Thanks,
Jagdish
-----Original Message-----
From: Sirish Vadala [mailto:sirishreddy@gmail.com]=20
Sent: Thursday, September 30, 2010 5:51 AM
To: java-user@lucene.apache.org
Subject: Re: Problem searching in the same sentence


Hello All:

I am performing the sentence specific phrase search, by adding sentence
by
sentence to the same field as suggested below. Everything works fine,
but
when I display my results, highlighter is not able to find the search
text
phrase.

The following is my code:

SentenceScanner sentenceScanner =3D new
SentenceScanner(doc.getText().replaceAll("\\s+", " "));
ArrayList<String> sentencesList =3D sentenceScanner.getAllSentences();
for (String sentence : sentencesList){
	addFieldToDocument(document, IFIELD_TEXT, sentence, true, true);
}

private void addFieldToDocument(Document document, String fieldName,
	String fieldValue, Boolean store, Boolean tokenize) {
	String validFieldValue =3D Utility.validateString(fieldValue);
	Field field =3D new Field(fieldName, validFieldValue,
			(store) ? Field.Store.YES : Field.Store.NO,
			(tokenize) ? Field.Index.ANALYZED :
Field.Index.NOT_ANALYZED);
	document.add(field);
}

My custom standard analyzer:

public class MyStandardAnalyzer extends StandardAnalyzer implements
IndexFields {
	public MyStandardAnalyzer(Version matchVersion) {
		super(matchVersion);
	}
	public int getPositionIncrementGap(String fieldName) {
		int incrementGap =3D
super.getPositionIncrementGap(fieldName);
		if (fieldName.equals(IFIELD_TEXT)) {
			incrementGap +=3D 10;
		}
		return incrementGap;
	}
}

My highlighter code:

//analyzer instantiated as 'MyStandardAnalyzer' in the constructor
public String highlight(String text) {
   String highlightedText =3D "";
   TokenStream tokenStream =3D
analyzer.tokenStream(IndexFields.IFIELD_TEXT,
new StringReader(text));
   highlighter.setMaxDocCharsToAnalyze(Integer.MAX_VALUE);
   try {
	return highlighter.getBestFragments(tokenStream, text,
			maxFragments, delimiter);
   } catch (Exception e) {
	e.printStackTrace();
   }=20
	return highlightedText;
}

Everything works fine except for the highlighter. Highlighter doesn't
return
me the text snippets while retrieving the results. Before this sentence
specific implementation, it worked well.

Any hints or help on this would be highly appreciated.
--=20
View this message in context:
http://lucene.472066.n3.nabble.com/Problem-searching-in-the-same-sentenc
e-tp1501269p1605904.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 08:56:06 2010
Return-Path: <java-user-return-47355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29010 invoked from network); 30 Sep 2010 08:56:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 08:56:06 -0000
Received: (qmail 21746 invoked by uid 500); 30 Sep 2010 08:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21423 invoked by uid 500); 30 Sep 2010 08:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21411 invoked by uid 99); 30 Sep 2010 08:55:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 08:55:59 +0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 08:55:52 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1D0CF45F22A
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 10:55:30 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lh+7xh+mQyWo for <java-user@lucene.apache.org>;
	Thu, 30 Sep 2010 10:55:20 +0200 (CEST)
Received: from VEGA (unknown [89.204.154.224])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 44CF745F221
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 10:55:20 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4CA37BD8.8050608@stimulussoft.com> <006d01cb6003$2f298650$8d7c92f0$@thetaphi.de> <4CA38A5F.1000100@stimulussoft.com>
In-Reply-To: <4CA38A5F.1000100@stimulussoft.com>
Subject: RE: File Handle Leaks During Lucene 3.0.2 Merge
Date: Thu, 30 Sep 2010 10:55:49 +0200
Message-ID: <000001cb607d$486b9660$d942c320$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQK1IASPuHD7fWK4tGfTUhRYh1Mz8AJQ2/brAf/iy3+RM2B2sA==
Content-Language: de

The finalize() thing does not work correctly, as the reader holds still
references to other stuff when not explicitely closed. As it references
them, the finalizer() is never called, as it is not to be gc'd.

You must close the reader explicit, that's all. So just close it afterusing.
With Near Realtime Search, you normally get an IR, then wrap it with
IndexSearcher, do your search, and close it after that. You can even call
writer.getReader() from different threads, refcounting will close the
readers correctly. So for each request, take a new one and close after
usage.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Jamie [mailto:jamie@stimulussoft.com]
> Sent: Wednesday, September 29, 2010 11:50 AM
> To: java-user@lucene.apache.org
> Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
> 
>   Hi Uwe
> 
> Thanks in advance for your help. Well, I just tried searching again and it
made
> no difference. My LuceneIndex getReader() function will call
> writer.getReader() on occasion or return a cached copy. To make sure that
> IndexReader's are closed when they are no longer needed, I wrap the
> IndexReader as follows:
> 
> public class VolumeIndexReader extends FilterIndexReader {
> 
>      public VolumeIndexReader(IndexReader in) {
>          super(in);
>      }
> 
>      public void finalize() {
>          try { in.close(); } catch (Exception e) {}
>      }
> 
>      public IndexReader reopen(boolean readonly) throws IOException {
>          return super.reopen(readonly);
>      }
> }
> 
> You'll notice finalizer calls IndexReader.close(). After users conduct
multiple
> searches, the index reader should be closed in time. Therefore, its
confusing to
> me to see that open handles are still present. Clearly, I am doing
something
> wrong, but what?
> 
> Jamie
> 
> 
> 
> On 2010/09/29 8:21 PM, Uwe Schindler wrote:
> > The "deleted" files are only freed by OS kernel if no longer an
> > IndexReader accesses them. Did you get a new realtime reader after
> > merging and*closed* the old one?
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail:uwe@thetaphi.de



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 09:27:06 2010
Return-Path: <java-user-return-47356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40281 invoked from network); 30 Sep 2010 09:27:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 09:27:05 -0000
Received: (qmail 60332 invoked by uid 500); 30 Sep 2010 09:27:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59521 invoked by uid 500); 30 Sep 2010 09:27:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59513 invoked by uid 99); 30 Sep 2010 09:26:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 09:26:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 09:26:51 +0000
Received: from serve.stimulussoft.com (localhost.localdomain [127.0.0.1])
	by serve.stimulussoft.com (Postfix) with ESMTP id C12B110747
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 02:26:30 -0700 (PDT)
Received: by serve.stimulussoft.com (Postfix, from userid 5001)
	id AA2371078C; Thu, 30 Sep 2010 02:26:30 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on
	serve.stimulussoft.com
X-Spam-Level: 
Received: from Jamie-Bands-MacBook-Pro.local (196-210-169-220.dynamic.isadsl.co.za [196.210.169.220])
	by serve.stimulussoft.com (Postfix) with ESMTPA id F396010747
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 02:26:28 -0700 (PDT)
Message-ID: <4CA457AE.8080203@stimulussoft.com>
Date: Thu, 30 Sep 2010 11:26:06 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
References: <4CA37BD8.8050608@stimulussoft.com> <006d01cb6003$2f298650$8d7c92f0$@thetaphi.de> <4CA38A5F.1000100@stimulussoft.com> <000001cb607d$486b9660$d942c320$@thetaphi.de>
In-Reply-To: <000001cb607d$486b9660$d942c320$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV using ClamSMTP
X-Old-Spam-Status: No, score=-4.4 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00
	autolearn=ham version=3.2.4

  Uwe

If I recall correctly when you call writer.getReader(), the returned 
IndexReader can consume alot of memory with large indexes. To ensure 
that the same index reader is reused across multiple search threads, I 
keep a cached copy of the reader and return it. If a search thread 
closes the reader, then it will be closed for the other search threads 
and the search will fail. From my test, the finalize method in 
VolumeIndexReader example I gave you is called. The file handle leaks 
are coming from the core index loop, where I call .commit() as opposed 
to closing the index. Since the writer stays open, handles left by merge 
operations are never deleted. A solution is too close the index 
periodically to force the handles to be swept up by the OS.

Jamie

On 2010/09/30 10:55 AM, Uwe Schindler wrote:
> The finalize() thing does not work correctly, as the reader holds still
> references to other stuff when not explicitely closed. As it references
> them, the finalizer() is never called, as it is not to be gc'd.
>
> You must close the reader explicit, that's all. So just close it afterusing.
> With Near Realtime Search, you normally get an IR, then wrap it with
> IndexSearcher, do your search, and close it after that. You can even call
> writer.getReader() from different threads, refcounting will close the
> readers correctly. So for each request, take a new one and close after
> usage.
>
> Uwe
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 09:28:54 2010
Return-Path: <java-user-return-47357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40475 invoked from network); 30 Sep 2010 09:28:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 09:28:53 -0000
Received: (qmail 62768 invoked by uid 500); 30 Sep 2010 09:28:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62470 invoked by uid 500); 30 Sep 2010 09:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62462 invoked by uid 99); 30 Sep 2010 09:28:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 09:28:48 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 09:28:42 +0000
Received: by wwb22 with SMTP id 22so570823wwb.5
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 02:28:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.5.21 with SMTP id 21mr389220wek.20.1285838900444; Thu, 30
 Sep 2010 02:28:20 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Thu, 30 Sep 2010 02:28:20 -0700 (PDT)
In-Reply-To: <000001cb607d$486b9660$d942c320$@thetaphi.de>
References: <4CA37BD8.8050608@stimulussoft.com>
	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
	<4CA38A5F.1000100@stimulussoft.com>
	<000001cb607d$486b9660$d942c320$@thetaphi.de>
Date: Thu, 30 Sep 2010 05:28:20 -0400
Message-ID: <AANLkTi=0H6cjoDt5MsWM1GsVMevpS1ZpFdBmQ2h2t_Qe@mail.gmail.com>
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Opening an NRT reader per-search can be too costly if you have a high
search rate.

It's better to rate-limit for that case, eg to at most 10X per second
(every 100 msec) reopens.  There's a useful class in the Lucene in
Action 2 source code (NOTE: I am a co-author), SearcherManager, which
simplifies this for you.  You can download the source code from
http://manning.com/lucene, but we are also in the process of donating
this source code to Lucene....

Also note that you need not worry about when Lucene does merges
under-the-hood.  Ie, Lucene takes care of this, and there's nothing
the app needs to "do" to handle merges & NRT readers, unless you want
to install a segment warmer that pre-warms newly merged segments
before making them visible to the next NRT reader (the SearcherManager
also makes this easy -- subclass it and override the warm method).

Mike

On Thu, Sep 30, 2010 at 4:55 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> The finalize() thing does not work correctly, as the reader holds still
> references to other stuff when not explicitely closed. As it references
> them, the finalizer() is never called, as it is not to be gc'd.
>
> You must close the reader explicit, that's all. So just close it afterusi=
ng.
> With Near Realtime Search, you normally get an IR, then wrap it with
> IndexSearcher, do your search, and close it after that. You can even call
> writer.getReader() from different threads, refcounting will close the
> readers correctly. So for each request, take a new one and close after
> usage.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Jamie [mailto:jamie@stimulussoft.com]
>> Sent: Wednesday, September 29, 2010 11:50 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
>>
>> =A0 Hi Uwe
>>
>> Thanks in advance for your help. Well, I just tried searching again and =
it
> made
>> no difference. My LuceneIndex getReader() function will call
>> writer.getReader() on occasion or return a cached copy. To make sure tha=
t
>> IndexReader's are closed when they are no longer needed, I wrap the
>> IndexReader as follows:
>>
>> public class VolumeIndexReader extends FilterIndexReader {
>>
>> =A0 =A0 =A0public VolumeIndexReader(IndexReader in) {
>> =A0 =A0 =A0 =A0 =A0super(in);
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0public void finalize() {
>> =A0 =A0 =A0 =A0 =A0try { in.close(); } catch (Exception e) {}
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0public IndexReader reopen(boolean readonly) throws IOExceptio=
n {
>> =A0 =A0 =A0 =A0 =A0return super.reopen(readonly);
>> =A0 =A0 =A0}
>> }
>>
>> You'll notice finalizer calls IndexReader.close(). After users conduct
> multiple
>> searches, the index reader should be closed in time. Therefore, its
> confusing to
>> me to see that open handles are still present. Clearly, I am doing
> something
>> wrong, but what?
>>
>> Jamie
>>
>>
>>
>> On 2010/09/29 8:21 PM, Uwe Schindler wrote:
>> > The "deleted" files are only freed by OS kernel if no longer an
>> > IndexReader accesses them. Did you get a new realtime reader after
>> > merging and*closed* the old one?
>> >
>> > -----
>> > Uwe Schindler
>> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > http://www.thetaphi.de
>> > eMail:uwe@thetaphi.de
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 09:34:03 2010
Return-Path: <java-user-return-47358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42841 invoked from network); 30 Sep 2010 09:34:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 09:34:03 -0000
Received: (qmail 69572 invoked by uid 500); 30 Sep 2010 09:34:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69284 invoked by uid 500); 30 Sep 2010 09:33:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69276 invoked by uid 99); 30 Sep 2010 09:33:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 09:33:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 09:33:51 +0000
Received: by wwb22 with SMTP id 22so574151wwb.5
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 02:33:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.12.8 with SMTP id 8mr364028wey.107.1285839210542; Thu, 30
 Sep 2010 02:33:30 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Thu, 30 Sep 2010 02:33:30 -0700 (PDT)
In-Reply-To: <4CA457AE.8080203@stimulussoft.com>
References: <4CA37BD8.8050608@stimulussoft.com>
	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
	<4CA38A5F.1000100@stimulussoft.com>
	<000001cb607d$486b9660$d942c320$@thetaphi.de>
	<4CA457AE.8080203@stimulussoft.com>
Date: Thu, 30 Sep 2010 05:33:30 -0400
Message-ID: <AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Comments inline...

On Thu, Sep 30, 2010 at 5:26 AM, Jamie <jamie@stimulussoft.com> wrote:
> =A0Uwe
>
> If I recall correctly when you call writer.getReader(), the returned
> IndexReader can consume alot of memory with large indexes

The reopened reader shares sub-readers with the previous one, so, if
all that's changed since a last reopen was flushing a small segment,
then the additional resources consumed will be small.

> To ensure that
> the same index reader is reused across multiple search threads, I keep a
> cached copy of the reader and return it. If a search thread closes the
> reader, then it will be closed for the other search threads and the searc=
h
> will fail.

It's good to cache the reader, but, finalize would worry me too since
you have no control over when GC gets around to calling it... you risk
tying up resources for longer than necessary.

> From my test, the finalize method in VolumeIndexReader example I
> gave you is called. The file handle leaks are coming from the core index
> loop, where I call .commit() as opposed to closing the index. Since the
> writer stays open, handles left by merge operations are never deleted. A
> solution is too close the index periodically to force the handles to be
> swept up by the OS.

IndexWriter has a reader pool, internally, where it holds open
SegmentReaders for the still-live segments in the index.  This is used
by IndexReader.reopen to share open SegmentReaders.

But the open files should correspond only to segments still "live" in
the index.  After segments are merged away, these readers are dropped.
 Is this what you are seeing?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 10:00:49 2010
Return-Path: <java-user-return-47359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49830 invoked from network); 30 Sep 2010 10:00:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 10:00:48 -0000
Received: (qmail 92547 invoked by uid 500); 30 Sep 2010 10:00:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92144 invoked by uid 500); 30 Sep 2010 10:00:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92136 invoked by uid 99); 30 Sep 2010 10:00:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 10:00:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 10:00:34 +0000
Received: from serve.stimulussoft.com (localhost.localdomain [127.0.0.1])
	by serve.stimulussoft.com (Postfix) with ESMTP id A7D4710747
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 03:00:12 -0700 (PDT)
Received: by serve.stimulussoft.com (Postfix, from userid 5001)
	id 96A1E1078E; Thu, 30 Sep 2010 03:00:12 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on
	serve.stimulussoft.com
X-Spam-Level: 
Received: from Jamie-Bands-MacBook-Pro.local (196-210-169-220.dynamic.isadsl.co.za [196.210.169.220])
	by serve.stimulussoft.com (Postfix) with ESMTPA id 91C1D10747
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 03:00:10 -0700 (PDT)
Message-ID: <4CA45F93.4000503@stimulussoft.com>
Date: Thu, 30 Sep 2010 11:59:47 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
References: <4CA37BD8.8050608@stimulussoft.com>	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>	<4CA38A5F.1000100@stimulussoft.com>	<000001cb607d$486b9660$d942c320$@thetaphi.de>	<4CA457AE.8080203@stimulussoft.com> <AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>
In-Reply-To: <AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00
	autolearn=ham version=3.2.4

  Hi Michael / Uwe

 >It's good to cache the reader, but, finalize would worry me too since
 >you have no control over when GC gets around to calling it... you risk
 >tying up resources for longer than necessary.

I did it this way, as I didn't want to over complicate the code by 
introducing mechanisms to track the number of search threads using a 
shared indexreader. Admittedly, its not a very clean solution but in my 
case it does work. Is there a particular technique for knowing when to a 
close a reader when there are multiple search threads using that reader? 
Should I keep some kind of counter and override the close method of the 
reader such that the underlying reader is only closed when everyone's 
done with it?
> IndexWriter has a reader pool, internally, where it holds open
> SegmentReaders for the still-live segments in the index.  This is used
> by IndexReader.reopen to share open SegmentReaders.
>
> But the open files should correspond only to segments still "live" in
> the index.  After segments are merged away, these readers are dropped.
>   Is this what you are seeing?
>
I dont fully understand your explanation/question. When I run lsof, I am 
seeing the following:

/usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyr.cfs 
(deleted)
/usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyp.cfs 
(deleted)

I assume these are left by the OS after the merge operation tried to 
delete old segments. The OS is unable to delete the files. I think its 
because our new code never closes the indexwriter, but rather uses the 
indexwriter.commit() method to apply the changes. Is this correct?

Jamie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 10:12:15 2010
Return-Path: <java-user-return-47360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56042 invoked from network); 30 Sep 2010 10:12:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 10:12:14 -0000
Received: (qmail 4159 invoked by uid 500); 30 Sep 2010 10:12:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3931 invoked by uid 500); 30 Sep 2010 10:12:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3923 invoked by uid 99); 30 Sep 2010 10:12:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 10:12:08 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 10:11:59 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 6A4A945F149
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 12:11:39 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id bIBW4Tgzyq1i for <java-user@lucene.apache.org>;
	Thu, 30 Sep 2010 12:11:37 +0200 (CEST)
Received: from VEGA (unknown [89.204.154.224])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 8C2A245E639
	for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 12:11:36 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4CA37BD8.8050608@stimulussoft.com>	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>	<4CA38A5F.1000100@stimulussoft.com>	<000001cb607d$486b9660$d942c320$@thetaphi.de>	<4CA457AE.8080203@stimulussoft.com> <AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com> <4CA45F93.4000503@stimulussoft.com>
In-Reply-To: <4CA45F93.4000503@stimulussoft.com>
Subject: RE: File Handle Leaks During Lucene 3.0.2 Merge
Date: Thu, 30 Sep 2010 12:12:06 +0200
Message-ID: <000401cb6087$f018ce00$d04a6a00$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQK1IASPuHD7fWK4tGfTUhRYh1Mz8AJQ2/brAf/iy38B6P+tvQKZsL4xAcbXWDIBzpQnwpDziEdA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jamie,
>  >It's good to cache the reader, but, finalize would worry me too since
>you
> have no control over when GC gets around to calling it... you risk  >tying
up
> resources for longer than necessary.
> 
> I did it this way, as I didn't want to over complicate the code by
introducing
> mechanisms to track the number of search threads using a shared
indexreader.
> Admittedly, its not a very clean solution but in my case it does work. Is
there a
> particular technique for knowing when to a close a reader when there are
> multiple search threads using that reader?
> Should I keep some kind of counter and override the close method of the
> reader such that the underlying reader is only closed when everyone's done
> with it?

The easiest would be an AtomicInteger for each cached reader that gets
incremented before you start a search and decremented on finishing search.
You can safely close the reader, when the integer is 0.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 11:30:06 2010
Return-Path: <java-user-return-47361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77187 invoked from network); 30 Sep 2010 11:30:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 11:30:05 -0000
Received: (qmail 59432 invoked by uid 500); 30 Sep 2010 11:30:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59049 invoked by uid 500); 30 Sep 2010 11:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59034 invoked by uid 99); 30 Sep 2010 11:29:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 11:29:58 +0000
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FREEMAIL_FROM,HTML_IMAGE_ONLY_16,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_REMOTE_IMAGE,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of id.navs@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 11:29:53 +0000
Received: by gyb13 with SMTP id 13so969229gyb.35
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 04:29:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=fqI/mOvfdReMmj6Rf0LGyaWpESG7R2JidS6SUJb22HI=;
        b=YhcDf866htCIRwFTukPNo15o+9552V3FkbvLS+8dSe+jt+/9ylTU1Gib2HVR/7yc4C
         Gq0cMHVO/4K+whUZ5znAU6/fy/BnbXk/5r8pzFKX7bMStfXPCukXjG05WC8LuAude7zk
         gvEsFn2h1I7zT7oj1Aj+IOx5YRn4ps0UGrCJ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=jmWWPdo5rtRYcq3Mgd2oaHfrFFw9HpqNygiv7oyXk+V3XehZ3aLsjhKX4TephGnDxw
         s3CphbRTDxR8viTRE/zzSmDHLpIeQpmUX6rBOam3JWIb8+lN++jeW4K/UWCcideCrSRE
         7s51gD4Fshp+9bn6cH8lXbz/8PkKEp/LpZ+Io=
MIME-Version: 1.0
Received: by 10.90.30.4 with SMTP id d4mr144475agd.186.1285846173170; Thu, 30
 Sep 2010 04:29:33 -0700 (PDT)
Received: by 10.91.37.9 with HTTP; Thu, 30 Sep 2010 04:29:33 -0700 (PDT)
Date: Thu, 30 Sep 2010 16:59:33 +0530
Message-ID: <AANLkTi=OyBBpf_ZBAYeYfyPY3Z8W8DgpgtfmRrLDdgpT@mail.gmail.com>
Subject: Merge policy, optimization for small frequently changing indexes.
From: Naveen Kumar <id.navs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ed932633bb30491786466

--0016364ed932633bb30491786466
Content-Type: text/plain; charset=ISO-8859-1

Hi
I have a Very large number (say 3 million) of frequently changing Small
indexes. 90% of these indexes contain about 50 documents, while a few 2-3%
indexes have about 100,000 documents each (these being the more frequently
used indexes).
Each index belongs to a signed in user, thus can have unpredictable index
changes, in short periods of time, or can be stagnant for a long time.
What kind of indexing policy (mergefactor, maxmergedocs) would be optimal
for this kind of index. Is optimizing for this kind of index needed? or
wise?, if yes, what would be a good way to optimize (please note number of
indexes are very large).

Any suggestions would be very helpful.

-- 
Thanks
Naveen Kumar

--0016364ed932633bb30491786466--

From java-user-return-47362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 12:42:20 2010
Return-Path: <java-user-return-47362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10629 invoked from network); 30 Sep 2010 12:42:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 12:42:20 -0000
Received: (qmail 36780 invoked by uid 500); 30 Sep 2010 12:42:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36277 invoked by uid 500); 30 Sep 2010 12:42:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36269 invoked by uid 99); 30 Sep 2010 12:42:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 12:42:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of algoharyalex@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 12:42:07 +0000
Received: by yxn22 with SMTP id 22so1022788yxn.35
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 05:41:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=4B43lMPvL0jNh/ZGIW7xhBoHmoeXizWHJe2QV/ekbcE=;
        b=lTgpapU3ix6MfBz+8QtuxdB0WUgGyW5iiteTVPl8EQYMk/VE9Qs/Vt+WKkWjfrqyRJ
         a2Z4mgmIknFr/mqwHSTatnonFLiKkrI2udzAhTDP33OVlpCUoZtB/bkRKqYM/XlXHmZF
         0tD4EBmZBxn2ZUrmkIQLDSjqadqNBFWLlyOZs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=iDFf9K6IgTIv+PV9uUzP6vfqT6j+8oNDhBPq6IJsqZN5CzfiNrXfk9q06iuUeaBV0O
         9+59FGf/tgof3vgbb0rSw8qoT2vBELbmuNtS4Edm9r20Uh3phQLaCnvV5xJvIiviCsoM
         Q/zKE8vsreOwVUZFl+2vJFJbJKQb1xP5Lqddo=
Received: by 10.224.19.200 with SMTP id c8mr2535622qab.129.1285850506867; Thu,
 30 Sep 2010 05:41:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.218.20 with HTTP; Thu, 30 Sep 2010 05:41:18 -0700 (PDT)
From: ahmed algohary <algoharyalex@gmail.com>
Date: Thu, 30 Sep 2010 15:41:18 +0300
Message-ID: <AANLkTi=ER_-PhZJJmDgG+HbMZrEJ0q6+zp1q4rQw69__@mail.gmail.com>
Subject: How Does Fuzzy Query Work ??
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb262b23759049179666c

--0015175cb262b23759049179666c
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I wonder how lucene FuzzyQuery works as it seems to take much longer time
than a normal query. Does it generate all the possible terms and search for
them ??

--
Ahmed Elgohary

--0015175cb262b23759049179666c--

From java-user-return-47363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 18:25:03 2010
Return-Path: <java-user-return-47363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38420 invoked from network); 30 Sep 2010 18:25:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 18:25:02 -0000
Received: (qmail 63112 invoked by uid 500); 30 Sep 2010 18:25:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63060 invoked by uid 500); 30 Sep 2010 18:24:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63052 invoked by uid 99); 30 Sep 2010 18:24:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 18:24:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 18:24:53 +0000
Received: by wyb34 with SMTP id 34so37826wyb.35
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 11:24:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=i/osQQUrdlCLv+jMDEuwp375TwnGLC0h85wJufER5Wk=;
        b=ppWfIF65LgsQkcnDjdkEyvWgt45uXa1ukyrTUiqkh481gA251/AMfVPZeNMxtS4oLp
         zwF/97afFdwwD+ma49+RblFXsQI38WkaorZXpZ2zof6K7Voc6A2gHE1VhAODL20U92pm
         sh7ByfulkSqgxVqMD4cDYIJAyccOyphHr1mVM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=SgVF3aY+drjt3+12KIMocB0cnYblPWt8KGfTauWxT3k20nM6RdR86w3VTIZLk96Jjt
         kNv5BhBb9d8QpEILuguY3fAMDaNS1zyKVYC6p8NgWKwQZhSMWqeRr7ccB9fi7BFDjpV4
         Z2LB9oI2F2HkRcM77C5ym7FPvj/5vCZD/LM1Y=
MIME-Version: 1.0
Received: by 10.216.188.209 with SMTP id a59mr1059167wen.87.1285871071838;
 Thu, 30 Sep 2010 11:24:31 -0700 (PDT)
Received: by 10.216.192.25 with HTTP; Thu, 30 Sep 2010 11:24:31 -0700 (PDT)
Date: Thu, 30 Sep 2010 14:24:31 -0400
Message-ID: <AANLkTik6L9+RVj9RKz64pXh-zhHt1r2ZTfPMgOwK+Hr6@mail.gmail.com>
Subject: how to get the first term from index?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d1bd776c14504917e3013

--0016364d1bd776c14504917e3013
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I need to get the first term in my index and iterate it. Can anybody help
me?

Best.

--0016364d1bd776c14504917e3013--

From java-user-return-47364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 18:34:51 2010
Return-Path: <java-user-return-47364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41267 invoked from network); 30 Sep 2010 18:34:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 18:34:51 -0000
Received: (qmail 85745 invoked by uid 500); 30 Sep 2010 18:34:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85168 invoked by uid 500); 30 Sep 2010 18:34:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84947 invoked by uid 99); 30 Sep 2010 18:34:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 18:34:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 18:34:41 +0000
Received: by wwb22 with SMTP id 22so1043264wwb.5
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 11:34:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=FThIisNoSUbxg9Ihl9+q8lZGFTUFtFg/ZxDVu/TEg4g=;
        b=X4UstGYdL/98QopYil2G/Xo+lJTE1KF+ivxKHyP21Dx5FVdm7oYAPvdLgquZ7nvzwn
         JomaVPft4y3ayRGGuFkCiwyO2UzqSWYN+SooM1SyvGcVDSNVxvVnHyeb4W/Hco/9SQrr
         5r6PpXWX+1iknhDTxOpezBu3Mk4r+QWGVgWN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=St9XABw+no+uIcQrwQUc0jWw6MWbeaDta98/Srdg1PHJafhnAXcetiHV0y0K3Nhq2h
         SSSPgKHGlFDS8LpkgJq5nL1NJN4bOzUadUTEdRfAxAEfhGviUWR1OF4R4KeUjqAM7W/D
         E/8H0Ujn555qJVzDBwnglC81koKP4DiZc78x4=
Received: by 10.227.24.139 with SMTP id v11mr3598737wbb.100.1285871660595;
 Thu, 30 Sep 2010 11:34:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.150.194 with HTTP; Thu, 30 Sep 2010 11:34:00 -0700 (PDT)
In-Reply-To: <AANLkTik6L9+RVj9RKz64pXh-zhHt1r2ZTfPMgOwK+Hr6@mail.gmail.com>
References: <AANLkTik6L9+RVj9RKz64pXh-zhHt1r2ZTfPMgOwK+Hr6@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Fri, 1 Oct 2010 00:04:00 +0530
Message-ID: <AANLkTikAg6AuhE7W+_OTrsyk8=bjYaGzzP2Z8HYndtc+@mail.gmail.com>
Subject: Re: how to get the first term from index?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=002215975a328e794904917e5307

--002215975a328e794904917e5307
Content-Type: text/plain; charset=ISO-8859-1

Hi Sahin,
Incase you intend to get an enumerator on the terms in an index, you could
use the following call [indexreader.terms()] from IndexReader to get the
enumerator on terms and just iterate.

http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/IndexReader.html#terms()
Hope this is what you intended!

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Thu, Sep 30, 2010 at 11:54 PM, Sahin Buyrukbilen <
sahin.buyrukbilen@gmail.com> wrote:

> Hi all,
>
> I need to get the first term in my index and iterate it. Can anybody help
> me?
>
> Best.
>

--002215975a328e794904917e5307--

From java-user-return-47365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 19:07:10 2010
Return-Path: <java-user-return-47365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52985 invoked from network); 30 Sep 2010 19:07:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 19:07:10 -0000
Received: (qmail 39860 invoked by uid 500); 30 Sep 2010 19:07:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39687 invoked by uid 500); 30 Sep 2010 19:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39676 invoked by uid 99); 30 Sep 2010 19:07:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 19:07:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahin.buyrukbilen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 19:07:01 +0000
Received: by wyb34 with SMTP id 34so106651wyb.35
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 12:06:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=XgbiE1dKOefMELAdWZeJBUxKRk6O7afZk8gGiFYpcgU=;
        b=Y4KAU9Gj5NpiK+hi7I7wxhzGUaH6HdtH1B8jNKx6+BwGI/VQH6tG90SKjBu+i5XWke
         N9KA08Yi2s10xu6pU2lqHw+8xzv4T+zLmcC7/G53yG7jQ0hkXDyq2Q9ZypEUf1xvmyWs
         R9jDTWe84ex/sWRh+g11mOklr6+23RfZfYUqo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=P8mMhoLAAc62abPapERAwTCRjOB7stFgTCVkWg9vVtbZk39v+L61niFnO6LmLZvBmo
         Qd53lNpaFVVgW0LH3DOtU5VMF3xw0IP/7+llckln+Vv2dDLX4yjhPEfDdUtqUDN61hHF
         cj3BszE1bR3O5q2OPcYnZ7tPIYSHWiiWYdT6g=
MIME-Version: 1.0
Received: by 10.216.175.12 with SMTP id y12mr1125072wel.61.1285873600172; Thu,
 30 Sep 2010 12:06:40 -0700 (PDT)
Received: by 10.216.192.25 with HTTP; Thu, 30 Sep 2010 12:06:40 -0700 (PDT)
In-Reply-To: <AANLkTikAg6AuhE7W+_OTrsyk8=bjYaGzzP2Z8HYndtc+@mail.gmail.com>
References: <AANLkTik6L9+RVj9RKz64pXh-zhHt1r2ZTfPMgOwK+Hr6@mail.gmail.com>
	<AANLkTikAg6AuhE7W+_OTrsyk8=bjYaGzzP2Z8HYndtc+@mail.gmail.com>
Date: Thu, 30 Sep 2010 15:06:40 -0400
Message-ID: <AANLkTikaTbmxnGF7zevOO7g8mdAWpyBKpO2WKKaxUHrt@mail.gmail.com>
Subject: Re: how to get the first term from index?
From: Sahin Buyrukbilen <sahin.buyrukbilen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364164e92a246404917ec716

--0016364164e92a246404917ec716
Content-Type: text/plain; charset=ISO-8859-1

Thank you Anshum, it seems to be working, I need to play with it.



On Thu, Sep 30, 2010 at 2:34 PM, Anshum <anshumg@gmail.com> wrote:

> Hi Sahin,
> Incase you intend to get an enumerator on the terms in an index, you could
> use the following call [indexreader.terms()] from IndexReader to get the
> enumerator on terms and just iterate.
>
>
> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/IndexReader.html#terms()<http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/IndexReader.html#terms%28%29>
> Hope this is what you intended!
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Thu, Sep 30, 2010 at 11:54 PM, Sahin Buyrukbilen <
> sahin.buyrukbilen@gmail.com> wrote:
>
> > Hi all,
> >
> > I need to get the first term in my index and iterate it. Can anybody help
> > me?
> >
> > Best.
> >
>

--0016364164e92a246404917ec716--

From java-user-return-47366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 19:17:29 2010
Return-Path: <java-user-return-47366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58525 invoked from network); 30 Sep 2010 19:17:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 19:17:29 -0000
Received: (qmail 59256 invoked by uid 500); 30 Sep 2010 19:17:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59202 invoked by uid 500); 30 Sep 2010 19:17:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59194 invoked by uid 99); 30 Sep 2010 19:17:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 19:17:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 19:17:21 +0000
Received: by fxm5 with SMTP id 5so2318677fxm.35
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 12:17:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=PsVsJepNfCQL9H5O221tBFhyQC8upscbdD2fHdOg1ZY=;
        b=KkrshBeFIkPpRZUMQB5E0sqlHFr60yfC7LjMwMR1JH21PVJzIP++/0sbx4ZdeArGqw
         X4Z0+kIAKMknas1H1cO95Yp24WjPGvhYkmNltTtBAX0TcL84KQaF0oiHPZE/oH0etLif
         N9yd0e9qD+v68/mQPAbq1wVcy5YjR/mRotuqw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=QB6YS7h1uf8ID6P3q6ttXZtnAi2JIhBUv/lM73vl06iVIdardqUzfvlgUqlkl2x3Tb
         WkoReF1Pgcd4GTelPEl2MKg8wSNdY9K14iiv1RIhLCdw/Btig6BJRRwHYDS2HesTuDm8
         51wqgOr/bP3mbBiqbWo9A9eXpAV2IJ1P0+IdQ=
Received: by 10.223.114.132 with SMTP id e4mr4266416faq.104.1285874220021;
 Thu, 30 Sep 2010 12:17:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.106.19 with HTTP; Thu, 30 Sep 2010 12:16:39 -0700 (PDT)
In-Reply-To: <AANLkTi=ER_-PhZJJmDgG+HbMZrEJ0q6+zp1q4rQw69__@mail.gmail.com>
References: <AANLkTi=ER_-PhZJJmDgG+HbMZrEJ0q6+zp1q4rQw69__@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 30 Sep 2010 15:16:39 -0400
Message-ID: <AANLkTinzjML+D2YM2UA=TEji-zN46sY1KPytA0Sx_x+x@mail.gmail.com>
Subject: Re: How Does Fuzzy Query Work ??
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c598d81c3fa804917eece2

--001636c598d81c3fa804917eece2
Content-Type: text/plain; charset=UTF-8

On Thu, Sep 30, 2010 at 8:41 AM, ahmed algohary <algoharyalex@gmail.com>wrote:

> Hi all,
>
> I wonder how lucene FuzzyQuery works as it seems to take much longer time
> than a normal query. Does it generate all the possible terms and search for
> them ??
>
>
In current versions of lucene it is documented to be slow: "Warning: this
query is not very scalable with its default prefix length of 0 - in this
case, *every* term will be enumerated and cause an edit score calculation."
http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/search/FuzzyQuery.html

If you want it to be faster, use lucene trunk, which uses a different, more
sophisticated algorithm:
http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.16.652

-- 
Robert Muir
rcmuir@gmail.com

--001636c598d81c3fa804917eece2--

From java-user-return-47367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 21:07:19 2010
Return-Path: <java-user-return-47367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92841 invoked from network); 30 Sep 2010 21:07:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 21:07:19 -0000
Received: (qmail 16534 invoked by uid 500); 30 Sep 2010 21:07:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16476 invoked by uid 500); 30 Sep 2010 21:07:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16468 invoked by uid 99); 30 Sep 2010 21:07:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 21:07:16 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of sirishreddy@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 21:07:09 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <sirishreddy@gmail.com>)
	id 1P1QL3-0006N0-6j
	for java-user@lucene.apache.org; Thu, 30 Sep 2010 14:06:49 -0700
Date: Thu, 30 Sep 2010 14:06:49 -0700 (PDT)
From: Sirish Vadala <sirishreddy@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1285880809202-1611118.post@n3.nabble.com>
In-Reply-To: <B1B793DEA6F70E45B586B5DF2ADA0DF67C1907@EXCHSVR.IN.Capitallegals.com>
References: <1284658758220-1501269.post@n3.nabble.com> <AANLkTinZ615UXnN1Zg3ZzNNsU-rmn9TEd7VoQbGaYTYj@mail.gmail.com> <1285806047151-1605904.post@n3.nabble.com> <B1B793DEA6F70E45B586B5DF2ADA0DF67C1907@EXCHSVR.IN.Capitallegals.com>
Subject: RE: Problem searching in the same sentence
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


I have tried the below code:

Field field = new Field(fieldName, validFieldValue,
	(store) ? Field.Store.YES : Field.Store.NO,
	(tokenize) ? Field.Index.ANALYZED : Field.Index.NOT_ANALYZED,
	Field.TermVector.WITH_POSITIONS_OFFSETS);

However, I still have the same problem. It doesn't return me the highlight
snippets. Any other hints would be highly appreciated.

Thanks.
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Problem-searching-in-the-same-sentence-tp1501269p1611118.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 21:53:08 2010
Return-Path: <java-user-return-47368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5966 invoked from network); 30 Sep 2010 21:53:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 21:53:07 -0000
Received: (qmail 73401 invoked by uid 500); 30 Sep 2010 21:53:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73212 invoked by uid 500); 30 Sep 2010 21:53:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73204 invoked by uid 99); 30 Sep 2010 21:53:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 21:53:05 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 21:52:59 +0000
Received: by wyb34 with SMTP id 34so90463wyb.35
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 14:52:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.70.200 with SMTP id p50mr3641004wed.54.1285883558162; Thu,
 30 Sep 2010 14:52:38 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Thu, 30 Sep 2010 14:52:38 -0700 (PDT)
In-Reply-To: <000401cb6087$f018ce00$d04a6a00$@thetaphi.de>
References: <4CA37BD8.8050608@stimulussoft.com>
	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
	<4CA38A5F.1000100@stimulussoft.com>
	<000001cb607d$486b9660$d942c320$@thetaphi.de>
	<4CA457AE.8080203@stimulussoft.com>
	<AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>
	<4CA45F93.4000503@stimulussoft.com>
	<000401cb6087$f018ce00$d04a6a00$@thetaphi.de>
Date: Thu, 30 Sep 2010 17:52:38 -0400
Message-ID: <AANLkTi=4HKw+d6ZMhokPEzme=u1KYZi48K2tbE2j286L@mail.gmail.com>
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You can also use the IndexReader's incRef/decRef methods.

Mike

On Thu, Sep 30, 2010 at 6:12 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi Jamie,
>> =A0>It's good to cache the reader, but, finalize would worry me too sinc=
e
>>you
>> have no control over when GC gets around to calling it... you risk =A0>t=
ying
> up
>> resources for longer than necessary.
>>
>> I did it this way, as I didn't want to over complicate the code by
> introducing
>> mechanisms to track the number of search threads using a shared
> indexreader.
>> Admittedly, its not a very clean solution but in my case it does work. I=
s
> there a
>> particular technique for knowing when to a close a reader when there are
>> multiple search threads using that reader?
>> Should I keep some kind of counter and override the close method of the
>> reader such that the underlying reader is only closed when everyone's do=
ne
>> with it?
>
> The easiest would be an AtomicInteger for each cached reader that gets
> incremented before you start a search and decremented on finishing search=
.
> You can safely close the reader, when the integer is 0.
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 21:58:04 2010
Return-Path: <java-user-return-47369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8121 invoked from network); 30 Sep 2010 21:58:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 21:58:04 -0000
Received: (qmail 82327 invoked by uid 500); 30 Sep 2010 21:58:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82263 invoked by uid 500); 30 Sep 2010 21:58:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82255 invoked by uid 99); 30 Sep 2010 21:58:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 21:58:01 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 21:57:55 +0000
Received: by wwi18 with SMTP id 18so414081wwi.5
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 14:56:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.17.211 with SMTP id j61mr3677528wej.14.1285883780010; Thu,
 30 Sep 2010 14:56:20 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Thu, 30 Sep 2010 14:56:19 -0700 (PDT)
In-Reply-To: <4CA45F93.4000503@stimulussoft.com>
References: <4CA37BD8.8050608@stimulussoft.com>
	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
	<4CA38A5F.1000100@stimulussoft.com>
	<000001cb607d$486b9660$d942c320$@thetaphi.de>
	<4CA457AE.8080203@stimulussoft.com>
	<AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>
	<4CA45F93.4000503@stimulussoft.com>
Date: Thu, 30 Sep 2010 17:56:19 -0400
Message-ID: <AANLkTikWz0rG3YfEbX_3Og4vD=b8TaW81hGn-RhqXHwe@mail.gmail.com>
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Thu, Sep 30, 2010 at 5:59 AM, Jamie <jamie@stimulussoft.com> wrote:
> =A0Hi Michael / Uwe
>
>>It's good to cache the reader, but, finalize would worry me too since
>>you have no control over when GC gets around to calling it... you risk
>>tying up resources for longer than necessary.
>
> I did it this way, as I didn't want to over complicate the code by
> introducing mechanisms to track the number of search threads using a shar=
ed
> indexreader. Admittedly, its not a very clean solution but in my case it
> does work. Is there a particular technique for knowing when to a close a
> reader when there are multiple search threads using that reader? Should I
> keep some kind of counter and override the close method of the reader suc=
h
> that the underlying reader is only closed when everyone's done with it?

See Uwe's response (or SearcherManager).

>> IndexWriter has a reader pool, internally, where it holds open
>> SegmentReaders for the still-live segments in the index. =A0This is used
>> by IndexReader.reopen to share open SegmentReaders.
>>
>> But the open files should correspond only to segments still "live" in
>> the index. =A0After segments are merged away, these readers are dropped.
>> =A0Is this what you are seeing?
>>
> I dont fully understand your explanation/question. When I run lsof, I am
> seeing the following:
>
> /usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyr.cfs
> (deleted)
> /usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyp.cfs
> (deleted)
>
> I assume these are left by the OS after the merge operation tried to dele=
te
> old segments. The OS is unable to delete the files. I think its because o=
ur
> new code never closes the indexwriter, but rather uses the
> indexwriter.commit() method to apply the changes. Is this correct?

Ahh I see they are deleted but held open... hmmm.

Though this is also what you'd see if there were still a reader open.
Are you certain all readers were closed (finalized) when you ran lsof?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 30 22:04:37 2010
Return-Path: <java-user-return-47370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9767 invoked from network); 30 Sep 2010 22:04:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Sep 2010 22:04:37 -0000
Received: (qmail 93852 invoked by uid 500); 30 Sep 2010 22:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93806 invoked by uid 500); 30 Sep 2010 22:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93798 invoked by uid 99); 30 Sep 2010 22:04:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 22:04:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Sep 2010 22:04:27 +0000
Received: by wyb34 with SMTP id 34so104446wyb.35
        for <java-user@lucene.apache.org>; Thu, 30 Sep 2010 15:04:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.17.211 with SMTP id j61mr3677528wej.14.1285883780010; Thu,
 30 Sep 2010 14:56:20 -0700 (PDT)
Received: by 10.216.70.135 with HTTP; Thu, 30 Sep 2010 14:56:19 -0700 (PDT)
In-Reply-To: <4CA45F93.4000503@stimulussoft.com>
References: <4CA37BD8.8050608@stimulussoft.com>
	<006d01cb6003$2f298650$8d7c92f0$@thetaphi.de>
	<4CA38A5F.1000100@stimulussoft.com>
	<000001cb607d$486b9660$d942c320$@thetaphi.de>
	<4CA457AE.8080203@stimulussoft.com>
	<AANLkTin43PLTQKt5oLqd9GreaqUdnrR31cumF9BpBtnD@mail.gmail.com>
	<4CA45F93.4000503@stimulussoft.com>
Date: Thu, 30 Sep 2010 17:56:19 -0400
Message-ID: <AANLkTikWz0rG3YfEbX_3Og4vD=b8TaW81hGn-RhqXHwe@mail.gmail.com>
Subject: Re: File Handle Leaks During Lucene 3.0.2 Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Sep 30, 2010 at 5:59 AM, Jamie <jamie@stimulussoft.com> wrote:
> =A0Hi Michael / Uwe
>
>>It's good to cache the reader, but, finalize would worry me too since
>>you have no control over when GC gets around to calling it... you risk
>>tying up resources for longer than necessary.
>
> I did it this way, as I didn't want to over complicate the code by
> introducing mechanisms to track the number of search threads using a shar=
ed
> indexreader. Admittedly, its not a very clean solution but in my case it
> does work. Is there a particular technique for knowing when to a close a
> reader when there are multiple search threads using that reader? Should I
> keep some kind of counter and override the close method of the reader suc=
h
> that the underlying reader is only closed when everyone's done with it?

See Uwe's response (or SearcherManager).

>> IndexWriter has a reader pool, internally, where it holds open
>> SegmentReaders for the still-live segments in the index. =A0This is used
>> by IndexReader.reopen to share open SegmentReaders.
>>
>> But the open files should correspond only to segments still "live" in
>> the index. =A0After segments are merged away, these readers are dropped.
>> =A0Is this what you are seeing?
>>
> I dont fully understand your explanation/question. When I run lsof, I am
> seeing the following:
>
> /usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyr.cfs
> (deleted)
> /usr/local/mailarchiva/server/webapps/ROOT/WEB-INF/logs/index/_jyp.cfs
> (deleted)
>
> I assume these are left by the OS after the merge operation tried to dele=
te
> old segments. The OS is unable to delete the files. I think its because o=
ur
> new code never closes the indexwriter, but rather uses the
> indexwriter.commit() method to apply the changes. Is this correct?

Ahh I see they are deleted but held open... hmmm.

Though this is also what you'd see if there were still a reader open.
Are you certain all readers were closed (finalized) when you ran lsof?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


